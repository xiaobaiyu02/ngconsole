{"version":3,"sources":["webpack:///webpack/bootstrap 73c0292a4c28d0d1ccce","webpack:///./js/vdi/config.js","webpack:///./js/vdi/os-types.json","webpack:///./resources/info.json","webpack:///./js/ng/ng.controllers.js","webpack:///./js/ng/ng.directives.js","webpack:///./js/vdi/vdi.js","webpack:///./js/vdi/template/controllers.js","webpack:///./js/vdi/template/controller.teach.js","webpack:///./js/vdi/template/controller.person.js","webpack:///./js/vdi/template/controller.hardware.js","webpack:///./js/vdi/user/controllers.js","webpack:///./js/vdi/desktop/controllers.js","webpack:///./js/vdi/system/controllers.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_root.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isObject.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getNative.js","webpack:///./js/ng/ng.app.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseGetTag.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isObjectLike.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_ListCache.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_assocIndexOf.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Symbol.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_nativeCreate.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getMapData.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_toKey.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsEqual.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Map.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isFunction.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_MapCache.js","webpack:///./node_modules/_lodash@4.17.5@lodash/keys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isBuffer.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isTypedArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isLength.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isKey.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isSymbol.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Stack.js","webpack:///./node_modules/_lodash@4.17.5@lodash/eq.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_freeGlobal.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_toSource.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_equalArrays.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isArguments.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isIndex.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_overArg.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isStrictComparable.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_matchesStrictComparable.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseGet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_castPath.js","webpack:///./js/vdi/auth/controllers.js","webpack:///./js/vdi/summary/controllers.js","webpack:///./js/vdi/terminal/controller.schoolroom.js","webpack:///./js/vdi/terminal/controller.terminal.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isEqual.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsEqualDeep.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_listCacheClear.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_listCacheDelete.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_listCacheGet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_listCacheHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_listCacheSet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stackClear.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stackDelete.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stackGet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stackHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stackSet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsNative.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getRawTag.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_objectToString.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isMasked.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_coreJsData.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getValue.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapCacheClear.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Hash.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hashClear.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hashDelete.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hashGet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hashHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hashSet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapCacheDelete.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isKeyable.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapCacheGet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapCacheHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapCacheSet.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_SetCache.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_setCacheAdd.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_setCacheHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arraySome.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_cacheHas.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_equalByTag.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Uint8Array.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_mapToArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_setToArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_equalObjects.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getAllKeys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseGetAllKeys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arrayPush.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getSymbols.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arrayFilter.js","webpack:///./node_modules/_lodash@4.17.5@lodash/stubArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arrayLikeKeys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseTimes.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsArguments.js","webpack:///./node_modules/_lodash@4.17.5@lodash/stubFalse.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsTypedArray.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseUnary.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_nodeUtil.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseKeys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_isPrototype.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_nativeKeys.js","webpack:///./node_modules/_lodash@4.17.5@lodash/isArrayLike.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getTag.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_DataView.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Promise.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_Set.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_WeakMap.js","webpack:///./node_modules/_lodash@4.17.5@lodash/transform.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arrayEach.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseCreate.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseForOwn.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseFor.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_createBaseFor.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIteratee.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseMatches.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseIsMatch.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getMatchData.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseMatchesProperty.js","webpack:///./node_modules/_lodash@4.17.5@lodash/get.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_stringToPath.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_memoizeCapped.js","webpack:///./node_modules/_lodash@4.17.5@lodash/memoize.js","webpack:///./node_modules/_lodash@4.17.5@lodash/toString.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseToString.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_arrayMap.js","webpack:///./node_modules/_lodash@4.17.5@lodash/hasIn.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseHasIn.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_hasPath.js","webpack:///./node_modules/_lodash@4.17.5@lodash/identity.js","webpack:///./node_modules/_lodash@4.17.5@lodash/property.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_baseProperty.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_basePropertyDeep.js","webpack:///./node_modules/_lodash@4.17.5@lodash/_getPrototype.js","webpack:///./js/vdi/resource/controllers.js","webpack:///./js/vdi/resource/storage/controllers.js","webpack:///./js/vdi/resource/console/controllers.js","webpack:///./js/vdi/resource/pool/controllers.js","webpack:///./js/vdi/network/controllers.js","webpack:///./js/vdi/network/manageNetwork/controllers.js","webpack:///./js/vdi/network/virtualSwitch/controllers.js","webpack:///./js/vdi/network/dataNetwork/controllers.js","webpack:///./js/vdi/network/dhcp/controllers.js","webpack:///./js/vdi/monitor/controllers.js","webpack:///./js/vdi/scheduler/controllers.js","webpack:///./js/vdi/plan/controllers.js","webpack:///./js/vdi/HA/controllers.js","webpack:///./js/vdi/about/controllers.js","webpack:///./views/view-bundles.js"],"names":["window","$$$storage","getSessionStorage","key","sessionStorage","getItem","setSessionStorage","value","setItem","clearSessionStorage","clear","codeData","i18nData","imagesData","firstKey","ng","angular","module","supportedOems","getSupportedOEMs","currentOEM","host","location","hostname","hasBootstrap","domain","protocol","controllerDomain","interfaceDomain","vdiEnvironment","origin","main","constant","splitDomain","service","get","load","langCode","cb","loadOEMResources","factory","languages","Object","keys","map","currentLang","require","config","$httpProvider","interceptors","push","$q","$root","$$$MSG","test","url","withCredentials","reject","console","log","info","arguments","code","message","res","data","$broadcast","href","replace","ignoreAnyRequestError","$","bigBox","title","content","color","icon","timeout","bootstrap","oem","oemData","alert","lang","images","$body","document","body","theme","pathname","addClass","attr","fadeIn","$$$MAIN_MODULE","concat","error","when","getJSON","done","codeResponse","langResponse","imagesResponse","registerLazyService","fail","statusXhr","langXhr","status_ha","statusResponse","haResponse","JSON","parse","current_lang_type","isSplitBrain","result","is_split_brain","isInitPage","isPersonalLoginPage","isControlNode","is_control_node","isSplitBrainPage","start","roles","ip","initCurrentUser","length","navigator","language","split","toLowerCase","list","resources","ret","forEach","item","flagCode","name","translation","userId","ajax","method","stringify","user_id","dataType","oldInfo","user","controller","$scope","$route","$animate","settings","localize","setLang","directive","restrict","link","scope","element","attrs","on","e","preventDefault","$rootScope","ribbon","currentBreadcrumb","updateBreadcrumb","crumbs","breadCrumb","reverse","smartActions","userLogout","$this","SmartMessageBox","text","buttons","ButtonPressed","root_","setTimeout","logout","resetWidgets","widresetMSG","localStorage","reload","launchFullscreen","hasClass","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","removeClass","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","minifyMenu","toggleClass","effect","toggleMenu","toggleShortcut","shortcut_dropdown","is","shortcut_buttons_hide","shortcut_buttons_show","find","click","mouseup","target","has","animate","height","actionEvents","documentElement","isDefined","action","actionEvent","append","smartbgimage","fadeOut","prop","bind","$html","bgurl","css","$logo","removeClassPrefix","remove","prepend","breadcrumbs","$on","setBreadcrumb","$compile","$watch","newVal","oldVal","updateDOM","empty","crumb","li","localizeText","template","$http","$window","$RESOURCE","encodeHTML","txt","tmplReg","interestAttrReg","ready","currentLocaleData","getLangUrl","sourceText","translate","transkey","onAttrChange","tmpl","myhtml","match","index","myattr","html","v","k","$observe","isReady","$timeout","transclude","timer","timer_handle","topmenu","first","jarvismenu","accordion","speed","menu_speed","closedSign","openedSign","number","fn","slimScroll","getElement","navs","cancel","$location","isChild","active","isActive","viewLocation","path","hasIcon","hasIconCaption","iconCaption","getItemUrl","view","getItemTarget","$emit","parentCtrls","navCtrl","navgroupCtrl","setActive","openParents","parents","each","el","parent","trim","trigger","ctrl","items","loadItem","loadedItem","callback","onLoad","src","then","addItem","refresh","btn","currentTarget","button","onRefresh","total","activityCtrl","next","mytest","$badge","currentContent","loadContent","footer","newContent","oldContent","contentCtrl","setup_widget_desktop","jarvisWidgets","enableJarvisWidgets","grid","widgets","deleteSettingsKey","settingsKeyLabel","deletePositionKey","positionKeyLabel","sortable","buttonsHidden","toggleButton","toggleSpeed","onToggle","deleteButton","deleteClass","deleteSpeed","onDelete","editButton","editPlaceholder","editClass","editSpeed","onEdit","colorButton","fullscreenButton","fullscreenClass","fullscreenDiff","onFullscreen","customButton","customClass","customStart","customEnd","buttonOrder","opacity","dragHandle","placeholderClass","indicator","indicatorTime","timestampPlaceholder","timestampFormat","refreshButton","refreshButtonClass","labelError","labelUpdated","labelRefresh","labelDelete","afterLoad","rtl","onChange","onSave","ajaxnav","navAsAjax","setup_widget_mobile","enableMobileWidgets","setup_widgets_desktop","device","class","$$$IMAGES","iElm","iAttrs","modelCtrl","validate","val","vals","Array","isArray","reg","isvalide","every","parser","reduce","arr","b","formatter","join","undefined","viewChangeListener","$setValidity","$modelValue","$isEmpty","$parsers","$formatters","$viewChangeListeners","ngModel","isValid","format","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","RegExp","$1","getFullYear","substr","$modal","openModal","obj","init","delTips","delete_rows","delParm","nodelete_rows","nodelTips","open","$modalInstance","deleteName","row","nodeleteName","ok","close","size","users","selecteduser","node","selectUser","children","contents","$resource","$Domain","query","post","put","id","loadISO","save","filter","lun","isUndefined","vendor","type2str","local","iscsi","netfs","fc","type","stauts2str","running","building","stauts","$sce","trustAsHtml","slash","d","nat","bridge","vlan","toFixed","input","searchText","searchName","outPut","indexOf","$filterProvider","register","pageSize","totalPage","ceil","min","max","slice","$$$I18N","disabled","dialog","templateUrl","dialogUrl","dialogSize","dismiss","___dialog","$filter","getPosition","ele","st","scrollTop","sl","scrollLeft","cw","clientWidth","ch","clientHeight","sw","scrollWidth","sh","scrollHeight","ow","offsetWidth","oh","offsetHeight","x","pageX","y","pageY","getCurrentPage","Number","currentPage","getCurrentRows","getPageSize","pagesize","context_wrapper","hide","getFilterRows","rows","checkAll","_all","_ignore","_selected","checkedAll","selectAllChange","checkOne","some","sort","asc","a","pageSizeChange","pageChange","i","currentItem","de","handler","$apply","menu","offset","pos","top","left","stopPropagation","conroller","ctrls","getStart","current","getEnd","end","currentCount","getCurrentCount","$interval","dereg","fn_update_help_info","$$path","help_text","myTips","show","contextmenuDisabled","contextmenuEventName","lastText","btnUnable","steps","currentStep","moveWth","defaults","prevBtnText","nextBtnText","doneBtnText","stepIndex","go","select","step","s","selected","stepScope","getCurrentIndex","prev","getMarginValue","is_dirty","stepEventName","$$nextSibling","showPrev","isLast","doneEventName","addStep","jumpStep","removeStep","insertStep","_idx","wizardWth","outerWidth","_wth","eq","testValid","wizard","options","Highcharts","setOptions","global","useUTC","init_data","time","Date","getTime","$parent","refresh_time","hc_options","chart","renderTo","yAxis","series","highcharts","Chart","drawPoint","datetime","hc_series","drawpoint","reset_highcharts","destroy","newvalue","delegate","event","ip_pattern","elm","ngmodelctl","ngrequiredctl","viewValue","keyCode","numKey","ctrlKey","which","num","nextValue","isNaN","ngModelCtrl","required","ipRequired","$eval","CHECKTOOLS","checkIP","parts","numre","valid","parseInt","ipformatNum","pow","ip2long","checkRange","s_ip","e_ip","c","popEl","$input","after","$render","modelVal","modelValArr","$setPristine","idx","err","$setViewValue","nextEles","nextAll","focus","prevAll","selectionStart","selectionEnd","filtertext","lastFilter","lastFiltedResult","add_selected","getUsers","filterUser","copy","user_name","real_name","nodes","add_select_rows","$event","APIadmin","APIuser","APIdomain","expandedNodes","_users","seRows","rmRows","common_users","formatData","iteration","childName","len","_is_last","oldlen","splice","removeNoChildrenDeparts","noUserFilter","walk","dept_id","get_admin","deferred","defer","resolve","promise","get_user","query_tree","get_domain","all","typeName","userData","domain_users","_name","getLastLevelNodes","obj_levels","arrays","levels","remove_selected","lastRow2","shiftKey","begin_idx","end_idx","lastRow","add_remove_rows","ltor","rtol","last","menuItems","allMenuItems","apply","$templateCache","userNumber","priority","addMax","addMin","is_dot","String","temp","ctrKey","keydown","_code","_valsplit","add","round","setValidation","newval","exp","abs","org","XMLHttpRequest","org_open","prototype","allowUpload","FormData","uploadPool","finishHandel","upload_id","progressName","isUploading","percent","loaded","progressPercent","uploadISOSize","uiWebUpload","btnName","uiUploadBtnName","uiWebUploadTest","degfn","disableTest","filetype","form","checkConfig","file","uiUploadType","maxSize","uiUploadLimit","uiUploadUrl","Error","typematch","clearDOM","clone","progressSize","finish","success","response","files","uiWebUploadParams","uiWebUploadName","transformRequest","xhr","q","w","r","t","upload","addEventListener","position","totalSize","call","headers","btnClass","iconClass","abort","warn","task","UserRole","warnBox","toggleTaskList","taskTimer","clearTimeout","currentUser","schedule","ids","instances","clients","modes","manage_networks","personpools","lists","flag","postData","results","tasks","notifies","waringtype","ID","notify_id","Auth","desktopHelpBox","dms","dmsURL","$$$version","version","changeSkin","Role","loginUser","userInfo","alarm","AlarmHistory","isOpen","alarms","delete","setRead","nets","invalidArr","n","_data_dev","_dev","update","params","alter","query_sub","add_sub","get_sub","alter_sub","delete_sub","ports","handout","check","url_arry","urls","contentWindow","listModes","applyTemplate","status","modify","infor","spiceConnectInfo","virtualStatus","download","reset","get_image_vnc_info","get_image_rdp_info","sync","sync_status","bt_before_edit_template","bt_save_template","bt_prev_save_template","bt_sync_retry","bt_sync_repair","update_tpl_tip","admin","teachdesktop","$$$os_types","network","ResourcePool","manageTemplate","vm","networkWithHost","virtualHost","allrows","loading","pagesizes","orders","order","sortTem","created_at","_rows","type_code","sync_mode","syncFaildLen","sch","syncDownloading","syncFaild","syncing","updateInfor","updateSize","win_images","linux_images","other_images","os","os_type","teachNames","sameName","virtual_type","_controllerScope","newRows","shutdown","rows_active","instance_status","shutdowns","instance_ids","instance_id","syncTem","thistmpl","Retry","image_id","image","server_ip","server_id","Repair","noScense","min_namelength","max_namelength","is_copy","types1","types2","types","bind_ip_type","owners","owner","temCopy","temData","getVirtualHost","rbd_enabled","host_loading","hosts","getNetwork","switchIps","subnet","_scope","band_ips","getSubnets","Network","subnets","network_loading","host_uuid","networks","switchSubnet","bind_ip","bindIP","_ip","description","band_ip","band_type","undoSync","disabled_gpu","vcpus","ram","system_alloc_disk","oldData","subnet_id","getIps","cur_imgInfor","ip_address","curr_ip","network_id","addbtndisk","data_alloc_disk","data_alloc_disk_2","minusbtndisk","old_data_alloc_disk","old_data_alloc_disk_2","templateInfor","enable_gpu","isUnchanged","equals","submit_loading","template_name","gpu_auto_assignment","resetTemp","imgManage","IMG","imgType","formLocalData","dataResource","arry","host_ip","resource_pool_uuid","storages","hostArry","storage_name","storage_uuid","storage_type","imgs","storageArry","image_uuid","image_type","image_type_desc","has_image","has_instance","volume_type","volume_uuid","volume_status","formRemoteData","imgArry","getLocal","local_loading","locals","getRemote","remote_loading","remotes","new_pool","pools","p","pool","uuid","getlocalImages","updateVolume","volume","storage","img","remote","sendImg","newData","deleteImg","detail","formData","volumeId","inst_volumes","start_ip","end_ip","teach","hardware","iso","min_passwordLe","max_passwordLe","auto_isos","all_isos","hardware_templates","isos","support_auto_install","_this","names","install","isOther","arg","step_pane0","$invalid","$$childTail","showLoading","system_gb","popover","system_versions","system_version1","_types","_obj","newWindow","FLAG","gotoUrl","step_pane3","userPassword","userPasswordConfirm","scopes","auto_install","$$childHead","testWin10","cpu_num","local_gb","memory_mb","iso_path","iso_id","instance_type","username","userName","firmware_type","updateTem","isSuccess","targetScope","$promise","finally","registerTemplate","sys_isos","system_image","sys_iso","old_data_isos","data_image","getDataImgs","filterDataISO","data_iso","data_iso2","data_isos2","data_isos","data_isos1","systemImg","is_init","getRegisterTemplateForm","os_types","submiting","afterSubmiting","system_image_file","data_image_file","data_image_file_2","is_64","child","personalNames","personal","btndisks","edit","useNum","addharddisk","deleteharddisk","itemindex","navigators","$$$UserRoles","User","lastSessionPromise","lastRequestTime","role","getNavigator","userNavigators","role_copy","sublist","hasCache","now","refreshSession","logined","Boolean","currentUserRoles","isOwner","currentNavigator","currentSession","isAllowFilter","session","move","create","listDomain","asycing","UseradminList","loginName","last_login","sortIP","selected_rows","instance_num","UsercommonList","customModal","Depart","WIDTH","setData","full_path_map","setTreeData","DATA","full_path","treeOptFun","opts","treedata","expandnodes","showSelected","queryCommon","islastGroup","departId","user_loading","department","treedata_loading","queryDepart","$$search","depart","decodeURIComponent","addDepartment","deleteDpartment","modalOptions","modifyInfo","moveTo","draggable","isSelectable","selectedPerson","con","createElement","firstChild","removeChild","appendChild","ownerDocument","createTextNode","parentNode","innerHTML","param","finishUpload","suc","errorData","errorMsg","Server","servers","Domain","$routeParams","domainId","hash","oneKeySycing","powers","user_num","checked","_slide","_arrow","selectAll","slide","fatheritem","subitem","belong","set","allchecked","desc","toString","redactor","updated_time","access_key","master","access_roles","POWER","permission","schoolroom","_ischeckAll","sex","schoolroom_loading","querywithSimple","schoolrooms","pools_","DISABLED","changeRole","password","passwordConfirm","email","contact","myrole","schoolroom_id","PERMISSION","logInfor","role_desc","unshift","ous","auto","base_dn","select_row","fullname","removeSelected","_item","powerOn","powerOff","forcePowerOff","haConfig","pause","resume","reboots","screenshot","rename","reboot","migrate","saveAsTemplate","moveHostList","list_passive_disk","list_detail","update_instance","check_can_migrate_host","share_servers","base_url","list_snapshot","take_snapshot","restore_snapshot","delete_snapshot","get_live_move_hosts","live_move","list_template","field","_list","person_desktop","Admin","TreeInstances","hasTerminalpermission","hasTerminalManagepermission","hasClassroompermission","linkTerminal","inCurrentUserPool","filterSearch","filterSearchPage","task_state","other_status","getObjLength","_s","desk","user_group","allRows","updateData","detailData","getDetail","it","loading_detail","expand","_expand","openAddDomainDialog","is_domain_user","ad_server_name","modal","personExitDomain","domain_set_person","has_domain","dept_name","domain_name","selectMode","getAdminNum","count","desktop_num","adminData","admins","domains","commons","forceShutdown","natureShutdown","is_soft","restart","hasPausedStatus","_hasPaused","is_running","is_run","delete_disk","has_data_disk","force_delete_data","moveto","can_migrate_rows","can_migrate_host","moveto_loading","hosts_loading","migration","migrationTip","viewStorage","teach_desktop","getList","_id","_numa","_numb","get_num","tar","substring","display_name","mode_name","sortDesktopName","bool","vm_hostname","addZero","str_begin","str_end","end_len","hostNameType","hostNamePre","hostNameBegin","datas","scene","SchoolRoom","selectLoading","classrooms","_loginPool","_loginClassroom","user_ids","ownedIds","cachedPoolId","sceneData","getRealTimeRows","filterPages","filterPagesAndSeatches","getTotalCount","instances_count","getRunningCount","running_count","getShutdownCount","shutdown_count","getPausedCount","paused_count","getNostateCount","nostate_count","getErrorCount","error_count","getOtherCount","other_count","cacheValue","pid","isInClassrooms","room","sceneExitServerDialog","domain_set_scene","active_loadding","sortScene","scenes","has_running","has_active","has_run","restartScene","net","hardwares","server","PersonDesktop","regXP","regWin","step1","classroom","resource","resource_update","get_teach_template","allImages","templateNum","loading_template","winTable","linTable","otherTable","step2","loading_server","share_server","updateHardware","is_win7UP","is_winXP","is_win","usb_version","usb_redir","usb3_disabled","isWin","step3","desktopNum2","get_host","loading_host","is_all","desktopNum","query_gpu_agent","has_gpu","hosts_list","disabled_tips","disabled_desc","query_agent","h","host_storages","openMoreDialog","_hostids","moreDialog","step4","selectAllHost","_hosts","selectOneHost","getDesktopNumber2","_lis","clearRDP","RDP","userNameType","userNamePre","userNameBegin","clearDomain","sameSceneName","sceneName","bodyForm1","$valid","hardwareList","bodyForm2","MORE","hostType","bodyForm3","bodyForm4","regWin10","rollback","data_rollback","rollback_weekday","rollback_monthday","data_rollback_weekday","data_rollback_monthday","instance_max","servers_storage","image_storage_capacity","image_storage_performance","storage_capacity","storage_performance","hostname_type","hostname_prefix","hostname_beginwith","is_exam","username_type","username_prefix","username_beginwith","enable_share","share_server_ip","share_server_id","expand_enabled","submitting","personDesktop","need_ha","selectedServer","raw_need_ha","rollbackChange","min_instances","disk_type","usb3_editable","is_windows","_rollback","_data_rollback","server_ids","Scene","auto_scene","is_auto","cur","_actived","cur_idx","pre_idx","up","down","order_data","Person","max_instance","IPmodes1","IPmodes2","get_subnet","subnetworks","_desc","subnetwork","clearBindIp","get_personal_template","templates","IPmodes","IPmode","netid","is_gpu","host_loadding","toStrLong","ips","_prefix","check_net","netmask","enable_dhcp","_startIP","_endIP","_bindStartIP","sameDesktopName","desktopName","is_valid","select_users","resource_pool","ip_choose","instance_type_id","rule_id","rule","hardwrare","IPs","get_net","_network","get_sub_net","_subnetwork","get_disks","loading_disk","_user","disks","_is_open","admin_users","commonUser","dus","groups","g","all_users","is_dhcp","volumes","_local_gb","is_data_disk","vcpu","attach_volumes","get_list","snapshots","snapshot_name","display_description","editable","create_at","hasSaveButton","hasSubmit","_submitting","addNew","manuals","created_by","snapshot_volumes","restore","ad_server_id","recreate_sid","is_sid","Storage","Host","host_ids","phostids","pstore","get_luns","storage_hosts","sto","_total_size","storage_metadata","capabilities","total_capacity_gb","_free_size","free_capacity_gb","_used_size","change_host","sys_luns","data_luns","filterStorage","loading_lun","filter_storage","storage_id","device_type","node_uuid","_changed","okAll","currentItemDetail","host_name","isFirst","net_loading","saveTemplate","DeskPool","getIds","online_count","total_count","DeskPoolSecond","model_name","cid","carr","breadPoolName","person_pool_name","traverse","getUserGroup","pool_name","user_group_id","get_instances","add_instances","config_instances","config_template","get_devices","backup","get_config","alter_config","upgrade","stop","getInternetSync","internetSync","querySyncServer","updateSyncServer","queryZone","updateZone","quickstart","query_data_network","scan_iso","import_iso","complete_import","import_progress","list_system_images","list_sub_networks","list_ports","register_template","create_scene","first_deploy","quick_deploy_page","SystemDesktop","FenTemplate","PuTemplate","editSysdesktop","ins","get_rows","shutoff","addTemplate","CreateDistribute","multifyNetsTips","source_pool","devices","addNet","minusNet","giveTip","array","devices_selected","me","pci_devices_node","compute_node_id","pci_devices_address","address","start_on_host_boot","alertFlag","alertTip","controller_scope","getURL","loadIso","origin_os_type","old_type","old_os_type","type_editable","os_editable","uploadModal","abortUpload","filter_iso","change","new_item","hideButton","uploadStart","search","timeStamp","fn_get_logs","_start","displayLength","displayStart","totalCount","totalDisplayRecords","totalRecords","logPageSizeChange","logPageChange","deleteAll","_data","versions","new_data","packtype","viewDetail","witch","modal_data","backdrop","MESS","systemusb","class_id","sortClass_id","desktops","allow","rule_name","product_id","vendor_id","group_id","SystemUpgrade","changeStatus","instance","is_cancel","addr","is_auto_up","is_on","cpu","creat_item","TeachTemplate","SystemBackup","initTime","backup_weekday","backup_time","Outside","AlarmPlicy","enable_loading","save_loading","ips_loading","enable","IP","proxy_ip","hasIP","computer_ips","get_hosts","is_selected","isSubmiting","selected_length","RecycleTech","RecyclePer","RecycleCtrl","submit","setTechDefault","tecSave","getTech","techLoading","tecOpen","tecDesk","broken_min","tecStatus","run","onlyEnable","techenabling","techEdit","techSave","setPerDefault","perSave","getPerson","personLoading","perOpen","perDesk","perStatus","perenabling","personEdit","personSave","SystemTime","formDate","SyncCtrl","setInternetSync","loading_internet","used","loading_updateServer","time_server","loadZone","startDateOptions","formatYear","startingDay","openStartDate","startDateOpened","matchInput","timeID","updateTime","new_time","timeArray","loopTime","hours","minutes","seconds","loading_zone","choose_time","timestamp","zones","timezones","zone","updating_zone","modifyTime","$tooltip","placement","animation","lastIndexOf","units","$controller","modalRootElement","appendTo","modalScope","$new","$element","quickMaskModel","currentIndex","unknowStep","showMask","firstDeployTips","hideStep","ha_mode","ha_triggered","knowStep","setStep","formScope","imgForm","selectedSysImage","filename","registerForm","$error","wizardScope","showTemplateBlock","createForm","getValues","countArr","imglist","autoSelect","listSystemImages","imgmap","extend","selectSysImage","importByServer","loadData","selectIsoName","selectIsoByName","lastType","bind_ip_loading","hit","browserRefresh","registerFormLoading","loadingTeachTemplates","teachTemplates","testTempateCreateDone","xp","isXP","onCreateTemplateDone","loopTemplateStatus","catch","root","Promise","ostype","kwargs","values","classroomName","instance_type_name","hardwareName","disk","showAdvanceSceneOptionDialog","isxp","getMaxInstance","modalInstance","rootScope","USBRedictTips","auto_mountPersonalTips","hasOwnProperty","importedImgs","self","remote_imgs","refreshImgs","importSelected","upload_type","src_file","loopImportProgress","is_importing","imported","isAjaxOn","showRemain","yes","remain","doneCallback","failCallback","startTime","hasFeature","label","loop","filemap","remainSize","remainTime","hour","minute","second","timeEnd","menuWidth","updateTimer","oldContentStyles","oldArrowStyles","opened","cleanDOM","updatePosition","alignTarget","pmenu","targetOffset","totalWidth","width","totalHeight","$content","$arrow","contentStyles","outerHeight","equalsRoughly","btnOffset","contentLeft","arrowTop","arrowRight","arrowWidth","arrowHeight","arrowStyles","$destroy","obj1","obj2","v1","v2","USBPassThrough","devices_info","manufacturer","_SCOPE","through","throughItem","editThrough","cancelThrough","identify","AutoSnapshot","TeachDesktop","scene_id","old_instance_id","selectedUsers","changeType","selected_desktop","getScenesDektop","getCommonDektop","getSystemDektop","getTeaches","teachLoading","teaches","loadDesktops","adminUsers","u","adminDesktops","desktop_id","sys_desktops","sys_desktop","desktopsTreeOptions","dirSelectable","injectClasses","period","week_date","month_date","snapshot","snapshotItem","queryTreeInstances","need_rollback_desktops","recursionNode","calculateSelectedLeafs","cName","leafs","showManageSelected","$parentNode","$index","$first","$middle","$last","$odd","$even","$path","nodeChildren","_selectedNum","_middSelectedNum","selectedUsersNums","all_desktops","initPeriod","desktopTreeOptions","checkNodeSelected","isAllSelected","hasSelected","hasMiddle","subNode","Spice","spiceCtrl","getSpiceConnect","mode","spice_jpeg_compression","saveSpiceConnect","Share","clearCtrl","getClearTime","day","saveClearTime","freeGlobal","freeSelf","Function","exports","isObject","baseIsNative","getValue","getNative","object","vdiApp","$routeProvider","$provide","redirectTo","controllerAs","otherwise","decorator","$delegate","logger","$doc","userRole","SystemDeploy","openQuickstart","preferLang","l","ev_dialog_close","URL","HASH","is_hasid","debug","UA","userAgent","is_chrome","Symbol","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","baseGetTag","isObjectLike","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","entry","assocIndexOf","nativeCreate","isKeyable","getMapData","__data__","isSymbol","INFINITY","toKey","baseIsEqualDeep","baseIsEqual","other","bitmask","customizer","stack","Map","asyncTag","funcTag","genTag","proxyTag","isFunction","tag","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","arrayLikeKeys","baseKeys","isArrayLike","stubFalse","freeExports","nodeType","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","isTypedArray","MAX_SAFE_INTEGER","isLength","reIsDeepProp","reIsPlainProp","isKey","symbolTag","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","funcProto","funcToString","toSource","func","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","equalFunc","isPartial","arrLength","othLength","stacked","seen","arrValue","othValue","compared","othIndex","baseIsArguments","objectProto","propertyIsEnumerable","isArguments","webpackPolyfill","deprecate","paths","defineProperty","enumerable","reIsUint","isIndex","overArg","transform","isStrictComparable","matchesStrictComparable","srcValue","castPath","baseGet","stringToPath","precheck","login","lang_code","dev_host","get_language","get_version","loginresource","current_theme","showLoginScreen","langversion","getCurrLang","source","top_logs","top_instance","top_client","summary","top_logs_list","cpu_rate","mem_data","mem_used","memory_cnt","mem_remain","disk_data","disk_used","disk_cnt","disk_remain","spacing","backgroundColor","options3d","enabled","alpha","beta","credits","tooltip","pointFormat","plotOptions","pie","allowPointSelect","cursor","depth","dataLabels","instances_summary","top_instances_list","view_desktop","sendMessage","closeMessage","sceneCount","terminalCount","changeClass","onlyOneItem","selectedLength","selectNoDefault","_length","selected_row","sc","is_default","ip_start","ip_end","getConfig","alive","assignIps","modifyConfig","changeNames","changePools","seePwd","wakeups","killSessions","polling","sorting","setPlaceholder","cancelsort","dynamicPasswd","client","sorttype","_allrows","selectedRows","addClient","_ipClient","client_ip","_ipTarget","storageClassroom","cla","defaultClassroom","client_pool","selectRoom","target_ip","selecteds","addselect","sortClientIP","sortClientType","client_type","_client_type","instNameSort","num_a","inst_display_name","num_b","sortTargetIP","selectUp","is_up","clientbind","clientManualSort","clientAutoSort","configure","isSingle","ables","setSingle","configurename","wakeup","client_name","macs","client_mac","client_names","cancelBindingIp","noIP","client_ids","closeTerminal","rebootTerminal","terminate","inst_id","editPass","num_day","minEndTime","maxEndTime","startTimeChange","is_edit","houer","calculatePass","editSuperPass","dynamicPass","computers","LENGTH","able_computers","unable_computers","able_noset_computers","order_status","able_noset_FWCompu","client_os","noset_computers","set_computers","able_ids","able_noset_ids","able_noset_FW_ids","noset_ids","set_ids","computer","time_loop","trueNum","unableComputers","ableComputers","nosortComputers","sortedComputers","item1","item2","startSort","Manualsorting","start_num","clientname_prefix","clientname_suffix","auto_order","cancelSort","terminallists","startIP","network_name","dhcp_start","dhcp_end","newip","init_checkMode","mode_countdown","in_hybird","final_mode","checkMode","enabled_multiple","inHybird","fullscreen","auto_start","setWinWait","win_wait_time","setWaitTime","wait_time","dialogSet","has_windows_android","has_windows","has_linux","selecLen","new2old","desktop_mode","getError","sending","changes","old2new","flatChanges","flatObject","failTip","autologin","self_service_teach","self_service_personal","mode1_shutdown_with_client","mode1_shutdown_with_pc","mode2_shutdown_with_client","mode2_shutdown_with_pc","current_resolution","console_ip","init_pwd","windows_shortcut_key","connect_type","auto_exit","disk_share_to_desktop","linux_shortcut_key","auto_switch","auto_switch_seconds","resolutions","resolution","support_resolution","hasCurrentResolution","self_service","windows","shortcutKey","linux","isEqual","difference","base","flatFn","poollists","pool_id","newPool","terminal","prefix","prename","equalByTag","equalObjects","getTag","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","arrayProto","lastIndex","pop","LARGE_ARRAY_SIZE","pairs","isMasked","reRegExpChar","reIsHostCtor","reIsNative","pattern","eval","nativeObjectToString","isOwn","unmasked","coreJsData","maskSrcKey","uid","exec","IE_PROTO","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","HASH_UNDEFINED","setCacheAdd","setCacheHas","predicate","cache","Uint8Array","mapToArray","setToArray","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","arrayBufferTag","dataViewTag","symbolProto","symbolValueOf","valueOf","byteLength","byteOffset","buffer","convert","getAllKeys","objProps","objLength","othProps","skipCtor","objValue","objCtor","constructor","othCtor","baseGetAllKeys","getSymbols","arrayPush","keysFunc","symbolsFunc","arrayFilter","stubArray","nativeGetSymbols","getOwnPropertySymbols","symbol","resIndex","baseTimes","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","weakMapTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","freeProcess","process","binding","isPrototype","nativeKeys","Ctor","proto","DataView","Set","WeakMap","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","ctorString","arrayEach","baseCreate","baseForOwn","baseIteratee","getPrototype","accumulator","isArrLike","objectCreate","baseFor","createBaseFor","fromRight","iterable","props","baseMatches","baseMatchesProperty","identity","property","baseIsMatch","getMatchData","matchData","noCustomizer","hasIn","defaultValue","memoizeCapped","rePropName","reEscapeChar","string","charCodeAt","quote","subString","memoize","MAX_MEMOIZE_SIZE","FUNC_ERROR_TEXT","resolver","TypeError","memoized","args","Cache","baseToString","arrayMap","symbolToString","baseHasIn","hasPath","hasFunc","baseProperty","basePropertyDeep","getPrototypeOf","get_iscsi","get_lun","get_node","config_public_storage","get_public_storage","rtn","process_data","_servers","_pools","smap","storage_host_uuid","hmap","storage_order","pmap","process_unsiggndata","get_obj_length","filterLocalStorage","local_storages","bak_local_storages","remote_assigned","remote_unassigned","remote_assigned_storages","remote_unassigned_storages","storage_usability","resource_pools","get_nodes","get_manage_node_id","manage_node","_resource_uuid","searchISCSI","iscsi_luns","to_redetect","iscsi_targets","iqn_list","formatLun","_lun","searchISCSIlun","target_iqn","searchFClun","fc_luns","loadlun","switchType","clear_luns","clear_mess","device_name","lun_id","scsi_id","force","is_format","dynamic_lv","provider","luns","choosed_storage","lun_type","clearlun","$controllerDomain","query_console","save_ip","get_sync_network","get_ha_status","switch_controller","fast_shutdown","get_ha_detail","node_ids","page_type","state","tasklog_controller_id","enable_ha_service_state","disable_ha_service_state","service_state","Console","activeHostIds","memory_mb_used","_has_ha","getHAStatus","openHostMoreDialog","_dialog","openHAConfigDialog","backup_agent","_btn_status","maintain_host","host_ips","poweroff","poweroffBackup","windowClass","ha","switchBrain","onekeyShutdown","resp","haEnabled","hasActive","hasPassive","switchable","i18n","data_sync","context","getContext","querySelector","complete","onImgLoad","removeEventListener","scale","getCanvasScale","draw","dataColor","networkColor","outerPoints","topLeftAngle","atan2","drawTriangle","point","beginPath","lineTo","closePath","stroke","drawLine","point1","point2","strokeStyle","widthOf","str","measureText","drawBetween","p1","p2","drawImage","clearRect","font","fillStyle","fillText","data_sync_ip","peer_data_sync_ip","management_ip","peer_management_ip","quorum_ip_addresses","peer_data_to_data","peer_management_to_management","is_peer_unknow","quorum_to_management","devicePixelRatio","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","firstLoading","switchToIP","assert","active_ip","HA","maskModel","isEmptyObject","loadding","get_console_ha","controller_ip","back_user","quorums","floating_ip","data_sync_mask","sensitivity","is_ip_ok","network_data","back_password","set_console_ha","addQuorumIp","minusQuorumIp","test_connect","connecting","node_ping","remote_ip","node_ip","get_network","loading_net","master_ip","backup_ip","HostManage","param_host","is_ha","get_nic","loading_nic","network_info","dev_states","sub","netmasks","ip_editable","ips_editable","uneditable","is_management","is_image","_ips","model","readonly","_dnss","dns","_gateway","gateway","_readonly","bond_types","bond_networks","getSuccess","all_cidr","cidr","before_cidr","backItem","is_console","iface","no_alter","network_edit","okDns","alter_gatedns","cancelDns","add_ip","minus_ip","per","bound_netcard","p_host","p_networks","p_bondtypes","p_bondnetworks","p_dev_states","getNetcardList","edit_bond","p_item","unbundle_netcard","p_net","hardware_info","getServer","service_status","services","recover","restartService","$interfaceDomain","query_with_virtual_type","add_agent","delete_agent","config_storage","check_root","config_desktop","storage_info","physic_netword_info","network_types","new_bond","alter_bond","delete_bond","disable","vtype","all_data","configStorage","maintain","recovery","template_type","des","hostnum","HostGPU","enable_gpu_module","is_alter","netEditable","insBtn_unable","saveMaxInstance","insForm_suc","save_outer_IP","IP_Btn_unable","external_ip","outerIP","outerIPForm_suc","getHostGPU","loading_GPU","GPU_V","GPU_V_num","vf_num","totalNum","SRIOVTotalVFS","GPU_V_max","GPU_V_min","queryConfig","changeGPU_V","GPU_V_loading","saveGPUV","saving","sav_suc","Manage","$s","quorum","getDataNetwork","loading_network","formatIP","masklen","binaryMask","arrmask","get_interfaces","loading_interface","interfaces","dev","_cidrs","go_next","root_password","agent_detail","enter_step2","go_pre","dataNets","switch_name","management_dev","node_manage_dev","node_manage_ip","management_netmask","node_manage_netmask","bond_switch_infos","switch","hostluns","imagePropertyLun","imageCapacityLun","hostLun","propertyLun","capacityLun","cache_storage","filter_data","rsts","_storages","host_mess","net_mess","dev_status","netcards","has_bond","update_ip","manage_image_ips","netcard","get_select_nets_length","parentScope","select_nets","card","okPost","bond_name","bond_type","ifaces","member","_has_inherit_net","_inherit_menber","is_inherit","_inherit_infos","inherit_infos","check_inherit","_connect","host_type","image_ip","enable_ha","source_controller_ip","img_rows","img_rowsHA","manage_rows","manage_rowsHA","HostNetworkInfo","host_id","bondNetworks","allNetworks","mask","_selectNetwork","_selectIP","changeIP","hasUnselect","infos","Switch","isHAEnabled","hasHA_loading","hasHA","decodeName","encodeURIComponent","virtualSwitch","Switchdevice","querySwitchdevice","loading_hosts","devs","SwitchItem","$hashstr","$hash","hostName","virtualSwitchItem","old_dev","node_id","AvailableNodes","relateHosts","queryPool","changePool","changeHost","ports_unused_ips","new_sub_network","cur_network_id","alter_sub_network","enableDHCP","gateway_ip","dns1","dns2","cur_subnet_id","sub_id","Listswitchs","switches","getSwitch","_netData","create_subnet","has_sub","switch_type","switch_uuid","vlan_id","vlanid","physical_network","physic_net","subnet_name","sub_name","oldName","_net","dns_nameservers","title_type","DHCP","DHCPCtrl","initData","changeModify","updateDHCP","loadDHCP","enabling","updating","query_log","delete_alarm","global_config","get_global_config","get_email_config","update_email_config","test_email","net_categories","disk_categories","disk_category","net_category","cpu_options","svg","margin","xAxis","lineWidth","tickWidth","align","ffset","rotation","plotLines","crosshairs","shared","xDateFormat","legend","verticalAlign","marker","y0","iowait","system","addPoint","mem_options","mem","free","net_options","labels","y1","subpath","sent_rate","recv_rate","read_speed","write_speed","disk_options","read_rate","write_rate","change_server","cur_instance","metric_start","msg","hostid","metric_data","load_metric_data","trees","insts","collapAll","openAll","monitorScope","strategys","addDialog","getPolicyList","strategy_id","notice","strategy_enabled","AlarmPlicyList","pageType","alarm_settings","check_alarm_null","email_enabled","email_address","filterAlterPolicy","get_host_ids","p_arr","p_hosts","h_arr","resdata","test_mail","updateConfig","start_time_week_start_time","getDay","start_time_week_end_time","end_time_week_start_time","end_time_week_end_time","weeks","span","week","modifiable","ox","oy","canvas","mousedown","startSceneDND","startSceneStartModify","startSceneEndModify","m","classHours","transluce","startDND","fn_pos_info","cells","_element","_cell_offset","_t","cloneNode","target_offset","_handler","_px","_py","_fx","_fy","_ow","_oh","_tx","clientX","_ty","clientY","_canvas","domEvent","_source_scene","_event_type","fn_restore_canvas_state","fn_move_handler_to","masker","scroll","mousemove","_ns","_nh","selection","getSelection","removeAllRanges","NaN","mouseout","scheduler","editMode","classes","time_span","dates","_scenes","editWeek","fn_get_scheduler","sss","fn_update_config","start_time","semester_start","end_time","semester_end","week_start_day","classHour","date_start","date_start_time","start_date","week_start","days","now_week","now_day","now_ts","currentWeek","WEEk","classChange","_currentWeek","enableEditMode","disableEditMode","siblingWeek","seed","siblingWeekState","_class","mode_id","start_at","end_at","weekCheckAll","weekCheckOdd","weekCheckEven","weekCheckSome","currentEditWeek","checkSomeWeeks","checkAllWeeks","checkAllOddWeeks","checkAllEvenWeeks","moving_scene","newScene","_day","selectWeek","clearData","timezone_offset","getTimezoneOffset","teaching_time","clearAll","background","setting","endDateOptions","endDateOpened","openEndDate","formValid","time_wrong","schedulerForm","hostList","$attrs","minLen","maxLen","preVal","Plan","weekdays","off","modes_loading","getPlanList","loadList","is_open","desktop_loading","checksublist","setparent","select_len","openHouer","openMinute","offHouer","offMinute","desktop","checkWeek","selectAllWeek","selectOne","selectNum","task_type","week_days","trigger_kwargs","bootup","instance_extra_id","setValues","planItem","bootupArgs","shutdownArgs","plan","is_active","onrows","offrows","initPlanScope","filterPlanList","has_selected","HostPlan","hostPlan","isEdit","hostID","targets","with_controller","selectOneWeek","hasConsole","console_ha_ping","_checked","haScope","HaList","ha_response_time","allScenes","allInstances","resource_pool_id","unused_modes","unused_vms","mode_resource_pool_id","vm_resource_pool_id","updateHaList","get_ins_ids","_used","vm_id","get_host_names","ha_hosts","alls","mode_ids","host_ready","use_host_result","host_result","_ins_ids","_host_names","host_scope","filterHaList","used_modes","used_vms","isSelectedAll","isAllchecked","load_host_scope","getElementById","style","drag","maxLeft","maxTop","dragging","orig_index","zIndex","onmousedown","offsetLeft","offsetTop","permission_list","service_qq","pmis","build","instance_num_quota","license_time","remain_days","instnum","build_version","help","ex"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/devbuild/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 50);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73c0292a4c28d0d1ccce","/**\r\n * 这个文件会在每个独立页面用到，如：init, index, templateXXX\r\n */\r\n\r\n// TODO: 移动到基础代码\r\nwindow.$$$storage = {\r\n\tgetSessionStorage(key){\r\n\t\treturn sessionStorage.getItem('vdi_'+ key);\r\n\t},\r\n\tsetSessionStorage(key, value){\r\n\t\tsessionStorage.setItem('vdi_'+ key, value);\r\n\t},\r\n\tclearSessionStorage(){\r\n\t\tsessionStorage.clear()\r\n\t}\r\n}\r\n\r\n// 提供翻译的闭包变量\r\nlet codeData = {};\r\nlet i18nData = {};\r\nlet imagesData = {};\r\n\r\nlet firstKey; // 记录第一个支持的 OEM，没有其它选择的时候使用这个\r\nlet ng = angular.module(\"ng\");\r\nlet supportedOems = getSupportedOEMs();\r\nlet currentOEM = null;\r\n\r\nlet host = location.hostname;\r\nlet hasBootstrap = false;\r\n\r\n\r\n// 定义后端接口地址\r\nlet domain = location.protocol + \"//\" + host + \":8081\"; // 多数用这个\r\nlet controllerDomain = location.protocol + \"//\" + host + \":19891\"; // 很少用\r\nlet interfaceDomain = location.protocol + \"//\" + host + \":19893\"; // 很少用\r\nif(window.vdiEnvironment === \"development\") {\r\n\thost = $$$storage.getSessionStorage('dev_host');\r\n\t// use dev_host\r\n\tif(host) {\r\n\t\tdomain = \"http://\" + host + \":8081\";\r\n\t\tcontrollerDomain = \"http://\" + host + \":19891\";\r\n\t\tinterfaceDomain = \"http://\" + host + \":19893\";\r\n\t} else {\r\n\t\t// use mock server\r\n\t\tdomain = controllerDomain = interfaceDomain = location.origin;\r\n\t}\r\n}\r\n\r\nmain();\r\n\r\n/* 定义一些 angular 服务 */\r\nng.constant(\"$Domain\", domain);\r\nng.constant(\"$controllerDomain\", controllerDomain);\r\nng.constant(\"$interfaceDomain\", interfaceDomain);\r\nng.constant(\"$splitDomain\", location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\");\r\nlet splitDomain = location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\";\r\nng.service(\"$RESOURCE\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn supportedOems[key];\r\n\t};\r\n\tthis.load = function(langCode, cb){\r\n\t\tloadOEMResources(langCode, cb);\r\n\t};\r\n}]);\r\n\r\nng.factory(\"settings\", [function(){\r\n\treturn {\r\n\t\tlanguages: Object.keys(supportedOems).map(function(key){\r\n\t\t\treturn supportedOems[key];\r\n\t\t}),\r\n\t\tcurrentLang: supportedOems[currentOEM]\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$MSG\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn codeData[key] || \"\";\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$I18N\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn i18nData[key] || \"\";\r\n\t};\r\n}]);\r\nng.service(\"$$$IMAGES\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn imagesData[key] || \"\";\r\n\t};\r\n}]);\r\nng.constant(\"$$$os_types\", require(\"./os-types\"));\r\nng.config([\"$httpProvider\", function($httpProvider){\r\n\t$httpProvider.interceptors.push([\"$q\", \"$rootScope\", \"$$$MSG\", function($q, $root, $$$MSG){\r\n\t\treturn {\r\n\t\t\t\"request\": function(config){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(config.url)){\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(/\\.html$/i.test(config.url)) {\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(!/^https?:\\/\\//.test(config.url)) {\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\tconfig.url = domain + config.url;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t\"requestError\": function(reject){\r\n\t\t\t\tconsole.log(\"REQ_ERROR\");\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"responseError\": function(reject){\r\n\t\t\t\tconsole.log(\"RES_ERROR\", arguments);\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tcode: 100,\r\n\t\t\t\t\tmessage: $$$MSG.get(\"返回信息格式错误\"),\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"response\": function(res){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(res.config.url)){\r\n\t\t\t\t\tif(/\\/thor\\/toolkit\\//.test(res.config.url) || /\\/v1\\/(?:node|network)\\//.test(res.config.url)){\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tswitch(res.data.code){\r\n\t\t\t\t\t\t\tcase 17001:\r\n\t\t\t\t\t\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 11011:\r\n\t\t\t\t\t\t\t\t$$$storage.setSessionStorage('returnUrl', location.href)\r\n\t\t\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif(/\\/thor\\/home\\/tasklog/.test(res.config.url)){\r\n\t\t\t\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(window.ignoreAnyRequestError) { return res; }\r\n\t\t\t\t\t\t\t\t$.bigBox && $.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n\t\t\t\t\t\t\t\t\tcontent : $$$MSG.get(res.data.code)==''?res.data.message:$$$MSG.get(res.data.code),\r\n\t\t\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n}]);\r\n\r\n/**\r\n * 启动 angular app\r\n * @param {String} oem oem 名字\r\n */\r\nfunction bootstrap(oem){\r\n\tvar oemData = supportedOems ? supportedOems[oem] : null;\r\n\tif(!oemData) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"加载资源出错！\");\r\n\t\t}\r\n\t}\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tvar $body = $(document.body);\r\n\t\tvar theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t\tif(!/personal_login/.test(location.pathname)) {\r\n\t\t\t$body.addClass(theme);\r\n\t\t\t$(\"#vdi_skins_url\").attr(\"href\", `/resources/pkg/${oem}/skins.css`);\r\n\t\t\t$body.fadeIn(1000);\r\n\t\t}\r\n\t\t\r\n\t\t// 仅开发模式提示\r\n\t\tif(window.vdiEnvironment === \"development\" && !window.$$$MAIN_MODULE) {\r\n\t\t\treturn alert(\"main module is not defined!\");\r\n\t\t}\r\n\t\tangular.bootstrap(document, [].concat(window.$$$MAIN_MODULE));\r\n\t\thasBootstrap = true;\r\n\t}\r\n}\r\n\r\n/**\r\n * 加载指定的 OEM 资源\r\n * @param {String} oem 要加载的 OEM 资源\r\n * @param {Function} cb 加载成功后的回调\r\n */\r\nfunction loadOEMResources(oem, cb){\r\n\tif(!oem) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"获取资源 key 失败！\");\r\n\t\t}\r\n\t}\r\n\tif(!(oem in supportedOems)) {\r\n\t\tconsole.error(\"unsupported resource key:\", oem);\r\n\t\toem = Object.keys(supportedOems)[0];\r\n\t}\r\n\tlet oemData = supportedOems[oem];\r\n\t// 先检查后加载\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tcodeData = oemData.code;\r\n\t\ti18nData = oemData.lang;\r\n\t\timagesData = oemData.images;\r\n\t\treturn cb(oemData);\r\n\t}\r\n\t$.when(\r\n\t\t$.getJSON(`/resources/pkg/${oem}/code.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/lang.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/images.js`)\r\n\t).done(function(codeResponse, langResponse, imagesResponse){\r\n\t\tcodeData = oemData.code = codeResponse[0];\r\n\t\ti18nData = oemData.lang = langResponse[0];\r\n\t\timagesData = oemData.images = imagesResponse[0];\r\n\t\tif(!hasBootstrap) {\r\n\t\t\tregisterLazyService();\r\n\t\t\tbootstrap(oem);\r\n\t\t} else {\r\n\t\t\tcb && cb(oemData);\r\n\t\t}\r\n\t}).fail(function(){\r\n\t\tconsole.log(`load ${oem} resource error:`, arguments[2]);\r\n\t});\r\n\tcurrentOEM = oem;\r\n}\r\nfunction main(){\r\n\tvar statusXhr = $.get(controllerDomain + \"/v1/node/status\");\r\n\tvar langXhr = $.get(domain + \"/thor/init/lang\");\r\n\tvar status_ha = $.get(domain + \"/thor/get_controller_ha_status\");\r\n\t$.when(statusXhr, langXhr, status_ha).done(function(statusResponse, langResponse, haResponse){\r\n\t\tif(typeof statusResponse[0] === \"string\") {\r\n\t\t\tstatusResponse[0] = JSON.parse(statusResponse[0])\r\n\t\t}\r\n\t\tvar oem = langResponse[0].current_lang_type;\r\n\t\tvar isSplitBrain = haResponse[0].result.is_split_brain;\r\n\t\tvar isInitPage = /init\\.html$/.test(location.pathname);\r\n\t\tvar isPersonalLoginPage = location.pathname==='/personal_login/';\r\n\t\tvar isControlNode = statusResponse[0].is_control_node;\r\n\t\tvar isSplitBrainPage = /split\\.html$/.test(location.pathname);\r\n\t\tif(isSplitBrainPage) {\r\n\t\t\tif(!isSplitBrain) {\r\n\t\t\t\tlocation.replace(\"/\");\r\n\t\t\t}else{\r\n\t\t\t\tstart();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(isSplitBrain){\r\n\t\t\t\t// $$$storage.clearSessionStorage();\r\n\t\t\t\t$$$storage.setSessionStorage('splitIP', haResponse[0].result.roles[0].ip);\r\n\t\t\t\tlocation.replace(\"split.html\");\r\n\t\t\t} else {\r\n\t\t\t\tif(isControlNode) {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage) {\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart(oem);\r\n\t\t\t\t\t\tinitCurrentUser();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage){\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction start(oem){\r\n\t// 初始化页面默认没有语言\r\n\tif(!oem) {\r\n\t\t// NOTE: 版本是和语言相关的\r\n\t\t// 如果支持多个版本，优先使用系统默认语言\r\n\t\tif(Object.keys(supportedOems).length > 1) {\r\n\t\t\t// 仅仅我们自己的版本支持多语言\r\n\t\t\t// 参考：https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language\r\n\t\t\t// 调试时，使用这段代码将浏览器设置为其它语言\r\n\t\t\t//   navigator.__defineGetter__(\"language\", function(){ return \"en-us\" })\r\n\t\t\tlet lang = navigator.language;\r\n\t\t\tif(lang) {\r\n\t\t\t\tlang = lang.split(\"-\")[0].toLowerCase();\r\n\t\t\t}\r\n\t\t\tif(lang === \"zh\") {\r\n\t\t\t\toem = \"e-vdi\";\r\n\t\t\t} else if(lang === \"en\") {\r\n\t\t\t\toem = \"classEn\";\r\n\t\t\t}\r\n\t\t\tif(!supportedOems[oem]) {\r\n\t\t\t\toem = firstKey;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toem = firstKey; // 否则的话使用仅支持的版本\r\n\t\t}\r\n\t}\r\n\tloadOEMResources(oem, supportedOems);\r\n}\r\n\r\nfunction getSupportedOEMs(){\r\n\tvar list = require(\"../../resources/info\").resources;\r\n\tvar ret = {};\r\n\tlist.forEach(function(item){\r\n\t\tret[item.key] = item;\r\n\t\t// 不知道旧代码为什么要这么做\r\n\t\titem.langCode = item.key;\r\n\t\titem.flagCode = item.key;\r\n\t\titem.language = item.name;\r\n\t\titem.translation = item.title;\r\n\t});\r\n\tfirstKey = list[0].key;\r\n\treturn ret;\r\n}\r\n\r\nfunction initCurrentUser(){\r\n\tvar userId = $$$storage.getSessionStorage('userId');\r\n\tif(!userId) { return; }\r\n\t$.ajax({\r\n\t\tmethod: \"POST\",\r\n\t\turl: domain + \"/thor/user/session\",\r\n\t\tdata: JSON.stringify({\r\n\t\t\tuser_id: userId\r\n\t\t}),\r\n\t\tdataType: 'json'\r\n\t}).done(function(res){\r\n\t\tif(res.code === 0){\r\n\t\t\t// res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t});\r\n\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction registerLazyService(){\r\n\tng.constant(\"$$$version\", i18nData[\"GOD_VERSION\"] || \"dev\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/config.js","module.exports = [{\"key\":\"other\",\"icon\":\"other.png\",\"value\":\"Other\"},{\"key\":\"ArchLinux\",\"icon\":\"linux.png\",\"value\":\"Arch Linux\"},{\"key\":\"ArchLinux_64\",\"icon\":\"linux.png\",\"value\":\"Arch Linux (64 bit)\"},{\"key\":\"Debian\",\"icon\":\"debian.png\",\"value\":\"Debian\"},{\"key\":\"Debian_64\",\"icon\":\"debian.png\",\"value\":\"Debian (64 bit)\"},{\"key\":\"Fedora\",\"icon\":\"fedora.png\",\"value\":\"Fedora\"},{\"key\":\"Fedora_64\",\"icon\":\"fedora.png\",\"value\":\"Fedora (64 bit)\"},{\"key\":\"FreeBSD\",\"icon\":\"linux.png\",\"value\":\"FreeBSD\"},{\"key\":\"FreeBSD_64\",\"icon\":\"linux.png\",\"value\":\"FreeBSD (64 bit)\"},{\"key\":\"Gentoo\",\"icon\":\"linux.png\",\"value\":\"Gentoo\"},{\"key\":\"Gentoo_64\",\"icon\":\"linux.png\",\"value\":\"Gentoo (64 bit)\"},{\"key\":\"Linux\",\"icon\":\"linux.png\",\"value\":\"Other Linux\"},{\"key\":\"MacOS\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server\"},{\"key\":\"MacOS_64\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server (64 bit)\"},{\"key\":\"OpenBSD\",\"icon\":\"linux.png\",\"value\":\"OpenBSD\"},{\"key\":\"OpenBSD_64\",\"icon\":\"linux.png\",\"value\":\"OpenBSD (64 bit)\"},{\"key\":\"OpenSUSE\",\"icon\":\"linux.png\",\"value\":\"openSUSE\"},{\"key\":\"OpenSUSE_64\",\"icon\":\"linux.png\",\"value\":\"openSUSE (64 bit)\"},{\"key\":\"OpenSolaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later\"},{\"key\":\"OpenSolaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later (64 bit)\"},{\"key\":\"Oracle\",\"icon\":\"linux.png\",\"value\":\"Oracle\"},{\"key\":\"Oracle_64\",\"icon\":\"linux.png\",\"value\":\"Oracle (64 bit)\"},{\"key\":\"Other\",\"icon\":\"unknown.png\",\"value\":\"Other/Unknown\"},{\"key\":\"RedHat\",\"icon\":\"redhat.png\",\"value\":\"Red Hat\"},{\"key\":\"RedHat_64\",\"icon\":\"redhat.png\",\"value\":\"Red Hat (64 bit)\"},{\"key\":\"Solaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier\"},{\"key\":\"Solaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier (64 bit)\"},{\"key\":\"Ubuntu\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu\"},{\"key\":\"Ubuntu_64\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu (64 bit)\"},{\"key\":\"Windows2000\",\"icon\":\"win7.png\",\"value\":\"Windows 2000\"},{\"key\":\"Windows2003\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003\"},{\"key\":\"Windows2003_64\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003 (64 bit)\"},{\"key\":\"Windows2008\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008\"},{\"key\":\"Windows2008_64\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008 (64 bit)\"},{\"key\":\"Windows7\",\"icon\":\"win7.png\",\"value\":\"Windows 7\"},{\"key\":\"Windows7_64\",\"icon\":\"win7.png\",\"value\":\"Windows 7 (64 bit)\"},{\"key\":\"Windows8\",\"icon\":\"win8.png\",\"value\":\"Windows 8\"},{\"key\":\"Windows8_64\",\"icon\":\"win8.png\",\"value\":\"Windows 8 (64 bit)\"},{\"key\":\"WindowsNT\",\"icon\":\"win7.png\",\"value\":\"Other Windows\"},{\"key\":\"WindowsNT4\",\"icon\":\"win7.png\",\"value\":\"Windows NT 4\"},{\"key\":\"WindowsVista\",\"icon\":\"win7.png\",\"value\":\"Windows Vista\"},{\"key\":\"WindowsVista_64\",\"icon\":\"win7.png\",\"value\":\"Windows Vista (64 bit)\"},{\"key\":\"Windowsxp\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"Windowsxp_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"WindowsXP\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"WindowsXP_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"Windows 7\",\"icon\":\"win7.png\",\"value\":\"Windows 7 series\"},{\"key\":\"Windows10\",\"icon\":\"win8.png\",\"value\":\"Windows 10\"},{\"key\":\"Windows10_64\",\"icon\":\"win8.png\",\"value\":\"Windows 10 (64 bit)\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/vdi/os-types.json\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = {\"resource_template\":{\"key\":\"0\",\"title\":\"dev\"},\"resources\":[{\"key\":\"e-vdi\",\"name\":\"E-VDI\",\"title\":\"E-VDI\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"pc\",\"name\":\"云PC\",\"title\":\"云PC\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classCh\",\"name\":\"云教室\",\"title\":\"云教室中文\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classEn\",\"name\":\"Cloud Class\",\"title\":\"云教室英文\",\"langType\":\"en\",\"langDes\":\"English\",\"clientKey\":\"public\",\"public\":true}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/info.json\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"app.controllers\", [])\r\n\r\n.controller(\"PageViewController\", [\"$scope\", \"$route\", \"$animate\", function($scope, $route, $animate) {\r\n\t// controler of the dynamically loaded views, for DEMO purposes only.\r\n\t// $scope.$on(\"$viewContentLoaded\", function() {\r\n\t// \tconsole.log(\"ffffffff\")\r\n\t// })\r\n}])\r\n.controller(\"LangController\", [\"$scope\", \"settings\", \"localize\", function($scope, settings, localize) {\r\n\t$scope.languages = settings.languages;\r\n\t$scope.currentLang = settings.currentLang || $scope.languages[0];\r\n\t$scope.setLang = function(lang) {\r\n\t\tsettings.currentLang = lang;\r\n\t\t$scope.currentLang = lang;\r\n\t\tlocalize.setLang(lang);\r\n\t\t$$$storage.setSessionStorage('lang_code', lang.langCode)\r\n\t};\r\n\t// set the default language\r\n\t$scope.setLang($scope.currentLang);\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.controllers.js","angular.module('app.main', [])\r\n// initiate body\r\n.directive('body', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\telement.on('click', 'a[href=\"#\"], [data-toggle]', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.factory('ribbon', ['$rootScope', function($rootScope) {\r\n\tvar ribbon = {\r\n\t\tcurrentBreadcrumb: [],\r\n\t\tupdateBreadcrumb: function(crumbs) {\r\n\t\t\tvar breadCrumb = crumbs.reverse();\r\n\t\t\tribbon.currentBreadcrumb = breadCrumb;\r\n\t\t\t$rootScope.$broadcast('navItemSelected', breadCrumb);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ribbon;\r\n}])\r\n\r\n.directive('action', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t/*\r\n\t\t\t * SMART ACTIONS\r\n\t\t\t */\r\n\t\t\tvar smartActions = {\r\n    \r\n\t\t\t    // LOGOUT MSG \r\n\t\t\t    userLogout: function($this){\r\n\t\t\t\r\n\t\t\t\t\t// ask verification\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>\" + $('#show-shortcut').text() + \"</strong></span> ?\",\r\n\t\t\t\t\t\tcontent : $this.data('logout-msg') || \"You can improve your security further after logging out by closing this opened browser\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\") {\r\n\t\t\t\t\t\t\t$.root_.addClass('animated fadeOutUp');\r\n\t\t\t\t\t\t\tsetTimeout(logout, 1000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfunction logout() {\r\n\t\t\t\t\t\twindow.location = $this.attr('href');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// RESET WIDGETS\r\n\t\t\t    resetWidgets: function($this){\r\n\t\t\t\t\t$.widresetMSG = $this.data('reset-msg');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage\",\r\n\t\t\t\t\t\tcontent : $.widresetMSG || \"Would you like to RESET all your saved widgets and clear LocalStorage?\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\" && localStorage) {\r\n\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // LAUNCH FULLSCREEN \r\n\t\t\t    launchFullscreen: function(element){\r\n\t\t\t\r\n\t\t\t\t\tif (!$.root_.hasClass(\"full-screen\")) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t$.root_.addClass(\"full-screen\");\r\n\t\t\t\t\r\n\t\t\t\t\t\tif (element.requestFullscreen) {\r\n\t\t\t\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t\t\t} else if (element.mozRequestFullScreen) {\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t\t\t} else if (element.webkitRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t\t\t} else if (element.msRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.root_.removeClass(\"full-screen\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\t\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t\t\t} else if (document.webkitExitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t   },\r\n\t\t\t\r\n\t\t\t   // MINIFY MENU\r\n\t\t\t    minifyMenu: function($this){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$.root_.toggleClass(\"minified\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$this.effect(\"highlight\", {}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // TOGGLE MENU \r\n\t\t\t    toggleMenu: function(){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t} else if ( $.root_.hasClass(\"menu-on-top\") && $.root_.hasClass(\"mobile-view-activated\") ) {\r\n\t\t\t    \t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t}\r\n\t\t\t    },     \r\n\t\t\t\r\n\t\t\t    // TOGGLE SHORTCUT \r\n\t\t\t    toggleShortcut: function(){\r\n\t\t\t    \t\r\n\t\t\t\t\tif (shortcut_dropdown.is(\":visible\")) {\r\n\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshortcut_buttons_show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// SHORT CUT (buttons that appear when clicked on user name)\r\n\t\t\t\t\tshortcut_dropdown.find('a').click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.location = $(this).attr('href');\r\n\t\t\t\t\t\tsetTimeout(shortcut_buttons_hide, 300);\r\n\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT buttons goes away if mouse is clicked outside of the area\r\n\t\t\t\t\t$(document).mouseup(function(e) {\r\n\t\t\t\t\t\tif (!shortcut_dropdown.is(e.target) && shortcut_dropdown.has(e.target).length === 0) {\r\n\t\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE HIDE\r\n\t\t\t\t\tfunction shortcut_buttons_hide() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"hide\"\r\n\t\t\t\t\t\t}, 300, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.removeClass('shortcut-on');\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE SHOW\r\n\t\t\t\t\tfunction shortcut_buttons_show() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"show\"\r\n\t\t\t\t\t\t}, 200, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.addClass('shortcut-on');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t    }  \r\n\t\t\t   \r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar actionEvents = {\r\n\t\t\t\tuserLogout: function(e) {\r\n\t\t\t\t\tsmartActions.userLogout(element);\r\n\t\t\t\t},\r\n\t\t\t\tresetWidgets: function(e) {\r\n\t\t\t\t\tsmartActions.resetWidgets(element);\r\n\t\t\t\t},\r\n\t\t\t\tlaunchFullscreen: function(e) {\r\n\t\t\t\t\tsmartActions.launchFullscreen(document.documentElement);\r\n\t\t\t\t},\r\n\t\t\t\tminifyMenu: function(e) {\r\n\t\t\t\t\tsmartActions.minifyMenu(element);\r\n\t\t\t\t},\r\n\t\t\t\ttoggleMenu: function(e) {\r\n\t\t\t\t\tsmartActions.toggleMenu();\r\n\t\t\t\t},\r\n\t\t\t\ttoggleShortcut: function(e) {\r\n\t\t\t\t\tsmartActions.toggleShortcut();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (angular.isDefined(attrs.action) && attrs.action != '') {\r\n\t\t\t\tvar actionEvent = actionEvents[attrs.action];\r\n\t\t\t\tif (typeof actionEvent === 'function') {\r\n\t\t\t\t\telement.on('click', function(e) {\r\n\t\t\t\t\t\tactionEvent(e);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('header', function() {\r\n\treturn {\r\n\t\trestrict: 'EA',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t// SHOW & HIDE MOBILE SEARCH FIELD\r\n\t\t\tangular.element('#search-mobile').click(function() {\r\n\t\t\t\t$.root_.addClass('search-mobile');\r\n\t\t\t});\r\n\r\n\t\t\tangular.element('#cancel-search-js').click(function() {\r\n\t\t\t\t$.root_.removeClass('search-mobile');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('ribbon', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\treturn;\r\n\t\t\telement.append('<div class=\"demo\"><span id=\"demo-setting\"><i class=\"fa fa-cog txt-color-blueDark\"></i></span> <form><legend class=\"no-padding margin-bottom-10\">Layout Options</legend><section><label><input name=\"subscription\" id=\"smart-fixed-header\" type=\"checkbox\" class=\"checkbox style-0\"><span>Fixed Header</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-navigation\" class=\"checkbox style-0\"><span>Fixed Navigation</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-ribbon\" class=\"checkbox style-0\"><span>Fixed Ribbon</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-footer\" class=\"checkbox style-0\"><span>Fixed Footer</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-container\" class=\"checkbox style-0\"><span>Inside <b>.container</b> <div class=\"font-xs text-right\">(non-responsive)</div></span></label><label style=\"display:block;\"><input type=\"checkbox\" id=\"smart-topmenu\" class=\"checkbox style-0\"><span>Menu on <b>top</b></span></label> <span id=\"smart-bgimages\"></span></section><section><h6 class=\"margin-top-10 semi-bold margin-bottom-5\">Clear Localstorage</h6><a href=\"javascript:void(0);\" class=\"btn btn-xs btn-block btn-primary\" id=\"reset-smart-widget\"><i class=\"fa fa-refresh\"></i> Factory Reset</a></section> <h6 class=\"margin-top-10 semi-bold margin-bottom-5\">SmartAdmin Skins</h6><section id=\"smart-styles\"><a href=\"javascript:void(0);\" id=\"smart-style-0\" data-skinlogo=\"img/logo.png\" class=\"btn btn-block btn-xs txt-color-white margin-right-5\" style=\"background-color:#4E463F;\"><i class=\"fa fa-check fa-fw\" id=\"skin-checked\"></i>Smart Default</a><a href=\"javascript:void(0);\" id=\"smart-style-1\" data-skinlogo=\"img/logo-white.png\" class=\"btn btn-block btn-xs txt-color-white\" style=\"background:#3A4558;\">Dark Elegance</a><a href=\"javascript:void(0);\" id=\"smart-style-2\" data-skinlogo=\"img/logo-blue.png\" class=\"btn btn-xs btn-block txt-color-darken margin-top-5\" style=\"background:#fff;\">Ultra Light</a><a href=\"javascript:void(0);\" id=\"smart-style-3\" data-skinlogo=\"img/logo-pale.png\" class=\"btn btn-xs btn-block txt-color-white margin-top-5\" style=\"background:#f78c40\">Google Skin</a></section></form> </div>')\r\n\r\n\t\t\t// hide bg options\r\n\t\t\tvar smartbgimage = \"<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>\";\r\n\t\t\t$(\"#smart-bgimages\")\r\n\t\t\t    .fadeOut();\r\n\r\n\t\t\t$('#demo-setting')\r\n\t\t\t    .click(function () {\r\n\t\t\t        $('#ribbon .demo')\r\n\t\t\t            .toggleClass('activate');\r\n\t\t\t    })\r\n\t\t\t/*\r\n\t\t\t * FIXED HEADER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\r\n\t\t\t            $.root_.removeClass(\"fixed-header\");\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED NAV\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED RIBBON\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            //apply\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.addClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-footer')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-page-footer\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-page-footer\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-rtl')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"smart-rtl\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"smart-rtl\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * MENU ON TOP\r\n\t\t\t */\r\n\r\n\t\t\t$('#smart-topmenu')\r\n\t\t\t    .on('change', function (e) {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .prop('checked')) {\r\n\t\t\t            //window.location.href = '?menu=top';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'top');\r\n\t\t\t            location.reload();\r\n\t\t\t        } else {\r\n\t\t\t            //window.location.href = '?';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'left');\r\n\t\t\t            location.reload();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\tif (localStorage.getItem('sm-setmenu') == 'top') {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', true);\r\n\t\t\t} else {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', false);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * INSIDE CONTAINER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"container\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\r\n\t\t\t            if (smartbgimage) {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .append(smartbgimage)\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t                $(\"#smart-bgimages img\")\r\n\t\t\t                    .bind(\"click\", function () {\r\n\t\t\t                        var $this = $(this);\r\n\t\t\t                        var $html = $('html')\r\n\t\t\t                        bgurl = ($this.data(\"htmlbg-url\"));\r\n\t\t\t                        $html.css(\"background-image\", \"url(\" + bgurl + \")\");\r\n\t\t\t                    })\r\n\t\t\t                smartbgimage = null;\r\n\t\t\t            } else {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t            }\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\t\t\t            $(\"#smart-bgimages\")\r\n\t\t\t                .fadeOut();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * REFRESH WIDGET\r\n\t\t\t */\r\n\t\t\t$(\"#reset-smart-widget\")\r\n\t\t\t    .bind(\"click\", function () {\r\n\t\t\t        $('#refresh')\r\n\t\t\t            .click();\r\n\t\t\t        return false;\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * STYLES\r\n\t\t\t */\r\n\t\t\t$(\"#smart-styles > a\")\r\n\t\t\t   .on('click', function() {\r\n\t\t\t        var $this = $(this);\r\n\t\t\t        var $logo = $(\"#logo img\");\r\n\t\t\t        $.root_.removeClassPrefix('smart-style')\r\n\t\t\t            .addClass($this.attr(\"id\"));\r\n\t\t\t        $logo.attr('src', $this.data(\"skinlogo\"));\r\n\t\t\t        $(\"#smart-styles > a #skin-checked\")\r\n\t\t\t            .remove();\r\n\t\t\t        $this.prepend(\"<i class='fa fa-check fa-fw' id='skin-checked'></i>\");\r\n\t\t\t    });\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('breadcrumbController', ['$scope', function($scope) {\r\n\t$scope.breadcrumbs = [];\r\n\t$scope.$on('navItemSelected', function(name, crumbs) {\r\n\t\t$scope.setBreadcrumb(crumbs);\r\n\t});\r\n\r\n\t$scope.setBreadcrumb = function(crumbs) {\r\n\t\t$scope.breadcrumbs = crumbs;\r\n\t}\r\n}])\r\n\r\n.directive('breadcrumb', ['ribbon', 'localize', '$compile', function(ribbon, localize, $compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'breadcrumbController',\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.$watch('breadcrumbs', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal !== oldVal || !element.text()) {\r\n\t\t\t\t\t// update DOM\r\n\t\t\t\t\tscope.updateDOM();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tscope.updateDOM = function() {\r\n\t\t\t\telement.empty();\r\n\t\t\t\tangular.forEach(scope.breadcrumbs, function(crumb) {\r\n\t\t\t\t\tvar li = angular.element('<li data-localize=\"' + crumb + '\">' + crumb + '</li>');\r\n\t\t\t\t\tli.text(localize.localizeText(crumb));\r\n\t\t\t\t\t\r\n\t\t\t\t\t$compile(li)(scope);\r\n\t\t\t\t\telement.append(li);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// set the current breadcrumb on load\r\n\t\t\tscope.setBreadcrumb(ribbon.currentBreadcrumb);\r\n\t\t\tscope.updateDOM();\r\n\t\t},\r\n\t\ttemplate: '<ol class=\"breadcrumb\"></ol>'\r\n\t}\r\n}])\r\n;\r\n\r\n// directives for localization\r\nangular.module('app.localize', [])\r\n.factory('localize', ['$http', '$rootScope', '$window', \"settings\", \"$RESOURCE\", function($http, $rootScope, $window, settings, $RESOURCE){\r\n\t// shared variables for `translate`\r\n\tvar encodeHTML = function(txt){\r\n\t\treturn txt.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t}\r\n\tvar tmplReg = /\\{\\{([^\\}]+)\\}\\}/g;\r\n\tvar interestAttrReg = /^param\\d+$/;\r\n\t// internal flag\r\n\tvar ready = false;\r\n\t// factory\r\n\tvar localize = {\r\n\t\tcurrentLocaleData: {},\r\n\t\tcurrentLang: {},\r\n\t\tsetLang: function(lang) {\r\n\t\t\tif(!lang){\r\n\t\t\t\tlang = settings.languages[0];\r\n\t\t\t}\r\n\t\t\t$RESOURCE.load(lang.key, function(data){\r\n\t\t\t\tlocalize.currentLocaleData = data.lang;\r\n\t\t\t\tlocalize.currentLang = lang;\r\n\t\t\t\tready = true;\r\n\t\t\t\t$rootScope.$broadcast('localizeLanguageChanged');\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetLangUrl: function(lang) {\r\n\t\t\treturn \"resources/pkg/\" + lang.langCode + \"/lang.js\";\r\n\t\t},\r\n\r\n\t\tlocalizeText: function(sourceText) {\r\n\t\t\treturn localize.currentLocaleData[sourceText];\r\n\t\t},\r\n\t\ttranslate: function(scope, element, attrs, transkey){\r\n\t\t\tvar onAttrChange = function(e){\r\n\t\t\t\tif(!ready) { return; }\r\n\t\t\t\tvar tmpl = localize.localizeText(attrs[transkey]);\r\n\t\t\t\t// 无效的翻译\r\n\t\t\t\tif(!tmpl) {\r\n\t\t\t\t\t// debug\r\n\t\t\t\t\t// return console.error(\"invalid \" + transkey + \"=\\\"\" + attrs[transkey] + \"\\\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar myhtml = tmplReg.test(tmpl) ? tmpl.replace(tmplReg, function(match, index){\r\n\t\t\t\t\tvar myattr = \"param\" + index;\r\n\t\t\t\t\tvar value = attrs[myattr];\r\n\t\t\t\t\treturn encodeHTML(value);\r\n\t\t\t\t}) : tmpl;\r\n\t\t\t\tswitch(transkey) {\r\n\t\t\t\t\tcase \"localize\":\r\n\t\t\t\t\t\tif(element.is(\"input, textarea\")){\r\n\t\t\t\t\t\t\telement.attr(\"placeholder\", myhtml);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.html(myhtml);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"localizeHref\":\r\n\t\t\t\t\t\telement.attr(\"href\", myhtml); break;\r\n\t\t\t\t\tcase \"localizeTitle\":\r\n\t\t\t\t\t\telement.attr(\"title\", myhtml); break;\r\n\t\t\t\t\tcase \"localizePlaceholder\":\r\n\t\t\t\t\t\telement.attr(\"placeholder\", myhtml); break;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tangular.forEach(attrs, function(v, k){\r\n\t\t\t\tif(interestAttrReg.test(k)) {\r\n\t\t\t\t\tattrs.$observe(k, onAttrChange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(ready) {\r\n\t\t\t\tonAttrChange();\r\n\t\t\t}\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", onAttrChange);\r\n\t\t},\r\n\t\tisReady: function(){\r\n\t\t\treturn ready;\r\n\t\t}\r\n\t};\r\n\r\n\treturn localize;\r\n}])\r\n.directive('localize', ['localize', function(localize) {\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localize\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeTitle\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeTitle\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizePlaceholder\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizePlaceholder\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeHref\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeHref\");\r\n\t\t}\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for navigation\r\nangular.module('app.navigation', [])\r\n.directive('navigation', [\"$timeout\",  function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: ['$scope', function($scope) {\r\n\t\t\t//$scope.version = $$$version;\r\n\t\t}],\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar timer = null;\r\n\t\t\tlet timer_handle = function(){\r\n\t\t\t\tif (!topmenu) {\r\n\t\t\t\t\tif (!null) {\r\n\t\t\t\t\t\telement.first().jarvismenu({\r\n\t\t\t\t\t\t\taccordion : true,\r\n\t\t\t\t\t\t\tspeed : $.menu_speed,\r\n\t\t\t\t\t\t\tclosedSign : '<em class=\"fa icon-jj-xiala\"></em>',\r\n\t\t\t\t\t\t\topenedSign : '<em class=\"fa icon-jj-sou\"></em>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//alert(\"Error - menu anchor does not exist\");\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle : \"Error\",\r\n\t\t\t\t\t\t\tcontent : \"menu anchor does not exist\",\r\n\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\tnumber : \"1\",\r\n\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SLIMSCROLL FOR NAV\r\n\t\t\t\tif ($.fn.slimScroll) {\r\n\t\t\t\t\telement.slimScroll({\r\n\t\t\t\t        height: '100%'\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getElement = function() {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tscope.$on(\"updateNavData\", function(name, navs){\r\n\t\t\t\tscope.navs = navs;\r\n\t\t\t});\r\n\t\t\tscope.$on(\"renderNavItem\", function(name){\r\n\t\t\t\t$timeout.cancel(timer);\r\n\t\t\t\ttimer = $timeout(timer_handle, 100);\r\n\t\t\t});\r\n\t\t},\r\n\t\ttemplate: \"<nav><ul data-ng-transclude></ul></nav>\"\r\n\t};\r\n}])\r\n\r\n\r\n.controller('NavItemController', ['$rootScope', '$scope', '$location', function($rootScope, $scope, $location) {\r\n\t$scope.isChild = false;\r\n\t$scope.active = false;\r\n\t$scope.isActive = function (viewLocation) {\r\n        $scope.active = viewLocation === $location.path();\r\n        return $scope.active;\r\n    };\r\n    $scope.hasIcon = angular.isDefined($scope.icon);\r\n    $scope.hasIconCaption = angular.isDefined($scope.iconCaption);\r\n\r\n    $scope.getItemUrl = function(view) {\r\n    \tif (angular.isDefined($scope.href)) return $scope.href;\r\n    \tif (!angular.isDefined(view)) return '';\r\n    \treturn '#' + view;\r\n    };\r\n\r\n    $scope.getItemTarget = function() {\r\n    \treturn angular.isDefined($scope.target) ? $scope.target : '_self';\r\n    };\r\n\t$scope.$emit(\"renderNavItem\");\r\n\r\n}])\r\n.directive('navItem', ['ribbon', \"$rootScope\", function(ribbon, $root) {\r\n\treturn {\r\n\t\trequire: ['^navigation'],\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'NavItemController',\r\n\t\tscope: {\r\n\t\t\ttitle: '@navTitle',\r\n\t\t\tview: '@',\r\n\t\t\ticon: '@',\r\n\t\t\ticonCaption: '@',\r\n\t\t\thref: '@',\r\n\t\t\ttarget: '@'\r\n\t\t},\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar navCtrl = parentCtrls[0],\r\n\t\t\t\tnavgroupCtrl = parentCtrls[1];\r\n\t\t\tif(attrs.view){\r\n\t\t\t\telement.find(\"ul\").remove();\r\n\t\t\t}\r\n\t\t\tscope.$watch('active', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(true);\r\n\t\t\t\t\t$root.$broadcast(\"updateDocumentTitle\", scope.title);\r\n\t\t\t\t\tscope.setBreadcrumb();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tscope.openParents = scope.isActive(scope.view);\r\n\t\t\tscope.isChild = angular.isDefined(navgroupCtrl);\r\n\t\t\t\r\n\t\t\tscope.setBreadcrumb = function() {\r\n    \t\t\tvar crumbs = [];\r\n    \t\t\tcrumbs.push(scope.title);\r\n    \t\t\t// get parent menus\r\n\t\t\t\tvar test = element.parents('nav li').each(function() {\r\n\t\t\t\t\tvar el = angular.element(this);\r\n\t\t\t\t\tvar parent = el.find('.menu-item-parent:eq(0)');\r\n\t\t\t\t\tcrumbs.push(parent.data('localize').trim());\r\n\t\t\t\t\tif (scope.openParents) {\r\n\t\t\t\t\t\t// open menu on first load\r\n\t\t\t\t\t\tparent.trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// this should be only fired upon first load so let's set this to false now\r\n\t\t\t\tscope.openParents = false;\r\n\t\t\t\tribbon.updateBreadcrumb(crumbs);\r\n    \t\t};\r\n\r\n    \t\telement.on('click', 'a[href!=\"#\"]', function() {\r\n    \t\t\tif ($.root_.hasClass('mobile-view-activated')) {\r\n    \t\t\t\t$.root_.removeClass('hidden-menu');\r\n    \t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: `\r\n\t\t\t<li data-ng-class=\"{active: isActive(view)}\">\r\n\t\t\t\t<a href=\"{{ getItemUrl(view) }}\" target=\"{{ getItemTarget() }}\">\r\n\t\t\t\t\t<i data-ng-if=\"hasIcon\" class=\"{{ icon }}\"><em data-ng-if=\"hasIconCaption\"> {{ iconCaption }} </em></i>\r\n\t\t\t\t\t<span ng-class=\"{'menu-item-parent': !isChild}\" data-localize=\"{{ title }}\"></span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<ul data-ng-transclude=\"\"></ul>\r\n\t\t\t</li>`\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for activity\r\nangular.module('app.activity', [])\r\n.controller('ActivityController', ['$scope', '$http' , function($scope, $http) {\r\n\tvar ctrl = this,\r\n\t\titems = ctrl.items = $scope.items = [];\r\n\r\n\tctrl.loadItem = function(loadedItem, callback) {\r\n\t\tangular.forEach(items, function(item) {\r\n\t      \tif (item.active && item !== loadedItem) {\r\n\t        \titem.active = false;\r\n\t        \t//item.onDeselect();\r\n\t      \t}\r\n\t    });\r\n\r\n\t\tloadedItem.active = true;\r\n\t\tif (angular.isDefined(loadedItem.onLoad)) {\r\n\t\t\tloadedItem.onLoad(loadedItem);\r\n\t\t}\r\n\r\n\t\t$http.get(loadedItem.src).then(function(result) {\r\n\t\t\tvar content = result.data;\r\n\t\t\tif (angular.isDefined(callback)) {\r\n\t\t\t\tcallback(content);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tctrl.addItem = function(item) {\r\n\t\titems.push(item);\r\n\t\tif (!angular.isDefined(item.active)) {\r\n\t\t\t// set the default\r\n\t\t\titem.active = false;\r\n\t\t} else if (item.active) {\r\n\t\t\tctrl.loadItem(item);\r\n\t\t}\r\n\t};\r\n\r\n\tctrl.refresh = function(e) {\r\n\t\tvar btn = angular.element(e.currentTarget);\r\n\t\tbtn.button('loading');\r\n\r\n\t\tif (angular.isDefined($scope.onRefresh)) {\r\n\t\t\t$scope.onRefresh($scope, function() {\r\n\t\t\t\tbtn.button('reset');\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbtn.button('reset');\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activity', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: 'ActivityController',\r\n\t\tscope: {\r\n\t\t\tonRefresh: '=onrefresh',\r\n\t\t},\r\n\t\ttemplate: '<span data-ng-transclude=\"\"></span>'\r\n\t};\r\n})\r\n\r\n.directive('activityButton', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: function($scope) {\r\n\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\ticon: '@',\r\n\t\t\ttotal: '='\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t\t<span id=\"activity\" class=\"activity-dropdown\">\\\r\n\t\t\t\t\t<i ng-class=\"icon\"></i>\\\r\n\t\t\t\t\t<b class=\"badge\"> {{ total }} </b>\\\r\n\t\t\t\t</span>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\r\n\t\t\tattrs.$observe('icon', function(value) {\r\n\t\t\t\tif (!angular.isDefined(value))\r\n\t\t\t\t\tscope.icon = 'fa fa-user';\r\n\t\t\t});\r\n\r\n\t\t\telement.on('click', function(e) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\tif ($this.find('.badge').hasClass('bg-color-red')) {\r\n\t\t\t\t\t$this.find('.badge').removeClassPrefix('bg-color-');\r\n\t\t\t\t\t$this.find('.badge').text(\"0\");\r\n\t\t\t\t\t// console.log(\"Ajax call for activity\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$this.next('.ajax-dropdown').is(':visible')) {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeIn(150);\r\n\t\t\t\t\t$this.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeOut(150);\r\n\t\t\t\t\t$this.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mytest = $this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tif (scope.total > 0) {\r\n\t\t\t\tvar $badge = element.find('.badge');\r\n\t\t\t\t$badge.addClass(\"bg-color-red bounceIn animated\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('ActivityContentController', ['$scope' , function($scope) {\r\n\tvar ctrl = this;\r\n\t$scope.currentContent = '';\r\n\tctrl.loadContent = function(content) {\r\n\t\t$scope.currentContent = content;\r\n\t}\r\n}])\r\n\r\n.directive('activityContent', ['$compile', function($compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tfooter: '=?'\r\n\t\t},\r\n\t\tcontroller: 'ActivityContentController',\r\n\t\ttemplate: '\\\r\n\t\t\t<div class=\"ajax-dropdown\">\\\r\n\t\t\t\t<div class=\"btn-group btn-group-justified\" data-toggle=\"buttons\" data-ng-transclude=\"\"></div>\\\r\n\t\t\t\t<div class=\"ajax-notifications custom-scroll\">\\\r\n\t\t\t\t\t<div class=\"alert alert-transparent\">\\\r\n\t\t\t\t\t\t<h4>Click a button to show messages here</h4>\\\r\n\t\t\t\t\t\tThis blank page message helps protect your privacy, or you can show the first message here automatically.\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t<i class=\"fa fa-lock fa-4x fa-border\"></i>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<span> {{ footer }}\\\r\n\t\t\t\t\t<button type=\"button\" data-loading-text=\"Loading...\" data-ng-click=\"refresh($event)\" class=\"btn btn-xs btn-default pull-right\" data-activty-refresh-button=\"\">\\\r\n\t\t\t\t\t<i class=\"fa fa-refresh\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</div>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\t\t\tscope.refresh = function(e) {\r\n\t\t\t\tactivityCtrl.refresh(e);\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('currentContent', function(newContent, oldContent) {\r\n\t\t\t\tif (newContent !== oldContent) {\r\n\t\t\t\t\tvar el = element.find('.ajax-notifications').html(newContent);\r\n\t\t\t\t\t$compile(el)(scope);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activityItem', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: ['^activity', '^activityContent'],\r\n\t\tscope: {\r\n\t\t\tsrc: '=',\r\n\t\t\tonLoad: '=onload',\r\n\t\t\tactive: '=?'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '\\\r\n\t\t\t<label class=\"btn btn-default\" data-ng-click=\"loadItem()\" ng-class=\"{active: active}\">\\\r\n\t\t\t\t<input type=\"radio\" name=\"activity\">\\\r\n\t\t\t\t<span data-ng-transclude=\"\"></span>\\\r\n\t\t\t</label>',\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar activityCtrl = parentCtrls[0],\r\n\t\t\t\tcontentCtrl = parentCtrls[1];\r\n\r\n\t\t\tscope.$watch('active', function(active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tactivityCtrl.loadItem(scope, function(content) {\r\n\t\t\t\t\t\tcontentCtrl.loadContent(content);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactivityCtrl.addItem(scope);\r\n\r\n\t\t\tscope.loadItem = function() {\r\n\t\t\t\tscope.active = true;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n})\r\n;\r\n\r\nangular.module('app.smartui', [])\r\n.directive('widgetGrid', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.setup_widget_desktop = function() {\r\n\t\t\t\tif ($.fn.jarvisWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\telement.jarvisWidgets({\r\n\t\t\t\t\t\tgrid : 'article',\r\n\t\t\t\t\t\twidgets : '.jarviswidget',\r\n\t\t\t\t\t\tlocalStorage : true,\r\n\t\t\t\t\t\tdeleteSettingsKey : '#deletesettingskey-options',\r\n\t\t\t\t\t\tsettingsKeyLabel : 'Reset settings?',\r\n\t\t\t\t\t\tdeletePositionKey : '#deletepositionkey-options',\r\n\t\t\t\t\t\tpositionKeyLabel : 'Reset position?',\r\n\t\t\t\t\t\tsortable : true,\r\n\t\t\t\t\t\tbuttonsHidden : false,\r\n\t\t\t\t\t\t// toggle button\r\n\t\t\t\t\t\ttoggleButton : true,\r\n\t\t\t\t\t\ttoggleClass : 'fa fa-minus | fa fa-plus',\r\n\t\t\t\t\t\ttoggleSpeed : 200,\r\n\t\t\t\t\t\tonToggle : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// delete btn\r\n\t\t\t\t\t\tdeleteButton : true,\r\n\t\t\t\t\t\tdeleteClass : 'fa fa-times',\r\n\t\t\t\t\t\tdeleteSpeed : 200,\r\n\t\t\t\t\t\tonDelete : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// edit btn\r\n\t\t\t\t\t\teditButton : true,\r\n\t\t\t\t\t\teditPlaceholder : '.jarviswidget-editbox',\r\n\t\t\t\t\t\teditClass : 'fa fa-cog | fa fa-save',\r\n\t\t\t\t\t\teditSpeed : 200,\r\n\t\t\t\t\t\tonEdit : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// color button\r\n\t\t\t\t\t\tcolorButton : true,\r\n\t\t\t\t\t\t// full screen\r\n\t\t\t\t\t\tfullscreenButton : true,\r\n\t\t\t\t\t\tfullscreenClass : 'fa fa-expand | fa fa-compress',\r\n\t\t\t\t\t\tfullscreenDiff : 3,\r\n\t\t\t\t\t\tonFullscreen : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// custom btn\r\n\t\t\t\t\t\tcustomButton : false,\r\n\t\t\t\t\t\tcustomClass : 'folder-10 | next-10',\r\n\t\t\t\t\t\tcustomStart : function() {\r\n\t\t\t\t\t\t\talert('Hello you, this is a custom button...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcustomEnd : function() {\r\n\t\t\t\t\t\t\talert('bye, till next time...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// order\r\n\t\t\t\t\t\tbuttonOrder : '%refresh% %custom% %edit% %toggle% %fullscreen% %delete%',\r\n\t\t\t\t\t\topacity : 1.0,\r\n\t\t\t\t\t\tdragHandle : '> header',\r\n\t\t\t\t\t\tplaceholderClass : 'jarviswidget-placeholder',\r\n\t\t\t\t\t\tindicator : true,\r\n\t\t\t\t\t\tindicatorTime : 600,\r\n\t\t\t\t\t\tajax : true,\r\n\t\t\t\t\t\ttimestampPlaceholder : '.jarviswidget-timestamp',\r\n\t\t\t\t\t\ttimestampFormat : 'Last update: %m%/%d%/%y% %h%:%i%:%s%',\r\n\t\t\t\t\t\trefreshButton : true,\r\n\t\t\t\t\t\trefreshButtonClass : 'fa fa-refresh',\r\n\t\t\t\t\t\tlabelError : 'Sorry but there was a error:',\r\n\t\t\t\t\t\tlabelUpdated : 'Last Update:',\r\n\t\t\t\t\t\tlabelRefresh : 'Refresh',\r\n\t\t\t\t\t\tlabelDelete : 'Delete widget:',\r\n\t\t\t\t\t\tafterLoad : function() { },\r\n\t\t\t\t\t\trtl : false, // best not to toggle this!\r\n\t\t\t\t\t\tonChange : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonSave : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajaxnav : $.navAsAjax // declears how the localstorage should be saved (HTML or AJAX page)\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscope.setup_widget_mobile = function() {\r\n\t\t\t\tif ($.enableMobileWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\tscope.setup_widgets_desktop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($.device === \"desktop\") {\r\n\t\t\t\tscope.setup_widget_desktop();\r\n\t\t\t} else {\r\n\t\t\t\tscope.setup_widget_mobile();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.directive('widget', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetHeader', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\ttitle: '@',\r\n\t\t\ticon: '@'\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t<header>\\\r\n\t\t\t\t<span class=\"widget-icon\"> <i data-ng-class=\"icon\"></i> </span>\\\r\n\t\t\t\t<h2>{{ title }}</h2>\\\r\n\t\t\t\t<span data-ng-transclude></span>\\\r\n\t\t\t</header>'\r\n\t}\r\n})\r\n\r\n.directive('widgetToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetEditbox', function() {\r\n\treturn {\r\n\t\trestrict: 'AE', \r\n\t\ttransclude: true, \r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget-editbox\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBody', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBodyToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tclass: '@'\r\n\t\t},\r\n\t\ttemplate: '<div class=\"widget-body-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetContent', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-body\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\n\treturn {\r\n\t\trestrict: \"AE\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", function(){\r\n\t\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('textareaEmail', [function(){\r\n\treturn {\r\n\t\trequire: 'ngModel',\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, iElm, iAttrs, controller) {\r\n\t\t\tvar modelCtrl = controller;\r\n\t\t\tfunction validate(val){\r\n\t\t\t\tvar vals = Array.isArray(val) ? val : [val];\r\n\t\t\t\tvar reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n\t\t\t\tvar isvalide = vals.every(function(v){ return reg.test(v)});\r\n\t\t\t\treturn isvalide;\r\n\t\t\t}\r\n\t\t\tfunction parser(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value.split('\\n').reduce(function(arr,b){\r\n\t\t\t\t\t\tif(b.trim().length){\r\n\t\t\t\t\t\t\tarr.push(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t},[]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction formatter(value){\r\n\t\t\t\treturn validate(value) ? value.join(\"\\n\") : undefined;\r\n\t\t\t}\r\n\t\t\tfunction viewChangeListener(){\r\n\t\t\t\tmodelCtrl.$setValidity('email',validate(modelCtrl.$modelValue));\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$isEmpty = function(val){\r\n\t\t\t\tif(Array.isArray(val) && val.length === 0){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif(!val){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$parsers.push(parser);\r\n\t\t\tmodelCtrl.$formatters.push(formatter);\r\n\t\t\tmodelCtrl.$viewChangeListeners.push(viewChangeListener);\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('schedulerInput',['$rootScope',function($rootScope){\r\n\treturn {\r\n\t    require: \"ngModel\",\r\n\t    link: function(scope,element,attrs,ngModel){\r\n\t    \t$rootScope.$broadcast('matchInput', true);\r\n\t        element.bind('keyup',function(value){\r\n\t            // var isValid = this.value.match(/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/);\r\n\t            var isValid = this.value.match(/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/);\r\n\t            $rootScope.$broadcast('matchInput', isValid);\r\n\t        });\r\n\t    }\r\n\t}\r\n}])\r\n.service(\"formDate\",[function(){\r\n\tthis.format = function(date, fmt){\r\n\t\tvar o = {\r\n\t\t  \"M+\" : date.getMonth()+1,                 //月份   \r\n\t\t  \"d+\" : date.getDate(),                    //日   \r\n\t\t  \"h+\" : date.getHours(),                   //小时   \r\n\t\t  \"m+\" : date.getMinutes(),                 //分   \r\n\t\t  \"s+\" : date.getSeconds(),                 //秒   \r\n\t\t  \"q+\" : Math.floor((date.getMonth()+3)/3), //季度   \r\n\t\t  \"S\"  : date.getMilliseconds()             //毫秒   \r\n\t\t};   \r\n\t\tif(/(y+)/.test(fmt))   \r\n\t\t  fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \r\n\t\tfor(var k in o)   \r\n\t\t  if(new RegExp(\"(\"+ k +\")\").test(fmt))   \r\n\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \r\n\t\treturn fmt;\r\n\t}\r\n}])\r\n.service(\"customModal\",[\"$modal\",\"$rootScope\",function($modal,$root){\r\n\tthis.openModal=function(obj){\r\n\t\t/**\r\n\t\t * [init 模态框配置]\r\n\t\t */\r\n\t\tvar init={\r\n\t\t\ttitle: obj.title, \t\t\t\t\t\t\t\t\t\t// 标题，必传\r\n\t\t\tdelTips: obj.delTips,\t\t\t\t\t\t\t\t\t// 删除提示，必传\r\n\t\t\tkey: obj.key?obj.key:'',\t\t\t\t\t\t\t\t// 删除标志，一个页面可能有多个删除，可不传\r\n\t\t\tdelete_rows: obj.delete_rows?obj.delete_rows:[],\t\t// 可删除的数据，可不传，如清空操作\r\n\t\t\tdelParm: obj.delParm?obj.delParm:'',\t\t\t\t\t// 删除数据的名字key，可不传\r\n\t\t\tnodelete_rows: obj.nodelete_rows?obj.nodelete_rows:[],   // 不可删除的数据，可不传\r\n\t\t\tnodelTips: obj.nodelTips?obj.nodelTips:\"\"\t\t\t\t// 不可删除提示，可不传\r\n\t\t}\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: [\r\n\t\t\t\t\t\t\"<section id='widget-grid' ><div class='modal-content'>\",\r\n\t\t\t\t\t\t\"<div class='modal-header'><a type='button' class='close' data-ng-click='close()'>\",\r\n\t\t\t\t\t\t\"<span aria-hidden='true'>×</span><span class='sr-only'>\",\r\n\t\t\t\t\t\t\"Close</span></a><h4 class='modal-title' id='mySmallModalLabel' data-localize=\"+init.title+\"></h4></div><div class='modal-body'>\",\r\n\t\t\t\t\t\t\"<form class='form-horizontal'>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-localize='\"+init.delTips+\"' param1='{{deleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-ng-if='\"+init.nodelete_rows.length+\"' data-localize='\"+init.nodelTips+\"' param1='{{nodeleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<footer class='text-right'><a class='btn btn-primary' data-ng-click='ok()'  data-localize='确定'>确定\",\r\n\t\t\t\t\t\t\"</a><a class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'>取消\",\r\n\t\t\t\t\t\t\"</a></footer></form></div></div></section>\"].join(''),\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.deleteName = init.delete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.nodeleteName = init.nodelete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$root.$broadcast(\"DELETE\", init.key===''?init.delete_rows:{key: init.key, data: init.delete_rows});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n.directive(\"treeSelectNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', selecteduser: '='},\r\n        template: `<dd class=\"group\" ng-repeat=\"item in users\">\r\n\t\t\t\t\t<dl class=\"group\">\r\n\t\t\t\t\t\t<dt class=\"group-title\">{{item.dept_name}}</dt>\r\n\t\t\t\t\t\t<tree-select-node ng-repeat=\"node in item.children\" data-selecteduser=\"selecteduser\" data-node=\"node\"></tree-select-node>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t  </dd>`,\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeSelectNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', selecteduser: '='},\r\n        template: '<dd></dd>',\r\n        controller: function($scope){\r\n        \t$scope.selectUser = function(user){\r\n        \t\t$scope.$emit('selectCommonUser', user);\r\n        \t}\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n            \telement.append('<dl class=\"group\">'+\r\n\t\t\t\t\t\t\t\t\t'<dt class=\"group-title\">{{node.dept_name}}</dt>'+\r\n\t\t\t\t\t\t\t\t\t'<tree-select-node ng-repeat=\"sub in node.children\" data-selecteduser=\"selecteduser\" data-nodes=\"node.children\" data-node=\"sub\"></tree-select-node>'+\r\n\t\t\t\t\t\t\t\t'</dl>')\r\n            }else{\r\n            \telement.append('<dd class=\"group-item\" titile=\"{{selecteduser}}\" url=\"{{ node }}\" ng-class=\"{active:selecteduser.user_id === node.user_id}\" ng-click=\"selectUser(node)\">{{node.name}}({{node.real_name}})</dd>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.directives.js","angular.module(\"vdi\", [])\r\n\r\n.factory(\"Task\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/home/tasklog\", null, {\r\n        query: { method: \"GET\", isArray: false },\r\n        post: { method: \"POST\" },\r\n        put: { method: \"PUT\" }\r\n    });\r\n}])\r\n\r\n\r\n.factory(\"VNC\", [\"$resource\", \"$Domain\", function($resource, $Domain) {\r\n    return $resource($Domain + \"/thor/instance/vnc/:id\", { id: \"@id\" }, {\r\n        loadISO:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/loadISO\" },\r\n        save:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/update_template\" }\r\n    });\r\n}])\r\n\r\n.factory(\"loginResource\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/version\", null, {\r\n        query: { method: \"GET\"}\r\n    })\r\n}])\r\n\r\n\r\n.filter('lun_name', function () {\r\n    return function (lun) {\r\n        if (!angular.isUndefined(lun)) {\r\n            lun.map(function (item) {\r\n                item.value = item.vendor + \" lun-\" + item.lun + \" \" + item.size;\r\n            });\r\n        }\r\n        return lun;\r\n    };\r\n})\r\n.filter('storage_type', function () {\r\n    var type2str = {\r\n        local: \"本地磁盘\",\r\n        iscsi: 'iscsi 磁盘',\r\n        netfs: '网络文件系统',\r\n        fc: 'FC 光纤存储'\r\n    };\r\n    return function (type) {\r\n        return type2str[type]\r\n    }\r\n})\r\n.filter('storage_status', function () {\r\n    var stauts2str = {\r\n        running: \"正常\",\r\n        building:\"准备中\",\r\n        error:'异常'\r\n    };\r\n    return function (stauts) {\r\n        return stauts2str[stauts]\r\n    }\r\n})\r\n.filter('unsafe', function($sce) {\r\n    return function(val) {\r\n        return $sce.trustAsHtml(val+\"\");\r\n    };\r\n})\r\n.filter('join', function() {\r\n    return function(val,slash) {\r\n      return val.filter(function(d){\r\n        return d;\r\n      }).join(slash)\r\n    };\r\n})\r\n.filter('network_type', function () {\r\n    var type2str = {\r\n      nat:'NAT',\r\n      bridge:'桥接',\r\n      vlan:'VLAN'\r\n    };\r\n    return function (val) {\r\n      return type2str[val];\r\n    };\r\n})\r\n.filter('yesorno', function () {\r\n    return function (val) {\r\n      return val ? '是' : '否';\r\n    };\r\n})\r\n.filter('to_mb', function () {\r\n    return function (val) {\r\n      return (val/1024/1024).toFixed(2);\r\n    };\r\n})\r\n.filter('reverse', function() {\r\n  return function(input,searchText,searchName) {\r\n    if(input && searchText){\r\n        var outPut = [];\r\n        outPut = input.filter(function(item){\r\n            if(item[searchName].indexOf(searchText)>-1)\r\n                return item;\r\n        })\r\n        return outPut;\r\n    }\r\n    return input;\r\n  };\r\n})\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\t$filterProvider.register(\"paging\", function(){\r\n\t\treturn function(items, index, pageSize){\r\n\t\t\tif(!angular.isArray(items)){\r\n                return items;\r\n            }\r\n            if(pageSize > 0 && index > 0){\r\n    \t\t\tvar total = items.length;\r\n    \t\t\tvar totalPage = Math.ceil(total / pageSize);\r\n    \t\t\tindex = Math.min(totalPage, Math.max(1, index));\r\n    \t\t\treturn items.slice((index - 1) * pageSize, index * pageSize);\r\n            }\r\n            return items;\r\n\t\t};\r\n\t});\r\n}])\r\n\r\n.directive(\"dialog\", [\"$modal\", \"$rootScope\", \"$$$I18N\", function ($modal, $rootScope, $$$I18N) {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            element.click(function () {\r\n                if(attrs.disabled){\r\n                    $.bigBox({\r\n                        title:$$$I18N.get(\"INFOR_TIP\"),\r\n                        content:attrs.error\r\n                    });\r\n                }else{\r\n                    var dialog = $modal.open({\r\n                        templateUrl: \"views/vdi/dialog/\" + attrs.dialogUrl,\r\n                        controller: attrs.dialog,\r\n                        scope: $scope,\r\n                        size: attrs.dialogSize\r\n                    });\r\n                    $scope.close = dialog.dismiss.bind(dialog);\r\n                    window.___dialog = dialog;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"widgetGrid\", [\"$filter\", \"$modal\", function($filter, $modal){\r\n    function getPosition(e, ele) {\r\n        var st = Math.max(\r\n            document.documentElement.scrollTop,\r\n            document.body.scrollTop\r\n        );\r\n        var sl = Math.max(\r\n            document.documentElement.scrollLeft,\r\n            document.body.scrollLeft\r\n        );\r\n        var cw = document.documentElement.clientWidth;\r\n        var ch = document.documentElement.clientHeight;\r\n        var sw = Math.max(\r\n            document.documentElement.scrollWidth,\r\n            document.body.scrollWidth\r\n        );\r\n        var sh = Math.max(\r\n            document.documentElement.scrollHeight,\r\n            document.body.scrollHeight\r\n        );\r\n        var ow = ele.offsetWidth;\r\n        var oh = ele.offsetHeight;\r\n        return {\r\n            x: Math.max(0, e.pageX + ow > sl + cw ? sl + cw - ow : e.pageX),\r\n            y: Math.max(0, e.pageY + oh > st + ch ? st + ch - oh : e.pageY)\r\n        }\r\n    }\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function($scope){\r\n            this.getCurrentPage = function(){\r\n                return Number($scope.currentPage) > 0 ? $scope.currentPage : 0;\r\n            };\r\n            this.getCurrentRows = function(){\r\n                return $scope.getCurrentRows();\r\n            }\r\n            this.getPageSize = function(){\r\n                return Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n            };\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n            var context_wrapper = element.find(\".context_wrapper\");\r\n            context_wrapper.on(\"mousedown\", function (e) {\r\n                if (e.target === this) {\r\n                    context_wrapper.hide();\r\n                    element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n                }\r\n            }).on(\"click\", function () {\r\n                context_wrapper.hide();\r\n                element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n            });\r\n            context_wrapper.hide();\r\n\r\n            // $scope.searchText = \"\";\r\n            //$scope.pagesize = 5;\r\n            $scope.currentPage = 1;\r\n\r\n            $scope.getCurrentRows = function(){\r\n                return $filter(\"paging\")(\r\n                    $scope.getFilterRows(),\r\n                    $scope.currentPage, $scope.pagesize\r\n                );\r\n            };\r\n            $scope.getFilterRows = function(){\r\n                return $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n            };\r\n\r\n            $scope.checkAll = function(){\r\n                var rows = $scope.getCurrentRows();\r\n                var _all = rows.length && rows\r\n                    .filter(item => !item._ignore ).length && rows\r\n                    .filter(item => !item._ignore )\r\n                    .every(row => row._selected );\r\n                $scope.checkedAll = _all;\r\n                return _all;\r\n            };\r\n            $scope.selectAllChange = function (checkAll) {\r\n                var rows = $scope.getCurrentRows();\r\n                rows.filter(item => !item._ignore ).forEach(function (row) {\r\n                    row._selected = checkAll;\r\n                });\r\n                $scope.checkedAll = checkAll;\r\n            };\r\n            $scope.checkOne = function () {\r\n                var rows = $scope.getCurrentRows();\r\n                return rows.filter(item => !item._ignore ).some(function (row) {\r\n                    return row._selected;\r\n                });\r\n            };\r\n            $scope.sort = function(name, asc){\r\n                $scope.rows.sort(function(a, b){\r\n                    return (a[name] > b[name] ? 1 : -1) * (asc ? 1 : -1);\r\n                });\r\n            };\r\n            $scope.pageSizeChange =\r\n            $scope.pageChange = function(){\r\n                $scope.rows.forEach(function(item, i){\r\n                    item._selected = false;\r\n                });\r\n            };\r\n            $scope.currentItem = null;\r\n            $scope.$on(\"contextmenu\", function (e, item, de, handler) {\r\n                $scope.currentItem = item;\r\n                handler.addClass(\"contextmenu_selected\");\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                context_wrapper.fadeIn(200);\r\n                var menu = element.find(\".grid_context_menu\");\r\n                var offset = context_wrapper.offset();\r\n                var pos = getPosition(de, menu[0]);\r\n                menu.css({\r\n                    top: pos.y - offset.top + \"px\",\r\n                    left: pos.x - offset.left + \"px\"\r\n                });\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                e.stopPropagation();\r\n                de.preventDefault();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"gridPagination\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require: [\"^widgetGrid\"],\r\n        conroller: function($scope){\r\n\r\n        },\r\n        link: function($scope, element, attrs, ctrls){\r\n            var grid = ctrls[0];\r\n            $scope.getStart = function(){\r\n                var current = grid.getCurrentPage();\r\n                var pagesize = grid.getPageSize();\r\n                return pagesize > 0 ? (current - 1) * pagesize + 1 : 0;\r\n            };\r\n            $scope.getEnd = function(){\r\n                var current = $scope.currentPage;\r\n                var pagesize = grid.getPageSize();\r\n                var end = current * pagesize;\r\n                var currentCount = $scope.getFilterRows().length;\r\n                return end < currentCount ? end : currentCount;\r\n            };\r\n            $scope.getCurrentCount = function(){\r\n                return $scope.getCurrentRows().length;\r\n            };\r\n        }\r\n    }\r\n}])\r\n.directive(\"ribbonTips\", [\"localize\", \"$route\", \"$location\", \"$interval\", function(localize, $route, $location, $interval){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function($scope, element, attrs){\r\n            var timer, dereg;\r\n            var fn_update_help_info = function(){\r\n                var path = $location.$$path;\r\n                if(/^\\/resource\\/network\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/resource/network/:id\";\r\n                }\r\n                if(/^\\/desktop\\/teach\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/desktop/teach/:id\";\r\n                }\r\n                var help_text = attrs.myTips?localize.localizeText(attrs.myTips):localize.localizeText(path);\r\n                element.attr(\"data-content\", help_text);\r\n                if(help_text) {\r\n                    element.parent().show();\r\n                } else {\r\n                    element.parent().hide();\r\n                }\r\n            };\r\n            $scope.$on(\"$routeChangeSuccess\", function(){\r\n                fn_update_help_info();\r\n            });\r\n            if(localize.isReady()) {\r\n                fn_update_help_info();\r\n            }\r\n            $scope.$on(\"localizeLanguageChanged\", fn_update_help_info);\r\n        }\r\n    };\r\n}])\r\n.directive(\"contextmenu\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            if (attrs.contextmenuDisabled !== \"true\") {\r\n                element.bind(\"contextmenu\", function (e) {\r\n                    $scope.$emit(attrs.contextmenuEventName || \"contextmenu\", $scope.item, e, element);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}])\r\n\r\n.directive(\"wizard\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        scope: {\r\n            lastText: \"@\",\r\n            btnUnable:\"=\"\r\n        },\r\n        controller: function ($scope, localize, $$$I18N) {\r\n            var steps = $scope.steps = [];\r\n            $scope.currentStep = null;\r\n            $scope.moveWth = 0;\r\n            var defaults = {\r\n                prevBtnText: \"上一步\",\r\n                nextBtnText: \"下一步\",\r\n                doneBtnText: \"完成\",\r\n            };\r\n            $scope.$on(\"currentStepChange\", function(e, stepIndex){\r\n                $scope.go(stepIndex);\r\n            });\r\n            $scope.select = function (step) {\r\n                var index;\r\n                steps.forEach(function (s, i) {\r\n                    s.selected = s === step;\r\n                    if(s.selected) {\r\n                        index = i;\r\n                    }\r\n                });\r\n                $scope.currentStep = step;\r\n                [\"prev\", \"next\", \"done\"].forEach(function(s){\r\n                    var key = s + \"BtnText\";\r\n                    $scope[key] = $$$I18N.get(step[key] || defaults[key]);\r\n                });\r\n                $scope.$emit(\"selectStepChange\", {index: index, stepScope: step});\r\n            };\r\n            $scope.getCurrentIndex = function () {\r\n                return steps.indexOf($scope.currentStep);\r\n            };\r\n\r\n            $scope.prev = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                //var e = $scope.$emit(($scope.stepEventName || \"WizardStep\"), $scope.currentStep);\r\n                var prev = steps[index - 1];\r\n                prev && $scope.select(prev);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n\r\n            };\r\n            $scope.next = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling);\r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.moveWth = $scope.getMarginValue();\r\n                };\r\n\r\n            };\r\n            $scope.go = function(index){\r\n                $scope.select(steps[index]);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n            }\r\n            $scope.showPrev = function () {\r\n                return steps.indexOf($scope.currentStep) > 0 && $scope.currentStep.prevBtnText !== \"\";\r\n            };\r\n            $scope.isLast = function () {\r\n                return steps.indexOf($scope.currentStep) >= steps.length - 1;\r\n            };\r\n            $scope.done = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling); \r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.$emit($scope.doneEventName || \"WizardDone\", steps, steps.map(function (step) {\r\n                        return step.$$nextSibling\r\n                    }));\r\n                }\r\n            };\r\n            this.addStep = function (step) {\r\n                steps.push(step);\r\n                if (steps.length === 1) {\r\n                    $scope.select(step);\r\n                }\r\n            };\r\n            this.jumpStep = function (index) {\r\n\r\n            };\r\n            this.removeStep = function (index) {\r\n\r\n            };\r\n            this.insertStep = function (step) {\r\n\r\n            };\r\n        },\r\n        link : function($scope, element, attrs){\r\n            $scope.getMarginValue = function(){\r\n                var _idx = $scope.getCurrentIndex();\r\n                var wizardWth = element.find('.wizard').outerWidth();\r\n                var _wth = 60;\r\n                for(var i = 0; i<=_idx+1 ; i++){\r\n                    _wth+=element.find(\".steps>li\").eq(i).outerWidth();\r\n                }\r\n                if(wizardWth - _wth < 0){\r\n                    return (wizardWth - _wth) ;\r\n                }else{\r\n                    return 0;\r\n                }\r\n            };\r\n            // if(attrs.disableNav !== \"true\") {\r\n            //     element.find(\".steps\").delegate(\"li.complete\",\"click\",function(e){\r\n            //         var _idx = $(this).index();\r\n            //         $scope.go(_idx);\r\n            //     });\r\n            // }\r\n        },\r\n        template: `<div class=\"wizard\" style=\"margin-bottom:20px;\">\r\n            <ul class=\"steps\" style=\"margin-left:{{moveWth}}px\">\r\n                <li data-ng-repeat=\"step in steps\" data-target=\"#step{{ $index }}\" data-ng-class=\"{ active: getCurrentIndex() >= $index ,complete:getCurrentIndex() > $index }\">\r\n                    <span class=\"badge badge-info\">{{ $index + 1 }}</span><span localize=\"{{step.name}}\"></span><span class=\"chevron\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"actions\">\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"showPrev()\" data-ng-click=\"prev()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-primary btn-prev\">\r\n                    <i class=\"fa fa-arrow-left\"></i><span ng-bind=\"prevBtnText\"></span>\r\n                </button>\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"!isLast()\" data-ng-click=\"next()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"nextBtnText\"></span> <i class=\"fa fa-arrow-right\"></i>\r\n                </button>\r\n                <button id='finish' ng-show=\"!btnUnable && isLast()\" type=\"button\" data-ng-click=\"done()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"doneBtnText\"></span><i class=\"fa fa-check\" ></i>\r\n                </button>\r\n                <img ng-show=\"btnUnable\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n                <img ng-show=\"currentStep.showLoading === true\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"step-content\">\r\n            <form data-ng-transclude class=\"form-horizontal\" id=\"fuelux-wizard\" method=\"post\" novalidate>\r\n            </form>\r\n        </div>\r\n        <div ng-show=\"currentStep.showLoading === true\" style=\"position: absolute;top:0;right:0;bottom:0;left:0;z-index:999;\"></div>`\r\n    };\r\n}])\r\n.directive(\"wizardStep\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^wizard\",\r\n        transclude: true,\r\n        replace: true,\r\n        scope: {\r\n            name: \"@\",\r\n            prevBtnText: \"@\",\r\n            nextBtnText: \"@\",\r\n            doneBtnText: \"@\",\r\n            testValid: \"=\"\r\n        },\r\n        controller: function ($scope) {},\r\n        link: function (scope, element, attrs, wizard) {\r\n            wizard.addStep(scope);\r\n        },\r\n        template: `<div class=\"step-pane\" data-ng-class=\"{ active: selected }\" data-ng-show=\"selected\" data-ng-transclude></div>`\r\n    };\r\n}])\r\n\r\n.directive('areaTraffic', function ($interval,$http) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope:{\r\n            options : \"=\"\r\n        },\r\n        link: function (scope, e, attrs) {\r\n            Highcharts.setOptions({    //disable utc time\r\n                global: {    \r\n                    useUTC: false    \r\n                }    \r\n            }); \r\n            function init_data(){\r\n                // generate init data\r\n                var data = [],\r\n                    time = (new Date()).getTime(),\r\n                    i;\r\n\r\n                for (i = -40; i <= 0; i += 1) {\r\n                    data.push({\r\n                        x: time + i * scope.$parent.refresh_time,\r\n                        y: 0\r\n                    });\r\n                }\r\n                return data;\r\n            }\r\n            var hc_options = scope.options.options;\r\n            hc_options.chart.renderTo = e[0];\r\n            hc_options.yAxis.min = 0;\r\n            angular.forEach(hc_options.series,function(s){\r\n                s.data = init_data();\r\n            });\r\n\r\n            var highcharts = new Highcharts.Chart(hc_options);\r\n\r\n            function drawPoint(data) {\r\n                var datetime = (new Date()).getTime();\r\n                var hc_series = highcharts.series;\r\n\r\n                scope.options.drawpoint(hc_series,data,datetime);\r\n\r\n            }\r\n\r\n            function reset_highcharts(){\r\n                //reset highcharts\r\n                highcharts.destroy();\r\n                angular.forEach(hc_options.series,function(s){\r\n                    s.data = init_data();\r\n                });\r\n                highcharts = new Highcharts.Chart(hc_options);\r\n            }\r\n\r\n            scope.$watch('$parent.metric_data',function(newvalue){\r\n                if(newvalue){\r\n                    drawPoint(newvalue);\r\n                }\r\n            });\r\n\r\n            scope.$watch('$parent.refresh_time',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n            scope.$watch('$parent.item',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n        }\r\n    }\r\n})\r\n.directive(\"monitorTree\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        template: `<div class=\"portlet-title clearfix padding-5\">\r\n                <div class=\"pull-left\">\r\n                    <a href=\"javascript:\" id=\"collape\" class=\"btn btn-default btn-xs\"><i class=\"fa  icon-jj-Shrinkfrom\"></i> </a>\r\n                    <a href=\"javascript:\" id=\"open\" class=\"btn btn-default  btn-xs\"><i class=\"fa icon-jj-Open\"></i></a>\r\n                </div>\r\n                <div class=\"pull-right\"><a href=\"javascript:\"class=\"btn btn-default  btn-xs\" ng-init=\"ishow=false\" ng-click=\"ishow==true?ishow=false:ishow=true;open()\"><i class=\"fa fa-search\"></i></a></div> \r\n            </div>\r\n            <div class=\"search\" ng-show=\"ishow\"><input type=\"search\" localize=\"桌面名\" ng-model=\"searchText\"></div>\r\n            <div class=\"portlet-body fuelux monitor-tree\" data-ng-transclude></div>\r\n        `,\r\n        link: function(scope, element, attrs){\r\n            element.delegate('#open', 'click', function(event) {\r\n                element.find(\".parent\").addClass('in');\r\n            });\r\n            element.delegate('#collape', 'click', function(event) {\r\n                element.find(\".parent\").removeClass('in');\r\n            });\r\n            element.delegate (\".tree-toggle\",\"click\",function(event){\r\n                var parent =$(this).parent().parent(\".parent\");\r\n                if(parent.hasClass('in')){\r\n                    parent.removeClass('in');\r\n                }else{\r\n                    parent.addClass(\"in\");\r\n                }\r\n            });\r\n            element.delegate(\".tree-it\",\"click\",function(event){\r\n                element.find(\"li\").removeClass('active');\r\n                $(this).parent(\"li\").addClass('active');\r\n            });\r\n            scope.open = function(){\r\n                element.find(\".parent\").addClass('in');\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive('ipPattern',function (ip_pattern) {\r\n\r\n    return {\r\n      require: ['ngModel','?ngRequired'],\r\n      link: function (scope, elm, attrs, ctrls) {\r\n        var ngmodelctl = ctrls[0];\r\n        var ngrequiredctl = ctrls[1];\r\n\r\n        ngmodelctl.$parsers.push(function (viewValue) {\r\n\r\n          if (ip_pattern.test(viewValue)||(!ngrequiredctl&&!viewValue)) {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', true);\r\n            return viewValue;\r\n          } else {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', false);\r\n            return undefined;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n})\r\n.directive(\"preventSpace\", [function(){\r\n    return {\r\n      restrict: \"A\",\r\n      link: function(scope, element, attrs){\r\n        element.on(\"keypress\",function(e){\r\n          if(e.keyCode === 32){\r\n            e.preventDefault();\r\n          }\r\n        })\r\n      }\r\n    };\r\n  }])\r\n.directive(\"inputNumber\", [function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        link: function(scope, element, attrs){\r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrlKey = [\r\n                8, // backspace\r\n                46,// delete\r\n                37,// left arrow\r\n                39 // right arrow\r\n            ];\r\n            element.on(\"keydown\", function(e){\r\n                var code = e.which || e.keyCode;\r\n                if(numKey.indexOf(code) > -1) {\r\n                    var num = code < 60 ? code - 48 : code - 96;\r\n                    var nextValue = this.value + num;\r\n                    if(!attrs.max) { return; }\r\n                    var max = attrs.max * 1;\r\n                    if(!isNaN(max) && nextValue <= max) {\r\n                        return;\r\n                    }\r\n                } else if(ctrlKey.indexOf(code) > -1) {\r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n        }\r\n    };\r\n}])\r\n// .directive(\"inputDot\", [function(){\r\n//     return {\r\n//         restrict: \"AE\",\r\n//         link: function(scope, element, attrs){\r\n//             element.on(\"keydown\",function(e){\r\n//                 if(attrs.inputDot == 'true'){\r\n//                    if(e.keyCode === 190 || e.keyCode === 110 || e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                    }\r\n//                 }\r\n//                 else{\r\n//                     if(e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                     }\r\n//                 }\r\n\r\n//             });\r\n//         }\r\n//     };\r\n// }])\r\n.directive(\"formatIp\", [\"$compile\",function($compile){\r\n    return {\r\n        restrict:\"EA\",\r\n        require:\"ngModel\",\r\n        scope:{\r\n            start:\"=\",\r\n            end:\"=\"\r\n        },\r\n        link:function(scope,element,attrs,ctrl){\r\n            var ngModelCtrl = ctrl;\r\n            var required = attrs.ipRequired ? scope.$eval(attrs.ipRequired) : true;\r\n\r\n            if(!ngModelCtrl){\r\n                return;\r\n            };\r\n            var CHECKTOOLS = {};\r\n\r\n            CHECKTOOLS.checkIP = function(ip){\r\n                if(!ip) { return false; }\r\n                var parts = ip.split(\".\");\r\n                //9029bug 0.0.0.0不合法IP\r\n                var numre = /^(0|[1-9][0-9]*)$/;\r\n                var i, valid = true;\r\n                if(parts.length !== 4) { return false; }\r\n                for(i = 0; i < 4; i++) {\r\n                    if(numre.test(parts[i]) && parseInt(parts[i]) <= 255) {\r\n                        continue;\r\n                    } else {\r\n                        valid = false;\r\n                    }\r\n                }\r\n                valid = valid && (ipformatNum(ip) > ipformatNum('1.0.0.0'));\r\n                return valid;\r\n            };\r\n\r\n            function ipformatNum(ip){\r\n                var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];   \r\n            }\r\n\r\n            CHECKTOOLS.ip2long = function(ip){\r\n                if(CHECKTOOLS.checkIP(ip)){\r\n                    var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                    return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];\r\n                }\r\n            };\r\n            CHECKTOOLS.checkRange = function(ip,s_ip,e_ip){\r\n                if(CHECKTOOLS.checkIP(ip),CHECKTOOLS.checkIP(s_ip) && CHECKTOOLS.checkIP(e_ip)){\r\n                     var s = CHECKTOOLS.ip2long(s_ip);\r\n                     var e = CHECKTOOLS.ip2long(e_ip);\r\n                     var c = CHECKTOOLS.ip2long(ip);\r\n                     return c >= s && c <= e;\r\n                 }else{\r\n                    return false;\r\n                 }\r\n            };\r\n            var popEl = angular.element(\"<div format-ip-wrap></div>\");\r\n            var $input = $compile(popEl)(scope);\r\n            element.addClass(\"ng-hide\");\r\n            element.after($input);\r\n\r\n            // model -- ui\r\n            \r\n            ngModelCtrl.$render = function(){\r\n                var modelVal = ngModelCtrl.$modelValue;\r\n                var modelValArr;\r\n                try{\r\n                    if(modelVal === null) {\r\n                        modelValArr = [];\r\n                        ngModelCtrl.$setPristine();\r\n                    } else {\r\n                        modelValArr = modelVal.split(\".\");\r\n                    }\r\n                    [1,2,3,4].forEach(function(i,idx){\r\n                        scope[\"seg\" + i] = modelValArr[idx] || \"\";\r\n                    });\r\n                }catch(err){\r\n                }\r\n                // setValidate();\r\n            };\r\n            /*\r\n            function setValidate(){\r\n                var isValid;\r\n                if(ngModelCtrl.$modelValue){\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ngModelCtrl.$modelValue,scope.start,scope.end)\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ngModelCtrl.$modelValue);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\",isValid);\r\n                }else{\r\n                    ngModelCtrl.$setValidity(\"ip\",true);\r\n                }\r\n            };\r\n\r\n            // ui -- model\r\n            $input.on(\"input\",function(e){\r\n                scope.$apply(function(){\r\n                    var val = [1,2,3,4].map(function(i){ return scope[\"seg\" + i] || \"\"; }).join(\".\");\r\n                    var isNull = val.split(\".\").every(function(item){ return item.length===0 });\r\n                    if(isNull){\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }else{\r\n                        ngModelCtrl.$setViewValue(val);\r\n                    }\r\n                    ngModelCtrl.$render();\r\n                })\r\n            });\r\n\r\n            */\r\n\r\n            scope.$watch(\"seg1 + '.' + seg2 + '.' + seg3 + '.' + seg4\", function(ip){\r\n                var value = ngModelCtrl.$modelValue;\r\n                if(ip === \"...\") {\r\n                    if(value) {\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }\r\n                    if(!value || !required) {\r\n                        return ngModelCtrl.$setValidity(\"ip\", true);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", false);\r\n                } else {\r\n                    var isValid = false;\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ip, scope.start, scope.end);\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ip);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", isValid);\r\n                    ngModelCtrl.$setViewValue(ip);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n.directive(\"formatIpWrap\",function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        replace: true,\r\n        template: `<span role=\"ipgroup\"><input type=\"text\" ng-model=\"seg1\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg2\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg3\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg4\"></span>`,\r\n        link: function(scope,element,attrs){\r\n            element.on(\"keydown\", \"input\", function(event){\r\n                switch(event.keyCode){\r\n                    case 110:\r\n                    case 190:\r\n                        var nextEles = $(this).nextAll(\"input\");\r\n                        nextEles.length && nextEles.eq(0).focus();\r\n                        event.preventDefault();\r\n                        break;\r\n                    case 8:\r\n                        if(!$(this).val()){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        if(this.selectionStart === 0){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        };\r\n                        break;\r\n                    case 39:\r\n                        if(this.selectionStart === $(this).val().length){\r\n                            $(this).nextAll(\"input\").length && $(this).nextAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 32:\r\n                    case 229:\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        break;\r\n                }\r\n            });\r\n            element.on(\"keypress\", \"input\",function(e){\r\n                if(e.keyCode < 48 || e.keyCode > 57){\r\n                    e.preventDefault();\r\n                }\r\n                if($(this).val().length > 2 && this.selectionStart === this.selectionEnd){\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            element.on(\"paste\",function(e){\r\n                e.preventDefault();\r\n            });\r\n            element.on(\"focus\", \"input\", function(e){\r\n                element.addClass(\"focus\");\r\n            });\r\n            element.on(\"blur\", \"input\", function(e){\r\n                element.removeClass(\"focus\");\r\n            });\r\n        }\r\n    }\r\n})\r\n.directive(\"treeNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', filtertext: '='},\r\n        template: '<ul role=\"tree\" class=\"menu menu-tree\" ng-repeat=\"item in getUsers()\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{item.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(item);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"node in item.children\" data-nodes=\"item.children\" data-node=\"node\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>',\r\n        controller: function($scope){\r\n            var lastFilter;\r\n            var lastFiltedResult;\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n\r\n            $scope.getUsers = function(){\r\n                var text = $scope.filtertext || \"\";\r\n                var users = $scope.users;\r\n                text = text.trim();\r\n                if(!text) { return users; }\r\n                if(text !== lastFilter) {\r\n                    lastFilter = text;\r\n                    lastFiltedResult = filterUser(angular.copy(users), text);\r\n                }\r\n                return lastFiltedResult;\r\n            };\r\n\r\n            function filterUser(users, text) {\r\n                return users.filter(function(user){\r\n                    if(user.children) {\r\n                        user.children = filterUser(user.children, text);\r\n                        return user.children.length > 0;\r\n                    } else {\r\n                        return user.user_name.indexOf(text) > -1 || user.real_name.indexOf(text) > -1;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', nodes: '='},\r\n        template: '<div></div>',\r\n        controller: function($scope){\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n            $scope.add_select_rows = function($event,node,nodes){\r\n                $scope.$emit('add_select_rows', $event,node,nodes);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n                element.append('<ul role=\"group\" class=\"menu menu-tree\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{node.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(node);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"sub in node.children\" data-nodes=\"node.children\" data-node=\"sub\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>')\r\n            }else{\r\n                element.append('<li class=\"menuitem\" ng-click=\"add_select_rows($event,node,nodes)\" ng-dblclick=\"add_selected(node)\">'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.name}}</span>'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.real_name}}</span>'+\r\n                  '</li>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiMenuList\", [\"Admin\",\"User\",\"Domain\",\"$q\",\"$$$I18N\",function(APIadmin,APIuser,APIdomain,$q,$$$I18N){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            selected: \"=menuListData\",\r\n            // domain:\"=menuListDomain\"\r\n        },\r\n        templateUrl: \"includes/userMenu.html\",\r\n        controller: function($scope){\r\n            $scope.expandedNodes = [];\r\n            $scope._users = [];\r\n            $scope.selected = $scope.selected || [];\r\n            $scope.seRows = [];\r\n            $scope.rmRows = [];\r\n            $scope.common_users = [];\r\n            function formatData(d,name){\r\n                iteration(d,name);\r\n                return d;\r\n            }\r\n            function iteration(data,childName,list){\r\n                for(var i = 0 ; i < data.length ; i++){\r\n                    $scope.expandedNodes.push(data[i]);\r\n                    if(data[i][childName] && data[i][childName].length){\r\n                        var len = iteration(data[i][childName],childName);\r\n                        if(len === 0){\r\n                            data[i] = undefined;\r\n                        }\r\n                    }\r\n                    if(!data[i]) { continue; }\r\n                    if(data[i].users && data[i].users.length > 0){\r\n                        data[i].users.map(user => {\r\n                            user.name = user.name || user.user_name;\r\n                            user._is_last = true;\r\n                            return user;\r\n                        });\r\n                        data[i][childName] = data[i].users;\r\n                    }\r\n                    if(data[i][childName] && data[i][childName].length === 0){\r\n                        data[i]= undefined;\r\n                    }\r\n                }\r\n                while(data.length > 0) {\r\n                    // 如果有数组元素为空，每次删除一个\r\n                    var oldlen = data.length;\r\n                    for(var i = 0 ; i < oldlen ; i++){\r\n                        if(data[i] === undefined){\r\n                            data.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(oldlen === data.length) {\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                return data.length;\r\n            }\r\n            function removeNoChildrenDeparts(data) {\r\n                data = data.filter(noUserFilter);\r\n                data.forEach(walk);\r\n                return data;\r\n                function walk(node) {\r\n                    if(!node.dept_id) { return; }\r\n                    // 用户上级是没有 children 的\r\n                    if(node.children) {\r\n                        node.children = node.children.filter(noUserFilter);\r\n                        node.children.forEach(walk);\r\n                    }\r\n                }\r\n                function noUserFilter(node) {\r\n                    if(node.dept_id && !node.children && node.users.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            function get_admin(){\r\n                var deferred = $q.defer();\r\n                APIadmin.query(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_user(){\r\n                var deferred = $q.defer();\r\n                APIuser.query_tree(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_domain(){\r\n                var deferred = $q.defer();\r\n                APIdomain.list(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            $q.all([get_admin(),get_user(),get_domain()]).then(function(arr){\r\n                $scope._users = [{\r\n                    typeName: $$$I18N.get(\"管理用户\"),\r\n                    userData: arr[0].users\r\n                }];\r\n                $scope.domain_users = arr[2].result.map(function(res){\r\n                    res._name = $$$I18N.get(\"域\") + \"(\" + res.name + \")\";\r\n                    return res;\r\n                });\r\n                $scope.common_users = formatData(removeNoChildrenDeparts(arr[1].result),\"children\");\r\n                console.log($scope.common_users)\r\n            });\r\n            function getLastLevelNodes(obj_levels, arrays){\r\n                if(obj_levels.children){\r\n                    obj_levels.children.forEach(function(item){\r\n                        getLastLevelNodes(item, arrays);\r\n                    })\r\n                }else{\r\n                    arrays.push(obj_levels);\r\n                }\r\n            }\r\n\r\n            $scope.$on('add_selected', function(e, levels){\r\n                var arrays = [];\r\n                getLastLevelNodes(levels, arrays);\r\n                $scope.add_selected(arrays);\r\n            })\r\n            $scope.$on('add_select_rows', function(e,$event,node,nodes){\r\n                console.log(555555, $event,node, nodes);\r\n                $scope.add_select_rows($event,node, nodes);\r\n            })\r\n            $scope.add_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    if($scope.selected.indexOf(i) === -1){\r\n                        $scope.selected.push(i);\r\n                    }\r\n                });\r\n            };\r\n            $scope.remove_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    $scope.selected.splice($scope.selected.indexOf(i),1);\r\n                });\r\n                $scope.rmRows = [];\r\n            };\r\n            var lastRow2 = null;\r\n            $scope.add_select_rows = function(e,item,items){\r\n                var idx = $scope.seRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.seRows.push(item) : $scope.seRows.splice(idx,1);\r\n                    lastRow2 = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = items.indexOf(lastRow2);\r\n                    var end_idx = items.indexOf(item);\r\n                    if(begin_idx === -1){\r\n                        lastRow2 = item;\r\n                        $scope.seRows = [item];\r\n                    }else{\r\n                        $scope.seRows = items.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1);\r\n                        console.log(1111111,$scope.seRows)\r\n                    }\r\n                }else{\r\n                    $scope.seRows.splice(0,$scope.seRows.length,item);\r\n                    lastRow2 = item;\r\n                }\r\n            };\r\n            var lastRow = null;\r\n            $scope.add_remove_rows = function(e,item){\r\n                var idx = $scope.rmRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.rmRows.push(item) : $scope.rmRows.splice(idx,1);\r\n                    lastRow = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = $scope.selected.indexOf(lastRow);\r\n                    var end_idx = $scope.selected.indexOf(item);\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        $scope.rmRows = $scope.selected.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1); \r\n                    }else{\r\n                        $scope.rmRows = [item];\r\n                        lastRow = item;\r\n                    }\r\n                }\r\n                else{\r\n                    $scope.rmRows.splice(0,$scope.rmRows.length,item);\r\n                    lastRow = item;\r\n                }\r\n            };\r\n            $scope.ltor = function(){\r\n                $scope.add_selected($scope.seRows);\r\n            };\r\n            $scope.rtol = function(){\r\n                $scope.remove_selected($scope.rmRows);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            var last = null;\r\n            element.on(\"keyup\",'input[ng-model=\"searchText\"]',function(e){\r\n                $(\".menu_header\").addClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menu_header\",function(e){\r\n                $(this).toggleClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menuitem\", function(e){\r\n                var ele = $(this);\r\n                var menuItems = ele.parent().parent(\".menu_body\").find(\".menuitem\");\r\n                var allMenuItems = ele.parents(\".menus\").find(\".menuitem\");\r\n                if(e.ctrlKey){\r\n                    ele.hasClass(\"itemActive\") ? ele.removeClass(\"itemActive\") : ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = [].indexOf.apply(menuItems,last);\r\n                    var end_idx = [].indexOf.apply(menuItems,ele);\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        for(var i = 0; i < menuItems.length; i++){\r\n                            if(i > Math.max(begin_idx,end_idx) || i < Math.min(begin_idx,end_idx)){\r\n                                menuItems.eq(i).removeClass(\"itemActive\");\r\n                            }else{\r\n                                menuItems.eq(i).addClass(\"itemActive\");\r\n                            }\r\n                        }\r\n                    }else{\r\n                        ele.addClass(\"itemActive\");\r\n                        last = ele;\r\n                    }\r\n                }else{\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumber\", [\"$http\",\"$compile\",\"$templateCache\",function($http,$compile,$templateCache){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            step:\"@\",\r\n            max:\"@\",\r\n            userNumber: \"=ngModel\",\r\n            min:\"@\"\r\n        },\r\n        priority: 2,\r\n        require: \"ngModel\",\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs,ctrl){\r\n\r\n            scope.addStep = Number(scope.step) || 1;\r\n            scope.addMax  = Number(scope.max) || null;\r\n            scope.addMin  = Number(scope.min) || null;\r\n\r\n            var is_dot = String(Number(scope.step)).indexOf(\".\") === -1 ? false : true; \r\n\r\n            var modelCtrl = ctrl;\r\n            var temp = $compile($(\"<div ui-input-number-wrapper></div>\")[0])(scope);\r\n            element.hide();\r\n            element.after(temp);\r\n           \r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrKey = [8,9,13,35,36,37,38,39,40,45,46,144,112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,110,190];\r\n            scope.keydown = function(e){\r\n                var _code = e.keyCode;\r\n                var _valsplit = e.target.value.split(\".\"); \r\n\r\n                if(numKey.indexOf(_code) === -1 && ctrKey.indexOf(_code) === -1){\r\n                    e.preventDefault();\r\n                }\r\n                // 小数点后只能输入一位\r\n                if(numKey.indexOf(_code) > -1 && _valsplit.length > 1 && _valsplit[1].length > 0 && e.target.selectionStart > e.target.value.indexOf(\".\")){\r\n                    e.preventDefault();\r\n                }\r\n                // 屏蔽小数点\r\n                if(_code === 110 || _code === 190){\r\n                    if(!is_dot){\r\n                        e.preventDefault();\r\n                    }else{\r\n                        if(e.target.value.indexOf(\".\") !== -1){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                // 键盘上键加法\r\n                if(_code === 38){\r\n                    e.preventDefault();\r\n                    scope.add(scope.addStep);\r\n                    scope.round();\r\n                }\r\n                // 键盘下键减法\r\n                if(_code === 40){\r\n                    e.preventDefault();\r\n                    scope.add(-scope.addStep);\r\n                    scope.round();\r\n                }\r\n                \r\n            };\r\n            scope.round = function(){\r\n                scope.userNumber = is_dot ? Math.round(Number(scope.userNumber)*2)/2 : Math.round(scope.userNumber);\r\n            }\r\n\r\n            modelCtrl.$render = function(){\r\n                scope.setValidation();\r\n            };\r\n            scope.setValidation = function(){\r\n                var newval = modelCtrl.$modelValue;\r\n                var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n                if(exp.test(newval)){\r\n                    if((Math.abs(scope.addMax) >= 0 && newval > scope.addMax) || (Math.abs(scope.addMin) >= 0 && newval < scope.addMin) ){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }else{\r\n                    if(newval){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }\r\n            };\r\n            scope.add = function(num){\r\n                scope.userNumber = Number(scope.userNumber) ? Number(scope.userNumber) + Number(num) : Number(num);\r\n                scope.setValidation();\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberWrapper\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        replace:true,\r\n        templateUrl: \"./views/vdi/common/input-number-temp.html\",\r\n        link: function(scope,element){\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberFormatter\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require:\"ngModel\",\r\n        link: function(scope, element, attrs,ctrl){\r\n            var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n\r\n            ctrl.$parsers.push(function(value){\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n            ctrl.$formatters.push(function(value){\r\n\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiWebUpload\", [\"$http\", \"$rootScope\", \"$$$I18N\", \"$Domain\", function($http, $rootScope, $$$I18N, $Domain){\r\n    var org = XMLHttpRequest;\r\n    var org_open = org.prototype.open;\r\n    var allowUpload = window.FormData && typeof window.FormData === \"function\";\r\n    $rootScope.uploadPool = $rootScope.uploadPool || {};\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: function(ele, attrs){\r\n            if(attrs.templateUrl){\r\n                return attrs.templateUrl;\r\n            }\r\n            return \"views/vdi/common/ui-web-upload.html\";\r\n        },\r\n        scope: {\r\n            config:\"=uiUploadConfig\",\r\n            finishHandel:\"&\"\r\n        },\r\n        controller: [\"$scope\", function(scope){\r\n            scope.$on(\"progress\", function(e, size){\r\n                if(size.id === scope.upload_id){\r\n                    scope.progressName = size.name\r\n                    scope.isUploading = true;\r\n                    var percent = size.loaded / size.total * 100;\r\n                    if(isNaN(percent)) {\r\n                        percent = 0;\r\n                    }\r\n                    scope.progressPercent = percent.toFixed(2) + \"%\";\r\n                    if(scope.progressPercent === \"100.00%\"){ scope.isUploading = false; }\r\n                    // 初始化页面上传不更新问题\r\n                    scope.$apply();\r\n                }\r\n            });\r\n            scope.allowUpload = allowUpload;\r\n            scope.uploadISOSize = null;\r\n\r\n        }],\r\n        link: function(scope, element, attrs){\r\n            scope.upload_id = attrs.uiWebUpload;\r\n            scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n            scope.$on(\"localizeLanguageChanged\", function(){\r\n                // 重新apply数据才会更新视图，加定时器，调用apply才不会报错\r\n                setTimeout(function(){\r\n                     scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n                     scope.$apply();\r\n                });\r\n            });\r\n\r\n            // 绑定一个测试提交，如果条件为 true 则按钮可点击，否则不可点击\r\n            // 这种方式需要父 scope 配合\r\n            if(attrs.uiWebUploadTest) {\r\n                var degfn = scope.$parent.$watch(attrs.uiWebUploadTest, function (v) {\r\n                    scope.disableTest = v;\r\n                });\r\n                scope.$on(\"$destroy\", degfn);\r\n                scope.disableTest = false;\r\n            } else {\r\n                scope.disableTest = true;\r\n            }\r\n\r\n            var filetype,url;\r\n            var form = element.find(\"form\");\r\n            form.attr(\"action\", url);\r\n            function checkConfig(file,config){\r\n                var filetype = attrs.uiUploadType;\r\n                var maxSize = attrs.uiUploadLimit;\r\n                var url = attrs.uiUploadUrl;\r\n\r\n                if(!url){\r\n                    throw new Error(\"no url config\");\r\n                    return false;\r\n                }\r\n                var typematch = true;\r\n                if(filetype && file) {\r\n                    typematch = (new RegExp(\"\\\\.(\" + filetype + \")$\")).test(file.name);\r\n                    if(!typematch) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"不是一个可接受的文件类型\"),\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if(maxSize){\r\n                    maxSize = parseInt(maxSize);\r\n                    if(isNaN(maxSize)) {\r\n                        return console.error(\"invalid upload limit:\", attrs.uiUploadLimit);\r\n                    }\r\n                    if(file.size > maxSize * Math.pow(2,30)) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"超出文件大小限制\") + \"(\"+ maxSize +\"G)\",\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n                if(file.size === 0){\r\n                    $.bigBox({\r\n                        title : $$$I18N.get(\"INFOR_TIP\"),\r\n                        content : $$$I18N.get(\"文件为空\"),\r\n                        icon : \"fa fa-warning shake animated\",\r\n                        timeout : 6000\r\n                    });\r\n                    return false;\r\n                }\r\n                else{\r\n                    return true;\r\n                }\r\n            }\r\n            function clearDOM(){\r\n                var input = element.find(\"input[type=file]\");\r\n                input.after(input.clone(true).val(''));\r\n                input.remove();\r\n                scope.isUploading = false;\r\n                scope.progressSize = 0;\r\n            }\r\n            function finish(){\r\n                $rootScope.uploadPool[attrs.uiWebUpload] = undefined;\r\n                delete $rootScope.uploadPool[attrs.uiWebUpload];\r\n            }\r\n            function success(res){\r\n                if(typeof scope.finishHandel === \"function\"){\r\n                    scope.finishHandel({response: res});\r\n                }\r\n            }\r\n            element.find(\"input[type=file]\").on(\"change\", function(e){\r\n                var file = e.target.files[0];\r\n                if(!file){\r\n                    return ;\r\n                }\r\n                // var conf = scope.config;\r\n                var isValid = checkConfig(file);\r\n                \r\n                if(isValid){\r\n                    // $.bigBox({\r\n                    //  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                    //  content : $$$I18N.get(\"INFOR_UPISO\"),\r\n                    //  iconSmall : \"fa fa-warning shake animated\",\r\n                    //  timeout : 5000\r\n                    // });\r\n\r\n                    var data = new FormData();\r\n                    // 允许绑定额外的参数\r\n                    if(attrs.uiWebUploadParams) {\r\n                        $.each(scope.$eval(attrs.uiWebUploadParams), function(k, v){\r\n                            data.append(k, v);\r\n                        });\r\n                    }\r\n                    data.append(attrs.uiWebUploadName || e.target.name, file);\r\n                    scope.progressName = file.name;\r\n                    scope.progressSize = \"(\" + (file.size / Math.pow(2,20)).toFixed(2) + \"M)\";\r\n\r\n                    $http.post($Domain + attrs.uiUploadUrl, data, {\r\n                        transformRequest: function(config){\r\n                            window.XMLHttpRequest = function(a, b, c, e){\r\n                                window.XMLHttpRequest = org;\r\n                                var xhr = new org(a, b, c, e);\r\n                                $rootScope.uploadPool[attrs.uiWebUpload] = xhr;\r\n                                xhr.open = function(q,w,e,r,t,y){\r\n                                    xhr.open = undefined;\r\n                                    delete xhr.open;\r\n                                    if(xhr.upload){\r\n                                        xhr.upload.addEventListener(\"progress\", function(e){\r\n                                            $rootScope.$broadcast(\"progress\", {\r\n                                                id: attrs.uiWebUpload,\r\n                                                name: file.name,\r\n                                                loaded: e.loaded,\r\n                                                position: e.position,\r\n                                                total: e.total,\r\n                                                totalSize: e.totalSize\r\n                                            });\r\n                                            \r\n                                        });\r\n                                        xhr.addEventListener(\"abort\", finish);\r\n                                    }\r\n                                    return org_open.call(xhr, q, w, e, r, t, y);\r\n                                }\r\n                                return xhr;\r\n                            };\r\n                            return config;\r\n                        },\r\n                        headers: {\"Content-Type\": undefined}\r\n                    }).then(function(res){\r\n                        clearDOM();\r\n                        finish(res);\r\n                        success(res);\r\n                        $rootScope.$broadcast(\"finishUpload\", true, file.name);\r\n                    },function(){\r\n                        clearDOM();\r\n                        finish();\r\n                    });\r\n                }\r\n            });\r\n                \r\n            element.find(\"button[type='button']\").on(\"click\", function(e){\r\n                $(this).prev(\"input[type=file]\").click();\r\n            });\r\n            if(attrs.btnClass) {\r\n                element.find(\"button[type='button']\").removeClass(\"btn-primary\").addClass(attrs.btnClass);\r\n            }\r\n            if(attrs.iconClass) {\r\n                element.find(\".icon\").removeClass(\"icon-jj-Upload\").addClass(attrs.iconClass);\r\n            }\r\n\r\n            element.find(\"#abortBtn\").on(\"click\", function(e){\r\n                var xhr = $rootScope.uploadPool[attrs.uiWebUpload];\r\n                xhr && xhr.abort();\r\n                clearDOM();\r\n                scope.$apply();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.service(\"warnBox\",[function(){\r\n    this.warn = function(content, id, callback){\r\n        if(!$(\"#warnBox\").length){\r\n            $(\"body\").append(\"<div id='warnBox'></div>\");\r\n        }else{\r\n            $(\"#warnBox\").show();\r\n        }\r\n        $(\"body #warnBox\").append(\"<div class='box warnBox\"+id+\"'><i class='fa fa-bell'></i><div class='content'><div class='btn-close'><span>×</span></div><p class='detail' title=\"+content+\">\"+content+\"</p></div></div>\")\r\n        if($(\"body .warnBox\"+id+\" .detail\").height()>38){\r\n            $(\"body .warnBox\"+id+\" .detail\").addClass('highHeight');\r\n        }\r\n        $(\"#warnBox .warnBox\"+id+\" .btn-close\").click(function(e){\r\n            callback(id);\r\n        })\r\n        setTimeout(function(){\r\n            if($(\"#warnBox .warnBox\"+id+\"\")){\r\n                callback(id);\r\n            }\r\n        }, 30000)\r\n    },\r\n    this.close = function(id){\r\n        $(\"body .box.warnBox\"+id+\"\").remove();\r\n        if(!$(\"#warnBox\").children().length){\r\n            $(\"#warnBox\").hide();\r\n        }else{ $(\"#warnBox\").show(); }\r\n    }\r\n}])\r\n.controller(\"TaskListController\", [\"$scope\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\",\"$rootScope\", \"warnBox\", function($scope, task, $location, $$$I18N, UserRole,$rootScope,warnBox){\r\n    $scope.toggleTaskList = function(){\r\n        $(\"body\").toggleClass(\"show_prog\");\r\n    };\r\n    let user;\r\n    let taskTimer = null;\r\n    $scope.$on(\"NOAUTH\", () => {\r\n        user = null;\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"STOPLOG\", function(){\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"AUTHED\", () => {\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    });\r\n    if(UserRole.currentUser){\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    }\r\n    $scope.rows = [];\r\n    var data = {};\r\n    $scope.$on(\"instanceIDS\", function($event, ids){\r\n        data.instances = ids;\r\n    });\r\n    $scope.$on(\"imageIDS\", function($event, ids){\r\n        data.images = ids;\r\n    });\r\n    $scope.$on(\"clientIDS\", function($event, ids){\r\n        data.clients = ids;\r\n    });\r\n    $scope.$on('modeIDS', function($event, ids){\r\n        data.modes = ids;\r\n    });\r\n    $scope.$on('nodes', function($event, ids){\r\n        data.nodes = ids;\r\n    });\r\n    $scope.$on('manageNetworkIDS', function($event, ids){\r\n        data.manage_networks = ids;\r\n    })\r\n    $scope.$on('personpools',function($event,ids){\r\n        data.personpools=ids;\r\n    })\r\n    var lists = [], flag = false;\r\n    function schedule(){\r\n        var postData = data && Object.keys(data).map(function(key){\r\n            // if(key !== \"clients\"){\r\n                return {\r\n                    key: key,\r\n                    ids: data[key]\r\n                };                \r\n            // }\r\n            // else{\r\n            //     return {\r\n            //         key: key,\r\n            //         ids: []\r\n            //     };    \r\n            // }\r\n        });\r\n        task.post(postData,\r\n            function(res){\r\n                $scope.rows = res.results.tasks.filter(item => user.real_name ===  item.user);\r\n                \r\n                Object.keys(res.results).forEach(function(key){\r\n                    if(key !== \"tasks\"){\r\n                        $scope.$root && $scope.$root.$broadcast(key + \"RowsUpdate\", res.results[key]);\r\n                    }\r\n                });\r\n                for(var i in res.results.notifies){\r\n                    var item = res.results.notifies[i], color = '#004d60', content;\r\n                    if( lists[item.id] == undefined ){\r\n                        lists[item.id] = item;\r\n                        if(item.waringtype === 0){\r\n                            warnBox.warn(item.content, item.id, function(ID){\r\n                                warnBox.close(ID);\r\n                                task.put({notify_id: ID}, function(res){  })\r\n                            })\r\n                        }\r\n                        else{\r\n                            if(item.waringtype === 1){\r\n                                color = \"#004d60\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n\r\n                            }\r\n                            else{\r\n                                color = \"#C46A69\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n                            }\r\n                            $.bigBox({\r\n                                title:$$$I18N.get('waringtype'+item.waringtype),\r\n                                content:content,\r\n                                color : color,\r\n                                timeout : 3000\r\n                            }, function(){\r\n                                task.put({notify_id: item.id}, function(res){\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                taskTimer = setTimeout(schedule, 3000);\r\n            },\r\n            function(){\r\n                taskTimer = setTimeout(schedule, 10000);\r\n            }\r\n        );\r\n        for(var k in data){\r\n            data[k] = undefined;\r\n            delete data[k];\r\n        }\r\n    }\r\n\r\n}])\r\n.controller(\"pageHeaderController\", [\"$scope\", \"UserAuth\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\", \"desktopHelpBox\",function($scope, Auth, task, $location, $$$I18N, UserRole, desktopHelpBox){\r\n    $scope.logout = function(){\r\n        Auth.logout();\r\n        desktopHelpBox.close();\r\n    };\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        desktopHelpBox.close();\r\n    });\r\n    $scope.$on(\"DMS\", function(e,dms){\r\n        $scope.dmsURL = dms;\r\n        $$$storage.setSessionStorage('DMS', dms);\r\n    })\r\n    $scope.dmsURL = $$$storage.getSessionStorage('DMS') || 'nodms';\r\n    \r\n}])\r\n.controller(\"LogoController\", [\"$scope\",\"settings\", \"$Domain\", \"$$$version\", function($scope, settings, $Domain, $$$version){\r\n    $scope.domain = $Domain;\r\n    $scope.version = $$$version;\r\n    $scope.languages = settings.languages;\r\n    $scope.currentLang = settings.currentLang;\r\n}])\r\n.controller(\"SkinController\", [\"$scope\", function($scope){\r\n    $scope.changeSkin = function(theme){\r\n        $scope.$root.$broadcast(\"changeSkin\", theme)\r\n    }\r\n}])\r\n.controller(\"userLoginInfoController\", [\"$scope\", \"UserRole\", function($scope, Role){\r\n    $scope.loginUser = Role.currentUser;\r\n    $scope.$on(\"AUTHED\", function(name, userInfo){\r\n        $scope.loginUser = userInfo;\r\n    });\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        $scope.loginUser = null;\r\n    });\r\n}])\r\n.controller(\"AlarmController\", [\"$scope\", \"$modal\", \"SystemAlarm\", \"AlarmHistory\", function($scope, $modal, alarm, AlarmHistory){\r\n    $scope.isOpen = false;\r\n    $scope.open = function(){\r\n        $scope.isOpen = true;\r\n    }\r\n    $scope.close = function(e){\r\n        if(e)\r\n            e.stopPropagation();\r\n        $scope.isOpen = false;\r\n    }\r\n    // function findDif(oldArray, newArray, difAttr){\r\n    //     if(newArray.length){\r\n    //         var length = oldArray.length>=newArray.length?oldArray.length:newArray.length;\r\n    //         var difs = [];\r\n    //         for(var i=0; i<length; i++){\r\n    //             if(newArray[i]){\r\n    //                 var different = oldArray.filter(function(item){ return item[difAttr] == newArray[i][difAttr] })[0];\r\n    //                 if(!different){ difs.push(newArray[i]) };\r\n    //             }\r\n    //         }\r\n    //         return difs;\r\n    //     }else{ return []; }\r\n    // };\r\n\r\n    // var oldAlarms = [];\r\n    $scope.$on(\"alarmsRowsUpdate\", function($event, data){\r\n        $scope.alarms = data;\r\n        // if(!$scope.isOpen){\r\n        //     var unreads = [];\r\n        //     data.forEach(function(item){\r\n        //         if(!item.is_read){ unreads.push(item) }\r\n        //     })\r\n        //     if(unreads.length){\r\n        //         $scope.open();\r\n        //         setTimeout(function(){\r\n        //             $scope.close();\r\n        //         }, 30000)\r\n        //     }\r\n        // }\r\n\r\n        // var difs = findDif(oldAlarms, data, 'id');\r\n        // if(!$scope.isOpen && difs.length){\r\n        //     oldAlarms = data;\r\n        //     $scope.open();\r\n        //     setTimeout(function(){\r\n        //         $scope.close();\r\n        //     }, 30000)\r\n        // }\r\n    })\r\n    $scope.delete = function(){\r\n        AlarmHistory.setRead({ids: $scope.alarms.map(function(item){ return item.id; })},function(res){\r\n            $scope.alarms = [];\r\n            $scope.isOpen = false;\r\n        })\r\n    }\r\n}])\r\n.filter(\"interfaceFilter\",[function(){\r\n    return function(data,idx,nets){\r\n        var invalidArr = [];\r\n        nets.forEach((n,i) => {\r\n            if(i !== idx && n._data_dev && n._data_dev._dev){\r\n                invalidArr.push(n._data_dev._dev);\r\n            }\r\n        });\r\n        return data.filter(function(d){\r\n           if(invalidArr.indexOf(d._dev) === -1){\r\n                return true;\r\n           }\r\n           return false;\r\n        });\r\n    }\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/vdi.js","angular.module(\"vdi.template\", [])\r\n\r\n/* 模板 */\r\n.factory(\"registerTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"get\", url: $Domain + \"/thor/image/register\" },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/register\" }\r\n\t});\r\n}])\r\n.factory(\"Network\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/networks\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false, params: null},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\", isArray: false},\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\t\talter:\r\n\t\t\t{ method: \"PUT\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\r\n\t\tquery_sub:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/:id/subnets\", params: { id: \"@id\" }},\r\n\t\tadd_sub:\r\n\t\t\t{ method: \"POST\", url:$Domain + \"/thor/network/:id/subnets\", params: { id: \"@id\" }},\r\n\r\n\t\tget_sub:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\t\talter_sub:\r\n\t\t\t{ method: \"PUT\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\t\tdelete_sub:\r\n\t\t\t{ method: \"DELETE\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\t\tports:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/subnet/:id/ports\", params: { id: \"@id\" }}\r\n\r\n\t});\r\n}])\r\n\r\n.factory('ResourcePool', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/resource\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\"}\r\n\t});\r\n}])\r\n/* 模板镜像分发 */\r\n.factory(\"manageTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/manage/:id\", params: { id: \"@id\" } },\r\n\t\thandout:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/manage/:id\", params: { id: \"@id\" } },\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/image/manage/:id\", params: { id: \"@id\" } }\r\n\t});\r\n}])\r\n/* 根据虚拟化类型返回可用主机列表 */\r\n.factory(\"virtualHost\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/hosts_with_virtual_type\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/hosts_with_virtual_type\" }\r\n\t});\r\n}])\r\n/* 根据主机查找可用网络 */\r\n.factory(\"networkWithHost\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/list_network_with_host\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/list_network_with_host\" }\r\n\t});\r\n}])\r\n\r\n.factory(\"checkIP\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/check_ip\", null, {\r\n\t\tcheck:\r\n\t\t\t{ method: \"GET\" }\r\n\t});\r\n}])\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/template/controllers.js","angular.module(\"vdi.template.teach\", [\"vdi.template\"])\r\n.directive(\"downloadUrl\", ['$http', function($http){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar url_arry = JSON.parse(attrs.urls.split(\",\"));\r\n\t\t\turl_arry.forEach(function(item){\r\n\t\t\t\t$(element).append('<iframe style=\"width: 0; height: 0;\" src=\"\" id=\"'+ item +'\" frameborder=\"0\"></iframe>')\r\n\t\t\t});\r\n\t\t\t$(element).click(function(e){\r\n\t\t\t\turl_arry.forEach(function(item){\r\n\t\t\t\t\t$(element).find('#'+item)[0].contentWindow.location = scope.domain +'/thor/image/download/'+ item;\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n}])\r\n.factory(\"TeachTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/1\", isArray: false },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/modify_template/:id\", params: { id: \"@id\" } },\r\n\t\tlistModes:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/update_mode_instance/:id\", params: { id: \"@id\" }, isArray: false },\r\n\t\tapplyTemplate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/update_mode_instance/:id\", params: { id: \"@id\" } },\r\n\t\tstatus:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/status/:id\", params: { id: \"@id\" } },\r\n\t\tcopy:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/clone_template\"},\r\n\t\tmodify:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/image/1\", isArray: false },\r\n\t\tinfor:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/info\" },\r\n\t\tspiceConnectInfo:\r\n\t\t\t{ method:\"GET\", url: $Domain + \"/compute/v1/instances/connection\"},\r\n\t\tvirtualStatus:\r\n\t\t\t{method:\"GET\", url: $Domain + \"/compute/v1/instances/:id/status\",params:{id:\"@id\"}},\r\n\t\tdownload:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/download/:id\", params: { id: \"@id\" } },\r\n\t\treset:\r\n\t\t\t{ method: \"post\", url: $Domain + \"/thor/image/reset_template\" },\r\n\t\tget_image_vnc_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/get_image_vnc_info\" },\r\n\t\tget_image_rdp_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/get_image_rdp_info\" },\r\n\t\tsync:\r\n\t\t\t{ method: \"post\", url: $Domain + \"/thor/image/bt_sync_template\" },\r\n\t\tsync_status:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/bt_sync_status\" },\r\n\t\tbt_before_edit_template:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/bt_before_edit_template\" },\r\n\t\tbt_save_template:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/bt_save_template\" },\r\n\t\tbt_prev_save_template:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/bt_prev_save_template\" },\r\n\t\tbt_sync_retry:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/bt_sync_retry\" },\r\n\t\tbt_sync_repair:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/bt_sync_repair\" },\r\n\t\tupdate_tpl_tip:\r\n\t\t\t{method:\"GET\",url:$Domain + \"/thor/controller/ha_storage_state\"}\r\n\t});\r\n}])\r\n\r\n.controller(\"vdiTemplateTeachDesktopListController\",[\r\n\"$scope\", \"$modal\", \"TeachTemplate\", \"PersonTemplate\", \"$route\", \"Admin\", \"TeachDesktop\", \"$interval\", \"$filter\", \"$$$os_types\", \"$Domain\", \"Network\", \"$http\", \"$$$I18N\", \"ResourcePool\", \"manageTemplate\", \"VMCommon\", \"networkWithHost\", \"virtualHost\",\"UserRole\", \r\nfunction($scope, $modal, template, tmpl, $route,  admin, teachdesktop,$interval, $filter, $$$os_types, $Domain, network,$http, $$$I18N, ResourcePool, manageTemplate, vm, networkWithHost, virtualHost, UserRole){\r\n\t// teachdesktop.query({ id : $route.current.params.id }, function(res){\r\n\t// \tconsole.log(787878,res.result)\r\n\t// });\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.domain = $Domain;\r\n\t$scope.rows = []; $scope.allrows = [];\r\n\t\r\n\t$scope.images = [];\r\n\t$scope.loading = true;\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [30,20,10];\r\n    $scope.pagesize = $scope.pagesizes[0];\r\n\r\n    $scope.orders = [ {name: $$$I18N.get(\"按创建时间排序\"), val: 'time'}, {name: $$$I18N.get(\"按模板名称排序\"), val: 'name'}];\r\n    $scope.order = $scope.orders[0];\r\n    $scope.sortTem = function(val){\r\n    \tif(val == 'time'){\r\n    \t\t$scope.rows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n    \t}\r\n    \telse{\r\n    \t\t$scope.rows.sort(function(a,b){ return a.name>b.name? 1:-1 });\r\n    \t}\r\n    }\r\n\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"imageIDS\", $scope.rows.map(function(item){ return item.id }));\r\n\t}, 1000);\r\n\t$scope.$on(\"imagesRowsUpdate\", function($event, data){\r\n\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.rows = $scope.rows.filter(function(item){ return item.type_code ===1 });\r\n\t\t$scope.rows.forEach(function(row){\r\n\t\t\tif($scope.sync_mode==='bt'){\r\n\t\t\t\tif(row.sync_status){\r\n\t\t\t\t\tvar syncFaildLen = row.sync_status.filter(function(item){ return item.status === \"sync failed\" || item.status === \"no space left\" || item.sch == 'time out'}).length;\r\n\t\t\t\t\tvar syncDownloading = row.sync_status.filter(function(item){ return item.status === \"downloading\" }).length;\r\n\t\t\t\t\tif(syncFaildLen){\r\n\t\t\t\t\t\trow.sync_status.syncFaild = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(syncDownloading && !syncFaildLen){\r\n\t\t\t\t\t\trow.sync_status.syncing = true;\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tif(row.sync_status){\r\n\t\t\t\t\tvar updateInfor = row.sync_status.filter(function(item){ return item.type === \"image\" });\r\n\t\t\t\t\tif(updateInfor.length!==0)\r\n\t\t\t\t\t\trow.updateSize = (updateInfor[0].size/1024/1024/1024).toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\t$scope.$root.$broadcast(\"syncTempl\", $scope.rows);\r\n\t\t// $scope.allrows = $scope.rows;\r\n\r\n\t});\r\n\r\n\ttemplate.query(function(res){\r\n\t\t$scope.rows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\r\n\t\t$scope.rows.forEach(function(row){\r\n\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t});\r\n\t\t$scope.rows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t$scope.sync_mode = res.sync_mode;\r\n\t\t$scope.loading = false;\r\n\t\t$scope.teachNames = $scope.rows.map(function(item){ return item.name });\r\n\t\t$scope.sameName = false;\r\n\r\n\t\t$scope.allrows = $scope.rows;\r\n\t\tif($$$storage.getSessionStorage('virtual_type_T')!=='all')\r\n\t\t\t$scope.rows = $scope.allrows.filter(function(item){ return item.virtual_type === $$$storage.getSessionStorage('virtual_type_T') });\r\n\t});\r\n\r\n\t$scope.select = $$$storage.getSessionStorage('virtual_type_T') || 'all';\r\n\t$scope.$watch(\"select\",function(newvalue){\r\n\t\tif(newvalue){\r\n\t\t\tif(newvalue!=='all'){\r\n\t\t\t\t$scope.rows = $scope.allrows.filter(function(item){ return item.virtual_type === newvalue });\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$scope.rows = $scope.allrows;\r\n\t\t\t}\r\n\t\t\t$$$storage.setSessionStorage('virtual_type_T', newvalue);\r\n\t\t}\r\n\t});\r\n\tvar _controllerScope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除教学模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_TEMPLATE_T' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t$scope.name = rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttemplate.delete({ id: rows.map(function(item){ return item.id }) },function(res){\r\n\t                \ttemplate.query(function(res){\r\n\t                \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n    \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n    \t\t\t\t\t\t\t\treturn item;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\telse{\r\n    \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n                    \t});\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\ttemplate.query(function(res){\r\n\t                \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n    \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n    \t\t\t\t\t\t\t\treturn item;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\telse{\r\n    \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n                    \t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.shutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar rows_active = rows.filter(function(item){ return item.instance_status === 'running' });\r\n\t\tif(!rows_active.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"SHUTOFF_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='关机'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='shutdown_TEMPLATE_T' param1='{{name}}'></p><footer class='text-right'><img data-ng-if='loading' src='./img/building.gif' width='24px'><button class='btn btn-primary' data-ng-if='!loading' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-if='!loading' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t\t$scope.name = rows_active.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\tvm.shutdowns({ instance_ids: rows_active.map(function(item){ return item.instance_id }) },function(res){\r\n\t\t\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t_controllerScope.rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\t\tif(item.id === row.id){\r\n\t\t\t\t\t\t\t\t\t\titem.instance_status = \"shutdown\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\t\t\t\r\n\t\t}\r\n\t};\r\n\t$scope.syncTem = function(item){\r\n\t\t$scope.loading = false;\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_sync.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\tif(!$scope.sync_status){\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t}\r\n\t\t\t\t$scope.name = item.name;\r\n\t\t\t\t$scope.$on(\"syncTempl\", function($event, data){\r\n\t\t\t\t\tvar thistmpl = data.filter(function(r){ return r.id === item.id })[0];\r\n\t\t\t\t\t$scope.sync_status = thistmpl.sync_status;\r\n\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t})\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.Retry = function(temp){\r\n\t\t\t\t\tvar data = {image_id: temp.image, server_ip: temp.server_ip, server_id: temp.server_id, version: temp.version}\r\n\t\t\t\t\ttemplate.bt_sync_retry(data, function(res){\r\n\r\n\t\t\t\t\t}, function(){})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.Repair = function(temp){\r\n\t\t\t\t\tvar data = {image_id: temp.image, server_ip: temp.server_ip, server_id: temp.server_id, version: temp.version};\r\n\t\t\t\t\ttemplate.bt_sync_repair(data, function(res){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}, function(){})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"lg\"\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\r\n\t$scope.update = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_mode_list.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.modes = [];\r\n\t\t\t\ttemplate.listModes({ id: item.id }, function(res){\r\n\t\t\t\t\t$scope.modes = res.modes;\r\n\t\t\t\t},function(){ $scope.noScense = true });\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttemplate.applyTemplate({ id: item.id }, function(res){\r\n\t\t\t\t\t\t/* doSTH */\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.trigger = function(){\r\n\t\t$scope.rows.some(function(row){\r\n\t\t\trow._selected;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.copy = function(item){\r\n\t\t $modal.open({\r\n                templateUrl: \"views/vdi/dialog/template/template_copy.html\",\r\n                size: \"md\",\r\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance){\r\n                    $scope.min_namelength=2;$scope.max_namelength=20;\r\n                    $scope.is_copy = true;\r\n                    $scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n                    $scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n                    $scope.types = $scope.types2;\r\n                    $scope.bind_ip_type = $scope.types2[0];\r\n                    admin.query(function(res){\r\n                        $scope.owners = res.users;\r\n                        angular.forEach($scope.owners, function(item){\r\n                        \tif(item.name == user.name){\r\n                        \t\t$scope.owner = item;\r\n                        \t}\r\n                        });\r\n                        if(!$scope.owner) {\r\n                        \t$scope.owner = $scope.users[0]\r\n                        }\r\n                    });\r\n                    $scope.type = '1';\r\n                    $scope.temCopy = false;\r\n                    \r\n                    $scope.temData = item;\r\n                    $scope.getVirtualHost = function (type,rbd_enabled){\r\n                    \t$scope.host_loading = true;\r\n                    \tvirtualHost.query({\r\n                    \t\tvirtual_type: type,\r\n                    \t\trbd_enabled: rbd_enabled\r\n                    \t\t// enable_gpu: type == 'hyper-v'?enable_gpu:undefined\r\n                    \t},function(res){\r\n                    \t\t$scope.host_loading = false;\r\n                    \t\t$scope.hosts = res.result;\r\n                    \t\t$scope.host = $scope.hosts[0];\r\n                    \t\t$scope.getNetwork($scope.host);\r\n                    \t},function(){\r\n\r\n                    \t});\r\n                    }\r\n                    $scope.getVirtualHost(item.virtual_type,item.rbd_enabled);\r\n\r\n                    // function getIps(subnet_id, _scope){\r\n                    // \tif(subnet_id)\r\n                    // \t\tnetwork.ports({ id: subnet_id },function(res){\r\n                    // \t\t\tif(res.unused_ips.length){\r\n                    // \t\t\t\t_scope.band_ips = res.unused_ips;\r\n                    // \t\t\t}\r\n                    // \t\t\telse{\r\n                    // \t\t\t\t_scope.band_ips = [\"无可用IP\"];\r\n                    // \t\t\t}\r\n                    // \t\t\t_scope.bind_ip_loading = false;\r\n                    // \t\t})\r\n                    // };\r\n                    $scope.switchIps = function(subnet,_scope){\r\n                    \t// _scope.bind_ip_loading = true;\r\n                    \tif(subnet){\r\n                    \t\t// getIps(subnet.id, _scope);\r\n                    \t\t_scope.types = _scope.types2;\r\n                    \t\t_scope.bind_ip_type = _scope.types2[0];\r\n                    \t}\r\n                    \telse{\r\n                    \t\t_scope.types = _scope.types1;\r\n                    \t\t_scope.band_ips = [];\r\n                    \t\t_scope.bind_ip_type = _scope.types1[0];\r\n                    \t\t// _scope.bind_ip_loading = false;\r\n                    \t}\r\n                    };\r\n                    function getSubnets(Network,_scope){\r\n                    \tif(Network.subnets.length){\r\n                    \t\t$scope.network_loading = true;\r\n                    \t\t// $scope.bind_ip_loading = true;\r\n                    \t\tnetwork.query_sub({id: Network.id }, function(res){\r\n                    \t\t\t_scope.subnets = res.result;\r\n                    \t\t\t_scope.subnet = _scope.subnets[0];\r\n                    \t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n                    \t\t\t$scope.network_loading = false;\r\n                    \t\t})\r\n                    \t}\r\n                    \telse{\r\n                    \t\t_scope.subnets = [];\r\n                    \t\t_scope.subnet = null;\r\n                    \t\t_scope.switchIps(_scope.subnet, _scope);\r\n                    \t}\r\n                    };\r\n                    $scope.getNetwork = function(host){\r\n                    \tif(host){\r\n                    \t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n                    \t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n                    \t\t\t$scope.networks = res.result;\r\n                    \t\t\t$scope.network = $scope.networks[0];\r\n                    \t\t\tgetSubnets($scope.network, $scope);\r\n                    \t\t}, function(){});\r\n                    \t}\r\n                    }\r\n\r\n                    $scope.switchSubnet = function(val, _scope){\r\n                    \tgetSubnets(val,_scope);\r\n                    }\r\n                    $scope.bind_ip = {value: null};\r\n                    $scope.ok = function(){\r\n                    \tvar bindIP = this.bind_ip.value;\r\n                    \t// var unUseIP = this.band_ips.filter(function(item){ return item===bindIP });\r\n                    \t// if(this.bind_ip_type.value === 'static' && bindIP === '无可用IP'){\r\n                    \t// \t$.bigBox({\r\n                    \t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n                    \t// \t\tcontent\t: $$$I18N.get(\"hasStaticIP_TIP\"),\r\n                    \t// \t\ttimeout\t: 6000\r\n                    \t// \t});\r\n                    \t// }else if(this.bind_ip_type.value === 'static' && bindIP !== '无可用IP' && !unUseIP.length){\r\n                    \t// \t$.bigBox({\r\n                    \t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n                    \t// \t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n                    \t// \t\ttimeout\t: 6000\r\n                    \t// \t});\r\n                    \t// }else{\r\n\t                \t\t$scope.temCopy = true;\r\n\t                \t\tvar _ip = this.bind_ip_type.value === 'static' ? bindIP : undefined;\r\n\t                        template.copy({\r\n\t                    \t\tname: this.name,\r\n\t                    \t\tdescription: this.description,\r\n\t                    \t\timage_id : item.id,\r\n\t                    \t    type_code: this.type,\r\n\t                    \t    owner: $scope.owner.id,\r\n\t                    \t    network: this.network.id,\r\n\t                    \t    subnet: this.subnet?this.subnet.id:'',\r\n\t                    \t    band_ip: _ip,\r\n\t                    \t    band_type: this.bind_ip_type.value,\r\n\t                    \t    host_uuid: this.host.host_uuid\r\n\t                    \t    // enable_gpu: item.virtual_type == 'hyper-v'?this.enable_gpu:undefined\r\n\t                        }, function(res){\r\n\t                        \ttemplate.query(function(res){\r\n\t                        \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n\t        \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n\t        \t\t\t\t\t\t\t\treturn item;\r\n\t        \t\t\t\t\t\t\t}\r\n\t        \t\t\t\t\t\t\telse{\r\n\t        \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n\t        \t\t\t\t\t\t\t}\r\n\t        \t\t\t\t\t\t});\r\n\t                        \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t                        \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t                        \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t                        \t});\r\n\t                        \t$modalInstance.close(); \r\n\t                        }, function(){\r\n\t                        \t$scope.temCopy = false;\r\n\t                        });\r\n\t                    \t// }\r\n\t                    }\r\n                    $scope.close = function(){\r\n                        $modalInstance.close();\r\n                    };\r\n                } ]\r\n            });\r\n\t};\r\n\r\n\t$scope.sync = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='SYNC_TEM'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='SYNC_TEM_TIP' ></p><footer class='text-right' style='margin-top:20px;'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttemplate.sync({ image_id: item.id },\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.undoSync = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='UNDO_SYNC_TEM'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='TEM_UNDOSYNC' ></p><footer class='text-right' style='margin-top:20px;'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttemplate.bt_before_edit_template({ image_id: item.id },\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.modify = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_modify.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t\t\t\t$scope.types = $scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t\t\t\t$scope.virtual_type = item.virtual_type;\r\n\t\t\t\t$scope.disabled_gpu = item.disabled_gpu;\r\n\t\t\t\t$scope.data = {vcpus: 1, ram: 1.5, system_alloc_disk: 10, bind_ip_type: $scope.types2[1]};\r\n\t\t\t\tvar oldData = {};\r\n\t\t\t\tfunction getSubnets(Network, subnet_id, flag){\r\n\t\t\t\t\tif(Network.subnets.length){\r\n\t\t\t\t\t\t$scope.network_loading = true;\r\n\t\t\t\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t\t\t\t$scope.data.subnets = res.result;\r\n\t\t\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\t\t\toldData.subnets = $scope.data.subnets;\r\n\t\t\t\t\t\t\t\toldData.subnet = $scope.data.subnet = $scope.data.subnets.filter(function(data){ return data.id === subnet_id })[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.data.subnet = $scope.data.subnets[0];\r\n\t\t\t\t\t\t\t\tif($scope.data.subnet)\r\n\t\t\t\t\t\t\t\t\tgetIps($scope.data.subnet.id, $scope.cur_imgInfor.nets.ip_address, false);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t$scope.data.band_ips = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$scope.network_loading = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.data.subnets = [];\r\n\t\t\t\t\t\t$scope.data.subnet = null;\r\n\t\t\t\t\t\t$scope.switchIps($scope.data.subnet);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tfunction getIps(subnet_id, curr_ip, flag){\r\n\t\t\t\t\tif(subnet_id){\r\n\t\t\t\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\t\t\t\t$scope.types = $scope.types2;\r\n\t\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\t\toldData.bind_ip_type = $scope.data.bind_ip_type = $scope.types[1];\r\n\t\t\t\t\t\t\toldData.band_ips = $scope.data.band_ips;\r\n\t\t\t\t\t\t\toldData.band_ip = $scope.data.band_ip = curr_ip;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t$scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t\t\t$scope.data.band_ip = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// network.ports({ id: subnet_id },function(res){\r\n\t\t\t\t\t\t// \tif(res.unused_ips.length){\r\n\t\t\t\t\t\t// \t\t$scope.data.band_ips = res.unused_ips;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \telse{\r\n\t\t\t\t\t\t// \t\t$scope.data.band_ips = [\"无可用IP\"];\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t// \tif(subnet_id===$scope.cur_imgInfor.nets[0].subnet_id){\r\n\t\t\t\t\t\t// \t\t$scope.data.band_ips.push(curr_ip);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \tif(flag){\r\n\t\t\t\t\t\t// \t\toldData.bind_ip_type = $scope.data.bind_ip_type = $scope.types[1];\r\n\t\t\t\t\t\t// \t\toldData.band_ips = $scope.data.band_ips;\r\n\t\t\t\t\t\t// \t\toldData.band_ip = $scope.data.band_ip = curr_ip;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \telse{\r\n\t\t\t\t\t\t// \t\t$scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t\t// \t\t$scope.data.band_ip = null;\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \t$scope.bind_ip_loading = false;\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t\toldData.bind_ip_type = $scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.switchSubnet = function(val){\r\n\t\t\t\t\tgetSubnets(val, $scope.cur_imgInfor.nets.network_id, false);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.switchIps = function(subnet){\r\n\t\t\t\t\tif(subnet){\r\n\t\t\t\t\t\tgetIps(subnet.id,$scope.cur_imgInfor.nets.ip_address, false)\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t\t$scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t\t$scope.data.band_ips = [];\r\n\t\t\t\t\t\t$scope.data.band_ip = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.addbtndisk = function(){\r\n\t\t\t\t\tif(!$scope.data.data_alloc_disk){\r\n\t\t\t\t\t\t$scope.data.data_alloc_disk = 1;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!$scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 1;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.minusbtndisk = function(){\r\n\t\t\t\t\tif($scope.old_data_alloc_disk && !$scope.old_data_alloc_disk_2){\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\ttemplate.infor({ image_id: item.id }, function(templateInfor){\r\n\r\n\t\t\t\t\t$scope.cur_imgInfor = templateInfor;\r\n\t\t\t\t\toldData.name = $scope.data.name = templateInfor.name;\r\n\t\t\t\t\toldData.description = $scope.data.description = templateInfor.description;\r\n\t\t\t\t\tgetIps(templateInfor.nets[0].subnet_id, templateInfor.nets[0].ip_address, true);\r\n\t\t\t\t\tnetwork.query(function(data){\r\n\t\t\t\t\t\t$scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t\t\t$scope.networks = data.networks;\r\n\t\t\t\t\t\toldData.network = $scope.data.network = $scope.networks.filter(function(data){ return data.id===templateInfor.nets[0].network_id })[0];\r\n\t\t\t\t\t\tgetSubnets($scope.data.network,templateInfor.nets[0].subnet_id, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\toldData.enable_gpu = $scope.data.enable_gpu= templateInfor.enable_gpu;\r\n\t\t\t\t\toldData.vcpus = $scope.data.vcpus= templateInfor.vcpus;\r\n\t\t\t\t\toldData.ram = $scope.data.ram= templateInfor.ram/1024;\r\n\t\t\t\t\toldData.system_alloc_disk = $scope.data.system_alloc_disk= templateInfor.system_alloc_disk;\r\n\t\t\t\t\toldData.data_alloc_disk = $scope.data.data_alloc_disk= templateInfor.data_alloc_disk;\r\n\t\t\t\t\toldData.data_alloc_disk_2 = $scope.data.data_alloc_disk_2= templateInfor.data_alloc_disk_2;\r\n\t\t\t\t\t$scope.old_data_alloc_disk = templateInfor.data_alloc_disk;\r\n\t\t\t\t\t$scope.old_data_alloc_disk_2 = templateInfor.data_alloc_disk_2;\r\n\r\n\t\t\t\t})\r\n\t\t\t\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t\t\t\t$scope.oldData = angular.copy($scope.data);\r\n\t\t\t\t\r\n\t\t\t\t$scope.isUnchanged = function(){\r\n\t\t\t\t\treturn angular.equals(oldData,$scope.data)\r\n\t\t\t\t}\r\n\t\t\t\t$scope.reset = function(){\r\n\t\t\t\t\tif(oldData.bind_ip_type.value!=='none'){\r\n\t\t\t\t\t\t$scope.types = $scope.types2;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.data = angular.copy(oldData);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t// if($scope.data.system_alloc_disk < oldData.system_alloc_disk || $scope.data.data_alloc_disk_2 < oldData.data_alloc_disk_2 || $scope.data.data_alloc_disk < oldData.data_alloc_disk){\r\n\t\t\t\t\t// \t$.bigBox({\r\n\t\t\t\t\t// \t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t// \t\t\tcontent : $$$I18N.get(\"modifyTemTip\"),\r\n\t\t\t\t\t// \t\t\ttimeout : 6000\r\n\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// var bindIP = $scope.data.band_ip;\r\n     //            \tvar unUseIP = $scope.data.band_ips.filter(function(item){ return item===bindIP });\r\n     //            \tif($scope.data.bind_ip_type.value === 'static' && bindIP === '无可用IP'){\r\n     //            \t\t$.bigBox({\r\n     //            \t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n     //            \t\t\tcontent\t: $$$I18N.get(\"hasStaticIP_TIP\"),\r\n     //            \t\t\ttimeout\t: 6000\r\n     //            \t\t});\r\n     //            \t}else if($scope.data.bind_ip_type.value === 'static' && bindIP !== '无可用IP' && !unUseIP.length){\r\n     //            \t\t$.bigBox({\r\n     //            \t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n     //            \t\t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n     //            \t\t\ttimeout\t: 6000\r\n     //            \t\t});\r\n     //            \t}else{\r\n\t\t\t\t\t\t$scope.submit_loading = true;\r\n\t\t\t\t\t\ttemplate.modify({\r\n\t\t\t\t\t\t\timage_id: item.id,\r\n\t\t\t\t\t\t\tinstance_id: item.instance_id,\r\n\t\t\t\t\t\t\ttemplate_name: $scope.data.name,\r\n\t\t\t\t\t\t\tdescription: $scope.data.description,\r\n\t\t\t\t\t\t\tnetwork: $scope.data.network.id,\r\n\t\t\t\t\t\t\tsubnet: $scope.data.subnet?$scope.data.subnet.id:\"\",\r\n\t\t\t\t\t\t\tband_ip: $scope.data.bind_ip_type.value === 'static' ? $scope.data.band_ip:undefined,\r\n\t\t\t\t\t\t\tband_type: $scope.data.bind_ip_type.value,\r\n\t\t\t\t\t\t\tvcpus: $scope.data.vcpus,\r\n\t\t\t\t\t\t\tram: $scope.data.ram,\r\n\t\t\t\t\t\t\tenable_gpu: item.virtual_type=='hyper-v' && !item.disabled_gpu ? $scope.data.enable_gpu : undefined,\r\n\t\t\t\t\t\t\tgpu_auto_assignment: item.virtual_type=='kvm' && !item.disabled_gpu ? $scope.data.enable_gpu : undefined,\r\n\t\t\t\t\t\t\tsystem_alloc_disk: $scope.data.system_alloc_disk,\r\n\t\t\t\t\t\t\tdata_alloc_disk: $scope.data.data_alloc_disk,\r\n\t\t\t\t\t\t\tdata_alloc_disk_2: $scope.data.data_alloc_disk_2\r\n\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t$scope.submit_loading = false;\r\n\t\t\t\t\t\t\ttemplate.query(function(res){\r\n\t                    \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n        \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n        \t\t\t\t\t\t\t\treturn item;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\telse{\r\n        \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t});\r\n\t                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t                    \t});\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t},function(){ $scope.submit_loading = false; });\r\n\t\t\t\t\t// }\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.resetTemp = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='重置模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='REST_TEMP_TIP' ></p><footer class='text-right' style='margin-top:20px;'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttemplate.reset({ image_id: item.id },\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.imgManage = function(IMG){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_imgManage.html\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.imgType = IMG.virtual_type;\r\n\t\t\t\tfunction formLocalData(dataResource){\r\n\t\t\t\t\tlet arry = []; \r\n\t\t\t\t\tdataResource.forEach(function(item){\r\n\t\t\t\t\t\tif(!arry[item.host_ip]){\r\n\t\t\t\t\t\t\tlet obj = {host_ip: item.host_ip, hostname: item.hostname, resource_pool_uuid: item.resource_pool_uuid, storages: []};\r\n\t\t\t\t\t\t\tarry[item.host_ip] = obj;\r\n\t\t\t\t\t\t\tarry.push(obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\tlet hostArry = dataResource.filter(function(data){ return data.host_ip == item.host_ip });\r\n\t\t\t\t\t\thostArry.forEach(function(data){\r\n\t\t\t\t\t\t\tif(!item.storages[data.storage_name]){\r\n\t\t\t\t\t\t\t\tlet obj = {storage_name: data.storage_name, storage_uuid: data.storage_uuid, storage_type: data.storage_type, imgs: []};\r\n\t\t\t\t\t\t\t\titem.storages[data.storage_name] = obj;\r\n\t\t\t\t\t\t\t\titem.storages.push(obj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\titem.storages.forEach(function(data){\r\n\t\t\t\t\t\t\tlet storageArry = dataResource.filter(function(d){ return item.host_ip == d.host_ip && d.storage_name == data.storage_name });\r\n\t\t\t\t\t\t\tstorageArry.forEach(function(d){\r\n\t\t\t\t\t\t\t\tdata.imgs.push({image_uuid: d.image_uuid, image_type: d.image_type, image_type_desc: d.image_type_desc, has_image: d.has_image, has_instance: d.has_instance, volume_type: d.volume_type, volume_uuid: d.volume_uuid, volume_status: d.volume_status})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\titem.storages.sort(function(a,b){ return a.storage_name>b.storage_name?1:-1 });\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn arry;\r\n\t\t\t\t};\r\n\t\t\t\tfunction formRemoteData(dataResource){\r\n\t\t\t\t\tlet arry = []; \r\n\t\t\t\t\tdataResource.forEach(function(item){\r\n\t\t\t\t\t\tif(!arry[item.storage_name+\"_remote\"]){\r\n\t\t\t\t\t\t\tlet obj = {storage_name: item.storage_name, storage_uuid: item.storage_uuid, storage_type: item.storage_type, host_ip: item.host_ip, imgs: []};\r\n\t\t\t\t\t\t\tarry[item.storage_name+\"_remote\"] = obj;\r\n\t\t\t\t\t\t\tarry.push(obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\tlet imgArry = dataResource.filter(function(d){ return item.storage_name == d.storage_name });\r\n\t\t\t\t\t\timgArry.forEach(function(d){\r\n\t\t\t\t\t\t\titem.imgs.push({image_uuid: d.image_uuid, image_type: d.image_type, image_type_desc: d.image_type_desc, has_image: d.has_image, has_instance: d.has_instance, volume_type: d.volume_type, volume_uuid: d.volume_uuid, volume_status: d.volume_status})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn arry;\r\n\t\t\t\t};\r\n\t\t\t\tfunction getLocal(resource_pool_uuid){\r\n\t\t\t\t\t$scope.local_loading = true;\r\n\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'local', resource_pool_uuid: resource_pool_uuid},function(res){\r\n\t\t\t\t\t\t$scope.local_loading = false;\r\n\t\t\t\t\t\t$scope.locals = formLocalData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t$scope.local_loading = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tfunction getRemote(){\r\n\t\t\t\t\t$scope.remote_loading = true;\r\n\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'remote'},function(res){\r\n\t\t\t\t\t\tconsole.log(res.result);\r\n\t\t\t\t\t\t$scope.remote_loading = false;\r\n\t\t\t\t\t\t$scope.remotes = formRemoteData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t$scope.remote_loading = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tvar new_pool = {};\r\n\t\t\t\tgetRemote();\r\n\t\t\t\tResourcePool.query(function(res){\r\n\t\t\t\t\t$scope.pools = res.result.filter(function(p){ return p.type == IMG.virtual_type });\r\n\t\t\t\t\tnew_pool = $scope.pool = $scope.pools[0];\r\n\t\t\t\t\tgetLocal($scope.pool.uuid);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$scope.getlocalImages = function(pool){\r\n\t\t\t\t\tnew_pool = pool;\r\n\t\t\t\t\tgetLocal(pool.uuid);\r\n\t\t\t\t};\r\n\t\t\t\t$scope.$on(\"syncTempl\", function($event, data){\r\n\t\t\t\t\tvar updateVolume = data.filter(function(item){ return item.id==IMG.id })[0].volume;\r\n\t\t\t\t\tif(updateVolume.length!==0){\r\n\t\t\t\t\t\tupdateVolume.forEach(function(volume){\r\n\t\t\t\t\t\t\tif(volume.storage_type=='local'){\r\n\t\t\t\t\t\t\t\t$scope.locals && $scope.locals.forEach(function(local){\r\n\t\t\t\t\t\t\t\t\tlocal.storages.forEach(function(storage){\r\n\t\t\t\t\t\t\t\t\t\tstorage.imgs.forEach(function(img){\r\n\t\t\t\t\t\t\t\t\t\t\tif(img.volume_uuid==volume.volume_uuid){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.volume_status = volume.volume_status;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='available'){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='deleted'){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.remotes && $scope.remotes.forEach(function(remote){\r\n\t\t\t\t\t\t\t\t\tremote.imgs.forEach(function(img){\r\n\t\t\t\t\t\t\t\t\t\tif(img.volume_uuid==volume.volume_uuid){\r\n\t\t\t\t\t\t\t\t\t\t\timg.volume_status = volume.volume_status;\r\n\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='available'){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='deleted'){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = false;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.sendImg = function(storage_type, resource_pool_uuid, image_type, image_uuid, storage_uuid, img, pool){\r\n\t\t\t\t\timg.volume_status = 'sending';\r\n\t\t\t\t\tmanageTemplate.handout({\r\n\t\t\t\t\t\tid: IMG.id,\r\n\t\t\t\t\t\tresource_pool_uuid: storage_type=='local'?resource_pool_uuid:undefined,\r\n\t\t\t\t\t\timage_type: image_type,\r\n\t\t\t\t\t\timage_uuid: image_uuid,\r\n\t\t\t\t\t\tstorage_uuid: storage_uuid,\r\n\t\t\t\t\t\tstorage_type: storage_type\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\tif(storage_type=='local'){\r\n\t\t\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'local', resource_pool_uuid: pool.uuid},function(res){\r\n\t\t\t\t\t\t\t\tvar newData = formLocalData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t\t\t\t$scope.locals.splice(0, $scope.locals.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply($scope.locals,newData);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'remote'},function(res){\r\n\t\t\t\t\t\t\t\tvar newData = formRemoteData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t\t\t\t$scope.remotes.splice(0, $scope.remotes.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply($scope.remotes,newData);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t// img.status = 'sended failed';\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.deleteImg = function(storage_type, volume_uuid, img, storage_uuid, pool){\r\n\t\t\t\t\tif(!img.has_instance){\r\n\t\t\t\t\t\timg.volume_status = 'deleting';\r\n\t\t\t\t\t\tmanageTemplate.delete({\r\n\t\t\t\t\t\t\tstorage_type: storage_type,\r\n\t\t\t\t\t\t\tid: IMG.id,\r\n\t\t\t\t\t\t\tvolume_uuid: volume_uuid,\r\n\t\t\t\t\t\t\timage_uuid: img.image_uuid,\r\n\t\t\t\t\t\t\tstorage_uuid: storage_uuid\r\n\t\t\t\t\t\t},function(res){\r\n\r\n\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\timg.volume_status = 'delete failed';\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.detail = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_detail.html\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\ttemplate.infor({ image_id: item.id }, function(infor){\r\n\t\t\t\t\t$scope.data = infor;\r\n\t\t\t\t\tfunction formData(obj){\r\n\t\t\t\t\t\tobj.imgs = [];\r\n\t\t\t\t\t\tfor(var i in obj){\r\n\t\t\t\t\t\t\tif(i!=='imgs'){\r\n\t\t\t\t\t\t\t\tvar img = {};\r\n\t\t\t\t\t\t\t\timg.location = i;\r\n\t\t\t\t\t\t\t\timg.volumeId = obj[i];\r\n\t\t\t\t\t\t\t\tobj.imgs.push(img);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(var i in $scope.data.inst_volumes){\r\n\t\t\t\t\t\tformData($scope.data.inst_volumes[i]);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tnetwork.query(function(data){\r\n\t\t\t\t\t\t$scope.data.network = data.networks.filter(function(data){ return data.id===infor.nets[0].network_id })[0];\r\n\t\t\t\t\t\tif(infor.nets[0].subnet_id){\r\n\t\t\t\t\t\t\tnetwork.query_sub({id: infor.nets[0].network_id }, function(res){\r\n\t\t\t\t\t\t\t\tvar subnet = res.result.filter(function(data){ return data.id === infor.nets[0].subnet_id })[0];\r\n\t\t\t\t\t\t\t\t$scope.data.subnet = subnet.name +\" (\"+ subnet.start_ip + \"~\" + subnet.end_ip +\")\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, function(){});\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}])\r\n\r\n.controller(\"addTeachTemplateDialog\", [\r\n\"$scope\", \"$modalInstance\", \"TeachTemplate\", \"HardwareTemplate\", \"SystemISO\", \"Admin\", \"$$$os_types\",\"$$$I18N\", \"UserRole\",\"Network\", \"virtualHost\", \"networkWithHost\", \"$rootScope\",\"checkIP\",\r\nfunction($scope, $modalInstance, teach, hardware, iso, admin, $$$os_types,$$$I18N, UserRole, network, virtualHost, networkWithHost, $root, checkIP){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.auto_isos = [];$scope.all_isos = [];\r\n\t$scope.iso = [];\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types2[0];\r\n\tadmin.query(function(res){\r\n\t\t$scope.users = res.users;\r\n\t\tangular.forEach($scope.users, function(item){\r\n\t\t\tif(item.name === user.name)\r\n\t\t\t\t$scope.owner = item;\r\n\t\t})\r\n\t\tif(!$scope.owner) $scope.owner = $scope.users[0]\r\n\t});\r\n\thardware.query(function(res){\r\n\t\t$scope.hardware_templates = res.result;\r\n\t\t$scope.template = $scope.hardware_templates[0];\r\n\t});\r\n\tiso.query(function(res){\r\n\t\t$scope.all_isos = res.isos.filter(function(iso){ return iso.type && iso.type!==\"package\" && iso.type!==\"other\"; });\r\n\t\t\r\n\t\t$scope.all_isos.forEach(function(item){\r\n\t\t\titem.os_type = item.os_type.split(\",\");\r\n\t\t});\r\n\t\t$scope.isos = $scope.all_isos;\r\n\t\t$scope.iso = [$scope.isos[0]];\r\n\t\tangular.forEach($scope.isos, function(item){\r\n\t\t\tif(item.support_auto_install == true)\r\n\t\t\t\t$scope.auto_isos.push(item);\r\n\t\t})\r\n\t});\r\n\r\n\t$scope.type = 'kvm';\r\n\t$scope.enable_gpu = false;\r\n\t$scope.gpu_auto_assignment = false;\r\n\t$scope.getVirtualHost = function (type){\r\n\t\tvar _this = this;\r\n\t\t$scope.host_loading = true;\r\n\t\tvar data = {};\r\n\t\tdata.type = type;\r\n\t\tif(type=='hyper-v'){\r\n\t\t\tdata.enable_gpu = _this.enable_gpu;\r\n\t\t\t_this.gpu_auto_assignment = false;\r\n\t\t}else{\r\n\t\t\tdata.enable_gpu = _this.gpu_auto_assignment;\r\n\t\t\t_this.enable_gpu = false;\r\n\t\t}\r\n\t\tvirtualHost.query(data,function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t_this.host = $scope.hosts[0];\r\n\t\t\t_this.host && $scope.getNetwork(_this.host);\r\n\t\t},function(){\r\n\r\n\t\t});\r\n\t}\r\n\t$scope.getVirtualHost($scope.type);\r\n\r\n\t// function getIps(subnet_id, _scope){\r\n\t// \tif(subnet_id){\r\n\t// \t\tnetwork.ports({ id: subnet_id },function(res){\r\n\t// \t\t\tif(res.unused_ips.length){\r\n\t// \t\t\t\t_scope.band_ips = res.unused_ips;\r\n\t// \t\t\t}\r\n\t// \t\t\telse{\r\n\t// \t\t\t\t_scope.band_ips = [\"无可用IP\"];\r\n\t// \t\t\t}\r\n\t// \t\t\t_scope.bind_ip_loading = false;\r\n\t// \t\t})\r\n\t// \t}\r\n\t// };\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope);\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[0];\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.getNetwork = function(host){\r\n\t\tif(host){\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope);\r\n\t\t\t}, function(){});\r\n\t\t}\r\n\t}\r\n\t// network.query(function(data){\r\n\t// \t$scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t// \t$scope.network = $scope.networks[0];\r\n\t// \tgetSubnets($scope.network, $scope);\r\n\t// })\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\t$scope.names = $scope.rows.map(function(item){ return item.name });\r\n\t$scope.sameName = false;\r\n\tvar _scope = $scope;\r\n\t$scope.install = \"manualinstall\";\r\n\t$scope.isOther = false;\r\n\t$scope.$on(\"selectStepChange\", function(e, arg){\r\n\t\tif(arg.index==0){\r\n\t\t\targ.stepScope.$$nextSibling.error = false;\r\n\t\t}\r\n\t})\r\n\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\t_scope.type = scope.type;\r\n\t\tscope.error = step.is_dirty;\r\n\t\tvar flag = false;\r\n\t\t_scope.names.forEach(function(item){\r\n\t\t\tif(scope.name == item){ flag = true; }\r\n\t\t})\r\n\t\tif(flag){\r\n\t\t\t_scope.sameName = true;\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"WRONG_NAME\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse { _scope.sameName = false; }\r\n\t\tstep.done = !scope.step_pane0.$invalid && !_scope.sameName && !scope.network_loading;\r\n\r\n\t\tif(step.done && scope.$$childTail && scope.$$childTail.bind_ip){\r\n\t\t\tstep.showLoading = true;\r\n\t\t\tstep.done = false;\r\n\t\t\tcheckIP.check({ip: scope.$$childTail.bind_ip, subnet_id: scope.subnet.id},function(res){\r\n\t\t\t\tif(!res.result){\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n\t\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.$broadcast(\"currentStepChange\", 1);\r\n\t\t\t\t}\r\n\t\t\t\tstep.showLoading = false;\r\n\t\t\t},function(error){ step.showLoading = false; });\r\n\t\t}\r\n\t});\r\n\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\tif(scope.template.system_gb == 0)\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"模板系统盘不能为0\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\tstep.done = !(scope.template.system_gb == 0);\r\n\t});\r\n\t$scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(\"[rel=popover-hover]\").popover({\r\n\t\t\t\ttrigger : \"hover\"\r\n\t\t\t});\r\n\t\t})\r\n\t\t_scope.install = scope.install;\r\n\t\tif(scope.iso != undefined && scope.iso[0] != undefined){\r\n\t\t\tif(scope.iso[0].os_type[0] == 'other'){\r\n\t\t\t\tscope.$parent.system_versions = $$$os_types;\r\n\t\t\t\tscope.$parent.system_version1 = scope.$parent.system_versions[0];\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar _types = [];\r\n\t\t\t\tscope.iso[0].os_type.forEach(function(item){\r\n\t\t\t\t\tvar _obj = {};\r\n\t\t\t\t\t_obj.key = item;\r\n\t\t\t\t\t_obj.value = item;\r\n\t\t\t\t\t_types.push(_obj);\r\n\t\t\t\t})\r\n\t\t\t\tscope.$parent.system_versions = _types;\r\n\t\t\t\tscope.$parent.system_version1 = _types[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = (scope.iso != undefined && scope.iso[0] != undefined);\r\n\t});\r\n\tvar newWindow;\r\n\tvar FLAG = false;\r\n\tfunction gotoUrl(val){\r\n\t\tif(val){\r\n\t\t\tnewWindow = window.open('templateModify.html#0');\r\n\t\t\t// newWindow = window.open('js/vdi-spice/spiceModify.html#?id=0');\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function(){\r\n\t\t$(\"#finish\").on('click',function(){\r\n\t\t    gotoUrl(FLAG);\r\n\t\t})\r\n\t})\r\n\t\r\n\t$scope.$on(\"WizardStep_3\", function(e, step, scope){\r\n\t\tif(scope.step_pane3.$invalid){\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\tstep.done = false;\r\n\t\t}\r\n\t\telse if(scope.userPassword && scope.userPasswordConfirm && scope.userPassword !== scope.userPasswordConfirm){\r\n\t\t\tstep.done = false;\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"两次输入密码不一致\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t\tstep.done = true;\r\n\t\tFLAG = step.done;\r\n\t});\r\n\t$scope.$on(\"WizardDone\", function(e, steps, scopes){\r\n\t\tvar auto_install = scopes[2].install === \"autoinstall\" ? true : false;\r\n\t\tvar _ip = scopes[0].bind_ip_type.value === 'static' ? scopes[0].$$childHead.bind_ip : undefined;\r\n\t\tvar testWin10 = /Windows10/;\r\n\t\tvar item = {\r\n\t\t\ttemplate_name: scopes[0].name,\r\n\t\t\tdescription: scopes[0].description,\r\n\t\t\towner: scopes[0].owner.id,\r\n\t\t\ttype_code : 1,\r\n\t\t\tvcpus: scopes[1].template.cpu_num,\r\n\t\t\tsystem_gb: scopes[1].template.system_gb,\r\n\t\t\tlocal_gb: scopes[1].template.local_gb,\r\n\t\t\tmemory_mb: scopes[1].template.memory_mb,\r\n\t\t\tiso_path:scopes[2].iso[0].name,\r\n\t\t\tiso_id:scopes[2].iso[0].id,\r\n\t\t\tos_type: scopes[3].system_version1.key,\r\n\t\t\tinstance_type: scopes[1].template.id,\r\n\t\t\tauto_install: auto_install,\r\n\t\t\tnetwork: scopes[0].network.id,\r\n\t\t\tsubnet: scopes[0].subnet?scopes[0].subnet.id:'',\r\n\t\t\tband_ip: _ip,\r\n\t\t\tband_type: scopes[0].bind_ip_type.value,\r\n\t\t\tkey:scopes[3].key,\r\n\t\t\tusername:scopes[3].userName,\r\n\t\t\tuserPassword:scopes[3].userPassword,\r\n\t\t\tuserPasswordConfirm:scopes[3].userPasswordConfirm,\r\n\t\t\tvirtual_type: scopes[0].type,\r\n\t\t\tenable_gpu: scopes[0].type == 'hyper-v'? scopes[0].enable_gpu:undefined,\r\n\t\t\tgpu_auto_assignment: scopes[0].type == 'kvm'? scopes[0].gpu_auto_assignment:undefined,\r\n\t\t\tfirmware_type: scopes[0].type == 'kvm' && testWin10.test(scopes[3].system_version1.key)?'uefi':undefined,\r\n\t\t\thost_uuid: scopes[0].host.host_uuid\r\n\t\t};\r\n\t\tfunction updateTem(isSuccess){\r\n\t\t\tteach.query(function(res){\r\n\t\t\t\tconsole.log(res, 'teachDesktop', item.virtual_type)\r\n\t\t\t\t$scope.allrows.splice(0, $scope.allrows.length);\r\n\t\t\t\tArray.prototype.push.apply($scope.allrows,res.win_images.concat(res.linux_images).concat(res.other_images));\r\n\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n\t\t\t\t\tif($scope.select === 'all'){\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\treturn item.virtual_type === scopes[0].type;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t});\r\n\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\r\n\t\t\t\t// if(!auto_install){\r\n\t\t\t\t\tvar template = $scope.rows.filter(function(temp){ return temp.name ==  item.template_name})[0];\r\n\t\t\t\t\tif(template && isSuccess){\r\n\t\t\t\t\t\tif(scopes[0].type == \"hyper-v\"){\r\n\t\t\t\t\t\t\tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModify_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t\t\t//novnc-->spice-html5 \r\n\t\t\t\t\t\t\t\t// newWindow.location.replace('js/vdi-spice/spiceModify_rdp.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModifybt_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t\t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t\t\t// newWindow.location.replace('js/vdi-spice/spiceModifybt_rdp.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t\t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t\t\t// newWindow.location.replace('js/vdi-spice/spiceModify.html#?id=' + template.id + '&os_type' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t\t\t// newWindow.location.reload();\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModify.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t\t\tnewWindow.location.reload();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModifybt.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t\t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t\t\t// newWindow.location.replace('js/vdi-spice/spiceModifybt.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\t\t};\r\n\t\te.targetScope.currentStep.showLoading = true;\r\n\t\t$modalInstance.close();\r\n\t\tteach.save(item, function(res){ updateTem(true); }, function(){ newWindow.close(); updateTem(); }).$promise.finally(function(){\r\n\t\t\te.targetScope.currentStep.showLoading = false;\r\n\t\t});\r\n\t});\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.cpu_num = 1;\r\n}])\r\n\r\n.controller(\"registerTeachTemplateDialog\", [\r\n\"$scope\", \"$modalInstance\", \"Admin\", \"registerTemplate\", \"TeachTemplate\", \"$$$os_types\", \"UserRole\",\"Network\", \"virtualHost\",\"networkWithHost\", \"$$$I18N\",\r\nfunction($scope, $modalInstance, admin, registerTemplate, teach, $$$os_types, UserRole, network, virtualHost, networkWithHost, $$$I18N){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;\r\n\t$scope.max_namelength=20;\r\n\t$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.type = '1';\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types2[0];\r\n\tadmin.query(function(res){\r\n\t\t$scope.users = res.users;\r\n\t\tangular.forEach($scope.users, function(item){\r\n\t\t\tif(item.name === user.name)\r\n\t\t\t\t$scope.owner = item;\r\n\t\t})\r\n\t});\r\n\tregisterTemplate.query(function(res){\r\n\t\t$scope.sys_isos = res.system_image;\r\n\t\t$scope.sys_iso = res.system_image[0];\r\n\t\t$scope.old_data_isos = res.data_image;\r\n\t\tif($scope.sys_iso){\r\n\t\t\t$scope.getDataImgs($scope.sys_iso);\r\n\t\t}\r\n\t})\r\n\t$scope.filterDataISO = function(data_iso, data_iso2){\r\n\t\tif(data_iso){\r\n\t\t\t$scope.data_isos2 = $scope.data_isos.filter(function(item){ return item.name !== data_iso.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos2 = $scope.data_isos;\r\n\t\t}\r\n\t\tif(data_iso2){\r\n\t\t\t$scope.data_isos1 = $scope.data_isos.filter(function(item){ return item.name !== data_iso2.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos1 = $scope.data_isos;\r\n\t\t}\r\n\t};\r\n\t$scope.getDataImgs = function(systemImg, is_init){\r\n\t\tif(systemImg){\r\n\t\t\tthis.data_iso = undefined;\r\n\t\t\tthis.data_iso2 = undefined;\r\n\t\t\t$scope.data_isos = $scope.data_isos2 = $scope.data_isos1 = $scope.old_data_isos.filter(function(item){ return item.virtual_type == systemImg.virtual_type });\r\n\t\t\t// $scope.data_iso = $scope.data_isos[0];\r\n\t\t\t// $scope.data_iso2 = $scope.data_isos[0];\r\n\t\t\t$scope.getVirtualHost(systemImg.virtual_type, systemImg.rbd_enabled);\t\t\t\r\n\t\t}\r\n\t};\r\n\t$scope.getVirtualHost = function (type, rbd_enabled){\r\n\t\t$scope.host_loading = true;\r\n\t\tvirtualHost.query({\r\n\t\t\tvirtual_type: type,\r\n\t\t\trbd_enabled: rbd_enabled\r\n\t\t\t// enable_gpu: type == 'hyper-v'?enable_gpu:undefined\r\n\t\t},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\tif(res.result.length === 0) {\r\n\t\t\t\tvar form = getRegisterTemplateForm();\r\n\t\t\t\tform.host.$setViewValue(\"\");\r\n\t\t\t}\r\n\t\t\t$scope.getNetwork($scope.host);\r\n\t\t},function(){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.os_types = $$$os_types.filter(function(item){ return item.key!==\"package\" });\r\n\t$scope.os_type = $scope.os_types[0];\r\n\t// $scope.enable_gpu = false;\r\n\t$scope.bind_ip = {value: null};\r\n\r\n\t// function getIps(subnet_id, _scope){\r\n\t// \tif(subnet_id){\r\n\t// \t\tnetwork.ports({ id: subnet_id },function(res){\r\n\t// \t\t\tif(res.unused_ips.length){\r\n\t// \t\t\t\t_scope.band_ips = res.unused_ips;\r\n\t// \t\t\t}\r\n\t// \t\t\telse{\r\n\t// \t\t\t\t_scope.band_ips = [\"无可用IP\"];\r\n\t// \t\t\t}\r\n\t// \t\t\t_scope.bind_ip_loading = false;\r\n\t// \t\t})\r\n\t// \t}\r\n\t// };\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope);\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[0];\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t},function(){ $scope.network_loading = false; })\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.getNetwork = function(host){\r\n\t\tif(host){\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope);\r\n\t\t\t}, function(){});\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar bindIP = this.bind_ip.value;\r\n\t\t// var unUseIP = this.band_ips.filter(function(item){ return item===bindIP });\r\n\t\t// if(this.bind_ip_type.value === 'static' && bindIP === '无可用IP'){\r\n\t\t// \t$.bigBox({\r\n\t\t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t// \t\tcontent\t: $$$I18N.get(\"hasStaticIP_TIP\"),\r\n\t\t// \t\ttimeout\t: 6000\r\n\t\t// \t});\r\n\t\t// }else if(this.bind_ip_type.value === 'static' && bindIP !== '无可用IP' && !unUseIP.length){\r\n\t\t// \t$.bigBox({\r\n\t\t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t// \t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n\t\t// \t\ttimeout\t: 6000\r\n\t\t// \t});\r\n\t\t// }else{\r\n\t\t\t$scope.submiting = true ;\r\n\t\t\t$scope.afterSubmiting =false ;\r\n\t\t\tvar _ip = this.bind_ip_type.value === 'static' ? bindIP : undefined;\r\n\t\t\tvar postData = {\r\n\t\t\t\tsystem_image_file: this.sys_iso,\r\n\t\t\t\tdata_image_file: this.data_iso?this.data_iso:undefined,\r\n\t\t\t\tdata_image_file_2: this.data_iso2?this.data_iso2:undefined,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tdescription: this.description,\r\n\t\t\t\ttype_code: this.type,\r\n\t\t\t\tos: this.os_type.key,\r\n\t\t\t\tis_64: this.os_type.value.indexOf(\"64 bit\")>-1?true: false,\r\n\t\t\t\towner: this.owner.id,\r\n\t\t\t\tnetwork: this.network.id,\r\n\t\t\t\tsubnet: this.subnet?this.subnet.id:'',\r\n\t\t\t\tband_ip: _ip,\r\n\t\t\t\tband_type: this.bind_ip_type.value,\r\n\t\t\t\thost_uuid: this.host.host_uuid,\r\n\t\t\t\tusername: this.sys_iso.virtual_type=='hyper-v'?this.username:undefined,\r\n\t\t\t\tuserPassword: this.sys_iso.virtual_type=='hyper-v'?this.userPassword:undefined,\r\n\t\t\t\tuserPasswordConfirm: this.sys_iso.virtual_type=='hyper-v'?this.userPasswordConfirm:undefined\r\n\t\t\t\t// enable_gpu: this.sys_iso.virtual_type == 'hyper-v'?this.enable_gpu:undefined\r\n\t\t\t};\r\n\t\t\tregisterTemplate.update(postData, function(res){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t\tteach.query(function(res){\r\n\t\t\t\t\t$scope.allrows.splice(0, $scope.allrows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.allrows,res.win_images.concat(res.linux_images).concat(res.other_images));\r\n\t\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n\t\t\t\t\t\tif($scope.select === 'all'){\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn item.virtual_type === $scope.select;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\t\t\t\t});\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},function(){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t// }\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\tfunction getRegisterTemplateForm(){\r\n\t\tvar child = $scope.$$childHead;\r\n\t\tvar form = null;\r\n\t\twhile(child && !form) {\r\n\t\t\tform = child.registerTemplate;\r\n\t\t\tchild = child.$$nextSibling;\r\n\t\t}\r\n\t\treturn form;\r\n\t}\r\n}])\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/template/controller.teach.js","angular.module(\"vdi.template.person\", [\"vdi.template\"])\r\n.factory(\"PersonTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/2\", isArray: false },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/modify_template/:id\", params: { id: \"@id\" } },\r\n\t\tlistModes:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/update_mode_instance/:id\", params: { id: \"@id\" }, isArray: false },\r\n\t\tapplyTemplate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/update_mode_instance/:id\", params: { id: \"@id\" } },\r\n\t\tstatus:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/status/:id\", params: { id: \"@id\" } },\r\n\t\tcopy:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/clone_template\"},\r\n\t\tmodify:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/image/2\", isArray: false },\r\n\t\tdownload:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/download/:id\", params: { id: \"@id\" } },\r\n\t\treset:\r\n\t\t\t{ method: \"post\", url: $Domain + \"/thor/image/reset_template\" },\r\n\t\tget_image_vnc_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/get_image_vnc_info\" },\r\n\t\tget_image_rdp_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/get_image_rdp_info\" },\r\n\t\tupdate_tpl_tip:\r\n\t\t\t{method:\"GET\",url:$Domain + \"/thor/controller/ha_storage_state\"}\r\n\t});\r\n}])\r\n\r\n.controller(\"vdiTemplatePresonalDesktopListController\",[\r\n\"$scope\", \"$modal\", \"TeachTemplate\", \"PersonTemplate\", \"Admin\", \"$interval\", \"$filter\", \"$$$os_types\", \"$Domain\", \"Network\", \"$$$I18N\", \"ResourcePool\", \"manageTemplate\", \"VMCommon\", \"networkWithHost\", \"virtualHost\",\"UserRole\", \r\nfunction($scope, $modal, template, tmpl, admin, $interval, $filter, $$$os_types, $Domain, network, $$$I18N, ResourcePool, manageTemplate, vm, networkWithHost, virtualHost, UserRole){\r\n\t$scope.domain = $Domain;\r\n\t$scope.rows = []; $scope.allrows = [];\r\n\tvar _controllerScope = $scope;\r\n\t$scope.loading = true;\r\n\tlet user = UserRole.currentUser;\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [30,20,10];\r\n    $scope.pagesize = $scope.pagesizes[0];\r\n\r\n    $scope.orders = [ {name: $$$I18N.get(\"按创建时间排序\"), val: 'time'}, {name: $$$I18N.get(\"按模板名称排序\"), val: 'name'}];\r\n    $scope.order = $scope.orders[0];\r\n    $scope.sortTem = function(val){\r\n    \tif(val == 'time'){\r\n    \t\t$scope.rows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n    \t}\r\n    \telse{\r\n    \t\t$scope.rows.sort(function(a,b){ return a.name>b.name? 1:-1 });\r\n    \t}\r\n    }\r\n\r\n\t$interval(function(){\r\n\t\t$scope.$root && $scope.$root.$broadcast(\"imageIDS\", $scope.rows && $scope.rows.map(function(item){ return item.id }));\r\n\t}, 1000);\r\n\t$scope.$on(\"imagesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows && $scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.rows = $scope.rows.filter(function(item){ return item.type_code ===2 });\r\n\t\t$scope.rows.forEach(function(row){\r\n\t\t\tif(row.sync_status){\r\n\t\t\t\tvar updateInfor = row.sync_status.filter(function(item){ return item.type === \"image\" });\r\n\t\t\t\tif(updateInfor.length!==0)\r\n\t\t\t\t\trow.updateSize = (updateInfor[0].size/1024/1024/1024).toFixed(2);\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.$root.$broadcast(\"syncTempl\", $scope.rows);\r\n\t});\r\n\r\n\ttmpl.query(function(res){\r\n\t\t$scope.rows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t$scope.rows.forEach(function(row){\r\n\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t});\r\n\t\t$scope.rows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t$scope.loading = false;\r\n\t\t$scope.personalNames = $scope.rows.map(function(item){ return item.name });\r\n\t\t$scope.sameName = false;\r\n\r\n\t\t$scope.allrows = $scope.rows;\r\n\t\tif($$$storage.getSessionStorage('virtual_type_P')!=='all')\r\n\t\t\t$scope.rows = $scope.allrows.filter(function(item){ return item.virtual_type === $$$storage.getSessionStorage('virtual_type_P') });\r\n\t});\r\n\r\n\t$scope.select = $$$storage.getSessionStorage('virtual_type_P') || 'all';\r\n\t$scope.$watch(\"select\",function(newvalue){\r\n\t\tif(newvalue){\r\n\t\t\tif(newvalue!=='all'){\r\n\t\t\t\t$scope.rows = $scope.allrows.filter(function(item){ return item.virtual_type === newvalue });\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t$scope.rows = $scope.allrows;\r\n\t\t\t}\r\n\t\t\t$$$storage.setSessionStorage('virtual_type_P', newvalue);\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除个人模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_TEMPLATE_P' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t$scope.name = rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttmpl.delete({ id: rows.map(function(item){ return item.id }) },function(res){\r\n\t                \ttmpl.query(function(res){\r\n\t                \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n    \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n    \t\t\t\t\t\t\t\treturn item;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\telse{\r\n    \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n                    \t});\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\ttmpl.query(function(res){\r\n\t                \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n    \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n    \t\t\t\t\t\t\t\treturn item;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\telse{\r\n    \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t});\r\n                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n                    \t});\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.shutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar rows_active = rows.filter(function(item){ return item.instance_status === 'running' });\r\n\t\tif(!rows_active.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"SHUTOFF_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='关机'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='shutdown_TEMPLATE_T' param1='{{name}}'></p><footer class='text-right'><img data-ng-if='loading' src='./img/building.gif' width='24px'><button class='btn btn-primary' data-ng-if='!loading' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-if='!loading' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t\t$scope.name = rows_active.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\tvm.shutdowns({ instance_ids: rows_active.map(function(item){ return item.instance_id }) },function(res){\r\n\t\t\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t_controllerScope.rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\t\tif(item.id === row.id){\r\n\t\t\t\t\t\t\t\t\t\titem.instance_status = \"shutdown\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\t\t\t\r\n\t\t}\r\n\t};\r\n\t$scope.copy = function(item){\r\n\t\t $modal.open({\r\n                templateUrl: \"views/vdi/dialog/template/template_copy.html\",\r\n                size: \"md\",\r\n                controller: [\"$scope\", \"$modalInstance\", function($scope, $modalInstance){\r\n                    $scope.min_namelength=2;$scope.max_namelength=20;\r\n                    $scope.is_copy = true;\r\n                    $scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n                    $scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n                    $scope.types = $scope.types2;\r\n                    $scope.bind_ip_type = $scope.types2[0];\r\n                    admin.query(function(res){\r\n                        $scope.owners = res.users;\r\n                        angular.forEach($scope.owners, function(item){\r\n                        \tif(item.name == user.name){\r\n                        \t\t$scope.owner = item;\r\n                        \t}\r\n                        });\r\n                        if(!$scope.owner) {\r\n                        \t$scope.owner = $scope.users[0]\r\n                        }\r\n                    });\r\n                    $scope.type = '2';\r\n                    $scope.temCopy = false;\r\n\r\n                    $scope.temData = item;\r\n                    $scope.getVirtualHost = function (type,rbd_enabled){\r\n                    \t$scope.host_loading = true;\r\n                    \tvirtualHost.query({\r\n                    \t\tvirtual_type: type,\r\n                    \t\trbd_enabled: rbd_enabled\r\n                    \t\t// enable_gpu: type == 'hyper-v'?enable_gpu:undefined\r\n                    \t},function(res){\r\n                    \t\t$scope.host_loading = false;\r\n                    \t\t$scope.hosts = res.result;\r\n                    \t\t$scope.host = $scope.hosts[0];\r\n                    \t\t$scope.getNetwork($scope.host);\r\n                    \t},function(){\r\n\r\n                    \t});\r\n                    }\r\n                    $scope.getVirtualHost(item.virtual_type,item.rbd_enabled);\r\n\r\n                    // function getIps(subnet_id, _scope){\r\n                    // \tif(subnet_id)\r\n                    // \t\tnetwork.ports({ id: subnet_id },function(res){\r\n                    // \t\t\t_scope.band_ips = res.unused_ips;\r\n                    // \t\t\t_scope.bind_ip = _scope.band_ips[0];\r\n                    // \t\t\t_scope.bind_ip_loading = false;\r\n                    // \t\t})\r\n                    // };\r\n                    $scope.switchIps = function(subnet,_scope){\r\n                    \t// _scope.bind_ip_loading = true;\r\n                    \tif(subnet){\r\n                    \t\t// getIps(subnet.id, _scope);\r\n                    \t\t_scope.types = _scope.types2;\r\n                    \t\t_scope.bind_ip_type = _scope.types2[0];\r\n                    \t}\r\n                    \telse{\r\n                    \t\t_scope.types = _scope.types1;\r\n                    \t\t_scope.band_ips = [];\r\n                    \t\t_scope.bind_ip_type = _scope.types1[0];\r\n                    \t\t// _scope.bind_ip_loading = false;\r\n                    \t}\r\n                    };\r\n                    function getSubnets(Network,_scope){\r\n                    \tif(Network.subnets.length){\r\n                    \t\t$scope.network_loading = true;\r\n                    \t\t// $scope.bind_ip_loading = true;\r\n                    \t\tnetwork.query_sub({id: Network.id }, function(res){\r\n                    \t\t\t_scope.subnets = res.result;\r\n                    \t\t\t_scope.subnet = _scope.subnets[0];\r\n                    \t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n                    \t\t\t$scope.network_loading = false;\r\n                    \t\t})\r\n                    \t}\r\n                    \telse{\r\n                    \t\t_scope.subnets = [];\r\n                    \t\t_scope.subnet = null;\r\n                    \t\t_scope.switchIps(_scope.subnet, _scope);\r\n                    \t}\r\n                    };\r\n                    $scope.getNetwork = function(host){\r\n                    \tif(host){\r\n                    \t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n                    \t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n                    \t\t\t$scope.networks = res.result;\r\n                    \t\t\t$scope.network = $scope.networks[0];\r\n                    \t\t\tgetSubnets($scope.network, $scope);\r\n                    \t\t}, function(){});\r\n                    \t}\r\n                    }\r\n                    $scope.switchSubnet = function(val, _scope){\r\n                    \tgetSubnets(val,_scope);\r\n                    }\r\n                    $scope.ok = function(){\r\n                \t\t$scope.temCopy = true;\r\n                \t\tvar _ip = this.bind_ip_type.value === 'static' ? this.bind_ip.value : undefined;\r\n                        tmpl.copy({\r\n                    \t\tname: this.name,\r\n                    \t\tdescription: this.description,\r\n                    \t\timage_id : item.id,\r\n                    \t    type_code: this.type,\r\n                    \t    owner: $scope.owner.id,\r\n                    \t    network: this.network.id,\r\n                    \t    subnet: this.subnet?this.subnet.id:\"\",\r\n                    \t    band_ip: _ip,\r\n                    \t    band_type: this.bind_ip_type.value,\r\n                    \t    host_uuid: this.host.host_uuid\r\n                    \t    // enable_gpu: item.virtual_type == 'hyper-v'?this.enable_gpu:undefined\r\n                        }, function(res){\r\n                        \ttmpl.query(function(res){\r\n                        \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n        \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n        \t\t\t\t\t\t\t\treturn item;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\telse{\r\n        \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t});\r\n                        \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n                        \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                        \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n                        \t});\r\n                        \t$modalInstance.close();\r\n                        }, function(){\r\n                        \t$scope.temCopy = false;\r\n                        });\r\n                    \t}\r\n                    $scope.close = function(){\r\n                        $modalInstance.close();\r\n                    };\r\n                } ]\r\n            });\r\n\t};\r\n\t$scope.modify = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_modify.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t\t\t\t$scope.types = $scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t\t\t\t$scope.virtual_type = item.virtual_type;\r\n\t\t\t\t$scope.disabled_gpu = item.disabled_gpu;\r\n\t\t\t\t$scope.data = {vcpus: 1, ram: 1.5, system_alloc_disk: 10, bind_ip_type: $scope.types2[1]};\r\n\t\t\t\tvar oldData = {};\r\n\t\t\t\tfunction getSubnets(Network, subnet_id, flag){\r\n\t\t\t\t\tif(Network.subnets.length){\r\n\t\t\t\t\t\t$scope.network_loading = true;\r\n\t\t\t\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t\t\t\t$scope.data.subnets = res.result;\r\n\t\t\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\t\t\toldData.subnets = $scope.data.subnets;\r\n\t\t\t\t\t\t\t\toldData.subnet = $scope.data.subnet = $scope.data.subnets.filter(function(data){ return data.id === subnet_id })[0];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.data.subnet = $scope.data.subnets[0];\r\n\t\t\t\t\t\t\t\tif($scope.data.subnet)\r\n\t\t\t\t\t\t\t\t\tgetIps($scope.data.subnet.id, $scope.cur_imgInfor.nets.ip_address, false);\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t\t$scope.data.band_ips = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$scope.network_loading = false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.data.subnets = [];\r\n\t\t\t\t\t\t$scope.data.subnet = null;\r\n\t\t\t\t\t\t$scope.switchIps($scope.data.subnet);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tfunction getIps(subnet_id, curr_ip, flag){\r\n\t\t\t\t\tif(subnet_id){\r\n\t\t\t\t\t\t$scope.types = $scope.types2;\r\n\t\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\t\toldData.bind_ip_type = $scope.data.bind_ip_type = $scope.types[1];\r\n\t\t\t\t\t\t\toldData.band_ips = $scope.data.band_ips;\r\n\t\t\t\t\t\t\toldData.band_ip = $scope.data.band_ip = curr_ip;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t$scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t\t\t$scope.data.band_ip = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t\toldData.bind_ip_type = $scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.switchSubnet = function(val){\r\n\t\t\t\t\tgetSubnets(val, $scope.cur_imgInfor.nets.network_id, false);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.switchIps = function(subnet){\r\n\t\t\t\t\tif(subnet)\r\n\t\t\t\t\t\tgetIps(subnet.id,$scope.cur_imgInfor.nets.ip_address, false)\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t\t$scope.data.bind_ip_type = $scope.types[0];\r\n\t\t\t\t\t\t$scope.data.band_ips = [];\r\n\t\t\t\t\t\t$scope.data.band_ip = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.addbtndisk = function(){\r\n\t\t\t\t\tif(!$scope.data.data_alloc_disk){\r\n\t\t\t\t\t\t$scope.data.data_alloc_disk = 1;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!$scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 1;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.minusbtndisk = function(){\r\n\t\t\t\t\tif($scope.old_data_alloc_disk && !$scope.old_data_alloc_disk_2){\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk_2){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk_2 = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif($scope.data.data_alloc_disk){\r\n\t\t\t\t\t\t\t$scope.data.data_alloc_disk = 0;\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t};\r\n\t\t\t\ttemplate.infor({ image_id: item.id }, function(templateInfor){\r\n\t\t\t\t\t$scope.cur_imgInfor = templateInfor;\r\n\t\t\t\t\toldData.name = $scope.data.name = templateInfor.name;\r\n\t\t\t\t\toldData.description = $scope.data.description = templateInfor.description;\r\n\t\t\t\t\tgetIps(templateInfor.nets[0].subnet_id, templateInfor.nets[0].ip_address, true);\r\n\t\t\t\t\tnetwork.query(function(data){\r\n\t\t\t\t\t\t// $scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t\t\t$scope.networks = data.networks;\r\n\t\t\t\t\t\toldData.network = $scope.data.network = $scope.networks.filter(function(data){ return data.id===templateInfor.nets[0].network_id })[0];\r\n\t\t\t\t\t\tgetSubnets($scope.data.network,templateInfor.nets[0].subnet_id, true);\r\n\t\t\t\t\t})\r\n\t\t\t\t\toldData.enable_gpu = $scope.data.enable_gpu= templateInfor.enable_gpu;\r\n\t\t\t\t\toldData.vcpus = $scope.data.vcpus= templateInfor.vcpus;\r\n\t\t\t\t\toldData.ram = $scope.data.ram= templateInfor.ram/1024;\r\n\t\t\t\t\toldData.system_alloc_disk = $scope.data.system_alloc_disk= templateInfor.system_alloc_disk;\r\n\t\t\t\t\toldData.data_alloc_disk = $scope.data.data_alloc_disk= templateInfor.data_alloc_disk;\r\n\t\t\t\t\toldData.data_alloc_disk_2 = $scope.data.data_alloc_disk_2= templateInfor.data_alloc_disk_2;\r\n\t\t\t\t\t$scope.old_data_alloc_disk = templateInfor.data_alloc_disk;\r\n\t\t\t\t\t$scope.old_data_alloc_disk_2 = templateInfor.data_alloc_disk_2;\r\n\t\t\t\t})\r\n\t\t\t\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t\t\t\t$scope.oldData = angular.copy($scope.data);\r\n\t\t\t\t$scope.isUnchanged = function(){\r\n\t\t\t\t\treturn angular.equals(oldData,$scope.data)\r\n\t\t\t\t}\r\n\t\t\t\t$scope.reset = function(){\r\n\t\t\t\t\tif(oldData.bind_ip_type.value!=='none'){\r\n\t\t\t\t\t\t$scope.types = $scope.types2;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.types = $scope.types1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.data = angular.copy(oldData);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t// if($scope.data.system_alloc_disk < oldData.system_alloc_disk || $scope.data.data_alloc_disk_2 < oldData.data_alloc_disk_2 || $scope.data.data_alloc_disk < oldData.data_alloc_disk){\r\n\t\t\t\t\t// \t$.bigBox({\r\n\t\t\t\t\t// \t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t// \t\t\tcontent : $$$I18N.get(\"modifyTemTip\"),\r\n\t\t\t\t\t// \t\t\ttimeout : 6000\r\n\t\t\t\t\t// \t\t});\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t// else{\r\n\t\t\t\t\t\t$scope.submit_loading = true;\r\n\t\t\t\t\t\ttmpl.modify({\r\n\t\t\t\t\t\t\timage_id: item.id,\r\n\t\t\t\t\t\t\tinstance_id: item.instance_id,\r\n\t\t\t\t\t\t\ttemplate_name: $scope.data.name,\r\n\t\t\t\t\t\t\tdescription: $scope.data.description,\r\n\t\t\t\t\t\t\tnetwork: $scope.data.network.id,\r\n\t\t\t\t\t\t\tsubnet: $scope.data.subnet?$scope.data.subnet.id:\"\",\r\n\t\t\t\t\t\t\tband_ip: $scope.data.bind_ip_type.value === 'static' ? $scope.data.band_ip:undefined,\r\n\t\t\t\t\t\t\tband_type: $scope.data.bind_ip_type.value,\r\n\t\t\t\t\t\t\tvcpus: $scope.data.vcpus,\r\n\t\t\t\t\t\t\tram: $scope.data.ram,\r\n\t\t\t\t\t\t\tenable_gpu: item.virtual_type=='hyper-v' && !item.disabled_gpu ? $scope.data.enable_gpu : undefined,\r\n\t\t\t\t\t\t\tgpu_auto_assignment: item.virtual_type=='kvm' && !item.disabled_gpu ? $scope.data.enable_gpu : undefined,\r\n\t\t\t\t\t\t\tsystem_alloc_disk: $scope.data.system_alloc_disk,\r\n\t\t\t\t\t\t\tdata_alloc_disk: $scope.data.data_alloc_disk,\r\n\t\t\t\t\t\t\tdata_alloc_disk_2: $scope.data.data_alloc_disk_2\r\n\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t$scope.submit_loading = false;\r\n\t\t\t\t\t\t\ttmpl.query(function(res){\r\n\t                    \t\t_controllerScope.allrows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t                \t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n        \t\t\t\t\t\t\tif(_controllerScope.select === 'all'){\r\n        \t\t\t\t\t\t\t\treturn item;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t\telse{\r\n        \t\t\t\t\t\t\t\treturn item.virtual_type === _controllerScope.select;\r\n        \t\t\t\t\t\t\t}\r\n        \t\t\t\t\t\t});\r\n\t                    \t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t                    \t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t                    \t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t                    \t});\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t},function(){ $scope.submit_loading = false; });\r\n\t\t\t\t\t// }\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.resetTemp = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='重置模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='REST_TEMP_TIP' ></p><footer class='text-right' style='margin-top:20px;'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\ttmpl.reset({ image_id: item.id },\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.imgManage = function(IMG){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_imgManage.html\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.imgType = IMG.virtual_type;\r\n\t\t\t\tfunction formLocalData(dataResource){\r\n\t\t\t\t\tlet arry = []; \r\n\t\t\t\t\tdataResource.forEach(function(item){\r\n\t\t\t\t\t\tif(!arry[item.host_ip]){\r\n\t\t\t\t\t\t\tlet obj = {host_ip: item.host_ip, hostname: item.hostname, resource_pool_uuid: item.resource_pool_uuid, storages: []};\r\n\t\t\t\t\t\t\tarry[item.host_ip] = obj;\r\n\t\t\t\t\t\t\tarry.push(obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\tlet hostArry = dataResource.filter(function(data){ return data.host_ip == item.host_ip });\r\n\t\t\t\t\t\thostArry.forEach(function(data){\r\n\t\t\t\t\t\t\tif(!item.storages[data.storage_name]){\r\n\t\t\t\t\t\t\t\tlet obj = {storage_name: data.storage_name, storage_uuid: data.storage_uuid, storage_type: data.storage_type, imgs: []};\r\n\t\t\t\t\t\t\t\titem.storages[data.storage_name] = obj;\r\n\t\t\t\t\t\t\t\titem.storages.push(obj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\titem.storages.forEach(function(data){\r\n\t\t\t\t\t\t\tlet storageArry = dataResource.filter(function(d){ return item.host_ip == d.host_ip && d.storage_name == data.storage_name });\r\n\t\t\t\t\t\t\tstorageArry.forEach(function(d){\r\n\t\t\t\t\t\t\t\tdata.imgs.push({image_uuid: d.image_uuid, image_type: d.image_type, image_type_desc: d.image_type_desc, has_image: d.has_image, has_instance: d.has_instance, volume_type: d.volume_type, volume_uuid: d.volume_uuid, volume_status: d.volume_status})\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\titem.storages.sort(function(a,b){ return a.storage_name>b.storage_name?1:-1 });\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn arry;\r\n\t\t\t\t};\r\n\t\t\t\tfunction formRemoteData(dataResource){\r\n\t\t\t\t\tlet arry = []; \r\n\t\t\t\t\tdataResource.forEach(function(item){\r\n\t\t\t\t\t\tif(!arry[item.storage_name+\"_remote\"]){\r\n\t\t\t\t\t\t\tlet obj = {storage_name: item.storage_name, storage_uuid: item.storage_uuid, storage_type: item.storage_type, host_ip: item.host_ip, imgs: []};\r\n\t\t\t\t\t\t\tarry[item.storage_name+\"_remote\"] = obj;\r\n\t\t\t\t\t\t\tarry.push(obj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tarry.forEach(function(item){\r\n\t\t\t\t\t\tlet imgArry = dataResource.filter(function(d){ return item.storage_name == d.storage_name });\r\n\t\t\t\t\t\timgArry.forEach(function(d){\r\n\t\t\t\t\t\t\titem.imgs.push({image_uuid: d.image_uuid, image_type: d.image_type, image_type_desc: d.image_type_desc, has_image: d.has_image, has_instance: d.has_instance, volume_type: d.volume_type, volume_uuid: d.volume_uuid, volume_status: d.volume_status})\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn arry;\r\n\t\t\t\t};\r\n\t\t\t\tfunction getLocal(resource_pool_uuid){\r\n\t\t\t\t\t$scope.local_loading = true;\r\n\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'local', resource_pool_uuid: resource_pool_uuid},function(res){\r\n\t\t\t\t\t\t$scope.local_loading = false;\r\n\t\t\t\t\t\t$scope.locals = formLocalData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t$scope.local_loading = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tfunction getRemote(){\r\n\t\t\t\t\t$scope.remote_loading = true;\r\n\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'remote'},function(res){\r\n\t\t\t\t\t\tconsole.log(res.result);\r\n\t\t\t\t\t\t$scope.remote_loading = false;\r\n\t\t\t\t\t\t$scope.remotes = formRemoteData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t},function(err){\r\n\t\t\t\t\t\t$scope.remote_loading = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\tvar new_pool = {};\r\n\t\t\t\tgetRemote();\r\n\t\t\t\tResourcePool.query(function(res){\r\n\t\t\t\t\t$scope.pools = res.result.filter(function(p){ return p.type == IMG.virtual_type });\r\n\t\t\t\t\tnew_pool = $scope.pool = $scope.pools[0];\r\n\t\t\t\t\tgetLocal($scope.pool.uuid);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$scope.getlocalImages = function(pool){\r\n\t\t\t\t\tnew_pool = pool;\r\n\t\t\t\t\tgetLocal(pool.uuid);\r\n\t\t\t\t};\r\n\t\t\t\t$scope.$on(\"syncTempl\", function($event, data){\r\n\t\t\t\t\tvar updateVolume = data.filter(function(item){ return item.id==IMG.id })[0].volume;\r\n\t\t\t\t\tif(updateVolume.length!==0){\r\n\t\t\t\t\t\tupdateVolume.forEach(function(volume){\r\n\t\t\t\t\t\t\tif(volume.storage_type=='local'){\r\n\t\t\t\t\t\t\t\t$scope.locals && $scope.locals.forEach(function(local){\r\n\t\t\t\t\t\t\t\t\tlocal.storages.forEach(function(storage){\r\n\t\t\t\t\t\t\t\t\t\tstorage.imgs.forEach(function(img){\r\n\t\t\t\t\t\t\t\t\t\t\tif(img.volume_uuid==volume.volume_uuid){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.volume_status = volume.volume_status;\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='available'){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='deleted'){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$scope.remotes && $scope.remotes.forEach(function(remote){\r\n\t\t\t\t\t\t\t\t\tremote.imgs.forEach(function(img){\r\n\t\t\t\t\t\t\t\t\t\tif(img.volume_uuid==volume.volume_uuid){\r\n\t\t\t\t\t\t\t\t\t\t\timg.volume_status = volume.volume_status;\r\n\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='available'){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = true;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tif(volume.volume_status=='deleted'){\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.has_image = false;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.sendImg = function(storage_type, resource_pool_uuid, image_type, image_uuid, storage_uuid, img, pool){\r\n\t\t\t\t\timg.volume_status = 'sending';\r\n\t\t\t\t\tmanageTemplate.handout({\r\n\t\t\t\t\t\tid: IMG.id,\r\n\t\t\t\t\t\tresource_pool_uuid: storage_type=='local'?resource_pool_uuid:undefined,\r\n\t\t\t\t\t\timage_type: image_type,\r\n\t\t\t\t\t\timage_uuid: image_uuid,\r\n\t\t\t\t\t\tstorage_uuid: storage_uuid,\r\n\t\t\t\t\t\tstorage_type: storage_type\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\tif(storage_type=='local'){\r\n\t\t\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'local', resource_pool_uuid: pool.uuid},function(res){\r\n\t\t\t\t\t\t\t\tvar newData = formLocalData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t\t\t\t$scope.locals.splice(0, $scope.locals.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply($scope.locals,newData);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tmanageTemplate.query({id: IMG.id, storage_type: 'remote'},function(res){\r\n\t\t\t\t\t\t\t\tvar newData = formRemoteData(res.result.sort(function(a,b){ return a.image_type>b.image_type?-1:1 }));\r\n\t\t\t\t\t\t\t\t$scope.remotes.splice(0, $scope.remotes.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply($scope.remotes,newData);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t// img.status = 'sended failed';\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.deleteImg = function(storage_type, volume_uuid, img, storage_uuid, pool){\r\n\t\t\t\t\tif(!img.has_instance){\r\n\t\t\t\t\t\timg.volume_status = 'deleting';\r\n\t\t\t\t\t\tmanageTemplate.delete({\r\n\t\t\t\t\t\t\tstorage_type: storage_type,\r\n\t\t\t\t\t\t\tid: IMG.id,\r\n\t\t\t\t\t\t\tvolume_uuid: volume_uuid,\r\n\t\t\t\t\t\t\timage_uuid: img.image_uuid,\r\n\t\t\t\t\t\t\tstorage_uuid: storage_uuid\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\timg.volume_status = 'delete failed';\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.detail = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/template/template_detail.html\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\ttemplate.infor({ image_id: item.id }, function(infor){\r\n\t\t\t\t\t$scope.data = infor;\r\n\t\t\t\t\tfunction formData(obj){\r\n\t\t\t\t\t\tobj.imgs = [];\r\n\t\t\t\t\t\tfor(var i in obj){\r\n\t\t\t\t\t\t\tif(i!=='imgs'){\r\n\t\t\t\t\t\t\t\tvar img = {};\r\n\t\t\t\t\t\t\t\timg.location = i;\r\n\t\t\t\t\t\t\t\timg.volumeId = obj[i];\r\n\t\t\t\t\t\t\t\tobj.imgs.push(img);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(var i in $scope.data.inst_volumes){\r\n\t\t\t\t\t\tformData($scope.data.inst_volumes[i]);\r\n\t\t\t\t\t};\r\n\t\t\t\t\tnetwork.query(function(data){\r\n\t\t\t\t\t\t$scope.data.network = data.networks.filter(function(data){ return data.id===infor.nets[0].network_id })[0];\r\n\t\t\t\t\t\tif(infor.nets[0].subnet_id){\r\n\t\t\t\t\t\t\tnetwork.query_sub({id: infor.nets[0].network_id }, function(res){\r\n\t\t\t\t\t\t\t\tvar subnet = res.result.filter(function(data){ return data.id === infor.nets[0].subnet_id })[0];\r\n\t\t\t\t\t\t\t\t$scope.data.subnet = subnet.name +\" (\"+ subnet.start_ip + \"~\" + subnet.end_ip +\")\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}, function(){});\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}])\r\n\r\n.controller(\"addPersonalTemplateDialog\", [\r\n\"$scope\", \"$modalInstance\", \"PersonTemplate\", \"HardwareTemplate\", \"SystemISO\", \"Admin\", \"$$$os_types\",\"$$$I18N\", \"UserRole\",\"Network\", \"virtualHost\", \"networkWithHost\", \"checkIP\",\r\nfunction($scope, $modalInstance, personal, hardware, iso, admin, $$$os_types,$$$I18N, UserRole, network, virtualHost, networkWithHost, checkIP){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.auto_isos = [];$scope.all_isos = [];\r\n\t$scope.iso = [];\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types[0];\r\n\tadmin.query(function(res){\r\n\t\t$scope.users = res.users;\r\n\t\tangular.forEach($scope.users, function(item){\r\n\t\t\tif(item.name == user.name)\r\n\t\t\t\t$scope.owner = item;\r\n\t\t});\r\n\t\tif(!$scope.owner) $scope.owner = $scope.users[0]\r\n\t});\r\n\thardware.query(function(res){\r\n\t\t$scope.hardware_templates = res.result;\r\n\t\t$scope.template = $scope.hardware_templates[0];\r\n\t});\r\n\tiso.query(function(res){\r\n\t\t$scope.all_isos = res.isos.filter(function(iso){ return iso.type && iso.type!==\"package\" && iso.type!==\"other\"; });\r\n\t\t$scope.all_isos.forEach(function(item){\r\n\t\t\titem.os_type = item.os_type.split(\",\");\r\n\t\t});\r\n\t\t$scope.isos = $scope.all_isos;\r\n\t\t$scope.iso = [$scope.isos[0]];\r\n\t\tangular.forEach($scope.isos, function(item){\r\n\t\t\tif(item.support_auto_install == true)\r\n\t\t\t\t$scope.auto_isos.push(item);\r\n\t\t})\r\n\t});\r\n\r\n\t$scope.type = 'kvm';\r\n\t$scope.enable_gpu = false;\r\n\t$scope.getVirtualHost = function (type){\r\n\t\tvar _this = this;\r\n\t\t$scope.host_loading = true;\r\n\t\tvar data = {};\r\n\t\tdata.type = type;\r\n\t\tif(type=='hyper-v'){\r\n\t\t\tdata.enable_gpu = _this.enable_gpu;\r\n\t\t\t_this.gpu_auto_assignment = false;\r\n\t\t}else{\r\n\t\t\tdata.enable_gpu = _this.gpu_auto_assignment;\r\n\t\t\t_this.enable_gpu = false;\r\n\t\t}\r\n\t\tvirtualHost.query(data,function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t_this.host = $scope.hosts[0];\r\n\t\t\t_this.host && $scope.getNetwork(_this.host);\r\n\t\t},function(){\r\n\r\n\t\t});\r\n\t}\r\n\t$scope.getVirtualHost($scope.type);\r\n\t\r\n\t// function getIps(subnet_id, _scope){\r\n\t// \tif(subnet_id){\r\n\t// \t\tnetwork.ports({ id: subnet_id },function(res){\r\n\t// \t\t\tif(res.unused_ips.length){\r\n\t// \t\t\t\t_scope.band_ips = res.unused_ips;\r\n\t// \t\t\t}\r\n\t// \t\t\telse{\r\n\t// \t\t\t\t_scope.band_ips = [\"无可用IP\"];\r\n\t// \t\t\t}\r\n\t// \t\t\t_scope.bind_ip = _scope.band_ips[0];\r\n\t// \t\t\t_scope.bind_ip_loading = false;\r\n\t// \t\t})\r\n\t// \t}\r\n\t// };\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope);\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[0];\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\t};\r\n\t$scope.getNetwork = function(host){\r\n\t\tif(host){\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope);\r\n\t\t\t}, function(){});\r\n\t\t}\r\n\t}\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\t$scope.names = $scope.rows.map(function(item){ return item.name });\r\n\t$scope.sameName = false;\r\n\tvar _scope = $scope;\r\n\t$scope.install = \"manualinstall\";\r\n\t$scope.isOther = false;\r\n\t$scope.$on(\"selectStepChange\", function(e, arg){\r\n\t\tif(arg.index==0){\r\n\t\t\targ.stepScope.$$nextSibling.error = false;\r\n\t\t}\r\n\t})\r\n\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\t_scope.type = scope.type;\r\n\t\tvar flag = false;\r\n\t\t_scope.names.forEach(function(item){\r\n\t\t\tif(scope.name == item){ flag = true; }\r\n\t\t})\r\n\t\tif(flag){\r\n\t\t\t_scope.sameName = true;\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"WRONG_NAME\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse { _scope.sameName = false; }\r\n\t\tstep.done = !scope.step_pane0.$invalid && !_scope.sameName && !scope.network_loading;\r\n\r\n\t\tif(step.done && scope.$$childTail && scope.$$childTail.bind_ip){\r\n\t\t\tstep.showLoading = true;\r\n\t\t\tstep.done = false;\r\n\t\t\tcheckIP.check({ip: scope.$$childTail.bind_ip, subnet_id: scope.subnet.id},function(res){\r\n\t\t\t\tif(!res.result){\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n\t\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.$broadcast(\"currentStepChange\", 1);\r\n\t\t\t\t}\r\n\t\t\t\tstep.showLoading = false;\r\n\t\t\t},function(error){ step.showLoading = false; });\r\n\t\t}\r\n\t});\r\n\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\tif(scope.template.system_gb == 0)\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent\t: $$$I18N.get(\"模板系统盘不能为0\"),\r\n\t\t\t\t\tcolor\t: \"#C46A69\",\r\n\t\t\t\t\ticon\t: \"fa fa-warning shake animated\",\r\n\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t});\r\n\t\tstep.done = !(scope.template.system_gb == 0);\r\n\t});\r\n\t$scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(\"[rel=popover-hover]\").popover({\r\n\t\t\t\ttrigger : \"hover\"\r\n\t\t\t});\r\n\t\t})\r\n\t\t_scope.install = scope.install;\r\n\t\tif(scope.iso != undefined && scope.iso[0] != undefined){\r\n\t\t\tif(scope.iso[0].os_type[0] == 'other'){\r\n\t\t\t\t_scope.isOther = true;\r\n\t\t\t\tscope.$parent.system_versions = $$$os_types;\r\n\t\t\t\tscope.$parent.system_version1 = scope.$parent.system_versions[0];\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar _types = [];\r\n\t\t\t\tscope.iso[0].os_type.forEach(function(item){\r\n\t\t\t\t\tvar _obj = {};\r\n\t\t\t\t\t_obj.key = item;\r\n\t\t\t\t\t_obj.value = item;\r\n\t\t\t\t\t_types.push(_obj);\r\n\t\t\t\t})\r\n\t\t\t\tscope.$parent.system_versions = _types;\r\n\t\t\t\tscope.$parent.system_version1 = _types[0];\r\n\t\t\t}\r\n\t\t}\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = (scope.iso != undefined && scope.iso[0] != undefined);\r\n\t\t\r\n\t});\r\n\tvar newWindow;\r\n\tvar FLAG = false;\r\n\tfunction gotoUrl(val){\r\n\t\tif(val){\r\n\t\t\tnewWindow = window.open('templateModify.html#0');\r\n\t\t\t// newWindow = window.open('js/vdi-spice/spiceModify.html#?id=0');\r\n\t\t}\r\n\t}\r\n\tsetTimeout(function(){\r\n\t\t$(\"#finish\").on('click',function(){\r\n\t\t    gotoUrl(FLAG);\r\n\t\t})\r\n\t})\r\n\r\n\t$scope.$on(\"WizardStep_3\", function(e, step, scope){\r\n\t\tif(scope.step_pane3.$invalid){\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\tstep.done = false;\r\n\t\t}\r\n\t\telse if(scope.userPassword && scope.userPasswordConfirm && scope.userPassword !== scope.userPasswordConfirm){\r\n\t\t\tstep.done = false;\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"两次输入密码不一致\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t\tstep.done = true;\r\n\t\tFLAG = step.done;\r\n\t});\r\n\t$scope.$on(\"WizardDone\", function(e, steps, scopes){\r\n\t\tvar auto_install = scopes[2].install === \"autoinstall\" ? true : false;\r\n\t\tvar _ip = scopes[0].bind_ip_type.value === 'static' ? scopes[0].$$childHead.bind_ip : undefined;\r\n\t\tvar testWin10 = /Windows10/;\r\n\t\tvar item = {\r\n\t\t\ttemplate_name: scopes[0].name,\r\n\t\t\tdescription: scopes[0].description,\r\n\t\t\towner: scopes[0].owner.id,\r\n\t\t\ttype_code : 2,\r\n\t\t\tvcpus: scopes[1].template.cpu_num,\r\n\t\t\tsystem_gb: scopes[1].template.system_gb,\r\n\t\t\tlocal_gb: scopes[1].template.local_gb,\r\n\t\t\tmemory_mb: scopes[1].template.memory_mb,\r\n\t\t\tiso_path:scopes[2].iso[0].name,\r\n\t\t\tiso_id:scopes[2].iso[0].id,\r\n\t\t\tos_type: scopes[3].system_version1.key,\r\n\t\t\tinstance_type: scopes[1].template.id,\r\n\t\t\tauto_install: auto_install,\r\n\t\t\tnetwork: scopes[0].network.id,\r\n\t\t\tsubnet: scopes[0].subnet?scopes[0].subnet.id:'',\r\n\t\t\tband_ip: _ip,\r\n\t\t\tband_type: scopes[0].bind_ip_type.value,\r\n\t\t\tkey:scopes[3].key,\r\n\t\t\tusername:scopes[3].userName,\r\n\t\t\tuserPassword:scopes[3].userPassword,\r\n\t\t\tuserPasswordConfirm:scopes[3].userPasswordConfirm,\r\n\t\t\tvirtual_type: scopes[0].type,\r\n\t\t\tenable_gpu: scopes[0].type == 'hyper-v'? scopes[0].enable_gpu:undefined,\r\n\t\t\tgpu_auto_assignment: scopes[0].type == 'kvm'? scopes[0].gpu_auto_assignment:undefined,\r\n\t\t\tfirmware_type: scopes[0].type == 'kvm' && testWin10.test(scopes[3].system_version1.key)?'uefi':undefined,\r\n\r\n\t\t\thost_uuid: scopes[0].host.host_uuid\r\n\t\t};\r\n\t\tfunction updateTem(isSuccess){\r\n\t\t\tpersonal.query(function(res){\r\n\t\t\t\t$scope.allrows.splice(0, $scope.allrows.length);\r\n\t\t\t\tArray.prototype.push.apply($scope.allrows,res.win_images.concat(res.linux_images).concat(res.other_images));\r\n\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n\t\t\t\t\tif($scope.select === 'all'){\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\treturn item.virtual_type === scopes[0].type;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t});\r\n\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\t\t\t\t// if(!auto_install){\r\n\t\t\t\t\tvar template = $scope.rows.filter(function(temp){ return temp.name ==  item.template_name})[0];\r\n\t\t\t\t\tif(template && isSuccess){\r\n\t\t\t\t\t\tif(scopes[0].type == \"hyper-v\"){\r\n\t\t\t\t\t\t\tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModify_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name + '&personal');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModifybt_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name + '&personal');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModify.html#' + template.id + '&' + template.os_type + '&' + template.name + '&personal');\r\n\t\t\t\t\t\t\t\tnewWindow.location.reload();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnewWindow.location.replace('templateModifybt.html#' + template.id + '&' + template.os_type + '&' + template.name + '&personal');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// if(scopes[0].type == \"hyper-v\"){\r\n\t\t\t\t\t\t// \tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t// \t\t// newWindow.location.replace('templateModify_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t// \t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t// \t\tnewWindow.location.replace('js/vdi-spice/spiceModify_rdp.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \telse{\r\n\t\t\t\t\t\t// \t\t// newWindow.location.replace('templateModifybt_rdp.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t// \t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t// \t\tnewWindow.location.replace('js/vdi-spice/spiceModifybt_rdp.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// else{\r\n\t\t\t\t\t\t// \tif(res.sync_mode==='scp'){\r\n\t\t\t\t\t\t// \t\t// newWindow.location.replace('templateModify.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t// \t\t// newWindow.location.reload();\r\n\t\t\t\t\t\t// \t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t// \t\tnewWindow.location.replace('js/vdi-spice/spiceModify.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t// \t\tnewWindow.location.reload();\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// \telse{\r\n\t\t\t\t\t\t// \t\t// newWindow.location.replace('templateModifybt.html#' + template.id + '&' + template.os_type + '&' + template.name);\r\n\t\t\t\t\t\t// \t\t//novnc-->spice-html5\r\n\t\t\t\t\t\t// \t\tnewWindow.location.replace('js/vdi-spice/spiceModifybt.html#?id=' + template.id + '&os_type=' + template.os_type + '&name=' + encodeURIComponent(template.name)+\"&instance_id=\"+template.instance_id);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t}\r\n\t\t\t\t// }\r\n\t\t\t});\r\n\t\t};\r\n\t\te.targetScope.currentStep.showLoading = true;\r\n\t\t$modalInstance.close();\r\n\t\tpersonal.save(item, function(res){ updateTem(true); }, function(){ newWindow.close(); updateTem(); }).$promise.finally(function(){\r\n\t\t\te.targetScope.currentStep.showLoading = false;\r\n\t\t});;\r\n\t});\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.cpu_num = 1;\r\n}])\r\n\r\n.controller(\"registerPersonalTemplateDialog\", [\r\n\"$scope\", \"$modalInstance\", \"Admin\", \"registerTemplate\", \"PersonTemplate\", \"$$$os_types\", \"UserRole\", \"Network\", \"virtualHost\",\"networkWithHost\", \"$$$I18N\",\r\nfunction($scope, $modalInstance, admin, registerTemplate, personal, $$$os_types, UserRole, network, virtualHost, networkWithHost, $$$I18N){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.type = '2';\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types2[0];\r\n\tadmin.query(function(res){\r\n\t\t$scope.users = res.users;\r\n\t\tangular.forEach($scope.users, function(item){\r\n\t\t\tif(item.name === user.name)\r\n\t\t\t\t$scope.owner = item;\r\n\t\t})\r\n\t});\r\n\tregisterTemplate.query(function(res){\r\n\t\t$scope.sys_isos = res.system_image;\r\n\t\t$scope.sys_iso = res.system_image[0];\r\n\t\t$scope.old_data_isos = res.data_image;\r\n\t\tif($scope.sys_iso){\r\n\t\t\t$scope.getDataImgs($scope.sys_iso);\r\n\t\t}\r\n\t})\r\n\t$scope.filterDataISO = function(data_iso, data_iso2){\r\n\t\tif(data_iso){\r\n\t\t\t$scope.data_isos2 = $scope.data_isos.filter(function(item){ return item.name !== data_iso.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos2 = $scope.data_isos;\r\n\t\t}\r\n\t\tif(data_iso2){\r\n\t\t\t$scope.data_isos1 = $scope.data_isos.filter(function(item){ return item.name !== data_iso2.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos1 = $scope.data_isos;\r\n\t\t}\r\n\t};\r\n\t$scope.getDataImgs = function(systemImg){\r\n\t\tif(systemImg){\r\n\t\t\tthis.data_iso = undefined;\r\n\t\t\tthis.data_iso2 = undefined;\r\n\t\t\t$scope.data_isos = $scope.data_isos2 = $scope.data_isos1 = $scope.old_data_isos.filter(function(item){ return item.virtual_type == systemImg.virtual_type });\r\n\t\t\t// $scope.data_iso = $scope.data_isos[0];\r\n\t\t\t// $scope.data_iso2 = $scope.data_isos[0];\r\n\t\t\t$scope.getVirtualHost(systemImg.virtual_type, systemImg.rbd_enabled);\t\t\t\r\n\t\t}\r\n\t};\r\n\t$scope.getVirtualHost = function (type, rbd_enabled){\r\n\t\t$scope.host_loading = true;\r\n\t\tvirtualHost.query({\r\n\t\t\tvirtual_type: type,\r\n\t\t\trbd_enabled: rbd_enabled\r\n\t\t\t// enable_gpu: type == 'hyper-v'?enable_gpu:undefined\r\n\t\t},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t$scope.getNetwork($scope.host);\r\n\t\t},function(){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.os_types = $$$os_types.filter(function(item){ return item.key!==\"package\" });\r\n\t$scope.os_type = $scope.os_types[0];\r\n\t// $scope.enable_gpu = false;\r\n\t$scope.bind_ip = {value: null};\r\n\r\n\t// function getIps(subnet_id, _scope){\r\n\t// \tif(subnet_id){\r\n\t// \t\tnetwork.ports({ id: subnet_id },function(res){\r\n\t// \t\t\tif(res.unused_ips.length){\r\n\t// \t\t\t\t_scope.band_ips = res.unused_ips;\r\n\t// \t\t\t}\r\n\t// \t\t\telse{\r\n\t// \t\t\t\t_scope.band_ips = [\"无可用IP\"];\r\n\t// \t\t\t}\r\n\t// \t\t\t_scope.bind_ip = _scope.band_ips[0];\r\n\t// \t\t\t_scope.bind_ip_loading = false;\r\n\t// \t\t})\r\n\t// \t}\r\n\t// };\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope)\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[0];\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t}, function(){ $scope.network_loading = false; })\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\t};\r\n\t$scope.getNetwork = function(host){\r\n\t\tif(host){\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope);\r\n\t\t\t}, function(){});\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar bindIP = this.bind_ip.value;\r\n\t\t// if(this.bind_ip_type.value === 'static' && this.bind_ip === '无可用IP'){\r\n\t\t// \t$.bigBox({\r\n\t\t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t// \t\tcontent\t: $$$I18N.get(\"hasStaticIP_TIP\"),\r\n\t\t// \t\ttimeout\t: 6000\r\n\t\t// \t});\r\n\t\t// }\r\n\t\t// else{\r\n\t\t\t$scope.submiting = true ;\r\n\t\t\t$scope.afterSubmiting =false ;\r\n\t\t\tvar _ip = this.bind_ip_type.value === 'static' ? bindIP : undefined;\r\n\t\t\tvar postData = {\r\n\t\t\t\tsystem_image_file: this.sys_iso,\r\n\t\t\t\tdata_image_file: this.data_iso?this.data_iso:undefined,\r\n\t\t\t\tdata_image_file_2: this.data_iso2?this.data_iso2:undefined,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tdescription: this.description,\r\n\t\t\t\ttype_code: this.type,\r\n\t\t\t\tos: this.os_type.key,\r\n\t\t\t\tis_64: this.os_type.value.indexOf(\"64 bit\")>-1?true: false,\r\n\t\t\t\towner: this.owner.id,\r\n\t\t\t\tnetwork: this.network.id,\r\n\t\t\t\tsubnet: this.subnet?this.subnet.id:'',\r\n\t\t\t\tband_ip: _ip,\r\n\t\t\t\tband_type: this.bind_ip_type.value,\r\n\t\t\t\thost_uuid: this.host.host_uuid,\r\n\t\t\t\tusername: this.sys_iso.virtual_type=='hyper-v'?this.username:undefined,\r\n\t\t\t\tuserPassword: this.sys_iso.virtual_type=='hyper-v'?this.userPassword:undefined,\r\n\t\t\t\tuserPasswordConfirm: this.sys_iso.virtual_type=='hyper-v'?this.userPasswordConfirm:undefined\r\n\t\t\t\t// enable_gpu: this.sys_iso.virtual_type == 'hyper-v'?this.enable_gpu:undefined\r\n\t\t\t};\r\n\t\t\tconsole.log(postData)\r\n\t\t\tregisterTemplate.update(postData, function(res){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t\tpersonal.query(function(res){\r\n\t\t\t\t\t$scope.allrows.splice(0, $scope.allrows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.allrows,res.win_images.concat(res.linux_images).concat(res.other_images));\r\n\t\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images).filter(function(item){\r\n\t\t\t\t\t\tif($scope.select === 'all'){\r\n\t\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\treturn item.virtual_type === $scope.select;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\t\t\t\t});\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},function(){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t// }\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/template/controller.person.js","angular.module(\"vdi.template.hardware\", [\"vdi.template\"])\r\n\r\n.factory(\"HardwareTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/hardwares\", isArray: false },\r\n\t\t\"delete\":\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/image/hardwares\" },\r\n\t\tsave:\r\n\t\t\t{ method: \"POST\",url: $Domain + \"/thor/image/hardwares\" },\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/hardwares/:id\", params: { id: \"@id\"}, isArray: false },\r\n\t\tupdate:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/image/hardware/:id\", params: { id: \"@id\"}, isArray: false },\r\n\t\t// 过滤模板\r\n\t\tfilter:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/image/hardwares\"}\r\n\t});\r\n}])\r\n\r\n.controller(\"vdiTemplateHardwareListController\", [\"$scope\", \"$modal\", \"HardwareTemplate\", function($scope, $modal, hardware){\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\tvar _controllerScope = $scope;\r\n\thardware.query(function(res){\r\n\t\t$scope.rows = res.result;\r\n\t\t$scope.loading = false;\r\n\t});\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [30,20,10];\r\n    $scope.pagesize = $scope.pagesizes[0];\r\n\t\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除硬件模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_TEMPLATE_H' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.name = rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\thardware.delete(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"instance_type_id\": rows.map(function(item){ return item.id })\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\t\thardware.query(function(res){\r\n\t\t\t\t\t\t\t\tvar newRows = res.result;\r\n\t\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(error){\r\n\t\t\t\t\t\t\thardware.query(function(res){\r\n\t\t\t\t\t\t\t\tvar newRows = res.result;\r\n\t\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n\r\n.controller(\"addHardwareTemplateDialog\", [\"$scope\", \"$modalInstance\",\"HardwareTemplate\",function($scope,$modalInstance,hardware){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = {\r\n\t\tcpu_num:1,\r\n\t\tmemory_mb:1,\r\n\t\tsystem_gb:10\r\n\t\t// system_disk_type: \"2\",\r\n\t\t// local_disk_type: \"3\"\r\n\t};\r\n\t$scope.btndisks = [];\r\n\t// $scope.data.system_disk_type = \"2\";$scope.data.local_disk_type = \"3\";\r\n\tvar _controllerScope = $scope;\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\thardware.save({\r\n\t\t\t\t\"name\" : this.data.name,\r\n\t\t\t\t\"cpu_num\" : this.data.cpu_num,\r\n\t\t\t\t\"memory_mb\": this.data.memory_mb*1024,\r\n\t\t\t\t\"system_gb\" :this.data.system_gb,\r\n\t\t\t\t\"local_gb\" : this.btndisks[0]?this.btndisks[0].local_gb:0,\r\n\t\t\t\t\"local_gb1\" : this.btndisks[1]?this.btndisks[1].local_gb:0\r\n\t\t\t\t// \"system_disk_type\": this.data.system_disk_type,\r\n\t\t\t\t// \"local_disk_type\": this.data.local_disk_type\r\n\t\t\t},\r\n\t\t\tfunction(data){\r\n\t\t\t\t// $scope.rows.unshift({\r\n\t\t\t\t// \tid: data.id,\r\n\t\t\t\t// \tname : _this.data.name,\r\n\t\t\t\t// \tcpu_num : _this.data.cpu_num,\r\n\t\t\t\t// \tmemory_mb: _this.data.memory_mb*1024,\r\n\t\t\t\t// \tsystem_gb : _this.data.system_gb,\r\n\t\t\t\t// \tlocal_gb : _this.data.local_gb,\r\n\t\t\t\t// \t\"system_disk_type\": _this.data.system_disk_type,\r\n\t\t\t\t// \t\"local_disk_type\": _this.data.local_disk_type\r\n\t\t\t\t// });\r\n\t\t\t\thardware.query(function(res){\r\n\t\t\t\t\tvar newRows = res.result;\r\n\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t});\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\r\n\t$scope.addbtndisk = function(){\r\n\t\t$scope.btndisks.push({local_gb: 5});\r\n\t};\r\n\t$scope.minusbtndisk = function(){\r\n\t\t// var idx = $scope.btndisks.indexOf(i)\r\n\t\t$scope.btndisks.splice($scope.btndisks.length-1,1);\r\n\t};\r\n\t\r\n}])\r\n\r\n.controller(\"editHardwareTemplateDialog\", [\"$scope\", \"$modalInstance\",\"HardwareTemplate\", function($scope, $modalInstance, hardware){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\t$scope.data = angular.copy(item);\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\t$scope.reset = function() {\r\n\t\t$scope.data = angular.copy($scope.item || $scope.currentItem);\r\n\t};\r\n\t$scope.edit = function(){\r\n\t\thardware.update(\r\n\t\t\t$scope.data,\r\n\t\t\tfunction(res){\r\n\t\t\t\titem.name = res.name;\r\n\t\t\t\titem.cpu_num = res.cpu_num;\r\n\t\t\t\titem.memory_mb = res.memory_mb;\r\n\t\t\t\titem.local_gb = res.local_gb;\r\n\t\t\t\titem.system_gb = res.system_gb;\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},\r\n\t\t\tfunction(){\r\n\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\r\n\t$scope.useNum=\"1\"\r\n\t$scope.btndisks = [];\r\n\t$scope.addharddisk = function(){\r\n\t\t$scope.useNum-=1\r\n\t\t$scope.btndisks.push(new String);\r\n\t};\r\n\t$scope.deleteharddisk = function(itemindex){\r\n\t\t$scope.useNum+=1\r\n\t\t$scope.btndisks.splice(itemindex, 1);\r\n\t};\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/template/controller.hardware.js","angular.module(\"vdi.user\", [])\r\n\r\n.constant('$$$UserRoles', \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\")\r\n\r\n.factory(\"UserRole\", [\"$$$UserRoles\", \"NavigatorLink\", \"$rootScope\", \"$$$UserRoles\", \"User\", function(roles, navigators, $root, $$$UserRoles, User){\r\n\tlet lastSessionPromise;\r\n\tlet lastRequestTime = 0;\r\n\tlet role = {\r\n\t\tgetNavigator(roles){\r\n\t\t\tif($$$storage.getSessionStorage(\"lang_code\") == 'pc')\r\n\t\t\t\tnavigators = navigators.filter(function(item){ return item.key !== 'Timetable' });\r\n\t\t\treturn navigators.reduce((userNavigators, role) => {\r\n\t\t\t\tif(roles.indexOf(role.key) > -1){\r\n\t\t\t\t\tlet role_copy = JSON.parse(JSON.stringify(role));\r\n\t\t\t\t\tuserNavigators.push(role_copy);\r\n\t\t\t\t\tif(role.sublist && role.sublist.length){\r\n\r\n\t\t\t\t\t\trole_copy.sublist = role.sublist.filter(role => roles.indexOf(role.key) > -1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn userNavigators;\r\n\t\t\t}, []);\r\n\t\t},\r\n\t\tget currentUser(){\r\n\t\t\tvar hasCache = !!$$$storage.getSessionStorage(\"loginInfo\");\r\n\t\t\tif(hasCache && Date.now() - lastRequestTime > 1000 * 60 * 5) {\r\n\t\t\t\tthis.refreshSession();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(hasCache){\r\n\t\t\t\treturn JSON.parse($$$storage.getSessionStorage(\"loginInfo\"));\r\n\t\t\t}\r\n\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tget logined(){\r\n\t\t\treturn Boolean($$$storage.getSessionStorage(\"loginInfo\"));\r\n\t\t},\r\n\t\tget currentUserRoles(){\r\n\t\t\tlet user = role.currentUser;\r\n\t\t\treturn user && user.keys ? user.keys.split(\",\").map(r => r.trim()) : [];\r\n\t\t},\r\n\t\tget isOwner(){\r\n\t\t\tlet user = role.currentUser;\r\n\t\t\treturn user && user.keys && user.keys===$$$UserRoles ? true:false;\r\n\t\t},\r\n\t\tget currentNavigator(){\r\n\t\t\treturn role.getNavigator(role.currentUserRoles);\r\n\t\t},\r\n\t\tget currentSession(){\r\n\t\t\treturn lastSessionPromise;\r\n\t\t},\r\n\t\tisAllowFilter(role){\r\n\t\t\tif(role.sublist && role.sublist.length){\r\n\t\t\t\trole.sublist.filter(isAllowFilter, this);\r\n\t\t\t}\r\n\t\t\treturn this.indexOf(role.key) > -1;\r\n\t\t},\r\n\t\trefreshSession(){\r\n\t\t\tlastSessionPromise = User.session({user_id: $$$storage.getSessionStorage(\"userId\")}).$promise;\r\n\t\t\tlastSessionPromise.then(function(res){\r\n\t\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\t\t// test--\r\n                // res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t\t});\r\n\t\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t\t});\r\n\t\t\tlastRequestTime = Date.now();\r\n\t\t\treturn lastSessionPromise;\r\n\t\t}\r\n\t};\r\n\treturn role;\r\n}])\r\n\r\n\r\n/* 用户 */\r\n.factory(\"Roles\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/user/permissions\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/permissions\", isArray: false},\r\n\t\tupdate:\r\n\t\t\t{method: \"PUT\", url: $Domain + \"/thor/user/permissions\" }\r\n\t});\r\n}])\r\n.factory(\"Admin\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/user/manager\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/manager\", isArray: false},\r\n\t\tupdate: \r\n\t\t\t{method: \"PUT\", url: $Domain + \"/thor/user/manager\" }\r\n\t});\r\n}])\r\n// .factory(\"User\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n// \treturn res($Domain + \"/thor/user/common\", null, {\r\n// \t\tquery:\r\n// \t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/common\", isArray: false},\r\n// \t\tupdate: \r\n// \t\t\t{method: \"PUT\", url: $Domain + \"/thor/user/common\" },\r\n// \t\tsession: {method: \"POST\", url: $Domain + \"/thor/user/session\"}\r\n// \t});\r\n// }])\r\n.factory(\"User\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/user/common\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/common\", isArray: false},\r\n\t\tedit: \r\n\t\t\t{method: \"PATCH\", url: $Domain + \"/thor/user/common/:id\", params: { \"id\": \"@id\" }, isArray:false},\r\n\t\tmove:\r\n\t\t\t{method: \"PATCH\", url: $Domain + \"/thor/user/common/move\"},\r\n\t\tquery_tree :\r\n\t\t\t{method: \"GET\", url: $Domain + \"/thor/user/common/tree\"},\r\n\t\tsession: {method: \"POST\", url: $Domain + \"/thor/user/session\"}\r\n\t});\r\n}])\r\n/**\r\n * [description 部门]\r\n */\r\n .factory(\"Depart\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/user/departments\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/departments\", isArray: false},\r\n\t\tadd: \r\n\t\t\t{method: \"POST\", url: $Domain + \"/thor/user/departments\" },\r\n\t\tupdate: \r\n\t\t\t{method: \"PATCH\", url: $Domain + \"/thor/user/departments/:id\", params: { \"id\": \"@id\" }, isArray:false},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/user/departments/:id\", params: { \"id\": \"@id\" }, isArray:false}\r\n\t});\r\n}])\r\n.factory(\"Server\", [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/user/server\", null, {\r\n\t\t// 读取域列表\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/server\"},\r\n\t\tget: \r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/info/:id\", params: { \"id\": \"@id\" }, isArray:false},\r\n\t\t// 修改域基本信息\r\n\t\tupdate: \r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/user/server\"},\r\n\t\t//新增域\r\n\t\tcreate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/user/server\"},\r\n\t\t\"delete\":\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/user/server/:id\", params: { \"id\": \"@id\" }, isArray:false},\r\n\t\tlistDomain:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/server/:id\", params: { \"id\": \"@id\" }},\r\n\r\n\t\t// 指定教学桌面设置域\r\n\t\t\"domain_set_scene\":\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/pool/mode/:id/change_domain\" , params:{\"id\": \"@id\"}},\r\n\t\t//个人桌面设置域\r\n\t\t\"domain_set_person\":\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/instances/change_domain\"}\r\n\t});\r\n}])\r\n.factory(\"Domain\", [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/user/domain/:id\", { \"id\": \"@id\" }, {\r\n\t\t// 域用户列表\r\n\t\tlist:\r\n\t\t\t{method: \"GET\", url: $Domain + \"/thor/user/get_users\"},\r\n\t\t// 查看特定域的用户信息\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/domain/:id\",params:{\"id\":\"@id\"}},\r\n\t\tasycing:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/user/domain/:id\", params: { \"auto\": \"@auto\" }, isArray: false},\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/user/domain/:id/ous\",params:{\"id\":\"@id\"}},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/user/common\",isArray: false}\r\n\t});\r\n}])\r\n\r\n\r\n.controller(\"vdiUserAdminManageController\", [\r\n\"$scope\", \"Admin\",\"$modal\", \"UserRole\", \"$$$I18N\",\r\nfunction($scope, UseradminList, $modal, UserRole, $$$I18N){\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.rows = [];\r\n\t// $scope.allRows = [];\r\n\t$scope.loading = true;\r\n\t$scope.owner = UserRole.isOwner;\r\n\t$scope.loginName = user.name;\r\n\t\r\n\tUseradminList.query(function(res){\r\n\t\tif(!$scope.owner){\r\n\t\t\t$scope.rows = res.users.filter(function(item){ return item.name == $scope.loginName });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.rows = res.users;\r\n\t\t}\r\n\t\t$scope.loading = false;\r\n\t\tvar _ip;\r\n\t\t$scope.rows.forEach(function(row){\r\n\t\t\tif(row.last_login !== null){\r\n\t\t\t\t_ip = row.last_login.split(\".\");\r\n\t\t\t\trow._ip = (_ip[0] << 16) + (_ip[1] << 8) + Number(_ip[2]) + (_ip[3] / 1000);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t_ip = null;\r\n\t\t\t\trow._ip = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// angular.copy($scope.rows,$scope.allRows);\r\n\t});\r\n\r\n    $scope.currentPage = 1;\r\n \t$scope.pagesize = Number($$$storage.getSessionStorage('admin_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('admin_pagesize', newvalue ? newvalue : 0)\r\n\t}); \r\n\r\n\t// $scope.updateData = function(text){\r\n\t// \t$scope.rows = $scope.allRows.filter(function(row){\r\n\t// \t\trow._selected = false;\r\n\t// \t\tif(text){\r\n\t// \t\t\treturn row.name.indexOf(text) !== -1;\r\n\t// \t\t}\r\n\t// \t\treturn true;\r\n\t// \t});\r\n\t// };\r\n\r\n    $scope.sortIP = function(order){\r\n    \t$scope.rows.sort(function(a, b){\r\n\t\t\treturn (a._ip > b._ip) ? 1 : -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n    };\r\n\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && !row._ignore; });\r\n\t\tvar nodelete_rows = selected_rows.filter(function(row){ return row.instance_num != 0; });\r\n\t\tvar delete_rows = selected_rows.filter(function(row){ return row.instance_num == 0; });\r\n\t\tvar rows = $scope.rows;\r\n\t\tif(delete_rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"ADMIN_TIP\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse \r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除用户'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='USER_TIPGROUP1' param1='{{name}}'></p><p style='margin-bottom:20px;' data-ng-if='nodelete_rows.length' data-localize='USER_TIPGROUP2' param1='{{nodeleteName}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.nodelete_rows = nodelete_rows;\r\n\t\t\t\t\t\t$scope.name = delete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t\t$scope.nodeleteName = nodelete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tUseradminList.delete({\r\n\t\t\t\t\t\t\t\tids: delete_rows.map(function(row){ return row.id; })\r\n\t\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t\tdelete_rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\t\tvar index = rows.indexOf(item);\r\n\t\t\t\t\t\t\t\t\trows.splice(index, 1);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t\t});\r\n\t};\r\n\r\n}])\r\n.controller(\"vdiUserCommonManageController\", [\r\n\"$scope\",\"User\",\"$modal\", \"$http\", \"$$$MSG\", \"$$$I18N\", \"$Domain\",\"$timeout\",\"customModal\", \"Depart\",\"User\",\"UserRole\",\"$location\",\r\nfunction($scope, UsercommonList, $modal, $http, $$$MSG, $$$I18N, $Domain,$timeout,customModal,Depart,User,UserRole,$location){\r\n\tvar _scope = $scope;\r\n\t$scope.rows = [];\r\n\tvar WIDTH = $$$I18N.get(\"GOD_VERSION\") == \"cloudClassEn\" || $$$I18N.get(\"GOD_VERSION\") == \"korean\" ? 66:50;\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesize = Number($$$storage.getSessionStorage('common_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('common_pagesize', newvalue ? newvalue : 0)\r\n\t}); \r\n\t$scope.domain = $Domain;\r\n\t/**\r\n\t * [sortIP IP排序]\r\n\t */\r\n\t$scope.sortIP = function(order){\r\n\t\t$scope.rows.sort(function(a, b){\r\n\t\t\treturn (a._ip > b._ip) ? 1 : -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n\t};\r\n\r\n\t // 组合json数据\r\n\t function setData(data, index){\r\n\t \tdata.filter(function(item){ return item.full_path_map.length == index }).forEach(function(item){\r\n\t \t\tvar children = data.filter(function(d){ return d.parent == item.id });\r\n\t \t\titem.children = children;\r\n\t \t});\r\n\t }\r\n\tfunction setTreeData(DATA){\r\n\t\tDATA.forEach(function(item){\r\n\t\t\titem.full_path_map = item.full_path.split('/');\r\n\t\t});\r\n\t\tDATA.sort(function(a,b){ return a.full_path_map.length>b.full_path_map.length?-1:1 });\r\n\t\tfor(var i=1; i<DATA[0].full_path_map.length; i++){\r\n\t\t\tsetData(DATA, i);\r\n\t\t}\r\n\t\treturn [DATA[DATA.length-1]];\r\n\t};\r\n\t// 初始化树状图\r\n\tfunction treeOptFun(arg,flag){\r\n\t\targ.opts = {};\r\n\t\targ.treedata = newData;\r\n\t\targ.expandnodes = DATA;\r\n\t\targ.selected = arg.treedata[0]?arg.treedata[0]:null;\r\n\t\tif(arg.selected){\r\n\t\t\targ.selected._selected = true;\r\n\t\t}\r\n\t\targ.showSelected = function(node, selected){\r\n\t\t\tnode._selected = selected;\r\n\t\t\targ.selected = node;\r\n\t\t\tif(arg.selected._selected && flag){\r\n\t\t\t\t$scope.queryCommon(arg.selected.id);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar DATA = [], newData = [];\r\n\ttreeOptFun($scope,true);\r\n\r\n\t$scope.islastGroup = function(){\r\n\t\treturn $scope.selected && !DATA.filter(function(item){\r\n\t\t\t\t\treturn item.id!==$scope.selected.id;\r\n\t\t\t\t}).filter(function(item){\r\n\t\t\t\t\treturn (item.full_path+'/').indexOf($scope.selected.full_path+'/')>-1;\r\n\t\t\t\t}).length\r\n\t}\r\n\t$scope.queryCommon = function(departId){\r\n\t\t$scope.user_loading = true;\r\n\t\t$scope.rows = [];\r\n\t\tUsercommonList.query({department: departId?departId:undefined}, function(users){\r\n\t\t\t$scope.user_loading = false;\r\n\t\t\t$scope.rows = users.result;\r\n\t\t\t// $scope.rows.forEach(function(item){ item.department_desc = $scope.selected.full_path });\r\n\t\t\tvar _ip;\r\n\t\t\t$scope.rows.forEach(function(row){\r\n\t\t\t\tif(row.last_login !== null){\r\n\t\t\t\t\t_ip = row.last_login.split(\".\");\r\n\t\t\t\t\trow._ip = (_ip[0] << 16) + (_ip[1] << 8) + Number(_ip[2]) + (_ip[3] / 1000);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t_ip = null;\r\n\t\t\t\t\trow._ip = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(777, $scope.rows)\r\n\t\t},function(){\r\n\t\t\t$scope.user_loading = false;\r\n\t\t})\r\n\t}\r\n\t$scope.treedata_loading = true;\r\n\t$scope.queryDepart = function(){\r\n\t\tDepart.query(function(res){\r\n\t\t\t$scope.treedata_loading = false;\r\n\t\t\tDATA = res.result;\r\n\t\t\t$scope.treedata = newData = DATA.length?setTreeData(DATA):[];\r\n\t\t\t$scope.treedata[0].children && $scope.treedata[0].children.sort(function(a,b){ return a.name>b.name?-1:1 });\r\n\t\t\t$scope.expandnodes = DATA;\r\n\t\t\tvar selected = {};\r\n\t\t\tif($scope.selected){\r\n\t\t\t\tvar _selected = DATA.filter(function(item){ return item.id==$scope.selected.id })[0];\r\n\t\t\t\tselected = _selected?_selected:newData[0];\r\n\t\t\t}else{\r\n\t\t\t\tselected = newData[0];\r\n\t\t\t}\r\n\t\t\t$scope.selected = selected;\r\n\t\t\tif($scope.selected){\r\n\t\t\t\t$scope.selected._selected = true;\r\n\t\t\t\t$scope.queryCommon($scope.selected.id);\r\n\t\t\t}\r\n\t\t},function(err){\r\n\t\t\t$scope.treedata_loading = false;\r\n\t\t});\r\n\t}\r\n\tif($location.$$search.depart)\r\n\t\t$scope.selected = {id: Number($location.$$search.depart)};\r\n\tif($location.$$search.username)\r\n\t\t$scope.searchText = decodeURIComponent($location.$$search.username);\r\n\r\n\t$scope.queryDepart();\r\n\t\r\n\t\r\n\t/**\r\n\t * [addDepartment 添加部门]\r\n\t */\r\n\t$scope.addDepartment=function(){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/user/user_common_department_add.html\",\r\n\t\t\tsize: DATA.length ? \"md\":'sm',\r\n\t\t\tcontroller:function($scope,$modalInstance){\r\n\t\t\t\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t\t\t\ttreeOptFun($scope);\r\n\t\t\t\t$scope.selected = null;\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tDepart.add({\r\n\t\t\t\t\t\tname: this.name,\r\n\t\t\t\t\t\tparent: this.selected?this.selected.id:1\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t_scope.queryDepart();\r\n\t\t\t\t\t},function(){});\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * [deleteDpartment 删除部门]\r\n\t */\r\n\t$scope.deleteDpartment=function(){\r\n\t\tvar modalOptions = {\r\n\t\t\tkey: \"CommonDepartDel\",\r\n\t\t\ttitle: \"删除用户组\",\r\n\t\t\tdelTips: \"USER_TIPGROUP3\",\r\n\t\t\tdelete_rows: [$scope.selected],\r\n\t\t\tdelParm: 'name'\r\n\t\t}\r\n\t\tcustomModal.openModal(modalOptions);\r\n\t}\r\n\t/**\r\n\t * [delete 列表删除用户]\r\n\t */\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar nodelete_rows = selected_rows.filter(function(row){ return row.instance_num != 0; });\r\n\t\tvar delete_rows = selected_rows.filter(function(row){ return row.instance_num == 0; });\r\n\r\n\t\tif(delete_rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"ADMIN_TIP\"),\r\n\t\t\t\t\ttimeout: 6000\r\n\t\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar modalOptions = {\r\n\t\t\t\tkey: \"CommonUserDel\",\r\n\t\t\t\ttitle: \"删除用户\",\r\n\t\t\t\tdelTips: \"USER_TIPGROUP1\",\r\n\t\t\t\tdelete_rows: delete_rows,\r\n\t\t\t\tdelParm: 'name',\r\n\t\t\t\tnodelete_rows: nodelete_rows,\r\n\t\t\t\tnodelTips: \"USER_TIPGROUP4\"\r\n\t\t\t}\r\n\t\t\tcustomModal.openModal(modalOptions);\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.$on('DELETE',function(e, val){\r\n\t\tif(val){\r\n\t\t\t// 删除部门\r\n\t\t\tif(val.key=='CommonDepartDel'){\r\n\t\t\t\tDepart.delete({\r\n\t\t\t\t\tid: val.data[0].id,\r\n\t\t\t\t},function(res){\r\n\t\t\t\t\t$scope.queryDepart();\r\n\t\t\t\t},function(){});\r\n\t\t\t}\r\n\t\t\t//删除部门用户\r\n\t\t\tif(val.key=='CommonUserDel'){\r\n\t\t\t\tUsercommonList.delete({\r\n\t\t\t\t\tid: val.data.map(function(row){ return row.id; })\r\n\t\t\t\t},\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\t$scope.queryDepart();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t/**\r\n\t * [modifyInfo 修改部门名称]\r\n\t */\r\n\t$scope.modifyInfo=function(node){\r\n\t\tvar obj = node?node:$scope.selected;\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/user/user_common_department_modify.html\",\r\n\t\t\tsize:\"sm\",\r\n\t\t\tcontroller:function($scope,$modalInstance){\r\n\t\t\t\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t\t\t\t$scope.name = obj.name;\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tDepart.update({\r\n\t\t\t\t\t\tid: obj.id,\r\n\t\t\t\t\t\tname: this.name\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t_scope.queryDepart();\r\n\t\t\t\t\t},function(){});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$scope.close=function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * [moveTo 用户移动至部门]\r\n\t */\r\n\t$scope.moveTo=function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/user/user_common_moveTo.html\",\r\n\t\t\tsize:\"md\",\r\n\t\t\tdraggable:true,\r\n\t\t\tcontroller:function($scope,$modalInstance){\r\n\t\t\t\ttreeOptFun($scope);\r\n\t\t\t\t$scope.opts.isSelectable = function(node){\r\n\t\t\t\t\treturn\t!DATA.filter(function(item){\r\n\t\t\t\t\t\t\t\treturn item.id!==node.id;\r\n\t\t\t\t\t\t\t}).filter(function(item){\r\n\t\t\t\t\t\t\t\treturn (item.full_path+'/').indexOf(node.full_path+'/')>-1;\r\n\t\t\t\t\t\t\t}).length\r\n\t\t\t\t};\r\n\t\t\t\t$scope.selected = null;\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tUser.move({\r\n\t\t\t\t\t\tid: selected_rows.map(function(item){ return item.id }),\r\n\t\t\t\t\t\tdepartment: this.selected.id\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t_scope.queryDepart();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t\t//勾选的人员姓名\r\n\t\t\t\t$scope.selectedPerson = selected_rows.map(function(item,index,arr){ return item.name }).join('，');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t/**\r\n\t * [description uploadify上传文件]\r\n\t */\r\n\tvar encodeHTML = function(txt, con){\r\n\t\tcon = con || document.createElement(\"div\");\r\n\t\twhile(con.firstChild){\r\n\t\t\tcon.removeChild(con.firstChild);\r\n\t\t}\r\n\t\treturn con.appendChild(con.ownerDocument.createTextNode(txt)).parentNode.innerHTML;\r\n\t};\r\n\tvar format = function(tmpl){\r\n\t\tvar data = Array.prototype.slice.call(arguments, 0);\r\n\t\treturn typeof tmpl === \"string\" ? tmpl.replace(/\\{\\{([^\\}]+)?\\}\\}/g, function(match, param){\r\n\t\t\tif(data[param]){\r\n\t\t\t\treturn encodeHTML(data[param]);\r\n\t\t\t}\r\n\t\t\treturn match;\r\n\t\t}) : \"\";\r\n\t};\r\n\t\r\n\t$scope.finishUpload = function(response){\r\n\t\t$scope.queryDepart();\r\n\t}\r\n\r\n\t$scope.$on(\"UploadError\", function (e, suc, errorData) {\r\n\t\tvar errorMsg = errorData.code==17041? $$$MSG.get(errorData.code)+errorData.detail : $$$MSG.get(errorData.code);\r\n\t\t$.bigBox({\r\n\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + errorData.code,\r\n\t\t\tcontent : errorMsg,\r\n\t\t\tcolor : \"#C46A69\",\r\n\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\ttimeout : 6000\r\n\t\t});\r\n\t});\r\n}])\r\n.controller(\"vdiUserDomainController\", [\"$scope\", \"$modal\", \"Server\", function($scope,$modal,Server){\r\n\t$scope.loading = true;\r\n\t$scope.rows = [];\r\n\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.loading=false;\r\n\r\n\tServer.query(function(response){\r\n\t\t$scope.rows=response.servers;\r\n\t},function(){\r\n\t\t//console.log(arguments);\r\n\t});\r\n\r\n\tvar _scope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar rows = $scope.rows;\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除域控制器'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='USER_TIPGROUP1' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.name = selected_rows.map(function(row){ return row.host }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tServer.delete({\r\n\t\t\t\t\t\tids: selected_rows.map(function(row){ return row.id; })\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t\tServer.query(function(response){\r\n\t\t\t\t\t\t\t_scope.rows=response.servers;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\t\r\n}])\r\n.controller(\"vdiUserDomainListController\",[\"$scope\", \"$modal\",\"Domain\", \"User\",\"$routeParams\", \"$$$I18N\", function($scope, $modal,Domain,User,$routeParams,$$$I18N){\r\n\t$scope.loading = true;\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"用户\", \"域用户\",\"域用户列表\"]);\r\n\r\n\t// location.replace(\"#/user/domain/\");\r\n\t$scope.domainId = location.hash.match(/\\d+$/)? parseInt(location.hash.match(/\\d+$/)[0]):$routeParams.id;\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.loading=false;\r\n\t$scope.rows=[];\r\n\t$scope.oneKeySycing=function(){\r\n\t\tDomain.asycing({\"auto\":1,\"id\":$scope.domainId},function(response){\r\n\t\t\tangular.forEach(response.result,function(item,index){\r\n\t\t\t\tvar i;\r\n\t\t\t\tfor(i=0;i<$scope.rows.length;i++){\r\n\t\t\t\t\tif(item.id==$scope.rows[i]){\r\n\t\t\t\t\t\t$scope.rows[i]=item;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(i>=$scope.rows.length){\r\n\t\t\t\t\t$scope.rows.push(item);\r\n\t\t\t\t}\r\n\t\t\t\t//$scope.rows.push(item);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n    var _scope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar nodelete_rows = selected_rows.filter(function(row){ return row.instance_num != 0; });\r\n\t\tvar delete_rows = selected_rows.filter(function(row){ return row.instance_num == 0; });\r\n\t\tvar rows = $scope.rows;\r\n\t\t\r\n\t\tif(delete_rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"ADMIN_TIP\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse \r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除用户'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;word-break: break-all;' data-localize='USER_TIPGROUP1' param1='{{name}}'></p><p style='margin-bottom:20px;' data-ng-if='nodelete_rows.length' data-localize='USER_TIPGROUP2' param1='{{nodeleteName}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.nodelete_rows = nodelete_rows;\r\n\t\t\t\t\t\t$scope.name = delete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t\t$scope.nodeleteName = nodelete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tUser.delete({\r\n\t\t\t\t\t\t\tids: delete_rows.map(function(row){ return row.id; })\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t\t\tdelete_rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\tvar index = rows.indexOf(item);\r\n\t\t\t\t\t\t\t\trows.splice(index, 1);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n\tDomain.query({\"id\":$scope.domainId},function(response){\r\n\t\t$scope.rows=response.users;\r\n\t},function(){\r\n\t});\r\n}])\r\n.controller(\"vdiUserRoleManageController\", [\"$scope\", \"$modal\", \"Roles\", \"$$$UserRoles\", \"$$$I18N\",function($scope, $modal, roles, $$$UserRoles, $$$I18N){\r\n\t$scope.rows = [];var _controllerScope = $scope;$scope.loading = true;\r\n\t// $scope.allRows = [];\r\n\t$scope.powers = $$$UserRoles;\r\n\troles.query(function(res){\r\n\t\t$scope.rows = res.result.sort(function(a,b){\r\n\t\t\tif(a.name === 'Administrator'){\r\n\t\t\t\treturn -1\r\n\t\t\t}else if(b.name === 'Administrator'){\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t\t$scope.loading = false;\r\n\t\t// angular.copy($scope.rows,$scope.allRows);\r\n\t});\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesize = Number($$$storage.getSessionStorage('role_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('role_pagesize', newvalue ? newvalue : 0)\r\n\t}); \r\n\r\n\t// $scope.updateData = function(text){\r\n\t// \t$scope.rows = $scope.allRows.filter(function(row){\r\n\t// \t\trow._selected = false;\r\n\t// \t\tif(text){\r\n\t// \t\t\treturn row.name.indexOf(text) !== -1;\r\n\t// \t\t}\r\n\t// \t\treturn true;\r\n\t// \t});\r\n\t// };\r\n\r\n    $scope.delete = function(item){\r\n    \tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && !row._ignore });\r\n    \tvar nodelete_rows = selected_rows.filter(function(row){ return row.user_num != 0; });\r\n    \tvar delete_rows = selected_rows.filter(function(row){ return row.user_num == 0; });\r\n    \tvar rows = $scope.rows;\r\n\r\n    \tif(delete_rows.length==0){\r\n    \t\t$.bigBox({\r\n    \t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n    \t\t\t\tcontent : $$$I18N.get(\"ROEL_TIP\"),\r\n    \t\t\t\ttimeout : 6000\r\n    \t\t\t});\r\n    \t}\r\n    \telse \r\n    \t\t$modal.open({\r\n    \t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除角色'>\"+\r\n    \t\t\t\t\t\"删除角色</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_ROLES1' param1='{{name}}'></p><p style='margin-bottom:20px;' data-ng-if='nodelete_rows.length' data-localize='DELETE_ROLES2' param1='{{nodeleteName}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n    \t\t\t\tcontroller : function($scope, $modalInstance){\r\n    \t\t\t\t\t$scope.nodelete_rows = nodelete_rows;\r\n    \t\t\t\t\t$scope.name = delete_rows.map(function(row){ return row.name }).join(', ');\r\n    \t\t\t\t\t$scope.nodeleteName = nodelete_rows.map(function(row){ return row.name }).join(', ');\r\n\r\n    \t\t\t\t\t$scope.ok = function(){\r\n    \t\t\t\t\t\troles.delete({\r\n    \t\t\t\t\t\t\tids: delete_rows.map(function(row){ return row.id; })\r\n    \t\t\t\t\t\t}, function(res){\r\n    \t\t\t\t\t\t\tdelete_rows.forEach(function(item){\r\n    \t\t\t\t\t\t\t\tvar index = rows.indexOf(item);\r\n    \t\t\t\t\t\t\t\trows.splice(index, 1);\r\n    \t\t\t\t\t\t\t});\r\n    \t\t\t\t\t\t\t$modalInstance.close();\r\n    \t\t\t\t\t\t});\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t$scope.close = function(){\r\n    \t\t\t\t\t\t$modalInstance.close();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\tsize : \"sm\"\r\n    \t\t\t});\r\n    \t};\r\n\r\n}])\r\n\r\n\r\n\r\n.controller(\"addUserRoleDialog\", [\"$scope\", \"$modalInstance\", \"Roles\", \"$$$I18N\", \"NavigatorLink\", function($scope, $modalInstance, role,$$$I18N, navigators){\r\n\t$scope.checked = true;$scope.roles = [];\r\n\tnavigators.forEach( item => {\r\n\t\tif(item.sublist){\r\n\t\t\t$scope.roles.push(item);\r\n\t\t\titem.sublist.forEach( data => { if(data.key!==\"Role_Manage\") $scope.roles.push(data);} )\r\n\t\t}\r\n\t\telse\r\n\t\t\t$scope.roles.push(item);\r\n\t});\r\n\t$scope.roles.forEach(function(item){\r\n\t\titem._selected = $scope.checked;\r\n\t\titem._slide = false;\r\n\t\titem._arrow = \"up\";\r\n\t})\r\n\t$scope.selectAll = function(){\r\n\t \t$scope.checked = !$scope.checked;\r\n\t \tif($scope.checked){\r\n\t \t\t$scope.roles.forEach(function(item){\r\n\t \t\t\tif(item.key != \"Administrator\" && item.key != \"User\" && item.key != \"Summary\")\r\n\t \t\t\t\titem._selected = true;\r\n\t \t\t})\r\n\t \t}\r\n\t \telse{\r\n\t \t\t$scope.roles.forEach(function(item){\r\n\t \t\t\tif(item.key != \"Administrator\" && item.key != \"User\" && item.key != \"Summary\")\r\n\t \t\t\t\titem._selected = false;\r\n\t \t\t})\r\n\t \t}\r\n\t }\r\n\t$scope.slide = function(name,checked){\r\n\t\tvar fatheritem = $scope.roles.filter(function(item){ return item.key === name })[0];\r\n\t\tvar subitem = $scope.roles.filter(function(item){ return item.belong === name })\r\n\t\tif(checked){\r\n\t\t\tfatheritem._arrow = \"down\";\r\n\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\titem._slide = true;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfatheritem._arrow = \"up\";\r\n\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\titem._slide = false;\r\n\t\t\t})\r\n\t\t}\r\n\t };\r\n\t$scope.select = function(name){\r\n\t\t\tvar checked = $scope.roles.filter(function(item){ return item.key === name })[0]._selected;\r\n\t\t\tvar subitem = $scope.roles.filter(function(item){ return item.belong === name })\r\n\t\t\tif(!checked){\r\n\t\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\t\titem._selected = true;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\t\titem._selected = false;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tvar length = $scope.roles.filter(function(item){ return item._selected; }).length;\r\n\t\t\tif(length+1 == $scope.roles.length){\r\n\t\t\t\t$scope.checked = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\t$scope.checked = false;\r\n\t\t };\r\n\t\t$scope.set = function(name){\r\n\t\t\tvar allchecked = false;\r\n\t\t\t$scope.roles.filter(function(item){ return item.belong === name }).forEach(function(item){ \r\n\t\t\t\tif(item._selected == true){\r\n\t\t\t\t\tallchecked = true;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tvar fatheritem = $scope.roles.filter(function(item){ return item.key === name })[0];\r\n\t\t\tif(fatheritem){\r\n\t\t\t\tif(!allchecked)\r\n\t\t\t\t\tfatheritem._selected = false;\r\n\t\t\t\telse{\r\n\t\t\t\t\tfatheritem._selected = true;\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\tvar length = $scope.roles.filter(function(item){ return item._selected; }).length;\r\n\t\t\tif(length == $scope.roles.length){\r\n\t\t\t\t$scope.checked = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\t$scope.checked = false;\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\r\n\t $scope.min_namelength=2;$scope.max_namelength=20;\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar roles = this.roles.filter(function(item){ return item._selected == true }).map(function(item){ return item.key });\r\n\t\tif(roles.length){\r\n\t\t\trole.save({\r\n\t\t\t\t\t\"name\": this.data.name,\r\n\t\t\t\t\t\"desc\": this.data.desc,\r\n\t\t\t\t\t\"keys\": roles.toString()\r\n\t\t\t\t},\r\n\t\t\t\tfunction(data){\r\n\t\t\t\t\t$scope.rows.push({\r\n\t\t\t\t\t\tid: data.id,\r\n\t\t\t\t\t\tname: data.name,\r\n\t\t\t\t\t\tdesc: data.desc,\r\n\t\t\t\t\t\tuser_num: data.user_num,\r\n\t\t\t\t\t\tredactor: data.redactor,\r\n\t\t\t\t\t\tupdated_time: data.updated_time,\r\n\t\t\t\t\t\taccess_key: data.access_key\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t);\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t:$$$I18N.get(\"PERMISSION_TIP\"),\r\n\t\t\t\ttimeout\t:6000\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"editUserRoleDialog\", [\r\n\"$scope\", \"$modalInstance\", \"Roles\", \"$$$I18N\", \"UserRole\",\"NavigatorLink\",\r\nfunction($scope, $modalInstance, role, $$$I18N, UserRole, navigators){\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = {};\r\n\t$scope.master = {};\r\n\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\tvar roles = [];\r\n\tnavigators.forEach( item => {\r\n\t\tif(item.sublist){\r\n\t\t\troles.push(item);\r\n\t\t\titem.sublist.forEach( data => { if(data.key!==\"Role_Manage\") roles.push(data);} )\r\n\t\t}\r\n\t\telse\r\n\t\t\troles.push(item);\r\n\t});\r\n\titem.roles = roles;\r\n\tvar access_roles = item.access_key.split(\",\");\r\n\titem.roles.forEach(function(item){\r\n\t\titem._selected = false;\r\n\t\titem._slide = false;\r\n\t\titem._arrow = \"up\";\r\n\t})\r\n\taccess_roles.forEach(function(role){\r\n\t\titem.roles.forEach(function(item){\r\n\t\t\tif(item.key === role) item._selected = true;\r\n\t\t})\r\n\t})\r\n\t$scope.data = angular.copy(item);\r\n\r\n\tif($scope.data.roles.filter(function(item){ return item._selected === true }).length === $scope.data.roles.length){\r\n\t\t$scope.checked = true;\r\n\t}\r\n\telse $scope.checked = false;\r\n\r\n\t$scope.selectAll = function(){\r\n\t \t$scope.checked = !$scope.checked;\r\n\t \tif($scope.checked){\r\n\t \t\t$scope.data.roles.forEach(function(item){\r\n\t \t\t\tif(item.key != \"Administrator\" && item.key != \"User\" && item.key != \"Summary\")\r\n\t \t\t\t\titem._selected = true;\r\n\t \t\t})\r\n\t \t}\r\n\t \telse{\r\n\t \t\t$scope.data.roles.forEach(function(item){\r\n\t \t\t\tif(item.key != \"Administrator\" && item.key != \"User\" && item.key != \"Summary\")\r\n\t \t\t\t\titem._selected = false;\r\n\t \t\t})\r\n\t \t}\r\n\t }\r\n\t $scope.slide = function(name,checked){\r\n\t \tvar fatheritem = $scope.data.roles.filter(function(item){ return item.key === name })[0];\r\n\t \tvar subitem = $scope.data.roles.filter(function(item){ return item.belong === name })\r\n\t \tif(checked){\r\n\t \t\tfatheritem._arrow = \"down\";\r\n\t \t\tsubitem.forEach(function(item){\r\n\t \t\t\titem._slide = true;\r\n\t \t\t})\r\n\t \t}\r\n\t \telse{\r\n\t \t\tfatheritem._arrow = \"up\";\r\n\t \t\tsubitem.forEach(function(item){\r\n\t \t\t\titem._slide = false;\r\n\t \t\t})\r\n\t \t}\r\n\t  };\r\n\t$scope.select = function(name){\r\n\t\tvar checked = $scope.data.roles.filter(function(item){ return item.key === name })[0]._selected;\r\n\t\tvar subitem = $scope.data.roles.filter(function(item){ return item.belong === name })\r\n\t\tif(!checked){\r\n\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\titem._selected = true;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tsubitem.forEach(function(item){\r\n\t\t\t\titem._selected = false;\r\n\t\t\t})\r\n\t\t}\r\n\t\tvar length = $scope.data.roles.filter(function(item){ return item._selected; }).length;\r\n\t\tif(length+1 == $scope.data.roles.length){\r\n\t\t\t$scope.checked = true;\r\n\t\t}\r\n\t\telse\r\n\t\t\t$scope.checked = false;\r\n\t };\r\n\t$scope.set = function(name){\r\n\t\tvar allchecked = false;\r\n\t\t$scope.data.roles.filter(function(item){ return item.belong === name }).forEach(function(item){ \r\n\t\t\tif(item._selected == true){\r\n\t\t\t\tallchecked = true;\r\n\t\t\t}\r\n\t\t})\r\n\t\tvar fatheritem = $scope.data.roles.filter(function(item){ return item.key === name })[0];\r\n\t\tif(fatheritem){\r\n\t\t\tif(!allchecked)\r\n\t\t\t\tfatheritem._selected = false;\r\n\t\t\telse{\r\n\t\t\t\tfatheritem._selected = true;\r\n\t\t\t}\t\r\n\t\t}\r\n\t\tvar length = $scope.data.roles.filter(function(item){ return item._selected; }).length;\r\n\t\tif(length == $scope.data.roles.length){\r\n\t\t\t$scope.checked = true;\r\n\t\t}\r\n\t\telse\r\n\t\t\t$scope.checked = false;\r\n\t\t\r\n\t}\r\n\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar roles = this.data.roles.filter(function(item){ return item._selected == true }).map(function(item){ return item.key });\r\n\t\tif(roles.length){\r\n\t\t\trole.update({\r\n\t\t\t\t\t\"id\": this.data.id,\r\n\t\t\t\t\t\"name\": this.data.name,\r\n\t\t\t\t\t\"desc\": this.data.desc,\r\n\t\t\t\t\t\"keys\": roles.toString()\r\n\t\t\t\t},\r\n\t\t\t\tfunction(data){\r\n\t\t\t\t\tvar POWER = item.access_key;\r\n\t\t\t\t\titem.name = data.name;\r\n\t\t\t\t\titem.desc = data.desc;\r\n\t\t\t\t\titem.access_key = data.access_key;\r\n\t\t\t\t\titem.redactor = data.redactor;\r\n\t\t\t\t\titem.updated_time = data.updated_time;\r\n\t\t\t\t\titem.user_num = data.user_num;\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tif(_this.data.id === user.permission && item.access_key != POWER){\r\n\t\t\t\t\t\t$$$storage.setSessionStorage('power', roles.toString())\r\n\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t:$$$I18N.get(\"PERMISSION_TIP\"),\r\n\t\t\t\ttimeout\t:6000\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem);\r\n\t\tif($scope.data.roles.filter(function(item){ return item._selected === true }).length === $scope.data.roles.length){\r\n\t\t\t$scope.checked = true;\r\n\t\t}\r\n\t\telse $scope.checked = false;\r\n\t};\r\n}])\r\n.controller(\"addUserAdminDialog\", [\"$scope\", \"$modalInstance\", \"Admin\", \"SchoolRoom\", \"Roles\",\"$$$I18N\", function($scope, $modalInstance, admin, schoolroom, role, $$$I18N){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope._ischeckAll = true;\r\n\t$scope.data = {\r\n\t\tsex:'true',\r\n\t};\r\n\t$scope.master = {sex:'true'};\r\n\r\n\t$scope.schoolroom_loading = true;\r\n\tschoolroom.querywithSimple(function(res){\r\n\t\t$scope.schoolroom_loading = false;\r\n\t\t$scope.data.schoolrooms = res.pools_;\r\n\t\t$scope.data.schoolrooms.forEach(function(item){ item._selected = true;  });\r\n\t})\r\n\trole.query(function(res){\r\n\t\t$scope.roles = res.result;\r\n\t\t// $scope.data.role = res.result.filter(function(item){ return item.name===\"Administrator\" })[0];\r\n\t})\r\n\t$scope.DISABLED = false;\r\n\t$scope.changeRole = function(role){\r\n\t\tif($scope.data.role && $scope.data.role.name == \"Administrator\"){\r\n\t\t\trole._ischeckAll = true;\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = true;\r\n\t\t\t});\r\n\t\t\t$scope.DISABLED = true;\r\n\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.DISABLED = false;\r\n\t\t}\r\n\t}\r\n\t$scope.checkAll = function(scope){\r\n\t\tif(scope._ischeckAll){\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = true;\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.checkOne = function(scope){\r\n\t\tvar schoolrooms = $scope.data.schoolrooms.filter(function(p){ \r\n\t\t\treturn p._selected;\r\n\t\t});\r\n\t\tif(schoolrooms.length === $scope.data.schoolrooms.length){\r\n\t\t\tscope._ischeckAll = true;\r\n\t\t}else{\r\n\t\t\tscope._ischeckAll = false;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.master);\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.master,$scope.data);\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\tvar pools = $scope.data.schoolrooms.filter(function(item){ if(item._selected) return item }).map(function(item){ return item.id });\r\n\t\tif(pools.length)\r\n\t\t\tadmin.save(\r\n\t\t\t\t{\r\n\t\t\t\t\tname: $scope.data.name,\r\n\t\t\t\t\treal_name: $scope.data.real_name,\r\n\t\t\t\t\tsex: $scope.data.sex,\r\n\t\t\t\t\tpermission: $scope.data.role.id,\r\n\t\t\t\t\tpassword: $scope.data.password,\r\n\t\t\t\t\tpasswordConfirm: $scope.data.passwordConfirm,\r\n\t\t\t\t\temail: $scope.data.email,\r\n\t\t\t\t\tcontact: $scope.data.contact,\r\n\t\t\t\t\tpools: pools\r\n\t\t\t\t},\r\n\t\t\t\tfunction(data){\r\n\t\t\t\t\tdata.result.instance_num = 0;\r\n\t\t\t\t\t$scope.rows.push(data.result);\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t:$$$I18N.get(\"POOL_TIP\"),\r\n\t\t\t\ttimeout\t:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"editUserAdminDialog\", [\r\n\"$scope\", \"$modalInstance\",\"Admin\", \"SchoolRoom\", \"Roles\", \"$$$UserRoles\", \"$$$I18N\", \"UserRole\",\r\nfunction($scope, $modalInstance, admin, schoolroom, role, $$$UserRoles, $$$I18N, UserRole){\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.owner = UserRole.isOwner;\r\n\r\n\t$scope.master = {};\r\n\t$scope.data = {};\r\n\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\t$scope.schoolroom_loading = true;\r\n\tschoolroom.querywithSimple(function(res){\r\n\t\t$scope.schoolroom_loading = false;\r\n\t\titem.schoolrooms = res.pools_;\r\n\t\tvar i = 0;\r\n\t\titem.schoolrooms.forEach(function(sch){\r\n\t\t\titem.pool.forEach(function(id){\r\n\t\t\t\tif(sch.id === id){\r\n\t\t\t\t\tsch._selected = true;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\tif(i == item.schoolrooms.length){\r\n\t\t\t$scope._ischeckAll = true;\r\n\t\t}\r\n\t\trole.query(function(res){\r\n\t\t\titem.roles = res.result;\r\n\t\t\tvar myrole = res.result.filter(function(role){ return role.name === item.permission })[0];\r\n\t\t\t// if(myrole)\r\n\t\t\t\titem.myrole = res.result.filter(function(role){ return role.name === item.permission })[0];\r\n\t\t\t// else\r\n\t\t\t// \titem.myrole = res.result[0];\r\n\t\t\t$scope.data = angular.copy(item);\r\n\t\t})\r\n\t\t\r\n\t})\r\n\tif(!$scope.owner)\r\n\t\t$scope.DISABLED = true;\r\n\t$scope.changeRole = function(role){\r\n\t\tif($scope.data.myrole && $scope.data.myrole.name == \"Administrator\"){\r\n\t\t\trole._ischeckAll = true;\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = true;\r\n\t\t\t});\r\n\t\t\t$scope.DISABLED = true;\r\n\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data.schoolrooms.forEach(function(item){\r\n\t\t\t\t\titem._selected = false;\r\n\t\t\t})\r\n\t\t\titem.pool.forEach(function(schoolroom_id){\r\n\t\t\t\t$scope.data.schoolrooms.forEach(function(item){\r\n\t\t\t\t\tif(item.id === schoolroom_id){\r\n\t\t\t\t\t\titem._selected = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tif($scope.data.schoolrooms.filter(function(item){ return item._selected == true }).length == $scope.data.schoolrooms.length)\r\n\t\t\t\trole._ischeckAll = true;\r\n\t\t\telse role._ischeckAll = false;\r\n\t\t\t\r\n\t\t\t$scope.DISABLED = false;\r\n\t\t}\r\n\t}\r\n\t$scope.checkAll = function(scope){\r\n\t\tif(scope._ischeckAll){\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = true;\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t$scope.data.schoolrooms.map(function(schoolroom){\r\n\t\t\t\treturn schoolroom._selected = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.checkOne = function(scope){\r\n\t\tvar schoolrooms = $scope.data.schoolrooms.filter(function(p){ \r\n\t\t\treturn p._selected;\r\n\t\t});\r\n\t\tif(schoolrooms.length === $scope.data.schoolrooms.length){\r\n\t\t\tscope._ischeckAll = true;\r\n\t\t}else{\r\n\t\t\tscope._ischeckAll = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem);\r\n\t\tif($scope.data.schoolrooms.filter(function(item){ return item._selected === true }).length === $scope.data.schoolrooms.length){\r\n\t\t\t$scope.$$childTail._ischeckAll = true;\r\n\t\t}\r\n\t\telse {console.log($scope); $scope.$$childTail._ischeckAll = false;}\r\n\r\n\t};\r\n\r\n\t$scope.edit = function() {\r\n\t\tvar user_id = this.data.id;\r\n\t\tvar pools = this.data.schoolrooms.filter(function(item){ if(item._selected) return item }).map(function(item){ return item.id });\r\n\t\tif(pools.length)\r\n\t\t\tadmin.update(\r\n\t\t\t{\r\n\t\t\t\tid:this.data.id,\r\n\t\t\t\tcontact:this.data.contact,\r\n\t\t\t\temail:this.data.email,\r\n\t\t\t\tname:this.data.name,\r\n\t\t\t\treal_name:this.data.real_name,\r\n\t\t\t\tsex:this.data.sex,\r\n\t\t\t\tpassword:this.data.password,\r\n\t\t\t\tpools:pools,\r\n\t\t\t\tpermission: this.data.myrole.id\r\n\r\n\t\t\t},\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\tvar PERMISSION = item.permission;\r\n\t\t\t\t\titem.name = res.result.name;\r\n\t\t\t\t\titem.real_name = res.result.real_name;\r\n\t\t\t\t\titem.sex = res.result.sex;\r\n\t\t\t\t\titem.email = res.result.email;\r\n\t\t\t\t\titem.contact = res.result.contact;\r\n\t\t\t\t\titem.pool = res.result.pool;\r\n\t\t\t\t\titem.permission = res.name;\r\n\t\t\t\t\tif(user_id === user.id){\r\n\t\t\t\t\t\t$$$storage.setSessionStorage('power', $scope.data.roles.filter(item => item.name === res.name )[0].access_key)\r\n\t\t\t\t\t\tvar logInfor = UserRole.currentUser;\r\n\t\t\t\t\t\tlogInfor.keys = $$$storage.getSessionStorage(\"power\");\r\n\t\t\t\t\t\tlogInfor.pool = res.result.pool;\r\n\t\t\t\t\t\t$$$storage.setSessionStorage(\"loginInfo\", JSON.stringify(logInfor))\r\n\t\t\t\t\t\tif(item.permission != PERMISSION){ location.reload(); }\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\tfunction(){  }\r\n\t\t\t);\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t:$$$I18N.get(\"POOL_TIP\"),\r\n\t\t\t\ttimeout\t:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"addUserCommonDialog\", [\"$scope\", \"$modalInstance\",\"User\", \"UserRole\", function($scope, $modalInstance, user, Role){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t$scope.data = {\r\n\t\tsex:'true',\r\n\t\trole:'2',\r\n\t\tdepartment: $scope.selected.id,\r\n\t\tredactor: Role.currentUser.name\r\n\r\n\t};\r\n\t$scope.master = {sex:'true',role_desc:'教师'};\r\n\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.master);\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.master,$scope.data);\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\tconsole.log(666666666, $scope.data)\r\n\t\tuser.save(\r\n\t\t\t$scope.data,\r\n\t\t\tfunction(data){\r\n\t\t\t\t$scope.queryDepart();\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"editUserCommonDialog\", [\"$scope\", \"$modalInstance\", \"User\", function($scope, $modalInstance, user){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\t$scope.data = angular.copy(item);\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem);\r\n\t};\r\n\t$scope.edit = function() {\r\n\t\tuser.edit({\r\n\t\t\tid: this.data.id,\r\n\t\t\tcontact:this.data.contact,\r\n\t\t\temail:this.data.email,\r\n\t\t\tname:this.data.name,\r\n\t\t\treal_name:this.data.real_name,\r\n\t\t\tsex:this.data.sex,\r\n\t\t\tpassword:this.data.password,\r\n\t\t\tpasswordConfirm: this.data.password,\r\n\t\t\tdesc: this.data.desc\r\n\t\t},function(res){\r\n\t\t\t$scope.queryDepart();\r\n\t\t\t$modalInstance.close();\r\n\t\t},function(){});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"addUserDomainDialog\", [\"$scope\", \"$modalInstance\", \"Server\", function($scope, $modalInstance, Server){\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem||{});\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\t\r\n\r\n\t$scope.ok=function(){\r\n\t\t$scope.submiting = true ;\r\n\t\t$scope.afterSubmiting =false ;\r\n\t\tServer.create($scope.data,function(response){\r\n\t\t\t$scope.submiting = false ;\r\n\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t$scope.rows.unshift(response.result[0]);\r\n\t\t\t$modalInstance.close();\r\n\t\t},function(){\r\n\t\t\t$scope.submiting = false ;\r\n\t\t\t$scope.afterSubmiting = false ;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.data = {\"user\":\"\",\"passwd\":\"\"};\r\n}])\r\n.controller(\"editUserDomainDialog\", [\"$scope\", \"$modalInstance\", \"Server\", function($scope, $modalInstance, Server){\r\n\tvar item = $scope.item || $scope.currentItem||{};\r\n\t$scope.data = angular.copy(item);\r\n\tServer.get({\"id\":item.id},function(response){\r\n\t\tvar data=response;\r\n\t\tangular.forEach(data,function(value,key){\r\n\t\t\titem[key]=data[key];\r\n\t\t});\r\n\t},function(){\r\n\t});\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem||{});\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\t\r\n\r\n\t$scope.ok=function(){\r\n\t\t$scope.submiting = true ;\r\n\t\t$scope.afterSubmiting =false ;\r\n\t\tServer.update($scope.data,function(response){\r\n\t\t\tvar data=response.result[0];\r\n\t\t\tangular.forEach(data,function(value,key){\r\n\t\t\t\titem[key]=data[key];\r\n\t\t\t});\r\n\t\t\t$modalInstance.close();\r\n\t\t}, function(){\r\n\t\t\t$scope.submiting = false ;\r\n\t\t\t$scope.afterSubmiting = false ;\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"userDoaminAscingDialog\", [\"$scope\", \"$modalInstance\", \"Domain\", function($scope, $modalInstance, Domain){\r\n\tvar domainId = parseInt(location.hash.match(/\\d+$/)[0]);\r\n\t$scope.selected=[];\r\n\r\n\tDomain.get({id: domainId},function(response){\r\n\t\t$scope.status = 'completed';\r\n\t\t$scope.ous = response.ous;\r\n\r\n\t},function(){\r\n\t\t$scope.status = 'completed';\r\n\t});\r\n\r\n\t$scope.ok = function(){\r\n\t\tDomain.asycing({\r\n\t\t\tid: domainId,\r\n\t\t\tauto: 0,\r\n\t\t\tous: $scope.selected.map(function(item){ return item.base_dn; })\r\n\t\t},function(response){\r\n\t\t\tresponse.result.map(function(item){\r\n\t\t\t\tvar len=$scope.rows.length,i;\r\n\t\t\t\tfor(i=0;i<len;i++){\r\n\t\t\t\t\tif(item.id==$scope.rows[i].id){\r\n\t\t\t\t\t\t$scope.rows[i]=item;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(i>=len){\r\n\t\t\t\t\t$scope.rows.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$modalInstance.close();\r\n\t\t},function(){});\r\n\t};\r\n\r\n\t$scope.select_row = function(item){\r\n\t\titem._selected = true;\r\n\t};\r\n\t$scope.select = function(item){\r\n\t\tif(item){\r\n\t\t\tif($scope.selected.filter(function(d){ return d.fullname==item.fullname; }).length==0)\r\n\t\t\t\t$scope.selected.push(item);\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.ous.filter(function(item){ return item._selected }).forEach(function(d){\r\n\t\t\t\tif($scope.selected.filter(function(data){ return data.fullname==d.fullname; }).length==0)\r\n\t\t\t\t\t$scope.selected.push(d);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.removeSelected=function(_item){\r\n\t\tvar index;\r\n\t\tif(!_item){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tindex=$scope.selected.indexOf(_item);\r\n\t\tif(index>-1){\r\n\t\t\t$scope.selected.splice(index,1);\r\n\t\t}\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.constant(\"NavigatorLink\", [\r\n\t{\r\n\t\t\"key\": \"Summary\",\r\n\t\t\"value\": \"概要\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-home\",\r\n\t\t\"url\": \"/summary\"\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Resource\",\r\n\t\t\"value\": \"资源\",\r\n\t\ticon: \"icon-jj-cloud\",\r\n\t\t\"is_group\": true,\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Console\",\r\n\t\t\t\t\"value\": \"主控管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Resource\",\r\n\t\t\t\t\"url\": \"/resource/console\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Pool\",\r\n\t\t\t\t\"value\": \"资源池管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Resource\",\r\n\t\t\t\t\"url\": \"/resource/pool\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Storage\",\r\n\t\t\t\t\"value\": \"存储管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Resource\",\r\n\t\t\t\t\"url\": \"/resource/storage\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Network\",\r\n\t\t\"value\": \"网络\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-017\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"ManageNetwork\",\r\n\t\t\t\t\"value\": \"管理网络\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Network\",\r\n\t\t\t\t\"url\": \"/network/manageNetwork\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"VirtualSwitch\",\r\n\t\t\t\t\"value\": \"分布式虚拟交换机\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Network\",\r\n\t\t\t\t\"url\": \"/network/virtualSwitch\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"DataNetwork\",\r\n\t\t\t\t\"value\": \"数据网络\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Network\",\r\n\t\t\t\t\"url\": \"/network/dataNetwork\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"DHCP\",\r\n\t\t\t\t\"value\": \"DHCP\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Network\",\r\n\t\t\t\t\"url\": \"/network/dhcp\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Desktop\",\r\n\t\t\"value\": \"桌面\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-pc\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Teaching_desktop\",\r\n\t\t\t\t\"value\": \"教学桌面\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Desktop\",\r\n\t\t\t\t\"url\": \"/desktop/scene\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Personal_desktop\",\r\n\t\t\t\t\"value\": \"个人桌面\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Desktop\",\r\n\t\t\t\t\"url\": \"/desktop/personal\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Personal_desktop_pool\",\r\n\t\t\t\t\"value\": \"个人桌面池\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Desktop\",\r\n\t\t\t\t\"url\": \"/desktop/pool\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Template\",\r\n\t\t\"value\": \"模板\",\r\n\t\ticon: \"icon-jj-Template\",\r\n\t\t\"is_group\": true,\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Teaching_template\",\r\n\t\t\t\t\"value\": \"教学模板\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Template\",\r\n\t\t\t\t\"url\": \"/template/teach\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Personal_template\",\r\n\t\t\t\t\"value\": \"个人模板\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Template\",\r\n\t\t\t\t\"url\": \"/template/personal\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Hardware_template\",\r\n\t\t\t\t\"value\": \"硬件模板\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Template\",\r\n\t\t\t\t\"url\": \"/template/hardware\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Terminal\",\r\n\t\t\"value\": \"终端\",\r\n\t\ticon: \"icon-jj-Terminal\",\r\n\t\t\"is_group\": true,\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Classroom\",\r\n\t\t\t\t\"value\": \"教室管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Terminal\",\r\n\t\t\t\t\"url\": \"/terminal/schoolroom\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Terminal_Manage\",\r\n\t\t\t\t\"value\": \"终端管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Terminal\",\r\n\t\t\t\t\"url\": \"/terminal/client\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"User\",\r\n\t\t\"value\": \"用户\",\r\n\t\ticon: \"icon-jj-men\",\r\n\t\t\"is_group\": true,\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Role_Manage\",\r\n\t\t\t\t\"value\": \"角色管理\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"User\",\r\n\t\t\t\t\"url\": \"/user/role\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Administrator\",\r\n\t\t\t\t\"value\": \"管理用户\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"User\",\r\n\t\t\t\t\"url\": \"/user/admin\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Common_user\",\r\n\t\t\t\t\"value\": \"普通用户\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"User\",\r\n\t\t\t\t\"url\": \"/user/common\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Domain_user\",\r\n\t\t\t\t\"value\": \"域用户\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"User\",\r\n\t\t\t\t\"url\": \"/user/domain\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Monitor\",\r\n\t\t\"value\": \"监控\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-Monitor\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Host_monitoring\",\r\n\t\t\t\t\"value\": \"主机监控\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Monitor\",\r\n\t\t\t\t\"url\": \"/monitor/host\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Desktop_monitoring\",\r\n\t\t\t\t\"value\": \"桌面监控\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Monitor\",\r\n\t\t\t\t\"url\": \"/monitor/desktop\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Alarm_information\",\r\n\t\t\t\t\"value\": \"告警信息\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Monitor\",\r\n\t\t\t\t\"url\": \"/monitor/alarm\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Alarm_policy\",\r\n\t\t\t\t\"value\": \"告警策略\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Monitor\",\r\n\t\t\t\t\"url\": \"/monitor/policy\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Timetable\",\r\n\t\t\"value\": \"排课\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-paike\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Course_list\",\r\n\t\t\t\t\"value\": \"课程列表\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Timetable\",\r\n\t\t\t\t\"url\": \"/scheduler/view\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"Plan\",\r\n\t\t\"value\": \"计划任务\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-012\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Timer_switch\",\r\n\t\t\t\t\"value\": \"定时开关机\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Plan\",\r\n\t\t\t\t\"url\": \"/plan/switch\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Host_switch\",\r\n\t\t\t\t\"value\": \"主机定时开关机\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"Plan\",\r\n\t\t\t\t\"url\": \"/plan/hostSwitch\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"HA\",\r\n\t\t\"value\": \"高可用性\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-001\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"desktop_ha\",\r\n\t\t\t\t\"value\": \"桌面HA\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"HA\",\r\n\t\t\t\t\"url\": \"/HA/desktop\"\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"System\",\r\n\t\t\"value\": \"系统\",\r\n\t\t\"is_group\": true,\r\n\t\ticon: \"icon-jj-Setup\",\r\n\t\t\"sublist\": [\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_deploy\",\r\n\t\t\t\t\"value\": \"快速部署\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/deploy\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_desktop\",\r\n\t\t\t\t\"value\": \"系统桌面\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/desktop\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_ISO\",\r\n\t\t\t\t\"value\": \"系统 ISO\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/iso\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"USB_redirection\",\r\n\t\t\t\t\"value\": \"USB 重定向\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/usb\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"USB_through\",\r\n\t\t\t\t\"value\": \"USB 透传\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/through\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"AutoSnapshot\",\r\n\t\t\t\t\"value\": \"自动快照\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/snapshot\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_set\",\r\n\t\t\t\t\"value\": \"系统设置\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/set\"\r\n\t\t\t},\r\n\t\t\t// {\r\n\t\t\t// \t\"key\": \"USB_device\",\r\n\t\t\t// \t\"value\": \"主机 USB 设备\",\r\n\t\t\t// \t\"is_group\": false,\r\n\t\t\t// \t\"belong\": \"System\",\r\n\t\t\t// \t\"url\": \"/system/device\"\r\n\t\t\t// },\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_backup\",\r\n\t\t\t\t\"value\": \"系统备份\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/backup\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"System_upgrade\",\r\n\t\t\t\t\"value\": \"系统升级\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/upgrade\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"key\": \"Operation_log\",\r\n\t\t\t\t\"value\": \"操作日志\",\r\n\t\t\t\t\"is_group\": false,\r\n\t\t\t\t\"belong\": \"System\",\r\n\t\t\t\t\"url\": \"/system/logs\"\r\n\t\t\t}\r\n\t\t\t// {\r\n\t\t\t// \t\"key\": \"End_log\",\r\n\t\t\t// \t\"value\": \"后台日志\",\r\n\t\t\t// \t\"is_group\": false,\r\n\t\t\t// \t\"belong\": \"System\",\r\n\t\t\t// \t\"url\": \"/system/endlogs\"\r\n\t\t\t// }\r\n\t\t]\r\n\t},\r\n\t{\r\n\t\t\"key\": \"About\",\r\n\t\t\"value\": \"关于\",\r\n\t\ticon: \"icon-jj-about-1\",\r\n\t\t\"is_group\": true,\r\n\t\t\"url\": \"/about\"\r\n\t}\r\n])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/user/controllers.js","angular.module(\"vdi.desktop\", [])\r\n\r\n/* 场景 */\r\n.factory(\"Scene\", [\"$resource\", function($resource){\r\n\treturn $resource(\"/thor/pool/modes\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false },\r\n\t\tsave :\r\n\t\t\t{ method: \"POST\"},\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: \"/thor/pool/mode/:id\", params: {id: \"@id\"} },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: \"/thor/pool/mode/:id\", params: {id: \"@id\"} },\r\n\t\tactive:\r\n\t\t\t{ method: \"PUT\", url: \"/thor/pool/mode/:id\", params: {id: \"@id\"} },\r\n\t\tpowerOn:\r\n\t\t\t{ method: \"POST\", url: \"/thor/pool/mode/action\"},\r\n\t    powerOff:\r\n\t\t\t{ method: \"POST\", url: \"/thor/pool/mode/action\"},\r\n\t    forcePowerOff:\r\n\t\t\t{ method: \"POST\", url: \"/thor/pool/mode/action\"},\r\n\t\thaConfig:\r\n\t\t\t{ method: \"GET\", url: \"/thor/pool/mode/haConfig/:id\", params:{id: \"@id\"} },\r\n\t\tsort:\r\n\t\t\t{ method: \"POST\",url: \"/thor/pool/modes/order\"}\r\n\r\n\t});\r\n}])\r\n/*教学桌面 */\r\n.factory(\"TeachDesktop\", [\"$resource\", function($resource){\r\n\treturn $resource(\"/thor/instance/mode/:id\", { id: \"@id\" }, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false },\r\n\t\tdelete:\r\n\t\t\t{ method:\"DELETE\", url: \"/thor/instances\" },\r\n\t\treset:\r\n\t\t\t{ method:\"POST\" , url:\"/thor/instance/mode/reset\"},\r\n\t\tsave:\r\n\t\t\t{ method:\"POST\" },\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: \"/thor/instance/:id\", params: { id: \"@id\" }, isArray: false },\r\n\t\tstart:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/starts\" },\r\n\t\tshutdown:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/shutdowns\" },\r\n\t\tpause:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/pause\" },\r\n\t\tresume:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/unpause\" },\r\n\t\treboots:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/reboots\" },\r\n\t\tscreenshot:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/screenshot\" },\r\n\t\trename:\r\n\t\t\t{method:\"POST\", url: \"/thor/pool/mode/instance/rename\"}\r\n\t});\r\n}])\r\n/*个人桌面 */\r\n.factory(\"PersonDesktop\", [\"$resource\", function($resource){\r\n\treturn $resource(\"/thor/instance/:id\", { id: \"@id\" }, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: \"/thor/instances\", isArray: false },\r\n\t\tdelete:\r\n\t\t\t{ method:\"DELETE\", url: \"/thor/instances\" },\r\n\t\tsave:\r\n\t\t\t{ method:\"POST\", url: \"/thor/instance\" },\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", isArray: false },\r\n\t\tupdate:\r\n\t\t\t{ method: \"PUT\" },\r\n\t\tstart:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/starts\" },\r\n\t\tshutdown:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/shutdowns\" },\r\n\t\tpause:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/pause\" },\r\n\t\tresume:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/unpause\" },\r\n\t\treboot:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/reboots\" },\r\n\t\tmigrate : \r\n\t\t\t{ method: \"post\",url: \"/thor/instance/livemigration/:id\" , params: { \"id\": \"@id\" } },\r\n\t\tscreenshot:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instances/screenshot/:id\", params: { \"id\": \"@id\" } },\r\n\t\tsaveAsTemplate:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/saveTemplate\" },\r\n\t\t//移动至\r\n\t\tmoveHostList:\r\n\t\t\t{ method: \"GET\", url: \"/thor/ha/instance/move\"},\r\n\t\tmoveTo:\r\n\t\t\t{ method:\"POST\", url: \"/thor/ha/instance/move\"},\r\n\t\t//获取无源数据盘\r\n\t\tlist_passive_disk:\r\n\t\t\t{ method: \"GET\", url: \"/thor/list_passive_volume\"},\r\n\t\t//获取桌面详情信息\r\n\t\tlist_detail:\r\n\t\t\t{ method: \"GET\", url: \"/thor/get_instance_details/:id\", params:{ \"id\": \"@id\"} },\r\n\t\t// 个人模板获取有哪些个人桌面会更新\r\n\t\tupdate_instance:\r\n\t\t\t{ method: \"GET\", url: \"/thor/instance/image/:id\", params: { \"id\": \"@id\" } },\r\n\t\tcheck_can_migrate_host:\r\n\t\t\t{ method:\"POST\", url: \"/thor/check_can_migrate_host\" },\r\n\t\tshare_servers:\r\n\t\t\t{ method: \"GET\", url: \"/thor/share/servers\" }\r\n\t});\r\n}])\r\n/*个人桌面池*/\r\n.factory('DeskPool', ['$resource', function($resource){\r\n\treturn $resource(\"/thor/instances/pool/:id\", { id: \"@id\" }, {\r\n\t\t\tquery:\r\n\t\t\t\t{ method: \"GET\", isArray: false },\r\n\t\t\tdelete:\r\n\t\t\t\t{ method:\"DELETE\", url: \"/thor/instances/pool\" },\r\n\t\t\tsave:\r\n\t\t\t\t{ method:\"POST\", url: \"/thor/instances/pool\" },\r\n\t\t\tget:\r\n\t\t\t\t{ method: \"GET\", isArray: false },\r\n\t\t\tupdate:\r\n\t\t\t\t{ method: \"PUT\",url: \"/thor/instance/pool/:id\", params: { \"id\": \"@id\" }},\r\n\t\t\tstart:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/pool/action\" },\r\n\t\t\tshutdown:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/pool/action\" },\r\n\t\t\tpause:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/pool/pause\" },\r\n\t\t\tresume:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/pool/unpause\" },\r\n\t\t\treboot:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/pool/reboots\" },\r\n\t\t\tmigrate : \r\n\t\t\t\t{ method: \"post\",url: \"/thor/instances/livemigration/:id\" , params: { \"id\": \"@id\" } },\r\n\t\t\tscreenshot:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/screenshot/:id\", params: { \"id\": \"@id\" } },\r\n\t\t\tsaveAsTemplate:\r\n\t\t\t\t{ method: \"POST\", url: \"/thor/instances/saveTemplate\" },\r\n\t\t\t//移动至\r\n\t\t\tmoveHostList:\r\n\t\t\t\t{ method: \"GET\", url: \"/thor/ha/instances/pool/move\"},\r\n\t\t\tmoveTo:\r\n\t\t\t\t{ method:\"POST\", url: \"/thor/ha/instances/move\"},\r\n\t\t\t//获取无源数据盘\r\n\t\t\tlist_passive_disk:\r\n\t\t\t\t{ method: \"GET\", url: \"/thor/list_passive_volume\"},\r\n\t\t\t//获取桌面详情信息\r\n\t\t\tlist_detail:\r\n\t\t\t\t{ method: \"GET\", url: \"/thor/get_instance_details/:id\", params:{ \"id\": \"@id\"} },\r\n\t\t\t// 个人模板获取有哪些个人桌面会更新\r\n\t\t\tupdate_instance:\r\n\t\t\t\t{ method: \"GET\", url: \"/thor/instances/image/:id\", params: { \"id\": \"@id\" } }\r\n\t});\r\n}])\r\n/*个人桌面池详情*/\r\n.factory(\"DeskPoolSecond\", [\"$resource\", function($resource){\r\n\treturn $resource(\"/thor/instances/pool\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false },\r\n\t\tsave :\r\n\t\t\t{ method: \"POST\"},\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: \"/thor/instance/pool/:id\", params: {id: \"@id\"} },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/pool/:id\", params: {id: \"@id\"} },\r\n\t\tactive:\r\n\t\t\t{ method: \"PUT\", url: \"/thor/instance/pool/:id\", params: {id: \"@id\"} },\r\n\t\tstart:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/starts\" },\r\n\t\tshutdown:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/shutdowns\"},\r\n\t\tpause:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/pause\" },\r\n\t\tresume:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/unpause\" },\r\n\t\treboots:\r\n\t\t\t{ method: \"POST\", url: \"/thor/instance/reboots\" },\r\n\t\tmoveHostList:\r\n\t\t\t{ method: \"GET\", url: \"/thor/ha/instance/move\"},\r\n\t\tmoveTo:\r\n\t\t\t{ method:\"POST\", url: \"/thor/ha/instance/move\"},\r\n\t});\r\n}])\r\n//教学桌面--桌面修改\r\n.factory(\"SenceAlter\", [\"$resource\", function($resource){\r\n\tvar res = $resource(\"/thor/pool/mode/new\", null, {\r\n\t\tquery: \r\n\t\t    {method: \"GET\", isArray: false},\r\n\t\tsave: \r\n\t\t    {method: \"POST\"}\r\n\t});\r\n\treturn res;\r\n}])\r\n\r\n/* 教学、个人公用 */\r\n.factory(\"VMCommon\", [\"$resource\", function($resource){\r\n\tvar base_url = \"/thor/instance\";\r\n\treturn $resource(base_url, { id: \"@id\" }, {\r\n\t\tstart:\r\n\t\t\t{ method: \"POST\", url: base_url +\"/starts\"},\r\n\t\tshutdowns:\r\n\t\t\t{ method: \"POST\", url: base_url +\"/shutdowns\"},\r\n\t\tpause:\r\n\t\t\t{ method: \"POST\", url: base_url + \"/pause\"},\r\n\t\tresume:\r\n\t\t\t{ method: \"POST\", url: base_url + \"/unpause\"},\r\n\t\treboots:\r\n\t\t\t{ method: \"POST\", url: base_url + \"/reboots\"},\r\n\t\tscreenshot:\r\n\t\t\t{ method: \"POST\", url: base_url + \"/screenshot\"},\r\n\t\t// 列出桌面快照\r\n\t\tlist_snapshot:\r\n\t\t\t{ method: \"GET\", url:base_url + \"/snapshot\"},\r\n\t\t// 创建快照\r\n\t\ttake_snapshot:\r\n\t\t\t{ method:\"POST\", url:base_url + \"/snapshot\"},\r\n\t\trestore_snapshot:\r\n\t\t\t{ method:\"POST\", url:base_url + \"/snapshot\"},\r\n\t\tdelete_snapshot:\r\n\t\t\t{ method:\"DELETE\", url:base_url + \"/snapshot\"},\r\n\t\t// 获取在线迁移主机\r\n\t\tget_live_move_hosts:\r\n\t\t\t{ method: \"GET\", url: \"/thor/ha/instance/live/move\"},\r\n\t\t//在线迁移\r\n\t\tlive_move:\r\n\t\t\t{ method: \"POST\", url: \"/thor/ha/instance/live/move\"},\r\n\t\tlist_template:\r\n\t\t\t{ method: \"GET\", url: \"/thor/image/simple/:type\", params:{ \"type\": \"@type\"} },\r\n\t});\r\n}])\r\n// 筛选出选中的元素。若field参数存在，算出所有选中元素field字段的累计值\r\n.filter('selectedFilter',function(){\r\n\treturn function(list,field){\r\n\t\tif(list){\r\n\t\t\tif(field){\r\n\t\t\t\tvar _list = list.filter(function(item){ return item._selected }).map(function(item){ return item[field] });\r\n\t\t\t\treturn _list.length ? _list.reduce(function(a,b){return a + b}) : 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn list.filter(function(item){ return item._selected });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n})\r\n// 个人桌面列表控制器\r\n.controller(\"vdiDesktopPersonalListController\", [\"$scope\",\"$modal\", \"PersonDesktop\", \"VMCommon\", \"$interval\", \"$filter\",\"PersonTemplate\",\"$$$os_types\",\"$$$I18N\",\"Server\",\"UserRole\",\"$location\",\"$q\",\"Admin\",\"User\",\"Depart\",\"TreeInstances\",\r\n\tfunction($scope,$modal, person_desktop, vm, $interval, $filter, tmpl,$$$os_types,$$$I18N,Server,UserRole,$location,$q,Admin,UsercommonList,Depart,TreeInstances){\r\n\tlet hasTerminalpermission = UserRole.currentUserRoles.filter(function(role){ return role=='Terminal' }).length;\r\n\tlet hasTerminalManagepermission = UserRole.currentUserRoles.filter(function(role){ return role=='Terminal_Manage' }).length;\r\n\tlet hasClassroompermission = UserRole.currentUserRoles.filter(function(role){ return role=='Classroom' }).length;\r\n\t$scope.linkTerminal = hasTerminalpermission && hasTerminalManagepermission && hasClassroompermission ? true:false;\r\n\t$scope.inCurrentUserPool = function(pool){\r\n\t\tif($$$storage.getSessionStorage(\"loginInfo\"))\r\n\t\t\treturn JSON.parse($$$storage.getSessionStorage(\"loginInfo\")).pool.indexOf(pool)>-1\r\n\t};\r\n\r\n\r\n\tif($location.$$search.name)\r\n\t\t$scope.searchText = decodeURIComponent($location.$$search.name);\r\n\r\n\t$interval(function(){\r\n\t\tvar filterSearch = $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n\t\tvar filterSearchPage = $filter(\"paging\")(filterSearch, $scope.currentPage, $scope.pagesize);\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"instanceIDS\", filterSearchPage.map(item => item.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"instancesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(item.task_state){\r\n\t\t\t\titem.other_status = 'other';\r\n\t\t\t}else{\r\n\t\t\t\titem.other_status = 'certain';\r\n\t\t\t}\r\n\t\t\tif(item.status == 'updating' || item.status == 'making'){\r\n\t\t\t\titem._ignore = true;\r\n\t\t\t}else{\r\n\t\t\t\titem._ignore = false;\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t// $scope.updateData(\"\", $scope.select, $scope.depart);\r\n\t});\r\n\t$scope.getObjLength = function(obj){\r\n\t\ttry{\r\n\t\t\treturn Object.keys(obj).length;\r\n\t\t}catch(err){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.depart = {name: '全部', id: -1, full_path: 'root'};\r\n\t$scope.refresh = (_s = $scope) => {\r\n\t\t_s.depart = $$$storage.getSessionStorage('depart')?JSON.parse($$$storage.getSessionStorage('depart')):$scope.depart;\r\n\t\tperson_desktop.query(res => {\r\n\t\t\t// _s.rows = _s.select==''?res.result:res.result.filter(function(item){ return item.status == _s.select });\r\n\t\t\tres.result.forEach(function(desk){\r\n\t\t\t\tif(desk.user_group==\"\"){\r\n\t\t\t\t\tdesk.user_group=$$$I18N.get(\"管理用户\")\r\n\t\t\t\t}\r\n\t\t\t\tif(desk.task_state){\r\n\t\t\t\t\tdesk.other_status = 'other';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdesk.other_status = 'certain';\r\n\t\t\t\t}\r\n\t\t\t\tif(desk.status == 'updating' || desk.status == 'making'){\r\n\t\t\t\t\tdesk._ignore = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdesk._ignore = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t_s.allRows = res.result;\r\n\t\t\t_s.updateData(\"\", _s.select, _s.depart);\r\n\t\t\t_s.rows.forEach(row => {\r\n\t\t\t\tlet os = $$$os_types.filter(item => item.key === row.os_type)[0];\r\n\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\trow.detailData = {};\r\n\t\t\t});\r\n\t\t\t_s.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.getDetail = function(it){\r\n\t\t$scope.loading_detail = true;\r\n\t\tperson_desktop.list_detail({id:it.id},function(res){\r\n\t\t\tit.detailData = res.result;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading_detail = false;\r\n\t\t});\r\n\t};\r\n\t$scope.expand = function(row){\r\n\t\t$scope.rows.forEach(r => {\r\n\t\t\tif(row.id === r.id){\r\n\t\t\t\tr._expand = !row._expand;\r\n\t\t\t\tif(r._expand){\r\n\t\t\t\t\t$scope.getDetail(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tr._expand = false;\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\t$scope.pagesize    = Number($$$storage.getSessionStorage('personl_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n \t$scope.$watch(\"pagesize\",function(newvalue){\r\n \t\t$$$storage.setSessionStorage('personl_pagesize', newvalue);\r\n\t});\r\n\t$scope.loading = true;\r\n\t$scope.rows = [];\r\n\t$scope.refresh();\r\n\t$scope.openAddDomainDialog = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.is_domain_user && !row.ad_server_name });\r\n\t\tif(rows.length === 0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalDomain_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar modal = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/add_server.html\",\r\n\t\t\tcontroller:\"personalAddServerDialog\",\r\n\t\t\tresolve:{param:function(){return angular.copy(rows);}}\r\n\t\t});\r\n\t\tmodal.result.then(function(res){\r\n\t\t\t$scope.refresh();\r\n\t\t});\r\n\t};\r\n\t$scope.personExitDomain = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.ad_server_name; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalDomain_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='退域'>\"+\r\n\t\t\t\t\t\t\t\"退域</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='DOMAIN_EXIT_TIP'>所选桌面在下一次开机时，将自动执行退域的操作，是否确定？</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tServer.domain_set_person({\r\n\t\t\t\t\t\t\t\tinstance_ids:rows.map(function(row){ return row.id }),\r\n\t\t\t\t\t\t\t\thas_domain:false\r\n\t\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.updateData = function(text,select,depart){\r\n\t\t$$$storage.setSessionStorage('depart', JSON.stringify(depart));\r\n\t\t$scope.rows = $scope.allRows.filter(function(row){\r\n\t\t\trow._selected = false;\r\n\t\t\tif(select){\r\n\t\t\t\tif(text && text.trim()){\r\n\t\t\t\t\treturn row.status === select || row.other_status === select;\r\n\t\t\t\t}\r\n\t\t\t\treturn row.status === select || row.other_status === select;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tvar ids = [];\r\n\t\tif(depart.type=='common'){\r\n\t\t\t$scope.rows = $scope.rows.filter(it=>it.user_group.indexOf(depart.dept_name)>-1);\r\n\t\t}else if(depart.type=='domain'){\r\n\t\t\t$scope.rows = $scope.rows.filter(it=>it.user_group===depart.domain_name);\r\n\t\t}else if(depart.type=='admin'){\r\n\t\t\t$scope.rows = $scope.rows.filter(it=>it.user===depart.name);\r\n\t\t}else if(depart.type=='adminAll'){\r\n\t\t\t$scope.rows = $scope.rows.filter(it=>it.user_group==$$$I18N.get(\"管理用户\"));\r\n\t\t}\r\n\t};\r\n\r\n\tvar _controllerScope = $scope;\r\n\t/**\r\n\t* [selectMode 部门域选择]\r\n\t*/\r\n    $scope.selectMode = function(){\r\n         $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/personal_user_group.html\",\r\n\t\t\tsize: 'sm-md',\r\n\t\t\tcontroller:function($scope,$modalInstance){\r\n\t\t\t\tfunction formatData(d,name){\r\n\t\t\t\t\titeration(d,name);\r\n\t\t\t\t\treturn d;\r\n\t\t\t\t}\r\n\t\t\t\tfunction iteration(data,childName){\r\n\t\t\t\t\tfor(var i = 0 ; i < data.length ; i++){\r\n\t\t\t\t\t\tdata[i]['type'] = 'common';\r\n\t\t\t\t\t\tdata[i]['name'] = data[i]['dept_name'];\r\n\t\t\t\t\t\t$scope.expandnodes.push(data[i]);\r\n\t\t\t\t\t\tif(data[i][childName] && data[i][childName].length){\r\n\t\t\t\t\t\t\tvar len = iteration(data[i][childName],childName);\r\n\t\t\t\t\t\t\tif(len === 0){\r\n\t\t\t\t\t\t\t\tdata[i] = undefined;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(data[i][childName] && data[i][childName].length === 0){\r\n\t\t\t\t\t\t\tdata[i]= undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(i = 0 ; i < data.length ; i++){\r\n\t\t\t\t\t\tif(data[i] === undefined){\r\n\t\t\t\t\t\t\tdata.splice(i,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn data.length;\r\n\t\t\t\t}\r\n\t\t\t    function getAdminNum(rows){\r\n\t\t\t\t\treturn rows.reduce(function(count, item){\r\n\t\t\t\t\t\treturn count + item.desktop_num;\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.loading = true;\r\n\t\t\t\tTreeInstances.query(function(res){\r\n\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\tres.result.forEach(function(item){\r\n\t\t\t\t\t\tif(item.dept_name){\r\n\t\t\t\t\t\t\titem.name = item.dept_name;\r\n\t\t\t\t\t\t}else if(item.domain_name){\r\n\t\t\t\t\t\t\titem.name = item.domain_name;\r\n\t\t\t\t\t\t}else{}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.expandnodes = [];\r\n\t\t\t\t\tvar adminData = res.result.filter(function(item){ return item.type == 'admin' });\r\n\t\t\t\t\tvar admins = [{name: $$$I18N.get(\"管理用户\"), type: 'adminAll', children: adminData, desktop_num: getAdminNum(adminData)}];\r\n\t\t\t\t\tvar domains = res.result.filter(function(item){ return item.type == 'domain' });\r\n\t\t\t\t\tvar commons = res.result.filter(function(item){ return item.type == 'common' });\r\n\t\t\t\t\tcommons = formatData(commons,\"children\",$scope.expandnodes);\r\n\t\t\t\t\tvar all = [{id: -1, name:$$$I18N.get(\"全部\"), children: admins.concat(commons).concat(domains)}];\r\n\t\t\t\t\t$scope.treedata = all;\r\n\t\t\t\t\t$scope.expandnodes = $scope.expandnodes.concat(admins).concat(adminData).concat(domains).concat(all);\r\n\t\t\t\t\t$scope.selected = $scope.expandnodes.filter(function(item){ return item.name==_controllerScope.depart.name; })[0];\r\n\t\t\t\t\t$scope.selected._selected = true;\r\n\t\t\t\t\t$scope.showSelected = function(node, selected){\r\n\t\t\t\t\t\tnode._selected = selected;\r\n\t\t\t\t\t\t$scope.selected = node;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t    _controllerScope.depart = $scope.selected && $scope.selected._selected?$scope.selected:{name: $$$I18N.get(\"全部\"), id: -1, full_path: 'root'};\r\n\t\t\t\t    _controllerScope.updateData(_controllerScope.searchText, _controllerScope.select, _controllerScope.depart)\r\n\t\t\t\t    $modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t $modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n         })\r\n    }\r\n    /**\r\n\t* [selectMode 部门域选择]_____end\r\n\t*/\r\n\t\r\n\r\n\r\n\t$scope.start = item => {\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'shutdown' || row.status == 'suspended') && !row.task_state; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvm.start({instance_ids: rows.map(row => \r\n\t\t\t\t{return row.instance_id})}, () => \r\n\t\t\t{$scope.refresh();});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定强制关闭桌面吗'>确定强制关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tvm.shutdowns({instance_ids: rows.map(row => {\r\n\t\t\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\t\t\treturn row.instance_id;\r\n\t\t\t\t\t\t\t\t})},() => { _controllerScope.refresh()});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP3\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭桌面吗'>确定自然关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.shutdowns({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.restart = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP4\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重启'>\"+\r\n\t\t\t\t\t\t\t\"桌面重启</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启桌面吗'>确定重启桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.reboots({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.pause = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'running' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP5\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面暂停'>\"+ \r\n\t\t\t\t\t\t\"桌面暂停</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定暂停桌面吗'>确定暂停桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.pause({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.resume = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'paused' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP6\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面恢复'>\"+\r\n\t\t\t\t\t\t\"桌面恢复</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定恢复桌面吗'>确定恢复桌面吗?</p><footer   class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.resume({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.hasPausedStatus = function(){\r\n\t\tvar flag = false;\r\n\t\tvar _selected = $scope.rows.filter(function(row){ return row._selected });\r\n\t\tvar _hasPaused = _selected.filter(function(row){ return row.status=='paused' });\r\n\t\tif(_hasPaused.length==_selected.length){\r\n\t\t\tflag = true;\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status!=='paused' });\r\n\t\tvar is_running = rows.some(function(row){ return row.status == 'running' && !row.task_state});\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面删除'>\"+\r\n\t\t\t\t\t\"桌面删除</h4></div><div class='modal-body'><form class='form-horizontal'><p ng-show='!is_run' style='margin-bottom:20px;' localize='桌面删除后无法恢复，确定删除桌面吗'>桌面删除后无法恢复，确定删除桌面吗?</p><p ng-show='is_run' style='margin-bottom:20px;' localize='存在未关机的桌面，仍然删除桌面吗'>存在未关机的桌面，仍然删除桌面吗?</p><div ng-show='has_data_disk' style='margin-bottom:20px;'><label class='checkbox-inline'><input class='checkbox' ng-model='delete_disk' type='checkbox'/><span  localize='删除数据盘'>删除数据盘</span></label></div><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.is_run = is_running;\r\n\t\t\t\t$scope.delete_disk = true;\r\n\t\t\t\t$scope.has_data_disk = rows.some(function(d){ return d.local_gb});\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tperson_desktop.delete({\r\n\t\t\t\t\t\tinstance_ids: rows.map(function(row){ return row.instance_id; }),\r\n\t\t\t\t\t\tforce_delete_data: this.delete_disk\r\n\t\t\t\t\t}, function(data){\r\n\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t}, function(error){\r\n\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\t\t\t\r\n\t};\r\n\t$scope.moveto = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected});\r\n\t\tvar can_migrate_rows = rows.filter(function(item){ return item.virtual_type === 'kvm' && item.status=='shutdown' && !item.task_state });\r\n\t\tif(!can_migrate_rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar can_migrate_host = [];\r\n\t\t\t$scope.moveto_loading = true;\r\n\t\t\tperson_desktop.check_can_migrate_host({instance_ids:can_migrate_rows.map(function(item){ return item.id })},function(res){\r\n\t\t\t\tfor(var i in res.result){can_migrate_host.push({id:i,value:res.result[i]})};\r\n\t\t\t\tcan_migrate_host = can_migrate_host.filter(function(item){ return item.value });\r\n\t\t\t\t$scope.moveto_loading = false;\r\n\t\t\t\tif(!can_migrate_host.length){\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP1\"),\r\n\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \r\n\t\t\t\t\t\t`<section id='widget-grid'>\r\n\t\t\t\t\t\t\t<div class='modal-content'>\r\n\t\t\t\t\t\t\t\t<div class='modal-header'>\r\n\t\t\t\t\t\t\t\t\t<button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button>\r\n\t\t\t\t\t\t\t\t\t<h4 class='modal-title' id='mySmallModalLabel' localize='桌面移动'>桌面移动</h4>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='modal-body'>\r\n\t\t\t\t\t\t\t\t\t<form class='form-horizontal' novalidate name='movetoForm'>\r\n\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t\t<label class='control-label col-xs-4' localize='选择目标主机'>选择目标主机</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class='col-xs-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<select class='form-control' ng-model='host' ng-options='host for host in hosts' required>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\" localize=\"--请选择--\"> --请选择-- </option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<img style=\"position: relative;top: 3px\" ng-if=\"hosts_loading\" width=\"24\" height=\"24\" src=\"img/HLloading.gif\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<footer class='text-right'><img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''>\r\n\t\t\t\t\t\t\t\t\t\t<button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定' ng-disabled='movetoForm.$invalid'>确定</button>\r\n\t\t\t\t\t\t\t\t\t\t<button ng-if='!loading' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>`,\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.hosts = [];\r\n\t\t\t\t\t\t$scope.hosts_loading = true;\r\n\t\t\t\t\t\tperson_desktop.moveHostList({instance_ids:rows.map(function(item){ return item.id })}, function(res){\r\n\t\t\t\t\t\t\t$scope.hosts = res.result;\r\n\t\t\t\t\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t\t\t\t\t$scope.hosts_loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\t\tperson_desktop.moveTo({instance_ids:can_migrate_host.map(function(item){ return item.id }),host:_this.host},function(){\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\t\t\t\tcontent:$$$I18N.get(\"桌面移动成功\"),\r\n\t\t\t\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"md\"\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.migration = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status === 'running' && !row.task_state});\r\n\t\tif(!rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \r\n\t\t\t\t`<section id='widget-grid'>\r\n\t\t\t\t\t<div class='modal-content'>\r\n\t\t\t\t\t\t<div class='modal-header'>\r\n\t\t\t\t\t\t\t<button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button>\r\n\t\t\t\t\t\t\t<h4 class='modal-title' id='mySmallModalLabel' localize='动态迁移'></h4>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class='modal-body'>\r\n\t\t\t\t\t\t\t<form class='form-horizontal' novalidate name='movetoForm'>\r\n\t\t\t\t\t\t\t\t<div class='form-group'>\r\n\t\t\t\t\t\t\t\t\t<label class='control-label col-xs-4' localize='选择目标主机'>选择目标主机</label>\r\n\t\t\t\t\t\t\t\t\t\t<div class='col-xs-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t<select class='form-control' ng-model='host' ng-options='host for host in hosts' required>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\" localize=\"--请选择--\">请选择</option>\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<img style=\"position: relative;top: 3px\" ng-if=\"hosts_loading\" width=\"24\" height=\"24\" src=\"img/HLloading.gif\">\r\n\t\t\t\t\t\t\t\t\t\t<a style=\"position: relative;top: 5px;\" ng-if=\"!hosts_loading && !hosts.length\" class=\"mypopover\" htmlpopover='{{migrationTip}}'><i class=\"fa fa-question-circle\"></i></a>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<footer class='text-right'>\r\n\t\t\t\t\t\t\t\t\t\t<img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''>\r\n\t\t\t\t\t\t\t\t\t\t<button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定' ng-disabled='movetoForm.$invalid'>确定</button>\r\n\t\t\t\t\t\t\t\t\t\t<button ng-if='!loading' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\r\n\t\t\t\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</section>`,\t\t\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.hosts = [];\r\n\t\t\t\t$scope.hosts_loading = true;\r\n\t\t\t\t$scope.migrationTip = $$$I18N.get('migrationTip');\r\n\t\t\t\tvm.get_live_move_hosts({instance_ids:rows.map(function(item){ return item.id })}, function(res){\r\n\t\t\t\t\t$scope.hosts = res.result;\r\n\t\t\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t\t\t$scope.hosts_loading = false;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\tvm.live_move({\r\n\t\t\t\t\t\tinstance_ids:rows.map(function(item){ return item.id }),\r\n\t\t\t\t\t\thost:_this.host\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\t\tcontent:$$$I18N.get(\"桌面迁移成功\"),\r\n\t\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"md\"\r\n\t\t});\r\n\t};\r\n\t$scope.view = function(item){\r\n\t\twindow.open(\"desktopScreenshot.html#\" + item.id, \"person_desktop_\" + item.id);\r\n\t};\r\n\t$scope.viewStorage = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/view_storage.html\",\r\n\t\t\tcontroller:['$scope','$modalInstance',function($scope,$modalInstance){\r\n\t\t\t\tperson_desktop.list_detail({id:item.id},function(res){\r\n\t\t\t\t\t$scope.data = res.result;\r\n\t\t\t\t\t$scope.data.hostname = item.hostname;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t});\r\n\t};\r\n\t\r\n}])\r\n\r\n.controller(\"vdiDesktopTeachListController\", [\r\n\"$scope\", \"$route\",\"$modal\", \"$routeParams\", \"TeachDesktop\",\"PersonDesktop\", \"VMCommon\", \"$interval\", \"$filter\",\"$$$I18N\", \"UserRole\",\"$location\",\r\nfunction($scope, $route,$modal, $routeParams,teach_desktop,person_desktop, vm, $interval, $filter, $$$I18N, UserRole, $location){\r\n\tif($location.$$search.name)\r\n\t\t$scope.searchText = decodeURIComponent($location.$$search.name);\r\n\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\t$scope.refresh = getList;\r\n\t$interval(function(){\r\n\t\tvar filterSearch = $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n\t\tvar filterSearchPage = $filter(\"paging\")(filterSearch, $scope.currentPage, $scope.pagesize);\r\n\t\t$scope.$root && $scope.rows && $scope.$root.$broadcast(\"instanceIDS\", filterSearchPage.map(function(item){ return item.id }));\r\n\t}, 1000);\r\n\t$scope.$on(\"instancesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(item.task_state){\r\n\t\t\t\titem.other_status = 'other';\r\n\t\t\t}else{\r\n\t\t\t\titem.other_status = 'certain';\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t// $scope.updateData($scope.searchText, $scope.select);\r\n\t});\r\n\r\n\tvar _controllerScope = $scope;\r\n\tvar _id =  $route.current.params.id;\r\n\tfunction getList(){\r\n\t\tteach_desktop.query({ id : _id }, function(res){\r\n\t\t\tres.result.forEach(function(desk){\r\n\t\t\t\tif(desk.task_state){\r\n\t\t\t\t\tdesk.other_status = 'other';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdesk.other_status = 'certain';\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t_controllerScope.rows = res.result.sort(function(a,b){\r\n\t\t\t\tvar _numa,_numb;\r\n\t\t\t\tvar get_num = function(tar){\r\n\t\t\t\t\tfor(var i = tar.length - 1 ; i-- ; i >= 0 ){\r\n\t\t\t\t\t\tif(!Number(tar[i])){\r\n\t\t\t\t\t\t\treturn Number(tar.substring(i + 1,tar.length));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t_numa = get_num( a.display_name );\r\n\t\t\t\t_numb = get_num( b.display_name );\r\n\t\t\t\treturn (_numa - _numb) * (false ? -1 : 1);\r\n\t\t\t});\r\n\t\t\t_controllerScope.allRows = res.result;\r\n\t\t\t_controllerScope.res = res;\r\n\t\t\t_controllerScope.loading = false;\r\n\t\t\t_controllerScope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"桌面\", \"教学桌面\", res.mode_name]);\r\n\t\t},function(error){ \r\n\t\t\tlocation.replace(\"#desktop/scene/\");\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"NOEXSIT_SECNE_TIP\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tgetList();\r\n\t$scope.refresh = getList;\r\n\t$scope.pagesize = parseInt($$$storage.getSessionStorage('teach_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n\r\n\t$scope.$watch(\"pagesize\",function(newvalue){\r\n\t\tif(newvalue){\r\n\t\t\t$$$storage.setSessionStorage('teach_pagesize', newvalue);\r\n\t\t}\r\n\t});\r\n\t// $scope.$watch(\"select\",function(newvalue){\r\n\t// \tif(newvalue && $scope.allRows){\r\n\t// \t\t$scope.rows = $scope.allRows.filter(function(item){ return item.status == newvalue});\r\n\t// \t\t$$$storage.setSessionStorage('status', newvalue);\r\n\t// \t}\r\n\t// });\t\r\n\t$scope.updateData = function(text,select){\r\n\t\t$scope.rows = $scope.allRows.filter(function(row){\r\n\t\t\trow._selected = false;\r\n\t\t\tif(select){\r\n\t\t\t\tif(text && text.trim()){\r\n\t\t\t\t\treturn row.status === select || row.other_status === select;\r\n\t\t\t\t}\r\n\t\t\t\treturn row.status === select || row.other_status === select;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t};\r\n\t$scope.sortDesktopName = function(name,bool){\r\n\t\t$scope.rows.sort(function(a,b){\r\n\t\t\tvar _numa,_numb;\r\n\t\t\tvar get_num = function(tar){\r\n\t\t\t\tfor(var i = tar.length - 1 ; i-- ; i >= 0 ){\r\n\t\t\t\t\tif(!Number(tar[i])){\r\n\t\t\t\t\t\treturn Number(tar.substring(i + 1,tar.length));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t_numa = get_num( a[name] );\r\n\t\t\t_numb = get_num( b[name] );\r\n\t\t\treturn (_numa - _numb) * (bool ? -1 : 1);\r\n\t\t});\r\n\t};\r\n\t\r\n\t$scope.start = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'shutdown' || row.status == 'suspended') && !row.task_state; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\trows.map(function(row){\r\n\t\t\t\trow._selected = false ;\r\n\t\t\t});\r\n\t\t\tvm.start({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t_controllerScope.refresh();\t\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定强制关闭桌面吗'>确定强制关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tvm.shutdowns({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP3\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭桌面吗'>确定自然关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.shutdowns({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.restart = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP4\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重启'>\"+\r\n\t\t\t\t\t\t\t\"桌面重启</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启桌面吗'>确定重启桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.reboots({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.pause = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'running' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP5\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面暂停'>\"+ \r\n\t\t\t\t\t\t\"桌面暂停</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定暂停桌面吗'>确定暂停桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.pause({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.resume = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'paused' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP6\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面恢复'>\"+\r\n\t\t\t\t\t\t\"桌面恢复</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定恢复桌面吗'>确定恢复桌面吗?</p><footer   class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.resume({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.reset = function(item){\r\n\t\tvar row = item;\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重置'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定重置桌面吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tteach_desktop.reset({instance_id: row.instance_id}, function(data){\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle:$$$I18N.get(\"操作结果\"),\r\n\t\t\t\t\t\t\tcontent:$$$I18N.get(\"重置成功\"),\r\n\t\t\t\t\t\t\ttimeout:5000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\t\t\t\r\n\t};\r\n\t$scope.alter = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/teach_alter.html\",\r\n\t\t\tcontroller: function($scope,$modalInstance){\r\n\t\t\t\t$scope.vm_hostname = item.vm_hostname;\r\n\t\t\t\t$scope.post = function(){\r\n\t\t\t\t\tvar _this= this;\r\n\t\t\t\t\tteach_desktop.rename({\r\n\t\t\t\t\t\t'instance_ids':[item.id],\r\n\t\t\t\t\t\t'instance_name':_this.vm_hostname\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t_controllerScope.refresh();\t\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.dismiss();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\t$scope.rename = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(r){ return r._selected && r.status == \"shutdown\" && !r.task_state });\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/teach_rename.html\",\r\n\t\t\t\tcontroller: function($scope,$modalInstance){\r\n\t\t\t\t\t$scope.addZero = function(len,str_begin,str_end){\r\n\t\t\t\t\t\tif(str_end && str_begin){\r\n\t\t\t\t\t\t\tvar end_len = str_end.toString().length;\r\n\t\t\t\t\t\t\tif(end_len < len){\r\n\t\t\t\t\t\t\t\treturn  str_begin + new Array(len - end_len+1).join(\"0\") + str_end;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\treturn str_begin + str_end;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\t\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar _this= this;\r\n\t\t\t\t\t\tteach_desktop.rename({\r\n\t\t\t\t\t\t\t'instance_ids' : rows.map(function(row){ return row.instance_id}),\r\n\t\t\t\t\t\t\t'hostname_type' : _this.hostNameType,\r\n\t\t\t\t\t\t\t'hostname_prefix' :_this.hostNamePre,\r\n\t\t\t\t\t\t\t'hostname_beginwith':_this.hostNameBegin\r\n\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.dismiss();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopTeachList_TIP7\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.view = function(item){\r\n\t\twindow.open(\"desktopScreenshot.html#\" + item.id, \"person_desktop_\" + item.id);\r\n\t};\r\n\t$scope.moveto = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected});\r\n\t\tvar can_migrate_rows = rows.filter(function(item){ return item.virtual_type === 'kvm' && item.status=='shutdown' && !item.task_state });\r\n\t\tif(!can_migrate_rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar can_migrate_host = [];\r\n\t\t\t$scope.moveto_loading = true;\r\n\t\t\tperson_desktop.check_can_migrate_host({instance_ids:can_migrate_rows.map(function(item){ return item.id })},function(res){\r\n\t\t\t\tvar datas = [];\r\n\t\t\t\tfor(var i in res.result){can_migrate_host.push({id:i,value:res.result[i]})};\r\n\t\t\t\tcan_migrate_host = can_migrate_host.filter(function(item){ return item.value });\r\n\t\t\t\t$scope.moveto_loading = false;\r\n\t\t\t\tif(!can_migrate_host.length){\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP1\"),\r\n\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \r\n\t\t\t\t\t\t`<section id='widget-grid'>\r\n\t\t\t\t\t\t\t<div class='modal-content'>\r\n\t\t\t\t\t\t\t\t<div class='modal-header'>\r\n\t\t\t\t\t\t\t\t\t<button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button>\r\n\t\t\t\t\t\t\t\t\t<h4 class='modal-title' id='mySmallModalLabel' localize='桌面移动'>桌面移动</h4>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class='modal-body'>\r\n\t\t\t\t\t\t\t\t\t<form class='form-horizontal' name='movetoForm' novalidate>\r\n\t\t\t\t\t\t\t\t\t\t<div class='form-group'>\r\n\t\t\t\t\t\t\t\t\t\t\t<label class='control-label col-xs-4' localize='选择目标主机'>选择目标主机</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class='col-xs-4'>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<select class='form-control' ng-model='host' ng-options='host for host in hosts' required>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"\" localize='--请选择--'></option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<img style=\"position: relative;top: 3px\" ng-if=\"hosts_loading\" width=\"24\" height=\"24\" src=\"img/HLloading.gif\">\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<footer class='text-right'>\r\n\t\t\t\t\t\t\t\t\t\t\t<img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''>\r\n\t\t\t\t\t\t\t\t\t\t\t<button class='btn btn-primary' data-ng-click='ok()' ng-if='!loading' localize='确定' ng-disabled='movetoForm.$invalid'>确定</button>\r\n\t\t\t\t\t\t\t\t\t\t\t<button ng-if='!loading' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\r\n\t\t\t\t\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>`,\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.hosts = [];\r\n\t\t\t\t\t\t$scope.hosts_loading = true;\r\n\t\t\t\t\t\tperson_desktop.moveHostList({instance_ids:rows.map(function(item){ return item.id })}, function(res){\r\n\t\t\t\t\t\t\t$scope.hosts = res.result;\r\n\t\t\t\t\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t\t\t\t\t$scope.hosts_loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\t\tperson_desktop.moveTo({instance_ids:can_migrate_host.map(function(item){ return item.id }),host:_this.host},function(){\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\t\t\t\tcontent:$$$I18N.get(\"桌面移动成功\"),\r\n\t\t\t\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"md\"\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.migration = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status === 'running' && !row.task_state});\r\n\t\tif(!rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"DESKTOP_MOVE_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \r\n\t\t\t`<section id='widget-grid'>\r\n\t\t\t\t<div class='modal-content'>\r\n\t\t\t\t\t<div class='modal-header'>\r\n\t\t\t\t\t\t<button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button>\r\n\t\t\t\t\t\t<h4 class='modal-title' id='mySmallModalLabel' localize='动态迁移'></h4>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class='modal-body'>\r\n\t\t\t\t\t\t<form class='form-horizontal' novalidate name='movetoForm'>\r\n\t\t\t\t\t\t\t<div class='form-group'><label class='control-label col-xs-4' localize='选择目标主机'>选择目标主机</label>\r\n\t\t\t\t\t\t\t\t<div class='col-xs-4'>\r\n\t\t\t\t\t\t\t\t\t<select class='form-control' ng-model='host' ng-options='host for host in hosts' required>\r\n\t\t\t\t\t\t\t\t\t\t<option value=\"\" localize=\"--请选择--\">请选择</option>\r\n\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<img style=\"position: relative;top: 3px\" ng-if=\"hosts_loading\" width=\"24\" height=\"24\" src=\"img/HLloading.gif\">\r\n\t\t\t\t\t\t\t\t<a style=\"position: relative;top: 5px;\" ng-if=\"!hosts_loading && !hosts.length\" class=\"mypopover\" htmlpopover='{{migrationTip}}'><i class=\"fa fa-question-circle\"></i></a>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<footer class='text-right'>\r\n\t\t\t\t\t\t\t\t<img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''>\r\n\t\t\t\t\t\t\t\t<button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定' ng-disabled='movetoForm.$invalid'>确定</button>\r\n\t\t\t\t\t\t\t\t<button ng-if='!loading' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\r\n\t\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</section>`,\t\t\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.hosts = [];\r\n\t\t\t\t$scope.hosts_loading = true;\r\n\t\t\t\t$scope.migrationTip = $$$I18N.get('migrationTip');\r\n\t\t\t\tvm.get_live_move_hosts({instance_ids:rows.map(function(item){ return item.id })}, function(res){\r\n\t\t\t\t\t$scope.hosts = res.result;\r\n\t\t\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t\t\t$scope.hosts_loading = false;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tvar _this = this;\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\tvm.live_move({\r\n\t\t\t\t\t\tinstance_ids:rows.map(function(item){ return item.id }),\r\n\t\t\t\t\t\thost:_this.host\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\t\tcontent:$$$I18N.get(\"桌面迁移成功\"),\r\n\t\t\t\t\t\t\ttimeout:6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"md\"\r\n\t\t});\r\n\t};\r\n\t$scope.viewStorage = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/view_storage.html\",\r\n\t\t\tcontroller:['$scope','$modalInstance',function($scope,$modalInstance){\r\n\t\t\t\t$scope.loading = true;\r\n\t\t\t\tperson_desktop.list_detail({id:item.id},function(res){\r\n\t\t\t\t\t$scope.data = res.result;\r\n\t\t\t\t\t$scope.data.hostname = item.hostname;\r\n\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t});\r\n\t};\r\n}])\r\n\r\n.controller(\"vdiDesktopSceneListController\", [\r\n\"$scope\", \"$modal\", \"Scene\", \"$filter\", \"TeachTemplate\", \"SchoolRoom\", \"$$$I18N\", \"UserRole\", \"$interval\", \"$q\", \"Server\",\r\nfunction($scope, $modal, scene, $filter, template, SchoolRoom, $$$I18N, UserRole,$interval, $q, Server){\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"modeIDS\", $filter(\"paging\")($scope.rows, $scope.currentPage, $scope.pagesize).map(function(item){ return item.id }));\r\n\t}, 1000);\r\n\t$scope.$on(\"modesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(item.status == 'updating' || item.status == 'making'){\r\n\t\t\t\titem._ignore = true;\r\n\t\t\t}else{\r\n\t\t\t\titem._ignore = false;\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tlet user = UserRole.currentUser;\r\n\tif(user === null){ return }\r\n\t$scope.loading = true;\r\n\t$scope.searchText = \"\";\r\n\t$scope.selectLoading = true;\r\n\t$scope.rows = [];\r\n\t$scope.allRows = [];\r\n\t$scope.refresh = getList;\r\n\t$scope.classrooms = [];\r\n\r\n\tvar _controllerScope = $scope;\r\n\tvar _loginPool =  user.pool;\r\n\tvar _loginClassroom = $$$storage.getSessionStorage('classroom');\r\n\r\n\t\r\n\r\n\tgetList();\r\n\t\r\n\tfunction getList(){\r\n\t\t$q.all([\r\n\t\t\tUserRole.refreshSession(),\r\n\t\t\tSchoolRoom.query().$promise,\r\n\t\t\tscene.query().$promise\r\n\t\t]).then(function(arr){\r\n\t\t\tvar userId = user.id;\r\n\t\t\tvar session = arr[0];\r\n\t\t\t// filter by user\r\n\t\t\tvar schoolrooms = arr[1].pools_.filter(function(item){\r\n\t\t\t\treturn item.user_ids.some(function(id){\r\n\t\t\t\t\treturn id === userId;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tvar ownedIds = session.user.pool;\r\n\t\t\t// filter by schoolroom id\r\n\t\t\tschoolrooms = schoolrooms.filter(function(item){\r\n\t\t\t\treturn ownedIds.indexOf(item.id) > -1;\r\n\t\t\t});\r\n\t\t\tvar cachedPoolId = $$$storage.getSessionStorage('scene_page_classroom') * 1 || null;\r\n\t\t\tif(cachedPoolId && ownedIds.indexOf(cachedPoolId) > -1 && !_controllerScope.select) {\r\n\t\t\t\t_controllerScope.select = cachedPoolId;\r\n\t\t\t}\r\n\t\t\t_controllerScope.classrooms = schoolrooms;\r\n\t\t\t// 处理场景数据\r\n\t\t\tvar sceneData = arr[2];\r\n\t\t\t// 2017-08-18: 根据时间降序\r\n\t\t\tsceneData.modes.sort(function(a,b){\r\n\t\t\t\treturn a.created_at > b.created_at ? -1 : 1;\r\n\t\t\t});\r\n\t\t\tsceneData.modes.forEach(function(item){\r\n\t\t\t\tif(item.status == 'updating' || item.status == 'making'){\r\n\t\t\t\t\titem._ignore = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem._ignore = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_controllerScope.allRows = sceneData.modes;\r\n\t\t\t// 过滤当前教室对应场景\r\n\t\t\t_controllerScope.updateData(\"\", _controllerScope.select);\r\n\t\t}).finally(function(){\r\n\t\t\t_controllerScope.selectLoading = false;\r\n\t\t\t_controllerScope.loading = false;\r\n\t\t});\r\n\t}\r\n\t$scope.refresh = getList;\r\n\r\n\tfunction getRealTimeRows(){\r\n\t\tvar filterPages = $filter(\"paging\")($scope.rows, $scope.currentPage, $scope.pagesize);\r\n\t\tvar filterPagesAndSeatches = $filter(\"filter\")(filterPages, $scope.searchText);\r\n\t\treturn filterPagesAndSeatches;\r\n\t}\r\n\t$scope.getTotalCount = function(rows){\t\t\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.instances_count;\r\n\t\t}, 0);\r\n\t};\r\n\r\n\t$scope.getRunningCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.running_count;\r\n\t\t}, 0);\r\n\t};\r\n\r\n\t$scope.getShutdownCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.shutdown_count;\r\n\t\t}, 0);\r\n\t};\r\n\t$scope.getPausedCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.paused_count;\r\n\t\t}, 0);\r\n\t};\r\n\t$scope.getNostateCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.nostate_count;\r\n\t\t}, 0);\r\n\t};\r\n\t$scope.getErrorCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.error_count;\r\n\t\t}, 0);\r\n\t};\r\n\t$scope.getOtherCount = function(rows){\r\n\t\treturn getRealTimeRows().reduce(function(count, item){\r\n\t\t\treturn count + item.other_count;\r\n\t\t}, 0);\r\n\t};\r\n\r\n\t$scope.cacheValue = function(v){\r\n\t\t$$$storage.setSessionStorage('scene_page_classroom', v);\r\n\t};\r\n\r\n\t$scope.updateData = function(text,pid){\r\n\t\tif(pid){\r\n\t\t\t$scope.rows = $scope.allRows.filter(function(row){ return row.pool === pid; })\r\n\t\t}\r\n\t\telse{\r\n\t\t\tvar _rows = [];\r\n\t\t\t$scope.allRows.forEach(function(item){\r\n\t\t\t\tvar isInClassrooms = _controllerScope.classrooms.filter(function(room){ return room.id === item.pool }).length;\r\n\t\t\t\tif(isInClassrooms){\r\n\t\t\t\t\t_rows.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$scope.rows = _rows;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.pagesize = parseInt($$$storage.getSessionStorage('scene_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n\r\n\t$scope.$watch(\"pagesize\", function(newvalue){\r\n\t\tnewvalue && ($$$storage.setSessionStorage('scene_pagesize', newvalue))\r\n\t});\r\n\r\n\t$scope.openAddDomainDialog = function(item){\r\n\t\tvar modal = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/add_server.html\",\r\n\t\t\tcontroller:\"sceneAddServerDialog\",\r\n\t\t\tresolve:{param:function(){return angular.copy(item);}}\r\n\t\t});\r\n\t\tmodal.result.then(function(res){\r\n\t\t\tgetList();\r\n\t\t});\r\n\t};\r\n\t$scope.sceneExitServerDialog = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='退域'>\"+\r\n\t\t\t\t\t\"退域</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='DOMAIN_EXIT_TIP2'>该场景下的所有桌面在下一次开机时，将自动执行退域的操作，是否确定？</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tServer.domain_set_scene({\r\n\t\t\t\t\t\tid:item.id,\r\n\t\t\t\t\t\thas_domain:false\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.start = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.shutdown_count <= row.instances_count && row.status!==\"making\" && row.status!==\"updating\" && row.status!==\"setting-recoverable\" && row.status!=='recovering'});\r\n\t\tvar flag = rows.some((it)=> it.shutdown_count>0);\r\n\t\tif(rows.length && !flag){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiDesktopPersonalList_TIP1\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tscene.powerOn({ids : rows.map(function(row){return row.id }),action : \"power-on\"},function(){\r\n\t\t\t// rows.forEach(function(row){\r\n\t\t\t\t// row.running_count = row.instances_count;\r\n\t\t\t\t// row._selected = false;\r\n\t\t\t// });\r\n\t\t});\r\n\t};\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.running_count > 0 && row.status!==\"updating\" && row.status!==\"setting-recoverable\"; })\r\n\t\tif(rows.length == 0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiDesktopPersonalList_TIP2\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定强制关闭场景吗'>确定强制关闭场景吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tscene.forcePowerOff({ids : rows.map(function(row){return row.id }),\r\n                        action : \"force-power-off\"}, function(){\r\n\t\t\t           \trows.forEach(function(row){\r\n\t\t\t\t\t\t\trow.running_count = 0;\r\n\t\t\t\t\t\t\t// row._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t        });  \r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.running_count > 0 && row.status!==\"updating\" && row.status!==\"setting-recoverable\"; })\r\n\t\tif(rows.length == 0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiDesktopPersonalList_TIP3\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭场景吗'>确定自然关闭场景吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t        $modalInstance.close();\r\n\t\t\t\t\tscene.powerOff({ids : rows.map(function(row){return row.id }), action : \"power-off\"}, function(){\r\n                    \trows.forEach(function(row){\r\n\t\t\t\t\t\t\trow.running_count = 0;\r\n\t\t\t\t\t\t\t// row._selected = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t        })\t\t\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.active = function(id,event){\r\n\t\tvar _this = this;\r\n\t\t\r\n\t\tif(_this.item.active){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='取消场景激活'>\"+\r\n\t\t\t\t\t\t\"取消场景激活</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='SCENE_CANCEL_COMFIRM'>取消激活该场景会同时关闭该场景内的所有桌面，是否确定?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t        $modalInstance.close();\r\n\t\t\t\t        _this.item.active_loadding= true;\r\n\t\t\t\t       \tscene.active({id :id},function(res){\r\n\t\t\t\t\t\t\t_this.item.active = _this.item.active ? false : true;\r\n\t\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t\t_this.item.active_loadding= false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t_this.item.active_loadding= true;\r\n\t\t\tscene.active({id :id},function(res){\r\n\t\t\t\t_this.item.active = _this.item.active ? false : true;\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t_this.item.active_loadding= false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.sortScene = function(){\r\n\t\tvar modal = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/scene_sort.html\",\r\n\t\t\tcontroller:\"sortSceneDialog\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {scenes:angular.copy(_controllerScope.rows),schoolroom:angular.copy(_controllerScope.select)}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tmodal.result.then(function(res){\r\n\t\t\tgetList();\r\n\t\t});\r\n\t};\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && !(row.active); });\r\n\t\tvar has_running = rows.some(function(row){ return row.running_count});\r\n\t\tvar has_active = $scope.rows.some(function(row){ return row._selected && row.active; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiDesktopSceneList_TIP1\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif(has_active) {\r\n\t\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"只有未激活状态下的场景才能被删除\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'>\"\r\n\t\t\t\t\t\t+ \" <div class='modal-content'>\"\r\n\t\t\t\t\t\t+ \"  <div class='modal-header'>\"\r\n\t\t\t\t\t\t+ \"   <button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button>\"\r\n\t\t\t\t\t\t+ \"   <h4 class='modal-title' id='mySmallModalLabel' localize='删除场景'></h4>\"\r\n\t\t\t\t\t\t+ \"  </div>\"\r\n\t\t\t\t\t\t+ \"  <div class='modal-body'>\"\r\n\t\t\t\t\t\t+ \"   <form class='form-horizontal'>\"\r\n\t\t\t\t\t\t+ \"    <p ng-show='has_run' style='margin-bottom:10px;' localize='存在未关机的桌面,仍然删除场景吗'></p>\"\r\n\t\t\t\t\t\t+ \"    <p ng-show='!has_run' style='margin-bottom:10px;' localize='删除场景无法恢复，确定删除场景吗'></p>\"\r\n\t\t\t\t\t\t+ \"    <footer class='text-right'>\"\r\n\t\t\t\t\t\t+ \"     <button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button>\"\r\n\t\t\t\t\t\t+ \"     <button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\"\r\n\t\t\t\t\t\t+ \"    </footer>\"\r\n\t\t\t\t\t\t+ \"   </form>\"\r\n\t\t\t\t\t\t+ \"  </div>\"\r\n\t\t\t\t\t\t+ \" </div>\"\r\n\t\t\t\t\t\t+ \"</section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.has_active = has_active;\r\n\t\t\t\t\t$scope.has_run =  has_running;\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tscene.delete({ids : rows.map(function(row){return row.id }), action : \"delete\"}, function(){\r\n\t\t\t\t\t\t\tgetList();\r\n\t\t\t\t        })\t\t\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.restartScene = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.running_count > 0 && row.status!==\"making\" && row.status!==\"updating\" && row.status!==\"setting-recoverable\" && row.status!=='recovering'});\r\n\t\tif(!rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiDesktopPersonalList_TIP7\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重启'>\"+\r\n\t\t\t\t\t\t\"场景桌面重启</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启场景下的桌面吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tscene.reboots({ids: rows.map(function(row){ return row.id; })},function(){\r\n\t\t\t\t\t\tgetList();\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n\r\n.controller(\"newSceneDialog\", [\"$scope\", \"$modalInstance\", \"Host\", \"Scene\", \"SchoolRoom\", \"Network\", \"TeachTemplate\", \"HardwareTemplate\",\"TeachDesktop\",\"Server\",\"$$$I18N\",\"$$$MSG\", \"UserRole\",\"$filter\",\"ResourcePool\",\"$modal\",\"VMCommon\",\"PersonDesktop\",\r\n\tfunction($scope, $modalInstance, host, scene, schoolroom, net, teach, hardwares,list,server,$$$I18N,$$$MSG, UserRole,$filter,ResourcePool,$modal,vm, PersonDesktop){\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\r\n\t$scope.regXP = /WindowsXP|WindowsXP_64/;\r\n\t$scope.reg = /windows\\s*(7|8|10)/i;\r\n\t$scope.regWin = /Windows/;\r\n\t// 第一步\r\n\t$scope.step1 = {};\r\n\t$scope.classrooms = angular.copy($scope.$parent.classrooms);\r\n\t$scope.step1.classroom = $scope.classrooms[0];\r\n\t\r\n\tserver.query(function(data){\r\n\t\t$scope.domains = data.servers;\r\n\t});\r\n\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.resources = res.result.filter(function(item){ return item.hosts.length > 0});\r\n\t\t$scope.step1.resource = $scope.resources[0];\r\n\t\t$scope.resource_update();\r\n\t});\r\n\t$scope.resource_update = function(){\r\n\t\t$scope.get_teach_template();\r\n\t};\r\n\r\n\t$scope.get_teach_template = function(){\r\n\t\t$scope.allImages = [];\r\n\t\t$scope.templateNum = undefined;\r\n\t\t$scope.step1.image = undefined;\r\n\t\t$scope.loading_template = true;\r\n\t\tvm.list_template({type:1,virtual_type:$scope.step1.resource.type,rbd_enabled:$scope.step1.resource.rbd_enabled}, function(data){\r\n\t\t\t$scope.loading_template = false;\r\n\t\t\t$scope.winTable = data.win_images\r\n\t\t\t\t.filter(function(item){ return item.status == \"alive\" });\r\n\t\t\t$scope.linTable = data.linux_images\r\n\t\t\t\t.filter(function(item){ return item.status == \"alive\" });\r\n\t\t\t$scope.otherTable = data.other_images\r\n\t\t\t\t.filter(function(item){ return item.status == \"alive\" });\r\n\t\t\t$scope.image = $scope.winTable[0];\r\n\t\t\t$scope.allImages = $scope.winTable.concat($scope.linTable).concat($scope.otherTable);\r\n\t\t\t$scope.templateNum = $scope.allImages.length;\r\n\t\t\t$scope.step1.image = $scope.allImages[0];\r\n\t\t});\r\n\t};\r\n\t// 第二步\r\n\t$scope.step2 = {};\r\n\t$scope.step2.loading_server = true;\r\n\tPersonDesktop.share_servers(function(res){\r\n\t\t$scope.step2.loading_server = false;\r\n\t\tvar servers = [];\r\n\t\tres.servers.forEach(function(server){\r\n\t\t\tserver.nets.forEach(function(net){\r\n\t\t\t\tservers.push({id: server.id, net: {ip_address: net.ip_address, network_id: net.network_id, subnet_id: net.subnet_id}})\r\n\t\t\t})\r\n\t\t});\r\n\t\t$scope.share_servers = servers;\r\n\t\t$scope.step2.share_server = $scope.share_servers[0];\r\n\t})\r\n\t$scope.updateHardware = function(){\r\n\t\tvar is_win7UP = $scope.reg.test($scope.step1.image.os_type);\r\n\t\tvar is_winXP = $scope.regXP.test($scope.step1.image.os_type);\r\n\t\tvar is_win = $scope.regWin.test($scope.step1.image.os_type);\r\n\t\t$scope.step2.usb_version = \"2.0\";\r\n\t\tif(is_win7UP){\r\n\t\t\t$scope.step2.usb_redir = true;\r\n\t\t\t$scope.step2.usb_version = \"3.0\";\r\n\t\t}else if(is_winXP){\r\n\t\t\t$scope.step2.usb_redir = true;\r\n\t\t}else{\r\n\t\t\t// $scope.step2.usb_redir = false;\r\n\t\t}\r\n\t\t$scope.step2.usb3_disabled = !is_win7UP ? true : false;\r\n\t\t$scope.step2.isWin = is_win;\r\n\t}\r\n\t// 第三步\r\n\t$scope.step3 = {};\r\n\t$scope.step3.desktopNum2 = 0;\r\n\t$scope.get_host = function(){\r\n\t\t$scope.hosts = undefined;\r\n\t\t$scope.loading_host = true;\r\n\t\t$scope.step3.is_all = undefined;\r\n\t\t$scope.step3.desktopNum = undefined;\r\n\t\t// $scope.bodyForm3.$setPristine();\r\n\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\thost.query_gpu_agent({\r\n\t\t\t\tid: $scope.step1.resource.id,\r\n\t\t\t\tnetwork_id: $scope.step1.classroom.network_id,\r\n\t\t\t\tenable_gpu: $scope.step2.has_gpu\r\n\t\t\t},function(data){\r\n\t\t\t\t$scope.hosts = data.hosts_list.map(function(item){\r\n\t\t\t\t\tif(item.disabled_tips !== ''){\r\n\t\t\t\t\t\titem.disabled_desc = $$$I18N.get(item.disabled_tips);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.loading_host = false;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\thost.query_agent({\r\n\t\t\t\tid: $scope.step1.resource.id,\r\n\t\t\t\tnetwork_id: $scope.step1.classroom.network_id,\r\n\t\t\t\tenable_gpu: $scope.step2.gpu_auto_assignment\r\n\t\t\t},function(data){\r\n\t\t\t\t$scope.hosts = data.hosts_list.filter(function(h){ return h.status === 'active'});\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.loading_host = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tvar host_storages = {};\r\n\t$scope.openMoreDialog = function(){\r\n\t\tvar _hostids = $scope.hosts.filter(function(h){ return h._selected}).map(function(h){ return h.storage_uuid });\r\n\t\tvar moreDialog = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/host_config.html\",\r\n\t\t\tcontroller:\"hostConfigDialog\",\r\n\t\t\tresolve:{param:function(){return {\r\n\t\t\t\t\"phostids\":angular.copy(_hostids),\r\n\t\t\t\t\"pstore\":host_storages\r\n\t\t\t}}}\r\n\t\t});\r\n\t};\r\n\t// 第四步\r\n\t$scope.step4 = {};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t_hosts.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.step3.is_all = _hosts.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t};\r\n\t$scope.getDesktopNumber2 = function(){\r\n\t\tvar _lis = angular.copy($scope.hosts.filter(function(item){ return item.instance_num > 0 }));\r\n\t\tif(_lis.length > 0){\r\n\t\t\t$scope.step3.desktopNum2 = _lis.reduce(function(a,b){\r\n\t\t\t\ta.instance_num += b.instance_num;\r\n\t\t\t\treturn a;\r\n\t\t\t}).instance_num;\r\n\t\t}else{\r\n\t\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t}\r\n\t};\r\n\t\r\n\t$scope.clearRDP = function(scope){\r\n\t\tscope.RDP = false;\r\n\t\t$scope.userNameType = 1;\r\n\t\t$scope.userNamePre = \"K\";\r\n\t\t$scope.userNameBegin = 1;\r\n\t};\r\n\t$scope.clearDomain = function(scope){\r\n\t\tif(scope.has_domain){\r\n\t\t\tscope.domain = $scope.domains[0];\r\n\t\t}else{\r\n\t\t\tscope.domain = null;\r\n\t\t}\r\n\t};\r\n\t$scope.addZero = function(len,str_begin,str_end){\r\n\t\tif(str_end && str_begin){\r\n\t\t\tvar end_len = str_end.toString().length;\r\n\t\t\tif(end_len < len){\r\n\t\t\t\treturn  str_begin + new Array(len - end_len+1).join(\"0\") + str_end;\r\n\t\t\t}else{\r\n\t\t\t\treturn str_begin + str_end;\r\n\t\t\t}\r\n\t\t}\r\n\t};\t\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(\"[rel=popover-hover]\").popover({\r\n\t\t\t\ttrigger : \"hover\"\r\n\t\t\t});\r\n\t\t})\r\n\t\tvar sameSceneName = $scope.rows.filter(function(item){return item.name == $scope.step1.sceneName}).length;\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = scope.bodyForm1.$valid && !sameSceneName;\r\n\t\tif(sameSceneName){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"SAME_SCENE_NAME\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\tif(step.done && !sameSceneName){\r\n\t\t\thardwares.filter({\r\n\t\t\t\t\"system_gb\": $scope.step1.image.system_alloc_disk,\r\n\t\t\t\t\"local_gb\": $scope.step1.image.data_alloc_disk,\r\n\t\t\t\t\"local_gb1\": $scope.step1.image.data_alloc_disk_2,\r\n\t\t\t},function(data){\r\n\t\t\t\t$scope.hardwareList = data.result.map(function(data){\r\n\t\t\t\t\tdata.memory_mb = data.memory_mb/1024;\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.step2.hardware = $scope.hardwareList[0];\r\n\t\t\t\t$scope.updateHardware();\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\t$scope.get_host();\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = scope.bodyForm2.$valid;\r\n\t});\r\n\t$scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n\t\tif($scope.step1.resource.type =='hyper-v'){\r\n\t\t\t$scope.step4.MORE = true;\r\n\t\t\t$scope.step4.RDP = true;\r\n\t\t}else{\r\n\t\t\t$scope.step4.MORE = false;\r\n\t\t\t$scope.step4.RDP = false;\r\n\t\t}\r\n\t\tscope.error = step.is_dirty;\r\n\t\tif($scope.step3.hostType == 0){\r\n\t\t\tstep.done = scope.bodyForm3.$valid && $scope.step3.desktopNum <= $filter(\"selectedFilter\")($scope.hosts,'max_instance');\r\n\t\t}\r\n\t\tif($scope.step3.hostType==1){\r\n\t\t\tstep.done = scope.bodyForm3.$valid && Boolean($scope.step3.desktopNum2);\r\n\t\t}\r\n\t});\r\n\t$scope.$on(\"WizardStep_3\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = scope.bodyForm4.$valid;\r\n\t});\r\n\t$scope.$on(\"WizardDone\", function(e, steps, scopes){\r\n\t\tvar regWin10 = /Windows10/;\r\n\t\tvar postData = {};\r\n\t\tpostData.name          = $scope.step1.sceneName;\r\n\t\tpostData.image_id      = $scope.step1.image.id;\r\n\t\tpostData.pool          = $scope.step1.classroom.id;\r\n\t\tpostData.resource_pool_uuid  = $scope.step1.resource.uuid;\r\n\t\tif($scope.step1.domain){\r\n\t\t\tpostData.domain          = $scope.step1.domain.id;}\r\n\t\tif($scope.step1.resource.type === \"hyper-v\")\r\n\t\t\tpostData.enable_gpu      = $scope.step2.has_gpu;\r\n\t\tif($scope.step1.resource.type === \"kvm\"){\r\n\t\t\tpostData.gpu_auto_assignment = $scope.step2.gpu_auto_assignment;\r\n\t\t\tif(regWin10.test($scope.step1.image.os_type)){\r\n\t\t\t\tpostData.firmware_type = 'uefi';\r\n\t\t\t}\r\n\t\t}\r\n\t\tpostData.instance_type       = $scope.step2.hardware.id;\r\n\t\tpostData.usb_redir    = $scope.step2.usb_redir;\r\n\t\tpostData.usb_version  = ($scope.step2.usb_redir && $scope.step1.resource.type=='kvm') ? $scope.step2.usb_version : null;\r\n\t\tpostData.rollback      = Number($scope.step2.rollback);\r\n\t\tpostData.data_rollback = $scope.step2.hardware.local_gb>1 ? Number($scope.step2.data_rollback) : undefined;\r\n\t\tif(postData.rollback === 2){\r\n\t\t\tpostData.rollback_weekday = $scope.step2.rollback_weekday;}\r\n\t\tif(postData.rollback === 3){\r\n\t\t\tpostData.rollback_monthday = $scope.step2.rollback_monthday;}\r\n\t\tif(postData.data_rollback === 2){\r\n\t\t\tpostData.data_rollback_weekday = $scope.step2.data_rollback_weekday;}\r\n\t\tif(postData.data_rollback === 3){\r\n\t\t\tpostData.data_rollback_monthday = $scope.step2.data_rollback_monthday;}\r\n\t\t\r\n\t\tif($scope.step3.hostType == 0){\r\n\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item._selected }).map(function(item){\r\n\t\t\t\treturn {\"uuid\": item.id}\r\n\t\t\t});\r\n\t\t\tpostData.instance_max = $scope.step3.desktopNum;\r\n\t\t}\r\n\t\tif($scope.step3.hostType == 1){\r\n\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item.instance_num > 0 }).map(function(item){\r\n\t\t\t\treturn { \"uuid\":item.id,\"vm_count\":item.instance_num }\r\n\t\t\t});\r\n\t\t\tpostData.instance_max = $scope.step3.desktopNum2;\r\n\t\t}\r\n\t\tpostData.servers_storage = Object.keys(host_storages).map(function(key){\r\n\t\t\tvar host = host_storages[key];\r\n\t\t\treturn {\r\n\t\t\t\tuuid:host.id,\r\n\t\t\t\timage_storage_capacity: host.image_storage_capacity,\r\n\t\t\t\timage_storage_performance: host.image_storage_performance,\r\n\t\t\t\tstorage_capacity: host.storage_capacity,\r\n\t\t\t\tstorage_performance: host.storage_performance\r\n\t\t\t}\r\n\t\t});\r\n\t\tpostData.hostname_type      = Number($scope.step4.hostNameType);\r\n\t\tpostData.hostname_prefix    = $scope.step4.hostNamePre;\r\n\t\tpostData.hostname_beginwith = $scope.step4.hostNameBegin;\r\n\t\tif($scope.step1.resource.type === \"kvm\"){\r\n\t\t\tpostData.is_exam \t\t\t= $scope.step4.RDP;\r\n\t\t\tif($scope.step4.MORE){\r\n\t\t\t\tpostData.username_type         = $scope.step4.userNameType;\r\n\t\t\t\tpostData.username_prefix       = $scope.step4.userNamePre;\r\n\t\t\t\tpostData.username_beginwith    = $scope.step4.userNameBegin;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif($scope.step1.resource.type === \"hyper-v\"){\r\n\t\t\tpostData.is_exam \t\t\t= true;\r\n\t\t}\r\n\t\tpostData.enable_share = $scope.step2.enable_share;\r\n\t\tif($scope.step2.enable_share){\r\n\t\t\tpostData.share_server_ip = $scope.step2.share_server.net.ip_address;\r\n\t\t\tpostData.share_server_id = $scope.step2.share_server.id;\r\n\t\t}\r\n\t\tpostData.expand_enabled = $scope.step2.expand_enabled;\r\n\t\t$scope.submitting = true; \r\n\t\tscene.save(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.refresh();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submitting = false;\r\n\t\t});\r\n\t\t\r\n\t});\r\n}])\r\n.controller(\"alterSceneDialog\", [\"$scope\", \"$modalInstance\", \"SchoolRoom\", \"Scene\",\"Host\",\"Server\", \"PersonDesktop\",function($scope, $modalInstance, schoolroom, scene,host,server,personDesktop){\r\n\t$scope.need_ha = false;\r\n\tvar selectedServer,raw_need_ha;\r\n\t$scope.rollbackChange = function(value){\r\n\t\tif(value != \"1\"){\r\n\t\t\t$scope.need_ha = false;\r\n\t\t}else{\r\n\t\t\tif(selectedServer&&selectedServer.length>0){\r\n\t\t\t\t$scope.need_ha = angular.copy(raw_need_ha);\r\n\t\t\t\t$scope.servers = selectedServer;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t$scope.name = $scope.currentItem.name;\r\n\t$scope.desktopNum = $scope.currentItem.instance_max ;\r\n\t$scope.min_instances = $scope.currentItem.instance_max;\r\n\t$scope.rollback = $scope.currentItem.rollback;\r\n\t$scope.rollback_monthday = $scope.currentItem.rollback_monthday ? $scope.currentItem.rollback_monthday : \"1\";\r\n\t$scope.rollback_weekday = $scope.currentItem.rollback_weekday ? $scope.currentItem.rollback_weekday :\"1\";\r\n\r\n\t$scope.disk_type = $scope.currentItem.disk_type;\r\n\t$scope.local_gb = $scope.currentItem.local_gb;\r\n\t$scope.data_rollback = $scope.currentItem.data_rollback;\r\n\t$scope.data_rollback_monthday = $scope.currentItem.data_rollback_monthday || \"1\";\r\n\t$scope.data_rollback_weekday = $scope.currentItem.data_rollback_weekday || \"1\";\r\n\r\n\t$scope.usb_redir = $scope.currentItem.usb_redir;\r\n\t$scope.usb3_disabled = !$scope.currentItem.usb3_editable;\r\n\t$scope.usb_version = $scope.currentItem.usb_version || \"2.0\";\r\n\r\n\t$scope.running_count = $scope.currentItem.running_count;\r\n\t$scope.has_domain=$scope.currentItem.has_domain||false;\r\n\t$scope.domain = $scope.currentItem.domain;\r\n\t$scope.need_ha = false;\r\n\t// $scope.enable_gpu = $scope.currentItem.enable_gpu;\r\n\t$scope.enable_share = $scope.currentItem.enable_share;\r\n\t$scope.share_server_ip = $scope.currentItem.share_server_ip;\r\n\t$scope.loading_server = true;\r\n\tpersonDesktop.share_servers(function(res){\r\n\t\t$scope.loading_server = false;\r\n\t\tvar servers = [];\r\n\t\tres.servers.forEach(function(server){\r\n\t\t\tserver.nets.forEach(function(net){\r\n\t\t\t\tservers.push({id: server.id, net: {ip_address: net.ip_address, network_id: net.network_id, subnet_id: net.subnet_id}})\r\n\t\t\t})\r\n\t\t});\r\n\t\t$scope.share_servers = servers;\r\n\t\tif($scope.enable_share){\r\n\t\t\t$scope.share_server = $scope.share_servers.filter(function(item){ return item.net.ip_address==$scope.share_server_ip })[0]\r\n\t\t}else{\r\n\t\t\t$scope.share_server = $scope.share_servers[0];\r\n\t\t}\r\n\t})\r\n\t$scope.is_windows = $scope.currentItem.is_windows;\r\n\t$scope.expand_enabled = $scope.currentItem.expand_enabled;\r\n\t$scope.ok = function(){\r\n\t\tvar _rollback = parseInt(this.rollback);\r\n\t\tvar _data_rollback = parseInt(this.data_rollback) >= 0 ? Number(this.data_rollback) : undefined;\r\n\t\tvar item = {};\r\n\t\titem.id = $scope.currentItem.id;\r\n\t\titem.pool = $scope.currentItem.pool;\r\n\t\titem.name = this.name;\r\n\t\titem.instance_max          = $scope.currentItem.instance_max;\r\n\t\titem.rollback              = _rollback;\r\n\t\titem.rollback_monthday \t   = _rollback == 3 ? this.rollback_monthday : undefined;\r\n\t\titem.rollback_weekday      = _rollback == 2 ? this.rollback_weekday : undefined;\r\n\t\titem.data_rollback         = _data_rollback;\r\n\t\titem.data_rollback_monthday= _data_rollback === 3 ? this.data_rollback_monthday : undefined;\r\n\t\titem.data_rollback_weekday = _data_rollback === 2 ? this.data_rollback_weekday : undefined;\r\n\t\titem.usb_redir \t\t\t   = this.usb_redir;\r\n\t\titem.usb_version  \t\t   = (item.usb_redir && $scope.currentItem.virtual_type=='kvm') ? this.usb_version : null;\r\n\t\titem.has_domain            = this.has_domain;\r\n\t\t// if($scope.currentItem.virtual_type === 'hyper-v')\r\n\t\t// \titem.enable_gpu\t\t\t   = this.enable_gpu;\r\n\t\titem.domain                = this.domain;\r\n\t\titem.need_ha               = item.rollback==1 &&  this.need_ha;\r\n\t\titem.enable_share = this.enable_share;\r\n\t\titem.share_server_ip = this.enable_share?this.share_server.net.ip_address:undefined;\r\n\t\titem.share_server_id = this.enable_share?this.share_server.id:undefined;\r\n\t\titem.expand_enabled = this.expand_enabled;\r\n\t\tif(item.rollback ==1 && item.need_ha){\r\n\t\t\titem.server_ids = $scope.servers.filter(function(value){\r\n\t\t\t\treturn value._selected;\r\n\t\t\t}).map(function(value){\r\n\t\t\t\treturn value.id;\r\n\t\t\t});\r\n\t\t\tif(item.server_ids<1){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\titem.server_ids = item.server_ids.join(',');\r\n\t\t}\r\n\t\t$scope.loading = true;\r\n\t\tscene.update(item, function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.refresh();\r\n\t\t},function(){\r\n\t\t\t$scope.refresh();\r\n\t\t}).$promise.finally(res => {\r\n\t\t\t$scope.loading = false;\r\n\t\t});\t\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller('sortSceneDialog', ['$scope','param','$modalInstance','Scene', function($scope,param,$modalInstance,Scene){\r\n\r\n\t$scope.schoolroom = param.schoolroom;\r\n\t$scope.scenes = param.scenes;\r\n\t$scope.auto_scene = $scope.scenes.filter(function(s){ return s.is_auto })[0];\r\n\t// $scope.is_auto_enter = $scope.auto_scene ? true: false;\r\n\tfunction move(num){\r\n\t\tvar cur = $scope.scenes.filter(function(item){ return item._actived })[0];\r\n\t\tvar cur_idx = $scope.scenes.indexOf(cur);\r\n\t\tvar pre_idx = null;\r\n\t\tif(cur_idx + num < 0){\r\n\t\t\tpre_idx = $scope.scenes.length -1;\r\n\t\t}else if(cur_idx + num > $scope.scenes.length -1){\r\n\t\t\tpre_idx = 0;\r\n\t\t}else{\r\n\t\t\tpre_idx = cur_idx + num;\r\n\t\t}\r\n\t\tvar t = $scope.scenes.splice(cur_idx,1)[0];\r\n\t\t$scope.scenes.splice(pre_idx,0,t);\r\n\t};\r\n\t$scope.up = function(){\r\n\t\tmove(-1);\r\n\t};\r\n\t$scope.down = function(){\r\n\t\tmove(1);\r\n\t};\r\n\r\n\t$scope.select = function(item){\r\n\t\t$scope.scenes.map(function(i){\r\n\t\t\tif(i.id === item.id){\r\n\t\t\t\ti._actived = true;\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t\ti._actived = false;\r\n\t\t\treturn i;\r\n\t\t\t\r\n\t\t})\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar postData = $scope.scenes.map(function(s,idx){\r\n\t\t\tvar _item = {\r\n\t\t\t\torder:idx+1,\r\n\t\t\t\tname:s.name,\r\n\t\t\t\tid:s.id,\r\n\t\t\t\tis_auto:Boolean(_this.auto_scene && (_this.auto_scene.id === s.id)),\r\n\t\t\t};\r\n\t\t\treturn _item;\r\n\t\t});\r\n\t\tScene.sort({order_data:postData},function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller(\"newPersonDialog\", [\"$scope\", \"$modalInstance\", \"Host\",\"Network\", \"HardwareTemplate\",\"PersonTemplate\",\"User\",\"Admin\",\"Domain\",\"PersonDesktop\",\"Server\",\"$$$I18N\",\"$$$MSG\",\"ResourcePool\",\"$filter\",\"$modal\",\"VMCommon\",\"checkIP\",\r\n\tfunction($scope, $modalInstance, host, networks, hardwares, images,user,admin, domain,Person,server, $$$I18N, $$$MSG,ResourcePool,$filter, $modal, vm, checkIP){\r\n\t$scope.desktopNum = 1;\r\n\t$scope.max_instance = 0;\r\n\t$scope.host_loading = true;\r\n\t$scope.regXP = /WindowsXP|WindowsXP_64/;\r\n\t$scope.reg = /(windows\\s*7|8|10)/i;\r\n\t$scope.regWin = /Windows/;\r\n\t// 第一步\r\n\t$scope.step1 = {};\r\n\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\t$scope.get_subnet = function(network){\r\n\t\tif(network.subnets.length){\r\n\t\t\tnetworks.query_sub({\r\n\t\t\t\tid:network.id\r\n\t\t\t},function(res){\r\n\t\t\t\t$scope.subnetworks = res.result.map(function(n){\r\n\t\t\t\t\tn._desc = n.start_ip ?(n.name + \" (\" + n.start_ip +\" - \"+ n.end_ip + \") \") :  n.name;\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.step1.subnetwork = $scope.subnetworks[0];\r\n\t\t\t\t$scope.clearBindIp();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.subnetworks = [];\r\n\t\t\t$scope.step1.subnetwork = null;\r\n\t\t\t$scope.clearBindIp();\r\n\t\t}\r\n\t};\r\n\tnetworks.query(function(data){\r\n\t\t// $scope.networks = data.networks.filter(function(n){ return n.subnets.length > 0});\r\n\t\t$scope.networks = data.networks;\r\n\t\tif($scope.networks.length){\r\n\t\t\t$scope.step1.network = $scope.networks[0];\r\n\t\t\t$scope.get_subnet($scope.step1.network);\r\n\t\t}\r\n\t});\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.resources = res.result.filter(function(item){ return item.hosts.length > 0});\r\n\t\t$scope.step1.resource = $scope.resources[0];\r\n\t\t$scope.resource_update();\r\n\t});\r\n\t$scope.resource_update = function(){\r\n\t\t$scope.get_personal_template();\r\n\t};\r\n\t$scope.get_personal_template = function(){\r\n\t\t$scope.templates = [];\r\n\t\t$scope.templateNum = undefined;\r\n\t\t$scope.step1.image = undefined;\r\n\t\t$scope.loading_template = true;\r\n\t\tvm.list_template({type:2,virtual_type:$scope.step1.resource.type,rbd_enabled:$scope.step1.resource.rbd_enabled}, function(data){\r\n\t\t\t$scope.loading_template = false;\r\n\t\t\t$scope.winTable = data.win_images\r\n\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\r\n\t\t\t$scope.linTable = data.linux_images\r\n\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\t\t\t$scope.otherTable = data.other_images\r\n\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\t\t\t$scope.templates = $scope.winTable.concat($scope.linTable).concat($scope.otherTable);\r\n\t\t\t$scope.templateNum = $scope.templates.length;\r\n\t\t\t$scope.step1.image = $scope.templates[0];\r\n\t\t});\r\n\t};\r\n\t$scope.clearBindIp = function(){\r\n\t\tif($scope.step1.subnetwork){\r\n\t\t\t$scope.IPmodes = $scope.IPmodes2;\r\n\t\t}else{\r\n\t\t\t$scope.IPmodes = $scope.IPmodes1;\r\n\t\t}\r\n\t\t$scope.step1.IPmode= $scope.IPmodes[0];\r\n\t\t$scope.step1.ip = null;\r\n\t};\r\n\t// 第二步\r\n\t$scope.step2 = {};\r\n\t$scope.step2.loading_server = true;\r\n\tPerson.share_servers(function(res){\r\n\t\t$scope.step2.loading_server = false;\r\n\t\tvar servers = [];\r\n\t\tres.servers.forEach(function(server){\r\n\t\t\tserver.nets.forEach(function(net){\r\n\t\t\t\tservers.push({id: server.id, net: {ip_address: net.ip_address, network_id: net.network_id, subnet_id: net.subnet_id}})\r\n\t\t\t})\r\n\t\t});\r\n\t\t$scope.share_servers = servers;\r\n\t\t$scope.step2.share_server = $scope.share_servers[0];\r\n\t})\r\n\t$scope.updateHardware = function(){\r\n\t\tvar is_win7UP = $scope.reg.test($scope.step1.image.os_type);\r\n\t\tvar is_winXP = $scope.regXP.test($scope.step1.image.os_type);\r\n\t\tvar is_win = $scope.regWin.test($scope.step1.image.os_type);\r\n\t\t$scope.step2.usb_version = \"2.0\";\r\n\t\tif(is_win7UP){\r\n\t\t\t$scope.step2.usb_redir = true;\r\n\t\t\t$scope.step2.usb_version = \"3.0\";\r\n\t\t}else if(is_winXP){\r\n\t\t\t$scope.step2.usb_redir = true;\r\n\t\t}else{\r\n\t\t\t// $scope.step2.usb_redir = false;\r\n\t\t}\r\n\t\t$scope.step2.usb3_disabled = !is_win7UP ? true : false;\r\n\t\t$scope.step2.isWin = is_win;\r\n\t}\r\n\t// 第三步\r\n\t$scope.step3 = {};\r\n\t$scope.step3.desktopNum2 = 0;\r\n\t$scope.get_host = function(){\r\n\t\tvar uuid = $scope.step1.resource.uuid;\r\n\t\tvar netid = $scope.step1.network.id;\r\n\t\tvar is_gpu = $scope.step2.has_gpu;\r\n\t\t$scope.host_loadding = true;\r\n\t\t$scope.step3.is_all = undefined;\r\n\t\t$scope.hosts = undefined;\r\n\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\thost.query_gpu_agent({\r\n\t\t\t\tid: uuid,\r\n\t\t\t\tnetwork_id: netid,\r\n\t\t\t\tenable_gpu: is_gpu\r\n\t\t\t},function(data){\r\n\t\t\t\t$scope.host_loadding = false;\r\n\t\t\t\t$scope.hosts = data.hosts_list.map(function(item){\r\n\t\t\t\t\tif(item.disabled_tips !== ''){\r\n\t\t\t\t\t\titem.disabled_desc = $$$I18N.get(item.disabled_tips);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\thost.query_agent({\r\n\t\t\t\tid: uuid,\r\n\t\t\t\tnetwork_id: netid,\r\n\t\t\t\tenable_gpu: $scope.step2.gpu_auto_assignment\r\n\t\t\t},function(res){\r\n\t\t\t\t$scope.host_loadding = false;\r\n\t\t\t\t$scope.hosts = res.hosts_list.filter(function(h){ return h.status === 'active'});\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tvar host_storages = {};\r\n\t$scope.openMoreDialog = function(){\r\n\t\tvar _hostids;\r\n\t\tif($scope.step3.hostType=='0'){\r\n\t\t\t_hostids = $scope.hosts.filter(function(h){ return h._selected}).map(function(h){ return h.storage_uuid });\r\n\t\t}else{\r\n\t\t\t_hostids = $scope.hosts.filter(function(h){ return h.instance_num}).map(function(h){ return h.storage_uuid });\r\n\t\t}\r\n\t\tvar moreDialog = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/host_config.html\",\r\n\t\t\tcontroller:\"hostConfigDialog\",\r\n\t\t\tresolve:{param:function(){return {\r\n\t\t\t\t\"phostids\":angular.copy(_hostids),\r\n\t\t\t\t\"pstore\":host_storages\r\n\t\t\t}}}\r\n\t\t});\r\n\t\tmoreDialog.result.then(function(){\r\n\t\t});\r\n\t};\r\n\t\r\n\t$scope.selectAllHost = function(bool){\r\n\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t_hosts.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.step3.is_all = _hosts.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t};\r\n\t$scope.getDesktopNumber2 = function(){\r\n\t\tvar _lis = angular.copy($scope.hosts.filter(function(item){ return item.instance_num > 0 }));\r\n\t\tif(_lis.length > 0){\r\n\t\t\t$scope.step3.desktopNum2 = _lis.reduce(function(a,b){\r\n\t\t\t\ta.instance_num += b.instance_num;\r\n\t\t\t\treturn a;\r\n\t\t\t}).instance_num;\r\n\t\t}else{\r\n\t\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.step4 = {};\r\n\t$scope.$on(\"selectStepChange\", function(e, arg){\r\n\t\tif(arg.index==0){\r\n\t\t\targ.stepScope.$$nextSibling.error = false;\r\n\t\t}\r\n\t})\r\n\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\tsetTimeout(function(){\r\n\t\t\t$(\"[rel=popover-hover]\").popover({\r\n\t\t\t\ttrigger : \"hover\"\r\n\t\t\t});\r\n\t\t})\r\n\t\tscope.error = step.is_dirty;\r\n\t\tfunction toStrLong(ip){\r\n\t\t\tvar ips;\r\n\t\t\tips = ip.split(\".\").map(function(item,idx){\r\n\t\t\t\tvar _prefix = '';\r\n\t\t\t\tfor(var i = 0;i < 8 - Number(item).toString(2).length;i++){\r\n\t\t\t\t\t_prefix += \"0\";\r\n\t\t\t\t}\r\n\t\t\t\treturn _prefix + Number(item).toString(2);\r\n\t\t\t});\r\n\t\t\treturn ips.join(\"\");\r\n\t\t}\r\n\t\tfunction check_net(){\r\n\t\t\t// 返回值为true时，invalid\r\n\t\t\tif($scope.step1.subnetwork && $scope.step1.subnetwork.netmask && $scope.step1.subnetwork.enable_dhcp && $scope.step1.ip){\r\n\t\t\t\tvar _startIP = toStrLong($scope.step1.subnetwork.start_ip);\r\n\t\t\t\tvar _endIP = toStrLong($scope.step1.subnetwork.end_ip);\r\n\t\t\t\tvar _bindStartIP = toStrLong($scope.step1.ip);\r\n\t\t\t\treturn (_bindStartIP < _startIP || _bindStartIP > _endIP);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(check_net()){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t:$$$MSG.get(12061),\r\n\t\t\t\ttimeout\t:5000\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar sameDesktopName = $scope.rows.filter(function(item){return item.display_name == $scope.step1.desktopName}).length;\r\n\t\tvar is_valid = scope.bodyForm1.$valid && !check_net();\r\n\t\tstep.done = is_valid  && !sameDesktopName;\r\n\t\tif(sameDesktopName){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"SAME_PERSONAL_NAME\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\tif(step.done && !sameDesktopName){\r\n\t\t\thardwares.filter({\r\n\t\t\t\t\"system_gb\": $scope.step1.image.system_alloc_disk,\r\n\t\t\t\t\"local_gb\": $scope.step1.image.data_alloc_disk,\r\n\t\t\t\t\"local_gb1\": $scope.step1.image.data_alloc_disk_2,\r\n\t\t\t},function(data){\r\n\t\t\t\t$scope.hardwareList = data.result.map(function(data){\r\n\t\t\t\t\tdata.memory_mb = data.memory_mb/1024;\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.step2.hardware = $scope.hardwareList[0];\r\n\t\t\t\t$scope.step2.hardware && $scope.updateHardware();\r\n\t\t\t});\r\n\t\t}\r\n\t\t//个人桌面创建不需要check_ip,后台会检测作出处理\r\n\t\t// if(step.done && scope.step1.ip){\r\n\t\t// \tstep.showLoading = true;\r\n\t\t// \tstep.done = false;\r\n\t\t// \tconsole.log('step23')\r\n\t\t// \tcheckIP.check({ip: scope.step1.ip, subnet_id: scope.step1.subnetwork.id},function(res){\r\n\t\t// \t\tif(!res.result){\r\n\t\t// \t\t\t$.bigBox({\r\n\t\t// \t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t// \t\t\t\tcontent\t: $$$I18N.get(\"USEDIP\"),\r\n\t\t// \t\t\t\ttimeout\t: 6000\r\n\t\t// \t\t\t});\r\n\t\t// \t\t}else{\r\n\t\t// \t\t\t$scope.$broadcast(\"currentStepChange\", 1);\r\n\t\t// \t\t}\r\n\t\t// \t\tstep.showLoading = false;\r\n\t\t// \t},function(error){ step.showLoading = false; });\r\n\t\t// }\r\n\t});\r\n\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\tvar is_valid = scope.bodyForm2.$valid;\r\n\t\tif(is_valid){\r\n\t\t\t$scope.step3.desktopNum = undefined;\r\n\t\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t\t$scope.get_host();\r\n\t\t}\r\n\t\tstep.done = is_valid;\r\n\t});\r\n\t$scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\t// number类型的input ，max属性是变量，不生效，手动判断\r\n\t\tif($scope.step3.hostType == 0){\r\n\t\t\tstep.done = scope.bodyForm3.$valid && $scope.step3.desktopNum <= $filter(\"selectedFilter\")($scope.hosts,'max_instance');\r\n\t\t}\r\n\t\tif($scope.step3.hostType==1){\r\n\t\t\tstep.done = scope.bodyForm3.$valid && Boolean($scope.step3.desktopNum2);\r\n\t\t}\r\n\t});\r\n\t$scope.$on(\"WizardStep_3\", function(e, step, scope){\r\n\t\tscope.error = step.is_dirty;\r\n\t\tstep.done = $scope.step4.select_users.length?true:false;\r\n\t});\r\n\t$scope.$on(\"WizardDone\", function(e, steps, scopes){\r\n\t\t var postData = {};\r\n\t\t var regWin10 = /Windows10/;\r\n\t\t \tpostData.display_name = $scope.step1.desktopName;\r\n\t\t\tpostData.network_id = $scope.step1.network.id;\r\n\t\t\tpostData.resource_pool\t  = $scope.step1.resource.uuid;\r\n\r\n\t\t if($scope.step1.subnetwork){\r\n\t\t \tpostData.subnet_id = $scope.step1.subnetwork.id;\r\n\t\t }else{ postData.subnet_id = ''; }\r\n\t\t \tpostData.ip_choose = Number($scope.step1.IPmode.value) ? true : false;\r\n\t\t if(postData.ip_choose && Number($scope.step1.IPmode.value) === 2){\r\n\t\t \tpostData.start_ip = $scope.step1.ip;}\r\n\t\t // if($scope.step1.domain){\r\n\t\t\t// postData.ad_server_id = $scope.step1.domain.id;}\r\n\t\t\tpostData.image_id     = $scope.step1.image.id;\r\n\t\t\t\r\n\t\t\tpostData.rollback      = Number($scope.step2.rollback);\r\n\t\t\tpostData.data_rollback = $scope.step2.hardware.local_gb>1 ? Number($scope.step2.data_rollback) : undefined;\r\n\t\t\tif(postData.rollback === 2){\r\n\t\t\t\tpostData.rollback_weekday = $scope.step2.rollback_weekday;}\r\n\t\t\tif(postData.rollback === 3){\r\n\t\t\t\tpostData.rollback_monthday = $scope.step2.rollback_monthday;}\r\n\t\t\tif(postData.data_rollback === 2){\r\n\t\t\t\tpostData.data_rollback_weekday = $scope.step2.data_rollback_weekday;}\r\n\t\t\tif(postData.data_rollback === 3){\r\n\t\t\t\tpostData.data_rollback_monthday = $scope.step2.data_rollback_monthday;}\r\n\r\n\t\t\tpostData.instance_type_id = $scope.step2.hardware.id;\r\n\t\t\tpostData.usb_redir \t\t  = $scope.step2.usb_redir;\r\n\t\t\tpostData.usb_version      = ($scope.step2.usb_redir && $scope.step1.resource.type=='kvm') ? $scope.step2.usb_version : null;\r\n\t\t\tif($scope.step1.resource.type === \"hyper-v\")\r\n\t\t\t\tpostData.enable_gpu       = $scope.step2.has_gpu;\r\n\t\t\tif($scope.step1.resource.type === \"kvm\"){\r\n\t\t\t\tpostData.gpu_auto_assignment = $scope.step2.gpu_auto_assignment;\r\n\t\t\t\tif(regWin10.test($scope.step1.image.os_type)){\r\n\t\t\t\t\tpostData.firmware_type = 'uefi';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\tif($scope.step3.hostType == 0){\r\n\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item._selected }).map(function(item){\r\n\t\t\t\treturn {\"uuid\": item.id}\r\n\t\t\t});\r\n\t\t\tpostData.count = $scope.step3.desktopNum;\r\n\t\t}\r\n\t\tif($scope.step3.hostType == 1){\r\n\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item.instance_num > 0 }).map(function(item){\r\n\t\t\t\treturn { \"uuid\":item.id,\"vm_count\":item.instance_num }\r\n\t\t\t});\r\n\t\t\tpostData.count = $scope.step3.desktopNum2;\r\n\t\t}\r\n\t\tpostData.servers_storage = Object.keys(host_storages).map(function(key){\r\n\t\t\tvar host = host_storages[key];\r\n\t\t\treturn {\r\n\t\t\t\tuuid:host.id,\r\n\t\t\t\timage_storage_capacity: host.image_storage_capacity,\r\n\t\t\t\timage_storage_performance: host.image_storage_performance,\r\n\t\t\t\tstorage_capacity: host.storage_capacity,\r\n\t\t\t\tstorage_performance: host.storage_performance\r\n\t\t\t}\r\n\t\t});\r\n\t\tpostData.user_id = $scope.step4.select_users.map(function(item){ return item.id?item.id:item.user_id });\r\n\t\tpostData.rule_id = $scope.step4.rule;\r\n\r\n\t\tpostData.enable_share = $scope.step2.enable_share;\r\n\t\tif($scope.step2.enable_share){\r\n\t\t\tpostData.share_server_ip = $scope.step2.share_server.net.ip_address;\r\n\t\t\tpostData.share_server_id = $scope.step2.share_server.id;\r\n\t\t}\r\n\t\tpostData.expand_enabled = $scope.step2.expand_enabled;\r\n\t\t$scope.submitting = true;\r\n\t\tPerson.save(postData, function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.refresh();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submitting = false;\r\n\t\t});\r\n\t});\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"alterPersonalDialog\", [\"$scope\",\"$modalInstance\",\"Network\",\"HardwareTemplate\",\"User\",\"Admin\" ,\"PersonDesktop\",\"Domain\",\"$q\",\"$$$I18N\",\r\n\tfunction($scope, $modalInstance,net,hardwrare,user,admin,personDesktop,domain,$q,$$$I18N){\r\n\t$scope.IPs = [];\r\n\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\t$scope.datas = angular.copy($scope.currentItem);\r\n\tif($scope.datas.ips){\r\n\t\t$scope.IPmodes = $scope.IPmodes2;\r\n\t\t$scope.datas.IPmode = $scope.IPmodes[1];\r\n\t}else{\r\n\t\t$scope.IPmodes = $scope.IPmodes1;\r\n\t\t$scope.datas.IPmode = $scope.IPmodes[0];\r\n\t}\r\n\t$scope.datas.usb_version = $scope.datas.usb_redir?$scope.datas.usb_version:'2.0';\r\n\t$scope.datas.memory_mb = $scope.datas.memory_mb/1024;\r\n\t$scope.btndisks = [];\r\n\tpersonDesktop.list_detail({id:$scope.datas.id},function(res){\r\n\t\t$scope.detailData = res.result;\r\n\t\t[\"data_rollback_weekday\",\"data_rollback_monthday\",\"rollback_weekday\",\"rollback_monthday\"].forEach(key => {\r\n\t\t\t$scope.detailData[key] = $scope.detailData[key] || 1;\r\n\t\t});\r\n\t\t$scope.get_net(true);\r\n\t\t$scope.loading_server = true;\r\n\t\tpersonDesktop.share_servers(function(res){\r\n\t\t\t$scope.loading_server = false;\r\n\t\t\tvar servers = [];\r\n\t\t\tres.servers.forEach(function(server){\r\n\t\t\t\tserver.nets.forEach(function(net){\r\n\t\t\t\t\tservers.push({id: server.id, net: {ip_address: net.ip_address, network_id: net.network_id, subnet_id: net.subnet_id}})\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\t$scope.share_servers = servers;\r\n\t\t\tif($scope.detailData.share_server_ip){\r\n\t\t\t\t$scope.detailData.share_server = $scope.share_servers.filter(function(item){ return item.net.ip_address==$scope.detailData.share_server_ip })[0]\r\n\t\t\t}else{\r\n\t\t\t\t$scope.detailData.share_server = $scope.share_servers[0];\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\t\r\n\t$scope.get_net = function(flag){\r\n\t\t$scope.loading = true;\r\n\t\tnet.query(function(res){\r\n\t\t\t// 过滤无子网网络\r\n\t\t\t$scope.loading = false;\r\n\t\t\t// $scope.networks = res.networks.filter(function(net){ return net.subnets.length > 0});\r\n\t\t\t$scope.networks = res.networks;\r\n\t\t\t$scope.datas._network = $scope.networks.filter(function(item){ return item.id === $scope.detailData.network.id })[0];\r\n\t\t\t$scope.get_sub_net($scope.datas._network, flag);\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.get_sub_net = function(network, flag){\r\n\t\tif(network.subnets.length){\r\n\t\t\t$scope.loading = true;\r\n\t\t\tnet.query_sub({id:network.id},function(res){\r\n\t\t\t\t$scope.loading = false;\r\n\t\t\t\t$scope.subnetworks = res.result;\r\n\t\t\t\tif(flag){\r\n\t\t\t\t\t$scope.datas._subnetwork = $scope.subnetworks.filter(function(item){ return item.id === $scope.detailData.subnet_id })[0]\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.datas._subnetwork = $scope.subnetworks[0];\r\n\t\t\t\t}\r\n\t\t\t\t$scope.clearBindIp();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.subnetworks = [];\r\n\t\t\t$scope.datas._subnetwork = null;\r\n\t\t\t$scope.clearBindIp();\r\n\t\t}\r\n\t\t\r\n\t};\r\n\tvar first = true;\r\n\t$scope.clearBindIp = function(){\r\n\t\tif(first){\r\n\t\t\tfirst = false;\r\n\t\t}else{\r\n\t\t\tif($scope.datas._subnetwork){\r\n\t\t\t\t$scope.IPmodes = $scope.IPmodes2;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.IPmodes = $scope.IPmodes1;\r\n\t\t\t}\r\n\t\t\t$scope.datas.IPmode= $scope.IPmodes[0];\r\n\t\t\t$scope.datas.ips = null;\r\n\t\t}\r\n\t};\r\n\t$scope.get_disks = function(){\r\n\t\t$scope.loading_disk = true;\r\n\t\tpersonDesktop.list_passive_disk({\r\n\t\t\tuser_id:$scope.datas._user.id,\r\n\t\t\tinstance_id:$scope.datas.instance_id\r\n\t\t},function(res){\r\n\t\t\t$scope.loading_disk = false;\r\n\t\t\t$scope.disks = res.result;\r\n\t\t});\r\n\t};\r\n\t$scope.$watch(\"datas._user\",function(newval){\r\n\t\tif(newval){\r\n\t\t\t$scope.get_disks();\r\n\t\t}\r\n\t});\r\n\t$scope.expandedNodes = [];\r\n\tfunction formatData(d,name){\r\n\t    iteration(d,name);\r\n\t    return d;\r\n\t}\r\n\tfunction iteration(data,childName,list){\r\n\t    for(var i = 0 ; i < data.length ; i++){\r\n\t        $scope.expandedNodes.push(data[i]);\r\n\t        if(data[i][childName] && data[i][childName].length){\r\n\t            var len = iteration(data[i][childName],childName);\r\n\t            if(len === 0){\r\n\t                data[i] = undefined;\r\n\t            }\r\n\t        }\r\n\t        if(!data[i]) { continue; }\r\n\t        if(data[i].users && data[i].users.length > 0){\r\n\t            data[i].users.map(user => {\r\n\t                user.name = user.name || user.user_name;\r\n\t                user._is_last = true;\r\n\t                return user;\r\n\t            });\r\n\t            data[i][childName] = data[i].users;\r\n\t        }\r\n\t        if(data[i][childName] && data[i][childName].length === 0){\r\n\t            data[i]= undefined;\r\n\t        }\r\n\t    }\r\n\t    while(data.length > 0) {\r\n\t        // 如果有数组元素为空，每次删除一个\r\n\t        var oldlen = data.length;\r\n\t        for(i = 0 ; i < oldlen ; i++){\r\n\t            if(data[i] === undefined){\r\n\t                data.splice(i,1);\r\n\t                break;\r\n\t            }\r\n\t        }\r\n\t        if(oldlen === data.length) {\r\n\t            break;\r\n\t        }\r\n\t    }\r\n\t    \r\n\t    return data.length;\r\n\t}\r\n\tfunction removeNoChildrenDeparts(data) {\r\n\t    data = data.filter(noUserFilter);\r\n\t    data.forEach(walk);\r\n\t    return data;\r\n\t    function walk(node) {\r\n\t        if(!node.dept_id) { return; }\r\n\t        // 用户上级是没有 children 的\r\n\t        if(node.children) {\r\n\t            node.children = node.children.filter(noUserFilter);\r\n\t            node.children.forEach(walk);\r\n\t        }\r\n\t    }\r\n\t    function noUserFilter(node) {\r\n\t        if(node.dept_id && !node.children && node.users.length === 0) {\r\n\t            return false;\r\n\t        }\r\n\t        return true;\r\n\t    }\r\n\t}\r\n\t$scope.$on('selectCommonUser', function(e, user){\r\n\t\t$scope.datas._is_open = false;\r\n\t\t$scope.datas._user = user;\r\n\t})\r\n\t$q.all([admin.query().$promise,user.query_tree().$promise,domain.list().$promise]).then(function(arr){\r\n\t\t$scope.admin_users = arr[0].users;\r\n\t\t$scope.common_users = arr[1].result;\r\n\t\t$scope.common_users = formatData(removeNoChildrenDeparts($scope.common_users),\"children\");\r\n\t\t$scope.domain_users = arr[2].result;\r\n\t\tvar commonUser = [];\r\n\t\t$scope.expandedNodes.forEach(function(node){\r\n\t\t\tnode.children.forEach(function(user){\r\n\t\t\t\tif(user.user_id && !user.dept_id){\r\n\t\t\t\t\tuser.id = user.user_id;\r\n\t\t\t\t\tcommonUser.push(user);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\tvar dus = $scope.domain_users.reduce(function(arr,b){\r\n\t\t\tb.groups.forEach(function(g){\r\n\t\t\t\t[].push.apply(arr,g.users);\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tvar all_users = $scope.admin_users\r\n\t\t\t.concat(commonUser)\r\n\t\t\t.concat(dus)\r\n\t\t$scope.datas._user = all_users.filter(function(user){ return user.id == $scope.datas.user_id})[0];\r\n\t})\r\n\t$scope.name = function(net){\r\n\t\tvar is_dhcp = net.enable_dhcp;\r\n\t\tif(is_dhcp){\r\n\t\t\treturn net.name + \" ( \" + net.start_ip + \" - \" + net.end_ip + \" ) \";\r\n\t\t}else{\r\n\t\t\treturn net.name;\r\n\t\t}\r\n\t};\r\n\t$scope.user_name = function(user){\r\n\t\treturn user.name + \" ( \" + user.real_name +\" ) \";\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar volumes = $scope.disks.filter(function(d){ return d._selected});\r\n\t\tvar _local_gb = $scope.btndisks.length ? $scope.btndisks[0].local_gb : undefined\r\n\t\tvar is_data_disk = Boolean(_local_gb || $scope.datas.local_gb);\r\n\t\tvar postData = {\r\n\t\t\tid:$scope.datas.id,\r\n\t\t\tdisplay_name:$scope.datas.display_name,\r\n\t\t\tuser_id:$scope.datas._user.id,\r\n\t\t\tvcpu:$scope.datas.vcpu,\r\n\t\t\tmemory_mb:$scope.datas.memory_mb*1024,\r\n\t\t\tnetwork_id:$scope.datas._network.id,\r\n\t\t\tsubnet_id:$scope.datas._subnetwork?$scope.datas._subnetwork.id:'',\r\n\t\t\tlocal_gb:_local_gb,\r\n\t\t\tip:$scope.datas.ips?$scope.datas.ips: undefined,\r\n\t\t\tgpu_auto_assignment: $scope.datas.enable_gpu,\r\n\t\t\tvm_hostname:$scope.datas.vm_hostname,\r\n\t\t\trollback:$scope.detailData.rollback,\r\n\t\t\trollback_weekday:$scope.detailData.rollback == 2 ? $scope.detailData.rollback_weekday : undefined,\r\n\t\t\trollback_monthday:$scope.detailData.rollback == 3 ? $scope.detailData.rollback_monthday : undefined,\r\n\t\t\tattach_volumes:volumes,\r\n\t\t\tusb_redir:$scope.datas.usb_redir,\r\n\t\t\tusb_version:($scope.datas.usb_redir && $scope.datas.virtual_type == 'kvm') ? $scope.datas.usb_version : undefined,\r\n\t\t\tdata_rollback:is_data_disk ? $scope.detailData.data_rollback : undefined,\r\n\t\t\tenable_share: $scope.detailData.enable_share,\r\n\t\t\tshare_server_ip: $scope.detailData.enable_share?$scope.detailData.share_server.net.ip_address:undefined,\r\n\t\t\tshare_server_id: $scope.detailData.enable_share?$scope.detailData.share_server.id:undefined,\r\n\t\t\texpand_enabled: $scope.datas.expand_enabled\r\n\t\t};\r\n\t\tif(postData.data_rollback == 2){\r\n\t\t\tpostData.data_rollback_weekday = $scope.detailData.data_rollback_weekday;\r\n\t\t}\r\n\t\tif(postData.data_rollback == 3){\r\n\t\t\tpostData.data_rollback_monthday = $scope.detailData.data_rollback_monthday;\r\n\t\t}\r\n\t\tpersonDesktop.update(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.refresh();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"snapshotPersonalDialog\", [\"$scope\", \"$modalInstance\", \"PersonDesktop\", \"VMCommon\",\"$$$I18N\",function($scope, $modalInstance, personDesktop, vm, $$$I18N){\r\n\t$scope.rows = [];\r\n\tfunction get_list(){\r\n\t\t$scope.loading = true;\r\n\t\tvm.list_snapshot({ instance_id: $scope.currentItem.instance_id },function(res){\r\n\t\t\t$scope.rows = res.snapshots.map(function(item,index){\r\n\t\t\t\titem.snapshot_name = item.name;\r\n\t\t\t\titem.display_description = item.desc;\r\n\t\t\t\titem.editable = false;\r\n\t\t\t\treturn item;\r\n\t\t\t}).sort(function(a,b){\r\n\t\t\t\treturn (new Date(b.create_at)).getTime() - (new Date(a.create_at)).getTime() > 0 ? 1 : -1;\r\n\t\t\t});\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\tget_list();\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.hasSaveButton = function(){\r\n\t\treturn $scope.rows.filter(function(item){ return item.editable }).length\r\n\t};\r\n\t$scope.hasSubmit = function(){\r\n\t\treturn $scope.rows.filter(function(item){ return item._submitting }).length\r\n\t};\r\n\t$scope.save = function(cur){\r\n\t\tcur._submitting = true;\r\n\t\tvm.take_snapshot({\r\n\t\t\tmethod:\"save\",\r\n\t\t\tname:cur.snapshot_name,\r\n\t\t\tinstance_id:$scope.currentItem.instance_id,\r\n\t\t\tdesc:cur.display_description\r\n\t\t}).$promise.then(function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tget_list();\r\n\t\t})\r\n\t\t.finally(function(){\r\n\t\t\tcur._submitting = false;\r\n\t\t});\t\t\r\n\t}\r\n\r\n\t$scope.addNew = function(){\r\n\t\tvar manuals = $scope.rows.filter(function(item){ return item.created_by == 'manual' }).length;\r\n\t\tif(manuals==2){\r\n\t\t\t$.bigBox({\r\n\t\t\t    title : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t    content : $$$I18N.get(\"只能创建两个手动快照\"),\r\n\t\t\t    icon : \"fa fa-warning shake animated\",\r\n\t\t\t    timeout : 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.rows.unshift({\"editable\":true});\r\n\t\t}\r\n\t};\r\n\t$scope.delete = function(cur){\r\n\t\tcur._submitting = true;\r\n\t\tif(cur.editable){\r\n\t\t\tvar idx = $scope.rows.indexOf(cur);\r\n\t\t\t$scope.rows.splice(idx,1);\r\n\t\t}else{\r\n\t\t\tvm.delete_snapshot({\r\n\t\t\t\tsnapshot_name:cur.snapshot_name,\r\n\t\t\t\tsnapshot_volumes:cur.snapshot_volumes,\r\n\t\t\t\tinstance_id:$scope.currentItem.instance_id\r\n\t\t\t},function(res){\r\n\t\t\t\tvar idx = $scope.rows.indexOf(cur);\r\n\t\t\t\t$scope.rows.splice(idx,1); \r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\tcur._submitting = false;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.restore = function(cur){\r\n\t\tcur._submitting = true;\r\n\t\tvm.restore_snapshot({\r\n\t\t\tmethod:\"restore\",\r\n\t\t\tsnapshot_volumes:cur.snapshot_volumes,\r\n\t\t\tsnapshot_name:cur.snapshot_name,\r\n\t\t\tinstance_id:$scope.currentItem.instance_id\r\n\t\t}, function() {\r\n\t\t\t$modalInstance.close();\r\n\t\t\tget_list();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\tcur._submitting = false;\r\n\t\t\tget_list();\r\n\t\t});\r\n\t}\r\n}])\r\n.controller('sceneAddServerDialog', ['$scope', 'Server','$modalInstance','param',function($scope,Server,$modalInstance,param){\r\n\tServer.query(function(res){\r\n\t\t$scope.servers = res.servers;\r\n\t\t$scope.server = $scope.servers[0];\r\n\t});\r\n\t$scope.post = function(){\r\n\t\tvar _this = this;\r\n\t\t$scope.submiting = true;\r\n\t\tServer.domain_set_scene({\r\n\t\t\tid:param.id,\r\n\t\t\thas_domain:true,\r\n\t\t\tad_server_id:_this.server.id,\r\n\t\t\trecreate_sid:_this.is_sid\r\n\t\t},function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('personalAddServerDialog', ['$scope', 'Server','$modalInstance','param',function($scope,Server,$modalInstance,param){\r\n\tServer.query(function(res){\r\n\t\t$scope.servers = res.servers;\r\n\t\t$scope.server = $scope.servers[0];\r\n\t});\r\n\t$scope.post = function(){\r\n\t\tvar _this = this;\r\n\t\t$scope.submiting = true;\r\n\t\tServer.domain_set_person({\r\n\t\t\tinstance_ids:param.map(function(p){ return p.id }),\r\n\t\t\thas_domain:true,\r\n\t\t\tad_server_id:_this.server.id,\r\n\t\t\trecreate_sid:_this.is_sid\r\n\t\t},function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('hostConfigDialog', ['$scope','Storage','param','$modalInstance','Host', function($scope,Storage,param,$modalInstance,Host){\r\n\tvar host_ids = param.phostids;\r\n\tvar datas = {};\r\n\t$scope.datas = datas = param.pstore;\r\n\tObject.keys(datas).forEach(function(key){\r\n\t\tif(host_ids.indexOf(datas[key].storage_uuid) === -1){\r\n\t\t\tdatas[key] = undefined;\r\n\t\t\tdelete datas[key];\r\n\t\t}\r\n\t});\r\n\t$scope.loading = true;\r\n\tStorage.get_luns({\r\n\t\tstorage_hosts:host_ids\r\n\t},function(res){\r\n\t\tres.result.forEach(function(host){\r\n\t\t\tif(!datas[host.storage_uuid]){\r\n\t\t\t\thost.storages.forEach(function(sto){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tsto._total_size = Number(sto.storage_metadata.capabilities.total_capacity_gb).toFixed(0);\r\n\t\t\t\t\t\tsto._free_size = Number(sto.storage_metadata.capabilities.free_capacity_gb).toFixed(0);\r\n\t\t\t\t\t\tsto._used_size = Number(sto._total_size - sto._free_size).toFixed(0);\r\n\t\t\t\t\t}catch(err){}\r\n\t\t\t\t});\r\n\t\t\t\tdatas[host.storage_uuid] = host;\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar firstKey = Object.keys(datas)[0];\r\n\t\t$scope.host = datas[firstKey];\r\n\t\t$scope.change_host($scope);\r\n\t\t$scope.loading = false;\r\n\t});\r\n\t$scope.sys_luns = [];\r\n\t$scope.data_luns = [];\r\n\t$scope.filterStorage = function(_s,type,_scope){\r\n\t\t$scope.loading_lun = true;\r\n\t\tHost.filter_storage({\r\n\t\t\tstorage_id:_s.uuid,\r\n\t\t\tdevice_type:_s.device_type,\r\n\t\t\tnode_uuid:_s.node_uuid\r\n\t\t}).$promise.then(function(res){\r\n\t\t\t$scope.loading_lun = false;\r\n\t\t\tres.result.forEach(function(s){\r\n\t\t\t\ttry{\r\n\t\t\t\t\ts._total_size = Number(s.storage_metadata.capabilities.total_capacity_gb).toFixed(0);\r\n\t\t\t\t\ts._free_size =  Number(s.storage_metadata.capabilities.free_capacity_gb).toFixed(0);\r\n\t\t\t\t\ts._used_size =  Number(s._total_size - s._free_size).toFixed(0);\r\n\t\t\t\t}catch(err){}\r\n\t\t\t});\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\t$scope.sys_luns = res.result;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\t$scope.data_luns = res.result;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t_scope.storage_performance = ($scope.sys_luns.filter(function(item){ return item.uuid ===_scope.host.storage_performance })[0]) || $scope.sys_luns[0];\r\n\t\t\t_scope.storage_capacity = ($scope.data_luns.filter(function(item){ return item.uuid === _scope.host.storage_capacity})[0]) || $scope.data_luns[0];\r\n\t\t});\r\n\t};\r\n\t$scope.change_host = function(_scope){\r\n\t\t_scope.image_storage_performance = _scope.host.storages.filter(function(sto){ return sto.uuid === _scope.host.image_storage_performance})[0];\r\n\t\t_scope.image_storage_capacity = _scope.host.storages.filter(function(sto){ return sto.uuid === _scope.host.image_storage_capacity})[0];\r\n\t\t$scope.filterStorage(_scope.image_storage_performance,1,_scope);\r\n\t\t$scope.filterStorage(_scope.image_storage_capacity,2,_scope);\r\n\t};\r\n\t$scope.ok = function(_scope){\r\n\t\tvar d = _scope.host;\r\n\t\td._changed = true;\r\n\t\td.storage_performance = _scope.storage_performance.uuid;\r\n\t\td.storage_capacity = _scope.storage_capacity.uuid;\r\n\t\td.image_storage_performance = _scope.image_storage_performance.uuid;\r\n\t\td.image_storage_capacity = _scope.image_storage_capacity.uuid;\r\n\t}\r\n\t$scope.okAll = function(){\r\n\t\t$scope.ok(this);\r\n\t\t$scope.close();\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t}\r\n\t$scope.dismiss = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t}\r\n}])\r\n.controller(\"saveTemplatePersonalDialog\", [\r\n\t\"$scope\", \"$modalInstance\", \"Admin\", \"PersonDesktop\",\"HardwareTemplate\", \"$$$os_types\",\"virtualHost\",\"networkWithHost\",\"Network\",\"$$$I18N\",\r\n\tfunction($scope, $modalInstance, admin, personDesktop,hardwares,$$$os_types,virtualHost,networkWithHost,network,$$$I18N){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\tvar currentItem = $scope.currentItem = angular.copy($scope.currentItem);\r\n\t$scope.type = 2;\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('固定IP'), value: 'static'},{name: $$$I18N.get('系统分配'), value: 'auto'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types2[1];\r\n\tadmin.query(function(res){\r\n\t\t$scope.owners = res.users;\r\n\t\t$scope.owner = $scope.owners.filter((o) => o.id === currentItem.user_id)[0] || $scope.owners[0];\r\n\t});\r\n\tpersonDesktop.list_detail({id:currentItem.instance_id}, function(res){\r\n\t\t$scope.currentItemDetail = res.result;\r\n\t}).$promise.then(function(){\r\n\t\t$scope.getVirtualHost($scope.type, currentItem.rbd_enabled);\r\n\t})\r\n\t$scope.getVirtualHost = function (type,rbd_enabled){\r\n\t\t$scope.host_loading = true;\r\n\t\tvirtualHost.query({\r\n\t\t\tvirtual_type: currentItem.virtual_type,\r\n\t\t\trbd_enabled: rbd_enabled\r\n\t\t\t// enable_gpu: currentItem.enable_gpu\r\n\t\t},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t$scope.host = $scope.hosts.filter((h) => h.host_name === currentItem.hostname)[0] || $scope.hosts[0];\r\n\t\t\t$scope.host && $scope.getNetwork($scope.host, true);\r\n\t\t});\r\n\t}\r\n\t\r\n\r\n\t// function getIps(subnet_id, _scope){\r\n\t// \tif(subnet_id){\r\n\t// \t\t$scope.port_loading = true;\r\n\t// \t\tnetwork.ports({ id: subnet_id },function(res){\r\n\t// \t\t\tif(res.unused_ips.length){\r\n\t// \t\t\t\t$scope.band_ips = res.unused_ips;\r\n\t// \t\t\t}\r\n\t// \t\t\telse{\r\n\t// \t\t\t\t$scope.band_ips = [\"无可用IP\"];\r\n\t// \t\t\t}\r\n\t// \t\t\t_scope.bind_ip = $scope.band_ips[0];\r\n\t// \t\t\t_scope.bind_ip_loading = false;\r\n\t// \t\t}).$promise.finally(() =>{\r\n\t// \t\t\t$scope.port_loading = false;\r\n\t// \t\t})\r\n\t// \t}\r\n\t// };\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope);\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[1];\r\n\t\t}\r\n\t\t\t\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope, isFirst){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t// $scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\tif(isFirst){\r\n\t\t\t\t\t_scope.subnet = _scope.subnets.filter((s) => s.id === $scope.currentItemDetail.subnet_id)[0]\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t}\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\t\t\r\n\t};\r\n\t$scope.getNetwork = function(host, isFirst){\r\n\t\tif(host){\r\n\t\t\t$scope.net_loading = true;\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks.filter((n) => n.id === $scope.currentItemDetail.network.id)[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope, isFirst);\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.net_loading = false;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.submiting = true ;\r\n\t\t$scope.afterSubmiting =false ;\r\n\t\tvar _this = this;\r\n\t\tif(this.saveTemplate.$valid){\r\n\t\t\tvar postData = {\r\n\t\t\t\tinstance_id:currentItem.instance_id,\r\n\t\t\t\towner:_this.owner.id,\r\n\t\t\t\ttype_code:_this.type,\r\n\t\t\t\tname:_this.name,\r\n\t\t\t\tdescription:_this.description,\r\n\t\t\t\tnetwork:_this.network.id,\r\n\t\t\t\tsubnet:_this.subnet ? _this.subnet.id : \"\",\r\n\t\t\t\tband_type:_this.bind_ip_type.value,\r\n\t\t\t\tband_ip:_this.bind_ip_type.value === 'static'? _this.bind_ip.value : undefined,\r\n\t\t\t\thost_uuid:_this.host.host_uuid,\r\n\t\t\t\tusername: currentItem.virtual_type=='hyper-v'?_this.username:undefined,\r\n\t\t\t\tuserPassword: currentItem.virtual_type=='hyper-v'?_this.userPassword:undefined,\r\n\t\t\t\tuserPasswordConfirm: currentItem.virtual_type=='hyper-v'?_this.userPasswordConfirm:undefined\r\n\t\t\t\t// enable_gpu:currentItem.enable_gpu\r\n\t\t\t};\r\n\t\t\tpersonDesktop.saveAsTemplate(postData, function(res){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},function(){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n/* 个人桌面池 */\r\n.controller(\"vdiDesktopPoolController\", [\"$scope\",\"DeskPool\",\"$modal\",\"$timeout\",\"$interval\",\"$filter\",\"$$$I18N\", function($scope,DeskPool,$modal,$timeout,$interval,$filter,$$$I18N){\r\n\tvar _scope=$scope;\r\n\t$scope.rows=[],$scope.loading=true;\r\n\r\n\t//刷新机器执行后的状态\r\n\t$interval(function(){\r\n\t\tvar filterSearch = $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n\t\tvar filterSearchPage = $filter(\"paging\")(filterSearch, $scope.currentPage, $scope.pagesize);\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"personpools\", filterSearchPage.map(item => item.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"personpoolsRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(item.status == 'updating'){\r\n\t\t\t\titem._ignore = true;\r\n\t\t\t}else{\r\n\t\t\t\titem._ignore = false;\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t/*获取桌面池列表*/\r\n\t$scope.refresh=function(_s = $scope){\r\n\t\tDeskPool.query(function(res){\r\n\t\t\t$scope.loading=false;\r\n\t\t\t$scope.rows=res.result;\r\n\t\t});\r\n\t}\r\n\t$scope.refresh();\r\n\t$scope.pagesize = Number($$$storage.getSessionStorage('pool_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n \t$scope.$watch(\"pagesize\",function(newvalue){\r\n \t\t$$$storage.setSessionStorage('pool_pagesize', newvalue);\r\n\t});\r\n\r\n\r\n\t//删除个人桌面池\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面删除'>\"+\r\n\t\t\t\t\t\"个人桌面池删除</h4></div><div class='modal-body'><form class='form-horizontal'><p ng-show='!is_run' style='margin-bottom:20px;' localize='确定删除此个人桌面池吗？'>确定删除此个人桌面池吗？</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tDeskPool.delete({\r\n\t\t\t\t\t\tids: rows.map(function(row){ return row.id; }),\r\n\t\t\t\t\t}, function(data){\r\n\t\t\t\t\t\trows.forEach(function(r){\r\n\t\t\t\t\t\t\t_scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}, function(error){\r\n\t\t\t\t\t\trows.forEach(function(r){\r\n\t\t\t\t\t\t\t_scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\t\t\t\r\n\t};\r\n\r\n\t//获取选中item的id\r\n\tfunction getIds(){\r\n\t\tvar params={};\r\n\t\tvar rows = $scope.rows.filter(function(row){ return row._selected && row.online_count<row.total_count ;});\r\n\t\tparams={\r\n\t\t\tids:rows.map(it => it.id)\r\n\t\t}\r\n\t\treturn params;\r\n\t}\r\n\r\n\t//桌面池开机\r\n\t$scope.start=function(item){\r\n\t\tvar params=getIds();\r\n\t\tparams.action='power-on';\r\n\t\tDeskPool.start(params,function(res){\r\n\t\t\tif(res.result){\r\n\t\t\t\t_scope.refresh();\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\t//桌面池强制关机\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.online_count > 0;});\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定强制关闭桌面吗'>确定强制关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tids:rows.map(it => {return it.id}),\r\n\t\t\t\t\t\t\taction:\"force-power-off\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tDeskPool.shutdown(params,() => { _scope.refresh(); });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t//桌面池自然关机\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.online_count>0; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP3\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭桌面吗'>确定自然关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tids:rows.map(it => {return it.id}),\r\n\t\t\t\t\t\t\taction:\"power-off\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tDeskPool.shutdown(params,function(){\r\n\t\t\t\t\t\t\t_scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n/* 个人桌面池二级列表*/\r\n.controller(\"vdiDesktopPoolListController\", [\"$scope\",\"$modal\",\"$interval\",\"$filter\",\"DeskPool\",\"DeskPoolSecond\",\"$$$I18N\",\"UserRole\", function($scope,$modal,$interval,$filter,DeskPool,DeskPoolSecond,$$$I18N,UserRole){\r\n\tvar model_name,url,_scope=$scope,cid,carr,searchName,breadPoolName;\r\n\tlet hasTerminalpermission = UserRole.currentUserRoles.filter(function(role){ return role=='Terminal' }).length;\r\n\tlet hasTerminalManagepermission = UserRole.currentUserRoles.filter(function(role){ return role=='Terminal_Manage' }).length;\r\n\tlet hasClassroompermission = UserRole.currentUserRoles.filter(function(role){ return role=='Classroom' }).length;\r\n\t$scope.linkTerminal = hasTerminalpermission && hasTerminalManagepermission && hasClassroompermission ? true:false;\r\n\t$scope.inCurrentUserPool = function(pool){\r\n\t\tif($$$storage.getSessionStorage(\"loginInfo\"))\r\n\t\t\treturn JSON.parse($$$storage.getSessionStorage(\"loginInfo\")).pool.indexOf(pool)>-1\r\n\t};\r\n\turl=decodeURIComponent(location.href);\r\n\tif(url.indexOf('client')>=0){\r\n\t\tsearchName=model_name=url.split('?')[1].split('&')[0];\r\n\t\t// breadPoolName=url.split('=')[1];\r\n\t\t// $scope.$root.$broadcast(\"navItemSelected\", [\"桌面\", \"个人桌面池\", breadPoolName]);\r\n\t} else {\r\n\t\t// model_name=url.split('?')[1];\r\n\t\t// $scope.$root.$broadcast(\"navItemSelected\", [\"桌面\", \"个人桌面池\", model_name]);\r\n\t}\r\n\tcarr=url.split('?')[0].split('/');\r\n\tcid=carr[carr.length-1];\r\n\t$scope.rows=[],$scope.loading=true;\r\n\r\n\t//tasklog刷新机器执行后的状态\r\n\t$interval(function(){\r\n\t\tvar filterSearch = $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n\t\tvar filterSearchPage = $filter(\"paging\")(filterSearch, $scope.currentPage, $scope.pagesize);\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"instanceIDS\", filterSearchPage.map(item => item.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"instancesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(item.status == 'updating'){\r\n\t\t\t\titem._ignore = true;\r\n\t\t\t}else{\r\n\t\t\t\titem._ignore = false;\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t//桌面名排序\r\n\t$scope.sortDesktopName = function(name,bool){\r\n\t\t$scope.rows.sort(function(a,b){\r\n\t\t\tvar _numa,_numb;\r\n\t\t\tvar get_num = function(tar){\r\n\t\t\t\tfor(var i = tar.length - 1 ; i-- ; i >= 0 ){\r\n\t\t\t\t\tif(!Number(tar[i])){\r\n\t\t\t\t\t\treturn Number(tar.substring(i + 1,tar.length));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t_numa = get_num( a[name] );\r\n\t\t\t_numb = get_num( b[name] );\r\n\t\t\treturn (_numa - _numb) * (bool ? -1 : 1);\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.getObjLength = function(obj){\r\n\t\ttry{\r\n\t\t\treturn Object.keys(obj).length;\r\n\t\t}catch(err){\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t};\r\n\r\n\t//获取桌面列表|更新桌面列表\r\n\t_scope.refresh=function(){\r\n\t\tDeskPoolSecond.get({id:cid},function(res){\r\n\t\t\t_scope.loading=false;\r\n\t\t\t_scope.rows=res.result;\r\n\t\t\t$scope.$root.$broadcast(\"navItemSelected\", [\"桌面\", \"个人桌面池\", res.person_pool_name]);\r\n\t\t\t_scope.sortDesktopName('display_name');\r\n\t\t\t_scope.searchText=searchName;\r\n\t\t\t_scope.loading=false;\t\r\n\t\t})\r\n\t}\r\n\r\n\t_scope.refresh();\r\n\r\n\t$scope.pagesize    = Number($$$storage.getSessionStorage('pool_details_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n \t$scope.$watch(\"pagesize\",function(newvalue){\r\n \t\t$$$storage.setSessionStorage('pool_details_pagesize', newvalue);\r\n\t});\r\n\t// $scope.rows=mockData.result;\r\n\r\n\t//获取桌面池详情信息\r\n\t$scope.getDetail = function(it){\r\n\t\t$scope.loading_detail = true;\r\n\t\tDeskPool.list_detail({id:it.id},function(res){\r\n\t\t\tit.detailData = res.result;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading_detail = false;\r\n\t\t});\r\n\t};\r\n\r\n\t//桌面池详情展开收起\r\n\t$scope.expand = function(row){\r\n\t\t$scope.rows.forEach(r => {\r\n\t\t\tif(row.id === r.id){\r\n\t\t\t\tr._expand = !row._expand;\r\n\t\t\t\tif(r._expand){\r\n\t\t\t\t\t$scope.getDetail(row);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tr._expand = false;\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\t//searchText输入搜索\r\n\t$scope.updateData = function(text,select){\r\n\t\t$scope.rows = $scope.rows.filter(function(row){\r\n\t\t\trow._selected = false;\r\n\t\t\tif(select){\r\n\t\t\t\tif(text && text.trim()){\r\n\t\t\t\t\treturn row.status === select;\r\n\t\t\t\t}\r\n\t\t\t\treturn row.status === select;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t};\r\n\r\n\t//操作--查看桌面\r\n\t$scope.view = function(item){\r\n\t\twindow.open(\"desktopScreenshot.html#\" + item.id, \"person_desktop_\" + item.id);\r\n\t};\r\n\r\n\t//获取选中item的id\r\n\tfunction getIds(item){\r\n\t\tvar params={};\r\n\t\tvar rows = item ? [item] :$scope.rows.filter(function(row){ return row._selected  });\r\n\t\tparams={\r\n\t\t\tids:rows.map(it => it.id)\r\n\t\t}\r\n\t\treturn params;\r\n\t}\r\n\r\n\t//个人桌面池开机\r\n\t$scope.start = function(item) {\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'shutdown' || row.status == 'suspended') && !row.task_state; });\r\n\t\tvar params={\r\n\t\t\tinstance_ids:rows.map(it => {it._selected=false; return it.id})\r\n\t\t}\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tDeskPoolSecond.start(params,function(res){\r\n\t\t\t\t// _scope.refresh();//tasklog刷新，这里不需要再拉取列表\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t//桌面池强制关机\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定强制关闭桌面吗'>确定强制关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tinstance_ids:rows.map(it => {it._selected=false; return it.id})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tDeskPoolSecond.shutdown(params,() => {});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t//桌面池自然关机\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP3\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭桌面吗'>确定自然关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tinstance_ids:rows.map(it => {it._selected=false; return it.id})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tDeskPoolSecond.shutdown(params,function(){\r\n\t\t\t\t\t\t\t// _scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t//桌面池重启\r\n\t$scope.restart = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended') && !row.task_state; })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP4\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重启'>\"+\r\n\t\t\t\t\t\t\t\"桌面重启</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启桌面吗'>确定重启桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tinstance_ids:rows.map(it=> {it._selected=false; return it.id})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tDeskPoolSecond.reboots(params,function(){\r\n\t\t\t\t\t\t\t// _scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t//挂起状态\r\n\t$scope.pause = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'running' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP5\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面暂停'>\"+ \r\n\t\t\t\t\t\t\"桌面暂停</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定暂停桌面吗'>确定暂停桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tinstance_ids:rows.map(it=> {it._selected=false; return it.id})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tDeskPoolSecond.pause(params,function(){\r\n\t\t\t\t\t\t\t// _scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t//唤醒\r\n\t$scope.resume = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'paused' && !row.task_state; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP6\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面恢复'>\"+\r\n\t\t\t\t\t\t\"桌面恢复</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定恢复桌面吗'>确定恢复桌面吗?</p><footer   class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tvar params={\r\n\t\t\t\t\t\t\tinstance_ids:rows.map(it=> {it._selected=false; return it.id})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tDeskPoolSecond.resume(params,function(){\r\n\t\t\t\t\t\t\t// _scope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n/*新增个人桌面池dialog控制器*/\r\n.controller(\"newDeskPoolDialog\", [\"$scope\", \"$modalInstance\",\"$q\",\"DeskPool\", \"Host\",\"Network\", \"HardwareTemplate\",\"PersonTemplate\",\"User\",\"Admin\",\"Depart\",\"PersonDesktop\",\"Server\",\"$$$I18N\",\"$$$MSG\",\"ResourcePool\",\"$filter\",\"$modal\",\"VMCommon\",\r\n\tfunction($scope, $modalInstance,$q,DeskPool, host, networks, hardwares, images,user,Admin, Depart,Person,server, $$$I18N, $$$MSG,ResourcePool,$filter, $modal, vm){\r\n\t\tvar _scope=$scope;\r\n\t\t$scope.desktopNum = 1;\r\n\t\t$scope.max_instance = 0;\r\n\t\t$scope.host_loading = true;\r\n\t\t$scope.regXP = /WindowsXP|WindowsXP_64/;\r\n\t\t$scope.reg = /(windows\\s*7|8|10)/i;\r\n\t\t$scope.depart = {name: '全部', id: -1, full_path: 'root'};\r\n\t\t/**\r\n\t\t* [selectMode 部门域选择]\r\n\t\t*/\r\n\t\tfunction traverse(ids, obj){\r\n\t\t \tif(obj.children && obj.children.length>0){\r\n\t\t \t\tobj.children.forEach(function(item){\r\n\t\t \t\t\tids.push(item.id);\r\n\t\t \t\t\ttraverse(ids, item)\r\n\t\t \t\t})\r\n\t\t \t}\r\n\t\t}\r\n\t    function setData(data, index){\r\n\t        data.filter(function(item){ return item.full_path_map.length == index }).forEach(function(item){\r\n\t            var children = data.filter(function(d){ return d.parent == item.id });\r\n\t            item.children = children;\r\n\t        });\r\n\t    }\r\n\t    function setTreeData(DATA){\r\n\t        DATA.forEach(function(item){\r\n\t            item.full_path_map = item.full_path.split('/');\r\n\t        });\r\n\t        DATA.sort(function(a,b){ return a.full_path_map.length>b.full_path_map.length?-1:1 });\r\n\t        for(var i=1; i<DATA[0].full_path_map.length; i++){\r\n\t            setData(DATA, i);\r\n\t        }\r\n\t        return [DATA[DATA.length-1]];\r\n\t    };\r\n\r\n\t    //初始化树状图\r\n\t    function treeOptFun(arg,flag){\r\n\t    \targ.opts = {};\r\n\t    \targ.treedata = newData;\r\n\t    \targ.expandnodes = DATA;\r\n\t    \targ.selected = arg.treedata[0]?arg.treedata[0]:null;\r\n\t    \tif(arg.selected){\r\n\t    \t\targ.selected._selected = true;\r\n\t    \t}\r\n\t    \targ.showSelected = function(node, selected){\r\n\t    \t\tnode._selected = selected;\r\n\t    \t\targ.selected = node;\r\n\t    \t}\r\n\t    };\r\n\t    var DATA = [], newData = [];\r\n\r\n\t    treeOptFun($scope,true);\r\n\t    $scope.islastGroup = function(){\r\n\t    \treturn $scope.selected && !DATA.filter(function(item){\r\n\t    \t\t\t\treturn item.id!==$scope.selected.id;\r\n\t    \t\t\t}).filter(function(item){\r\n\t    \t\t\t\treturn (item.full_path+'/').indexOf($scope.selected.full_path+'/')>-1;\r\n\t    \t\t\t}).length\r\n\t    }\r\n\r\n\t    $scope.getUserGroup = function(){\r\n\t    \tDepart.query(function(res){\r\n\t    \t\tDATA = res.result;\r\n\t    \t\t$scope.treedata = newData = DATA.length?setTreeData(DATA):[];\r\n\t    \t\t$scope.treedata.sort(function(a,b){ return a.full_path>b.full_path?-1:1 });\r\n\t    \t\t$scope.expandnodes = DATA;\r\n\t    \t\tvar selected = {};\r\n\t    \t\tif($scope.selected){\r\n\t    \t\t\tvar _selected = DATA.filter(function(item){ return item.id==$scope.selected.id })[0];\r\n\t    \t\t\tselected = _selected?_selected:newData[0];\r\n\t    \t\t}else{\r\n\t    \t\t\tselected = DATA.filter(function(item){ return item.name=='default' })[0];\r\n\t    \t\t}\r\n\t    \t\t$scope.selected = selected;\r\n\t    \t\tif($scope.selected){\r\n\t    \t\t\t$scope.selected._selected = true;\r\n\t    \t\t}\r\n\t    \t},function(err){\r\n\r\n\t    \t});\r\n\t    }\r\n\r\n\r\n\t\t// 第一步\r\n\t\t$scope.step1 = {};\r\n\t\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\t\t$scope.get_subnet = function(network){\r\n\t\t\tif(network.subnets.length){\r\n\t\t\t\tnetworks.query_sub({\r\n\t\t\t\t\tid:network.id\r\n\t\t\t\t},function(res){\r\n\t\t\t\t\t$scope.subnetworks = res.result.map(function(n){\r\n\t\t\t\t\t\tn._desc = n.start_ip ?(n.name + \" (\" + n.start_ip +\" - \"+ n.end_ip + \") \") :  n.name;\r\n\t\t\t\t\t\treturn n;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.step1.subnetwork = $scope.subnetworks[0];\r\n\t\t\t\t\t$scope.clearBindIp();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t$scope.subnetworks = [];\r\n\t\t\t\t$scope.step1.subnetwork = null;\r\n\t\t\t\t$scope.clearBindIp();\r\n\t\t\t}\r\n\t\t};\r\n\t\tnetworks.query(function(data){\r\n\t\t\t// $scope.networks = data.networks.filter(function(n){ return n.subnets.length > 0});\r\n\t\t\t$scope.networks = data.networks;\r\n\t\t\tif($scope.networks.length){\r\n\t\t\t\t$scope.step1.network = $scope.networks[0];\r\n\t\t\t\t$scope.get_subnet($scope.step1.network);\r\n\t\t\t}\r\n\t\t});\r\n\t\tResourcePool.query(function(res){\r\n\t\t\t$scope.resources = res.result.filter(function(item){ return item.hosts.length > 0});\r\n\t\t\t$scope.step1.resource = $scope.resources[0];\r\n\t\t\t$scope.resource_update();\r\n\t\t});\r\n\t\t$scope.resource_update = function(){\r\n\t\t\t$scope.get_personal_template();\r\n\t\t};\r\n\t\t$scope.get_personal_template = function(){\r\n\t\t\t$scope.templates = [];\r\n\t\t\t$scope.templateNum = undefined;\r\n\t\t\t$scope.step1.image = undefined;\r\n\t\t\t$scope.loading_template = true;\r\n\t\t\tvm.list_template({type:2,virtual_type:$scope.step1.resource.type,rbd_enabled:$scope.step1.resource.rbd_enabled}, function(data){\r\n\t\t\t\t$scope.loading_template = false;\r\n\t\t\t\t$scope.winTable = data.win_images\r\n\t\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\r\n\t\t\t\t$scope.linTable = data.linux_images\r\n\t\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\t\t\t\t$scope.otherTable = data.other_images\r\n\t\t\t\t\t.filter(function(item){ return item.status === \"alive\" })\r\n\t\t\t\t$scope.templates = $scope.winTable.concat($scope.linTable).concat($scope.otherTable);\r\n\t\t\t\t$scope.templateNum = $scope.templates.length;\r\n\t\t\t\t$scope.step1.image = $scope.templates[0];\r\n\t\t\t});\r\n\t\t};\r\n\t\t$scope.clearBindIp = function(){\r\n\t\t\tif($scope.step1.subnetwork){\r\n\t\t\t\t$scope.IPmodes = $scope.IPmodes2;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.IPmodes = $scope.IPmodes1;\r\n\t\t\t}\r\n\t\t\t$scope.step1.IPmode= $scope.IPmodes[0];\r\n\t\t\t$scope.step1.ip = null;\r\n\t\t};\r\n\t\t// 第二步\r\n\t\t$scope.step2 = {};\r\n\t\t$scope.updateHardware = function(){\r\n\t\t\tvar is_win7UP = $scope.reg.test($scope.step1.image.os_type);\r\n\t\t\tvar is_winXP = $scope.regXP.test($scope.step1.image.os_type);\r\n\t\t\t$scope.step2.usb_version = \"2.0\";\r\n\t\t\tif(is_win7UP){\r\n\t\t\t\t$scope.step2.usb_redir = true;\r\n\t\t\t\t$scope.step2.usb_version = \"3.0\";\r\n\t\t\t}else if(is_winXP){\r\n\t\t\t\t$scope.step2.usb_redir = true;\r\n\t\t\t}else{\r\n\t\t\t\t// $scope.step2.usb_redir = false;\r\n\t\t\t}\r\n\t\t\t$scope.step2.usb3_disabled = !is_win7UP ? true : false;\r\n\t\t}\r\n\t\t// 第三步\r\n\t\t$scope.step3 = {};\r\n\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t$scope.get_host = function(){\r\n\t\t\t$scope.getUserGroup();\r\n\t\t\tvar uuid = $scope.step1.resource.uuid;\r\n\t\t\tvar netid = $scope.step1.network.id;\r\n\t\t\tvar is_gpu = $scope.step2.has_gpu;\r\n\t\t\t$scope.host_loadding = true;\r\n\t\t\t$scope.step3.is_all = undefined;\r\n\t\t\t$scope.hosts = undefined;\r\n\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\thost.query_gpu_agent({\r\n\t\t\t\t\tid: uuid,\r\n\t\t\t\t\tnetwork_id: netid,\r\n\t\t\t\t\tenable_gpu: is_gpu\r\n\t\t\t\t},function(data){\r\n\t\t\t\t\t$scope.host_loadding = false;\r\n\t\t\t\t\t$scope.hosts = data.hosts_list.map(function(item){\r\n\t\t\t\t\t\tif(item.disabled_tips !== ''){\r\n\t\t\t\t\t\t\titem.disabled_desc = $$$I18N.get(item.disabled_tips);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\thost.query_agent({\r\n\t\t\t\t\tid: uuid,\r\n\t\t\t\t\tnetwork_id: netid,\r\n\t\t\t\t\tenable_gpu: false\r\n\t\t\t\t},function(res){\r\n\t\t\t\t\t$scope.host_loadding = false;\r\n\t\t\t\t\t$scope.hosts = res.hosts_list.filter(function(h){ return h.status === 'active'});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar host_storages = {};\r\n\t\t$scope.openMoreDialog = function(){\r\n\t\t\tvar _hostids;\r\n\t\t\tif($scope.step3.hostType=='0'){\r\n\t\t\t\t_hostids = $scope.hosts.filter(function(h){ return h._selected}).map(function(h){ return h.storage_uuid });\r\n\t\t\t}else{\r\n\t\t\t\t_hostids = $scope.hosts.filter(function(h){ return h.instance_num}).map(function(h){ return h.storage_uuid });\r\n\t\t\t}\r\n\t\t\tvar moreDialog = $modal.open({\r\n\t\t\t\ttemplateUrl:\"views/vdi/dialog/desktop/host_config.html\",\r\n\t\t\t\tcontroller:\"hostConfigDialog\",\r\n\t\t\t\tresolve:{param:function(){return {\r\n\t\t\t\t\t\"phostids\":angular.copy(_hostids),\r\n\t\t\t\t\t\"pstore\":host_storages\r\n\t\t\t\t}}}\r\n\t\t\t});\r\n\t\t\tmoreDialog.result.then(function(){\r\n\t\t\t});\r\n\t\t};\r\n\t\t\r\n\t\t$scope.selectAllHost = function(bool){\r\n\t\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t_hosts.map(function(item){\r\n\t\t\t\titem._selected = bool;\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t\t};\r\n\t\t$scope.selectOneHost = function(){\r\n\t\t\tvar _hosts = $scope.hosts.filter(function(h){\r\n\t\t\t\tif($scope.step1.resource.type=='hyper-v'){\r\n\t\t\t\t\treturn h.disabled_tips=='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$scope.step3.is_all = _hosts.every(function(item){\r\n\t\t\t\treturn item._selected === true;\r\n\t\t\t});\r\n\t\t\tvar num = $filter(\"selectedFilter\")(_hosts,'max_instance');\r\n\t\t\t$scope.step3.desktopNum = $scope.step2.has_gpu==\"through\"?num:0;\r\n\t\t};\r\n\t\t$scope.getDesktopNumber2 = function(){\r\n\t\t\tvar _lis = angular.copy($scope.hosts.filter(function(item){ return item.instance_num > 0 }));\r\n\t\t\tif(_lis.length > 0){\r\n\t\t\t\t$scope.step3.desktopNum2 = _lis.reduce(function(a,b){\r\n\t\t\t\t\ta.instance_num += b.instance_num;\r\n\t\t\t\t\treturn a;\r\n\t\t\t\t}).instance_num;\r\n\t\t\t}else{\r\n\t\t\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.step4 = {};\r\n\t\t$scope.$on(\"selectStepChange\", function(e, arg){\r\n\t\t\tif(arg.index==0){\r\n\t\t\t\targ.stepScope.$$nextSibling.error = false;\r\n\t\t\t}\r\n\t\t})\r\n\t\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t$(\"[rel=popover-hover]\").popover({\r\n\t\t\t\t\ttrigger : \"hover\"\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\tfunction toStrLong(ip){\r\n\t\t\t\tvar ips;\r\n\t\t\t\tips = ip.split(\".\").map(function(item,idx){\r\n\t\t\t\t\tvar _prefix = '';\r\n\t\t\t\t\tfor(var i = 0;i < 8 - Number(item).toString(2).length;i++){\r\n\t\t\t\t\t\t_prefix += \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn _prefix + Number(item).toString(2);\r\n\t\t\t\t});\r\n\t\t\t\treturn ips.join(\"\");\r\n\t\t\t}\r\n\t\t\tfunction check_net(){\r\n\t\t\t\t// 返回值为true时，invalid\r\n\t\t\t\tif($scope.step1.subnetwork && $scope.step1.subnetwork.netmask && $scope.step1.subnetwork.enable_dhcp && $scope.step1.ip){\r\n\t\t\t\t\tvar _startIP = toStrLong($scope.step1.subnetwork.start_ip);\r\n\t\t\t\t\tvar _endIP = toStrLong($scope.step1.subnetwork.end_ip);\r\n\t\t\t\t\tvar _bindStartIP = toStrLong($scope.step1.ip);\r\n\t\t\t\t\treturn (_bindStartIP < _startIP || _bindStartIP > _endIP);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif(check_net()){\r\n\t\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent\t:$$$MSG.get(12061),\r\n\t\t\t\t\ttimeout\t:5000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar sameDesktopName = $scope.rows.filter(function(item){return item.pool_name == $scope.step1.desktopName}).length;\r\n\t\t\tvar is_valid = scope.bodyForm1.$valid && !check_net();\r\n\t\t\tstep.done = is_valid  && !sameDesktopName;\r\n\t\t\tif(sameDesktopName){\r\n\t\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent\t: $$$I18N.get(\"SAME_POOL_NAME\"),\r\n\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(step.done && !sameDesktopName){\r\n\t\t\t\thardwares.filter({\r\n\t\t\t\t\t\"system_gb\": $scope.step1.image.system_alloc_disk,\r\n\t\t\t\t\t\"local_gb\": $scope.step1.image.data_alloc_disk,\r\n\t\t\t\t\t\"local_gb1\": $scope.step1.image.data_alloc_disk_2,\r\n\t\t\t\t},function(data){\r\n\t\t\t\t\t$scope.hardwareList = data.result.map(function(data){\r\n\t\t\t\t\t\tdata.memory_mb = data.memory_mb/1024;\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.step2.hardware = $scope.hardwareList[0];\r\n\t\t\t\t\t$scope.step2.hardware && $scope.updateHardware();\r\n\t\t\t\t});\r\n\t\t\t}\t\r\n\t\t});\r\n\t\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\tvar is_valid = scope.bodyForm2.$valid;\r\n\t\t\tif(is_valid){\r\n\t\t\t\t$scope.step3.desktopNum = undefined;\r\n\t\t\t\t$scope.step3.desktopNum2 = 0;\r\n\t\t\t\t$scope.get_host();\r\n\t\t\t}\r\n\t\t\tstep.done = is_valid;\r\n\t\t});\r\n\t\t$scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\t// number类型的input ，max属性是变量，不生效，手动判断\r\n\t\t\tif($scope.step3.hostType == 0){\r\n\t\t\t\tstep.done = scope.bodyForm3.$valid && $scope.step3.desktopNum <= $filter(\"selectedFilter\")($scope.hosts,'max_instance');\r\n\t\t\t}\r\n\t\t\tif($scope.step3.hostType==1){\r\n\t\t\t\tstep.done = scope.bodyForm3.$valid && Boolean($scope.step3.desktopNum2);\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.$on(\"WizardStep_3\", function(e, step, scope){\r\n\t\t\tscope.error = step.is_dirty;\r\n\t\t\t// step.done = $scope.step4.select_users.length?true:false;\r\n\t\t\tstep.done=$scope.selected?true:false;\r\n\t\t});\r\n\t\t$scope.$on(\"WizardDone\", function(e, steps, scopes){\r\n\t\t\t var postData = {};\r\n\t\t\t \tpostData.display_name = $scope.step1.desktopName;\r\n\t\t\t \tpostData.pool_name=$scope.step1.desktopName;\r\n\t\t\t\tpostData.network_id = $scope.step1.network.id;\r\n\t\t\t\tpostData.resource_pool\t  = $scope.step1.resource.uuid;\r\n\r\n\t\t\t if($scope.step1.subnetwork){\r\n\t\t\t \tpostData.subnet_id = $scope.step1.subnetwork.id;\r\n\t\t\t }else{ postData.subnet_id = ''; }\r\n\t\t\t \tpostData.ip_choose = Number($scope.step1.IPmode.value) ? true : false;\r\n\t\t\t if(postData.ip_choose && Number($scope.step1.IPmode.value) === 2){\r\n\t\t\t \tpostData.start_ip = $scope.step1.ip;}\r\n\t\t\t // if($scope.step1.domain){\r\n\t\t\t\t// postData.ad_server_id = $scope.step1.domain.id;}\r\n\t\t\t\tpostData.image_id     = $scope.step1.image.id;\r\n\t\t\t\t\r\n\t\t\t\tpostData.rollback      = Number($scope.step2.rollback);\r\n\t\t\t\tpostData.data_rollback = $scope.step2.hardware.local_gb>1 ? Number($scope.step2.data_rollback) : undefined;\r\n\t\t\t\tif(postData.rollback === 2){\r\n\t\t\t\t\tpostData.rollback_weekday = $scope.step2.rollback_weekday;}\r\n\t\t\t\tif(postData.rollback === 3){\r\n\t\t\t\t\tpostData.rollback_monthday = $scope.step2.rollback_monthday;}\r\n\t\t\t\tif(postData.data_rollback === 2){\r\n\t\t\t\t\tpostData.data_rollback_weekday = $scope.step2.data_rollback_weekday;}\r\n\t\t\t\tif(postData.data_rollback === 3){\r\n\t\t\t\t\tpostData.data_rollback_monthday = $scope.step2.data_rollback_monthday;}\r\n\r\n\t\t\t\tpostData.instance_type_id = $scope.step2.hardware.id;\r\n\t\t\t\tpostData.usb_redir \t\t  = $scope.step2.usb_redir;\r\n\t\t\t\tpostData.usb_version      = ($scope.step2.usb_redir && $scope.step1.resource.type=='kvm') ? $scope.step2.usb_version : null;\r\n\t\t\t\tif($scope.step1.resource.type === \"hyper-v\")\r\n\t\t\t\t\tpostData.enable_gpu       = $scope.step2.has_gpu;\r\n\t\t\t\t\r\n\t\t\tif($scope.step3.hostType == 0){\r\n\t\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item._selected }).map(function(item){\r\n\t\t\t\t\treturn {\"uuid\": item.id}\r\n\t\t\t\t});\r\n\t\t\t\tpostData.count = $scope.step3.desktopNum;\r\n\t\t\t}\r\n\t\t\tif($scope.step3.hostType == 1){\r\n\t\t\t\tpostData.servers = $scope.hosts.filter(function(item){ return item.instance_num > 0 }).map(function(item){\r\n\t\t\t\t\treturn { \"uuid\":item.id,\"vm_count\":item.instance_num }\r\n\t\t\t\t});\r\n\t\t\t\tpostData.count = $scope.step3.desktopNum2;\r\n\t\t\t}\r\n\t\t\tpostData.servers_storage = Object.keys(host_storages).map(function(key){\r\n\t\t\t\tvar host = host_storages[key];\r\n\t\t\t\treturn {\r\n\t\t\t\t\tuuid:host.id,\r\n\t\t\t\t\timage_storage_capacity: host.image_storage_capacity,\r\n\t\t\t\t\timage_storage_performance: host.image_storage_performance,\r\n\t\t\t\t\tstorage_capacity: host.storage_capacity,\r\n\t\t\t\t\tstorage_performance: host.storage_performance\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// postData.user_id = $scope.step4.select_users.map(function(item){ return item.id?item.id:item.user_id });\r\n\t\t\tpostData.user_group_id = $scope.selected.id;\r\n\t\t\t//相比个人桌面的新增 多了个人桌面池name，分组id参数\r\n\t\t\t$scope.submitting = true;\r\n\t\t\tif(!postData.user_group_id){\r\n\t\t\t\tconsole.log('用户分组ID\"user_group_id\"不能为空');\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tDeskPool.save(postData, function(res){\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t\t$scope.refresh();\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.submitting = false;\r\n\t\t\t});\r\n\t\t});\r\n\t\t$scope.close = function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t};\r\n}])\r\n/*修改桌面池*/\r\n.controller('editPoolDialog', [\"$scope\",\"$modal\",\"$modalInstance\",\"DeskPool\" ,function($scope,$modal,$modalInstance,DeskPool){\r\n\t$scope.need_ha = false;\r\n\tvar selectedServer,raw_need_ha;\r\n\t$scope.rollbackChange = function(value){\r\n\t\tif(value != \"1\"){\r\n\t\t\t$scope.need_ha = false;\r\n\t\t}else{\r\n\t\t\tif(selectedServer&&selectedServer.length>0){\r\n\t\t\t\t$scope.need_ha = angular.copy(raw_need_ha);\r\n\t\t\t\t$scope.servers = selectedServer;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t$scope.name = $scope.currentItem.name;\r\n\t$scope.desktopNum = $scope.currentItem.instance_max ;\r\n\t$scope.min_instances = $scope.currentItem.instance_max;\r\n\t$scope.rollback = $scope.currentItem.rollback;\r\n\t$scope.rollback_monthday = $scope.currentItem.rollback_monthday ? $scope.currentItem.rollback_monthday : \"1\";\r\n\t$scope.rollback_weekday = $scope.currentItem.rollback_weekday ? $scope.currentItem.rollback_weekday :\"1\";\r\n\r\n\t$scope.disk_type = $scope.currentItem.disk_type;\r\n\t$scope.local_gb = $scope.currentItem.local_gb;\r\n\t$scope.data_rollback = $scope.currentItem.data_rollback;\r\n\t$scope.data_rollback_monthday = $scope.currentItem.data_rollback_monthday || \"1\";\r\n\t$scope.data_rollback_weekday = $scope.currentItem.data_rollback_weekday || \"1\";\r\n\r\n\t$scope.usb_redir = $scope.currentItem.usb_redir;\r\n\t// $scope.usb3_disabled = !$scope.currentItem.usb3_editable;\r\n\t$scope.usb_version = $scope.currentItem.usb_version || \"2.0\";\r\n\r\n\t$scope.running_count = $scope.currentItem.running_count;\r\n\t$scope.has_domain=$scope.currentItem.has_domain||false;\r\n\t$scope.domain = $scope.currentItem.domain;\r\n\t$scope.need_ha = false;\r\n\t// $scope.enable_gpu = $scope.currentItem.enable_gpu;\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar _rollback = parseInt(this.rollback);\r\n\t\tvar _data_rollback = parseInt(this.data_rollback) >= 0 ? Number(this.data_rollback) : undefined;\r\n\t\tvar item = {};\r\n\t\titem.id = $scope.currentItem.id;\r\n\t\titem.pool = $scope.currentItem.pool;\r\n\t\titem.name = this.name;\r\n\t\titem.instance_max          = $scope.currentItem.instance_max;\r\n\t\titem.rollback              = _rollback;\r\n\t\titem.rollback_monthday \t   = _rollback == 3 ? this.rollback_monthday : undefined;\r\n\t\titem.rollback_weekday      = _rollback == 2 ? this.rollback_weekday : undefined;\r\n\t\titem.data_rollback         = _data_rollback;\r\n\t\titem.data_rollback_monthday= _data_rollback === 3 ? this.data_rollback_monthday : undefined;\r\n\t\titem.data_rollback_weekday = _data_rollback === 2 ? this.data_rollback_weekday : undefined;\r\n\t\titem.usb_redir \t\t\t   = this.usb_redir;\r\n\t\titem.usb_version  \t\t   = (item.usb_redir && $scope.currentItem.virtual_type=='kvm') ? this.usb_version : null;\r\n\t\titem.has_domain            = this.has_domain;\r\n\t\t// if($scope.currentItem.virtual_type === 'hyper-v')\r\n\t\t// \titem.enable_gpu\t\t\t   = this.enable_gpu;\r\n\t\titem.domain                = this.domain;\r\n\t\titem.need_ha               = item.rollback==1 &&  this.need_ha;\r\n\t\tif(item.rollback ==1 && item.need_ha){\r\n\t\t\titem.server_ids = $scope.servers.filter(function(value){\r\n\t\t\t\treturn value._selected;\r\n\t\t\t}).map(function(value){\r\n\t\t\t\treturn value.id;\r\n\t\t\t});\r\n\t\t\tif(item.server_ids<1){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\titem.server_ids = item.server_ids.join(',');\r\n\t\t}\r\n\t\t$scope.loading = true;\r\n\t\tDeskPool.update(item, function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.refresh();\r\n\t\t},function(){\r\n\t\t\t$scope.refresh();\r\n\t\t}).$promise.finally(res => {\r\n\t\t\t$scope.loading = false;\r\n\t\t});\t\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/desktop/controllers.js","angular.module(\"vdi.system\", [])\r\n\r\n/* 系统 */\r\n.factory(\"SystemISO\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/isos\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tupdate: { method: \"PUT\" }\r\n//        loadISO: {method: \"POST\", url:  $Domain + \"/thor/image/loadISO\"}\r\n\t});\r\n}])\r\n.factory(\"FenTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image?type_code=3&type_code=4&type_code=5\", isArray: false }\r\n\t});\r\n}])\r\n.factory(\"PuTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/image/4\", isArray: false }\r\n\t});\r\n}])\r\n.factory(\"addTemplate\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/image\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"get\", url: $Domain + \"/thor/image/register\" },\r\n\t\tupdate:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/image/register\" }\r\n\t});\r\n}])\r\n.factory(\"SystemDesktop\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/sysInsts\", null, {\r\n\t\tget_instances:{ method: \"GET\", url: $Domain + \"/thor/sysInsts/:id\",params:{id:\"@id\"}},\r\n\t\tadd_instances:{ method: \"POST\", url: $Domain + \"/thor/sysInsts/:id\",params:{id:\"@id\"}},\r\n\t\tconfig_instances:{ method: \"PUT\", url: $Domain + \"/thor/sysInst/:id\",params:{id:\"@id\"}},\r\n\t\tconfig_template:{ method: \"PUT\", url: $Domain + \"/thor/create_distribute_template\"},\r\n\t\tget_devices:{ method:\"POST\", url: $Domain + \"/thor/get_pci_devices\"},\r\n\t\tregister:{ method:\"POST\", url: $Domain + \"/thor/register_system_template\" },\r\n\t\tadd:{ method:\"POST\", url: $Domain + \"/thor/system_template\" },\r\n\t\tedit:{ method:\"PUT\", url: $Domain + \"/thor/system_template\" }\r\n\t});\r\n}])\r\n.factory(\"SystemBackup\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/admin/backup\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tbackup:\r\n\t\t\t{ method: \"POST\"},\r\n\t\trestore :\r\n\t\t\t{ method: \"POST\"},\r\n\t\tdelete :\r\n\t\t\t{ method: \"DELETE\"},\r\n\t\tget_config : \r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/admin/backup_config\"},\r\n\t\talter_config:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/admin/backup_config\"}\r\n\t});\r\n}])\r\n\r\n.factory(\"SystemUpgrade\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/admin/upgrade\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tupload: { method: \"POST\"},\r\n\t\tupgrade:\r\n\t\t\t{ method: \"PUT\" },\r\n\t\tdelete :\r\n\t\t\t{ method: \"DELETE\"}\r\n\r\n\t});\r\n}])\r\n.factory(\"SystemLog\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/log\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tdelete :\r\n\t\t\t{ method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory(\"SystemUSB\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/usb\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" },\r\n\t\tupdate: { method: \"PUT\" },\r\n\t\tdelete: { method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory(\"CreateDistribute\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/create_distribute_template\", null, {\r\n\t\tpost: { method: \"POST\"}\r\n\t});\r\n}])\r\n.factory(\"Outside\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/haproxy\", null, {\r\n\t\tquery: { method: \"GET\", url: $Domain + \"/thor/haproxy/info\", isArray: false },\r\n\t\tstart: { method: \"POST\", url: $Domain + \"/thor/haproxy/start\" },\r\n\t\tstop: { method: \"POST\", url: $Domain + \"/thor/haproxy/stop\" },\r\n\t\tsave: { method: \"POST\", url: $Domain + \"/thor/haproxy/save\" }\r\n\t});\r\n}])\r\n//系统资源回收接口\r\n.factory('RecycleTech', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/recycle/public\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" }\r\n\t});\r\n}])\r\n.factory('RecyclePer', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/recycle/person\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" }\r\n\t});\r\n}])\r\n//系统时间同步接口\r\n.factory('SystemTime', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/system-time\", null, {\r\n\t\tgetInternetSync: { method: \"GET\", url: $Domain + \"/thor/system-time/internet\", isArray: false}, // 获取Internet时间服务器同步\r\n\t\tinternetSync: { method: \"POST\", url: $Domain + \"/thor/system-time/internet\"}, // 与Internet时间服务器同步\r\n\t\tquerySyncServer: { method: \"GET\", url: $Domain + \"/thor/system-time/sync\", isArray: false }, // 获取同步服务列表\r\n\t\tupdateSyncServer: { method: \"POST\", url: $Domain + \"/thor/system-time/sync\"}, // 立即同步\r\n\t\tqueryZone: { method: \"GET\", url: $Domain + \"/thor/system-time\", isArray: false }, // 系统当前时间，以及时区列表\r\n\t\tupdateZone: { method: \"POST\", url: $Domain + \"/thor/system-time\"} // 更新操作系统时区、日期、时间\r\n\t\t\r\n\t});\r\n}])\r\n// 快速部署\r\n.factory('SystemDeploy', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/init\", null, {\r\n\t\tquickstart: {method: \"GET\", url: $Domain + \"/thor/init/quickstart\"},\r\n\t\tquery_data_network: {method: \"GET\", url: $Domain + \"/thor/networks\"},\r\n\t\t// 导入模板镜像\r\n        scan_iso: {method: \"GET\", url: $Domain + \"/thor/init/prepare_import_img\"},\r\n        import_iso: {method: \"POST\", url: $Domain + \"/thor/init/prepare_import_img\"},\r\n        complete_import: {method: \"POST\", url: $Domain + \"/thor/init/import_img\"},\r\n        import_progress: {method: \"POST\", url: $Domain + \"/thor/init/check_file\"},\r\n        // 注册教学模板\r\n        list_system_images: { method: \"get\", url: $Domain + \"/thor/image/register\" },\r\n        list_sub_networks: { method: \"GET\", url:$Domain + \"/thor/network/:id/subnets\", params: { id: \"@id\" }},\r\n        list_ports: { method: \"GET\", url:$Domain + \"/thor/network/subnet/:id/ports\", params: { id: \"@id\" }},\r\n        register_template: {method: \"POST\", url: $Domain + \"/thor/init/regit_template\"},\r\n        // 创建教学场景\r\n        create_scene: {method: \"POST\", url: $Domain + \"/thor/init/create_mode\"},\r\n        first_deploy: {method: \"GET\", url: $Domain + \"/thor/init/first_deploy\"},\r\n        //系统模块快速部署的界面展现\r\n        quick_deploy_page:{method:\"GET\",url:$Domain + \"/thor/controller/ha_storage_state\"}\r\n    });\r\n}])\r\n.factory('AutoSnapshot', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/admin/auto_snapshot\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" },\r\n\t\tupdate: { method: \"PUT\", url: $Domain + \"/thor/admin/auto_snapshot/detail/:id\", params: { id: \"@id\" } },\r\n\t\tactive: { method: \"POST\", url: $Domain + \"/thor/admin/auto_snapshot/detail/:id\", params: { id: \"@id\" } },\r\n\t\tdelete: { method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory('USBPassThrough', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/admin/thor/usb_pass_through\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" },\r\n\t\tcancel: { method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory('TreeInstances', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/tree_instances\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false}\r\n\t});\r\n}])\r\n.factory('Spice', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/spice_image_compression\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" }\r\n\t});\r\n}])\r\n.factory('Share', [\"$resource\",\"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/share/settings\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tsave: { method: \"POST\" }\r\n\t});\r\n}])\r\n.controller(\"vdiSystemDesktopListController\", [\"$scope\", \"$modal\", \"SystemDesktop\", \"FenTemplate\", \"PuTemplate\", \"$$$os_types\", \"$Domain\", \"$interval\",\"$$$I18N\",function($scope, $modal, SystemDesktop, FenTemplate, PuTemplate, $$$os_types, $Domain, $interval,$$$I18N){\r\n\t$scope.domain = $Domain;\r\n\t$scope.rows = [];\r\n\t\r\n\t$scope.images = [];\r\n\t$scope.loading = true;\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [30,20,10];\r\n    $scope.pagesize = $scope.pagesizes[0];\r\n\r\n    $interval(function(){\r\n    \t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"imageIDS\", $scope.rows.map(function(item){ return item.id }));\r\n    }, 1000);\r\n    $scope.$on(\"imagesRowsUpdate\", function($event, data){\r\n    \tvar _rows = {};\r\n    \t$scope.rows.forEach(function(item){\r\n    \t\t_rows[item.id] = item;\r\n    \t});\r\n    \tdata.forEach(function(item){\r\n    \t\tif(_rows[item.id]){\r\n    \t\t\tfor(var k in item){\r\n    \t\t\t\t_rows[item.id][k] = item[k];\r\n    \t\t\t}\r\n    \t\t}\r\n    \t});\r\n    \t$scope.rows.forEach(function(row){\r\n    \t\tvar updateInfor = row.sync_status && row.sync_status.filter(function(item){ return item.type === \"image\" });\r\n    \t\tif(updateInfor && updateInfor.length!==0)\r\n    \t\t\trow.updateSize = (updateInfor[0].size/1024/1024/1024).toFixed(2);\r\n    \t})\r\n\r\n    });\r\n    $scope.editSysdesktop = function(item){\r\n    \tvar ins = $modal.open({\r\n    \t\ttemplateUrl:\"views/vdi/dialog/system/template_config.html\",\r\n    \t\tcontroller:\"systemTemplateConfigDialog\",\r\n    \t\tsize:\"lg\",\r\n    \t\tresolve:{param: function(){ return item }}\r\n    \t});\r\n    \tins.result.then(function(){\r\n    \t\t// $scope.changeType($scope.select);\r\n    \t});\r\n    }\r\n    function get_rows(){\r\n    \tFenTemplate.query(function(res){\r\n    \t\t$scope.rows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\r\n    \t\t$scope.rows.forEach(function(row){\r\n    \t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n    \t\t\tos && os.icon && (row.icon = os.icon);\r\n    \t\t\tif(row.os_type && row.os_type.indexOf(\"_64\")>-1)\r\n    \t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n    \t\t\tif(row.os_type && row.os_type.indexOf(\"(64 bit)\")>-1)\r\n    \t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n    \t\t});\r\n    \t\t$scope.rows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n    \t\t$scope.running = res.running;\r\n    \t\t$scope.shutoff = res.shutoff;\r\n    \t\t$scope.sync_mode = res.sync_mode;\r\n    \t\t$scope.loading = false;\r\n    \t\t$scope.teachNames = $scope.rows.map(function(item){ return item.name });\r\n    \t\t$scope.sameName = false;\r\n    \t});\r\n    }\r\n    get_rows();\r\n\r\n\tvar _controllerScope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除系统桌面'>删除系统桌面\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_SYSDESK_T' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t$scope.name = rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tFenTemplate.delete({ id: rows.map(function(item){ return item.id }) },function(res){\r\n\t\t\t\t\t\trows.forEach(function(row){\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(_controllerScope.rows.indexOf(row), 1);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\ttemplate.query(function(res){\r\n\t\t\t\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t\t\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n\t\t\t\t\t\t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n\t\t\t\t\t\t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tnewRows.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"addTemplateDialog\", [\r\n\"$scope\", \"$modalInstance\", \"Admin\", \"addTemplate\", \"$$$os_types\", \"UserRole\", \"FenTemplate\", \"PuTemplate\", \"ResourcePool\", \"Host\",\"Network\", \"SystemISO\", \"SystemDesktop\", \"$filter\",\"CreateDistribute\",\"virtualHost\",\"$$$I18N\",\r\nfunction($scope, $modalInstance, admin, addTemplate, $$$os_types, UserRole, FenTemplate, PuTemplate, ResourcePool, host, Network, iso, SystemDesktop, $filter, CreateDistribute, virtualHost, $$$I18N){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.nets = [];\r\n\t$scope.min_namelength=2;\r\n\t$scope.max_namelength=20;\r\n\t$scope.vcpus = 1;\r\n\t$scope.ram = 32;\r\n\t$scope.system_gb = 10;\r\n\t$scope.local_gb = 5;\r\n\t\r\n\t$scope.multifyNetsTips = $$$I18N.get('multifyNetsTips');\r\n\r\n\t$scope.get_host = function(uuid){\r\n\t\thost.query_agent({ id:uuid },function(res){\r\n\t\t\t$scope.hosts = res.hosts_list.filter(function(h){ return h.status === 'active'});\r\n\t\t\t$scope.node = $scope.hosts[0];\r\n\t\t\t$scope.get_devices($scope.node.host);\r\n\t\t});\r\n\t}\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.pools = res.result.filter(function(item){ return item.hosts.length > 0 && item.type=='kvm' });\r\n\t\tif($scope.pools.length){\r\n\t\t\t$scope.source_pool = $scope.pools[0];\r\n\t\t\t$scope.get_host($scope.source_pool.uuid);\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.hosts = [];\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\tfunction getNetwork(key){\r\n\t\t$scope.loading = true;\r\n\t\tNetwork.query(function(data){\r\n\t\t\tif(data.networks.length){\r\n\t\t\t\t$scope.nets.push({key: key, networks: data.networks, network: data.networks[0]});\r\n\t\t\t\t$scope.get_subnet(data.networks[0], key);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetNetwork(new Date());\r\n\t$scope.get_subnet = function(network, key){\r\n\t\tif(network.subnets.length){\r\n\t\t\tNetwork.query_sub({\r\n\t\t\t\tid:network.id\r\n\t\t\t},function(res){\r\n\t\t\t\tvar subnetworks = [];\r\n\t\t\t\tsubnetworks = res.result.map(function(n){\r\n\t\t\t\t\tn._desc = n.start_ip ?(n.name + \" (\" + n.start_ip +\" - \"+ n.end_ip + \") \") :  n.name;\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\t\tif(item.key===key){\r\n\t\t\t\t\t\titem.subnetworks = subnetworks;\r\n\t\t\t\t\t\titem.subnetwork = subnetworks[0];\r\n\t\t\t\t\t\t$scope.clearBindIp(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$scope.loading = false;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\tif(item.key===key){\r\n\t\t\t\t\titem.subnetworks = [];\r\n\t\t\t\t\titem.subnetwork = null;\r\n\t\t\t\t\t$scope.clearBindIp(key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.clearBindIp = function(key){\r\n\t\t$scope.nets.forEach(function(item){\r\n\t\t\tif(item.key===key){\r\n\t\t\t\tif(item.subnetwork){\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes2;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes1;\r\n\t\t\t\t}\r\n\t\t\t\titem.IPmode= item.IPmodes[0];\r\n\t\t\t\titem.ip = null;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.host_loading = true;\r\n\t\r\n\t$scope.get_devices = function(hostname){\r\n\t\tSystemDesktop.get_devices({host:hostname},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.devices = res.result.filter(function(item){ return item.status === \"available\"});\r\n\t\t});\r\n\t};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.devices.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.is_all = $scope.devices.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t};\r\n\r\n\tiso.query(function(res){\r\n\t\t$scope.isos = res.isos.filter(function(iso){ return iso.os_type && iso.type!==\"package\" && iso.type!==\"other\" });\r\n\t\t$scope.isos.forEach(function(item){\r\n\t\t\titem.os_type = item.os_type.split(\",\");\r\n\t\t});\r\n\t\t$scope.iso = $scope.isos[0];\r\n\t});\r\n\r\n\t$scope.addNet = function(){\r\n\t\tgetNetwork(new Date());\r\n\t};\r\n\t$scope.minusNet = function(i){\r\n\t\tvar idx = $scope.nets.indexOf(i)\r\n\t\t$scope.nets.splice(idx,1);\r\n\t};\r\n\tvar newWindow;\r\n\tsetTimeout(function(){\r\n\t\t$(\"#finish\").on('click',function(){\r\n\t\t    newWindow = window.open('templateModifybt.html#0');\r\n\t\t})\r\n\t});\r\n\r\n\t// 判断网络数组中两两是否有两个相同的子网id\r\n\tfunction giveTip(array){\r\n\t\tvar flag = false;\r\n\t\tarray.forEach(function(item, index){\r\n\t\t for(var i=index+1; i<array.length; i++){\r\n\t\t\tconsole.log(array[index],array[i]);\r\n\t\t\tif(array[index]['subnetwork'] && array[i]['subnetwork'] && array[index]['subnetwork']['id'] == array[i]['subnetwork']['id']){\r\n\t\t\t\tflag = true;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t});\r\n\t\treturn flag;\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\t$scope.devices_selected = $filter(\"selectedFilter\")($scope.devices);\r\n\t\t// if($scope.devices_selected.length!==0){\r\n\t\t\tvar me = this;\r\n\t\t\t$scope.submiting = true ;\r\n\t\t\t$scope.afterSubmiting =false ;\r\n\t\t\tvar postData = {\r\n\t\t\t\tdisplay_name: this.display_name,\r\n\t\t\t\ttype_code: this.type,\r\n\t\t\t\tsource_pool: this.source_pool.uuid,\r\n\t\t\t\tnode: this.node.id,\r\n\t\t\t\tnetwork: this.nets.map(function(item){ if(!item.network.id) return \"\"; else return item.network.id }),\r\n\t\t\t\tsubnet: this.nets.map(function(item){ if(!item.subnetwork) return \"\"; else return item.subnetwork.id }),\r\n\t\t\t\tband_ip: this.nets.map(function(item){ if(!item.ip) return \"\"; else return item.ip }),\r\n\t\t\t\tiso_path:this.iso.name,\r\n\t\t\t\tiso_id:this.iso.id,\r\n\t\t\t\tvcpus: this.vcpus,\r\n\t\t\t\tram: this.ram*1024,\r\n\t\t\t\tpci_devices_node:$scope.devices_selected.map(function(item){ return item.compute_node_id }),\r\n\t\t\t\tpci_devices_address:$scope.devices_selected.map(function(item){ return item.address}),\r\n\t\t\t\tsystem_gb: this.system_gb,\r\n\t\t\t\tlocal_gb: this.local_gb,\r\n\t\t\t\tstart_on_host_boot: this.start_on_host_boot,\r\n\t\t\t\tvirtual_type: this.source_pool.type\r\n\t\t\t};\r\n\t\t\t//需求1651,新增和编辑模板都在新打开的vnc页面提示IP重复\r\n\t\t\t// if(giveTip(this.nets)){\r\n\t\t\t// \t$.bigBox({\r\n\t\t\t// \t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t// \t\tcontent:$$$I18N.get(\"不同网卡上不能存在相同网段的IP\"),\r\n\t\t\t// \t\ttimeout:6000\r\n\t\t\t// \t});\r\n\t\t\t// }\r\n\t\t\tSystemDesktop.add(postData, function(res){\r\n\t\t\t\tvar alertFlag = giveTip(me.nets);\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t\tFenTemplate.query(function(res){\r\n\t\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\t\t\t\t\tvar template = $scope.rows.filter(function(temp){ return temp.name ==  postData.display_name})[0];\r\n\t\t\t\t\tif(res.sync_mode==='scp')\r\n\t\t\t\t\t\tnewWindow.location.replace('templateModify.html#' + template.id + '&' + template.os_type + '&' + template.name + '&sytem_desktop'+'&sameIp='+alertFlag);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tnewWindow.location.replace('templateModifybt.html#' + template.id + '&' + template.os_type + '&' + template.name + '&sytem_desktop'+'&sameIp='+alertFlag);\r\n\t\t\t\t});\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},function(res){\r\n\t\t\t\tnewWindow.close();\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t// }\r\n\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"systemTemplateRegisterDialog\", [\r\n\"$scope\", \"$modalInstance\", \"Admin\", \"addTemplate\", \"$$$os_types\", \"UserRole\", \"FenTemplate\", \"PuTemplate\", \"ResourcePool\", \"Host\",\"Network\", \"SystemISO\", \"SystemDesktop\", \"$filter\",\"CreateDistribute\",\"virtualHost\",\"$$$I18N\",\"registerTemplate\",\r\nfunction($scope, $modalInstance, admin, addTemplate, $$$os_types, UserRole, FenTemplate, PuTemplate, ResourcePool, host, Network, iso, SystemDesktop, $filter, CreateDistribute, virtualHost, $$$I18N, registerTemplate){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.nets = [];\r\n\t$scope.min_namelength=2;\r\n\t$scope.max_namelength=20;\r\n\t$scope.vcpus = 1;\r\n\t$scope.ram = 32;\r\n\t$scope.system_gb = 10;\r\n\t$scope.local_gb = 5;\r\n\r\n\t$scope.multifyNetsTips = $$$I18N.get('multifyNetsTips');\r\n\r\n\t$scope.get_host = function(uuid){\r\n\t\thost.query_agent({ id:uuid },function(res){\r\n\t\t\t$scope.hosts = res.hosts_list.filter(function(h){ return h.status === 'active'});\r\n\t\t\t$scope.node = $scope.hosts[0];\r\n\t\t\t$scope.get_devices($scope.node.host);\r\n\t\t});\r\n\t}\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.pools = res.result.filter(function(item){ return item.hosts.length > 0 && item.type=='kvm' });\r\n\t\tif($scope.pools.length){\r\n\t\t\t$scope.source_pool = $scope.pools[0];\r\n\t\t\t$scope.get_host($scope.source_pool.uuid);\t\t\t\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.hosts = [];\r\n\t\t}\r\n\t});\r\n\r\n\tregisterTemplate.query(function(res){\r\n\t\t$scope.sys_isos = res.system_image.filter(function(item){ return item.virtual_type=='kvm' });\r\n\t\t$scope.sys_iso = res.system_image[0];\r\n\t\t$scope.old_data_isos = res.data_image;\r\n\t\tif($scope.sys_iso){\r\n\t\t\t$scope.getDataImgs($scope.sys_iso);\r\n\t\t}\r\n\t})\r\n\t$scope.filterDataISO = function(data_iso, data_iso2){\r\n\t\tif(data_iso){\r\n\t\t\t$scope.data_isos2 = $scope.data_isos.filter(function(item){ return item.name !== data_iso.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos2 = $scope.data_isos;\r\n\t\t}\r\n\t\tif(data_iso2){\r\n\t\t\t$scope.data_isos1 = $scope.data_isos.filter(function(item){ return item.name !== data_iso2.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos1 = $scope.data_isos;\r\n\t\t}\r\n\t};\r\n\t$scope.getDataImgs = function(systemImg, is_init){\r\n\t\tif(systemImg){\r\n\t\t\tthis.data_iso = undefined;\r\n\t\t\tthis.data_iso2 = undefined;\r\n\t\t\t$scope.data_isos = $scope.data_isos2 = $scope.data_isos1 = $scope.old_data_isos.filter(function(item){ return item.virtual_type == systemImg.virtual_type });\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\tfunction getNetwork(key){\r\n\t\t$scope.loading = true;\r\n\t\tNetwork.query(function(data){\r\n\t\t\tif(data.networks.length){\r\n\t\t\t\t$scope.nets.push({key: key, networks: data.networks, network: data.networks[0]});\r\n\t\t\t\t$scope.get_subnet(data.networks[0], key);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tgetNetwork(new Date());\r\n\t$scope.get_subnet = function(network, key){\r\n\t\tif(network.subnets.length){\r\n\t\t\tNetwork.query_sub({\r\n\t\t\t\tid:network.id\r\n\t\t\t},function(res){\r\n\t\t\t\tvar subnetworks = [];\r\n\t\t\t\tsubnetworks = res.result.map(function(n){\r\n\t\t\t\t\tn._desc = n.start_ip ?(n.name + \" (\" + n.start_ip +\" - \"+ n.end_ip + \") \") :  n.name;\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\t\tif(item.key===key){\r\n\t\t\t\t\t\titem.subnetworks = subnetworks;\r\n\t\t\t\t\t\titem.subnetwork = subnetworks[0];\r\n\t\t\t\t\t\t$scope.clearBindIp(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$scope.loading = false;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\tif(item.key===key){\r\n\t\t\t\t\titem.subnetworks = [];\r\n\t\t\t\t\titem.subnetwork = null;\r\n\t\t\t\t\t$scope.clearBindIp(key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.clearBindIp = function(key){\r\n\t\t$scope.nets.forEach(function(item){\r\n\t\t\tif(item.key===key){\r\n\t\t\t\tif(item.subnetwork){\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes2;\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes1;\r\n\t\t\t\t}\r\n\t\t\t\titem.IPmode= item.IPmodes[0];\r\n\t\t\t\titem.ip = null;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.host_loading = true;\r\n\t\r\n\t$scope.get_devices = function(hostname){\r\n\t\tSystemDesktop.get_devices({host:hostname},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.devices = res.result.filter(function(item){ return item.status === \"available\"});\r\n\t\t});\r\n\t};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.devices.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.is_all = $scope.devices.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t};\r\n\r\n\tiso.query(function(res){\r\n\t\t$scope.isos = res.isos.filter(function(iso){ return iso.os_type && iso.type!==\"package\" && iso.type!==\"other\" });\r\n\t\t$scope.isos.forEach(function(item){\r\n\t\t\titem.os_type = item.os_type.split(\",\");\r\n\t\t});\r\n\t\t$scope.iso = $scope.isos[0];\r\n\t});\r\n\r\n\t$scope.addNet = function(){\r\n\t\tgetNetwork(new Date());\r\n\t};\r\n\t$scope.minusNet = function(i){\r\n\t\tvar idx = $scope.nets.indexOf(i)\r\n\t\t$scope.nets.splice(idx,1);\r\n\t};\r\n\r\n\t// 判断网络数组中两两是否有两个相同的子网id\r\n\tfunction giveTip(array){\r\n\t\tvar flag = false;\r\n\t\tarray.forEach(function(item, index){\r\n\t\t for(var i=index+1; i<array.length; i++){\r\n\t\t\tif(array[index]['subnetwork']['id'] == array[i]['subnetwork']['id']){\r\n\t\t\t\tflag = true;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t});\r\n\t\treturn flag;\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.devices_selected = $filter(\"selectedFilter\")($scope.devices);\r\n\t\t// if($scope.devices_selected.length!==0){\r\n\t\t\tvar me = this, alertTip;\r\n\t\t\talertTip = giveTip(me.nets);\r\n\t\t\tvar postData = {\r\n\t\t\t\tdisplay_name: this.display_name,\r\n\t\t\t\ttype_code: this.type,\r\n\t\t\t\tsource_pool: this.source_pool.uuid,\r\n\t\t\t\tnode: this.node.id,\r\n\t\t\t\tnetwork: this.nets.map(function(item){ if(!item.network.id) return \"\"; else return item.network.id }),\r\n\t\t\t\tsubnet: this.nets.map(function(item){ if(!item.subnetwork) return \"\"; else return item.subnetwork.id }),\r\n\t\t\t\tband_ip: this.nets.map(function(item){ if(!item.ip) return \"\"; else return item.ip }),\r\n\t\t\t\tvcpus: this.vcpus,\r\n\t\t\t\tram: this.ram*1024,\r\n\t\t\t\tsystem_image_file: this.sys_iso,\r\n\t\t\t\tdata_image_file: this.data_iso?this.data_iso:undefined,\r\n\t\t\t\tpci_devices_node:$scope.devices_selected.map(function(item){ return item.compute_node_id }),\r\n\t\t\t\tpci_devices_address:$scope.devices_selected.map(function(item){ return item.address}),\r\n\t\t\t\tstart_on_host_boot: this.start_on_host_boot,\r\n\t\t\t\tvirtual_type: this.source_pool.type\r\n\t\t\t};\r\n\t\t\tif(alertTip){\r\n\t\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent:$$$I18N.get(\"不同网卡上不能存在相同网段的IP\"),\r\n\t\t\t\t\ttimeout:6000\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t$scope.afterSubmiting =false ;\r\n\t\t\t$scope.submiting = true ;\r\n\t\t\tSystemDesktop.register(postData, function(res){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = true ;\r\n\t\t\t\tFenTemplate.query(function(res){\r\n\t\t\t\t\tvar newRows = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t\t\t\tnewRows.forEach(function(row){\r\n\t\t\t\t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n\t\t\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.rows,newRows);\r\n\t\t\t\t});\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},function(){\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t// }\r\n\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"vdiSystemBackupListController\", [\"$scope\",\"$modal\", \"SystemBackup\", \"$Domain\",function($scope,$modal, backup, $Domain){\r\n\t$scope.rows = [];$scope.loading = true;\r\n\t\r\n\t$scope.getList = function(){\r\n\t\tbackup.query(function(data){\r\n\t\t\t$scope.allRows = data.ret;\r\n\t\t\t$scope.rows = data.ret;\r\n\t\t\t$scope.loading = false;\r\n\t\t})\r\n\t};\r\n\t$scope.getList();\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\tvar controller_scope = $scope;\r\n\t$scope.getURL = function(item){\r\n\t\treturn $Domain + \"/thor/admin/download?file_name=\" + item.name;\r\n\t};\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(item => item._selected);\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='BACKUP_DE'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='BACKUP_DE_CONTENT'=></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tbackup.delete({name:rows.map(row => row.name)}, function(data){\r\n\t\t\t\t\t\t\tcontroller_scope.getList();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.backup = function(){\r\n\t\t$scope.submitting = true;\r\n\t\tbackup.backup({method:\"backup\"}, function(data){\r\n\t\t\tcontroller_scope.getList();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submitting  = false;\r\n\t\t})\r\n\t};\r\n\t$scope.config = function(){\r\n\t\t$modal.open({\r\n\t\t\tcontroller:\"systemBackupConfigController\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/system/system_backup_config.html\",\r\n\t\t\tsize:\"md\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"vdiSystemISOListController\", [\r\n\t\"$scope\", \"SystemISO\", \"$modal\",\"$rootScope\", \"$filter\", \"$$$os_types\",\"$Domain\",\r\n\tfunction($scope, iso, $modal, $rootScope, $filter, $$$os_types,$Domain){\r\n\t$$$os_types = $$$os_types.filter(function(type){ return type.key !== 'Windows 7' });\r\n\t$scope.rows = [];$scope.loading = true;$scope.domain = $Domain;\r\n\tvar rows = [];\r\n\tfunction loadIso(){\r\n\t\tiso.query(function(res){\r\n\t\t\t$scope.rows = res.isos;\r\n\t\t\t$scope.loading = false;\r\n\t\t\tvar test = /Windows 7/;\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\t//item.os_type = $$$os_types[Math.random() * $$$os_types.length ^ 0].key;\r\n\t\t\t\titem.origin_os_type = item.os_type;\r\n\t\t\t\tif(item.os_type){\r\n\t\t\t\t\tvar type = $$$os_types.filter(function(type){ return type.key === item.os_type; })[0];\r\n\t\t\t\t\tif(type){\r\n\t\t\t\t\t\titem.os_type = type;\r\n\t\t\t\t\t}else if (test.test(item.os_type)){\r\n\t\t\t\t\t\titem.os_type = {\"key\": \"Windows 7\",\"value\": \"Windows 7 series\"};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// item.editable = false;\r\n\t\t\t\titem.old_type = item.type;\r\n\t\t\t\titem.old_os_type = item.os_type;\r\n\t\t\t\titem.type_editable = false;\r\n\t\t\t\titem.os_editable = false;\r\n\t\t\t});\r\n\t\t\tangular.copy($scope.rows,rows);\r\n\t\t\t$scope.select = \"\";\r\n\t\t});\t\t\r\n\t}\r\n\tloadIso();\r\n\tvar upload_id = 'system_iso_upload';\r\n\tvar uploadModal;\r\n\t$scope.$on(\"progress\", function(e,size){\r\n\t\t if(size.id === upload_id){\r\n\t\t \tif(uploadModal){\r\n\t\t \t\tuploadModal.close();\r\n\t\t \t\tuploadModal = undefined;\r\n\t\t \t}\r\n            $scope.progressName = size.name\r\n            $scope.isUploading = true;\r\n            $scope.progressPercent = (size.loaded / size.total * 100).toFixed(2) + \"%\";\r\n            if($scope.progressPercent === \"100.00%\"){ \r\n            \t$scope.isUploading = false;\r\n            }\r\n        }\r\n\t});\r\n\t$scope.$on(\"finishISOUpload\",function(){\r\n\t\tconsole.log(\"finished refresh\")\r\n\t\tloadIso();\r\n\t});\r\n\t$scope.upload = function(){\r\n\t\tuploadModal = $modal.open({\r\n\t\t\ttemplateUrl:\"./views/vdi/dialog/system/upload_iso.html\",\r\n\t\t\tcontroller:\"systemUploadIsoDialog\",\r\n\t\t\tresolve: {\r\n\t\t\t\tparam: function(){\r\n\t\t\t\t\treturn {\"upload_id\":upload_id}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.abortUpload = function(){\r\n\t\tvar xhr = $rootScope.uploadPool[upload_id];\r\n        xhr && xhr.abort();\r\n        $scope.isUploading = false;\r\n\t};\r\n\t$scope.filter_iso = function(item){\r\n\t\tif(!item){\r\n\t\t\t$scope.rows = rows;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t$scope.rows = rows.filter(function(row){\r\n\t\t\treturn row.type == $scope.select;\r\n\t\t});\r\n\t};\r\n\t$scope.updateData = function(text,select){\r\n\t\t$scope.rows = rows.filter(function(row){\r\n\t\t\tif(select){\r\n\t\t\t\treturn row.type === select;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t};\r\n\t$scope.os_types = $$$os_types;\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.change = function(item){\r\n\t\tvar new_item = JSON.parse(JSON.stringify(item));\r\n\t\tif(new_item.os_type){\r\n\t\t\tnew_item.os_type = item.support_auto_install ? item.origin_os_type : item.os_type.key;\r\n\t\t}\r\n\t\tiso.update(new_item, function(res){\r\n\t\t\trows.map(function(row){\r\n\t\t\t\tif(res.result && row.id == res.result.id){\r\n\t\t\t\t\trow.os_type = item.os_type;\r\n\t\t\t\t\trow.type = item.type;\r\n\t\t\t\t\trow.old_type = item.type;\r\n\t\t\t\t\trow.old_os_type = item.os_type;\r\n\t\t\t\t\trow.type_editable = false;\r\n\t\t\t\t\trow.os_editable = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn row;\r\n\t\t\t})\r\n\t\t}).$promise.finally(function(){\r\n\t\t\tloadIso();\r\n\t\t});\r\n\t\t$scope.filter_iso($scope.select);\r\n\t};\r\n\t$scope.hideButton = function(){\r\n\t\t$scope.uploadStart = false;\r\n\t}\r\n\tvar _scope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='ISO_DELETE'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_ISO_CONTENT'></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.name = item.name;\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tiso.delete({\r\n\t\t\t\t\t\tids: [item.id]\r\n\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\tloadIso();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.edit = function(item){\r\n\t\titem.os_editable = !item.support_auto_install;\r\n\t\titem.type_editable = true;\r\n\t};\r\n\t$scope.cancel = function(item){\r\n\t\titem.type = item.old_type;\r\n\t\titem.os_type = item.old_os_type;\r\n\t\tif(!item.support_auto_install)\r\n\t\t\titem.os_editable = !item.os_editable;\r\n\t\titem.type_editable = !item.type_editable;\r\n\t};\r\n}])\r\n.controller(\"vdiSystemLogListController\", [\"$scope\", \"SystemLog\", \"$modal\", function($scope, log, $modal){\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesize = Number($$$storage.getSessionStorage('log_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('alarm_pagesize', newvalue ? newvalue : 0);\r\n\t});\r\n\r\n\tvar last;\r\n\t$scope.search = function(e){\r\n\t\tlast = e.timeStamp;\r\n\t\tsetTimeout(function(){\r\n\t\t\tif(last-e.timeStamp==0){\r\n\t\t\t\tfn_get_logs($scope.searchText)\r\n\t\t\t}\r\n\t\t}, 500)\r\n\t}\r\n\r\n\tvar _start = 0;\r\n\tvar fn_get_logs = function(searchText){\r\n\t\tvar size = Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n\t\tlog.query({\r\n\t\t\tdisplayLength: size,\r\n\t\t\tdisplayStart: ($scope.currentPage - 1) * size,\r\n\t\t\tsearch: searchText?searchText:\"\"\r\n\t\t}, function(data){\r\n\t\t\t$scope.rows = data.data.sort(function(a,b){\r\n\t\t\t\treturn b.datetime - a.datetime;\r\n\t\t\t});\r\n\t\t\t$scope.totalCount = searchText?data.totalDisplayRecords:data.totalRecords;\r\n\t\t\t$scope.loading = false;\r\n\t\t\t_start = data.displayStart;\r\n\t\t});\r\n\t};\r\n\tfn_get_logs();\r\n\r\n\t$scope.logPageSizeChange = function(){\r\n\t\t$scope.currentPage = $scope.pagesize ? Math.floor(_start / $scope.pagesize) + 1 : 0;\r\n\t\tfn_get_logs();\r\n\t};\r\n\t$scope.logPageChange = function(){\r\n\t\tfn_get_logs($scope.searchText);\r\n\t};\r\n\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELETE_LOG'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_LOG_CONTENT'></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tlog.delete({ids:rows.map(function(row){ return row.id })},function(data){\r\n\t\t\t\t\t\tfn_get_logs();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\t$scope.deleteAll = function(){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELETE_RIZHI'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_RIZHI_CONTENT'></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tlog.delete({ids:'all'}, function(data){\r\n\t\t\t\t\t\tfn_get_logs();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\r\n\t};\r\n}])\r\n// .controller(\"vdiSystemEndlogListController\", [\"$scope\", \"$modal\", function($scope, $modal){\r\n// \t$scope.rows = [];\r\n// \t$scope.loading = true;\r\n\r\n//     $scope.currentPage = 1;\r\n//     $scope.pagesize = Number(localStorage.log_pagesize) || 30;\r\n// \t$scope.$watch(\"pagesize\" , function(newvalue){\r\n// \t\t$scope.pagesize = newvalue || 0;\r\n// \t\tlocalStorage.log_pagesize = newvalue ? newvalue : 0;\r\n// \t});\r\n\r\n// \tvar _start = 0;\r\n// \tvar fn_get_logs = function(){\r\n// \t\tvar size = Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n// \t\t// log.query({\r\n// \t\t// \tdisplayLength: size,\r\n// \t\t// \tdisplayStart: ($scope.currentPage - 1) * size,\r\n// \t\t// \tsearch: \"\"\r\n// \t\t// }, function(data){\r\n// \t\t// \t$scope.rows = data.data.sort(function(a,b){\r\n// \t\t// \t\treturn b.datetime - a.datetime;\r\n// \t\t// \t});\r\n// \t\t// \t$scope.totalCount = data.totalRecords;\r\n// \t\t// \t$scope.loading = false;\r\n// \t\t// \t_start = data.displayStart;\r\n// \t\t// });\r\n// \t};\r\n// \tfn_get_logs();\r\n\r\n// \t$scope.logPageSizeChange = function(){\r\n// \t\t$scope.currentPage = $scope.pagesize ? Math.floor(_start / $scope.pagesize) + 1 : 0;\r\n// \t\tfn_get_logs();\r\n// \t};\r\n// \t$scope.logPageChange = function(){\r\n// \t\tfn_get_logs();\r\n// \t};\r\n\r\n// \t$scope.delete = function(item){\r\n// \t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\r\n// \t\t$modal.open({\r\n// \t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELETE_LOG'>\"+\r\n// \t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_LOG_CONTENT'></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n// \t\t\tcontroller : function($scope, $modalInstance){\r\n// \t\t\t\t$scope.ok = function(){\r\n// \t\t\t\t\t// log.delete({ids:rows.map(function(row){ return row.id })},function(data){\r\n// \t\t\t\t\t// \tfn_get_logs();\r\n// \t\t\t\t\t// });\r\n// \t\t\t\t\t$modalInstance.close();\r\n// \t\t\t\t},\r\n// \t\t\t\t$scope.close = function(){\r\n// \t\t\t\t\t$modalInstance.close();\r\n// \t\t\t\t}\r\n// \t\t\t},\r\n// \t\t\tsize : \"sm\"\r\n// \t\t});\r\n// \t};\r\n// \t$scope.deleteAll = function(){\r\n// \t\t$modal.open({\r\n// \t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELETE_RIZHI'>\"+\r\n// \t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_RIZHI_CONTENT'></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n// \t\t\tcontroller : function($scope, $modalInstance){\r\n// \t\t\t\t$scope.ok = function(){\r\n// \t\t\t\t\t// log.delete({ids:'all'}, function(data){\r\n// \t\t\t\t\t// \tfn_get_logs();\r\n// \t\t\t\t\t// });\r\n// \t\t\t\t\t$modalInstance.close();\r\n// \t\t\t\t},\r\n// \t\t\t\t$scope.close = function(){\r\n// \t\t\t\t\t$modalInstance.close();\r\n// \t\t\t\t}\r\n// \t\t\t},\r\n// \t\t\tsize : \"sm\"\r\n// \t\t});\r\n\r\n// \t};\r\n// }])\r\n.controller(\"vdiSystemUpgradeListController\", [\"$scope\",\"SystemUpgrade\",\"$modal\",\"$$$I18N\", \"$$$MSG\", function($scope, upgrade, $modal,$$$I18N, $$$MSG){\r\n\tfunction getList(){\r\n\t\t$scope.loading = true;\r\n\t\t$scope.rows = [];\r\n\t\tupgrade.query(function(data){\r\n\t\t\tvar _data = data.versions;\r\n\t\t\tvar new_data = {};\r\n\t\t\t _data.forEach(function(d,idx){\r\n\t\t\t \td._idx = idx;\r\n\t\t\t \t// 上传包类型\r\n\t\t\t    // d.packtype = d.owner === 'win_client' ? 'zip' : 'bin';\r\n\t\t\t\tif(d.owner === 'win_client'){\r\n\t\t\t\t\td.packtype = 'zip';\r\n\t\t\t\t}\r\n\t\t\t\telse if(d.owner === 'android_client'){\r\n\t\t\t\t\td.packtype = 'apk';\r\n\t\t\t\t}\r\n\t\t\t\telse if(d.owner.indexOf('guesttool') !== -1){\r\n\t\t\t\t\td.packtype = 'iso';\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\td.packtype = 'bin';\r\n\t\t\t\t}\r\n\t\t\t \tif(new_data[d.owner]){\r\n\t\t\t \t\tnew_data[d.owner].push(d);\r\n\t\t\t \t}else{\r\n\t\t\t \t\tnew_data[d.owner] = [d];\r\n\t\t\t \t}\r\n\t\t\t });\r\n\t\t\t Object.keys(new_data).forEach(function(i){\r\n\t\t\t \t$scope.rows.push(new_data[i]);\r\n\t\t\t });\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\tgetList();\r\n\t$scope.viewDetail = function(witch){\r\n\t\t$modal.open({\r\n\t\t\tresolve:{\r\n\t\t\t\tmodal_data: function(){\r\n\t\t\t\t\treturn witch;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbackdrop:'static',\r\n\t\t\tcontroller:\"systemUpgradeDetailDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/system/system_upgrade_detail.html\",\r\n\t\t\tsize:'lg'\r\n\t\t});\r\n\t}\r\n\r\n\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.finish = function(){\r\n\t\tgetList();\r\n\t};\r\n\t$scope.upgrade = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='升级'>\"+\r\n\t\t\t\t\t\t\t\"升级</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;'>{{ MESS }}</p><footer class='text-right'><button ng-if='!submitting' class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><img src='img/loadingtext.gif' ng-if='submitting' height='24' width='24' alt=''><button  ng-if='!submitting'  class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\tswitch(item.owner){\r\n\t\t\t\t\tcase 'win_client':\r\n\t\t\t\t\tcase 'lin_client':\r\n\t\t\t\t\tcase 'arm_client':\r\n\t\t\t\t\tcase 'android_client':\r\n\t\t\t\t\t\t\t$scope.MESS = $$$I18N.get(\"2UPGRADEMESS\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'console':\r\n\t\t\t\t\tcase 'agent'  :\r\n\t\t\t\t\t\t\t$scope.MESS = $$$I18N.get(\"UPGRADEMESS\");\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault : \r\n\t\t\t\t\t\t\t$scope.MESS = $$$I18N.get(\"UPGRADEMESS\");\r\n\t\t\t\t\t\t\tbreak;\t\t\r\n\t\t\t\t}\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.submitting = true;\r\n\t\t\t\t\titem['auto'] = true;\r\n\t\t\t\t\tupgrade.upgrade(item, function(){\r\n\t\t\t\t\t\tgetList();\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t$scope.submitting = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"md\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"vdiSystemUSBListController\", [\"$scope\", \"$modal\", \"SystemUSB\", \"$$$I18N\", function($scope, $modal, systemusb, $$$I18N){\r\n\t$scope.rows = [];\r\n\t// var allRows = [];\r\n\t$scope.loading = true;\r\n\tsystemusb.get(function(res){\r\n\t\t//$scope.rows = [{id: 1, class_id: '0x00', priority: 2, rule_name: \"ffff\", product_id: \"0x1111\", vendor_id: \"0x1234\", allow: true}];\r\n\t\t$scope.rows = res.result;\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\titem.class_id = { key: item.class_id, value: $$$I18N.get(item.class_id)};\r\n\t\t});\r\n\t\t$scope.loading = false;\r\n\t\t// angular.copy($scope.rows,allRows);\r\n\t})\r\n\t\r\n\t$scope.sortClass_id = function(order){\r\n    \t$scope.rows.sort(function(a, b){\r\n\t\t\treturn (a.class_id.key > b.class_id.key) ? 1 : -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n    };\r\n\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\tvar rows = $scope.rows;\r\n\t\t\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELE_USB'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELE_USB_TIP'=></p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tsystemusb.delete({ids: selected_rows.map(function(row){ return row.id; })},function(res){\r\n\t\t\t\t\t\t\tselected_rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\tvar index = rows.indexOf(item);\r\n\t\t\t\t\t\t\t\trows.splice(index, 1);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t\t\r\n\t};\r\n\t// $scope.updateData = function(text){\r\n\t// \t$scope.rows = allRows.filter(function(row){\r\n\t// \t\tif(text.trim()){\r\n\t// \t\t\treturn row.rule_name.indexOf(text.trim()) !== -1;\r\n\t// \t\t}\r\n\t// \t\treturn true;\r\n\t// \t});\r\n\t// };\r\n}])\r\n// .controller(\"vdiSystemDeviceListController\", [\"$scope\", \"$modal\", \"$$$I18N\", function($scope, $modal, $$$I18N){\r\n// \t$scope.rows = [];\r\n\r\n// \tvar get_rows = function(){\r\n// \t\t$scope.rows = [{name: 'iToken S3000', made: '天地融', PID: '3d45', VID: 'df45', host: \"agent1\", desktop: \"zhujianchen\", desc: \"是的法规法规\"}];\r\n// \t};\r\n// \tget_rows();\r\n\r\n// \t$scope.transmission = function(){\r\n// \t\tvar device = this.item;\r\n// \t\tvar dialog = $modal.open({\r\n// \t\t\ttemplateUrl: \"views/vdi/dialog/system/transmission.html\",\r\n// \t\t\tcontroller: \"transmissionDialog\",\r\n// \t\t\tsize: \"sm\",\r\n// \t\t\tresolve:{\r\n// \t\t\t\tparams : function(){\r\n// \t\t\t\t\treturn { device: angular.copy(device) };\r\n// \t\t\t\t}\r\n// \t\t\t}\r\n// \t\t});\r\n// \t\tdialog.result.then(function(data){\r\n// \t\t\tif(data){\r\n// \t\t\t\tget_rows();\r\n// \t\t\t}\r\n// \t\t});\r\n// \t}\r\n\r\n// \t$scope.currentPage = 1;\r\n// \t$scope.pagesizes = [10,20,30];\r\n// \t$scope.pagesize = $scope.pagesizes[0];\r\n// }])\r\n.controller(\"transmissionDialog\",[\"$scope\",\"$modalInstance\", \"$$$I18N\", \"params\",function($scope,$modalInstance,$$$I18N,params){\r\n\t$scope.device = params.device;\r\n\r\n\t$scope.desktops = [{id: \"df\", name: 'zhujianchen'},{id: \"fg\", name: 'egg'}];\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"addSystemUSBDialog\",[\"$scope\",\"$modalInstance\", \"SystemUSB\",\"$$$I18N\", function($scope,$modalInstance,systemusb, $$$I18N){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = { allow: 'true' };\r\n\t$scope.types = [];\r\n\tvar keys = ['0x01','0x02','0x03','0x05','0x06','0x07','0x08','0x09','0x0A','0x0B','0x0D','0x0E','0x0F','0x10','0x11','0xDC','0xE0','0xEF','0xFE','0xFF','-1'];\r\n\tkeys.forEach(function(item){\r\n\t\t$scope.types.push({key: item, value: $$$I18N.get(item)})\r\n\t});\r\n\t$scope.data.class_id = $scope.types[0];\r\n\t$scope.master = { allow: true, class_id: $scope.types[0]};\r\n\t$scope.reset = function() {\r\n\t\t$scope.data = $scope.master;\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.master,$scope.data);\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\tsystemusb.save({\r\n\t\t\tclass_id: $scope.data.class_id.key,\r\n\t\t\tpriority: $scope.data.priority,\r\n\t\t\trule_name: $scope.data.rule_name,\r\n\t\t\tproduct_id: $scope.data.product_id == '-1'? $scope.data.product_id: \"0x\" + $scope.data.product_id,\r\n\t\t\tvendor_id: $scope.data.vendor_id == '-1'? $scope.data.vendor_id: \"0x\" + $scope.data.vendor_id,\r\n\t\t\tallow: $scope.data.allow==\"true\"?true:false\r\n\t\t}, function(res){\r\n\t\t\tsystemusb.get(function(res){\r\n\t\t\t\tres.result.forEach(function(item){\r\n\t\t\t\t\titem.class_id = { key: item.class_id, value: $$$I18N.get(item.class_id)};\r\n\t\t\t\t})\r\n\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\tArray.prototype.push.apply($scope.rows,res.result);\r\n\t\t\t})\r\n\t\t\t\r\n\t\t});\r\n\t\t$modalInstance.close();\r\n\t}\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"editSystemUSBDialog\",[\"$scope\",\"$modalInstance\", \"SystemUSB\",\"$$$I18N\", function($scope,$modalInstance,systemusb, $$$I18N){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.types = [];\r\n\tvar keys = ['0x01','0x02','0x03','0x05','0x06','0x07','0x08','0x09','0x0A','0x0B','0x0D','0x0E','0x0F','0x10','0x11','0xDC','0xE0','0xEF','0xFE','0xFF','-1'];\r\n\tkeys.forEach(function(item){\r\n\t\t$scope.types.push({key: item, value: $$$I18N.get(item)})\r\n\t});\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\tif(item.product_id.indexOf(\"0x\")>-1){\r\n\t\titem.product_id = item.product_id == -1? \"-1\": item.product_id.substring(2);\r\n\t}\r\n\tif(item.vendor_id.indexOf(\"0x\")>-1){\r\n\t\titem.vendor_id = item.vendor_id == -1? \"-1\": item.vendor_id.substring(2);\r\n\t}\r\n\t$scope.data = angular.copy(item);\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item,$scope.data) || angular.equals($scope.currentItem,$scope.data);\r\n\t}\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.item || $scope.currentItem);\r\n\t};\r\n\r\n\t$scope.ok = function() {\r\n\t\tsystemusb.update(\r\n\t\t{\t\r\n\t\t\tgroup_id: $scope.data.id,\r\n\t\t\tclass_id: $scope.data.class_id.key,\r\n\t\t\tpriority: $scope.data.priority,\r\n\t\t\trule_name: $scope.data.rule_name,\r\n\t\t\tproduct_id: $scope.data.product_id == '-1'? $scope.data.product_id: \"0x\" + $scope.data.product_id,\r\n\t\t\tvendor_id: $scope.data.vendor_id == '-1'? $scope.data.vendor_id: \"0x\" + $scope.data.vendor_id,\r\n\t\t\tallow: $scope.data.allow\r\n\t\t},\r\n\t\t\tfunction(res){\r\n\t\t\t\tsystemusb.get(function(res){\r\n\t\t\t\t\tres.result.forEach(function(item){\r\n\t\t\t\t\t\titem.class_id = { key: item.class_id, value: $$$I18N.get(item.class_id)};\r\n\t\t\t\t\t})\r\n\t\t\t\t\t$scope.rows.splice(0, $scope.rows.length);\r\n\t\t\t\t\tArray.prototype.push.apply($scope.rows,res.result);\r\n\t\t\t\t})\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t},\r\n\t\t\tfunction(){  }\r\n\t\t);\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller(\"systemUpgradeDetailDialog\", [\"$scope\", \"SystemUpgrade\",\"modal_data\",\"$modalInstance\",function($scope, SystemUpgrade,modal_data,$modalInstance){\r\n\r\n\tSystemUpgrade.query({owner:modal_data},function(res){\r\n\t\t$scope.rows = res.result;\r\n\t});\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t}\r\n}])\r\n.controller('vdiSystemDesktopDetailController', ['$scope','$modal','SystemDesktop','$routeParams','$interval','$filter','$$$os_types','VMCommon','PersonDesktop','$$$I18N',\r\n\tfunction($scope,$modal,SystemDesktop,$routeParams,$interval,$filter,$$$os_types,vm, person_desktop,$$$I18N){\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"系统\", \"系统桌面\",\"桌面详情\"]);\r\n\r\n    $interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"instanceIDS\", $filter(\"paging\")($scope.rows, $scope.currentPage, $scope.pagesize).map(item => item.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"instancesRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t\r\n\t$scope.refresh = (_s = $scope) => {\r\n\t\tvar _id = $routeParams.id;\r\n\t\t_s.select = ''\r\n\t\tSystemDesktop.get_instances({id: _id}, res => {\r\n\t\t\t_s.rows = res.result.result;\r\n\t\t\t_s.allRows = res.result.result;\r\n\t\t\t_s.rows.forEach(row => {\r\n\t\t\t\tlet os = $$$os_types.filter(item => item.key === row.os_type)[0];\r\n\t\t\t\tos && os.icon && (row.icon = os.icon);\r\n\t\t\t});\r\n\t\t\t_s.loading = false;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.pagesize = Number($$$storage.getSessionStorage('personl_pagesize')) || 30;\r\n\t$scope.currentPage = 1;\r\n\r\n\t$scope.$watch(\"pagesize\",function(newvalue){\r\n\t\t$$$storage.setSessionStorage('personl_pagesize', newvalue);\r\n\t});\r\n\r\n\t$scope.loading = true;\r\n\t$scope.rows = [];\r\n\t$scope.refresh();\r\n\r\n\t$scope.changeStatus = function(){\r\n\t\t$scope.rows = $filter(\"filter\")($scope.allRows,$scope.select).map(item => { item._selected = false;return item });\r\n\t};\r\n\r\n\tvar _controllerScope = $scope;\t\r\n\t$scope.start = item => {\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'shutdown' || row.status == 'suspended'); });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvm.start({instance_ids: rows.map(row => \r\n\t\t\t\t{row.status = \"building\";return row.instance_id})}, () => \r\n\t\t\t{$scope.refresh();});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.forceShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended'); });\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP2\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面强制关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面强制关机</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定强制关闭桌面吗'>确定强制关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tvm.shutdowns({instance_ids: rows.map(row => {\r\n\t\t\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\t\t\trow.status = \"building\";\r\n\t\t\t\t\t\t\t\t\treturn row.instance_id;\r\n\t\t\t\t\t\t\t\t})},() => { _controllerScope.refresh()});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.natureShutdown = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended'); })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP3\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面自然关机'>\"+\r\n\t\t\t\t\t\t\t\"桌面自然关机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定自然关闭桌面吗'>确定自然关闭桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\trow.status = \"building\" ;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.shutdowns({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.restart = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && (row.status == 'running' || row.status == 'suspended'); })\r\n\t\tif(rows.length==0){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP4\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面重启'>\"+\r\n\t\t\t\t\t\t\t\"桌面重启</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启桌面吗'>确定重启桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\trow.status = \"building\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.reboots({is_soft:'true',instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.pause = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'running'; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP5\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面暂停'>\"+ \r\n\t\t\t\t\t\t\"桌面暂停</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定暂停桌面吗'>确定暂停桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\trow.status = \"building\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.pause({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.resume = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status == 'paused'; })\r\n\t\tif(rows.length ==0 ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiDesktopPersonalList_TIP6\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面恢复'>\"+\r\n\t\t\t\t\t\t\"桌面恢复</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定恢复桌面吗'>确定恢复桌面吗?</p><footer   class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\trows.map(function(row){\r\n\t\t\t\t\t\t\trow._selected = false;\r\n\t\t\t\t\t\t\trow.status = \"building\";\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.resume({instance_ids: rows.map(function(row){ return row.instance_id; })},function(){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\tvar is_running = rows.some(function(row){ return row.status == 'running'});\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='桌面删除'>\"+\r\n\t\t\t\t\t\"桌面删除</h4></div><div class='modal-body'><form class='form-horizontal'><p ng-show='!is_run' style='margin-bottom:20px;' localize='桌面删除后无法恢复，确定删除桌面吗'>桌面删除后无法恢复，确定删除桌面吗?</p><p ng-show='is_run' style='margin-bottom:20px;' localize='存在未关机的桌面，仍然删除桌面吗'>存在未关机的桌面，仍然删除桌面吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.is_run = is_running;\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tperson_desktop.delete({instance_ids: rows.map(function(row){ return row.instance_id; })}, function(data){\r\n\t\t\t\t\t\trows.forEach(function(r){\r\n\t\t\t\t\t\t\t_controllerScope.refresh();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\t\t\t\r\n\t};\r\n\r\n\t$scope.add = function(){\r\n\t\tvar instance = $modal.open({\r\n\t\t\t\ttemplateUrl:\"views/vdi/dialog/system/system_desktop_add.html\",\r\n\t\t\t\tcontroller:\"systemDesktopAddDialog\",\r\n\t\t\t\tsize:\"md\"\r\n\t\t\t});\r\n\t\t\tinstance.result.then(function(){\r\n\t\t\t\t_controllerScope.refresh();\r\n\t\t\t});\r\n\t\t};\r\n\t\r\n\t$scope.config = function(item){\r\n\t\tvar instance = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/system/system_desktop_config.html\",\r\n\t\t\tcontroller:\"systemDesktopConfigDialog\",\r\n\t\t\tsize:\"md\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn item;\r\n\t\t\t}}\r\n\t\t});\r\n\t\tinstance.result.then(function(){\r\n\t\t\t_controllerScope.refresh();\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('systemDesktopConfigDialog', ['$scope','param','SystemDesktop','Host','$filter','$modalInstance',\r\n function($scope, param, SystemDesktop,Host,$filter,$modalInstance){\r\n\t$scope.data = {\r\n\t\tid:param.id,\r\n\t\tmemory_mb:param.memory_mb/1024,\r\n\t\tcpu_num:param.vcpu,\r\n\t\thostname:param.hostname\r\n\t};\r\n\t$scope.host_loading = true;\r\n\t\r\n\r\n\t$scope.get_devices = function(hostname){\r\n\t\tSystemDesktop.get_devices({host:hostname},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.devices = res.result.filter(function(item){ return item.status === \"available\"});\r\n\t\t});\r\n\t};\r\n\t$scope.get_devices($scope.data.hostname);\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.devices.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.data.is_all = $scope.devices.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar devices = $filter(\"selectedFilter\")($scope.devices);\r\n\t\tvar node = $scope.data.is_cancel ? -1 : devices.map(function(item){ return item.compute_node_id });\r\n\t\tvar addr = $scope.data.is_cancel ? -1 : devices.map(function(item){ return item.address});\r\n\t\tvar postData ={\r\n\t\t\tid:$scope.data.id,\r\n\t\t\tis_auto_up:$scope.data.is_on,\r\n\t\t\tpci_devices_node:node,\r\n\t\t\tpci_devices_address:addr,\r\n\t\t\tcpu:$scope.data.cpu_num,\r\n\t\t\tram:$scope.data.memory_mb\r\n\t\t};\r\n\t\t$scope.loading = true;\r\n\t\tSystemDesktop.config_instances(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('systemDesktopAddDialog', ['$scope','Host','$filter','SystemDesktop','$modalInstance','$routeParams',\r\n\tfunction($scope, Host ,$filter,SystemDesktop, $modalInstance, $routeParams){\r\n\t\t\r\n\t$scope.data = {};\r\n\t$scope.host_loading = true;\r\n\tHost.query({ type: 'kvm' }, function(res){\r\n\t\t$scope.hosts = res.hosts_list.filter(function(host){ return host.status == 'active'});\r\n\t}).$promise.finally(function(){\r\n\t\t$scope.host_loading = false;\r\n\t});\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.hosts.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.data.is_all = $scope.hosts.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _id = $routeParams.id ? $routeParams.id : $scope.creat_item.id;\r\n\t\tvar postData = {\r\n\t\t\tid:_id,\r\n\t\t\tname: $scope.data.name,\r\n\t\t\thost_ids: $filter(\"selectedFilter\")($scope.hosts).map(function(item){ return item.id }),\r\n\t\t\tcpu: $scope.data.cpu_num,\r\n\t\t\tram: $scope.data.memory_mb\r\n\t\t};\r\n\t\t$scope.loading = true;\r\n\t\tSystemDesktop.add_instances(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close =function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\t\r\n}])\r\n\r\n.controller('systemTemplateConfigDialog', ['$scope','$modalInstance','param','SystemDesktop','$filter','TeachTemplate', \"Network\", \"$$$I18N\",function($scope, $modalInstance, param, SystemDesktop, $filter, TeachTemplate, Network, $$$I18N){\r\n\tvar me = this;\r\n\t$scope.min_namelength=2;\r\n\t$scope.max_namelength=20;\r\n\t$scope.data = {\r\n\t\tinstance_id:param.instance_id,\r\n\t\tid:param.id,\r\n\t\tcpu_num: 1,\r\n\t\tmemory_mb: 1\r\n\t};\r\n\t$scope.host_loading = true;\r\n\t\r\n\t$scope.multifyNetsTips = $$$I18N.get('multifyNetsTips');\r\n\r\n\tTeachTemplate.infor({image_id:$scope.data.id},function(res){\r\n\t\t$scope.data.cpu_num = res.vcpus;\r\n\t\t$scope.data.memory_mb = res.ram/1024;\r\n\t\t$scope.data.display_name = res.name;\r\n\t\t$scope.data.type = res.type_code;\r\n\t\t$scope.data.host = res.host;\r\n\t\t$scope.data.start_on_host_boot = res.start_on_host_boot;\r\n\t\t$scope.get_devices($scope.data.host);\r\n\t\tres.nets.forEach(function(net){\r\n\t\t\tgetNetwork(net, new Date());\r\n\t\t});\r\n\t});\r\n\r\n\t$scope.nets = [];\r\n\t$scope.IPmodes1 = [{name: $$$I18N.get('不分配'), value: 0}];\r\n\t$scope.IPmodes2 = [{name: $$$I18N.get('系统分配'), value: 1},{name: $$$I18N.get('固定IP'), value: 2}];\r\n\tfunction getNetwork(net, key){\r\n\t\t$scope.network_loading = true;\r\n\t\tNetwork.query(function(data){\r\n\t\t\tif(data.networks.length){\r\n\t\t\t\tvar _network = net?data.networks.filter(function(n){ return n.id == net.network_id })[0]:data.networks[0];\r\n\t\t\t\t$scope.nets.push({key: key, networks: data.networks, network: _network});\r\n\t\t\t\t$scope.get_subnet(net, _network, key);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t$scope.get_subnet = function(net, network, key){\r\n\t\tif(network.subnets.length){\r\n\t\t\tNetwork.query_sub({\r\n\t\t\t\tid:network.id\r\n\t\t\t},function(res){\r\n\t\t\t\tvar subnetworks = [];\r\n\t\t\t\tsubnetworks = res.result.map(function(n){\r\n\t\t\t\t\tn._desc = n.start_ip ?(n.name + \" (\" + n.start_ip +\" - \"+ n.end_ip + \") \") :  n.name;\r\n\t\t\t\t\treturn n;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\t\tif(item.key===key){\r\n\t\t\t\t\t\titem.subnetworks = subnetworks;\r\n\t\t\t\t\t\tvar _subnetwork;\r\n\t\t\t\t\t\tif(net){\r\n\t\t\t\t\t\t\t _subnetwork = net.subnet_id?subnetworks.filter(function(n){ return n.id == net.subnet_id })[0]:null;\r\n\t\t\t\t\t\t}else{ _subnetwork = subnetworks[0] };\r\n\t\t\t\t\t\titem.subnetwork = _subnetwork;\r\n\t\t\t\t\t\t$scope.clearBindIp(net, key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$scope.network_loading = false;\r\n\t\t\t$scope.nets.forEach(function(item){\r\n\t\t\t\tif(item.key===key){\r\n\t\t\t\t\titem.subnetworks = [];\r\n\t\t\t\t\titem.subnetwork = null;\r\n\t\t\t\t\t$scope.clearBindIp(net,key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.clearBindIp = function(net, key){\r\n\t\t$scope.nets.forEach(function(item){\r\n\t\t\tif(item.key===key){\r\n\t\t\t\tif(item.subnetwork){\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes2;\r\n\t\t\t\t\tif(net.ip_address){\r\n\t\t\t\t\t\titem.IPmode= item.IPmodes[1];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\titem.IPmode= item.IPmodes[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\titem.IPmodes = $scope.IPmodes1;\r\n\t\t\t\t\titem.IPmode= item.IPmodes[0];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\titem.ip = net.ip_address;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.addNet = function(){\r\n\t\tgetNetwork(false, new Date());\r\n\t};\r\n\t$scope.minusNet = function(i){\r\n\t\tvar idx = $scope.nets.indexOf(i)\r\n\t\t$scope.nets.splice(idx,1);\r\n\t};\r\n\t$scope.get_devices = function(hostname){\r\n\t\tSystemDesktop.get_devices({host:hostname},function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.devices = res.result.filter(function(item){ return item.status === \"available\"});\r\n\t\t});\r\n\t};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.devices.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.data.is_all = $scope.devices.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t};\r\n\r\n\t// 判断网络数组中两两是否有两个相同的子网id\r\n\tfunction giveTip(array){\r\n\t\tvar flag = false;\r\n\t\tarray.forEach(function(item, index){\r\n\t\t for(var i=index+1; i<array.length; i++){\r\n\t\t\tconsole.log(array[index],array[i]);\r\n\t\t\tif(array[index]['subnetwork']['id'] == array[i]['subnetwork']['id']){\r\n\t\t\t\tflag = true;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t});\r\n\t\treturn flag;\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\tvar me = this, alertTip = giveTip(me.nets);\r\n\t\tvar devices = $filter(\"selectedFilter\")($scope.devices);\r\n\t\tvar node = $scope.data.is_cancel ? -1 : devices.map(function(item){ return item.compute_node_id });\r\n\t\tvar addr = $scope.data.is_cancel ? -1 : devices.map(function(item){ return item.address});\r\n\t\tvar postData = {\r\n\t\t\timage_id:$scope.data.id,\r\n\t\t\tinstance_id:$scope.data.instance_id,\r\n\t\t\tdisplay_name:$scope.data.display_name,\r\n\t\t\ttype_code: this.data.type,\r\n\t\t\tnetwork: this.nets.map(function(item){ if(!item.network.id) return \"\"; else return item.network.id }),\r\n\t\t\tsubnet: this.nets.map(function(item){ if(!item.subnetwork) return \"\"; else return item.subnetwork.id }),\r\n\t\t\tband_ip: this.nets.map(function(item){ if(!item.ip) return \"\"; else return item.ip }),\r\n\t\t\tpci_devices_node:node,\r\n\t\t\tpci_devices_address:addr,\r\n\t\t\tvcpus:$scope.data.cpu_num,\r\n\t\t\tram:$scope.data.memory_mb,\r\n\t\t\tstart_on_host_boot: $scope.data.start_on_host_boot\r\n\t\t};\r\n\t\tif(alertTip){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"不同网卡上不能存在相同网段的IP\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn false ;\r\n\t\t}\r\n\t\t$scope.loading = true;\r\n\t\tSystemDesktop.edit(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('systemBackupConfigController', ['$scope','$modalInstance','SystemBackup', function($scope, $modalInstance,SystemBackup){\r\n\t$scope.data = {};\r\n\tSystemBackup.get_config(function(res){\r\n\t\t$scope.data = res.result;\r\n\t\tvar initTime = new Date();\r\n\t\t$scope.data.backup_weekday = $scope.data.backup_weekday  || \"\";\r\n\t\t$scope.data.backup_time = $scope.data.backup_time  || initTime;\r\n\t});\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\t$scope.submiting = true;\r\n\t\tSystemBackup.alter_config($scope.data , function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"vdiSystemOutsideController\", [\"$scope\", \"$modal\", \"$$$I18N\", \"Outside\", 'AlarmPlicy', function($scope, $modal, $$$I18N, Outside, AlarmPlicy){\r\n\t$scope.enable_loading = false;\r\n\t$scope.save_loading = false;\r\n\t$scope.ips_loading = true;\r\n\r\n\tOutside.query(function(res){\r\n\t\t// var res = {\r\n\t\t// \tenable: true,\r\n\t\t// \tproxy_ip: \"10.1.41.188\",\r\n\t\t// \tcomputer_ips: [\"10.1.41.17\"]\r\n\t\t// };\r\n\t\t// var res = {\r\n\t\t// \tenable: false,\r\n\t\t// \tproxy_ip: \"\",\r\n\t\t// \tcomputer_ips: []\r\n\t\t// };\r\n\t\t$scope.enable = res.enable;\r\n\t\t$scope.IP = res.proxy_ip;\r\n\t\t$scope.hasIP = res.proxy_ip==''?false:true;\r\n\t\t$scope.computer_ips = res.computer_ips;\r\n\r\n\t\tAlarmPlicy.get_hosts(function(result){\r\n\t\t\t$scope.ips_loading = false;\r\n\t\t\t// var consoleIP = result.result.filter(function(r){ return r.type==\"control\"; })[0].hosts[0].ip;\r\n\t\t\t// result.result.forEach(function(item){\r\n\t\t\t// \titem.hosts = item.hosts.filter(function(i){ return i.ip!==consoleIP })\r\n\t\t\t// });\r\n\t\t\t$scope.pools = result.result.filter(function(r){\r\n\t\t\t\treturn r.hosts.length && r.type!==\"control\";\r\n\t\t\t});\r\n\t\t});\r\n\t})\r\n\r\n\t$scope.start = function(){\r\n\t\tif(!$scope.enable){\r\n\t\t\t$scope.enable_loading = true;\r\n\t\t\tOutside.stop(function(res){\r\n\t\t\t\t$scope.enable_loading = false;\r\n\t\t\t\t$scope.IP = null;\r\n\t\t\t\t$scope.computer_ips = [];\r\n\t\t\t},function(error){\r\n\t\t\t\t$scope.enable_loading = false;\r\n\t\t\t\t$scope.enable = !$scope.enable;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t$scope.save = function(){\r\n\t\tvar computer_ips = [];\r\n\t\tif(!$scope.hasIP){\r\n\t\t\t$scope.pools.forEach(function(item){\r\n\t\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\t\tcomputer_ips.push(host.ip);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.pools.forEach(function(item){\r\n\t\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\t\tvar is_selected = $scope.computer_ips.filter(function(i){ return i === host.ip }).length;\r\n\t\t\t\t\tif(is_selected){\r\n\t\t\t\t\t\tcomputer_ips.push(host.ip)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\tif(computer_ips.length){\r\n\t\t\t$scope.save_loading = true;\r\n\t\t\tOutside.save({\r\n\t\t\t\tproxy_ip: $scope.IP,\r\n\t\t\t\tcomputer_ips: computer_ips\r\n\t\t\t}, function(res){\r\n\t\t\t\t$scope.hasIP = true;\r\n\t\t\t\t$scope.save_loading = false;\r\n\t\t\t\t$scope.computer_ips = computer_ips;\r\n\t\t\t},function(error){\r\n\t\t\t\t$scope.save_loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"NO_OUSIDEIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}])\r\n.controller('outsideAdvancedDialog', ['$scope','$modalInstance', 'AlarmPlicy', \"Outside\", function($scope, $modalInstance, AlarmPlicy, Outside){\r\n\t$scope.ips_loading = true;\r\n\t$scope.isSubmiting = false;\r\n\tAlarmPlicy.get_hosts(function(result){\r\n\t\t$scope.ips_loading = false;\r\n\r\n\t\t// var consoleIP = result.result.filter(function(r){ return r.type==\"control\"; })[0].hosts[0].ip;\r\n\t\t// result.result.forEach(function(item){\r\n\t\t// \titem.hosts = item.hosts.filter(function(i){ return i.ip!==consoleIP })\r\n\t\t// });\r\n\t\tvar pools = result.result.filter(function(r){\r\n\t\t\treturn r.hosts.length && r.type!==\"control\";\r\n\t\t});\r\n\t\t$scope.pools.splice(0);\r\n\t\tArray.prototype.push.apply($scope.pools, pools);\r\n\r\n\t\tif(!$scope.hasIP){\r\n\t\t\t$scope.pools.forEach(function(item){\r\n\t\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\t\thost._selected = true;\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.pools.forEach(function(item){\r\n\t\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\t\tvar is_selected = $scope.computer_ips.filter(function(i){ return i === host.ip }).length;\r\n\t\t\t\t\tif(is_selected){\r\n\t\t\t\t\t\thost._selected = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\t\t$scope.pools.forEach(function(item){\r\n\t\t\tvar selected_length = item.hosts.filter(function(host){ return host._selected }).length;\r\n\t\t\tif(selected_length == item.hosts.length){\r\n\t\t\t\titem._selected = true;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\r\n\t$scope.checkOne = function(pool){\r\n\t    pool._selected = pool.hosts.every(function(h){ return h._selected});\r\n\t};\r\n\t$scope.checkAll = function(pool){\r\n\t    pool.hosts.forEach(function(h){\r\n\t        h._selected = pool._selected;\r\n\t    });\r\n\t};\r\n\t$scope.checked = function(){\r\n\t\tvar computer_ips = []\r\n\t\t$scope.pools && $scope.pools.forEach(function(item){\r\n\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\tif(host._selected){\r\n\t\t\t\t\tcomputer_ips.push(host.ip)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\treturn computer_ips.length?true:false;\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar computer_ips = []\r\n\t\t$scope.pools.forEach(function(item){\r\n\t\t\titem.hosts.forEach(function(host){\r\n\t\t\t\tif(host._selected){\r\n\t\t\t\t\tcomputer_ips.push(host.ip)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t\t$scope.isSubmiting = true;\r\n\t\tOutside.save({\r\n\t\t\tproxy_ip: $scope.IP,\r\n\t\t\tcomputer_ips: computer_ips\r\n\t\t}, function(res){\r\n\t\t\t$scope.hasIP = true;\r\n\t\t\t$scope.computer_ips.splice(0);\r\n\t\t\tArray.prototype.push.apply($scope.computer_ips,computer_ips);\r\n\t\t\t$modalInstance.close();\r\n\t\t\t$scope.isSubmiting = false;\r\n\t\t},function(error){\r\n\r\n\t\t})\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller(\"systemUploadIsoDialog\", ['$scope','$modalInstance','param','$rootScope',function($scope,$modalInstance,param,$rootScope){\r\n\t$scope.id = param.upload_id;\r\n\t$scope.finishUpload = function(){\r\n\t\t$rootScope.$broadcast(\"finishISOUpload\");\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t}\r\n}])\r\n/**\r\n * [description vdiSystemRecycleController 系统资源回收控制器]\r\n */\r\n.controller('vdiSystemRecycleController', ['$scope','$modal','$location','$route','RecycleTech','RecyclePer',function($scope,$modal,$location,$route,RecycleTech,RecyclePer){\r\n\tvar RecycleCtrl=this;\r\n\tRecycleCtrl.data={},RecycleCtrl.submit={};\r\n\r\n\tRecycleCtrl.setTechDefault = function(val){\r\n\t\tRecycleCtrl.tecSave(true);\r\n\t}\r\n\tRecycleCtrl.getTech = function(){\r\n\t\tRecycleCtrl.techLoading = true;\r\n\t\tRecycleTech.query(function(res){\r\n\t\t\tRecycleCtrl.data.tecOpen = res.value.active;\r\n\t\t\tRecycleCtrl.data.tecDesk = res.value.broken_min;\r\n\t\t\tRecycleCtrl.data.tecStatus = res.value.run;\r\n\t\t\tRecycleCtrl.techLoading = false;\r\n\t\t},function(){ RecycleCtrl.techLoading = false; })\r\n\t}\r\n\tRecycleCtrl.getTech();\r\n\tRecycleCtrl.tecSave=function(onlyEnable){\r\n\t\t//提交请求\r\n\t\tif(onlyEnable){\r\n\t\t\tRecycleCtrl.techenabling = true;\r\n\t\t\tRecycleTech.save({value: {active:RecycleCtrl.data.tecOpen}},function(res){\r\n\t\t\t\tRecycleCtrl.techenabling = false;\r\n\t\t\t\tRecycleCtrl.getTech();\r\n\t\t\t\tif(!RecycleCtrl.data.tecOpen){\r\n\t\t\t\t\tRecycleCtrl.techEdit = false;\r\n\t\t\t\t}\r\n\t\t\t},function(){ RecycleCtrl.techenabling = false; })\r\n\t\t}else{\r\n\t\t\tRecycleCtrl.data.tecDesk = Number(RecycleCtrl.data.tecDesk);\r\n\t\t\tvar params={\r\n\t\t\t\tactive:RecycleCtrl.data.tecOpen,\r\n\t\t\t\tbroken_min:RecycleCtrl.data.tecDesk,\r\n\t\t\t\trun:RecycleCtrl.data.tecStatus\r\n\t\t\t};\r\n\t\t\tRecycleCtrl.techSave = true;\r\n\t\t\tRecycleTech.save({value:params},function(res){\r\n\t\t\t\tRecycleCtrl.techSave = false;\r\n\t\t\t\tRecycleCtrl.techEdit = false;\r\n\t\t\t},function(){ RecycleCtrl.techSave = false; })\r\n\t\t}\r\n\t}\r\n\r\n\tRecycleCtrl.setPerDefault = function(val){\r\n\t\tRecycleCtrl.perSave(true);\r\n\t}\r\n\tRecycleCtrl.getPerson = function(){\r\n\t\tRecycleCtrl.personLoading = true;\r\n\t\tRecyclePer.query(function(res){\r\n\t\t\tRecycleCtrl.submit.perOpen = res.value.active;\r\n\t\t\tRecycleCtrl.submit.perDesk = res.value.broken_min/60;\r\n\t\t\tRecycleCtrl.submit.perStatus = res.value.run;\r\n\t\t\tRecycleCtrl.personLoading = false;\r\n\t\t},function(){ RecycleCtrl.personLoading = false; })\r\n\t}\r\n\tRecycleCtrl.getPerson();\r\n\tRecycleCtrl.perSave = function(onlyEnable){\r\n\t\t//提交请求\r\n\t\tif(onlyEnable){\r\n\t\t\tRecycleCtrl.perenabling = true;\r\n\t\t\tRecyclePer.save({value: {active:RecycleCtrl.submit.perOpen}},function(res){\r\n\t\t\t\tRecycleCtrl.perenabling = false;\r\n\t\t\t\tRecycleCtrl.getPerson();\r\n\t\t\t\tif(!RecycleCtrl.submit.perOpen){\r\n\t\t\t\t\tRecycleCtrl.personEdit = false;\r\n\t\t\t\t}\r\n\t\t\t},function(){ RecycleCtrl.perenabling = false; })\r\n\t\t}else{\r\n\t\t\tRecycleCtrl.submit.perDesk = Number(RecycleCtrl.submit.perDesk);\r\n\t\t\tvar params={\r\n\t\t\t\tactive:RecycleCtrl.submit.perOpen,\r\n\t\t\t\tbroken_min:RecycleCtrl.submit.perOpen?RecycleCtrl.submit.perDesk*60:undefined,\r\n\t\t\t\trun:RecycleCtrl.submit.perOpen?RecycleCtrl.submit.perStatus:undefined\r\n\t\t\t};\r\n\t\t\tRecycleCtrl.personSave = true;\r\n\t\t\tRecyclePer.save({value:params},function(res){\r\n\t\t\t\tRecycleCtrl.personSave = false;\r\n\t\t\t\tRecycleCtrl.personEdit = false;\r\n\t\t\t},function(){ RecycleCtrl.personSave = false; })\r\n\t\t}\r\n\t}\r\n}])\r\n\r\n/**\r\n * [description vdiSystemtimeSyncController 系统时间同步控制器]\r\n */\r\n.controller('vdiSystemtimeSyncController', ['$scope','$modal','$route','SystemTime','$$$I18N','formDate',function($scope,$modal,$route,SystemTime,$$$I18N,formDate){\r\n\tvar SyncCtrl=this;\r\n\t// var oldSyncServer;\r\n\tSystemTime.getInternetSync(function(res){\r\n\t\tSyncCtrl.internetSync = res.enable;\r\n\t},function(){});\r\n\r\n\tSyncCtrl.setInternetSync = function(value){\r\n\t\tSyncCtrl.loading_internet = true;\r\n\t\tSystemTime.internetSync({enable: value}, function(){\r\n\t\t\tSyncCtrl.loading_internet = false;\r\n\t\t},function(){ SyncCtrl.loading_internet = false; })\r\n\t\tif(value){\r\n\t\t\tSyncCtrl.updateSyncServer();\r\n\t\t}\r\n\t};\r\n\t\r\n\tSystemTime.querySyncServer(function(res){\r\n\t\tSyncCtrl.servers = res.result;\r\n\t\tSyncCtrl.server = res.used!==''?res.used:res.result[0];\r\n\t\t// 保持对旧 server 引用\r\n        // oldSyncServer = res.used;\r\n\t},function(){});\r\n\r\n\t// SyncCtrl.isSyncServerChanged = function(){\r\n\t// \t// 不允许选择空值\r\n\t// \tif(!this.server) { return false; }\r\n\t// \t// 判断变化\r\n\t// \tif(oldSyncServer) {\r\n\t// \t\treturn oldSyncServer !== this.server;\r\n\t// \t}\r\n\t// };\r\n\r\n\tSyncCtrl.updateSyncServer = function(){\r\n\t\tSyncCtrl.loading_updateServer = true;\r\n\t\tSystemTime.updateSyncServer({time_server: SyncCtrl.server},function(res){\r\n\t\t\t// oldSyncServer = SyncCtrl.server;\r\n\t\t\tSyncCtrl.loading_updateServer = false;\r\n\t\t\tSyncCtrl.loadZone();\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"同步时间成功\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\t},function(){\r\n\t\t\tSyncCtrl.loading_updateServer = false;\r\n\t\t\tSyncCtrl.loadZone();\r\n\t\t})\r\n\t}\r\n\t\r\n\t// 时区\r\n\tSyncCtrl.startDateOptions = {\r\n\t\tformatYear: 'yyyy-MM-dd',\r\n\t\tstartingDay: 1\r\n\t};\r\n\tSyncCtrl.openStartDate=function($event){\r\n\t\t$event.preventDefault();\r\n\t\t$event.stopPropagation();\r\n\t\tSyncCtrl.startDateOpened = true;\r\n\t}\r\n\t$scope.$on('matchInput', function(e,v){\r\n\t\t$scope.matchInput = v;\r\n\t})\r\n\tvar timeID;\r\n\tfunction updateTime(time){\r\n\t\tvar new_time = time;\r\n\t\tvar timeArray = formDate.format(new Date(time), \"hh:mm:ss\").split(':');\r\n\t\tif(SyncCtrl.loopTime){\r\n\t\t\tSyncCtrl.hours = timeArray[0];\r\n\t\t\tSyncCtrl.minutes = timeArray[1];\r\n\t\t\tSyncCtrl.seconds = timeArray[2];\r\n\t\t\tnew_time = time+1000;\r\n\t\t\ttimeID = setTimeout(function(){\r\n\t\t\t\tupdateTime(new_time);\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tclearTimeout(timeID);\r\n\t\t}\r\n\t};\r\n\r\n\tSyncCtrl.loadZone = function(){\r\n\t\tclearTimeout(timeID);\r\n\t\tSyncCtrl.loading_zone = true;\r\n\t\tSystemTime.queryZone(function(res){\r\n\t\t\tSyncCtrl.choose_time = res.date;\r\n\t\t\tSyncCtrl.loopTime = true;\r\n\t\t\tupdateTime(res.timestamp);\r\n\t\t\tSyncCtrl.zones = res.timezones.map(function(item){\r\n\t\t\t\titem.value = $$$I18N.get(item.zones[0]);\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\tSyncCtrl.zone = SyncCtrl.zones.filter(function(item){ return item.offset == res.zone })[0];\r\n\t\t\tSyncCtrl.loading_zone = false;\r\n\t\t},function(){ SyncCtrl.loading_zone = false; })\r\n\t};\r\n\tSyncCtrl.loadZone();\r\n\tSyncCtrl.updateZone = function(){\r\n\t\tSyncCtrl.updating_zone = true;\r\n\t\t// 格式化时间，0-9时前面加0\r\n\t\tif(SyncCtrl.hours.length==1 && Number(SyncCtrl.hours)>=0 && Number(SyncCtrl.hours)<=9){\r\n\t\t\tSyncCtrl.hours = \"0\"+SyncCtrl.hours\r\n\t\t}\r\n\t\tif(SyncCtrl.minutes.length==1 && Number(SyncCtrl.minutes)>=0 && Number(SyncCtrl.minutes)<=9){\r\n\t\t\tSyncCtrl.minutes = \"0\"+SyncCtrl.minutes\r\n\t\t}\r\n\t\tif(SyncCtrl.seconds.length==1 && Number(SyncCtrl.seconds)>=0 && Number(SyncCtrl.seconds)<=9){\r\n\t\t\tSyncCtrl.seconds = \"0\"+SyncCtrl.seconds\r\n\t\t}\r\n\t\tvar time = formDate.format(new Date(SyncCtrl.choose_time), \"yyyy-MM-dd\");\r\n\t\tSystemTime.updateZone({\r\n\t\t\t\"date\": time,\r\n\t\t\t\"time\": SyncCtrl.hours+':'+SyncCtrl.minutes+\":\"+SyncCtrl.seconds,\r\n\t\t\t\"zone\": SyncCtrl.zone.offset\r\n\t\t},function(res){\t\r\n\t\t\tSyncCtrl.updating_zone = false;\r\n\t\t\tSyncCtrl.modifyTime = false;\r\n\t\t\tSyncCtrl.loadZone();\r\n\t\t},function(){ SyncCtrl.updating_zone = false; SyncCtrl.modifyTime = false; SyncCtrl.loadZone();})\r\n\r\n\t}\r\n\r\n}])\r\n.controller('vdiSystemSetController', ['$scope', '$modal', function($scope, $modal){\r\n}])\r\n// 快速部署\r\n.directive('htmlpopover', ['$tooltip', function ($tooltip) {\r\n    return $tooltip( 'htmlpopover', 'htmlpopover', 'mouseenter' );\r\n}])\r\n.directive('htmlpopoverPopup', function () {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: { title: '@', content: '@', placement: '@', animation: '&', isOpen: '&' },\r\n        template: \"<div class=\\\"popover {{placement}}\\\" ng-class=\\\"{ in: isOpen(), fade: animation() }\\\">\\n\" +\r\n        \"  <div class=\\\"arrow\\\"></div>\\n\" +\r\n        \"\\n\" +\r\n        \"  <div class=\\\"popover-inner\\\">\\n\" +\r\n        \"      <h3 class=\\\"popover-title\\\" ng-bind=\\\"title\\\" ng-show=\\\"title\\\"></h3>\\n\" +\r\n        \"      <div class=\\\"popover-content\\\" bind-html-unsafe=\\\"content\\\"></div>\\n\" +\r\n        \"  </div>\\n\" +\r\n        \"</div>\"\r\n    };\r\n})\r\n.filter(\"filename\", function(){\r\n    return function(text){\r\n        if(!text) { return text; }\r\n        var pos = text.lastIndexOf(\"/\");\r\n        if(pos === -1) {\r\n            pos = text.lastIndexOf(\"\\\\\");\r\n        }\r\n        if(pos > -1) {\r\n            return text.substring(pos + 1);\r\n        } else {\r\n            return text;\r\n        }\r\n    }\r\n})\r\n.filter(\"filesize\", function(){\r\n\treturn function(num){\r\n\t\tvar units = ['B', 'KB', 'MB', 'GB', 'TB'];\r\n\t\tvar index = 0;\r\n\t\tnum = num || 0;\r\n\t\twhile(num > 1024) {\r\n\t\t\tnum = num / 1024;\r\n\t\t\tindex++;\r\n\t\t}\r\n\t\treturn num.toFixed(2) + units[index];\r\n\t};\r\n})\r\n.service('quickMaskModel', [\"$$$I18N\", \"$location\", \"$compile\", \"$rootScope\", \"$controller\", function($$$I18N, $location, $compile, $rootScope, $controller){\r\n    this.open = function(){\r\n    \tvar $body = $(document.body);\r\n    \t$body.css('overflow', 'hidden');\r\n        var modalRootElement = angular.element(\"\"\r\n        \t+ \"<div id='quickMaskModel'>\"\r\n        \t+ \"  <div class='content'>\"\r\n        \t+ \"    <p localize='quickstartTip'></p>\"\r\n        \t+ \"    <footer class='text-right'>\"\r\n        \t+ \"      <a ng-click='ok()' class='btn btn-md btn-primary deploy'><i class='fa-arrow-right fa'></i> <span localize='快速部署'></span></a>\"\r\n        \t+ \"      <a ng-click='close()' class='btn btn-md btn-default nodeploy'><span localize='暂不部署'></span></a>\"\r\n        \t+ \"    </footer>\"\r\n        \t+ \"  </div>\"\r\n        \t+ \"  <span class='jiantou'></span>\"\r\n        \t+ \"</div>\"\r\n        );\r\n        modalRootElement.appendTo($body);\r\n        var modalScope = $rootScope.$new();\r\n        $compile(modalRootElement)(modalScope);\r\n        $controller(\"quickstartController\", {$scope: modalScope, $element: modalRootElement});\r\n    \tmodalScope.$on(\"$destroy\", function(){\r\n    \t\t$body.css('overflow', 'auto');\r\n    \t});\r\n    }\r\n}])\r\n.controller('vdiSystemDeployController', ['$scope', '$interval', '$q', '$location', '$modal', '$$$os_types', '$filter', 'localize', 'TeachTemplate', 'SystemDeploy', 'quickMaskModel', function($scope, $interval, $q, $location, $modal, $$$os_types, $filter, localize, TeachTemplate, init, quickMaskModel){\r\n\t$scope.currentIndex = 0;\r\n\t$scope.unknowStep = true;\r\n\t$scope.showMask = false;\r\n\t$scope.firstDeployTips = true;\r\n\t$scope.hideStep = false;\r\n\t//系统模块快速部署的界面展现\r\n\tinit.quick_deploy_page(function(res){\r\n\t\tif(res.result.ha_mode===\"active_passive\" && res.result.storage_type===\"local\" && res.result.ha_triggered){\r\n\t\t\t$scope.showMask = true;\r\n\t\t\t$scope.firstDeployTips = false;\r\n\t\t}\r\n\t\t$scope.hideStep = true;\r\n\t});\r\n\t// 设置当前步骤\r\n\tinit.quickstart(function(res){\r\n\t\tvar step = parseInt(res.step);\r\n\t\tif(step && step > 1) {\r\n\t\t\t$scope.$broadcast(\"currentStepChange\", step - 1);\r\n\t\t\t$scope.$broadcast(\"browser refresh\", step - 1, res);\r\n\t\t} else {\r\n\t\t\t$scope.unknowStep = false;\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.knowStep = function(){\r\n\t\t$scope.unknowStep = false;\r\n\t};\r\n\t$scope.setStep = function(i){\r\n\t\t$scope.$broadcast(\"currentStepChange\", i);\r\n\t};\r\n\r\n\t$scope.$on(\"WizardStep_0\", function(e, step, scope){\r\n\t\tvar formScope = scope.$$childHead;\r\n    \tstep.done = formScope.imgForm.$valid && !!formScope.selectedSysImage\r\n    \tif(!step.done) { return; }\r\n    \t$scope.$broadcast(\"deploy:set\", \"system-image\", formScope.selectedSysImage.filename);\r\n    });\r\n\r\n\t$scope.$on(\"WizardStep_1\", function(e, step, scope){\r\n\t\tvar formScope = scope.$$childHead;\r\n\t\tstep.done = formScope.registerForm.$valid  && !formScope.network_loading\r\n    \tif(!step.done) {\r\n    \t\tangular.forEach(formScope.registerForm.$error, function(arr){\r\n    \t\t\tarr && arr.forEach(function(ctrl){ ctrl.$setViewValue(\"\"); });\r\n    \t\t});\r\n    \t\treturn;\r\n    \t}\r\n    \tvar wizardScope = e.targetScope;\r\n    \tstep.done = false;\r\n    \tstep.showLoading = true;\r\n    \tformScope.ok(function(res){\r\n    \t\tstep.showLoading = false;\r\n    \t\tif(res === null) { return; }\r\n    \t\tformScope.showTemplateBlock(res);\r\n    \t});\r\n    });\r\n\r\n    $scope.$on(\"WizardStep_2\", function(e, step, scope){\r\n    \tvar formScope = scope.$$childHead;\r\n    \tstep.done = formScope.createForm.$valid;\r\n    \tif(!step.done) {\r\n    \t\tangular.forEach(formScope.createForm.$error, function(arr){\r\n    \t\t\tarr.forEach(function(ctrl){ ctrl.$setViewValue(\"\"); });\r\n    \t\t});\r\n    \t\treturn;\r\n    \t}\r\n    \tvar data = formScope.getValues();\r\n    \tinit.create_scene(data, function(res){\r\n    \t\t$$$storage.setSessionStorage('scene_page_classroom', '');\r\n    \t\t$location.url(\"/desktop/scene\");\r\n    \t});\r\n    });\r\n\r\n    var countArr = [0, 0, 0];\r\n\t$scope.$on(\"selectStepChange\", function(e, arg){\r\n\t\tvar index = arg.index;\r\n\t\t$scope.currentIndex = index;\r\n\t\tcountArr[index]++;\r\n\t\tif(countArr[index] > 1) {\r\n\t\t\t$scope.$broadcast(\"deploy:step\" + index + \".refresh\");\r\n\t\t}\r\n\t});\r\n}])\r\n// 第一步：导入模板镜像\r\n.controller('importImageStepController', ['$scope', '$modal', 'SystemDeploy', '$timeout', function($scope, $modal, init, $timeout){\r\n\t// = 导入模板镜像 =\r\n    // 扫描后产生的镜像列表\r\n    $scope.imglist = [];\r\n    // 选中的镜像\r\n\tvar autoSelect = true;\r\n    $scope.selectedSysImage;\r\n\r\n\r\n    $scope.listSystemImages = function(){\r\n    \tinit.list_system_images(function(res){\r\n    \t\tvar imgmap = {};\r\n    \t\tangular.forEach($scope.imglist, function(img){\r\n    \t\t\timgmap[img.name] = img;\r\n    \t\t});\r\n    \t\tangular.forEach(res.system_image, function(img){\r\n    \t\t\tif(img.name in imgmap) {\r\n    \t\t\t\tangular.extend(imgmap[img.name], img);\r\n    \t\t\t} else {\r\n    \t\t\t\timg.filename = img.name;\r\n    \t\t\t\t$scope.imglist.push(img);\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t\tif(autoSelect) {\r\n\t\t\t\t$scope.selectedSysImage = $scope.imglist[0];\r\n\t\t\t}\r\n    \t}).$promise.finally(function(){\r\n    \t\t$scope.loading = false;\r\n    \t});\r\n    \t$scope.loading = true;\r\n    };\r\n\r\n    $scope.selectSysImage = function(img){\r\n    \t$scope.selectedSysImage = img;\r\n\t\t$scope.autoSelect = false;\r\n    };\r\n\r\n    $scope.importByServer = function(){\r\n    \t$modal.open({\r\n    \t\ttemplateUrl: \"/views/vdi/dialog/system/system_deploy_import_by_server.html\",\r\n    \t\tcontroller: \"importByServerController as ctrl\"\r\n    \t}).result.then(function(imgs){\r\n    \t\t(imgs.length > 0) && $scope.listSystemImages();\r\n    \t});\r\n    };\r\n\r\n    $scope.listSystemImages();\r\n\r\n    $scope.$on(\"finishUpload\", function(e, suc, filename){\r\n        $scope.listSystemImages();\r\n    });\r\n\r\n    $scope.$on(\"deploy:step0.refresh\", function(){\r\n    \t$scope.listSystemImages();\r\n    });\r\n}])\r\n// 第二步：注册教学模板\r\n.controller('registerTeachTemplateStepController', [\r\n\t'$scope', '$interval', '$modal', 'SystemDeploy', \"registerTemplate\", \"TeachTemplate\", \"HardwareTemplate\", \"SystemISO\", \"Admin\", \"$$$os_types\",\"$$$I18N\", \"UserRole\",\"Network\", \"virtualHost\", \"networkWithHost\", \"$rootScope\",\r\n\tfunction($scope, $interval, $modal, init, registerTemplate, TeachTemplate, hardware, iso, admin, $$$os_types,$$$I18N, UserRole, network, virtualHost, networkWithHost, $root){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength = 2;\r\n\t$scope.max_namelength = 20;\r\n\t$scope.type = '1';\r\n\t$scope.name = \"default\";\r\n\t$scope.types1 = [{name: $$$I18N.get('不分配'), value: 'none'}];\r\n\t$scope.types2 = [{name: $$$I18N.get('系统分配'), value: 'auto'},{name: $$$I18N.get('固定IP'), value: 'static'}];\r\n\t$scope.types = $scope.types2;\r\n\t$scope.bind_ip_type = $scope.types2[0];\r\n\r\n\t// controller 实例化的时候不应当获取数据，每次 $scope 收到 deploy:set 事件的时候初始化\r\n\tfunction loadData(){\r\n\t\tadmin.query(function(res){\r\n\t\t\t$scope.users = res.users;\r\n\t\t\tangular.forEach($scope.users, function(item){\r\n\t\t\t\tif(item.name === user.name)\r\n\t\t\t\t\t$scope.owner = item;\r\n\t\t\t})\r\n\t\t});\r\n\t\tregisterTemplate.query(function(res){\r\n\t\t\t$scope.sys_isos = res.system_image;\r\n\t\t\tif($scope.selectIsoName && !selectIsoByName($scope.selectIsoName)) {\r\n\t\t\t\t$scope.sys_iso = res.system_image[0];\r\n\t\t\t}\r\n\t\t\t$scope.old_data_isos = res.data_image;\r\n\t\t\tif($scope.sys_iso){\r\n\t\t\t\t$scope.getDataImgs($scope.sys_iso);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\t$scope.filterDataISO = function(data_iso, data_iso2){\r\n\t\tif(data_iso){\r\n\t\t\t$scope.data_isos2 = $scope.data_isos.filter(function(item){ return item.name !== data_iso.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos2 = $scope.data_isos;\r\n\t\t}\r\n\t\tif(data_iso2){\r\n\t\t\t$scope.data_isos1 = $scope.data_isos.filter(function(item){ return item.name !== data_iso2.name });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.data_isos1 = $scope.data_isos;\r\n\t\t}\r\n\t};\r\n\t$scope.getDataImgs = function(systemImg, is_init){\r\n\t\tif(systemImg){\r\n\t\t\tthis.data_iso = undefined;\r\n\t\t\tthis.data_iso2 = undefined;\r\n\t\t\t$scope.data_isos = $scope.data_isos2 = $scope.data_isos1 = $scope.old_data_isos.filter(function(item){ return item.virtual_type == systemImg.virtual_type });\r\n\t\t\t// $scope.data_iso = $scope.data_isos[0];\r\n\t\t\t// $scope.data_iso2 = $scope.data_isos[0];\r\n\t\t\t$scope.getVirtualHost(systemImg.virtual_type, systemImg.rbd_enabled);\t\t\t\r\n\t\t}\r\n\t};\r\n\r\n\tvar lastType;\r\n\t$scope.getVirtualHost = function (type, rbd_enabled){\r\n\t\tif(type === lastType) { return; }\r\n\t\t$scope.host_loading = true;\r\n\t\tvirtualHost.query({virtual_type: type, rbd_enabled: rbd_enabled}, function(res){\r\n\t\t\t$scope.host_loading = false;\r\n\t\t\t$scope.hosts = res.result;\r\n\t\t\t$scope.host = $scope.hosts[0];\r\n\t\t\t$scope.getNetwork($scope.host);\r\n\t\t\tlastType = type;\r\n\t\t}, function(){\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.os_types = $$$os_types.filter(function(item){ return item.key!==\"package\" });\r\n\t$scope.os_type = $scope.os_types[0];\r\n\t// $scope.enable_gpu = false;\r\n\t$scope.bind_ip_type = \"static\";\r\n\r\n\t$scope.switchIps = function(subnet,_scope){\r\n\t\t// _scope.bind_ip_loading = true;\r\n\t\tif(subnet){\r\n\t\t\t// getIps(subnet.id, _scope);\r\n\t\t\t_scope.types = _scope.types2;\r\n\t\t\t_scope.bind_ip_type = _scope.types2[0];\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.types = _scope.types1;\r\n\t\t\t_scope.band_ips = [];\r\n\t\t\t_scope.bind_ip_type = _scope.types1[0];\r\n\t\t\t// _scope.bind_ip_loading = false;\r\n\t\t}\r\n\t};\r\n\tfunction getSubnets(Network,_scope){\r\n\t\tif(Network.subnets.length){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\t$scope.bind_ip_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t_scope.subnets = res.result;\r\n\t\t\t\t_scope.subnet = _scope.subnets[0];\r\n\t\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\t_scope.subnets = [];\r\n\t\t\t_scope.subnet = null;\r\n\t\t\t_scope.switchIps(_scope.subnet, _scope);\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.getNetwork = function(host){\r\n\t\tif(host){\r\n\t\t\tnetworkWithHost.query({host: host.host_uuid}, function(res){\r\n\t\t\t\t// $scope.networks = res.result.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t\t$scope.networks = res.result;\r\n\t\t\t\t$scope.network = $scope.networks[0];\r\n\t\t\t\tgetSubnets($scope.network, $scope);\r\n\t\t\t}, function(){});\r\n\t\t}\r\n\r\n\t}\r\n\t$scope.switchSubnet = function(val, _scope){\r\n\t\tgetSubnets(val,_scope);\r\n\t}\r\n\r\n\t$scope.ok = function(callback){\r\n\t\t// if(this.bind_ip_type.value === 'static' && this.bind_ip === '无可用IP'){\r\n\t\t// \t$.bigBox({\r\n\t\t// \t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t// \t\tcontent\t: $$$I18N.get(\"hasStaticIP_TIP\"),\r\n\t\t// \t\ttimeout\t: 6000\r\n\t\t// \t});\r\n\t\t// } else{\r\n\t\t\t$scope.submiting = true ;\r\n\t\t\t$scope.afterSubmiting =false ;\r\n\t\t\tvar _ip = this.bind_ip_type.value === 'static' ? this.bind_ip.value : undefined;\r\n\t\t\tvar host_uuid = this.host.host_uuid;\r\n\t\t\tvar postData = {\r\n\t\t\t\tsystem_image_file: this.sys_iso,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tos: this.os_type.key,\r\n\t\t\t\towner: this.owner.id,\r\n\t\t\t\tnetwork: this.network.id,\r\n\t\t\t\tsubnet: this.subnet?this.subnet.id:\"\",\r\n\t\t\t\tband_ip: _ip,\r\n\t\t\t\tband_type: this.bind_ip_type.value,\r\n\t\t\t\thost_uuid: host_uuid\r\n\t\t\t};\r\n\t\t\tinit.register_template(postData, function(res){\r\n\t\t\t\t$scope.submiting = false;\r\n\t\t\t\t$scope.afterSubmiting = true;\r\n\t\t\t\tcallback({\r\n\t\t\t\t\timage_id: res.image_id,\r\n\t\t\t\t\tservers: [{uuid: host_uuid}]\r\n\t\t\t\t});\r\n\t\t\t}, function(){\r\n\t\t\t\tcallback(null);\r\n\t\t\t\t$scope.submiting = false ;\r\n\t\t\t\t$scope.afterSubmiting = false ;\r\n\t\t\t});\r\n\t\t// }\r\n\t};\r\n\r\n    \r\n    $scope.$on(\"deploy:set\", function(e, name, value){\r\n    \tif(name === \"system-image\") {\r\n    \t\t$scope.selectIsoName = value;\r\n    \t\tloadData();\r\n    \t\t// if(selectIsoByName(value)) {\r\n    \t\t// \t$scope.getVirtualHost($scope.sys_iso.virtual_type, $scope.sys_iso.rbd_enabled);\r\n    \t\t// }\r\n    \t}\r\n    });\r\n\r\n    function selectIsoByName(name) {\r\n    \tvar iso = $scope.sys_iso;\r\n    \tvar hit = false;\r\n    \tif(iso && iso.name === name) {\r\n    \t\treturn true;\r\n    \t}\r\n    \tangular.forEach($scope.sys_isos, function(iso){\r\n    \t\tif(iso.name === name) {\r\n    \t\t\tthis.sys_iso = iso;\r\n    \t\t\thit = true;\r\n    \t\t}\r\n    \t}, $scope);\r\n    \treturn hit;\r\n    }\r\n\r\n    $scope.showTemplateBlock = function(data, browserRefresh){\r\n    \t// 切换视图\r\n    \t$scope.registerFormLoading = true;\r\n    \t$scope.loadingTeachTemplates = true;\r\n    \tTeachTemplate.query({ids: [data.image_id]}, function(res){\r\n    \t\tvar teachTemplates = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\r\n    \t\tteachTemplates.forEach(function(row){\r\n    \t\t\tvar os = $$$os_types.filter(function(item){ return item.key === row.os_type })[0];\r\n    \t\t\tos && os.icon && (row.icon = os.icon);\r\n    \t\t\tif(row.os_type.indexOf(\"_64\")>-1)\r\n    \t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"_64\"));\r\n    \t\t\tif(row.os_type.indexOf(\"(64 bit)\")>-1)\r\n    \t\t\t\trow.os_type = row.os_type.slice(0,row.os_type.indexOf(\"(64 bit)\"));\r\n    \t\t});\r\n    \t\tteachTemplates.sort(function(a,b){ return a.created_at>b.created_at? -1:1 });\r\n\r\n    \t\t$scope.teachTemplates = teachTemplates;\r\n    \t\tif(testTempateCreateDone(teachTemplates)) {\r\n    \t\t\tdata.xp = isXP(teachTemplates[0]);\r\n    \t\t\tonCreateTemplateDone(data, browserRefresh);\r\n    \t\t} else {\r\n    \t\t\tif(browserRefresh) {\r\n    \t\t\t\t$scope.$eval(\"knowStep()\");\r\n    \t\t\t}\r\n    \t\t\tloopTemplateStatus(data).then(function(v){\r\n    \t\t\t\tdata.xp = v;\r\n    \t\t\t\tonCreateTemplateDone(data, browserRefresh);\r\n    \t\t\t}).catch(function(err){\r\n    \t\t\t\t$.bigBox({\r\n    \t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n    \t\t\t\t\tcolor : \"#C46A69\",\r\n    \t\t\t\t\tcontent\t: err,\r\n    \t\t\t\t\ttimeout\t: 6000\r\n    \t\t\t\t});\r\n    \t\t\t});\r\n    \t\t}\r\n    \t}).$promise.finally(function(){\r\n    \t\t$scope.loadingTeachTemplates = false;\r\n    \t});\r\n    };\r\n\r\n\t$scope.delete = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除教学模板'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_TEMPLATE_T' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: [\"$scope\", \"$modalInstance\", function(modalScope, $modalInstance){\r\n\t\t\t\tvar template = TeachTemplate;\r\n\t\t\t\tvar rows = [item];\r\n\t\t\t\tmodalScope.name = rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\tmodalScope.ok = function(){\r\n\t\t\t\t\ttemplate.delete({ id: [item.id] }, function(res){\r\n\t                \t$scope.$eval(\"setStep(0)\");\r\n\t                \t$scope.registerFormLoading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\tmodalScope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t}],\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n    function loopTemplateStatus(res){\r\n    \tvar timer = $interval(function(){\r\n\t\t\tvar root = $scope.$root;\r\n\t\t\t// TODO: 某些情况这里还是会报错\r\n\t\t\tif(root) {\r\n\t\t\t\troot.$broadcast(\"imageIDS\", [res.image_id]);\r\n\t\t\t} else {\r\n\t\t\t\t$interval.cancel(timer);\r\n\t\t\t\ttimer = null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}, 1000);\r\n\t\treturn new Promise(function(resolve, reject){\r\n\t\t\tvar dereg = $scope.$on(\"imagesRowsUpdate\", function(e, data){\r\n\t\t\t\tvar templates = $scope.teachTemplates;\r\n\t\t\t\tvar _rows = {};\r\n\t\t\t\ttemplates.forEach(function(item){\r\n\t\t\t\t\t_rows[item.id] = item;\r\n\t\t\t\t});\r\n\t\t\t\tdata.forEach(function(item){\r\n\t\t\t\t\tif(_rows[item.id]){\r\n\t\t\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\ttemplates = templates.filter(function(item){ return item.type_code ===1 });\r\n\t\t\t\ttemplates.forEach(function(row){\r\n\t\t\t\t\tif(row.sync_status){\r\n\t\t\t\t\t\tvar updateInfor = row.sync_status.filter(function(item){ return item.type === \"image\" });\r\n\t\t\t\t\t\tif(updateInfor.length!==0)\r\n\t\t\t\t\t\t\trow.updateSize = (updateInfor[0].size/1024/1024/1024).toFixed(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.teachTemplates = templates;\r\n\t\t\t\tif(testTempateCreateDone(templates)) {\r\n\t\t\t\t\t$interval.cancel(timer);\r\n\t\t\t\t\tdereg();\r\n\t\t\t\t\ttimer = null;\r\n\t\t\t\t\tresolve(isXP(templates[0]));\r\n\t\t\t\t}\r\n\t\t\t\tif(templates[0].status === \"register failed\") {\r\n\t\t\t\t\t$interval.cancel(timer);\r\n\t\t\t\t\tdereg();\r\n\t\t\t\t\ttimer = null;\r\n\t\t\t\t\treject($$$I18N.get(\"REGISTER_FAILED\"));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t$scope.$on(\"$destroy\", function(){\r\n\t\t\ttimer && $interval.cancel(timer);\r\n\t\t});\r\n    };\r\n\r\n    function testTempateCreateDone(templates){\r\n    \treturn templates && templates.length > 0 && templates[0].status === \"alive\";\r\n    }\r\n\r\n    function onCreateTemplateDone(res, browserRefresh){\r\n    \tvar root = $scope.$root;\r\n    \troot.$broadcast(\"currentStepChange\", 2);\r\n\t\troot.$broadcast(\"deploy:set\", \"image_id\", res.image_id);\r\n\t\troot.$broadcast(\"deploy:set\", \"servers\", res.servers);\r\n\t\troot.$broadcast(\"deploy:set\", \"isxp\", res.xp);\r\n\t\tif(res.max_instance) {\r\n\t\t\troot.$broadcast(\"deploy:set\", \"max_instance\", res.max_instance);\r\n\t\t} else {\r\n\t\t\t// force trigger request `/thor/init/quickstart`\r\n\t\t\troot.$broadcast(\"deploy:set\", \"max_instance\", false);\r\n\t\t}\r\n\t\t\r\n\t\t$scope.registerFormLoading = false;\r\n\t\tif(browserRefresh === true) {\r\n\t\t\t$scope.$eval(\"knowStep()\");\r\n\t\t}\r\n    }\r\n\r\n    function isXP(template) {\r\n    \tvar ostype = template.os_type || \"\";\r\n    \treturn /^Windows\\s*XP/.test(ostype);\r\n    }\r\n    // 快速部署过程中浏览器重新刷新，自动进入轮训\r\n    $scope.$on(\"browser refresh\", function(e, step, res){\r\n    \tif(step !== 1) { return; }\r\n    \t// 显示模板\r\n    \t$scope.showTemplateBlock(res, true);\r\n    });\r\n}])\r\n// 第三步：创建教学场景\r\n.controller('createTeachSceneController', [\r\n\t'$scope', '$modal', 'SystemDeploy', \"TeachTemplate\", \"SchoolRoom\", \"HardwareTemplate\", \"SystemISO\", \"Admin\", \"$$$os_types\",\"$$$I18N\", \"UserRole\",\"Network\", \"virtualHost\", \"networkWithHost\", \"$rootScope\", \"$q\",\r\n\tfunction($scope, $modal, init, teach, SchoolRoom, hardware, iso, admin, $$$os_types,$$$I18N, UserRole, network, virtualHost, networkWithHost, $root, $q){\r\n\t\t$scope.min_namelength=2;\r\n\t\t$scope.max_namelength=20;\r\n\r\n\t\tvar data = $scope.data = {\r\n\t\t\tname: \"default\",\r\n\t\t\tcpu_num: 2,\r\n\t\t\tmemory_mb: 2,\r\n\t\t\tsystem_gb: 20,\r\n\t\t\tkwargs: {\r\n\t\t\t\tdata_rollback: 1,\r\n\t\t\t\thostname_beginwith: 1,\r\n\t\t\t\thostname_prefix: \"PC\",\r\n\t\t\t\thostname_type: 1,\r\n\t\t\t\tis_exam: false,\r\n\t\t\t\trollback: 1,\r\n\t\t\t\tusb_redir: true\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t$scope.btndisks = [];\r\n\t\t$scope.master = {};\r\n\r\n\t\tSchoolRoom.querywithSimple(function(res){\r\n\t\t\t$scope.classrooms = res.pools_.concat([{\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: $$$I18N.get(\"新增自定义教室\")\r\n\t\t\t}]);\r\n\t\t\t$scope.classroom = $scope.classrooms[0];\r\n\t\t});\r\n\r\n\t\thardware.query(function(res){\r\n\t\t\t$scope.hardwareList = res.result.concat([{\r\n\t\t\t\tid: -1,\r\n\t\t\t\tname: $$$I18N.get(\"新增自定义模板\")\r\n\t\t\t}]);\r\n\t\t\t$scope.hardware = $scope.hardwareList[0];\r\n\t\t});\r\n\r\n\t\tnetwork.query(function(data){\r\n\t\t\t$scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t\t$scope.data.network = $scope.networks[0];\r\n\t\t\tgetSubnets($scope.data.network);\r\n\t\t});\r\n\r\n\t\t$scope.addbtndisk = function(){\r\n\t\t\t$scope.btndisks.push({local_gb: 5});\r\n\t\t};\r\n\t\t$scope.minusbtndisk = function(){\r\n\t\t\t// var idx = $scope.btndisks.indexOf(i)\r\n\t\t\t$scope.btndisks.splice($scope.btndisks.length-1,1);\r\n\t\t};\r\n\r\n\t\t$scope.switchSubnet = function(val){\r\n\t\t\tgetSubnets(val);\r\n\t\t};\r\n\t\t\t\r\n\r\n\t\tfunction getSubnets(Network){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t$scope.subnets = res.result;\r\n\t\t\t\t$scope.data.subnet = $scope.subnets[0];\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\t\r\n\t\t\r\n\t\t$scope.getValues = function(){\r\n\t\t\tvar values = angular.extend({\r\n\t\t\t\tname: data.name,\r\n\t\t\t\tinstance_max: data.instance_max,\r\n\t\t\t\tservers: data.servers,\r\n\t\t\t\timage_id: data.image_id\r\n\t\t\t}, data.kwargs);\r\n\t\t\tif($scope.classroom.id === -1) {\r\n\t\t\t\tangular.extend(values, {\r\n\t\t\t\t\tpool_name: data.classroomName,\r\n\t\t\t\t\tdesc: data.desc,\r\n\t\t\t\t\tnetwork_id: data.network.id,\r\n\t\t\t\t\tsubnet_id: data.subnet.id\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvalues.pool = $scope.classroom.id;\r\n\t\t\t}\r\n\t\t\tif($scope.hardware.id === -1) {\r\n\t\t\t\tangular.extend(values, {\r\n\t\t\t\t\tinstance_type_name: data.hardwareName,\r\n\t\t\t\t\tcpu_num: data.cpu_num,\r\n\t\t\t\t\tmemory_mb: data.memory_mb * 1024,\r\n\t\t\t\t\tsystem_gb: data.system_gb\r\n\t\t\t\t});\r\n\t\t\t\tangular.forEach([0, 1], function(i){\r\n\t\t\t\t\tvar disk = $scope.btndisks[i];\r\n\t\t\t\t\tif(i === 0) {\r\n\t\t\t\t\t\tvalues.local_gb = disk ? disk.local_gb : 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalues['local_gb' + i] = disk ? disk.local_gb : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvalues.instance_type = $scope.hardware.id;\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\t\t};\r\n\r\n\t\t$scope.showAdvanceSceneOptionDialog = function(){\r\n\t\t\tvar isxp = data.isxp;\r\n\t\t    $modal.open({\r\n\t\t        templateUrl: \"views/vdi/dialog/system/system_deploy_advance_options.html\",\r\n\t\t        controller: \"teachSceneOptionDialog\",\r\n\t\t        resolve: {\r\n\t\t        \tisxp: function(){ return isxp; },\r\n\t\t        \tkwargs: function(){ return data.kwargs; }\r\n\t\t        }\r\n\t\t    }).result.then(function(options){\r\n\t\t    \tdata.kwargs = options;\r\n\t\t    });\r\n\t\t};\r\n\r\n\t\t$scope.getMaxInstance = function(){\r\n\t\t\tinit.quickstart(function(res){\r\n\t\t\t\tdata.max_instance = res.max_instance;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\t$scope.$on(\"deploy:set\", function(e, name, value){\r\n\t\t\tdata[name] = value;\r\n\t\t\tif(value === false && name === \"max_instance\") {\r\n\t\t\t\t$scope.getMaxInstance();\r\n\t\t\t}\r\n\t\t});\r\n\t}])\r\n// 高级 dialog\r\n.controller(\"teachSceneOptionDialog\", [\"$scope\", \"$modalInstance\", \"$rootScope\", \"localize\", \"isxp\", \"kwargs\", \"PersonDesktop\", function(scope, modalInstance, rootScope, localize, isxp, kwargs, PersonDesktop){\r\n\tvar defaults = {\r\n        usb_redir: true,\r\n        usb_version: isxp ? '2.0' : '3.0',\r\n        rollback: '1',\r\n        rollback_weekday: '1',\r\n        rollback_monthday: '1',\r\n        data_rollback: '1',\r\n        data_rollback_weekday: '1',\r\n        data_rollback_monthday: '1',\r\n        hostname_type: '1',\r\n        hostname_prefix: 'PC',\r\n        hostname_beginwith: 1,\r\n        username_type: '1',\r\n        username_prefix: 'K',\r\n        username_beginwith: 1,\r\n        isxp: isxp,\r\n        enable_share: false\r\n    };\r\n\tvar data = scope.data = angular.extend(defaults, kwargs || {});\r\n\tscope.loading_server = true;\r\n\tPersonDesktop.share_servers(function(res){\r\n\t\tscope.loading_server = false;\r\n\t\tvar servers = [];\r\n\t\tres.servers.forEach(function(server){\r\n\t\t\tserver.nets.forEach(function(net){\r\n\t\t\t\tservers.push({id: server.id, net: {ip_address: net.ip_address, network_id: net.network_id, subnet_id: net.subnet_id}})\r\n\t\t\t})\r\n\t\t});\r\n\t\tscope.share_servers = servers;\r\n\t\tscope.data.share_server = scope.share_servers[0];\r\n\t})\r\n\r\n\tscope.USBRedictTips = localize.localizeText(\"USBRedictTips\");\r\n\tscope.auto_mountPersonalTips = localize.localizeText(\"auto_mountPersonalTips\");\r\n    data.RDP = kwargs.is_exam;\r\n    if(kwargs.username_prefix) {\r\n    \tdata.MORE = true;\r\n    \tangular.forEach([\"username_prefix\", \"username_beginwith\", \"username_type\"], function(s){\r\n    \t\tscope[s] = kwargs[s];\r\n    \t});\r\n    }\r\n    if(kwargs.hostname_prefix) {\r\n    \tangular.forEach([\"hostname_beginwith\", \"hostname_prefix\", \"hostname_type\"], function(s){\r\n    \t\tscope[s] = kwargs[s];\r\n    \t});\r\n    }\r\n    angular.forEach({\r\n    \trollback_weekday: \"2\",\r\n    \trollback_monthday: \"3\",\r\n    }, function(v, k){\r\n    \tif(kwargs.hasOwnProperty(k)) {\r\n    \t\tscope.rollback = v;\r\n    \t\tscope[k] = kwargs[k];\r\n    \t}\r\n    });\r\n    angular.forEach({\r\n    \tdata_rollback_weekday: \"2\",\r\n    \tdata_rollback_monthday: \"3\",\r\n    }, function(v, k){\r\n    \tif(kwargs.hasOwnProperty(k)) {\r\n    \t\tscope.data_rollback = v;\r\n    \t\tscope[k] = kwargs[k];\r\n    \t}\r\n    });\r\n    scope.addZero = function(len,str_begin,str_end){\r\n        if(str_end && str_begin){\r\n            var end_len = str_end.toString().length;\r\n            if(end_len < len){\r\n                return  str_begin + new Array(len - end_len+1).join(\"0\") + str_end;\r\n            }else{\r\n                return str_begin + str_end;\r\n            }\r\n        }\r\n    };\r\n    \r\n    scope.ok = function () {\r\n        var postData = {};\r\n        // 这里的 this 引用了真正的 scope\r\n        postData.enable_share = data.enable_share,\r\n        postData.share_server_ip = data.enable_share ? data.share_server.net.ip_address : undefined;\r\n        postData.share_server_id =  data.enable_share ? data.share_server.id : undefined;\r\n        postData.usb_redir    = data.usb_redir;\r\n        postData.usb_version  = data.usb_redir ? data.usb_version : null;\r\n        postData.rollback      = data.rollback;\r\n        postData.data_rollback = data.data_rollback;\r\n        if(postData.rollback === \"2\"){\r\n            postData.rollback_weekday = data.rollback_weekday;\r\n        }\r\n        if(postData.rollback === \"3\"){\r\n            postData.rollback_monthday = data.rollback_monthday;\r\n        }\r\n        if(postData.data_rollback === \"2\"){\r\n            postData.data_rollback_weekday = data.data_rollback_weekday;\r\n        }\r\n        if(postData.data_rollback === \"3\"){\r\n            postData.data_rollback_monthday = data.data_rollback_monthday;\r\n        }\r\n\r\n        angular.forEach([\"hostname_beginwith\", \"hostname_prefix\", \"hostname_type\"], function(s){\r\n    \t\tpostData[s] = data[s];\r\n    \t});\r\n        postData.is_exam = !!data.RDP;\r\n        if(data.MORE){\r\n            angular.forEach([\"username_prefix\", \"username_beginwith\", \"username_type\"], function(s){\r\n            \tpostData[s] = data[s];\r\n            });\r\n        }\r\n        rootScope.$broadcast(\"scene-options\", postData);\r\n        modalInstance.close(postData);\r\n    };\r\n    scope.close = function () {\r\n        modalInstance.dismiss();\r\n    };\r\n}])\r\n.controller(\"importByServerController\", [\"$scope\", \"$timeout\", \"$modalInstance\", \"SystemDeploy\", function($scope, $timeout, $modalInstance, init){\r\n\tvar importedImgs = [];\r\n\tvar self = this;\r\n\tself.selected = null;\r\n\tself.remote_imgs = [];\r\n\tself.loading = false;\r\n\r\n\tself.refreshImgs = function(){\r\n\t\tinit.scan_iso(function (res) {\r\n\t\t\tvar imgs = {};\r\n\t\t    angular.forEach(self.remote_imgs, function(img){\r\n\t\t    \timgs[img.path] = img;\r\n\t\t    });\r\n\t\t    angular.forEach(res.result, function(img){\r\n\t\t    \tif(imgs.hasOwnProperty(img.path)) {\r\n\t\t    \t\tangular.extend(imgs[img.path], img);\r\n\t\t    \t} else {\r\n\t\t    \t\tself.remote_imgs.push(img);\r\n\t\t    \t}\r\n\t\t    });\r\n\t\t}).$promise.finally(function(){\r\n\t\t\tself.loading = false;\r\n\t\t});\r\n\t\tself.loading = true;\r\n\t};\r\n\r\n\tself.importSelected = function () {\r\n\t\tvar img = self.selected;\r\n\t\tif(!img) { return; }\r\n\t    init.import_iso({\r\n\t        upload_type: 'local',\r\n\t        src_file: [img.path]\r\n\t    }, function (res) {\r\n\t    \tloopImportProgress(angular.copy(img), function(){\r\n\t    \t\timportedImgs.push(img);\r\n\t    \t\tself.is_importing = false;\r\n\t    \t\timg.imported = true;\r\n\t    \t\tdelete self.selected;\r\n\t    \t\tself.close();\r\n\t    \t}, function(){\r\n\t    \t\tself.is_importing = false;\r\n\t    \t});\r\n\t    }, function(){\r\n\t    \tself.is_importing = false;\r\n\t    });\r\n\t    self.is_importing = true;\r\n\t};\r\n\t\r\n\tself.close = function(){\r\n\t\t$modalInstance.close(importedImgs);\r\n\t};\r\n\r\n\tself.isAjaxOn = function(){\r\n\t\treturn self.loading || self.is_importing;\r\n\t};\r\n\r\n\tself.showRemain = function(){\r\n\t\tvar yes = self.is_importing;\r\n\t\tyes = yes && self.hasOwnProperty(\"remain\");\r\n\t\tif(yes) {\r\n\t\t\tyes = self.remain.hasOwnProperty(\"hour\");\r\n\t\t}\r\n\t\treturn yes;\r\n\t};\r\n\r\n\tself.refreshImgs();\r\n\r\n\tfunction loopImportProgress(img, doneCallback, failCallback){\r\n\t\tvar time = self.remain = {};\r\n\t\timg.total = img.size;\r\n\t\timg.startTime = Date.now();\r\n\t\tvar hasFeature = !!console.time;\r\n\t\tvar label = \"[upload \" + img.path + \"]\";\r\n\t\thasFeature && console.time(label);\r\n\t\tloop();\r\n\t\tfunction loop(){\r\n\t\t\tinit.import_progress(function(res){\r\n\t\t\t\tvar filemap = {};\r\n\t\t\t\tangular.forEach(res.result, function(item){\r\n\t\t\t\t\tif(item.filename === img.filename) {\r\n\t\t\t\t\t\tangular.extend(img, item);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// 还没有开始导入，此时不显示数据\r\n\t\t\t\tif(img.size === 0) {\r\n\t\t\t\t\t$timeout(loop, 1000);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar remainSize = img.total - img.size;\r\n\t\t\t\tvar speed = img.size / (Date.now() - img.startTime);\r\n\t\t\t\tvar remainTime = Math.floor(remainSize / speed / 1000);\r\n\t\t\t\ttime.hour = Math.floor(remainTime / 3600);\r\n\t\t\t\ttime.minute = Math.floor(remainTime / 60);\r\n\t\t\t\ttime.second = Math.floor(remainTime % 60);\r\n\t\t\t\tif(img.total === img.size) {\r\n\t\t\t\t\thasFeature && console.timeEnd(label);\r\n\t\t\t\t\tdoneCallback();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$timeout(loop, 1000);\r\n\t\t\t\t}\r\n\t\t\t}, failCallback);\r\n\t\t}\r\n\t}\r\n}])\r\n.controller(\"quickstartController\", [\"$scope\", \"$element\", \"$location\", function($scope, $element, $location){\r\n\tvar menuWidth = 220;\r\n\t// 循环计时器\r\n\tvar updateTimer;\r\n\t// 缓存的样式\r\n\tvar oldContentStyles = {};\r\n\tvar oldArrowStyles = {};\r\n\t// 是否需要手动点击快速部署父菜单的标记\r\n\tvar opened = false;\r\n\t$scope.ok = function(){\r\n\t\tcleanDOM();\r\n\t\t$location.url(\"/system/deploy\");\r\n\t};\r\n\t$scope.close = function(){\r\n\t\tcleanDOM();\r\n\t\t$location.url(\"/summary\");\r\n\t};\r\n\t$scope.$on(\"NOAUTH\", cleanDOM);\r\n\r\n    updatePosition();\r\n\r\n\tfunction updatePosition(){\r\n\t\tvar alignTarget = $(\"li[nav-title='快速部署']\");\r\n\t\tif(alignTarget.length === 0) {\r\n\t\t\tupdateTimer = setTimeout(updatePosition, 100);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// 高亮 快速部署 菜单项\r\n\t\talignTarget.addClass(\"left-menu-item-on\");\r\n\t\t// 如果父菜单没有展开，手动展开\r\n\t\tvar pmenu = alignTarget.parents(\"li\");\r\n\t\tif(!pmenu.hasClass(\"open\") && !opened) {\r\n\t\t\tpmenu.children(\"a\")[0].click();\r\n\t\t\topened = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tif(!pmenu.hasClass(\"opened\")) {\r\n\t\t\t\t\topened = false;\r\n\t\t\t\t}\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t\tvar targetOffset = alignTarget.offset();\r\n\t\tvar totalWidth = $(window).width();\r\n\t\tvar totalHeight = $(window).height();\r\n\t    var $content = $(\"#quickMaskModel .content\");\r\n\t    var $arrow = $(\"#quickMaskModel .jiantou\");\r\n\t    if(!$content || !$arrow) { return; }\r\n\t    // 水平垂直居中\r\n\t    var contentStyles = {\r\n\t\t\t'margin-left': $content.outerWidth() / -2,\r\n\t\t\t'margin-top': $content.outerHeight() / -2\r\n\t\t};\r\n\t\tif(!equalsRoughly(contentStyles, oldContentStyles)) {\r\n\t\t\t$content.css(contentStyles);\r\n\t\t\toldContentStyles = contentStyles;\r\n\t\t}\r\n\t\t$arrow[totalWidth < 979 ? 'hide' : 'show']();\r\n\t\tvar btn = $content.find(\".btn-primary\");\r\n\t\tvar btnOffset = btn.offset();\r\n\t\tvar contentLeft = $content.offset().left;\r\n\t\tvar arrowTop = btnOffset.top + btn.outerHeight() + 5;\r\n\t\t// var arrowRight = (btnOffset.left - contentLeft) / 2 + contentLeft;\r\n\t\tvar arrowRight = btnOffset.left + btn.outerWidth() / 2;\r\n\t\tif(totalWidth > 1460) {\r\n\t\t\tarrowRight = $content.offset().left + parseInt($content.css(\"padding-left\"));\r\n\t\t}\r\n\t\tvar arrowWidth = arrowRight - menuWidth;\r\n\t\tvar arrowHeight = targetOffset.top + alignTarget.outerHeight() / 2 - arrowTop;\r\n\t\tvar arrowStyles = {\r\n\t\t\tleft: menuWidth,\r\n\t\t\ttop: arrowTop + 6,\r\n\t\t\twidth: arrowWidth,\r\n\t\t\theight: arrowHeight > 0 ? arrowHeight : 0,\r\n\t\t\t\"background-position-x\": totalWidth > 1460 ? \"right\" : \"left\"\r\n\t\t};\r\n\t\t// 仅在计算的样式与之上一次计算的样式不同时才应用样式\r\n\t\tif(!equalsRoughly(arrowStyles, oldArrowStyles)) {\r\n\t\t\t$arrow.css(arrowStyles);\r\n\t\t\toldArrowStyles = arrowStyles;\r\n\t\t}\r\n\t\tupdateTimer = setTimeout(updatePosition, 100);\r\n\t}\r\n\r\n\tfunction cleanDOM() {\r\n\t\t$element.remove();\r\n\t\t$scope.$destroy();\r\n\t\t$(\"li[nav-title='快速部署']\").removeClass(\"left-menu-item-on\");\r\n\t\tclearTimeout(updateTimer);\r\n\t}\r\n\r\n\tfunction equalsRoughly(obj1, obj2) {\r\n\t\tvar eq = true;\r\n\t\tvar keys = Object.keys(obj1);\r\n\t\tangular.forEach(keys, function(key){\r\n\t\t\tvar v1 = obj1[key] || 0;\r\n\t\t\tvar v2 = obj2[key] || 0;\r\n\t\t\tif(typeof v1 !== \"number\" || typeof v2 !== \"number\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(Math.abs(v1 - v2) >= 5) {\r\n\t\t\t\teq = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn eq;\r\n\t}\r\n}])\r\n.controller(\"vdiSystemUSBThroughController\", [\"$scope\", \"$modal\", \"USBPassThrough\",function($scope, $modal,USBPassThrough){\r\n\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\r\n\tvar get_rows = function(){\r\n\t\tUSBPassThrough.query(function(res){\r\n\t\t\t$scope.rows = res.devices_info.sort(function(a,b){ return a.manufacturer>b.manufacturer?1:-1 });\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\tvar _SCOPE = $scope;\r\n\r\n\t$scope.through = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/system/through_add.html\",\r\n\t\t\tcontroller: \"USBthroughDialog\",\r\n\t\t\tscope: $scope,\r\n\t\t\tsize: \"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { throughItem: angular.copy(item) };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(data){\r\n\t\t\tif(data){\r\n\t\t\t\tget_rows();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t$scope.editThrough = function(item){\r\n\t\titem.edit = true;\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/system/through_add.html\",\r\n\t\t\tcontroller: \"USBthroughDialog\",\r\n\t\t\tscope: $scope,\r\n\t\t\tsize: \"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { throughItem: angular.copy(item) };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(data){\r\n\t\t\tif(data){\r\n\t\t\t\tget_rows();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t$scope.cancelThrough = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='取消绑定'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='CANCEL_THROUGH'></p><footer class='text-right'><img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''><button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' ng-if='!loading' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\tcompute_node_id: item.compute_node_id,\r\n\t\t\t\t\t\tidentify: item.identify,\r\n\t\t\t\t\t\tinstance_id: item.instance_id\r\n\t\t\t\t\t}\r\n\t\t\t\t\tUSBPassThrough.cancel(data,function(res){\r\n\t\t\t\t\t\tget_rows();\r\n\t\t\t\t\t\t$modalInstance && $modalInstance.close();\r\n\t\t\t\t\t}).$promise.finally(res => {\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('USBthroughDialog', ['$scope',\"$modalInstance\",\"AutoSnapshot\",\"ResourcePool\", \"params\", \"Scene\",\"TeachDesktop\",\"FenTemplate\",\"$$$I18N\",\"TreeInstances\",\"USBPassThrough\",function($scope,$modalInstance,AutoSnapshot,ResourcePool,params,Scene,TeachDesktop,FenTemplate,$$$I18N,TreeInstances,USBPassThrough){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = params.throughItem;\r\n\tif(!$scope.data.edit){\r\n\t\t$scope.data.type = null;\r\n\t\t$scope.data.scene_id = null;\r\n\t}\r\n\tvar old_instance_id = $scope.data.instance_id;\r\n\t$scope.data.expandedNodes = [];\r\n\t$scope.all_users = [];\r\n\t$scope.selectedUsers = {};\r\n\r\n\t$scope.changeType = function(type, flag){\r\n\t\tif(!flag){\r\n\t\t\t$scope.data.scene_id = null;\r\n\t\t\t$scope.data.instance_id = null;\r\n\t\t\t$scope.data.selected_desktop = null;\r\n\t\t}\r\n\t\tif(type=='2'){\r\n\t\t\tgetScenesDektop();\r\n\t\t}else if(type=='1'){\r\n\t\t\tgetCommonDektop();\r\n\t\t}else{\r\n\t\t\tgetSystemDektop();\r\n\t\t}\r\n\t}\r\n\tif($scope.data.edit){\r\n\t\t$scope.changeType($scope.data.type, true)\r\n\t}\r\n\tfunction getScenesDektop(){\r\n\t\tScene.query(function(res){\r\n\t\t\t$scope.scenes = res.modes.filter(function(item){ return item.virtual_type == 'kvm' });\r\n\t\t\tif($scope.data.scene_id){\r\n\t\t\t\t$scope.data.scene = $scope.scenes.filter(function(item){ return item.id == $scope.data.scene_id })[0];\r\n\t\t\t}else{ $scope.data.scene = $scope.scenes[0]; }\r\n\t\t\t$scope.getTeaches($scope.data.scene);\r\n\t\t},function(){  })\r\n\t}\r\n\t$scope.getTeaches = function(scene){\r\n\t\tif(scene){\r\n\t\t\t$scope.teachLoading = true;\r\n\t\t\tTeachDesktop.query({ id : scene.id },function(res){\r\n\t\t\t\t$scope.teachLoading = false;\r\n\t\t\t\t$scope.teaches = res.result;\r\n\t\t\t\tif($scope.data.instance_id){\r\n\t\t\t\t\t$scope.data.teach = $scope.teaches.filter(function(item){ return item.instance_id == $scope.data.instance_id })[0];\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$scope.data.teach = $scope.teaches[0];\r\n\t\t\t\t}\r\n\t\t\t},function(){ $scope.teachLoading = false; })\r\n\t\t}\r\n\t}\r\n\tfunction getCommonDektop(){\r\n\t\t$scope.loadDesktops = true;\r\n\t\tTreeInstances.query({resource_pool: $scope.data.resource_pool_uuid}, function(res){\r\n\t\t\tvar adminUsers = res.result.filter(function(u){ return u.type=='admin'&&u.desktop_num });\r\n\t\t\tvar adminDesktops = [];\r\n\t\t\tadminUsers.forEach(function(u){\r\n\t\t\t\tu.desktops.forEach(function(desk){adminDesktops.push(desk)})\r\n\t\t\t})\r\n\t\t\tvar datas = [];\r\n\t\t\tif(getAdminNum(adminUsers)){\r\n\t\t\t\tdatas.push({name: $$$I18N.get('管理用户关联桌面'),desktop_num: getAdminNum(adminUsers), desktops: adminDesktops})\r\n\t\t\t}\r\n\t\t\tres.result.forEach(function(item){\r\n\t\t\t\tif(item.type=='common' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else if(item.type=='domain' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else{}\r\n\t\t\t});\r\n\t\t\t$scope.desktops = formatData(removeNoChildrenDeparts(datas),\"children\");\r\n\t\t\tif($scope.data.instance_id){\r\n\t\t\t\t$scope.data.selected_desktop = $scope.all_users.filter(d => {\r\n\t\t\t\t\treturn d.desktop_id === $scope.data.instance_id;\r\n\t\t\t\t})[0];\r\n\t\t\t}\r\n\t\t\t$scope.loadDesktops = false;\r\n\t\t});\r\n\t}\r\n\tfunction getSystemDektop(){\r\n\t\tFenTemplate.query(function(res){\r\n\t\t\t$scope.sys_desktops = res.win_images.concat(res.linux_images).concat(res.other_images);\r\n\t\t\tif($scope.data.instance_id){\r\n\t\t\t\t$scope.data.sys_desktop = $scope.sys_desktops.filter(function(item){ return item.id == $scope.data.instance_id })[0];\r\n\t\t\t}else{\r\n\t\t\t\t$scope.data.sys_desktop = $scope.sys_desktops[0];\r\n\t\t\t}\r\n\t\t\t$scope.data.sys_desktop = $scope.sys_desktops[0];\r\n\t\t},function(){})\r\n\r\n\t}\r\n\r\n\t/* 个人桌面数据拉取及配置 */\r\n\t$scope.desktopsTreeOptions = {\r\n         dirSelectable:false,\r\n         injectClasses:{\r\n         \t\"liSelected\":\"tree-leaf-active\"\r\n         }\r\n    };\r\n\tfunction getAdminNum(rows){\r\n\t\treturn rows.reduce(function(count, item){\r\n\t\t\treturn count + item.desktop_num;\r\n\t\t}, 0);\r\n\t}\r\n\tfunction removeNoChildrenDeparts(data) {\r\n\t\tdata = data.filter(noUserFilter);\r\n\t\tdata.forEach(walk);\r\n\t\treturn data;\r\n\t\tfunction walk(node) {\r\n\t\t\tif(!node.dept_id) { return; }\r\n\t\t\tif(node.children) {\r\n                node.children = node.children.filter(noUserFilter);\r\n                node.children.forEach(walk);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction noUserFilter(node) {\r\n            if(node.dept_id && !node.children && node.desktops.length === 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\tfunction formatData(d,name){\r\n\t\titeration(d,name);\r\n\t\treturn d;\r\n\t}\r\n\tfunction iteration(data,childName,list){\r\n\t\tfor(var i = 0 ; i < data.length ; i++){\r\n\t\t\t$scope.data.expandedNodes.push(data[i]);\r\n\t\t\tif(data[i][childName] && data[i][childName].length){\r\n\t\t\t\tvar len = iteration(data[i][childName],childName);\r\n\t\t\t\tif(len === 0){\r\n\t\t\t\t\tdata[i] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!data[i]) { continue; }\r\n\t\t\tif(data[i].desktops && data[i].desktops.length > 0){\r\n\t\t\t\tdata[i].desktops.map(user => {\r\n\t\t\t\t\tuser.name = user.name || user.user_name;\r\n\t\t\t\t\tuser.id = user.id || user.desktop_id;\r\n\t\t\t\t\tuser._is_last = true;\r\n\t\t\t\t\t$scope.all_users.push(user);\r\n\t\t\t\t\treturn user;\r\n\t\t\t\t});\r\n\t\t\t\tdata[i][childName] = data[i].desktops;\r\n\t\t\t}\r\n\t\t\tif(data[i][childName] && data[i][childName].length === 0){\r\n\t\t\t\tdata[i]= undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile(data.length > 0) {\r\n\t\t\t// 如果有数组元素为空，每次删除一个\r\n\t\t\tvar oldlen = data.length;\r\n\t\t\tfor(var i = 0 ; i < oldlen ; i++){\r\n\t\t\t\tif(data[i] === undefined){\r\n\t\t\t\t\tdata.splice(i,1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(oldlen === data.length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn data.length;\r\n\t}\r\n\t/* 个人桌面数据拉取及配置---------------end */\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.submiting = true;\r\n\t\tvar instance_id = \"\";\r\n\t\tif(this.data.type=='2'){\r\n\t\t\tinstance_id = this.data.teach.instance_id;\r\n\t\t}else if(this.data.type=='1'){\r\n\t\t\tinstance_id = this.data.selected_desktop.desktop_id;\r\n\t\t}else{\r\n\t\t\tinstance_id = this.data.sys_desktop.instance_id;\r\n\t\t}\r\n\t\tvar data = {\r\n\t\t\tcompute_node_id: this.data.compute_node_id,\r\n\t\t\tidentify: this.data.identify,\r\n\t\t\tinstance_id: instance_id,\r\n\t\t\told_instance_id: this.data.edit?old_instance_id:undefined\r\n\t\t};\r\n\t\tconsole.log(11111, data)\r\n\t\tUSBPassThrough.save(data,function(res){\r\n\t\t\t$scope.submiting = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t})\r\n\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller(\"vdiSystemAutoSnapshotController\", [\"$scope\", \"AutoSnapshot\", \"$modal\",function($scope, AutoSnapshot, $modal){\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\tvar get_rows = function(){\r\n\t\tAutoSnapshot.query(function(res){\r\n\t\t\t$scope.rows = res.result.sort(function(a,b){ return a.name>b.name?1:-1 });\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.period=='weekly'){\r\n\t\t\t\t\titem.date = 'weekly' + item.week_date;\r\n\t\t\t\t}else if(item.period=='monthly'){\r\n\t\t\t\t\titem.date = 'monthly' + item.month_date;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\tvar _SCOPE = $scope;\r\n\r\n\t$scope.active = function(snapshot){\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\tif(item.id == snapshot.id){\r\n\t\t\t\titem.active_loadding = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tAutoSnapshot.active({ id: snapshot.id, active: !snapshot.active }, function(res){\r\n\t\t\tget_rows();\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == snapshot.id){\r\n\t\t\t\t\titem.active = !snapshot.active;\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, function(err){\r\n\t\t\tget_rows();\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == snapshot.id){\r\n\t\t\t\t\titem.active = snapshot.active;\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t$scope.add = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/system/snapshot_add.html\",\r\n\t\t\tcontroller: \"addSnapshotDialog\",\r\n\t\t\tsize: \"md\"\r\n\t\t});\r\n\t\tdialog.result.then(function(res){\r\n\t\t\tif(res){\r\n\t\t\t\tget_rows();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t$scope.edit = function(item){\r\n\t\titem.edit = true;\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/system/snapshot_edit.html\",\r\n\t\t\tcontroller: \"editSnapshotDialog\",\r\n\t\t\tscope: $scope,\r\n\t\t\tsize: \"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { snapshotItem: angular.copy(item) };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(data){\r\n\t\t\tif(data){\r\n\t\t\t\tget_rows();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t$scope.view = function(item){\r\n\t\titem.edit = false;\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/system/snapshot_edit.html\",\r\n\t\t\tcontroller: \"editSnapshotDialog\",\r\n\t\t\tscope: $scope,\r\n\t\t\tsize: \"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { snapshotItem: angular.copy(item) };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t$scope.delete = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除自动快照策略'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='DELETE_AUTO_SNAPSHOT'></p><footer class='text-right'><img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''><button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' ng-if='!loading' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\tAutoSnapshot.delete({ids: selected_rows.map(function(row){ return row.id; })},function(res){\r\n\t\t\t\t\t\tget_rows();\r\n\t\t\t\t\t\t$modalInstance && $modalInstance.close();\r\n\t\t\t\t\t}).$promise.finally(res => {\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('addSnapshotDialog', ['$scope',\"$modalInstance\",\"AutoSnapshot\",\"ResourcePool\",\"$$$I18N\",\"TreeInstances\",function($scope,$modalInstance,AutoSnapshot,ResourcePool,$$$I18N,TreeInstances){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\r\n\t$scope.data = {expandedNodes: []};\r\n\r\n\tResourcePool.query(function(res){\r\n\t\t// $scope.resources = res.result.filter(function(item){ return item.hosts.length > 0});\r\n\t\t$scope.resources = res.result\r\n\t\t$scope.data.resource = $scope.resources[0];\r\n\t\t$scope.data.resource && $scope.queryTreeInstances($scope.data.resource)\r\n\t});\r\n\r\n\t/* 个人桌面数据拉取及配置 */\r\n\t$scope.selectedUsers = {};\r\n\tfunction getAdminNum(rows){\r\n\t\treturn rows.reduce(function(count, item){\r\n\t\t\treturn count + item.desktop_num;\r\n\t\t}, 0);\r\n\t}\r\n\t\r\n\t$scope.queryTreeInstances = function(resource){\r\n\t\t$scope.loadDesktops = true;\r\n\t\tTreeInstances.query({resource_pool: resource.id, need_rollback_desktops: 0}, function(res){\r\n\t\t\tvar adminUsers = res.result.filter(function(u){ return u.type=='admin'&&u.desktop_num });\r\n\t\t\tvar adminDesktops = [];\r\n\t\t\tadminUsers.forEach(function(u){\r\n\t\t\t\tu.desktops.forEach(function(desk){\r\n\t\t\t\t\tadminDesktops.push(desk);\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tvar datas = [];\r\n\t\t\tif(getAdminNum(adminUsers)){\r\n\t\t\t\tdatas.push({name: $$$I18N.get('管理用户关联桌面'),desktop_num: getAdminNum(adminUsers), desktops: adminDesktops})\r\n\t\t\t}\r\n\t\t\tres.result.forEach(function(item){\r\n\t\t\t\tif(item.type=='common' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else if(item.type=='domain' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else{}\r\n\t\t\t});\r\n\t\t\t$scope.desktops = formatData(removeNoChildrenDeparts(datas),\"children\");\r\n\t\t\t$scope.loadDesktops = false;\r\n\t\t\tconsole.log(1111111, $scope.data.expandedNodes)\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction removeNoChildrenDeparts(data) {\r\n\t\tdata = data.filter(noUserFilter);\r\n\t\tdata.forEach(walk);\r\n\t\treturn data;\r\n\t\tfunction walk(node) {\r\n\t\t\tif(!node.dept_id) { return; }\r\n\t\t\tif(node.children) {\r\n                node.children = node.children.filter(noUserFilter);\r\n                node.children.forEach(walk);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction noUserFilter(node) {\r\n            if(node.dept_id && !node.children && node.desktops.length === 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\tfunction formatData(d,name){\r\n\t\titeration(d,name);\r\n\t\treturn d;\r\n\t}\r\n\r\n\tfunction iteration(data,childName,list){\r\n\t\tfor(var i = 0 ; i < data.length ; i++){\r\n\t\t\t$scope.data.expandedNodes.push(data[i]);\r\n\t\t\tif(data[i][childName] && data[i][childName].length){\r\n\t\t\t\tvar len = iteration(data[i][childName],childName);\r\n\t\t\t\tif(len === 0){\r\n\t\t\t\t\tdata[i] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!data[i]) { continue; }\r\n\t\t\tif(data[i].desktops && data[i].desktops.length > 0){\r\n\t\t\t\tdata[i].desktops.map(user => {\r\n\t\t\t\t\tuser.name = user.name || user.user_name;\r\n\t\t\t\t\tuser._is_last = true;\r\n\t\t\t\t\treturn user;\r\n\t\t\t\t});\r\n\t\t\t\tdata[i][childName] = data[i].desktops;\r\n\t\t\t}\r\n\t\t\tif(data[i][childName] && data[i][childName].length === 0){\r\n\t\t\t\tdata[i]= undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile(data.length > 0) {\r\n\t\t\t// 如果有数组元素为空，每次删除一个\r\n\t\t\tvar oldlen = data.length;\r\n\t\t\tfor(var i = 0 ; i < oldlen ; i++){\r\n\t\t\t\tif(data[i] === undefined){\r\n\t\t\t\t\tdata.splice(i,1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(oldlen === data.length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn data.length;\r\n\t}\r\n\r\n\tfunction recursionNode(obj, selected,name){\r\n\t\tif(obj[name]){\r\n\t\t\tobj[name].forEach(function(item){\r\n\t\t\t\titem._selected = selected;\r\n\t\t\t\trecursionNode(item, selected,name);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction calculateSelectedLeafs(node,cName,leafs){\r\n\t\t// 计算每一次点击有多少用户被选中\r\n\t\tvar _id = node.id || node.desktop_id;\r\n\t\tif(node[cName] && node[cName].length){\r\n\t\t\tnode[cName].forEach(n => {\r\n\t\t\t\tcalculateSelectedLeafs(n,cName,leafs)\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tnode._selected ? ($scope.selectedUsers[_id] = node) : (delete $scope.selectedUsers[_id]);\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.showManageSelected = function(node, selected, $parentNode, $index, $first, $middle, $last, $odd, $even, $path,nodeChildren){\r\n\t\tvar childName = nodeChildren || \"children\";\r\n\t\tnode._selected = !node._selected;\r\n\t\trecursionNode(node, node._selected,childName);\r\n\t\tcalculateSelectedLeafs(node,childName,$scope.selectedUsers);\r\n\t\t$path().forEach(function(item,index){\r\n\t\t\tif(index!==0){\r\n\t\t\t\tvar _selectedNum = item[childName].filter(function(item){ return item._selected==true }).length;\r\n\t\t\t\tvar _middSelectedNum = item[childName].filter(function(item){ return item._selected=='middle' }).length;\r\n\t\t\t\tif(!_selectedNum){\r\n\t\t\t\t\titem._selected = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(_selectedNum == item[childName].length){ item._selected = true; }\r\n\t\t\t\tif(_middSelectedNum || (_selectedNum && _selectedNum !== item[childName].length)){ item._selected = 'middle'; }\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.selectedUsersNums = function(){\r\n\t\treturn Object.keys($scope.selectedUsers).length;\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\t$scope.submiting = true;\r\n\t\tvar data = {\r\n\t\t\tname: this.data.name,\r\n\t\t\tdescription: this.data.description,\r\n\t\t\tresource_pool: this.data.resource.uuid,\r\n\t\t\tperiod: this.data.period,\r\n\t\t\tweek_date: this.data.period=='weekly'?this.data.week_date:undefined,\r\n\t\t\tmonth_date: this.data.period=='monthly'?this.data.month_date:undefined,\r\n\t\t\tinstances: Object.keys($scope.selectedUsers)\r\n\t\t};\r\n\t\tAutoSnapshot.save(data,function(res){\r\n\t\t\t$scope.submiting = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t})\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('editSnapshotDialog', ['$scope',\"$modalInstance\",\"AutoSnapshot\",\"ResourcePool\",\"$$$I18N\",\"TreeInstances\",\"params\",function($scope,$modalInstance,AutoSnapshot,ResourcePool,$$$I18N,TreeInstances,params){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = params.snapshotItem;\r\n\t$scope.data.expandedNodes = [];\r\n\t$scope.all_desktops = [];\r\n\r\n\tResourcePool.query(function(res){\r\n\t\t// $scope.resources = res.result.filter(function(item){ return item.hosts.length > 0});\r\n\t\t$scope.resources = res.result\r\n\t\t$scope.data.resource = $scope.resources.filter(function(item){ return item.uuid == $scope.data.resource_pool })[0];\r\n\t\t$scope.data.resource && $scope.queryTreeInstances($scope.data.resource);\r\n\t});\r\n\t$scope.initPeriod = function(period){\r\n\t\tif(period=='weekly'){\r\n\t\t\t$scope.data.week_date = '1';\r\n\t\t}else if(period=='monthly'){\r\n\t\t\t$scope.data.month_date = '1';\r\n\t\t}\r\n\t}\r\n\t/* 个人桌面数据拉取及配置 */\r\n\t$scope.selectedUsers = {};\r\n\tif($scope.data.edit){\r\n\t\t$scope.desktopTreeOptions = {\r\n\t\t\tisSelectable: function(node) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t};\r\n\t}else{\r\n\t\t$scope.desktopTreeOptions = {\r\n\t\t\tisSelectable: function(node) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\tfunction getAdminNum(rows){\r\n\t\treturn rows.reduce(function(count, item){\r\n\t\t\treturn count + item.desktop_num;\r\n\t\t}, 0);\r\n\t}\r\n\r\n\t$scope.queryTreeInstances = function(resource){\r\n\t\t$scope.loadDesktops = true;\r\n\t\tTreeInstances.query({resource_pool: resource.id, need_rollback_desktops: 0}, function(res){\r\n\t\t\tvar adminUsers = res.result.filter(function(u){ return u.type=='admin'&&u.desktop_num });\r\n\t\t\tvar adminDesktops = [];\r\n\t\t\tadminUsers.forEach(function(u){\r\n\t\t\t\tu.desktops.forEach(function(desk){\r\n\t\t\t\t\tadminDesktops.push(desk);\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tvar datas = [];\r\n\t\t\tif(getAdminNum(adminUsers)){\r\n\t\t\t\tdatas.push({name: $$$I18N.get('管理用户关联桌面'),desktop_num: getAdminNum(adminUsers), desktops: adminDesktops})\r\n\t\t\t}\r\n\t\t\tres.result.forEach(function(item){\r\n\t\t\t\tif(item.type=='common' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else if(item.type=='domain' && item.desktop_num){\r\n\t\t\t\t\tdatas.push(item);\r\n\t\t\t\t}else{}\r\n\t\t\t});\r\n\t\t\t$scope.desktops = formatData(removeNoChildrenDeparts(datas),\"children\");\r\n\t\t\t$scope.all_desktops.forEach(function(item){\r\n\t\t\t\t$scope.data.instances.forEach(function(instance){\r\n\t\t\t\t\tif(instance.instance_id == item.desktop_id){\r\n\t\t\t\t\t\titem._selected = true;\r\n\t\t\t\t\t\t$scope.selectedUsers[item.desktop_id] = item;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tcheckNodeSelected($scope.desktops)\r\n\t\t\t$scope.loadDesktops = false;\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction removeNoChildrenDeparts(data) {\r\n\t\tdata = data.filter(noUserFilter);\r\n\t\tdata.forEach(walk);\r\n\t\treturn data;\r\n\t\tfunction walk(node) {\r\n\t\t\tif(!node.dept_id) { return; }\r\n\t\t\tif(node.children) {\r\n                node.children = node.children.filter(noUserFilter);\r\n                node.children.forEach(walk);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfunction noUserFilter(node) {\r\n            if(node.dept_id && !node.children && node.desktops.length === 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\tfunction formatData(d,name){\r\n\t\titeration(d,name);\r\n\t\treturn d;\r\n\t}\r\n\tfunction checkNodeSelected(arr) {\r\n\t\tarr.forEach(function(node){\r\n\t\t\tif(node.children) {\r\n\t\t\t\tcheckNodeSelected(node.children);\r\n\t\t\t\tvar isAllSelected = true;\r\n\t\t\t\tvar hasSelected = false;\r\n\t\t\t\tvar hasMiddle = false;\r\n\t\t\t\tnode.children.forEach(function(subNode){\r\n\t\t\t\t\tif(subNode._selected == 'middle') {\r\n\t\t\t\t\t\thasMiddle = true;\r\n\t\t\t\t\t\tisAllSelected = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(subNode._selected) {\r\n\t\t\t\t\t\thasSelected = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tisAllSelected = isAllSelected && subNode._selected;\r\n\t\t\t\t});\r\n\t\t\t\tif(isAllSelected) {\r\n\t\t\t\t\tnode._selected = true;\r\n\t\t\t\t} else if(hasMiddle) {\r\n\t\t\t\t\tnode._selected = \"middle\";\r\n\t\t\t\t} else if(hasSelected) {\r\n\t\t\t\t\tnode._selected = \"middle\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn arr;\r\n\t}\r\n\tfunction iteration(data,childName,list){\r\n\t\tfor(var i = 0 ; i < data.length ; i++){\r\n\t\t\t$scope.data.expandedNodes.push(data[i]);\r\n\t\t\tif(data[i][childName] && data[i][childName].length){\r\n\t\t\t\tvar len = iteration(data[i][childName],childName);\r\n\t\t\t\tif(len === 0){\r\n\t\t\t\t\tdata[i] = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!data[i]) { continue; }\r\n\t\t\tif(data[i].desktops && data[i].desktops.length > 0){\r\n\t\t\t\tdata[i].desktops.map(user => {\r\n\t\t\t\t\tuser.name = user.name || user.user_name;\r\n\t\t\t\t\tuser.id = user.id || user.desktop_id;\r\n\t\t\t\t\tuser._is_last = true;\r\n\t\t\t\t\t$scope.all_desktops.push(user);\r\n\t\t\t\t\treturn user;\r\n\t\t\t\t});\r\n\t\t\t\tdata[i][childName] = data[i].desktops;\r\n\t\t\t}\r\n\t\t\tif(data[i][childName] && data[i][childName].length === 0){\r\n\t\t\t\tdata[i]= undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\twhile(data.length > 0) {\r\n\t\t\t// 如果有数组元素为空，每次删除一个\r\n\t\t\tvar oldlen = data.length;\r\n\t\t\tfor(var i = 0 ; i < oldlen ; i++){\r\n\t\t\t\tif(data[i] === undefined){\r\n\t\t\t\t\tdata.splice(i,1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(oldlen === data.length) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn data.length;\r\n\t}\r\n\tfunction recursionNode(obj, selected,name){\r\n\t\tif(obj[name]){\r\n\t\t\tobj[name].forEach(function(item){\r\n\t\t\t\titem._selected = selected;\r\n\t\t\t\trecursionNode(item, selected,name);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tfunction calculateSelectedLeafs(node,cName,leafs){\r\n\t\t// 计算每一次点击有多少用户被选中\r\n\t\tvar _id = node.id || node.desktop_id;\r\n\t\tif(node[cName] && node[cName].length){\r\n\t\t\tnode[cName].forEach(n => {\r\n\t\t\t\tcalculateSelectedLeafs(n,cName,leafs)\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tnode._selected ? ($scope.selectedUsers[_id] = node) : (delete $scope.selectedUsers[_id]);\r\n\t\t}\r\n\t}\r\n\t$scope.showManageSelected = function(node, selected, $parentNode, $index, $first, $middle, $last, $odd, $even, $path,nodeChildren){\r\n\t\tvar childName = nodeChildren || \"children\";\r\n\t\tnode._selected = !node._selected;\r\n\t\trecursionNode(node, node._selected,childName);\r\n\t\tcalculateSelectedLeafs(node,childName,$scope.selectedUsers);\r\n\t\t$path().forEach(function(item,index){\r\n\t\t\tif(index!==0){\r\n\t\t\t\tvar _selectedNum = item[childName].filter(function(item){ return item._selected==true }).length;\r\n\t\t\t\tvar _middSelectedNum = item[childName].filter(function(item){ return item._selected=='middle' }).length;\r\n\t\t\t\tif(!_selectedNum){\r\n\t\t\t\t\titem._selected = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(_selectedNum == item[childName].length){ item._selected = true; }\r\n\t\t\t\tif(_middSelectedNum || (_selectedNum && _selectedNum !== item[childName].length)){ item._selected = 'middle'; }\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.selectedUsersNums = function(){\r\n\t\treturn Object.keys($scope.selectedUsers).length;\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\t$scope.submiting = true;\r\n\t\tvar data = {\r\n\t\t\tid: this.data.id,\r\n\t\t\tname: this.data.name,\r\n\t\t\tdescription: this.data.description,\r\n\t\t\tresource_pool: this.data.resource.uuid,\r\n\t\t\tperiod: this.data.period,\r\n\t\t\tweek_date: this.data.period=='weekly'?this.data.week_date:undefined,\r\n\t\t\tmonth_date: this.data.period=='monthly'?this.data.month_date:undefined,\r\n\t\t\tinstances: Object.keys($scope.selectedUsers)\r\n\t\t};\r\n\t\tAutoSnapshot.update(data,function(res){\r\n\t\t\t$scope.submiting = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t})\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller(\"spiceConnectController\", [\"$scope\", \"$modal\", \"$$$I18N\", \"Spice\",function($scope, $modal, $$$I18N, Spice){\r\n\tvar spiceCtrl = this;\r\n\tspiceCtrl.getSpiceConnect = function(){\r\n\t\tspiceCtrl.loading = true;\r\n\t\tSpice.query(function(res){\r\n\t\t\tspiceCtrl.mode = res.spice_jpeg_compression;\r\n\t\t\tspiceCtrl.loading = false;\r\n\t\t},function(error){\r\n\t\t\tspiceCtrl.loading = false;\r\n\t\t})\r\n\t};\r\n\tspiceCtrl.getSpiceConnect();\r\n\tspiceCtrl.saveSpiceConnect = function(){\r\n\t\tspiceCtrl.save = true;\r\n\t\tSpice.save({spice_jpeg_compression: spiceCtrl.mode},function(res){\r\n\t\t\tspiceCtrl.save = false;\r\n\t\t\tspiceCtrl.getSpiceConnect();\r\n\t\t\tspiceCtrl.edit = false;\r\n\t\t},function(error){\r\n\t\t\tspiceCtrl.save = false;\r\n\t\t})\r\n\t};\r\n}])\r\n.controller(\"vdiSystemAutoclearController\", [\"$scope\", \"$modal\", \"$$$I18N\", \"Share\",function($scope, $modal, $$$I18N, Share){\r\n\tvar clearCtrl = this;\r\n\tclearCtrl.getClearTime = function(){\r\n\t\tclearCtrl.loading = true;\r\n\t\tShare.query(function(res){\r\n\t\t\tclearCtrl.day = res.value.day;\r\n\t\t\tvar time = res.value.time.split(\":\");\r\n\t\t\tclearCtrl.hours = time[0];\r\n\t\t\tclearCtrl.minutes = time[1];\r\n\t\t\tclearCtrl.seconds = time[2];\r\n\t\t\tclearCtrl.loading = false;\r\n\t\t},function(error){\r\n\t\t\tclearCtrl.loading = false;\r\n\t\t})\r\n\t};\r\n\tclearCtrl.getClearTime();\r\n\tclearCtrl.saveClearTime = function(){\r\n\t\tif(clearCtrl.hours.length==1 && Number(clearCtrl.hours)>=0 && Number(clearCtrl.hours)<=9){\r\n\t\t\tclearCtrl.hours = \"0\"+clearCtrl.hours\r\n\t\t}\r\n\t\tif(clearCtrl.minutes.length==1 && Number(clearCtrl.minutes)>=0 && Number(clearCtrl.minutes)<=9){\r\n\t\t\tclearCtrl.minutes = \"0\"+clearCtrl.minutes\r\n\t\t}\r\n\t\tif(clearCtrl.seconds.length==1 && Number(clearCtrl.seconds)>=0 && Number(clearCtrl.seconds)<=9){\r\n\t\t\tclearCtrl.seconds = \"0\"+clearCtrl.seconds\r\n\t\t}\r\n\t\tvar time = clearCtrl.hours + \":\" + clearCtrl.minutes + \":\" + clearCtrl.seconds;\r\n\t\tclearCtrl.save = true;\r\n\t\tShare.save({value: {day: clearCtrl.day, time: time}},function(res){\r\n\t\t\tclearCtrl.save = false;\r\n\t\t\tclearCtrl.getClearTime();\r\n\t\t\tclearCtrl.edit = false;\r\n\t\t},function(error){\r\n\t\t\tclearCtrl.save = false;\r\n\t\t})\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/system/controllers.js","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_root.js","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isArray.js","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isObject.js","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getNative.js","var vdiApp = angular.module(\"smartApp\", [\r\n\t\"ngRoute\",\r\n\t\"ngResource\",\r\n\t// 'ngAnimate', // this is buggy, jarviswidget will not work with ngAnimate :(\r\n\t\"ui.bootstrap\",\r\n\t\"app.controllers\",\r\n\t//\"app.demoControllers\",\r\n\t\"app.main\",\r\n\t\"app.navigation\",\r\n\t\"app.localize\",\r\n\t\"app.activity\",\r\n\t\"app.smartui\",\r\n\t\"vdi\",\r\n\t\"vdi.auth\",\r\n\t\"vdi.summary\",\r\n\t\"vdi.about\",\r\n\t\"vdi.desktop\",\r\n\t\"vdi.resource\",\r\n\t\"vdi.scheduler\",\r\n\t\"vdi.system\",\r\n\t\"vdi.monitor\",\r\n\t\"vdi.template\",\r\n\t\"vdi.template.teach\",\r\n\t\"vdi.template.person\",\r\n\t\"vdi.template.hardware\",\r\n\t\"vdi.terminal\",\r\n\t\"vdi.schoolroom\",\r\n\t\"vdi.user\",\r\n\t\"vdi.plan\",\r\n\t\"vdi.HA\",\r\n\t\"vdi.network\",\r\n\t\"treeControl\"\r\n])\r\n\r\n.config([\"$routeProvider\", \"$provide\", function($routeProvider, $provide){\r\n\t\r\n\t$routeProvider\r\n\t\t.when(\"/\", { redirectTo: '/summary' })\r\n\t\t// .when(\"/login\", {\r\n\t\t// \ttemplate: \"\",\r\n\t\t// \tcontroller: [\"$location\", \"$rootScope\", \"UserRole\", function($location, $root, Role){\r\n\t\t// \t\t// if(Role.logined){\r\n\t\t// \t\t// \t$root.$broadcast(\"AUTHED\", args)\r\n\t\t// \t\t// }\r\n\t\t// \t\tconsole.log(\"login\", arguments, Role.logined);\r\n\t\t// \t}]\r\n\t\t// })\r\n\t\t.when(\"/summary\", { templateUrl: \"views/vdi/summary.html\", controller: \"vdiSummaryController\"})\r\n\r\n\t\t.when(\"/resource/console\", { templateUrl: \"views/vdi/resource/console/console.html\", controller: \"vdiResourceConsoleListController\"})\r\n\t\t.when(\"/resource/pool\",{templateUrl: \"views/vdi/resource/pool/pool.html\", controller:\"vdiResourcePoolListController\"})\r\n\t\t.when(\"/resource/pool/:id/:type\",{templateUrl: \"views/vdi/resource/pool/host.html\", controller:\"vdiResourcePoolHostController\"})\r\n\t\t.when(\"/resource/storage\", { templateUrl: \"views/vdi/resource/storage/storage.html\", controller: \"vdiResourceStorageListController\"})\r\n\t\t\r\n\t\t.when(\"/network/manageNetwork\", { templateUrl: \"views/vdi/network/manageNetwork/manageNetwork.html\", controller: \"vdiManageNetworkListController\"})\r\n\t\t.when(\"/network/virtualSwitch\", { templateUrl: \"views/vdi/network/virtualSwitch/virtualSwitch.html\", controller: \"vdiVirtualSwitchListController\"})\r\n\t\t.when(\"/network/virtualSwitch/:id\", {templateUrl: function(){return \"views/vdi/network/virtualSwitch/virtualSwitchItem.html\"; }, controller: \"vdiVirtualSwitchItemController\"})\r\n\t\t.when(\"/network/dataNetwork\", { templateUrl: \"views/vdi/network/dataNetwork/dataNetwork.html\", controller: \"vdiDataNetworkListController\"})\r\n\t\t.when(\"/network/dataNetwork/:id\", {templateUrl: function(){return \"views/vdi/network/dataNetwork/sub_network.html\"; }, controller: \"vdiDataNetworkSubNetworkListController\"})\r\n\t\t.when(\"/network/dataNetwork/:id/subnet/:sub_id\",{templateUrl: \"views/vdi/network/dataNetwork/IPpool.html\", controller: \"vdiDataNetworkIPListController\"})\r\n\t\t.when(\"/network/dhcp\", { templateUrl: \"views/vdi/network/dhcp/dhcp.html\", controller: \"vdiDHCPController\", controllerAs: \"DHCPCtrl\"})\r\n\r\n\t\t.when(\"/desktop/scene\", { templateUrl: \"views/vdi/desktop/scene.html\", controller: \"vdiDesktopSceneListController\"})\r\n\t\t.when(\"/desktop/teach/:id\", { templateUrl: function(){ return \"views/vdi/desktop/teach.html\"}, controller: \"vdiDesktopTeachListController\"})\r\n\t\t.when(\"/desktop/personal\", { templateUrl: \"views/vdi/desktop/personal.html\", controller: \"vdiDesktopPersonalListController\"})\r\n\t\t.when(\"/desktop/pool\", { templateUrl: \"views/vdi/desktop/pool.html\", controller: \"vdiDesktopPoolController\"})\r\n\t\t.when(\"/desktop/poolList/:id\", { templateUrl: function(){ return \"views/vdi/desktop/poolList.html\"}, controller: \"vdiDesktopPoolListController\"})\r\n\t\t.when(\"/template/teach\", { templateUrl: \"views/vdi/template/teach.html\", controller: \"vdiTemplateTeachDesktopListController\"})\r\n\t\t.when(\"/template/personal\", { templateUrl: \"views/vdi/template/personal.html\", controller: \"vdiTemplatePresonalDesktopListController\"})\r\n\t\t.when(\"/template/hardware\", { templateUrl: \"views/vdi/template/hardware.html\", controller: \"vdiTemplateHardwareListController\"})\r\n\t\t.when(\"/terminal/schoolroom\", { templateUrl: \"views/vdi/terminal/schoolroom.html\", controller: \"vdiTerminalSchoolroomManageController\"})\r\n\t\t.when(\"/terminal/client\", { templateUrl: \"views/vdi/terminal/client.html\", controller: \"vdiTerminalClientManageController\"})\r\n\t\t.when(\"/terminal/session\", { templateUrl: \"views/vdi/terminal/session.html\", controller: \"vdiTerminalSessionManageController\"})\r\n\t\t.when(\"/user/role\", { templateUrl: \"views/vdi/user/role.html\", controller: \"vdiUserRoleManageController\"})\r\n\t\t.when(\"/user/admin\", { templateUrl: \"views/vdi/user/admin.html\", controller: \"vdiUserAdminManageController\"})\r\n\t\t.when(\"/user/common\", { templateUrl: \"views/vdi/user/common.html\", controller: \"vdiUserCommonManageController\"})\r\n\t\t.when(\"/user/domain\", { templateUrl: \"views/vdi/user/domain.html\", controller: \"vdiUserDomainController\"})\r\n\t\t.when(\"/user/domain/:id\", { templateUrl: function(){ return \"views/vdi/user/domainList.html\"}, controller: \"vdiUserDomainListController\"})\r\n\t\t.when(\"/monitor/host\", { templateUrl: \"views/vdi/monitor/host.html\", controller: \"vdiMonitorController\"})\r\n\t\t.when(\"/monitor/desktop\", {templateUrl:\"views/vdi/monitor/desktop.html\", controller:\"vdiMonitorController\"})\r\n\t\t.when(\"/monitor/alarm\", { templateUrl: \"views/vdi/monitor/alarm.html\", controller: \"vdiMonitorAlarmController\"})\r\n\t\t.when(\"/monitor/policy\", { templateUrl: \"views/vdi/monitor/policy.html\", controller: \"vdiMonitorPolicyController\"})\r\n\t\t.when(\"/scheduler/view\", { templateUrl: \"views/vdi/scheduler/view.html\", controller: \"vdiSchedulerViewController\"})\r\n\t\t.when(\"/plan/switch\", { templateUrl: \"views/vdi/plan/switch.html\", controller: \"vdiPlanSwitchController\"})\r\n\t\t.when(\"/plan/hostSwitch\", { templateUrl: \"views/vdi/plan/host_switch.html\", controller: \"vdiHostPlanSwitchController\"})\r\n\t\t.when(\"/HA/desktop\", { templateUrl: \"views/vdi/HA/desktop_ha.html\", controller: \"vdiDesktopHAViewController\"})\r\n\r\n\t\t.when(\"/system/deploy\", { templateUrl: \"views/vdi/system/deploy.html\", controller: \"vdiSystemDeployController\"})\r\n\t\t.when(\"/system/set\", { templateUrl: \"views/vdi/system/set.html\", controller: \"vdiSystemSetController\", controllerAs:\"SetCtrl\"})\r\n\r\n\t\t.when(\"/system/desktop\", { templateUrl: \"views/vdi/system/desktop.html\", controller: \"vdiSystemDesktopListController\"})\r\n\t\t.when(\"/system/desktop/:id\", { templateUrl: \"views/vdi/system/desktop_detail.html\", controller: \"vdiSystemDesktopDetailController\"})\r\n\t\t.when(\"/system/backup\", { templateUrl: \"views/vdi/system/backup.html\", controller: \"vdiSystemBackupListController\"})\r\n\t\t.when(\"/system/iso\", { templateUrl: \"views/vdi/system/iso.html\", controller: \"vdiSystemISOListController\"})\r\n\t\t.when(\"/system/usb\", { templateUrl: \"views/vdi/system/usb.html\", controller: \"vdiSystemUSBListController\"})\r\n\t\t.when(\"/system/through\", { templateUrl: \"views/vdi/system/through.html\", controller: \"vdiSystemUSBThroughController\"})\r\n\t\t.when(\"/system/snapshot\", { templateUrl: \"views/vdi/system/snapshot.html\", controller: \"vdiSystemAutoSnapshotController\"})\r\n\t\t// .when(\"/system/device\", { templateUrl: \"views/vdi/system/device.html\", controller: \"vdiSystemDeviceListController\"})\r\n\t\t.when(\"/system/upgrade\", { templateUrl: \"views/vdi/system/upgrade.html\", controller: \"vdiSystemUpgradeListController\"})\r\n\t\t.when(\"/system/logs\", { templateUrl: \"views/vdi/system/logs.html\", controller: \"vdiSystemLogListController\"})\r\n\t\t// .when(\"/system/endlogs\", { templateUrl: \"views/vdi/system/endlogs.html\", controller: \"vdiSystemEndlogListController\"})\r\n\t\t.when(\"/system/outside\", { templateUrl: \"views/vdi/system/outside.html\", controller: \"vdiSystemOutsideController\"})\r\n\t\t.when(\"/about\", { templateUrl: \"views/vdi/about.html\", controller: \"vdiPermissionController\"})\r\n\r\n\t\t.otherwise({\r\n\t\t\tredirectTo: '/summary'\r\n\t\t});\r\n\t// with this, you can use $log('Message') same as $log.info('Message');\r\n\t$provide.decorator('$log', ['$delegate',\r\n\tfunction($delegate) {\r\n\t\t// create a new function to be returned below as the $log service (instead of the $delegate)\r\n\t\tfunction logger() {\r\n\t\t\t// if $log fn is called directly, default to \"info\" message\r\n\t\t\tlogger.info.apply(logger, arguments);\r\n\t\t}\r\n\r\n\t\t// add all the $log props into our new logger fn\r\n\t\tangular.extend(logger, $delegate);\r\n\t\treturn logger;\r\n\t}]); \r\n\r\n}])\r\n\r\n.run([\r\n\"$rootScope\", \"settings\",\"localize\", \"$route\", \"UserRole\", \"$window\", \"$document\", \"$$$I18N\", \"UserAuth\", \"UserRole\", \"NavigatorLink\", \"quickMaskModel\", \"SystemDeploy\",\"desktopHelpBox\",\r\nfunction($root, settings, localize, $route, UserRole, $window, $doc, $$$I18N, Auth, userRole, navigators, quickMaskModel, SystemDeploy, desktopHelpBox){\r\n\t//$root.$broadcast(Auth.logined ? \"AUTHED\" : \"NOAUTH\");\r\n\tif($$$storage.getSessionStorage(\"desktopHelpBox\")=='open'){\r\n\t\tdesktopHelpBox.close();\r\n\t\tdesktopHelpBox.open();\r\n\t}else{ desktopHelpBox.close(); }\r\n\t\r\n\tif($$$storage.getSessionStorage(\"loginInfo\")) {\r\n\t\topenQuickstart();\r\n\t}\r\n\t$root.$on(\"AUTHED\", function(name, userInfo){\r\n\t\t$route.reload();\r\n\t\t$root.$broadcast(\"updateNavData\", UserRole.currentNavigator);\r\n\t\topenQuickstart();\r\n\t});\r\n\tvar preferLang = settings.languages.filter(function(l) {\r\n\t\treturn l.langCode === $$$storage.getSessionStorage('lang_code');\r\n\t})[0];\r\n\tif(preferLang) {\r\n\t\tsettings.currentLang = preferLang;\r\n\t}\r\n\tvar ev_dialog_close = function(){\r\n\t\ttry{\r\n\t\t\twindow.___dialog && window.___dialog.dismiss && window.___dialog.dismiss();\r\n\t\t\twindow.___dialog = null;\r\n\t\t}\r\n\t\tcatch(e){}\r\n\t}\r\n\t$root.$on(\"updateDocumentTitle\", function(name, title){\r\n\t\t$window.document.title = $$$I18N.get(title);\r\n\t});\r\n\t$root.$on(\"$viewContentLoaded\", ev_dialog_close);\r\n\t$root.$on(\"$$$forceCloseDailog\", ev_dialog_close);\r\n\r\n\t$root.$on(\"$viewContentLoaded\", function(){\r\n\t\tlet URL = [], HASH = location.hash.slice(1);\r\n\t\tUserRole.currentNavigator.map(function(item){\r\n\t\t\tif(item.sublist){\r\n\t\t\t\titem.sublist.forEach( data => { URL.push(data.url); } )\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\treturn URL.push(item.url);\r\n\t\t})\r\n\t\tvar is_hasid = false;\r\n\t\tif(\r\n\t\t\tlocation.hash.match(/#\\/desktop\\/teach\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/desktop\\/pool\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/desktop\\/personal\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/desktop\\/poolList\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/network\\/dataNetwork\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/resource\\/pool\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/system\\/desktop\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/user\\/domain\\/\\S+$/)  || \r\n\t\t\tlocation.hash.match(/#\\/network\\/virtualSwitch\\/\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/terminal\\/client\\S+$/) || \r\n\t\t\tlocation.hash.match(/#\\/system\\/deploy\\S+$/)){\r\n\t\t\tis_hasid = true;\r\n\t\t}\t\t\t\r\n\t\tif(URL.length!==0 && URL.filter(function(item){ return item===HASH }).length===0 && !is_hasid){\r\n\t\t\tlocation.replace(\"#summary.html\")\r\n\t\t}\r\n\t});\r\n\t$root.navs = UserRole.currentNavigator;\r\n\t$root.$broadcast(\"updateNavData\", UserRole.currentNavigator);\r\n\r\n\tvar debug = true;\r\n\tif(window.console && !debug){\r\n\t\twindow.console = {};\r\n\t\t\"memory,debug,error,info,log,warn,dir,dirxml,table,trace,assert,count,markTimeline,profile,profileEnd,time,timeEnd,timeStamp,timeline,timelineEnd,group,groupCollapsed,groupEnd,clear\".split(\",\").forEach(function(n){\r\n\t\t\twindow.console[n] = Function.prototype;\r\n\t\t});\r\n\t}\r\n\tvar UA = navigator.userAgent;\r\n\t$root.is_chrome = /Chrome\\//.test(UA) && /AppleWebKit\\//.test(UA) && /Safari\\//.test(UA);\r\n\r\n\tfunction openQuickstart(){\r\n\t\tSystemDeploy.first_deploy(function(res){\r\n\t\t\tif(res.result){\r\n\t\t\t\tquickMaskModel.open();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n]);\r\n\r\nvdiApp.constant('ip_pattern',/^(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d{1,2}|1\\d\\d|2[0-4]\\d|25[0-5])$/g);\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.app.js","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseGetTag.js","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isObjectLike.js","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_ListCache.js","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_assocIndexOf.js","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Symbol.js","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_nativeCreate.js","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getMapData.js","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_toKey.js","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsEqual.js","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Map.js","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isFunction.js","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_MapCache.js","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/keys.js","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isBuffer.js","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isTypedArray.js","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isLength.js","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isKey.js","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isSymbol.js","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Stack.js","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/eq.js","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_freeGlobal.js","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_toSource.js","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_equalArrays.js","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isArguments.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/module.js","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isIndex.js","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_overArg.js","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isStrictComparable.js","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_matchesStrictComparable.js","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseGet.js","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_castPath.js","angular.module(\"vdi.auth\", [\r\n    \"ngResource\",\r\n    \"app.localize\",\r\n    \"app.controllers\",\r\n    \"vdi.user\"\r\n])\r\n.factory(\"UserAuth\", [\"$resource\", \"$rootScope\", \"$Domain\", function($resource, $root, $Domain){\r\n    console.log($Domain);\r\n    return $resource($Domain + \"/login\", null, {\r\n        precheck: {method: \"GET\", url: $Domain + \"/thor/home/system_check\"},\r\n        login: { method: \"POST\", isArray:false },\r\n        logout: {\r\n            method: \"GET\", isArray: false,\r\n            url: $Domain + \"/logout\",\r\n            transformRequest(){\r\n                // TODO: 修改\r\n                // 这里先获取了部分缓存，然后清空缓存，再保存部分缓存\r\n                var theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n                var lang_code = $$$storage.getSessionStorage('lang_code') || \"e-vdi\";\r\n                var dev_host;\r\n                if($$$storage.getSessionStorage('dev_host')){\r\n                    dev_host = $$$storage.getSessionStorage('dev_host');\r\n                }\r\n                $$$storage.clearSessionStorage();\r\n                $$$storage.setSessionStorage('current_theme', theme);\r\n                $$$storage.setSessionStorage('lang_code', lang_code);\r\n                if(dev_host){\r\n                    $$$storage.setSessionStorage('dev_host', dev_host);\r\n                }\r\n                $root.$broadcast(\"NOAUTH\");\r\n            }\r\n        }\r\n    });\r\n}])\r\n.factory(\"init\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/init\", null, {\r\n        get_language:{ method: \"GET\", url: $Domain + \"/thor/init/record_lang\"},\r\n        get_version:{ method: \"GET\", url: $Domain + \"/thor/init/lang\"}\r\n    });\r\n}])\r\n.controller(\"loginController\", [\r\n    \"$scope\", \"loginResource\", \"localize\", \"settings\", \"$Domain\", \"$$$version\", \"$$$I18N\", \"$$$MSG\", \"UserAuth\", \"UserRole\", \"$rootScope\",\"init\", \"$$$UserRoles\",\r\n    function($scope, loginresource, localize, settings, $Domain, $$$version, $$$I18N, $$$MSG, Auth, Role, $root, init, $$$UserRoles){\r\n        $scope.$on(\"changeSkin\", function(e,value){\r\n            $scope.current_theme = value;\r\n        });\r\n        $scope.showLoginScreen = !Role.logined;\r\n        $scope.$on(\"NOAUTH\", function(){\r\n            $scope.showLoginScreen = true;\r\n        });\r\n        $scope.$on(\"AUTHED\", function(){\r\n            $scope.showLoginScreen = false;\r\n        });\r\n    $scope.domain = $Domain;\r\n    $scope.langversion = $$$version;\r\n\t//document.title = $$$I18N.get(\"TITLE_NAME\")\r\n    loginresource.query(function(res){\r\n        $scope.version = res.version;\r\n    });\r\n    $scope.current_theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n    $scope.getCurrLang = function(){\r\n    \t$scope.currentLang = settings.languages.filter(function(l) {\r\n\t\t\treturn l.langCode === $$$storage.getSessionStorage('lang_code');\r\n\t\t})[0];\r\n    };\r\n    init.get_version(function(res){\r\n        $$$storage.setSessionStorage('lang_code', res.current_lang_type);\r\n        $scope.getCurrLang();\r\n        localize.setLang($scope.currentLang);\r\n    });\r\n\t// init.get_language(function(res){\r\n //        localStorage.lang_code = settings.languages.reduce(function(langCode, l){\r\n //            if(res.language === l.langCode){\r\n //                return res.language;\r\n //            }\r\n //            return langCode;\r\n //        }, localStorage.lang_code || settings.languages[0].langCode);\r\n\t// \t$scope.getCurrLang();\r\n\t// \tlocalize.setLang($scope.currentLang);\r\n\t// });\r\n\r\n    // $scope.getCurrLang();\r\n    // localize.setLang($scope.currentLang);\r\n    \r\n    $scope.login = function(){\r\n        var self = this;\r\n        var data = {\r\n            username: self.username,\r\n            password: self.password\r\n        };\r\n        self.loading = true;\r\n        Auth.precheck().$promise.then(function(){\r\n            return Auth.login(data, function(res){\r\n                // test--\r\n                // res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n                $$$storage.setSessionStorage('loginInfo', JSON.stringify(res.user));\r\n                $$$storage.setSessionStorage('power', res.user.keys || $$$UserRoles);\r\n                $$$storage.setSessionStorage('userId', res.user.id);\r\n                $root.$broadcast(\"AUTHED\", res.user);\r\n                // 清空输入的用户信息\r\n                self.username = self.password = \"\";\r\n                var dms = (res.source && res.source.dms && res.source.dms!=='')?('http://'+res.source.dms):'nodms';\r\n                $root.$broadcast(\"DMS\", dms);\r\n                $$$storage.setSessionStorage('DMS', dms);\r\n            }).$promise;\r\n        }).finally(function(){\r\n            self.loading = false;\r\n        });\r\n        \r\n    }\r\n\r\n    // $(\"#login-form\").on(\"submit\", function(e){\r\n    // \te.preventDefault();\r\n    //     console.log(123);\r\n    // \tif(this.username.value && this.password.value){\r\n    // \t\t$.ajax($Domain + \"/login\", {\r\n    // \t\t\tmethod: \"POST\",\r\n    // \t\t\tdata: JSON.stringify({\r\n    // \t\t\t\tusername: this.username.value,\r\n    // \t\t\t\tpassword: this.password.value\r\n    // \t\t\t}),\r\n    // \t\t\txhrFields: {\r\n    // \t\t\t\twithCredentials: true\r\n    // \t\t\t},\r\n    // \t\t\tcrossDomain: true\r\n    // \t\t}).promise().then(\r\n    // \t\t\tfunction(res){\r\n    // \t\t\t\tif(res.code === 0){\r\n    // \t\t\t\t\tlocalStorage.loginInfo = JSON.stringify(res.user);\r\n    // \t\t\t\t\tvar powers = \"Summary,Resource,Host,Network,Storage,Desktop,Teaching_desktop,Personal_desktop,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Timetable,Course_list,System,System_backup,System_ISO,USB_redirection,System_upgrade,Operation_log,About\";\r\n    // \t\t\t\t\tlocalStorage[\"power\"] = res.user.keys || powers;\r\n                        \r\n    // \t\t\t\t\t//location.replace(localStorage.returnUrl || \"index.html\");\r\n    // \t\t\t\t}\r\n    // \t\t\t\telse{\r\n    // \t\t\t\t\t$.bigBox({\r\n    // \t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.code,\r\n    // \t\t\t\t\t\tcontent : $$$MSG.get(res.code),\r\n    // \t\t\t\t\t\tcolor : \"#C46A69\",\r\n    // \t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n    // \t\t\t\t\t\ttimeout : 6000\r\n    // \t\t\t\t\t});\r\n    // \t\t\t\t}\r\n    // \t\t\t},\r\n    // \t\t\tfunction(err){\r\n\r\n    // \t\t\t}\r\n    // \t\t);\r\n    // \t}else if(!this.username.value){\r\n    // \t\tthis.username.focus();\r\n    // \t}else{\r\n    // \t\tthis.password.focus();\r\n    // \t}\r\n    // });\r\n}])\r\n.run([function(){\r\n    console.log(\"running auth module\");\r\n}])\r\n.config([function(){\r\n    console.log(\"config auth module\")\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/auth/controllers.js","angular.module(\"vdi.summary\", [])\r\n.factory(\"Summary\", [\"$resource\", function($resource){\r\n    return $resource(\"/thor/home\", null, {\r\n        query: { method: \"GET\", isArray: false,url:\"/thor/home\", params:{ uuid:\"@uuid\" }},\r\n        top_logs: { method: \"GET\", isArray: false, url: \"/thor/home/top_logs\"},\r\n        top_instance: {method:\"GET\", isArray: false, url:\"/thor/home/top_instance\",params:{uuid:\"@uuid\"}},\r\n        top_client: {method:\"GET\", isArray: false, url:\"/thor/home/top_client\"}\r\n    });\r\n}])\r\n\r\n.controller(\"vdiSummaryController\", [\"$scope\", \"Summary\",\"$$$I18N\",\"ResourcePool\",function($scope, summary,$$$I18N,ResourcePool){\r\n\r\n    ResourcePool.query(function(res){\r\n        $scope.pools = res.result.sort((a,b) => {\r\n            return a.name > b.name ? 1 : -1\r\n        });\r\n        // $scope.pool = $scope.pools.filter(function(p){ return p.name===\"default\"})[0];\r\n        $scope.pool = {};\r\n        $scope.get_host($scope.pool.uuid);\r\n    }); \r\n    \r\n    \r\n\r\n    summary.top_logs(function(res){\r\n        $scope.top_logs_list = res.result.sort(function(a,b){\r\n            return b.datetime - a.datetime;\r\n        });\r\n    });\r\n    $scope.get_host = function(id){\r\n        $scope.loading = true;\r\n        summary.query({uuid:id},function(res){\r\n            $scope.loading = false;\r\n            $scope.summary = res.info;\r\n            $scope.cpu_rate = ($scope.summary.cpu_rate).toFixed(1); \r\n            var mem_data = [\r\n                {\r\n                    'name':$$$I18N.get(\"已使用\"), \r\n                    'y':parseInt((($scope.summary.mem_used)/($scope.summary.memory_cnt)*100).toFixed(2))\r\n                },\r\n                {\r\n                    'name':$$$I18N.get(\"剩余\"),\r\n                    'y':parseInt((($scope.summary.mem_remain)/($scope.summary.memory_cnt)*100).toFixed(2))\r\n                }\r\n            ];\r\n            var disk_data = [\r\n                {\r\n                    'name':$$$I18N.get(\"已使用\"), \r\n                    'y':parseInt((($scope.summary.disk_used)/($scope.summary.disk_cnt)*100).toFixed(2))\r\n                },\r\n                {\r\n                    'name':$$$I18N.get(\"剩余\"),\r\n                    'y':parseInt((($scope.summary.disk_remain)/($scope.summary.disk_cnt)*100).toFixed(2))\r\n                }\r\n            ];\r\n            //饼图开始\r\n            angular.element(\"#3Dmemory\").highcharts({\r\n                    chart: {\r\n                        type: 'pie',\r\n                        height:170,\r\n                        spacing:[0,0,0,0],\r\n                        backgroundColor:'#fafafa',\r\n                        options3d: {\r\n                            enabled: true,\r\n                            alpha: 45,\r\n                            beta: 0\r\n                        }\r\n                    },\r\n                    title: {\r\n                        text: null\r\n                    },\r\n                    credits: {\r\n                        enabled: false\r\n                    },\r\n                    tooltip: {\r\n                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\r\n                    },\r\n                    plotOptions: {\r\n                        pie: {\r\n                            allowPointSelect: true,\r\n                            cursor: 'pointer',\r\n                            depth: 35,\r\n                            dataLabels: {\r\n                                enabled: false,\r\n                                format: ''\r\n                            }\r\n                        }\r\n                    },\r\n                    series: [{\r\n                        type: 'pie',\r\n                        name: $$$I18N.get(\"内存\"),\r\n                        data:mem_data\r\n                    }]\r\n            });\r\n            angular.element(\"#3Ddisk\").highcharts({\r\n                    chart: {\r\n                        type: 'pie',\r\n                        height:170,\r\n                        backgroundColor:'#fafafa',\r\n                        spacing:[0,0,0,0],\r\n                        options3d: {\r\n                            enabled: true,\r\n                            alpha: 45,\r\n                            beta: 0\r\n                        }\r\n                    },\r\n                    title: {\r\n                        text: null\r\n                    },\r\n                    credits: {\r\n                        enabled: false\r\n                    },\r\n                    tooltip: {\r\n                        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\r\n                    },\r\n                    plotOptions: {\r\n                        pie: {\r\n                            allowPointSelect: true,\r\n                            cursor: 'pointer',\r\n                            depth: 35,\r\n                            dataLabels: {\r\n                                enabled: false,\r\n                                format: ''\r\n                            }\r\n                        }\r\n                    },\r\n                    series: [{\r\n                        type: 'pie',\r\n                        name: $$$I18N.get(\"存储\"),\r\n                        data: disk_data\r\n                    }]\r\n            }); \r\n            //饼图结束  \r\n        });\r\n\r\n        // 桌面\r\n        summary.top_instance({uuid:id},function(res){\r\n\r\n            $scope.instances_summary = res.instances_summary;\r\n\r\n            $scope.top_instances_list = res.top_instances_list;\r\n        });\r\n    };\r\n\r\n    $scope.view_desktop = function(id){\r\n        window.open(\"desktopScreenshot.html#\" + id, \"person_desktop_\" + id);\r\n    };\r\n\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/summary/controllers.js","angular.module(\"vdi.schoolroom\", [])\r\n.factory(\"SchoolRoom\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n \treturn $resource($Domain + \"/thor/pools\", null, {\r\n \t\tquery: { method: \"GET\", isArray: false },\r\n \t\tquerywithSimple: { method: \"GET\", url: $Domain + \"/thor/pools?simple=true\", isArray: false },\r\n\t\tsave :\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/pool\" },\r\n\t\t\"delete\":\r\n\t\t\t{ method: \"DELETE\"},\r\n\t\tupdate:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/pool\" },\r\n\t\tsendMessage:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/pools/:id/message\", params: { \"id\": \"@id\" } },\r\n\t\tcloseMessage:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/pools/:id/message\", params: { \"id\": \"@id\" } },\r\n \t});\r\n }])\r\n.factory('ResourcePool', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/resource\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\"},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\"},\r\n\t\tdelete: \r\n\t\t\t{ method: \"DELETE\",url:$Domain + \"/thor/resource\", params:null},\r\n\t\tedit:\r\n\t\t\t{ method: \"PUT\"}\r\n\t});\r\n}])\r\n.controller(\"vdiTerminalSchoolroomManageController\", [\r\n\"$scope\", \"SchoolRoom\",\"$modal\", \"$$$I18N\", \"UserRole\",\r\nfunction($scope, schoolroom, $modal, $$$I18N, UserRole){\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.rows = [];\r\n\t// $scope.allRows = [];\r\n\tvar _controllerScope = $scope;$scope.loading = true;\r\n\t$scope.owner = UserRole.isOwner;\r\n\r\n\tfunction getList(){\r\n\t\tschoolroom.query(function(res){\r\n\t\t\tif($scope.owner){\r\n\t\t\t\t$scope.rows = res.pools_.sort(function(a,b){\r\n\t\t\t\t\tif(a.name === 'default'){\r\n\t\t\t\t\t\treturn -1\r\n\t\t\t\t\t}else if(b.name === 'default'){\r\n\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar schoolrooms = [];\r\n\t\t\t\tres.pools_.forEach(function(item){\r\n\t\t\t\t\tif(item.user_ids.some(data => data === user.id)){\r\n\t\t\t\t\t\tschoolrooms.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t$scope.rows = schoolrooms;\r\n\t\t\t}\r\n\t\t\t// angular.copy($scope.rows,$scope.allRows);\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\tgetList();\r\n\r\n\t// $scope.updateData = function(text){\r\n\t// \t$scope.rows = $scope.allRows.filter(function(row){\r\n\t// \t\trow._selected = false;\r\n\t// \t\tif(text){\r\n\t// \t\t\treturn row.name.indexOf(text) !== -1;\r\n\t// \t\t}\r\n\t// \t\treturn true;\r\n\t// \t});\r\n\t// };\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesize = Number($$$storage.getSessionStorage('schoolroom_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('schoolroom_pagesize', newvalue ? newvalue : 0);\r\n\t}); \r\n\r\n\t$scope.delete = function(item){\r\n\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.id!==1; })\r\n\t\tvar nodelete_rows = selected_rows.filter(function(row){ if( row.sceneCount != 0 || row.terminalCount != 0 ) return row; });\r\n\t\tvar delete_rows = selected_rows.filter(function(row){ if( row.sceneCount == 0 && row.terminalCount == 0 ) return row; });\r\n\r\n\t\tif(delete_rows.length==0)\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP10\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\telse \r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除教室'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:10px;' data-localize='CLASSROOM_TIPGROUP1' param1='{{deleteName}}'></p><p style='margin-bottom:20px;' data-ng-if='nodelete_rows.length!=0' data-localize='CLASSROOM_TIPGROUP2' param1='{{nodeleteName}}'></p><footer class='text-right' style='margin-top:20px;'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.deleteName = delete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t\t$scope.nodeleteName = nodelete_rows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t\t$scope.delete_rows = delete_rows;$scope.nodelete_rows = nodelete_rows;\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tschoolroom.delete({\r\n\t\t\t\t\t\t\t\tids: delete_rows.map(function(row){ return row.id; })\r\n\t\t\t\t\t\t\t}, function(){\r\n\t\t\t\t\t\t\t\tdelete_rows.forEach(function(row){\r\n\t\t\t\t\t\t\t\t\t_controllerScope.rows.splice(_controllerScope.rows.indexOf(row), 1);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t};\r\n\r\n\t$scope.changeClass = function(item){\r\n\t\t$$$storage.setSessionStorage('classroom', item.id);\r\n\t};\r\n\r\n\t$scope.onlyOneItem = function(){\r\n\t\tvar selectedLength = $scope.rows.filter(function(item){ return item._selected }).length;\r\n\t\treturn selectedLength==1;\r\n\t}\r\n\t$scope.selectNoDefault = function(){\r\n\t\tvar _length = $scope.rows.filter(function(item){ return item._selected && item.id!==1 }).length;\r\n\t\treturn _length;\r\n\t}\r\n\t$scope.sendMessage = function(){\r\n\t\tvar selected_row = $scope.rows.filter(function(row){ return row._selected; })[0];\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/terminal/sendMessage.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.data = {};\r\n\t\t\t\tif(selected_row.message!=''){ $scope.data.message=selected_row.message }\r\n\t\t\t\t$scope.isUnchanged = function(){\r\n\t\t\t\t\treturn angular.equals($scope.data.message,selected_row.message);\r\n\t\t\t\t}\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tschoolroom.sendMessage({\r\n\t\t\t\t\t\tid: selected_row.id,\r\n\t\t\t\t\t\tmessage: $scope.data.message\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tgetList();\r\n\t\t\t\t\t},function(){});\r\n\t\t\t\t}\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize: \"md\"\r\n\t\t})\r\n\t}\r\n\r\n\t$scope.closeMessage = function(){\r\n\t\tvar selected_rows = $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar message = selected_rows[0].message;\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='关闭消息'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p ng-if='message' data-localize='closeMessage'></p><p ng-if='message' style='margin-bottom:20px;'><span data-localize='消息内容'></span>：{{ message }}</p><p ng-if='!message' data-localize='无消息'></p><footer class='text-right'><button class='btn btn-primary' ng-disabled='!message' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.message = message;\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tschoolroom.closeMessage({\r\n\t\t\t\t\t\t\tid: selected_rows[0].id\r\n\t\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tgetList();\r\n\t\t\t\t\t\t},function(){});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n\r\n.controller(\"editSchoolroomDialog\", [\"$scope\", \"$modalInstance\", \"SchoolRoom\",\"Network\", \"Admin\",\"$$$I18N\", \"ResourcePool\",\"UserRole\",function($scope, $modalInstance, sc, network, admin, $$$I18N, ResourcePool,UserRole){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\tvar item = $scope.item || $scope.currentItem;\r\n\t$scope.data = angular.copy(item);\r\n\r\n\t$scope.is_default = item.name === 'default'? true:false;\r\n\t// console.log(333333333,item)\r\n\t// ResourcePool.query(function(res){\r\n\t// \t$scope.resources = res.result;\r\n\t// \t$scope.data.resource = $scope.resources.filter(function(data){ return data.id === $scope.data.resource_pool_id })[0];\r\n\t// });\r\n\tfunction getSubnets(Network){\r\n\t\tif(Network){\r\n\t\t\t$scope.network_loading = true;\r\n\t\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t\t$scope.subnets = res.result;\r\n\t\t\t\t$scope.data.subnet = $scope.subnets.filter(function(data){ return data.id === $scope.data.subnet_id })[0];\r\n\t\t\t\t$scope.network_loading = false;\r\n\t\t\t})\t\t\t\r\n\t\t}\r\n\t};\r\n\tnetwork.query(function(data){\r\n\t\t$scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t$scope.data.network = $scope.networks.filter(function(data){ return data.id === $scope.data.network_id })[0];\r\n\t\tgetSubnets($scope.data.network);\r\n\t})\r\n\t$scope.switchSubnet = function(val){\r\n\t\tgetSubnets(val);\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\tif($scope.data.network && $scope.data.subnet){\r\n\t\t\treturn $scope.data.name===item.name && $scope.data.desc===item.desc && $scope.data.ip_start===item.ip_start && $scope.data.ip_end===item.ip_end && $scope.data.network.id===item.network_id && $scope.data.subnet.id===item.subnet_id;\r\n\t\t\t// return $scope.data.name===item.name && $scope.data.desc===item.desc && $scope.data.ip_start===item.ip_start && $scope.data.ip_end===item.ip_end && $scope.data.resource.id===item.resource_pool_id && $scope.data.network.id===item.network_id && $scope.data.subnet.id===item.subnet_id;\r\n\t\t}\r\n\t};\r\n\t$scope.reset = function(){\r\n\t\t$scope.data = angular.copy(item);\r\n\t\t// $scope.data.resource = $scope.resources.filter(function(data){ return data.id === item.resource_pool_id })[0];\r\n\t\t$scope.data.network = $scope.networks.filter(function(data){ return data.id === item.network_id })[0];\r\n\t\tgetSubnets($scope.data.network);\r\n\t};\r\n\r\n\tvar ids = [];\r\n\tadmin.query(function(res){\r\n\t\tids = res.users.filter(function(item){ return item.permission === 'Administrator' }).map(function(item){ return item.id })\r\n\t})\r\n\tvar _id;\r\n\tvar _controllerScope = $scope;\r\n\t$scope.edit = function(){\r\n\t\t_id = this.data.id;\r\n\t\tsc.update(\r\n\t\t\t{\r\n\t\t\t\t\"id\":this.data.id,\r\n\t\t\t\t\"name\": this.data.name,\r\n\t\t\t\t\"desc\": this.data.desc,\r\n\t\t\t\t// \"resource_pool_id\": this.data.resource.uuid,\r\n\t\t\t\t\"network_id\": this.data.network.id,\r\n\t\t\t\t\"subnet_id\": this.data.subnet.id,\r\n\t\t\t\t\"ip_start\": this.data.ip_start || '',\r\n\t\t\t\t\"ip_end\": this.data.ip_end || ''\r\n\t\t\t},\r\n\t\t\tfunction(res){\r\n\t\t\t\tif(res.id ==_id){\r\n\t\t\t\t\tsc.query(function(res){\r\n\t\t\t\t\t\tif($scope.owner){\r\n\t\t\t\t\t\t\tvar newRows = res.pools_.sort(function(a,b){\r\n\t\t\t\t\t\t\t\tif(a.name === 'default'){\r\n\t\t\t\t\t\t\t\t\treturn -1\r\n\t\t\t\t\t\t\t\t}else if(b.name === 'default'){\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tvar schoolrooms = [];\r\n\t\t\t\t\t\t\tres.pools_.forEach(function(item){\r\n\t\t\t\t\t\t\t\tif(item.user_ids.some(data => data === user.id)){\r\n\t\t\t\t\t\t\t\t\tschoolrooms.push(item);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tvar newRows = schoolrooms;\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                \t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle\t:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent\t: $$$I18N.get(\"教室重复\").replace(\"XXX\",res.name),\r\n\t\t\t\t\t\tcolor\t: \"#C46A69\",\r\n\t\t\t\t\t\ticon\t: \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tfunction(){  }\r\n\t\t);\r\n\r\n\t};\r\n}])\r\n\r\n.controller(\"addSchoolroomDialog\", [\r\n\"$scope\", \"$modalInstance\", \"SchoolRoom\", \"Network\", \"Admin\",\"$$$I18N\", \"UserRole\",\"ResourcePool\",\r\nfunction($scope, $modalInstance, schoolroom, network, admin, $$$I18N, UserRole, ResourcePool){\r\n\tlet user = UserRole.currentUser;\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = {};\r\n\t$scope.master = {};\r\n\r\n\tvar ids = [];\r\n\tadmin.query(function(res){\r\n\t\tids = res.users.filter(function(item){ return item.permission === 'Administrator' }).map(function(item){ return item.id });\r\n\t})\r\n\t// ResourcePool.query(function(res){\r\n\t// \t$scope.resources = res.result;\r\n\t// \t$scope.data.resource = $scope.resources[0];\r\n\t// });\r\n\tfunction getSubnets(Network){\r\n\t\t$scope.network_loading = true;\r\n\t\tnetwork.query_sub({id: Network.id }, function(res){\r\n\t\t\t$scope.subnets = res.result;\r\n\t\t\t$scope.data.subnet = $scope.subnets[0];\r\n\t\t\t$scope.network_loading = false;\r\n\t\t})\t\r\n\t};\r\n\tnetwork.query(function(data){\r\n\t\t$scope.networks = data.networks.filter(function(item){ return item.subnets.length!==0 });\r\n\t\t$scope.data.network = $scope.networks[0];\r\n\t\tgetSubnets($scope.data.network);\r\n\t})\r\n\t$scope.switchSubnet = function(val){\r\n\t\tgetSubnets(val);\r\n\t}\r\n\tvar _controllerScope = $scope;\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tschoolroom.save({\r\n\t\t\t\t\"name\": this.data.name,\r\n\t\t\t\t\"desc\": this.data.desc,\r\n\t\t\t\t// \"resource_pool_id\": this.data.resource.uuid,\r\n\t\t\t\t\"subnet_id\": this.data.subnet.id,\r\n\t\t\t\t\"network_id\": this.data.network.id,\r\n\t\t\t\t\"user_ids\": ids,\r\n\t\t\t\t\"ip_start\": this.data.ip_start || '',\r\n\t\t\t\t\"ip_end\": this.data.ip_end || ''\r\n\t\t\t},\r\n\t\t\tfunction(data){\r\n\t\t\t\tif(!data.name || data.name == _this.data.name){\r\n\t\t\t\t\tschoolroom.query(function(res){\r\n\t\t\t\t\t\tif($scope.owner){\r\n\t\t\t\t\t\t\tvar newRows = res.pools_.sort(function(a,b){\r\n\t\t\t\t\t\t\t\tif(a.name === 'default'){\r\n\t\t\t\t\t\t\t\t\treturn -1\r\n\t\t\t\t\t\t\t\t}else if(b.name === 'default'){\r\n\t\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tvar schoolrooms = [];\r\n\t\t\t\t\t\t\tres.pools_.forEach(function(item){\r\n\t\t\t\t\t\t\t\tif(item.user_ids.some(data => data === user.id)){\r\n\t\t\t\t\t\t\t\t\tschoolrooms.push(item);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tvar newRows = schoolrooms;\r\n\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n                \t\t\tArray.prototype.push.apply(_controllerScope.rows,newRows);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar logInfor = UserRole.currentUser;\r\n\t\t\t\t\tlogInfor.pool = logInfor.pool.concat(data.id);\r\n\t\t\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(logInfor));\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent\t: $$$I18N.get(\"教室重复\").replace(\"XXX\",data.name),\r\n\t\t\t\t\t\tcolor\t: \"#C46A69\",\r\n\t\t\t\t\t\ticon\t: \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\ttimeout\t: 6000\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.reset = function() {\r\n\t\t$scope.data=angular.copy($scope.master);\r\n\t};\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.master,$scope.data);\r\n\t};\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/terminal/controller.schoolroom.js","angular.module(\"vdi.terminal\", [])\r\n\r\n.factory(\"Session\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/client/session\", null, {\r\n\t\tquery: { method: \"GET\", url: $Domain + \"/thor/client/session\", isArray: false },\r\n\t\t\r\n\t\t\"delete\": {method: \"DELETE\"}\r\n\t\t\r\n\t});\r\n}])\r\n\r\n.factory(\"Client\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\tvar res = $resource($Domain + \"/thor/client\", { id: \"@id\" }, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false, url: $Domain + \"/thor/clients\" },\r\n\t\tlist:\r\n\t\t\t{ method: \"GET\", isArray: false, url: $Domain + \"/thor/client/pool/:id\" },\r\n\t\t\"delete\":\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/clients\" },\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/client/:id\" },\r\n\t\tgetConfig:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/client/config/:id\", params: { \"id\": \"@id\" } },\r\n\t\talive:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/client/alive\" },\r\n\t\tassignIps:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/clients\" },\r\n\t\tmodifyConfig:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/client/config\" },\r\n\t\tchangeNames:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/client/changeNames\" },\r\n\t\tchangePools:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/client/changePools\" },\r\n\t\tshutdowns:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/clients\" },\r\n\t\tseePwd:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/client/seePwd\" },\r\n\t\twakeups:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/clients\" },\r\n\t\tkillSessions:\r\n\t\t\t{method: \"DELETE\", url: $Domain + \"/thor/client/session\"},\r\n\t\tpolling:\r\n\t\t\t{method: \"GET\", url: $Domain + \"/thor/client/order\"},//轮询\r\n\t\tsorting:\r\n\t\t\t{method: \"POST\", url: $Domain + \"/thor/client/order\"},//开始排序\r\n\t\tsetPlaceholder:\r\n\t\t\t{method: \"PUT\", url: $Domain + \"/thor/client/order\"},//设置占位\r\n\t\tcancelsort:\r\n\t\t\t{method: \"DELETE\", url: $Domain + \"/thor/client/order\"},//取消排序\r\n\t\tdynamicPasswd:\r\n\t\t\t{method: \"POST\", url: $Domain + \"/thor/client/get_dynamic_passwd_for_client\"}\r\n\r\n\t});\r\n\treturn res;\r\n}])\r\n\r\n.controller(\"vdiTerminalClientManageController\",[\r\n\"$scope\", \"$modal\", \"Client\", \"SchoolRoom\", \"$interval\", \"$filter\", \"$$$I18N\", \"UserRole\",\"$location\",\r\nfunction($scope, $modal, client, schoolroom, $interval, $filter, $$$I18N, UserRole,$location){\r\n\t// let hasDesktop = UserRole.currentUserRoles.filter(function(role){ return role=='Desktop' }).length;\r\n\t// let hasDesktopTech = UserRole.currentUserRoles.filter(function(role){ return role=='Teaching_desktop' }).length;\r\n\t// let hasDesktopPerson = UserRole.currentUserRoles.filter(function(role){ return role=='Personal_desktop' }).length;\r\n\t// $scope.linkTech = hasDesktop && hasDesktopTech ? true:false;\r\n\t// $scope.linkPerson = hasDesktop && hasDesktopPerson ? true:false;\r\n\r\n\tlet user = UserRole.currentUser;\r\n\tif(!user){ return }\r\n\t$scope.rows = []; $scope.loading = true; $scope.sorttype = \"\"; var allrows = [];var _allrows = {};var loaded = false;var selectedRows = [];\r\n\t\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"clientIDS\", $filter(\"paging\")($scope.rows, $scope.currentPage, $scope.pagesize).map(function(item){ return item.id }));\r\n\t}, 1000);\r\n\t$scope.$on(\"clientsRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(loaded){\r\n\t\t\t\tif(!_allrows[item.id]){\r\n\t\t\t\t\tvar addClient = {};\r\n\t\t\t\t\tfor(var i in item){\r\n\t\t\t\t\t\taddClient[i] = item[i];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _ipClient = addClient.client_ip.split(\".\");\r\n\t\t\t\t\taddClient._ipClient = (_ipClient[0] << 16) + (_ipClient[1] << 8) + Number(_ipClient[2]) + (_ipClient[3] / 1000);\r\n\t\t\t\t\taddClient._ipTarget = null;\r\n\t\t\t\t\tallrows.push(addClient);_allrows[addClient.id] = addClient;\r\n\t\t\t\t\tvar storageClassroom = $scope.classrooms.filter(function(cla){ return cla.id == $$$storage.getSessionStorage('classroom')})[0].name;\r\n\t\t\t\t\tconsole.log(\"addClient and storageClassroom\",addClient,storageClassroom);\r\n\t\t\t\t\tif(addClient.pool===storageClassroom){\r\n\t\t\t\t\t\t$scope.rows.push(addClient);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t});\r\n\tclient.query(function(res){\r\n\t\tallrows = res.clients;\r\n\t\t// allrows = res.clients.filter(function(item){ return item.order; }).sort(function(a,b){ return a.order>b.order?1:-1; }).concat(res.clients.filter(function(item){ return !item.order; }));\r\n\t\tallrows.forEach(function(item,index){\r\n\t\t\t_allrows[item.id] = item;\r\n\t\t\tif(index === allrows.length-1) loaded = true;\r\n\t\t});\r\n\t\tschoolroom.querywithSimple(function(res){\r\n\r\n\t\t\tvar schoolrooms = [];\r\n\t\t\tres.pools_.forEach(function(item){\r\n\t\t\t\tif(item.user_ids.filter(function(data){ return data===JSON.parse($$$storage.getSessionStorage('loginInfo')).id }).length!==0){\r\n\t\t\t\t\tschoolrooms.push(item);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t$scope.classrooms = schoolrooms;\r\n\t\t\tvar storageClassroom = $scope.classrooms.filter(function(cla){ return cla.id == $$$storage.getSessionStorage('classroom')})[0];\r\n\t\t\tvar defaultClassroom = $scope.classrooms[0];\r\n\t\t\t$scope.select = storageClassroom || defaultClassroom;\r\n\t\t\tif($location.$$search.client_pool){\r\n\t\t\t\tvar selectRoom = $scope.classrooms.filter(function(cla){ return cla.id == decodeURIComponent($location.$$search.client_pool)})[0];\r\n\t\t\t\t$scope.select = selectRoom?selectRoom:$scope.classrooms[0];\r\n\t\t\t\tif($location.$$search.ip){\r\n\t\t\t\t\t$scope.searchText = decodeURIComponent($location.$$search.ip);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t\tallrows.forEach(function(row){\r\n\t\t\tvar _ipClient = row.client_ip.split(\".\");\r\n\t\t\trow._ipClient = (_ipClient[0] << 16) + (_ipClient[1] << 8) + Number(_ipClient[2]) + (_ipClient[3] / 1000);\r\n\t\t\tvar _ipTarget;\r\n\t\t\tif(row.target_ip !== null){\r\n\t\t\t\t_ipTarget = row.target_ip.split(\".\");\r\n\t\t\t\trow._ipTarget = (_ipTarget[0] << 16) + (_ipTarget[1] << 8) + Number(_ipTarget[2]) + (_ipTarget[3] / 1000);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t_ipTarget = null;\r\n\t\t\t\trow._ipTarget = null;\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.running = res.running;\r\n\t\t$scope.shutoff = res.shutoff;\r\n\r\n\t\t\r\n\t});\r\n\t$scope.$watch(\"select\",function(newvalue){\r\n\t\tif(newvalue){\r\n\t\t\tselectedRows = $scope.rows = allrows.filter(function(item){ return item.pool == newvalue.name});\r\n\t\t\t$$$storage.setSessionStorage('classroom', newvalue.id);\r\n\t\t}\r\n\t});\t\r\n\t$scope.updateData = function(text,select){\r\n\t\t$scope.rows = selectedRows.filter(function(row){\r\n\t\t\trow._selected = false;\r\n\t\t\tif(select){\r\n\t\t\t\tif(text){\r\n\t\t\t\t\treturn row.pool === select.name;\r\n\t\t\t\t}\r\n\t\t\t\treturn row.pool === select.name;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.selecteds = [];\r\n\t$scope.addselect = function(item){\r\n\t\t$scope.selecteds.push(item);\r\n\t}\r\n\t$scope.sortClientIP = function(order){\r\n\t\t$scope.rows.sort(function(a, b){\r\n\t\t\treturn (a._ipClient > b._ipClient) ? 1 : -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n\t};\r\n\t$scope.sortClientType = function(order){\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\tif(item.client_type === 97){ item._client_type='android' }\r\n\t\t\telse if(item.client_type === 98){ item._client_type='arm' }\r\n\t\t\telse if(item.client_type === 99){ item._client_type='linux' }\r\n\t\t\telse if(item.client_type === 1){ item._client_type='windows' }\r\n\t\t\telse{  }\r\n\t\t});\r\n\t\t$scope.rows.sort(function(a, b){\r\n\t\t\treturn (a._client_type > b._client_type) ? 1 : -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n\t};\r\n\t$scope.instNameSort = function(name, bool){\r\n\t\tconsole.log(11111,bool)\r\n\t\tvar reg = /\\d*$/;\r\n\t\t$scope.rows.sort(function(a,b){\r\n\t\t\tvar num_a = a.inst_display_name ? Number(a.inst_display_name.match(reg)[0]) : -2;\r\n\t\t\tvar num_b = b.inst_display_name ? Number(b.inst_display_name.match(reg)[0]) : -2;\r\n\t\t\treturn (num_a > num_b) ? -1 : 1;\r\n\t\t});\r\n\t\tif(bool){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n\t};\r\n\t$scope.sortTargetIP = function(order){\r\n\t\t$scope.rows.sort(function(a, b){\r\n\t\t\tif(a._ipTarget === null)\r\n\t\t\t\treturn 2;\r\n\t\t\tif(a._ipTarget != null && b._ipTarget != null && a._ipTarget > b._ipTarget)\r\n\t\t\t\treturn 1;\r\n\t\t\tif(a._ipTarget != null && b._ipTarget != null && a._ipTarget <= b._ipTarget)\r\n\t\t\t\treturn -1;\r\n\t\t});\r\n\t\tif(order){\r\n\t\t\t$scope.rows.reverse();\r\n\t\t}\r\n\t};\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesize = Number($$$storage.getSessionStorage('terminal_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n\t\t$$$storage.setSessionStorage('terminal_pagesize', newvalue ? newvalue : 0);\r\n\t});\r\n\r\n    $scope.selectUp = function(){\r\n        var rows = $scope.rows;\r\n        return rows.some(function (row) {\r\n            return row._selected && row.is_up;\r\n        });\r\n    };\r\n\r\n\t$scope.clientbind = function(item){\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t};\r\n\r\n\t$scope.clientManualSort = function(item){\r\n\t\t$scope.sorttype = \"manual\";\r\n\t\t// $scope.selected_rows = $scope.rows;\r\n\t\t$scope.selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t};\r\n\r\n\t$scope.clientAutoSort = function(item){\r\n\t\t$scope.sorttype = \"auto\";\r\n\t\t$scope.selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t};\r\n\t$scope.configure = function(item){\r\n\t\t$scope.isSingle = false;\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == true)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables != selected_rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalconfigure_TIP\"),\r\n\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t});\t\t\t\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.setSingle = function(flag){\r\n\t\t$scope.isSingle = flag;\r\n\t};\r\n\t$scope.configurename = function(item){\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == true)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables != selected_rows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalconfigureName_TIP\"),\r\n\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t});\t\t\t\r\n\t\t}\r\n\t\tif(selected_rows.length==1){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/terminal/terminal_changename.html\",\r\n\t\t\t\tcontroller: \"configureNameDialog\",\r\n\t\t\t\tscope: $scope,\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/terminal/terminal_configurename_edit.html\",\r\n\t\t\t\tcontroller: \"configureNameDialog\",\r\n\t\t\t\tscope: $scope,\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\t$scope.wakeup = function(item){\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == true)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables == selected_rows.length)\r\n\t\t\t//alert(\"终端已经唤醒\")\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP6\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\tif(ables != selected_rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='唤醒确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CLIENT_TIPGROUP1' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.name = selected_rows.filter(function(row){ if(row.is_up == false) return row;}).map(function(row){ return row.client_name; }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tclient.wakeups({\r\n\t\t\t\t\t\t\t\"method\": \"wakeup\",\r\n\t\t\t\t\t\t\tmacs: selected_rows.filter(function(row){ if(row.is_up == false) return row;}).map(function(row){ return row.client_mac; }),\r\n\t\t\t\t\t\t\tclient_names: selected_rows.filter(function(row){ if(row.is_up == false) return row;}).map(function(row){ return row.client_name; }),\r\n\t\t\t\t\t\t\tids: selected_rows.filter(function(row){\r\n\t\t\t\t\t\t\t\tif(row.is_up == false){\r\n\t\t\t\t\t\t\t\t\treturn row;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).map(function(row){\r\n\t\t\t\t\t\t\t\treturn row.id;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tvar _controllerScope = $scope;\r\n\t$scope.cancelBindingIp = function(item){\r\n\t\tvar noIP = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(!item.target_ip)\r\n\t\t\t\tnoIP ++;\r\n\t\t})\r\n\t\tif(noIP == selected_rows.length)\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent : $$$I18N.get(\"CANCELIP_TIP\"),\r\n\t\t\t\ttimeout : 6000\r\n\t\t\t});\r\n\t\tif(noIP != selected_rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='取消桌面IP'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CANCELIP_TIP1' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.name = selected_rows.filter(function(row){ if(row.target_ip) return row;}).map(function(row){ return row.client_name; }).join(', ');\r\n\t\t\t\t\tvar ids = selected_rows.filter(function(row){ if(row.target_ip) return row;}).map(function(row){ return row.id; });\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tclient.assignIps({\r\n\t\t\t\t\t\t\tmethod: \"clearIP\",\r\n\t\t\t\t\t\t\tclient_ids: ids\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\t_controllerScope.rows.forEach(function(item){\r\n\t\t\t\t\t\t\t\tif(ids.indexOf(item.id)>-1){\r\n\t\t\t\t\t\t\t\t\titem.target_ip = \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.closeTerminal = function(item){\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == false)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables == selected_rows.length)\r\n\t\t\t//alert(\"终端已经关机\")\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP7\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\tif(ables != selected_rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='关机确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CLIENT_TIPGROUP2' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-ng-disabled='loading' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' data-ng-disabled='loading' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.name = selected_rows.filter(function(row){\r\n\t\t\t\t\t\t\tif(row.is_up == true) return row;\r\n\t\t\t\t\t\t}).map(function(row){\r\n\t\t\t\t\t\t\treturn row.client_name;\r\n\t\t\t\t\t\t}).join(', ')\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\t\tclient.shutdowns({\r\n\t\t\t\t\t\t\t\t\"method\": \"shutdown\",\r\n\t\t\t\t\t\t\t\tclient_ids: selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.id; }),\r\n\t\t\t\t\t\t\t\tclient_names: selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.client_name; })\r\n\t\t\t\t\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t};\r\n\t$scope.rebootTerminal = function(item){\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == false)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables == selected_rows.length)\r\n\t\t\t//alert(\"终端已经关机\")\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP7\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\tif(ables != selected_rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='重启确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='确定重启吗' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.name = selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.client_name; }).join(', ')\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tclient.shutdowns({\r\n\t\t\t\t\t\t\t\t\"method\": \"reboot\",\r\n\t\t\t\t\t\t\t\tclient_ids: selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.id; }),\r\n\t\t\t\t\t\t\t\tclient_names: selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.client_name; })\r\n\t\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t};\r\n\r\n\t$scope.terminate = function(item){\r\n\t\tvar ables = 0;\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == false)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables == selected_rows.length)\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP8\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\t\tif(ables != selected_rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='中断确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CLIENT_TIPGROUP3' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.name = selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.client_name }).join(', ');\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tclient.killSessions({\r\n\t\t\t\t\t\t\t\tids: selected_rows.filter(function(row){ if(row.is_up == true) return row;}).map(function(row){ return row.id; })\r\n\t\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t$scope.delete = function(){\r\n\t\tvar ables = 0;var rows = $scope.rows;\r\n\t\tvar selected_rows = $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tangular.forEach(selected_rows, function(item){\r\n\t\t\tif(item.is_up == true)\r\n\t\t\t\tables ++;\r\n\t\t})\r\n\t\tif(ables == selected_rows.length ){\r\n\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent : $$$I18N.get(\"vdiTerminalClientManage_TIP9\"),\r\n\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t});\r\n\t\t}\r\n\t\telse\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CLIENT_TIPGROUP4' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.name = selected_rows.filter(function(row){ if(row.is_up == false) return row;}).map(function(row){ return row.client_name }).join(', ')\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\tclient.delete({\r\n\t\t\t\t\t\t\t\tclient_ids : selected_rows.filter(function(row){ if(row.is_up == false) return row;}).map(function(row){ return row.id; })\r\n\t\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t\tres.ids.forEach(function(item){\r\n\t\t\t\t\t\t\t\t\trows.forEach(function(data){\r\n\t\t\t\t\t\t\t\t\t\tif(data.id == item){\r\n\t\t\t\t\t\t\t\t\t\t\trows.splice(rows.indexOf(data), 1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tres.ids.forEach(function(item){\r\n\t\t\t\t\t\t\t\t\tallrows.forEach(function(data){\r\n\t\t\t\t\t\t\t\t\t\tif(data.id == item){\r\n\t\t\t\t\t\t\t\t\t\t\tallrows.splice(allrows.indexOf(data), 1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\r\n\t\t\t\t\t\t\t}, function(){});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t};\r\n\t$scope.view = function(item){\r\n\t\twindow.open(\"desktopScreenshot.html#\" + item.inst_id, \"person_desktop_\" + item.inst_id);\r\n\t};\r\n\t$scope.editPass = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/terminal/terminal_editPass.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\tvar num_day = 3600 * 1000 * 24;\r\n\t\t\t\t$scope.startDateOptions = {\r\n\t\t\t\t\tformatYear: 'yy',\r\n\t\t\t\t\tstartingDay: 1\r\n\t\t\t\t};\r\n\t\t\t\t$scope.minEndTime = function(){\r\n\t\t\t\t\treturn $scope.time.getTime() + num_day * 60;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.maxEndTime = function(){\r\n\t\t\t\t\treturn $scope.time.getTime() + num_day * 180;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.openStartDate = function($event){\r\n\t\t\t\t\tconsole.log(1111111,$event)\r\n\t\t\t\t\t$event.preventDefault();\r\n\t\t\t\t\t$event.stopPropagation();\r\n\t\t\t\t\t$scope.startDateOpened = true;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.startTimeChange = function(){\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.is_edit = false;\r\n\t\t\t\t$scope.min_passwordLe=6;$scope.max_passwordLe=20;\r\n\t\t\t\t$scope.date = new Date();\r\n\t\t\t\t$scope.houer = $scope.date.getHours();\r\n\t\t\t\t$scope.minute = $scope.date.getMinutes();\r\n\t\t\t\t$scope.calculatePass = function(){\r\n\t\t\t\t\t\r\n\t\t\t\t};\r\n\t\t\t\t$scope.editSuperPass = function(){\r\n\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize: \"md\"\r\n\t\t})\r\n\t};\r\n\t$scope.dynamicPass = function(){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/terminal/terminal_dynamicPass.html\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\tclient.dynamicPasswd(function(res){\r\n\t\t\t\t\t$scope.password = res.result;\r\n\t\t\t\t},function(){});\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t})\r\n\t}\r\n}])\r\n\r\n.controller(\"vdiTerminalSessionManageController\", [\"$scope\", \"Session\", \"$modal\", function($scope, session, $modal){\r\n\t$scope.rows = [];$scope.loading = true;\r\n\tsession.query(function(res){\r\n\t\t$scope.rows = res.clients;\r\n\t\t$scope.loading = false;\r\n\t});\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [30,20,10];\r\n    $scope.pagesize = $scope.pagesizes[0];\r\n\r\n\t$scope.terminate = function(item){\r\n\r\n\t\tvar selected_rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; })\r\n\t\t\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='中断会话'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='SESSION_TIPGROUP1'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tsession.delete({\r\n\t\t\t\t\t\t\tids: selected_rows.map(function(row){ return row.id; })\r\n\t\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\r\n\t};\r\n}])\r\n\r\n.controller(\"clientSortDialog\", [\"$scope\", \"$modalInstance\", \"$modal\", \"Client\", function($scope, $modalInstance, $modal, client){\r\n\tvar _scope = $scope;var flag = false;\r\n\t$scope.computers = $scope.selected_rows;$scope.LENGTH = $scope.computers.length;\r\n\t$scope.able_computers = $scope.computers.filter(function(item){ return item.is_up; });\r\n\t$scope.unable_computers = $scope.computers.filter(function(item){ return !item.is_up; });\r\n\t$scope.able_noset_computers = $scope.able_computers.filter(function(item){ if(item.order_status !=2) return item; });\r\n\t$scope.able_noset_FWCompu = $scope.able_noset_computers.filter(function(item){ if(!(item.client_os.indexOf('Windows') > -1 || item.client_os.indexOf('windows') > -1)) return item; });\r\n\t$scope.noset_computers = $scope.computers.filter(function(item){ if(item.order_status !=2) return item; });\r\n\t$scope.set_computers = $scope.computers.filter(function(item){ if(item.order_status ==2) return item; });\r\n\r\n\tvar ids = $scope.computers.map(function(item){ return item.id; });\r\n\tvar able_ids = $scope.able_computers.map(function(item){ return item.id; });\r\n\tvar able_noset_ids = $scope.able_noset_computers.map(function(item){ return item.id; });\r\n\tvar able_noset_FW_ids = $scope.able_noset_FWCompu.map(function(item){ return item.id; });\r\n\tvar noset_ids = $scope.noset_computers.map(function(item){ return item.id; });\r\n\tvar set_ids = $scope.set_computers.map(function(item){ return item.id; });\r\n\r\n\tvar computers = {};\r\n\t$scope.able_noset_computers.forEach(function(computer){\r\n\t\tcomputers[computer.id] = computer;\r\n\t});\r\n\r\n\t$scope.loop = false;$scope.results = 10;\r\n\r\n  //   $scope.set = function(currentItem){\r\n  //   \t$modal.open({\r\n\t\t// \ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel'>\"+\r\n\t\t// \t\t\t\"设置占位号</h4></div><div class='modal-body'><form class='form-horizontal' name='setNumber'><div class='form-group'><label class='col-xs-4 control-label required'>输入号码</label><div class='col-xs-7'><input type='number' required data-ng-model='placeholder' class='form-control'></div></div><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-ng-disabled='setNumber.$invalid'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;'>取消</button></footer></form></div></div></section>\",\r\n\t\t// \tcontroller : function($scope, $modalInstance){\r\n\t\t// \t\t$scope.ok = function(){\r\n\t\t// \t\t\tclient.setPlaceholder(\r\n\t\t// \t\t\t{ids:[currentItem.id], order:this.placeholder},\r\n\t\t// \t\t\tfunction(res){\r\n\t\t// \t\t\t\t//console.log(res)\r\n\t\t// \t\t\t\tcurrentItem.order_status = res.result[0].order_status;\r\n\t\t// \t\t\t\tcurrentItem.order = res.result[0].order;\r\n\t\t// \t\t\t\t_scope.set_computers.length++;\r\n\t\t// \t\t\t\tfor(var i=0; i<_scope.able_noset_computers.length; i++){\r\n\t\t// \t\t\t\t\tif(_scope.able_noset_computers[i].id == res.result[0].id && _scope.able_noset_computers[i].is_up == true){\r\n\t\t// \t\t\t\t\t\t_scope.able_noset_computers.splice(i,1);\r\n\t\t// \t\t\t\t\t\table_noset_ids.splice(i,1);\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t\tfor(var i=0; i<noset_ids.length; i++){\r\n\t\t// \t\t\t\t\tif(noset_ids[i] == res.result[0].id){\r\n\t\t// \t\t\t\t\t\t_scope.noset_computers.splice(i,1);\r\n\t\t// \t\t\t\t\t\tnoset_ids.splice(i,1);\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t\t//console.log(111,able_noset_ids);//console.log(222,noset_ids);\r\n\t\t// \t\t\t},function(){\r\n\r\n\t\t// \t\t\t})\r\n\t\t\t\t\t\r\n\t\t// \t\t\t$modalInstance.close();\r\n\t\t// \t\t\t//console.log(currentItem)\r\n\t\t// \t\t},\r\n\t\t// \t\t$scope.close = function(){\r\n\t\t\t\t\t\r\n\t\t// \t\t\t$modalInstance.close();\r\n\t\t// \t\t}\r\n\t\t// \t},\r\n\t\t// \tsize : \"sm\"\r\n\t\t// });\r\n  //   }\r\n\r\n  //   $scope.cancel = function(currentItem){\r\n  //   \t$modal.open({\r\n\t\t// \ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel'>\"+\r\n\t\t// \t\t\t\"取消占位号</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;'>确定取消占位号么?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;'>取消</button></footer></form></div></div></section>\",\r\n\t\t// \tcontroller : function($scope, $modalInstance){\r\n\t\t// \t\t$scope.ok = function(){\r\n\t\t// \t\t\tclient.setPlaceholder(\r\n\t\t// \t\t\t{ids:[currentItem.id], order:-1},\r\n\t\t// \t\t\tfunction(res){\r\n\t\t// \t\t\t\tcurrentItem.order_status = res.result[0].order_status;\r\n\t\t// \t\t\t\tcurrentItem.order = res.result[0].order;\r\n\t\t// \t\t\t\t_scope.set_computers.length--;\r\n\t\t// \t\t\t\tfor(var i=0; i<_scope.computers.length; i++){\r\n\t\t// \t\t\t\t\tif(_scope.computers[i].id == res.result[0].id && _scope.computers[i].is_up == true){\r\n\t\t// \t\t\t\t\t\t_scope.able_noset_computers.push(_scope.computers[i]);\r\n\t\t// \t\t\t\t\t\table_noset_ids.push(res.result[0].id);\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t// \t\t\t\tfor(var i=0; i<_scope.computers.length; i++){\r\n\t\t// \t\t\t\t\tif(_scope.computers[i].id == res.result[0].id){\r\n\t\t// \t\t\t\t\t\t_scope.noset_computers.push(_scope.computers[i]);\r\n\t\t// \t\t\t\t\t\tnoset_ids.push(res.result[0].id);\r\n\t\t// \t\t\t\t\t}\r\n\t\t// \t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t// \t\t\t\t//console.log(111,able_noset_ids);//console.log(222,noset_ids);\r\n\t\t// \t\t\t},function(){\r\n\r\n\t\t// \t\t\t});\r\n\t\t\t\t\t\r\n\t\t// \t\t\t$modalInstance.close();\r\n\t\t// \t\t},\r\n\t\t// \t\t$scope.close = function(){\r\n\t\t// \t\t\t$modalInstance.close();\r\n\t\t// \t\t}\r\n\t\t// \t},\r\n\t\t// \tsize : \"sm\"\r\n\t\t// });\r\n  //   }\r\n\r\n    $scope.cancel = function(currentItem){\r\n    \t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='取消登录序号'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CANCEL_LOGINNUM'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tclient.setPlaceholder(\r\n\t\t\t\t\t{ids:[currentItem.id], order:-1},\r\n\t\t\t\t\tfunction(res){\r\n\t\t\t\t\t\tcurrentItem.order_status = res.result[0].order_status;\r\n\t\t\t\t\t\tcurrentItem.order = res.result[0].order;\r\n\t\t\t\t\t},function(){\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n    }\r\n\r\n\tfunction time_loop(){\r\n\t\tclient.polling(\r\n\t\t\t{ client_ids: able_noset_ids },\r\n\t\t\tfunction(res){\r\n\t\t\t\tvar trueNum = 0;$scope.width = 0;\r\n\t\t\t\tres.result.forEach(function(data){\r\n\t\t\t\t\tvar computer = computers[data.id];\r\n\t\t\t\t\tconsole.log(computer, computer.order)\r\n\t\t\t\t\tif(data.order || !computer.is_up){\r\n\t\t\t\t\t\tcomputer.client_name = data.name;\r\n\t\t\t\t\t\tcomputer.client_ip = data.ip;\r\n\t\t\t\t\t\tcomputer.order = data.order;\r\n\t\t\t\t\t\ttrueNum++;\r\n\t\t\t\t\t\t$scope.width=(1/res.result.length)*trueNum*100 + \"%\";\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t$scope.computers = $scope.able_noset_computers;\r\n\t\t\t\tvar unableComputers = $scope.computers.filter(function(item){ return !item.is_up; });\r\n\t\t\t\tvar ableComputers = $scope.computers.filter(function(item){ return item.is_up; });\r\n\t\t\t\tvar nosortComputers = ableComputers.filter(function(item){ return !item.order; });\r\n\t\t\t\tvar sortedComputers = ableComputers.filter(function(item){ return item.order !== null; });\r\n\t\t\t\tsortedComputers.sort(\r\n\t\t\t\t\tfunction(item1,item2){\r\n\t\t\t\t\t\treturn item1.order > item2.order ? 1 : -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t$scope.computers = [].concat(sortedComputers, nosortComputers, unableComputers);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\tsortedComputers.map(function(item){ return item.id; }),\r\n\t\t\t\t\tnosortComputers.map(function(item){ return item.id; }),\r\n\t\t\t\t\tunableComputers.map(function(item){ return item.id; })\r\n\t\t\t\t);\r\n\t\t\t\tif(angular.element(\".box-all\").length){\r\n\t\t\t\t\tvar t = setTimeout(function(){\r\n\t\t\t\t\t\ttime_loop();\r\n\t\t\t\t\t}, 3000);\r\n\t\t\t\t}\r\n\t\t\t\tif(flag){\r\n\t\t\t\t\tclearTimeout(t);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tfunction(){\r\n\t\t\t\tif(angular.element(\"\").length){\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\ttime_loop();\r\n\t\t\t\t\t}, 6000);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n    $scope.startSort = function(){\r\n    \tif($scope.sorttype == \"manual\"){\r\n\t\t\t$scope.sorting = true;$scope.Manualsorting = true;\r\n\r\n\t\t\tclient.setPlaceholder(\r\n\t\t\t\t{ids:able_noset_ids, order:-1},\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\tres.result.forEach(function(data){\r\n\t\t\t\t\t\tvar computer = computers[data.id];\r\n\t\t\t\t\t\tcomputer.order = null;\r\n\t\t\t\t\t\tconsole.log(computer, computer.order)\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$scope.loop = true;\r\n\t\t\t\t\ttime_loop();\r\n\t\t\t\t},function(){\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\tclient.sorting(\r\n\t\t\t\t{\tids:able_noset_ids,\r\n\t\t\t        start_num:this.start_num,\r\n\t\t\t        clientname_prefix:this.clientname_prefix,\r\n\t\t\t        clientname_suffix:null\r\n\t\t\t    },\r\n\t\t\t    function(res){\r\n\r\n\t\t\t\t},\r\n\t\t\t\tfunction(){\r\n\r\n\t\t\t\t});\r\n    \t}\r\n    \tif($scope.sorttype == \"auto\"){\r\n    \t\tvar trueNum = 0;$scope.width = 0;\r\n\t\t\t$scope.computers = $scope.noset_computers;$scope.sorting = true;\r\n\t\t\tclient.setPlaceholder(\r\n\t\t\t\t{ids:noset_ids, order:this.start_num, auto_order:1},\r\n\t\t\t\tfunction(res){\r\n\t\t\t\t\tfor(var i=0; i<res.result.length; i++){\r\n\t\t\t\t\t\tif(res.result[i].order){\r\n\t\t\t\t\t\t\t$scope.computers[i].order = res.result[i].order;\r\n\t\t\t\t\t\t\ttrueNum++;\r\n\t\t\t\t\t\t\t$scope.width=(1/res.result.length)*trueNum*100 + \"%\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},function(){})\r\n    \t}\r\n    }\r\n\r\n\t$scope.cancelSort = function(){\r\n\t\tflag = true;\r\n\t\tclient.cancelsort({ids:able_noset_ids}, function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.ok = function(){};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"clientBindingIpDialog\", [\"$scope\", \"$modalInstance\", \"Client\", \"SchoolRoom\", \"Network\", function($scope, $modalInstance, client, schoolroom, network){\r\n\r\n\t$scope.terminallists = $scope.rows.filter(function(item){ return item._selected; });\r\n\tvar data = $scope.startIP = $scope.terminallists[0].target_ip;\r\n\tschoolroom.query(function(res){\r\n\t\tangular.forEach(res.pools_, function(item){\r\n\t\t\tif(item.name == $scope.select.name){\r\n\t\t\t\t$scope.network = item.network_name+\"(\"+ item.dhcp_start + \"~\" +item.dhcp_end +\")\";\r\n\t\t\t\t$scope.network_id = item.network_id;\r\n\t\t\t\t$scope.subnet_id = item.subnet_id;\r\n\t\t\t\t$scope.ip_start = item.dhcp_start;\r\n\t\t\t\t$scope.ip_end = item.dhcp_end;\r\n\t\t\t}\r\n\t\t})\r\n\t});\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals(this.startIP,data);\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tclient.assignIps({\r\n\t\t\tmethod:\"changeIp\",\r\n\t\t\tstart_ip:this.startIP,\r\n\t\t\tclient_ids:$scope.terminallists.map(function(item){ return item.id}),\r\n\t\t\tnetwork_id:this.network_id,\r\n\t\t\tsubnet_id: this.subnet_id},\r\n\t\t\tfunction(res){\r\n\t\t\t\tvar newip = res.result.map(function(item){ return item.ip});\r\n\t\t\tfor(var i=0; i<newip.length; i++)\r\n\t\t\t\t$scope.terminallists[i].target_ip = newip[i];\r\n\t\t\t$modalInstance.close();\r\n\t\t})\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"configureTerminalParameterDialog\", [\"$scope\", \"$modalInstance\",\"Client\", \"$$$I18N\",function($scope, $modalInstance, client, $$$I18N){\r\n\t$scope.config = {};\r\n\r\n\t$scope.init_checkMode = function(mode){\r\n\t\tif(mode==0  && $scope.config.mode_countdown!==0){\r\n\t\t\t$scope.in_hybird = true;\r\n\t\t\t$scope.config.mode_countdown = $scope.config.mode_countdown;\r\n\t\t\t$scope.config.final_mode = $scope.config.final_mode;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.in_hybird = false;\r\n\t\t\t$scope.config.mode_countdown = \"\";\r\n\t\t\t$scope.config.final_mode = \"\";\r\n\t\t}\r\n\t}\r\n\t$scope.checkMode = function(mode){\r\n\t\t$scope.config.enabled_multiple = 0;\r\n\t\tif(mode==0){\r\n\t\t\t$scope.in_hybird = true;\r\n\t\t\t$scope.config.mode_countdown = 5;\r\n\t\t\t$scope.config.final_mode = 1;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.in_hybird = false;\r\n\t\t\t$scope.config.mode_countdown = \"\";\r\n\t\t\t$scope.config.final_mode = \"\";\r\n\t\t}\r\n\t}\r\n\t$scope.inHybird = function(){\r\n\t\tif($scope.in_hybird){\r\n\t\t\t$scope.in_hybird = false;\r\n\t\t\t$scope.config.mode_countdown = \"\";\r\n\t\t\t$scope.config.final_mode = \"\";\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.in_hybird = true;\r\n\t\t\t$scope.config.mode_countdown = 5;\r\n\t\t\t$scope.config.final_mode = 1;\r\n\t\t}\r\n\t}\r\n\t$scope.fullscreen = function(mode){\r\n\t\tif(mode === 2){\r\n\t\t\t$scope.config.auto_start = '1';\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.config.auto_start = '0';\r\n\t\t}\r\n\t}\r\n\t$scope.setWinWait = function(val){\r\n\t\tconsole.log(val);\r\n\t\tif(val){\r\n\t\t\t$scope.config.win_wait_time = 2;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.config.win_wait_time = '';\r\n\t\t}\r\n\t};\r\n\t$scope.setWaitTime = function(val){\r\n\t\tif(val){\r\n\t\t\t$scope.config.wait_time = $scope.config.wait_time?$scope.config.wait_time:5;\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.config.wait_time = 5;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.dialogSet = function(key, value){\r\n\t\t$scope.config[key] = value;\r\n\t};\r\n\r\n\tvar selected_rows = $scope.rows.filter(function(row){ return row._selected && row.is_up; });\r\n\tvar has_windows_android = selected_rows.filter(function(item){ return item.client_type === 1 || item.client_type === 999 || item.client_type === 97 }).length===0?false:true;\r\n\t$scope.has_windows = selected_rows.filter(function(item){ return item.client_type === 1 || item.client_type === 999}).length==0 && $scope.isSingle ? false:true;\r\n\t$scope.has_linux = selected_rows.filter(function(item){ return item.client_type === 99 }).length==0 && $scope.isSingle ? false:true;\r\n\t$scope.selecLen = selected_rows.length;\r\n\r\n\t$scope.loading = true;\r\n\tclient.getConfig({id:selected_rows[0].id}, function(data){\r\n\t\t$scope.loading = false;\r\n\t\t$scope.config = new2old(data.config);\r\n\t\t$scope.init_checkMode($scope.config.desktop_mode);\r\n\t}, function(error){ $scope.loading = false; $scope.getError = true; });\r\n\t$scope.ok = function(){\r\n\t\t$scope.sending = true;\r\n\t\tvar id = selected_rows.filter(function(row){\r\n\t\t\treturn row.is_up == true;\r\n\t\t}).map(function(row){\r\n\t\t\treturn row.id;\r\n\t\t});\r\n\t\t// 提交前拉取一次最新的数据，并计算出 diff，仅仅提交不一样的部分\r\n\t\t// client.getConfig({id: selected_rows[0].id}, function(data){\r\n\t\t\t// var changes = difference(old2new($scope.config), data.config);\r\n\t\t\tvar changes = old2new($scope.config);\r\n            var flatChanges = flatObject(changes);\r\n\t\t\t// console.log('提交前拉取一次最新的数据', data.result)\r\n\t\t\t// console.log('修改后的老数据', $scope.config)\r\n\t\t\t// console.log('修改后的老数据转成新数据', old2new($scope.config))\r\n\t\t\t// console.log('差异', changes)\r\n\r\n\t\t\tclient.modifyConfig({\r\n                id: id,\r\n                server: flatChanges,\r\n                client: changes\r\n            }, function(){\r\n\t\t\t\t$modalInstance.close();\r\n\t\t\t}, function(){\r\n\t\t\t\t$scope.sending = false;\r\n\t\t\t\t$scope.failTip = true;\r\n\t\t\t})\r\n\t\t// });\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t/* 旧数据格式 => 新数据格式 */\r\n\tfunction old2new(oldData){\r\n\t\tvar newData = {\r\n\t\t\t\"desktop_mode\": {\r\n\t            \"desktop_mode\": $scope.config.desktop_mode * 1, // 0 混合模式, 1 教学模式, 2 个人模式\r\n\t            \"mode_countdown\": $scope.config.mode_countdown * 1, // 混合模式-倒数多少秒\r\n\t            \"final_mode\": $scope.config.final_mode * 1, // 混合模式-倒数多少秒自动进入 1 教学桌面, 2 个人桌面 \r\n\t            \"wait_time\": $scope.config.autologin ? $scope.config.wait_time * 1 : 0 // 是否自动进入桌面, 0 不自动进入, 倒计时 3-600 秒自动进入桌面\r\n\t        },\r\n\t        \"enabled_multiple\": $scope.config.enabled_multiple * 1, // 0,1 个人模式-多桌面模式\r\n\t        \"self_service\": $scope.config.self_service_teach + \"\" + $scope.config.self_service_personal + \"\", // 虚拟机自助 '11'教学桌面启用,个人桌面启用; '10'教学桌面启用,个人桌面不启用; '01'教学桌面不启用,个人桌面启用; '00'教学桌面不启用,个人桌面不启用\r\n\t\t\t\"mode1_shutdown_with_client\":  $scope.config.mode1_shutdown_with_client * 1, // 0, 1教学桌面关机策略-关闭桌面同时关闭终端\r\n\t\t\t\"mode1_shutdown_with_pc\": $scope.config.mode1_shutdown_with_pc * 1, // 0, 1教学桌面关机策略-关闭终端同时关闭桌面\r\n\t\t\t\"mode2_shutdown_with_client\": $scope.config.mode2_shutdown_with_client * 1, // 0, 1个人桌面关机策略-关闭桌面同时关闭终端\r\n\t\t\t\"mode2_shutdown_with_pc\": $scope.config.mode2_shutdown_with_pc * 1, // 0, 1个人桌面关机策略-关闭终端同时关闭桌面\r\n\t\t\t\"resolution\": {\r\n\t            \"current_resolution\": $scope.config.current_resolution.key, // 个性化-分辨率\r\n\t        },\r\n\t         \"console\": {\r\n\t            \"console_ip\": $scope.config.console_ip // 个性化-服务器IP\r\n\t        },\r\n\t        \"init_pwd\": $scope.config.init_pwd, // 个性化-超级密码\r\n\t        \"windows\": {\r\n\t\t\t\t\"shortcutKey\": $scope.config.windows_shortcut_key * 1, // 0, 1 快捷键-Windows快捷键\r\n\t\t\t\t\"fullscreen\": $scope.config.fullscreen * 1, // Windows客户端运行模式: 0 窗口模式, 1 全屏可退出, 2 全屏不可退出\r\n\t\t\t\t\"auto_start\": $scope.config.auto_start * 1, // 0, 1开机自启\r\n\t\t\t\t\"connect_type\": $scope.config.connect_type, // Hyper-V桌面连接方式: rdp, vm\r\n\t\t\t\t\"auto_exit\": $scope.config.auto_exit * 1, // 与服务器连接断开后自动退出: 0, 1\r\n\t\t\t\t\"win_wait_time\": $scope.config.win_wait_time * 1, // 等待时间 1-30\r\n\t\t\t\t\"disk_share_to_desktop\": $scope.config.disk_share_to_desktop * 1 // 磁盘共享到桌面: 0, 1\r\n\t\t\t},\r\n\t\t\t\"linux\": {\r\n\t\t\t\t\"shortcutKey\": $scope.config.linux_shortcut_key * 1, // 0, 1 快捷键-Linux快捷键\r\n\t\t\t\t\"auto_switch\": $scope.config.auto_switch * 1, // 0, 1 自动切换\r\n\t\t\t\t\"auto_switch_seconds\": $scope.config.auto_switch_seconds * 1 // 虚系统中断时，倒数 3-600 s自动进入实系统\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newData;\r\n\t};\r\n\t/* 新数据格式 => 旧数据格式 */\r\n\tfunction new2old(newData){\r\n\t\t// 给不完整的新格式数据设置默认值\r\n\t\tvar resolutions = [];\r\n\t\tnewData.resolution.support_resolution.forEach(function(item){\r\n\t\t\tif(item=='best'){\r\n\t\t\t\tresolutions.push({key: 'best', value: $$$I18N.get(\"最佳分辨率\")})\r\n\t\t\t}else{\r\n\t\t\t\tresolutions.push({key: item, value: item})\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar hasCurrentResolution = newData.resolution.support_resolution.filter(function(item){ return item==newData.resolution.current_resolution }).length;\r\n\t\tif(!hasCurrentResolution){\r\n\t\t\tresolutions.push({key: newData.resolution.current_resolution, value: newData.resolution.current_resolution});\r\n\t\t}\r\n\t\tvar oldData = {\r\n\t\t\tdesktop_mode: newData.desktop_mode.desktop_mode + \"\",\r\n\t\t\tfinal_mode: newData.desktop_mode.final_mode + \"\",\r\n\t\t\tmode_countdown: newData.desktop_mode.mode_countdown,\r\n\t\t\tenabled_multiple: newData.enabled_multiple + \"\",\r\n\t\t\twait_time: newData.desktop_mode.wait_time,\r\n\t\t\tautologin: newData.desktop_mode.wait_time == 0 ? false:true,\r\n\t\t\t\r\n\t\t\tself_service_teach: newData.self_service.slice(0,1),\r\n\t\t\tself_service_personal: newData.self_service.slice(1),\r\n\t\t\tmode1_shutdown_with_client: newData.mode1_shutdown_with_client + \"\",\r\n\t\t\tmode1_shutdown_with_pc: newData.mode1_shutdown_with_pc + \"\",\r\n\t\t\tmode2_shutdown_with_client: newData.mode2_shutdown_with_client + \"\",\r\n\t\t\tmode2_shutdown_with_pc: newData.mode2_shutdown_with_pc + \"\",\r\n\r\n\t\t\tsupport_resolution: resolutions,\r\n\t\t\tcurrent_resolution: resolutions.filter(function(item){ return item.key == newData.resolution.current_resolution })[0],\r\n\t\t\tconsole_ip: newData.console.console_ip,\r\n\t\t\tinit_pwd: newData.init_pwd\r\n\t\t};\r\n\t\t// 如果是windows端就赋值windows参数，否则就用默认值\r\n\t\tif(newData.windows){\r\n\t\t\toldData.windows_shortcut_key = newData.windows.shortcutKey + \"\";\r\n\t\t\toldData.fullscreen  =  newData.windows.fullscreen + \"\";\r\n\t\t\toldData.auto_start  =  newData.windows.auto_start + \"\";\r\n\t\t\toldData.connect_type  =  newData.windows.connect_type;\r\n\t\t\toldData.auto_exit  =  newData.windows.auto_exit + \"\";\r\n\t\t\toldData.win_wait_time  =  newData.windows.auto_exit?newData.windows.win_wait_time:\"\";\r\n\t\t\toldData.disk_share_to_desktop  =  newData.windows.disk_share_to_desktop + \"\";\r\n\t\t}else{\r\n\t\t\toldData.windows_shortcut_key = \"1\";\r\n\t\t\toldData.fullscreen = \"0\";\r\n\t\t\toldData.auto_start = \"0\";\r\n\t\t\toldData.connect_type = 'rdp';\r\n\t\t\toldData.auto_exit = \"0\";\r\n\t\t\toldData.win_wait_time = \"\";\r\n\t\t\toldData.disk_share_to_desktop = \"0\";\r\n\t\t}\r\n\t\t// 如果是linux端就赋值linux参数，否则就用默认值\r\n\t\tif(newData.linux){\r\n\t\t\toldData.linux_shortcut_key = newData.linux.shortcutKey + \"\";\r\n\t\t\toldData.auto_switch = newData.linux.auto_switch + \"\";\r\n\t\t\toldData. auto_switch_seconds = newData.linux.auto_switch?newData.linux.auto_switch_seconds:\"\";\r\n\t\t}else{\r\n\t\t\toldData.linux_shortcut_key = \"1\";\r\n\t\t\toldData.auto_switch = \"0\";\r\n\t\t\toldData.auto_switch_seconds = \"\";\r\n\t\t}\r\n\t\treturn oldData;\r\n\t}\r\n\r\n    var isObject = require(\"lodash/isObject\");\r\n    var isEqual = require(\"lodash/isEqual\");\r\n    var transform = require(\"lodash/transform\");\r\n    // 计算两个 object 的差异\r\n    function difference(object, base) {\r\n\t\tfunction changes(object, base) {\r\n\t\t\treturn transform(object, function(result, value, key) {\r\n\t\t\t\tif (!isEqual(value, base[key])) {\r\n\t\t\t\t\tresult[key] = (isObject(value) && isObject(base[key])) ? changes(value, base[key]) : value;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn changes(object, base);\r\n\t}\r\n    function flatObject(obj){\r\n        var ret = {};\r\n        var flatFn = function(o){\r\n            Object.keys(o).forEach(function(k){\r\n                var v = o[k];\r\n                if(typeof v === \"number\" || typeof v === \"string\") {\r\n                    ret[k] = v;\r\n                } else if(isObject(v)) {\r\n                    flatFn(v);\r\n                }\r\n            });\r\n        };\r\n        flatFn(obj);\r\n        return ret;\r\n    }\r\n}])\r\n\r\n.controller(\"configureClassroomDialog\", [\"$scope\", \"$modalInstance\", \"Client\", function($scope, $modalInstance, client){\r\n\t$scope.terminallists = $scope.rows.filter(function(item){ return item._selected; });\r\n\r\n\t$scope.poollists = $scope.classrooms.filter(function(item){ if(item.name !== $scope.select.name) return item;});\r\n\t$scope.pool = $scope.poollists[0];\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.item, $scope.rows) \r\n\t\t\t\t|| angular.equals($scope.currentItem, $scope.rows);\r\n\t};\r\n\r\n\t$scope.ok = function(){\r\n\t\tclient.changePools(\r\n\t\t{\r\n\t\t\tclient_ids:$scope.terminallists.map(function(item){ return item.id}),\r\n\t\t\tpool_id:this.pool.id\r\n\t\t},\r\n\t\tfunction(res){\r\n\t\t\tangular.forEach($scope.terminallists, function(item){\r\n\t\t\t\titem.target_ip = null;\r\n\t\t\t\titem.order = null;\r\n\t\t\t\t$scope.rows.splice($scope.rows.indexOf(item),1);\r\n\t\t\t});\r\n\t\t\tvar newPool = res.result.map(function(item){ return item.pool_id});\r\n\t\t\tfor(var i=0; i<newPool.length; i++)\r\n\t\t\t\t$scope.terminallists[i].pool = newPool[i];\r\n\t\t\t$modalInstance.close();\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n.controller(\"configureNameDialog\", [\"$scope\", \"$modalInstance\", \"Client\", function($scope, $modalInstance, client){\r\n\t$scope.terminallists = $scope.rows.filter(function(item){ return item._selected && item.is_up; });\r\n\t$scope.terminal = $scope.terminallists[0].client_name;\r\n\t$scope.ok = function(){\r\n\t\tclient.changeNames(\r\n\t\t{\r\n\t\t\tclient_ids:$scope.terminallists.map(function(item){ return item.id}),\r\n\t\t\tprefix:this.prename\r\n\t\t},\r\n\t\tfunction(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/terminal/controller.terminal.js","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isEqual.js","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsEqualDeep.js","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_listCacheClear.js","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_listCacheDelete.js","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_listCacheGet.js","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_listCacheHas.js","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_listCacheSet.js","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stackClear.js","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stackDelete.js","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stackGet.js","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stackHas.js","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stackSet.js","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsNative.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getRawTag.js","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_objectToString.js","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isMasked.js","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_coreJsData.js","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getValue.js","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapCacheClear.js","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Hash.js","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hashClear.js","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hashDelete.js","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hashGet.js","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hashHas.js","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hashSet.js","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapCacheDelete.js","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isKeyable.js","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapCacheGet.js","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapCacheHas.js","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapCacheSet.js","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_SetCache.js","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_setCacheAdd.js","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_setCacheHas.js","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arraySome.js","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_cacheHas.js","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_equalByTag.js","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Uint8Array.js","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_mapToArray.js","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_setToArray.js","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_equalObjects.js","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getAllKeys.js","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseGetAllKeys.js","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arrayPush.js","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getSymbols.js","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arrayFilter.js","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/stubArray.js","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arrayLikeKeys.js","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseTimes.js","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsArguments.js","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/stubFalse.js","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsTypedArray.js","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseUnary.js","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_nodeUtil.js","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseKeys.js","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_isPrototype.js","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_nativeKeys.js","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/isArrayLike.js","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getTag.js","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_DataView.js","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Promise.js","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_Set.js","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_WeakMap.js","var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/transform.js","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arrayEach.js","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseCreate.js","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseForOwn.js","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseFor.js","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_createBaseFor.js","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIteratee.js","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseMatches.js","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseIsMatch.js","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getMatchData.js","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseMatchesProperty.js","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/get.js","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_stringToPath.js","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_memoizeCapped.js","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/memoize.js","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/toString.js","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseToString.js","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_arrayMap.js","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/hasIn.js","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseHasIn.js","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_hasPath.js","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/identity.js","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/property.js","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_baseProperty.js","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_basePropertyDeep.js","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/_lodash@4.17.5@lodash/_getPrototype.js","angular.module(\"vdi.resource\", [\"vdi.resource.pool\",\"vdi.resource.console\",\"vdi.resource.storage\"])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/resource/controllers.js","/**\r\n* vdi.resource.storage Module\r\n*\r\n* Description\r\n*/\r\n\r\nangular.module('vdi.resource.storage', [])\r\n.factory('Storage', ['$resource','$Domain', function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/storages\", null, {\r\n\t\tquery: \r\n\t\t\t{ method: \"GET\"},\r\n\t\tget_iscsi:\r\n\t\t\t{ method: \"GET\",url:$Domain + \"/thor/storage/getScsi\"},\r\n\t\t// 删除存储\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/storage\"},\r\n\t\t// 新增存储\r\n\t\tadd: \r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/storage\"},\r\n\t\tget_lun:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/storages/:storage_type\",params:{storage_type:\"@storage_type\"}},\r\n\t\t//获取管理节点\r\n\t\tget_node:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/resource/nodes\"},\r\n\t\t//配置公共存储\r\n\t\tconfig_public_storage:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/storages\"},\r\n\t\t//获取公共存储\r\n\t\tget_public_storage:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/storages\"},\r\n\t\t//获取主机下的可用存储\r\n\t\tget_luns:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/list_storage_with_hosts\"}\r\n\t});\r\n}])\r\n.filter('ObjectFilter',function(){\r\n\treturn function(data,key){\r\n\t\tvar rtn = {};\r\n\t\tif(key){\r\n\t\t\tdata[key] && (rtn[key] = data[key]);\r\n\t\t}else{\r\n\t\t\trtn = data;\r\n\t\t}\r\n\t\treturn rtn;\r\n\t}\r\n})\r\n.controller('vdiResourceStorageListController', ['$scope','$http','Storage','$modal',\"$filter\",\r\n\tfunction($scope,$http,Storage,$modal,$filter){\r\n\t// 数据按照 资源池/主机分类\r\n\tvar process_data = function(storages,_servers,_pools){\r\n\t\tvar pools = angular.copy(_pools);\r\n\t\tvar servers = angular.copy(_servers);\r\n\t\tvar smap = storages.reduce(function(d,s){\r\n\t\t\tif(s.storage_type){\r\n\t\t\t\td[s.storage_host_uuid] ? d[s.storage_host_uuid].push(s) : d[s.storage_host_uuid] = [s];\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},{});\r\n\t\tvar hmap = servers.reduce(function(d,server){\r\n\t\t\tif(smap[server.id]){\r\n\t\t\t\tserver.storages = smap[server.id].sort((a,b) => { return a.storage_order - b.storage_order });\r\n\t\t\t\td[server.resource_pool_uuid] ?  d[server.resource_pool_uuid].push(server) : d[server.resource_pool_uuid] = [server];\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},{});\r\n\t\tvar pmap = pools.reduce(function(d,pool){\r\n\t\t\tif(hmap[pool.id]){\r\n\t\t\t\tpool.servers = hmap[pool.id];\r\n\t\t\t\td[pool.name] = pool;\r\n\t\t\t}\r\n\t\t\treturn d;\r\n\t\t},{});\r\n\t\treturn pmap;\r\n\t};\r\n\t// 数据按照 存储类型/服务器地址 分类\r\n\tvar process_unsiggndata = function(storages){\r\n\t\tvar datas = {};\r\n\t\tstorages.forEach(function(o){\r\n\t\t\tif(datas[o.device_type]){\r\n\t\t\t\tif(datas[o.device_type][o.ip]){\r\n\t\t\t\t\tdatas[o.device_type][o.ip].push(o)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdatas[o.device_type][o.ip] = [o];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdatas[o.device_type] = {};\r\n\t\t\t\tdatas[o.device_type][o.ip] = [o];\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn datas;\r\n\t};\r\n\t$scope.get_obj_length = function(data){\r\n\t\tif(data){\r\n\t\t\treturn  Object.keys(data).length;\r\n\t\t}\r\n\t};\r\n\t$scope.filterLocalStorage = function(name){\r\n\t\t$scope.datas.local_storages = $filter('ObjectFilter')($scope.datas.bak_local_storages,name);\r\n\t};\r\n\t$scope.get_list = function(){\r\n\t\t$scope.loading = true;\r\n\t\tStorage.query(function(res){\r\n\t\t\tvar local = [], \r\n\t\t\t\tremote_assigned = [], \r\n\t\t\t\tremote_unassigned = [];\r\n\t\t\t\r\n\t\t\t$scope.pools = res.pools.sort(function(a,b){ return a.name > b.name ? 1 : -1});\r\n\t\t\tres.storages.forEach(function(item){\r\n\t\t\t \tif(item.device_type === 'local'){\r\n\t\t\t \t\tlocal.push(item);\r\n\t\t\t \t}else{\r\n\t\t\t \t\tif(item.storage_type){\r\n\t\t\t \t\t\tremote_assigned.push(item)\r\n\t\t\t \t\t}else{\r\n\t\t\t \t\t\tremote_unassigned.push(item);\r\n\t\t\t \t\t}\r\n\t\t\t \t}\r\n\t\t\t });\r\n\t\t\t$scope.datas = {\r\n\t\t\t\tstorages:res.storages,\r\n\t\t\t\tlocal_storages:process_data(local,res.servers,res.pools),\r\n\t\t\t\tbak_local_storages : process_data(local,res.servers,res.pools),\r\n\t\t\t\t// local_unassigned_storages: local.filter(function(l){ return !l.storage_type }),\r\n\t\t\t\tremote_assigned_storages:process_data(remote_assigned,res.servers,res.pools),\r\n\t\t\t\tremote_unassigned_storages:process_unsiggndata(remote_unassigned)\r\n\t\t\t};\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.get_list();\r\n\tvar get_list = $scope.get_list;\r\n\t$scope.delete = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除存储'>\"+\r\n\t\t\t\t\t\"删除存储</h4></div><div class='modal-body'><form class='form-horizontal'><p ng-show='!has_run' style='margin-bottom:10px;' localize='确认删除存储吗'>确认删除存储吗</p><footer class='text-right'><button class='btn btn-primary ' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tStorage.delete({storage_id:item.uuid},function(){\r\n\t\t\t\t\t\tget_list();\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('addStorageDialog', ['$scope','Storage','$modalInstance','ResourcePool', function($scope,Storage,$modalInstance,ResourcePool){\r\n\r\n\t$scope.storage = {\r\n\t\tiscsi:{},\r\n\t\tfc:{}\r\n\t};\r\n\t$scope.loading = true;\r\n\r\n\t// $scope.datas为父scope中数据\r\n\t// $scope.has_remote_storage = Object.keys($scope.datas.remote_assigned_storages).length + Object.keys($scope.datas.remote_unassigned_storages).length > 0 ? true : false;\r\n\t$scope.storage.storage_usability = 'instance';\r\n\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.resource_pools = res.result.filter(function(p){\r\n\t\t\t return p.type === 'kvm';\r\n\t\t});\r\n\t\t$scope.storage.resource_pool = $scope.resource_pools[0];\r\n\t\t$scope.get_nodes();\r\n\t});\r\n\r\n\tfunction get_manage_node_id(){\r\n\t\treturn $scope.storage.manage_node.map(function(node){ return node.node_uuid })\r\n\t}\r\n\r\n\t$scope.get_nodes = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar _resource_uuid = $scope.storage.storage_usability === 'instance' ? $scope.storage.resource_pool.uuid : undefined;\r\n\t\tStorage.get_node({\r\n\t\t\tstorage_usability:$scope.storage.storage_usability,\r\n\t\t\tresource_pool_uuid: _resource_uuid\r\n\t\t},function(res){\r\n\t\t\tvar firstKey = Object.keys(res.result)[0];\r\n\t\t\t$scope.nodes = res.result;\r\n\t\t\t$scope.storage.manage_node = $scope.nodes[firstKey];\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.searchISCSI = function(bool){\r\n\t\t$scope.loading = true;\r\n\t\t$scope.iscsi_luns = [];\r\n\t\t$scope.storage.iscsi.target = null;\r\n\t\tvar postData = {};\r\n\t\tpostData.storage_usability = $scope.storage.storage_usability;\r\n\t\tpostData.host              = $scope.storage.iscsi.host;\r\n\t\tpostData.node_uuid          = get_manage_node_id();\r\n\t\tif(bool){\r\n\t\t\tpostData.to_redetect = true;\r\n\t\t}\r\n\t\tStorage.get_iscsi(postData,function(res){\r\n\t\t\t$scope.iscsi_targets        = res.iqn_list || [];\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.formatLun = function(_lun){\r\n\t\treturn (_lun.vendor +　\" lun-\" + _lun.lun + \" \" + (_lun.size/Math.pow(1024,3)).toFixed(2) + \"GB\");\r\n\t};\r\n\t$scope.searchISCSIlun = function(){\r\n\t\tif(!$scope.storage.iscsi.target){\r\n\t\t\t$scope.iscsi_luns = [];\r\n\t\t\t$scope.storage.fc = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$scope.loading = true;\r\n\t\tvar postData = {};\r\n\t\tpostData.storage_usability  = $scope.storage.storage_usability;\r\n\t\tpostData.storage_type       = 'iscsi';\r\n\t\tpostData.host               =  $scope.storage.iscsi.host;\r\n\t\tpostData.target_iqn         =  $scope.storage.iscsi.target;\r\n\t\tpostData.node_uuid          = get_manage_node_id();\r\n\t\tStorage.get_lun(postData, function(res){\r\n            $scope.iscsi_luns = res.data;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\t$scope.searchFClun = function(bool){\r\n\t\t$scope.loading = true;\r\n\t\t$scope.storage.fc = null;\r\n\t\tvar postData = {};\r\n\t\tpostData.storage_type       = 'fc';\r\n\t\tpostData.storage_usability  = $scope.storage.storage_usability;\r\n\t\tpostData.node_uuid          = get_manage_node_id();\r\n\t\tif(bool){\r\n\t\t\tpostData.to_redetect = true;\r\n\t\t}\r\n\t\tStorage.get_lun(postData, function(res){\r\n            $scope.fc_luns = res.data;\r\n            $scope.loadlun = false ;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\t\r\n\t$scope.switchType = function(type){\r\n\t\t$scope.clear_luns();\r\n\t\tswitch(type){\r\n\t\t\t//FC\r\n\t\t\tcase 'fc': {\r\n\t\t\t\t$scope.searchFClun();\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t\t//iscsi\r\n\t\t\tcase 'iscsi':{\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t\t// 分布式存储\r\n\t\t\tcase '3':{\r\n\t\t\t\tbreak;\r\n\t\t\t};\r\n\t\t}\r\n\t\tsetTimeout(function () {\r\n\t\t\t$(\"[rel=popover-hover]\").popover({ trigger: \"hover\" });\r\n\t\t});\r\n\t};\r\n\t$scope.clear_luns = function(){\r\n\t\t$scope.storage.iscsi = null;\r\n\t\t$scope.storage.fc = null;\r\n\t\t$scope.iscsi_targets = null;\r\n\t\t$scope.iscsi_luns = null;\r\n\t\t$scope.fc_luns = null;\r\n\t}\r\n\t$scope.clear_mess = function(){\r\n\t\t$scope.storage.type = null;\r\n\t\t$scope.clear_luns();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar postData = {\r\n\t\t\tname:$scope.storage.name,\r\n\t\t\tstorage_type:$scope.storage.type,\r\n\t\t\tstorage_usability:$scope.storage.storage_usability,\r\n\t\t};\r\n\t\t// if(postData.storage_usability === 'instance'){\r\n\t\t\tpostData.node_uuid = $scope.storage.manage_node.map(function(node){ return [node.node_uuid,node.resource_pool_uuid] })\r\n\t\t// }\r\n\t\tif(postData.storage_type === 'fc'){\r\n\t\t\tpostData.device_name = $scope.storage.fc.lun.device_name;\r\n\t\t\tpostData.lun_id = $scope.storage.fc.lun.lun;\r\n\t\t\tpostData.scsi_id = $scope.storage.fc.lun.scsi_id;\r\n\t\t\tpostData.force = $scope.storage.fc.is_format;\r\n\t\t\tpostData.dynamic_lv = $scope.storage.fc.dynamic_lv || false;\r\n\t\t}\r\n\t\tif(postData.storage_type === 'iscsi'){\r\n\t\t\tpostData.device_name = $scope.storage.iscsi.lun.device_name;\r\n\t\t\tpostData.provider = $scope.storage.iscsi.host;\r\n\t\t\tpostData.force = $scope.storage.iscsi.is_format;\r\n\t\t\tpostData.dynamic_lv = $scope.storage.iscsi.dynamic_lv || false;\r\n\t\t\tpostData.target_iqn = $scope.storage.iscsi.target;\r\n\t\t\tpostData.scsi_id= $scope.storage.iscsi.lun.scsi_id;\r\n\t\t\tpostData.lun_id= $scope.storage.iscsi.lun.lun;\r\n\t\t}\r\n\t\tStorage.add({storage:postData},function(res){\r\n\t\t\t$scope.$parent.get_list();\r\n\t\t\t$modalInstance.close(res);\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller('configPublicStorageDialog', ['$scope', 'Storage','$modalInstance', function($scope,Storage,$modalInstance){\r\n\tStorage.get_public_storage({\r\n\t\tstorage_usability:\"local\"\r\n\t},function(res){\r\n\t\t$scope.luns = res.host_storages;\r\n\t\t$scope.lun_id = res.choosed_storage === 'local' ? '' : res.choosed_storage;\r\n\t\t$scope.lun_type = res.choosed_storage === 'local' ? \"local\" : \"remote\";\r\n\t});\r\n\t$scope.clearlun = function(){\r\n\t\tvar _this = this;\r\n\t\tthis.lun_id = undefined;\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\t$scope.submitting = true;\r\n\t\tStorage.config_public_storage({\r\n\t\t\tstorage_id:_this.lun_id\r\n\t\t},function(){\r\n\t\t\t$scope.$parent.get_list();\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submitting = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/resource/storage/controllers.js","/**\r\n*  Module\r\n*\r\n* Description\r\n*/\r\nangular.module('vdi.resource.console', [])\r\n.factory(\"Console\", [\"$resource\", \"$Domain\",\"$controllerDomain\", function($resource, $Domain,$controllerDomain){\r\n\treturn $resource($Domain + \"/thor/hosts\", null, {\r\n\t\tquery_console:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/controllers\"},\r\n\t\tsave_ip:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/external_ip\"},\r\n\t\tget_sync_network:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/get_data_sync_network\"},\r\n        get_ha_status:\r\n            { method: \"GET\", url: $Domain + \"/thor/get_controller_ha_status\"},\r\n        switch_controller:\r\n            {method: \"POST\", url: $Domain + \"/thor/switch_controller\"},\r\n        fast_shutdown:\r\n            {method: \"POST\", url: $Domain + \"/thor/controller/fast_shutdown_host\"},\r\n        get_ha_detail:\r\n            {method: \"GET\", url: $Domain + \"/thor/controller/ha\"}\r\n\t});\r\n}])\r\n.factory('maskModel', ['$rootScope','$modal', function($rootScope,$modal){\r\n\t//服务重启的情况下，页面增加遮罩层\r\n\treturn {\r\n\t\topen:function(node_ids,page_type){\r\n\t\t\tvar instance = $modal.open({\r\n\t\t\t\tsize:\"sm\",\r\n\t\t\t\tcontroller: [\"$modalInstance\",\"$scope\",function($modalInstance,$scope){\r\n\t\t\t\t\t// 60秒后开始判断服务是否重启完成\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tswitch(page_type){\r\n\t\t\t\t\t\t\tcase \"manageNetwork\":\r\n\t\t\t\t\t\t\t\t$scope.$on(\"manage_networksRowsUpdate\", function($event,data){\r\n\t\t\t\t\t\t\t\t\tif(data.length && data.every(function(n){ return n.state })){\r\n\t\t\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"enableConsoleHA\":\r\n\t\t\t\t\t\t\t\t$scope.$on(\"nodesRowsUpdate\", function($event,data){\r\n\t\t\t\t\t\t\t\t\tvar nodes = data.filter(item => {return node_ids.indexOf(Number(item.tasklog_controller_id)) !== -1});\r\n\t\t\t\t\t\t\t\t\tif(nodes.every(function(n){ return n.enable_ha_service_state })){\r\n\t\t\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"disableConsoleHA\":\r\n\t\t\t\t\t\t\t\t$scope.$on(\"nodesRowsUpdate\", function($event,data){\r\n\t\t\t\t\t\t\t\t\tvar nodes = data.filter(item => {return node_ids.indexOf(Number(item.tasklog_controller_id)) !== -1});\r\n\t\t\t\t\t\t\t\t\tif(nodes.every(function(n){ return n.disable_ha_service_state })){\r\n\t\t\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t$scope.$on(\"nodesRowsUpdate\", function($event,data){\r\n\t\t\t\t\t\t\t\t\tvar nodes = data.filter(item => node_ids.indexOf(item.id) !== -1);\r\n\t\t\t\t\t\t\t\t\tif(nodes.every(function(n){ return n.service_state })){\r\n\t\t\t\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},60000);\r\n\t\t\t\t}],\r\n\t\t\t\ttemplate:`<div class=\"modal-content-blank\">\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t<img src=\"img/loadingtext.gif\" alt=\"\" width=\"24\" height=\"24\">\r\n\t\t\t\t\t\t\t\t<span localize=\"MASKMODEL_WAITING_TIPS\"></span>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>`\r\n\t\t\t});\r\n\t\t\treturn instance;\r\n\t\t}\r\n\t};\r\n}])\r\n// 通用接口：查询是否启用 HA\r\n.factory(\"isHAEnabled\", [\"Console\", function(Console){\r\n    return function(){\r\n        return Console.get_ha_status().$promise.then(function(data){\r\n            return data.result.ha_mode === \"active_passive\";\r\n        });\r\n    }\r\n}])\r\n.controller('vdiResourceConsoleListController', ['$scope','$modal','$$$I18N','Console','Host','$rootScope','$interval', function($scope,$modal,$$$I18N,Console,Host,$rootScope,$interval){\r\n\t$scope.rows = [];\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"nodes\", $scope.rows.map( item => item.tasklog_controller_id ));\r\n\t}, 1000);\r\n\t$scope.$on(\"nodesRowsUpdate\", function($event, data){\r\n\t\t// 列表接口的tasklog_controller_id字段与轮询接口的id字段对应\r\n\t\t$rootScope.activeHostIds = $scope.rows.filter(row => { return row.status === 'active'}).map(row => { return row.id});\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.tasklog_controller_id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.tasklog_controller_id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.tasklog_controller_id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n    var get_list = function(){\r\n    \t$scope.loading = true;\r\n    \tConsole.query_console(function(res){\r\n    \t\t$scope.loading = false;\r\n\t    \t$scope.rows = res.result.map(function(item,idx,arr){\r\n\t    \t\titem.memory_mb = (item.memory_mb/1024).toFixed(1);\r\n\t    \t\titem.memory_mb_used = (item.memory_mb_used/1024).toFixed(1);\r\n\t    \t\titem._has_ha = arr.length > 1;\r\n\t    \t\treturn item;\r\n\t    \t});\r\n\t    });\r\n    };\r\n    get_list();\r\n    getHAStatus();\r\n\r\n    $scope.openHostMoreDialog = function(item){\r\n    \tvar _dialog = $modal.open({\r\n\t\t\tcontroller:\"consoleMoreDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/console/console_more.html\",\r\n\t\t\tsize:\"lg\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparam:function(){\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n    };\r\n    $scope.openHAConfigDialog = function(item){\r\n    \tvar backup_agent = $scope.rows.filter(row => { return row.role === 'backup'})[0];\r\n    \titem._btn_status = backup_agent ? backup_agent.status === 'active' : true;\r\n    \tvar _dialog = $modal.open({\r\n\t\t\tcontroller:\"HAconfigDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/console/ha_config.html\",\r\n\t\t\tsize:\"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparam:function(){\r\n\t\t\t\t\treturn item;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n    \t// _dialog.result.then(function(){\r\n    \t// \tget_list();\r\n    \t// });\r\n    };\r\n    $scope.restart = function(item){\r\n\t\tvar rows = (item ? [item] : $scope.rows).filter(function(item) {return item.status === 'active';});\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='重启主机'>\"+\r\n\t\t\t\t\t\t\"重启主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启主机吗?'>确定重启主机吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tHost.maintain_host({\r\n\t\t\t\t\t\t\taction:\"reboot_host\",\r\n\t\t\t\t\t\t\thost_ips:rows.map(function(row){ return row.ip })\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\t$rootScope.$broadcast('NOAUTH');\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t});\r\n\t                    $modalInstance.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.poweroff = function(item){\r\n\t\tvar rows = (item ? [item] : $scope.rows).filter(function(item) {return item.status === 'active';});\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: `<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='关闭主机'>\"+\r\n\t\t\t\t\t\t\"关闭主机</h4></div><div class='modal-body'>\r\n\t\t\t\t\t\t\t<form class='form-horizontal'>\r\n\t\t\t\t\t\t\t\t<p style='margin-bottom:20px;' localize='确定关闭主控节点吗'></p><footer class='text-right'>\r\n\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t<label class=\"col-xs-12\" style='text-align: left;'>\r\n\t\t\t\t\t\t\t\t\t\t<input class=\"checkbox ng-pristine ng-valid\" type=\"checkbox\" data-ng-model=\"all\" data-ng-init='all=true'>\r\n\t\t\t\t\t\t\t\t\t\t<span localize='同时关闭所有运行的桌面和计算节点'></span>\r\n\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button>\r\n\t\t\t\t\t\t\t\t<button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\r\n\t\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t</form></div></div></section>`,\r\n\t\t\t\t\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tHost.shutdown({\r\n\t\t\t\t\t\t\tall: this.all\r\n\t\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\t\t$rootScope.$broadcast('NOAUTH');\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIPACTIVE\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.poweroffBackup = function(item){\r\n\t\tvar rows = (item ? [item] : $scope.rows).filter(function(item) {return item.status === 'active';});\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: `<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='关闭主机'>\"+\r\n\t\t\t\t\t\t\"关闭主机</h4></div><div class='modal-body'>\r\n\t\t\t\t\t\t\t<form class='form-horizontal'>\r\n\t\t\t\t\t\t\t\t<p style='margin-bottom:20px;' localize='确定关闭主机吗'></p><footer class='text-right'>\r\n\t\t\t\t\t\t\t\t<button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button>\r\n\t\t\t\t\t\t\t\t<button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button>\r\n\t\t\t\t\t\t\t</footer>\r\n\t\t\t\t\t\t</form></div></div></section>`,\r\n\t\t\t\t\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tHost.maintain_host({\r\n\t\t\t\t\t\t\thost_ips:rows.map(function(item){ return item.ip }),\r\n\t\t\t\t\t\t\taction:\"poweroff_host\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIPACTIVE\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t// $scope.maintain = function(){\r\n\t// \tvar rows = $scope.rows.filter(function(item) {return item._selected});\r\n\t// \t$modal.open({\r\n\t// \t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='维护主机'>\"+\r\n\t// \t\t\t\t\"维护主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定维护主机吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t// \t\tcontroller: function($scope, $modalInstance){\r\n\t// \t\t\t$scope.ok = function(){\r\n\t// \t\t\t\tHost.maintain_host({\r\n\t// \t\t\t\t\taction:\"maintenance_host\",\r\n\t// \t\t\t\t\thost_ips:rows.map(function(item){ return item.ip })\r\n\t// \t\t\t\t},function(res){\r\n\t// \t\t\t\t\tget_list();\r\n\t// \t\t\t\t});\r\n\t// \t\t\t\t$modalInstance.close();\r\n\t// \t\t\t},\r\n\t// \t\t\t$scope.close = function(){\r\n\t// \t\t\t\t$modalInstance.close();\r\n\t// \t\t\t}\r\n\t// \t\t},\r\n\t// \t\tsize : \"sm\"\r\n\t// \t});\r\n\t// };\r\n\t// $scope.recovery = function(){\r\n\t// \tvar rows = $scope.rows.filter(function(item) {return item._selected});\r\n\t// \t$modal.open({\r\n\t// \t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='恢复主机'>\"+\r\n\t// \t\t\t\t\"恢复主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定恢复主机吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t// \t\tcontroller: function($scope, $modalInstance){\r\n\t// \t\t\t$scope.ok = function(){\r\n\t// \t\t\t\tHost.maintain_host({\r\n\t// \t\t\t\t\taction:\"recovery_host\",\r\n\t// \t\t\t\t\thost_ips:rows.map(function(item){ return item.ip })\r\n\t// \t\t\t\t},function(res){\r\n\t// \t\t\t\t\tget_list();\r\n\t// \t\t\t\t});\r\n\t// \t\t\t\t$modalInstance.close();\r\n\t// \t\t\t},\r\n\t// \t\t\t$scope.close = function(){\r\n\t// \t\t\t\t$modalInstance.close();\r\n\t// \t\t\t}\r\n\t// \t\t},\r\n\t// \t\tsize : \"sm\"\r\n\t// \t});\r\n\t// };\r\n\t$scope.current_theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t$scope.$on(\"changeSkin\", function(e,value){\r\n        $scope.current_theme = value;\r\n    });\r\n    // HA 查看详情\r\n    $scope.viewDetail = function(){\r\n        $modal.open({\r\n            templateUrl: \"views/vdi/dialog/resource/console/ha-detail.html\",\r\n            controller: \"HAViewDetailDialogController\",\r\n            windowClass: \"ha-detail-modal\",\r\n            resolve: {\r\n                data: function(){\r\n                    return $scope.ha;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    // HA 主备控切换\r\n    $scope.switchBrain = function(){\r\n        $modal.open({\r\n            templateUrl: \"views/vdi/dialog/resource/console/ha-switch-brain.html\",\r\n            controller: \"HASwitchBrainDialogController\",\r\n            resolve: {\r\n                data: function(){\r\n                    return $scope.ha;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    // HA 一键关机\r\n    $scope.onekeyShutdown = function(){\r\n        $modal.open({\r\n            templateUrl: \"views/vdi/dialog/resource/console/ha-shutdown.html\",\r\n            controller: \"HAShutdownDialogController\",\r\n            resolve: {\r\n                data: function(){\r\n                    return $scope.ha;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    // 获取 HA 状态\r\n    function getHAStatus(){\r\n        Console.get_ha_status(function(resp){\r\n            $scope.ha = resp.result;\r\n            $scope.haEnabled = resp.result.ha_mode === \"active_passive\";\r\n            var hasActive = false, hasPassive = false;\r\n            $scope.ha.roles.forEach(function(x){\r\n                if(x.role === \"active\") {\r\n                    hasActive = true;\r\n                } else if(x.role === \"passive\") {\r\n                    hasPassive = true;    \r\n                }\r\n            });\r\n            $scope.switchable = hasActive && hasPassive && !$scope.ha.is_split_brain;\r\n        });\r\n    }\r\n}])\r\n.filter(\"haDataStatus\", [\"$$$I18N\", function(i18n){\r\n    return function(data){\r\n        var key;\r\n        if(!data || typeof data !== \"object\") {\r\n            return \"\";\r\n        }\r\n        switch(data.data_sync) {\r\n            case \"synced\":\r\n                key = \"已同步\";\r\n                break;\r\n            case \"syncing\":\r\n                key = \"正在同步\";\r\n                break;\r\n            case \"unsynced\":\r\n                key = \"未同步\";\r\n                break;\r\n        }\r\n        return i18n.get(key);\r\n    };\r\n}])\r\n.filter(\"haRunningStatus\", [\"$$$I18N\", function(i18n){\r\n    return function(data){\r\n        if(!data || typeof data !== \"object\") {\r\n            return \"\";\r\n        }\r\n        var num = data.roles.filter(function(x){\r\n            return x.role === \"passive\";\r\n        }).length;\r\n        if(data.is_split_brain) {\r\n            return \"异常（有\" + num + \"个备控，裂脑）\";\r\n        } else {\r\n            return \"正常\";\r\n        }\r\n    };\r\n}])\r\n.directive(\"haDrawwer\", [\"$q\", function($q){\r\n    return {\r\n        scope: {\r\n            data: \"=\"\r\n        },\r\n        link: function(scope, element){\r\n            var context = element[0].getContext(\"2d\");\r\n            if(!context) { return; }\r\n            var loaded = false;\r\n            $q.all([\"main-ctrl\", \"sub-ctrl\", \"arbitration\", \"error\", \"warn\"].map(function(id){\r\n                id = \"#ha-detail-\" + id;\r\n                return new Promise(function(resolve, reject){\r\n                    var el = document.querySelector(id);\r\n                    if(el.complete) {\r\n                        return resolve();\r\n                    }\r\n                    el.addEventListener(\"load\", function onImgLoad(){\r\n                        el.removeEventListener(\"load\", onImgLoad);\r\n                        resolve();\r\n                    });\r\n                });\r\n            })).then(function(){\r\n                loaded = true;\r\n                update();\r\n            });\r\n            scope.$on(\"$destroy\", scope.$watch(\"data\", update));\r\n            function update(){\r\n                if(!loaded) { return; }\r\n                var w = element.width();\r\n                var h = element.height();\r\n                var scale = getCanvasScale(context);\r\n                element.attr(\"width\", w * scale);\r\n                element.attr(\"height\", h * scale);\r\n                context.scale(scale, scale);\r\n                draw(context, w, h, scope.data);\r\n            }\r\n        }\r\n    };\r\n    function draw(context, width, height, data){\r\n        var dataColor = \"#16ee21\";\r\n        var networkColor = \"#73bfe9\";\r\n        // 画出来的图形总宽 60%，总高 60%\r\n        // 外围的三角形, 根据总宽高计算\r\n        var outerPoints = [\r\n            [width * 0.2, height * 0.25 + 30],\r\n            [width * 0.8, height * 0.25 + 30],\r\n            [width * 0.5, height * 0.75 + 15]\r\n        ];\r\n        // 左上角角度\r\n        var topLeftAngle = Math.atan2(\r\n            outerPoints[2][1] - outerPoints[0][1],\r\n            outerPoints[2][0] - outerPoints[0][0]\r\n        );\r\n        var drawTriangle = function(point, i){\r\n            if(i === 0) {\r\n                context.beginPath();\r\n                context.moveTo(point[0], point[1]);\r\n            } else {\r\n                context.lineTo(point[0], point[1]);\r\n                if(i === 2) {\r\n                    context.closePath();\r\n                    context.stroke();\r\n                }\r\n            }\r\n        };\r\n        var drawLine = function(point1, point2, color){\r\n            context.strokeStyle = color;\r\n            context.beginPath();\r\n            context.moveTo(point1[0], point1[1]);\r\n            context.lineTo(point2[0], point2[1]);\r\n            context.stroke();\r\n        };\r\n        var widthOf = function(str) {\r\n            return context.measureText(str).width;\r\n        };\r\n        var drawBetween = function(p1, p2, type){\r\n            var x = (p1[0] + p2[0]) / 2;\r\n            var y = (p1[1] + p2[1]) / 2;\r\n            var el = document.querySelector(\"#ha-detail-\" + type);\r\n            // 图标的大小为：25 * 24\r\n            context.drawImage(el, x - 12.5, y - 12);\r\n        };\r\n        context.clearRect(0, 0, width, height);\r\n        // context.lineWidth = 3.0;\r\n        context.strokeStyle = networkColor;\r\n        outerPoints.forEach(drawTriangle);\r\n        drawLine(\r\n            [outerPoints[0][0], outerPoints[0][1] - 40],\r\n            [outerPoints[1][0], outerPoints[1][1] - 40],\r\n            dataColor\r\n        );\r\n        context.drawImage(\r\n            document.querySelector(\"#ha-detail-main-ctrl\"),\r\n            outerPoints[0][0] - 34.5,\r\n            outerPoints[0][1] - 62\r\n        );\r\n        context.drawImage(\r\n            document.querySelector(\"#ha-detail-sub-ctrl\"),\r\n            outerPoints[1][0] - 34.5,\r\n            outerPoints[1][1] - 62\r\n        );\r\n        context.drawImage(\r\n            document.querySelector(\"#ha-detail-arbitration\"),\r\n            outerPoints[2][0] - 34.5,\r\n            outerPoints[2][1] - 73\r\n        );\r\n        context.font = \"13px 'Open Sans', Arial, Helvetica, 'Microsoft YaHei', Sans-Serif\";\r\n        context.fillStyle = dataColor;\r\n        context.fillText(\r\n            data.data_sync_ip,\r\n            outerPoints[0][0] - 40 - widthOf(data.data_sync_ip),\r\n            outerPoints[0][1] - 35\r\n        );\r\n        context.fillText(\r\n            data.peer_data_sync_ip,\r\n            outerPoints[1][0] + 40,\r\n            outerPoints[1][1] - 35\r\n        );\r\n        context.fillStyle = networkColor;\r\n        context.fillText(\r\n            data.management_ip,\r\n            outerPoints[0][0] - 40 - widthOf(data.management_ip),\r\n            outerPoints[0][1] - 10\r\n        );\r\n        context.fillText(\r\n            data.peer_management_ip,\r\n            outerPoints[1][0] + 40,\r\n            outerPoints[1][1] - 10\r\n        );\r\n        context.fillText(\r\n            data.quorum_ip_addresses[0],\r\n            outerPoints[2][0] - widthOf(data.quorum_ip_addresses[0]) / 2,\r\n            outerPoints[2][1] + 20\r\n        );\r\n        if(data.peer_data_to_data === false) {\r\n            drawBetween(\r\n                [outerPoints[0][0], outerPoints[0][1] - 40],\r\n                [outerPoints[1][0], outerPoints[1][1] - 40],\r\n                \"error\"\r\n            );\r\n        }\r\n        if(data.peer_management_to_management === false) {\r\n            drawBetween(\r\n                outerPoints[0], outerPoints[1],\r\n                data.is_peer_unknow ? \"warn\" : \"error\"\r\n            );\r\n        }\r\n        if(data.quorum_to_management[0] === false) {\r\n            drawBetween(outerPoints[0], outerPoints[2], \"error\");\r\n        }\r\n        if(data.quorum_to_management[1] === false) {\r\n            drawBetween(outerPoints[1], outerPoints[2], \"error\");\r\n        }\r\n    }\r\n    function getCanvasScale(context) {\r\n        var devicePixelRatio = window.devicePixelRatio || 1;\r\n        var backingStoreRatio = context.webkitBackingStorePixelRatio ||\r\n                            context.mozBackingStorePixelRatio ||\r\n                            context.msBackingStorePixelRatio ||\r\n                            context.oBackingStorePixelRatio ||\r\n                            context.backingStorePixelRatio || 1;\r\n        return devicePixelRatio / backingStoreRatio;\r\n    }\r\n}])\r\n.controller(\"HAViewDetailDialogController\", [\"$modalInstance\", \"$q\", \"$scope\", \"Console\", \"data\", function($modalInstance, $q, $scope, Console, data){\r\n    $scope.firstLoading = true;\r\n    $scope.close = function(){\r\n        $modalInstance.close();\r\n    };\r\n    $scope.refresh = load;\r\n    load();\r\n    function load(){\r\n        $q.all([\r\n            Console.get_ha_status().$promise,\r\n            Console.get_ha_detail({detail: 1}).$promise\r\n        ]).then(function(arr){\r\n            $scope.ha = arr[0].result;\r\n            $scope.detail = arr[1];\r\n            $scope.detail.is_peer_unknow = $scope.ha.roles.some(function(x){\r\n                return x.role === \"unknow\";\r\n            });\r\n        }, function(){}).finally(function(){\r\n            $scope.firstLoading = false;\r\n        });\r\n    }\r\n}])\r\n.controller(\"HASwitchBrainDialogController\", [\"$modalInstance\", \"$scope\", \"Console\", \"data\", function($modalInstance, $scope, Console, data){\r\n    var switchToIP;\r\n    data.roles.forEach(function(x){\r\n        if(x.role === \"passive\") {\r\n            switchToIP = x.ip;\r\n        }\r\n    });\r\n    console.assert(!!switchToIP, \"backend data error: \" + switchToIP);\r\n    $scope.loading = false;\r\n    $scope.close = function(){\r\n        $modalInstance.close();\r\n    };\r\n    split();\r\n    function split(){\r\n        var timer;\r\n        // 此接口是阻塞的，所以返回后即可确定是刷新还是报错\r\n        Console.switch_controller({\r\n            active_ip: switchToIP\r\n        }, function(resp){\r\n            resp && location.reload();\r\n            clearTimeout(timer);\r\n        }, function(){\r\n            location.reload();\r\n            clearTimeout(timer);\r\n        });\r\n        $scope.loading = true;\r\n        timer = setTimeout(function(){\r\n            location.reload();\r\n        }, 30 * 1000);\r\n        $scope.$root.$broadcast(\"STOPLOG\");\r\n    };\r\n}])\r\n.controller(\"HAShutdownDialogController\", [\"$modalInstance\", \"$scope\", \"Console\", \"data\", function($modalInstance, $scope, Console, data){\r\n    $scope.loading = false;\r\n    $scope.close = function(){\r\n        $modalInstance.close();\r\n    };\r\n    $scope.shutdown = function(){\r\n        Console.fast_shutdown();\r\n        $scope.loading = true;\r\n    };\r\n}])\r\n.controller('consoleRenewDialog', ['$scope', function($scope){\r\n\t\r\n}])\r\n.controller('HAconfigDialog', ['$scope','HA','param','$modalInstance','Console','maskModel','Host','$$$I18N', function($scope,HA,param,$modalInstance,Console,maskModel,Host,$$$I18N){\r\n\tvar isEmptyObject = function(obj){\r\n\t\tfor(i in obj){\r\n\t\t\treturn false;\r\n\t\t};\r\n\t\treturn true;\r\n\t};\r\n\t$scope.ha = {};\r\n\t$scope.ha.loadding = true;\r\n\t$scope.currentItem = param;\r\n\tHA.get_console_ha({controller_ip:param.ip},function(res){\r\n\t\t$scope.ha = res;\r\n\t\t// $scope.ha.editable = $scope.ha.management_ip ? false : true;\t\r\n\t\t$scope.ha.back_user = \"root\";\r\n\t\t$scope.ha.ha_mode = $scope.ha.ha_mode == 'off' ? false: true;\r\n\t\t$scope.quorums = $scope.ha.management_ip ? $scope.ha.quorum_ip_addresses.map(function(q){ return {ip:q} }) : [{ip:null}];\r\n\t}).$promise.finally(function(){\r\n\t\t$scope.ha.loadding = false;\r\n\t});\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar postData = {};\r\n\t\tif($scope.ha.ha_mode){\r\n\t\t\tpostData = {\r\n\t\t\t\tcontroller_ip:'',\r\n\t\t\t\tha_mode: 'off',\r\n\t\t\t\tfloating_ip\t:$scope.ha.floating_ip,\r\n\t\t\t\tquorum_ip_addresses:$scope.ha.quorum_ip_addresses,\r\n\t\t\t\tdata_sync_ip:$scope.ha.data_sync_ip,\r\n\t\t\t\tpeer_data_sync_ip:$scope.ha.peer_data_sync_ip,\r\n\t\t\t\tdata_sync_mask:$scope.ha.data_sync_mask,\r\n\t\t\t\tmanagement_ip:$scope.ha.management_ip,\r\n\t\t\t\tpeer_management_ip: $scope.ha.peer_management_ip,\r\n\t\t\t\tsensitivity:$scope.ha.sensitivity\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tvar is_ip_ok = $scope.quorums.some(q => {return q.status === 'normal'})\r\n\t\t\tif(!is_ip_ok){\r\n\t\t\t\t$.bigBox({\r\n\t\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\t\tcontent:$$$I18N.get(\"configHATestIPConfirm\"),  //请先点击'测试连接'按钮，确认仲裁IP网络连通\r\n\t\t\t\t\ttimeout:6000\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tpostData = {\r\n\t\t\t\tcontroller_ip: param.ip,\r\n\t\t\t\tha_mode:'active_passive',\r\n\t\t\t\tfloating_ip\t:$scope.ha.floating_ip,\r\n\t\t\t\tquorum_ip_addresses:$scope.quorums.map(function(q){ return q.ip }),\r\n\t\t\t\tdata_sync_ip:$scope.ha.network_data.data_sync_ip,\r\n\t\t\t\tpeer_data_sync_ip:$scope.ha.network_data.peer_data_sync_ip,\r\n\t\t\t\tdata_sync_mask:$scope.ha.network_data.data_sync_mask,\r\n\t\t\t\tmanagement_ip:$scope.ha.management_ip,\r\n\t\t\t\tpeer_management_ip: $scope.ha.peer_management_ip,\r\n\t\t\t\tback_user:$scope.ha.back_user,\r\n\t\t\t\tback_password:$scope.ha.back_password,\r\n\t\t\t\tsensitivity:$scope.ha.sensitivity\r\n\t\t\t}\r\n\t\t}\r\n\t\t$scope.ha.loadding = true;\r\n\t\tHA.set_console_ha(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tmaskModel.open([-1],($scope.ha.ha_mode ? \"disableConsoleHA\" : \"enableConsoleHA\"));\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.ha.loadding = false;\r\n\t\t});\r\n\t};\r\n\t$scope.addQuorumIp = function(){\r\n\t\t$scope.quorums.push({ip:null});\r\n\t};\r\n\t$scope.minusQuorumIp = function(i){\r\n\t\tvar idx = $scope.quorums.indexOf(i)\r\n\t\t$scope.quorums.splice(idx,1);\r\n\t};\r\n\t$scope.test_connect = function(item){\r\n\t\titem.connecting = true;\r\n\t\tHost.node_ping({\r\n\t\t\tremote_ip:item.ip,\r\n\t\t\tnode_ip:[\r\n\t\t\t\t$scope.ha.management_ip,\r\n\t\t\t\t$scope.ha.peer_management_ip\r\n\t\t\t]\r\n\t\t},function(res){\r\n\t\t\titem.status = res.result ? \"normal\" : \"failed\";\r\n\t\t}).$promise.finally(function(){\r\n\t\t\titem.connecting = false;\r\n\t\t});\r\n\t};\r\n\t$scope.get_network = function(){\r\n\t\t$scope.loading_net = true;\r\n\t\tConsole.get_sync_network({\r\n\t\t\tmaster_ip:$scope.ha.management_ip,\r\n\t\t\tbackup_ip:$scope.ha.peer_management_ip\r\n\t\t},function(res){\r\n\t\t\t$scope.networks = res.result;\r\n\t\t\tif(Object.keys($scope.networks).length){\r\n\t\t\t\t$scope.ha.network_data = $scope.networks[Object.keys($scope.networks)[0]];\r\n\t\t\t}\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loading_net = false;\r\n\t\t});\r\n\r\n\t};\r\n}])\r\n.controller(\"consoleMoreDialog\", [\"$scope\",\"$modalInstance\", \"Host\", \"HostManage\",\"$$$I18N\", \"$Domain\",\"param\",\"Storage\",\"Console\",\"maskModel\",\"$modal\",\r\n\tfunction($scope, $modalInstance,Host,HostManage, $$$I18N, $Domain,param,Storage,Console,maskModel,$modal){\r\n\tvar param_host =angular.copy(param);\r\n\t$scope.is_ha = param_host._has_ha;\r\n    $scope.get_nic = function(){\r\n    \t$scope.loading_nic = true;\r\n    \tHostManage.network_info({\r\n\t    \thost:param.ip,\r\n\t    \trole:param.role,\r\n\t    \tid:param.id || ''\r\n\t    },function(res){\r\n\t    \t$scope.dev_states = res.dev_states;\r\n\t    \t$scope.networks = res.networks.map(function(item){\r\n\t    \t\titem.ips = item.ips.map(function(sub,idx){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tip:sub,\r\n\t    \t\t\t\tnetmask:item.netmasks[idx],\r\n\t    \t\t\t\tip_editable:item.ips_editable[idx],\r\n\t    \t\t\t\tuneditable:item.ips_editable[idx].is_management || item.ips_editable[idx].is_image\r\n\t    \t\t\t}\r\n\t    \t\t});\r\n\t    \t\titem._ips = item.ips.map(function(sub){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tvalue:sub,\r\n\t    \t\t\t\tmodel:angular.copy(sub)\r\n\t    \t\t\t};\r\n\t    \t\t});\r\n\t    \t\titem.readonly = true;\r\n\t    \t\treturn item;\r\n\t    \t}).sort(function(a,b){\r\n\t\t \t\treturn a.name > b.name;\r\n\t\t \t});\r\n\t\t \t$scope.data = {\r\n\t\t \t\t_dnss: [{},{}].map((d,idx) => {\r\n\t\t \t\t\treturn {\r\n\t\t \t\t\t\tmodel:res.dns[idx],\r\n\t\t \t\t\t\tvalue:res.dns[idx]\r\n\t\t \t\t\t};\r\n\t\t \t\t}),\r\n\t\t \t\t_gateway: {\r\n\t\t \t\t\tmodel:res.gateway,\r\n\t\t \t\t\tvalue:res.gateway\r\n\t\t \t\t},\r\n\t\t \t\t_readonly:true\r\n\r\n\t\t \t};\r\n\t\t \t$scope.bond_types = res.bond_types;\r\n\t\t \t$scope.bond_networks = res.bond_networks.map(function(item){\r\n\t    \t\titem.ips = item.ips.map(function(sub,idx){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tip:sub,\r\n\t    \t\t\t\tnetmask:item.netmasks[idx],\r\n\t    \t\t\t\tip_editable:item.ips_editable[idx],\r\n\t    \t\t\t\tuneditable:item.ips_editable[idx].is_management || item.ips_editable[idx].is_image\r\n\t    \t\t\t}\r\n\t    \t\t});\r\n\t    \t\titem._ips = item.ips.map(function(sub){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tvalue:sub,\r\n\t    \t\t\t\tmodel:angular.copy(sub)\r\n\t    \t\t\t};\r\n\t    \t\t});\r\n\t    \t\titem.readonly = true;\r\n\t    \t\treturn item;\r\n\t\t\t});\r\n\t\t\t$scope.getSuccess = true;\r\n\t    },function(error){\r\n\t\t\t$scope.getSuccess = false;\r\n\t\t}).$promise.finally(function(){\r\n\t    \t$scope.loading_nic = false;\r\n\t    });\r\n    };\r\n    $scope.get_nic();\r\n    //修改网卡\r\n\t$scope.ok = function(item){\r\n\t\titem.submiting = true;\r\n\t\tvar all_cidr = $scope.networks.concat($scope.bond_networks).reduce((arr,net) =>{\r\n\t\t\tlet cidr = net._ips.map( (ip) => {\r\n\t\t\t\treturn ip.model.ip + \"/\" + ip.model.netmask;\r\n\t\t\t});\r\n\t\t\tarr.push.apply(arr,cidr);\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tvar before_cidr = $scope.networks.concat($scope.bond_networks).reduce((arr,net) =>{\r\n\t\t\tlet cidr = net.ips.map( (ip) => {\r\n\t\t\t\treturn ip.ip + \"/\" + ip.netmask;\r\n\t\t\t});\r\n\t\t\tarr.push.apply(arr,cidr);\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tvar backItem = {\r\n\t\t\tid:param.id,\r\n\t\t\tis_console:true,\r\n\t\t\tiface:item.name,\r\n\t\t\tips:item._ips.map(function(i){ return i.model.ip}),\r\n\t\t\tnetmasks:item._ips.map(function(i){ return i.model.netmask}),\r\n\t\t\tips_editable:item._ips.map(function(i){ return i.model.ip_editable}),\r\n\t\t\tbefore_cidr:before_cidr,\r\n\t\t\tall_cidr:all_cidr\r\n\t\t};\r\n\t\tvar no_alter = item._ips.every(it => {\r\n\t\t\treturn it.model.ip === it.value.ip && it.model.netmask === it.value.netmask\r\n\t\t});\r\n\t\tif(no_alter && item._ips.length === item.ips.length){\r\n\t\t\t// 修改后的值和初始值相等时，不提交数据\r\n\t\t\titem.submiting = false;\r\n\t\t\titem.readonly = true;\r\n\t\t}else{\r\n\t\t\tHostManage.network_edit(backItem, function(){\r\n\t\t\t\titem._ips.forEach(i => {i.value = angular.copy(i.model)});\r\n\t\t\t\titem.submiting = false;\r\n\t\t\t\titem.readonly = true;\r\n\t\t\t\tlocation.reload();\r\n\t\t\t},function(){\r\n\t\t\t\titem.submiting = false;\r\n\t\t\t\titem.readonly = false; \r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.okDns = function(d){\r\n\t\td.submiting = true;\r\n\t\tvar postData = {\r\n\t\t\tid:param.id,\r\n\t\t\tgateway:d._gateway.model,\r\n\t\t\tdns:d._dnss.filter(i => { return Boolean(i.model) }).map(i => { return i.model})\r\n\t\t};\r\n\t\tvar no_alter = d._dnss.concat(d._gateway).every(it => {\r\n\t\t\treturn it.model === it.value\r\n\t\t});\r\n\t\tif(no_alter){\r\n\t\t\td.submiting = false;\r\n\t\t\td._readonly = true;\r\n\t\t}else{\r\n\t\t\tHostManage.alter_gatedns(postData, function(){\r\n\t\t\t\td._dnss.forEach(dns => {\r\n\t\t\t\t\tdns.value = dns.model;\r\n\t\t\t\t});\r\n\t\t\t\td._gateway.value = d._gateway.model;\r\n\t\t\t\td._readonly = true;\r\n\t\t\t\tmaskModel.open([-1]);\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\td.submiting = false;\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.cancel = function(item){\r\n\t\titem.readonly = true;\r\n\t\titem._ips = item.ips.map(function(sub){\r\n\t\t\treturn {\r\n\t\t\t\tvalue:sub,\r\n\t\t\t\tmodel:angular.copy(sub)\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\t$scope.cancelDns = function(d){\r\n\t\td._readonly = true;\r\n\t\td._dnss.forEach(dns => {\r\n\t\t\tdns.model = dns.value?dns.value:null;\r\n\t\t});\r\n\t\td._gateway.model = d._gateway.value;\r\n\t};\r\n\t$scope.add_ip = function(item){\r\n\t\titem._ips.push({\r\n\t\t\tmodel:{\r\n\t\t\t\tip_editable:{\r\n\t\t\t\t\tis_management:false,\r\n\t\t\t\t\tis_image:false\r\n\t\t\t\t},\r\n\t\t\t\tuneditable:false\r\n\t\t\t},\r\n\t\t\tvalue:{\r\n\t\t\t\tip_editable:{\r\n\t\t\t\t\tis_management:false,\r\n\t\t\t\t\tis_image:false\r\n\t\t\t\t},\r\n\t\t\t\tuneditable:false\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.minus_ip = function(per,all){\r\n\t\tall.splice(all.indexOf(per),1);\r\n\t};\r\n\t$scope.bound_netcard = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"boundNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/bound_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_networks:angular.copy($scope.networks),\r\n\t\t\t\t\tp_bondtypes:angular.copy($scope.bond_types),\r\n\t\t\t\t\tp_bondnetworks:angular.copy($scope.bond_networks),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states)\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t$scope.edit_bond = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"editboundNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/bound_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_networks:angular.copy($scope.networks),\r\n\t\t\t\t\tp_bondtypes:angular.copy($scope.bond_types),\r\n\t\t\t\t\tp_bondnetworks:angular.copy($scope.bond_networks),\r\n\t\t\t\t\tp_item :angular.copy(item),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states)\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t$scope.unbundle_netcard = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"unbundleNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/unbundle_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_net:angular.copy(item),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states)\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t//硬件信息\r\n\tHostManage.hardware_info({\r\n\t\thost: param.ip,\r\n\t\tid:param.id || '',\r\n\t\trole:param.role,\r\n\t},function(res){\r\n\t\t$scope.hardware = res;\r\n\t});\r\n    //窗口关闭按钮\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\r\n\tfunction getServer(){\r\n\t\t$scope.loading_server = true;\r\n\t\tHost.service_status({ip: param_host.ip}, function(res){\r\n\t\t\tvar services = [];\r\n\t\t\tfor(var name in res.result){\r\n\t\t\t\tservices.push({name: name, status: res.result[name]})\r\n\t\t\t}\r\n\t\t\t$scope.servers = services;\r\n\t\t\t$scope.loading_server = false;\r\n\t\t},function(error){ $scope.loading_server = false; })\r\n\t}\r\n\tgetServer();\r\n\t$scope.recover = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='重启服务'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='确定重启服务吗' param1='\"+item.name+\"'></p><footer class='text-right'><img data-ng-if='sending' src='./img/HLloading.gif' width='24px'><button data-ng-if='!sending' class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button data-ng-if='!sending' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller:function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.sending = true;\r\n\t\t\t\t\tHost.restartService({\r\n\t\t\t\t\t\thost_ip: param_host.ip,\r\n\t\t\t\t\t\tservice: item.name,\r\n\t\t\t\t\t\taction: 'restart'\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.dismiss();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetServer();\r\n\t\t});\r\n\t};\r\n\t$scope.start = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='启动服务'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='确定启动服务吗' param1='\"+item.name+\"'></p><footer class='text-right'><img data-ng-if='sending' src='./img/HLloading.gif' width='24px'><button data-ng-if='!sending' class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button data-ng-if='!sending' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller:function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.sending = true;\r\n\t\t\t\t\tHost.restartService({\r\n\t\t\t\t\t\thost_ip: param_host.ip,\r\n\t\t\t\t\t\tservice: item.name,\r\n\t\t\t\t\t\taction: 'start'\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetServer();\r\n\t\t});\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/resource/console/controllers.js","/**\r\n*  Module\r\n*\r\n* Description 资源-资源池模块\r\n*/\r\nangular.module('vdi.resource.pool', [])\r\n.factory(\"Host\", [\"$resource\", \"$Domain\",\"$location\",\"$interfaceDomain\",\"$controllerDomain\", function($resource, $Domain, $location,$interfaceDomain,$controllerDomain){\r\n\treturn $resource($Domain + \"/thor/hosts\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/hosts\", isArray: false },\r\n\t\tquery_agent:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/hosts/:id\", params:{id: \"@id\"},isArray: false },\r\n\t\tquery_gpu_agent:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/hosts/gpu/:id\", params:{id: \"@id\"},isArray: false },\r\n\t\t// 根据虚拟化类型返回可用主机列表\r\n\t\tquery_with_virtual_type:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/hosts_with_virtual_type\"},\r\n\t\tadd_agent:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/hosts/:id\", params:{id: \"@id\"}, isArray: false },\r\n\t\tdelete_agent:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/hosts/:id\", params:{id: \"@id\"}, isArray: false },\r\n\t\t// 维护主机（可恢复删除） \r\n\t\t// action ：reboot_host（重启主机），poweroff_host（关闭主机），maintenance_host（维护主机），recovery_host（恢复主机）\r\n\t\tmaintain_host:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/maintainHost\" },\r\n\t\tshutdown:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/shutdown\" },\r\n\t\tconfig_storage:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/config_storage\"},\r\n\t\tfilter_storage: \r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/filter_available_storages\"},\r\n\t\t//获取可用网络信息\r\n        // get_interfaces : \r\n        // \t{ method:\"GET\", url: $interfaceDomain + \"/v1/network/interface/list\"},\r\n        node_ping:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/check_ping\"},\r\n\t\t// 校验主控节点root账号\r\n\t    check_root:\r\n\t        { method: \"POST\", url: $Domain + \"/check_root\"},\r\n\t    // 获取节点服务\r\n\t    service_status:\r\n\t    \t{ method: \"GET\", url: $Domain + \"/thor/host/get_service_status\", isArray: false },\r\n\t    // 重启或者启动服务\r\n\t    restartService:\r\n\t    \t{ method: \"POST\", url: $Domain + \"/thor/host/restartService\" }\r\n\t});\r\n}])\r\n.factory('HostManage', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/hosts\", null, {\r\n\t\tconfig_desktop:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/config_desktop\"},\r\n\t\tnetwork_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/host/networkInfo\"},\r\n\t\tnetwork_edit:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/networkInfo\"},\r\n\t\tstorage_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/host/local_storage\"},\r\n\t\thardware_info:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/host/hardware\"},\r\n\t\t//获取物理网络信息 \r\n\t\tphysic_netword_info:\r\n\t\t\t{ method: \"GET\",url: $Domain + \"/thor/host/get_node_physical_network\"},\r\n\t\t//获取指定节点支持的网络类型  host_ip:主机ip\r\n\t\tnetwork_types:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/host/get_node_available_network_types\"},\r\n\t\t//添加网卡绑定\r\n\t\tnew_bond:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/bondnetwork\"},\r\n\t\t//修改bond\r\n\t\talter_bond:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/host/bondnetwork\"},\r\n\t\t//解除网卡绑定\r\n\t\tdelete_bond:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/host/bondnetwork\"},\r\n\t\t//主机网关及DNS修改\r\n\t\talter_gatedns:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/host/gatedns\"}\r\n\t\t\r\n\t});\r\n}])\r\n.factory('ResourcePool', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/resource\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\"},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\"},\r\n\t\tdelete: \r\n\t\t\t{ method: \"DELETE\",url:$Domain + \"/thor/resource\", params:null},\r\n\t\tedit:\r\n\t\t\t{ method: \"PUT\"}\r\n\r\n\t});\r\n}])\r\n.factory('HostGPU', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n\treturn $resource($Domain + \"/compute/v1/nodes\", null, {\r\n\t\tinfo:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/compute/v1/nodes/:id/gpu/info\", params:{id: \"@id\"},isArray: false },\r\n\t\tstate:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/compute/v1/nodes/:id/gpu/state\", params:{id: \"@id\"},isArray: false },\r\n\t\tconfig: \r\n\t\t\t{ method: \"GET\", url: $Domain + \"/compute/v1/nodes/:id/gpu/config\", params:{id: \"@id\"},isArray: false },\r\n\t\tupdate:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/compute/v1/nodes/:id/gpu/update\", params:{id: \"@id\"},isArray: false },\r\n\t\tenable:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/compute/v1/nodes/:id/gpu/enable\", params:{id: \"@id\"},isArray: false },\r\n\t\tdisable:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/compute/v1/nodes/:id/gpu/disable\", params:{id: \"@id\"},isArray: false },\r\n\r\n\t});\r\n}])\r\n.controller('vdiResourcePoolListController', ['$scope', '$modal','$$$I18N','ResourcePool',function($scope,$modal,$$$I18N,ResourcePool){\r\n\r\n\t$scope.rows = [];\r\n\t$scope.loading = true;\r\n\tResourcePool.query({'check_host_service':true},function(res){\r\n\t\t$scope.rows = res.result;\r\n\t\t$scope.loading = false;\r\n\t});\r\n\t$scope.pagesizes = [10,20,30];\r\n\t$scope.pagesize = 30;\r\n\r\n\t$scope.edit = function(item){\r\n\t\titem.is_edit = true;\r\n\t\t$modal.open({\r\n\t\t\tcontroller:\"alterPoolDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/new_pool.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn item;\r\n\t\t\t},rows:function(){\r\n\t\t\t\treturn $scope.rows\r\n\t\t\t}}\r\n\t\t});\r\n\t};\r\n\tvar _SCOPE = $scope;\r\n\t$scope.delete = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除资源池'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p data-localize='DELETE_POOL_COMFIRM'>确定删除资源池吗？</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tvar postData = {\r\n\t\t\t\t\t\tid:item.uuid\r\n\t\t\t\t\t};\r\n\t\t\t\t\tResourcePool.delete(postData,function(res){\r\n\t\t\t\t\t\tResourcePool.query(function(res){\r\n\t\t\t\t\t\t\t_SCOPE.rows.splice(0,_SCOPE.rows.length);\r\n\t\t\t\t\t\t\t[].push.apply(_SCOPE.rows,res.result);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\t\t\t\r\n\t};\r\n}])\r\n.controller('vdiResourcePoolHostController', ['$scope','$routeParams','$modal','$$$I18N','Host','$interval', '$rootScope',\r\n\tfunction($scope,$routeParams,$modal,$$$I18N,Host,$interval,$rootScope){\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"资源\", \"资源池管理\",\"计算节点\"]);\r\n\r\n\t$scope.rows = [];\r\n\t$scope.vtype = $routeParams.type;\r\n\r\n\t$scope.orders = [ {name: $$$I18N.get(\"按添加时间排序\"), val: 'time'}, {name: $$$I18N.get(\"按名称排序\"), val: 'name'}];\r\n\t$scope.order = $scope.orders[0];\r\n\t$scope.sortTem = function(val){\r\n\t\tif(val == 'time'){\r\n\t\t\t$scope.rows.sort(function(a,b){ return a.created_at<b.created_at? -1:1 });\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.rows.sort(function(a,b){ return a.host>b.host? 1:-1 });\r\n\t\t}\r\n\t}\r\n\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"nodes\", $scope.rows.map(item => item.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"nodesRowsUpdate\", function($event, data){\r\n\t\t$rootScope.activeHostIds = $scope.rows.filter(row => { return row.status === 'active'}).map(row => { return row.id});\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t$scope.$on(\"update_host_data\",function(){\r\n\t\t$scope.get_list();\r\n\t});\r\n\r\n\tvar get_list = function(){\r\n\t\t$scope.loading = true;\r\n\t\t$scope.rows = [];\r\n\t\tHost.query_agent({id:$routeParams.id},function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$scope.rows = res.hosts_list.sort(function(a,b){ return a.created_at<b.created_at? -1:1 });\r\n\t\t\t$scope.all_data = res;\r\n\t\t});\r\n\t};\r\n\tget_list();\r\n\t$scope.get_list = get_list;\r\n\t$scope.configStorage = function(item){\r\n\t\tvar ins = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/config_storage.html\",\r\n\t\t\tcontroller:\"configStorageDialog\",\r\n\t\t\tresolve:{param:function(){return item}}\r\n\t\t});\r\n\t\tins.result.then(function(){\r\n\t\t\tget_list();\r\n\t\t});\r\n\t};\r\n\t// \t  #    active - 活动\r\n\t//    #    maintenance - 维护模式\r\n\t//    #    offline - 离线\r\n\t//    #    building - 正在添加中\r\n\t$scope.restart = function(){\r\n\t\tvar rows = $scope.rows.filter(function(item) {return item._selected && item.status === 'active'});\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='重启主机'>\"+\r\n\t\t\t\t\t\t\"重启主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定重启主机吗?'>确定重启主机吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t                    $modalInstance.close();\r\n\t                    Host.maintain_host({\r\n\t                    \thost_ips:rows.map(function(item){ return item.ip }),\r\n\t                    \taction:\"reboot_host\"\r\n\t                    },function(res){\r\n\t                    \tif(rows.some(function(item){ return item.is_console})){\r\n\t                    \t\t$rootScope.$broadcast('NOAUTH');\r\n\t\t\t\t\t\t\t\tlocation.reload();\r\n\t                    \t}\r\n\t                    });\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.poweroff = function(){\r\n\t\tvar rows = $scope.rows.filter(function(item) {return item._selected && item.status === 'active'});\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='关闭主机'>\"+\r\n\t\t\t\t\t\t\"关闭主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定关闭主机吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tHost.maintain_host({\r\n\t\t\t\t\t\t\thost_ips:rows.map(function(item){ return item.ip }),\r\n\t\t\t\t\t\t\taction:\"poweroff_host\"\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIPACTIVE\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\t\r\n\t$scope.maintain = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status === \"active\" });\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='维护主机'>\"+\r\n\t\t\t\t\t\t\"维护主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='MAINTAIN_HOST_COMFIRM'>进入维护模式时，会关闭当前计算节点上的所有桌面，是否确定？</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tvar postData ={\r\n\t\t\t\t\t\t\taction:\"maintenance_host\",\r\n\t\t\t\t\t\t\thost_ips:rows.map(function(item){ return item.ip })\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tHost.maintain_host(postData);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIPACTIVE\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t};\r\n\t};\r\n\t$scope.recovery = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected && row.status === 'maintenance'; });\r\n\t\tif(rows.length){\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='恢复主机'>\"+\r\n\t\t\t\t\t\t\"恢复主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='确定恢复主机吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tvar postData ={\r\n\t\t\t\t\t\t\taction:\"recovery_host\",\r\n\t\t\t\t\t\t\thost_ips:rows.map(function(item){ return item.ip })\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tHost.maintain_host(postData);\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiResourceHostList_TIPRECOVER\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = $scope.rows.filter(function(item) {return item._selected});\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除主机'>\"+\r\n\t\t\t\t\t\"删除主机</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='DELETE_HOST_COMFIRM?'></p><footer class='text-right'> <img ng-show='loadding' src='img/loadingtext.gif' width='24px' height='24px'/><button ng-show='!loadding' class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button ng-show='!loadding' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.loadding = true;\r\n                    Host.delete_agent({\r\n                    \thost_ids:rows.map(function(item){ return item.id }),\r\n                    \tid:$routeParams.id\r\n                    },function(res){\r\n                    \tget_list();\r\n                    }).$promise.finally(function(){\r\n                    \t$scope.loadding = false;\r\n                    \t$modalInstance.close();\r\n                    });\r\n\t\t\t\t},\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.openHostMoreDialog = function(p){\r\n\t\tvar _dialog = $modal.open({\r\n\t\t\tcontroller:\"hostMoreDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/host_more.html\",\r\n\t\t\tsize:\"lg\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparam:function(){\r\n\t\t\t\t\treturn p;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n}])\r\n.controller('newPoolDialog', ['$scope','$modalInstance','ResourcePool', function($scope,$modalInstance,ResourcePool){\r\n\tsetTimeout(function(){\r\n\t\t$(\"[rel=popover-hover]\").popover({ trigger : \"hover\" });\r\n\t})\r\n\t$scope.rbd_enabled = false;\r\n\t$scope.template_type = 'add';\r\n\t$scope.virtual_type = \"kvm\";\r\n\t$scope.ok = function(){\r\n\t\tvar postData = {\r\n\t\t\tname:this.name,\r\n\t\t\tvirtual_type:this.virtual_type,\r\n\t\t\trbd_enabled: this.rbd_enabled,\r\n\t\t\tdescription:this.des\r\n\t\t};\r\n\t\t$scope.loadding = true;\r\n\t\tResourcePool.add(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tResourcePool.query(function(res){\r\n\t\t\t\t$scope.rows.splice(0,$scope.rows.length);\r\n\t\t\t\t[].push.apply($scope.rows,res.result);\r\n\t\t\t});\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller('alterPoolDialog', ['$scope','$modalInstance','param','rows','ResourcePool', function($scope,$modalInstance,param,rows,ResourcePool){\r\n\tsetTimeout(function(){\r\n\t\t$(\"[rel=popover-hover]\").popover({ trigger : \"hover\" });\r\n\t})\r\n\t$scope.template_type = 'alter';\r\n\t$scope.name = param.name;\r\n\t$scope.virtual_type = param.type;\r\n\t$scope.rbd_enabled = param.rbd_enabled;\r\n\t$scope.des = param.description;\r\n\t$scope.is_edit = param.is_edit;\r\n\t$scope.is_default = param.name === 'default'? true:false;\r\n\t$scope.hostnum = param.hosts.length;\r\n\t$scope.ok = function(){\r\n\t\tvar postData = {\r\n\t\t\tid:param.uuid,\r\n\t\t\tname:this.name,\r\n\t\t\trbd_enabled: this.rbd_enabled,\r\n\t\t\tdescription:this.des\r\n\t\t};\r\n\t\t$scope.loadding = true;\r\n\t\tResourcePool.edit(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tResourcePool.query(function(res){\r\n\t\t\t\trows.splice(0,rows.length);\r\n\t\t\t\t[].push.apply(rows,res.result);\r\n\t\t\t});\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t}\r\n}])\r\n.controller(\"hostMoreDialog\", [\"$scope\",\"$modalInstance\", \"Host\", \"HostManage\",\"$$$I18N\", \"$Domain\",\"param\",\"Storage\",\"Console\",\"$modal\",\"maskModel\",\"$rootScope\",\"HostGPU\",\"$q\",\r\n\tfunction($scope, $modalInstance,Host,HostManage, $$$I18N, $Domain,param,Storage,Console,$modal,maskModel,$rootScope,HostGPU,$q){\r\n    //查询网卡\r\n    $scope.max_instance = param.max_instance;\r\n    var param_host =angular.copy(param);\r\n    $scope.virtual_type = param_host.virtual_type;\r\n\t$scope.rbd_enabled = param_host.rbd_enabled;\r\n\t$scope.enable_gpu_module = param_host.enable_gpu_module;\r\n\r\n    $scope.get_nic = function(){\r\n    \t$scope.loading_nic = true;\r\n    \tHostManage.network_info({\r\n\t    \thost:param.ip,\r\n\t    \tid:param.id || ''\r\n\t    },function(res){\r\n\t    \t$scope.dev_states = res.dev_states;\r\n\t    \t$scope.networks = res.networks.map(function(item){\r\n\t    \t\titem.ips = item.ips.map(function(sub,idx){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tip:sub,\r\n\t    \t\t\t\tnetmask:item.netmasks[idx],\r\n\t    \t\t\t\tip_editable:item.ips_editable[idx],\r\n\t    \t\t\t\tuneditable:item.ips_editable[idx].is_management || item.ips_editable[idx].is_image\r\n\t    \t\t\t}\r\n\t    \t\t});\r\n\t    \t\titem._ips = item.ips.map(function(sub){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tvalue:sub,\r\n\t    \t\t\t\tmodel:angular.copy(sub)\r\n\t    \t\t\t};\r\n\t    \t\t});\r\n\t    \t\titem.readonly = true;\r\n\t    \t\treturn item;\r\n\t    \t}).sort(function(a,b){\r\n\t\t \t\treturn a.name > b.name;\r\n\t\t \t});\r\n\t\t \t$scope.data = {\r\n\t\t \t\t_dnss: [{},{}].map((d,idx) => {\r\n\t\t \t\t\treturn {\r\n\t\t \t\t\t\tmodel:res.dns[idx],\r\n\t\t \t\t\t\tvalue:res.dns[idx]\r\n\t\t \t\t\t};\r\n\t\t \t\t}),\r\n\t\t \t\t_gateway: {\r\n\t\t \t\t\tmodel:res.gateway,\r\n\t\t \t\t\tvalue:res.gateway\r\n\t\t \t\t},\r\n\t\t \t\t_readonly:true\r\n\r\n\t\t \t};\r\n\t\t \t$scope.bond_types = res.bond_types;\r\n\t\t \t$scope.bond_networks = res.bond_networks.map(function(item){\r\n\t    \t\titem.ips = item.ips.map(function(sub,idx){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tip:sub,\r\n\t    \t\t\t\tnetmask:item.netmasks[idx],\r\n\t    \t\t\t\tip_editable:item.ips_editable[idx],\r\n\t    \t\t\t\tuneditable:item.ips_editable[idx].is_management || item.ips_editable[idx].is_image\r\n\t    \t\t\t}\r\n\t    \t\t});\r\n\t    \t\titem._ips = item.ips.map(function(sub){\r\n\t    \t\t\treturn {\r\n\t    \t\t\t\tvalue:sub,\r\n\t    \t\t\t\tmodel:angular.copy(sub)\r\n\t    \t\t\t};\r\n\t    \t\t});\r\n\t    \t\titem.readonly = true;\r\n\t    \t\treturn item;\r\n\t    \t});\r\n\t    }).$promise.finally(function(){\r\n\t    \t$scope.loading_nic = false;\r\n\t    });\r\n    };\r\n    $scope.get_nic();\r\n    //修改网卡\r\n\t$scope.ok = function(item){\r\n\t\titem.submiting = true;\r\n\t\tvar all_cidr = $scope.networks.concat($scope.bond_networks).reduce((arr,net) =>{\r\n\t\t\tlet cidr = net._ips.map( (ip) => {\r\n\t\t\t\treturn ip.model.ip + \"/\" + ip.model.netmask;\r\n\t\t\t});\r\n\t\t\tarr.push.apply(arr,cidr);\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tvar before_cidr = $scope.networks.concat($scope.bond_networks).reduce((arr,net) =>{\r\n\t\t\tlet cidr = net.ips.map( (ip) => {\r\n\t\t\t\treturn ip.ip + \"/\" + ip.netmask;\r\n\t\t\t});\r\n\t\t\tarr.push.apply(arr,cidr);\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tvar backItem = {\r\n\t\t\tid:param.id,\r\n\t\t\tis_console:param.is_console,\r\n\t\t\tiface:item.name,\r\n\t\t\tips:item._ips.map(function(i){ return i.model.ip}),\r\n\t\t\tnetmasks:item._ips.map(function(i){ return i.model.netmask}),\r\n\t\t\tips_editable:item._ips.map(function(i){ return i.model.ip_editable}),\r\n\t\t\tbefore_cidr:before_cidr,\r\n\t\t\tall_cidr:all_cidr\r\n\t\t};\r\n\t\tvar is_alter = item._ips.every(it => {\r\n\t\t\treturn it.model.ip === it.value.ip && it.model.netmask === it.value.netmask\r\n\t\t});\r\n\t\tif(is_alter && item._ips.length === item.ips.length){\r\n\t\t\t// 修改后的值和初始值相等时，不提交数据\r\n\t\t\titem.submiting = false;\r\n\t\t\titem.readonly = true;\r\n\t\t}else{\r\n\t\t\tHostManage.network_edit(backItem, function(){\r\n\t\t\t\titem._ips.forEach(i => {i.value = angular.copy(i.model)});\r\n\t\t\t\titem.submiting = false;\r\n\t\t\t\titem.readonly = true;\r\n\t\t\t\tlocation.reload();\r\n\t\t\t},function(){\r\n\t\t\t\titem.submiting = false;\r\n\t\t\t\titem.readonly = false; \r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.okDns = function(d){\r\n\t\td.submiting = true;\r\n\t\tvar postData = {\r\n\t\t\tid:param.id,\r\n\t\t\tgateway:d._gateway.model,\r\n\t\t\tdns:d._dnss.filter(i => { return Boolean(i.model) }).map(i => { return i.model})\r\n\t\t};\r\n\t\tvar no_alter = d._dnss.concat(d._gateway).every(it => {\r\n\t\t\treturn it.model === it.value\r\n\t\t});\r\n\t\tif(no_alter){\r\n\t\t\td.submiting = false;\r\n\t\t\td._readonly = true;\r\n\t\t}else{\r\n\t\t\tHostManage.alter_gatedns(postData, function(res){\r\n\t\t\t\td._dnss.forEach(dns => {\r\n\t\t\t\t\tdns.value = dns.model;\r\n\t\t\t\t});\r\n\t\t\t\td._gateway.value = d._gateway.model;\r\n\t\t\t\td._readonly = true;\r\n\t\t\t\t// FIX #6061\r\n\t\t\t\t// maskModel.open(angular.copy($rootScope.activeHostIds));\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\td.submiting = false;\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.cancel = function(item){\r\n\t\titem.readonly = true;\r\n\t\titem._ips = item.ips.map(function(sub){\r\n\t\t\treturn {\r\n\t\t\t\tvalue:sub,\r\n\t\t\t\tmodel:angular.copy(sub)\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\t$scope.cancelDns = function(d){\r\n\t\td._readonly = true;\r\n\t\td._dnss.forEach(dns => {\r\n\t\t\tdns.model = dns.value?dns.value:null;\r\n\t\t});\r\n\t\td._gateway.model = d._gateway.value;\r\n\t};\r\n\t$scope.add_ip = function(item){\r\n\t\titem._ips.push({\r\n\t\t\tmodel:{\r\n\t\t\t\tip_editable:{\r\n\t\t\t\t\tis_management:false,\r\n\t\t\t\t\tis_image:false\r\n\t\t\t\t},\r\n\t\t\t\tuneditable:false\r\n\t\t\t},\r\n\t\t\tvalue:{\r\n\t\t\t\tip_editable:{\r\n\t\t\t\t\tis_management:false,\r\n\t\t\t\t\tis_image:false\r\n\t\t\t\t},\r\n\t\t\t\tuneditable:false\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.minus_ip = function(per,all){\r\n\t\tall.splice(all.indexOf(per),1);\r\n\t};\r\n\t$scope.bound_netcard = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"boundNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/bound_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_networks:angular.copy($scope.networks),\r\n\t\t\t\t\tp_bondtypes:angular.copy($scope.bond_types),\r\n\t\t\t\t\tp_bondnetworks:angular.copy($scope.bond_networks),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states),\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t$scope.edit_bond = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"editboundNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/bound_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_networks:angular.copy($scope.networks),\r\n\t\t\t\t\tp_bondtypes:angular.copy($scope.bond_types),\r\n\t\t\t\t\tp_bondnetworks:angular.copy($scope.bond_networks),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states),\r\n\t\t\t\t\tp_item :angular.copy(item)\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t$scope.unbundle_netcard = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\tcontroller:\"unbundleNetcardDialog\",\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/resource/pool/unbundle_netcard.html\",\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tp_host:angular.copy(param_host),\r\n\t\t\t\t\tp_net:angular.copy(item),\r\n\t\t\t\t\tp_dev_states:angular.copy($scope.dev_states),\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetNetcardList();\r\n\t\t});\r\n\t};\r\n\t// 是否能编辑，同时只能有一行可以编辑\r\n\t$scope.netEditable = function(net){\r\n\t\tvar hit = false;\r\n\t\tangular.forEach($scope.networks, function(item){\r\n\t\t\tif(item.readonly === false) {\r\n\t\t\t\thit = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn !hit;\r\n\t};\r\n\t// 本地存储信息\r\n\tHostManage.storage_info({\r\n\t\thost:param.ip,\r\n\t\tid:param.id || ''\r\n\t},function(res){\r\n\t\t$scope.storages = res.result;\r\n\t});\r\n\r\n\t//硬件信息\r\n\tHostManage.hardware_info({\r\n\t\thost: param.ip,\r\n\t\tid:param.id || ''\r\n\t},function(res){\r\n\t\t$scope.hardware = res;\r\n\t});\r\n\r\n   \r\n    //窗口关闭按钮\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n   \r\n    //修改最大实例数\r\n    $scope.insBtn_unable = false;\r\n\t$scope.saveMaxInstance = function(){\r\n\t\t$scope.insBtn_unable = true;\r\n\t\tvar _this = this;\r\n\t\tHostManage.config_desktop({\r\n            \"host\":param.id,\r\n\t\t\t\"max_instance\":_this.max_instance\r\n\t\t},function(res){\r\n\t\t\t$scope.insBtn_unable = false;\r\n\t\t\t$scope.insForm_suc = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t$scope.insForm_suc = false;\r\n\t\t\t\t// 通知父scope,更新数据\r\n\t\t\t\t$scope.$root.$broadcast('update_host_data');\r\n\t\t\t},1000);\r\n\t\t\t// _this.max_instance = null;\r\n\t\t});\r\n\t};\r\n\t$scope.save_outer_IP = function(){\r\n\t\t$scope.IP_Btn_unable = true;\r\n\t\tConsole.save_ip({host:param.id,external_ip:this.outerIP},function(){\r\n\t\t\t$scope.outerIPForm_suc = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\t$scope.outerIPForm_suc = false;\r\n\t\t\t},1000);\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.IP_Btn_unable = false;\r\n\t\t});\r\n\t};\r\n\r\n\tfunction getServer(){\r\n\t\t$scope.loading_server = true;\r\n\t\tHost.service_status({ip: param_host.ip}, function(res){\r\n\t\t\tvar services = [];\r\n\t\t\tfor(var name in res.result){\r\n\t\t\t\tservices.push({name: name, status: res.result[name]})\r\n\t\t\t}\r\n\t\t\t$scope.servers = services;\r\n\t\t\t$scope.loading_server = false;\r\n\t\t},function(error){ $scope.loading_server = false; })\r\n\t}\r\n\tgetServer();\r\n\t$scope.recover = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='重启服务'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='确定重启服务吗' param1='\"+item.name+\"'></p><footer class='text-right'><img data-ng-if='sending' src='./img/HLloading.gif' width='24px'><button data-ng-if='!sending' class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button data-ng-if='!sending' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller:function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.sending = true;\r\n\t\t\t\t\tHost.restartService({\r\n\t\t\t\t\t\thost_ip: param_host.ip,\r\n\t\t\t\t\t\tservice: item.name,\r\n\t\t\t\t\t\taction: 'restart'\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.dismiss();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetServer();\r\n\t\t});\r\n\t};\r\n\t$scope.start = function(item){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='启动服务'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='确定启动服务吗' param1='\"+item.name+\"'></p><footer class='text-right'><img data-ng-if='sending' src='./img/HLloading.gif' width='24px'><button data-ng-if='!sending' class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button data-ng-if='!sending' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\tcontroller:function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$scope.sending = true;\r\n\t\t\t\t\tHost.restartService({\r\n\t\t\t\t\t\thost_ip: param_host.ip,\r\n\t\t\t\t\t\tservice: item.name,\r\n\t\t\t\t\t\taction: 'start'\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t},function(error){\r\n\t\t\t\t\t\t$scope.sending = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize: \"sm\"\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tgetServer();\r\n\t\t});\r\n\t};\r\n\tvar _scope = $scope;\r\n\t/* GPU显卡Tab页 */\r\n\tfunction getHostGPU(){\r\n\t\t$scope.loading_GPU = true;\r\n\t\t$q.all([HostGPU.state({id:param.id}).$promise,HostGPU.config({id:param.id}).$promise,HostGPU.info({id:param.id}).$promise]).then(function(arr){\r\n\t\t\t$scope.GPU_V = arr[0].state.flag=='defined';\r\n\t\t\t$scope.GPU_V_num = arr[1].config.vf_num;\r\n\t\t\tvar totalNum = arr[2].info.reduce(function(count, item){\r\n\t\t\t\treturn count + item.SRIOVTotalVFS;\r\n\t\t\t}, 0);\r\n\t\t\t$scope.GPU_V_max = totalNum;\r\n\t\t\t$scope.GPU_V_min = arr[2].info.length;\r\n\t\t\t$scope.loading_GPU = false;\r\n\t\t})\r\n\t}\r\n\tif($scope.enable_gpu_module){\r\n\t\tgetHostGPU();\r\n\t}\r\n\tfunction queryConfig(){\r\n\t\tHostGPU.config({id:param.id},function(r){\r\n\t\t\t$scope.GPU_V_num = r.config.vf_num;\r\n\t\t})\r\n\t}\r\n\t$scope.changeGPU_V = function(val){\r\n\t\t$scope.GPU_V_loading = true;\r\n\t\tif(val){\r\n\t\t\tHostGPU.enable({id:param.id},function(res){\r\n\t\t\t},function(error){\r\n\t\t\t\t_scope.GPU_V = !val;\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.GPU_V_loading = false;\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tHostGPU.disable({id:param.id},function(res){\r\n\t\t\t},function(error){\r\n\t\t\t\t_scope.GPU_V = !val;\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.GPU_V_loading = false;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t$scope.saveGPUV = function(){\r\n\t\t$scope.saving = true;\r\n\t\tHostGPU.update({id:param.id,data:{vf_num:this.GPU_V_num}},function(res){\r\n\t\t\t$scope.sav_suc = true;\r\n\t\t},function(error){\r\n\t\t\t$scope.GPU_V = !$scope.GPU_V;\r\n\t\t\t$scope.sav_suc = false;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.saving = false;\r\n\t\t\tqueryConfig();\r\n\t\t})\r\n\t}\r\n}])\r\n.controller('addHostDialog', ['$scope','$modalInstance','Host','$routeParams','Network','Manage','HA','$http',\"$Domain\",\"$$$I18N\",\"HostManage\",\"$location\",function($scope,$modalInstance,Host,$routeParams,Network,Manage,HA,$http,$Domain,$$$I18N,HostManage,$location){\r\n\tvar $s = $scope;\r\n\t$s.step = 1;\r\n\t$s.host = {};\r\n\t$s.quorum = {};\r\n    function getDataNetwork(){\r\n    \t$s.loading_network = true;\r\n    \treturn Network.query().$promise;\r\n    }\r\n    function formatIP(cidr){\r\n\t    var ip = cidr.split(\"/\")[0];\r\n\t    var masklen = Number(cidr.split(\"/\")[1]);\r\n\t    var binaryMask = 0xFFFFFFFF << (32 - masklen);\r\n\t    var arrmask = [];\r\n\t    for(var i = 32/8; i > 0 ;i--){\r\n\t        arrmask.push(binaryMask >>> 8 * (i-1) & 0xff);\r\n\t    }\r\n\t    return {\r\n\t        cidr:cidr,\r\n\t        ip:ip,\r\n\t        netmask:arrmask.join(\".\")\r\n\t    };\r\n\t}\r\n\tfunction get_interfaces(){\r\n\t\t$s.loading_interface = true;\r\n\t\t$s.interfaces = [];\r\n\t\treturn HostManage.network_info({\r\n\t\t\thost:$s.host.ip,\r\n\t\t\tid:null\r\n\t\t},function(res){\r\n\t\t\t$s.interfaces = res.networks.concat(res.bond_networks).map(dev => {\r\n\t\t\t\tdev._cidrs = (dev.ips || dev.ip).map((ip,idx) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tip:ip,\r\n\t        \t\t\tnetmask: (dev.netmasks || dev.netmask)[idx]\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdev._dev = dev.name;\r\n\t\t\t\tdev._selected = false;\r\n\t\t\t\treturn dev;\r\n\t\t\t});\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$s.loading_interface = false;\r\n\t\t});\r\n\t}\r\n\t$s.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$s.go_next = function(){\r\n\t\t$s.loading = true;\r\n\t\tHost.check_root({\r\n\t\t\tusername: $s.host.username,\r\n\t\t\troot_password:$s.host.root_password,\r\n\t\t\tnode_ip:$s.host.ip,\r\n\t\t\tforce: $s.host.force\r\n\t\t},function(res){\r\n\t\t\t$s.agent_detail = res.result;\r\n\t\t\t$s.enter_step2();\r\n\t\t}).$promise.finally(res => {\r\n\t\t\t$s.loading = false;\r\n\t\t});\r\n\t};\r\n\t$s.go_pre = function(){\r\n\t\t$s.step = 1;\r\n\t\t$s.dataNets = [];\r\n\t\t$s.interfaces = [];\r\n\t\t$s.agent_detail = {};\r\n\t};\r\n\t$s.enter_step2 = function(){\r\n\t\t$s.step = 2;\r\n\t    get_interfaces().then(getDataNetwork).then(function(res){\r\n\t    \t$s.loading_network = false;\r\n\t    \tvar nets = res.networks.reduce((obj,it) => {\r\n\t    \t\tif(obj[it.switch_name]){\r\n\t    \t\t\tobj[it.switch_name]['name'] += \"/\" + it.name;\r\n\t    \t\t}else{\r\n\t    \t\t\tobj[it.switch_name] = it;\r\n\t    \t\t}\r\n\t    \t\treturn obj;\r\n\t    \t},{});\r\n\t    \t$s.dataNets = Object.keys(nets).map((key,idx) => {\r\n\t    \t\tnets[key]._data_dev = $s.interfaces[idx];\r\n\t    \t\treturn nets[key];\r\n\t    \t});\r\n\t    });\r\n\t};\r\n\t$s.ok = function(type){\r\n\t\tvar _this = this;\r\n\t\tvar h = _this.host;\r\n\t\tthis.loadding = true;\r\n\t\tvar postData = {\r\n\t\t\tid:$routeParams.id || $s.item.id,\r\n\t\t\tip:h.ip,\r\n\t\t\tusername: h.username,\r\n\t\t\troot_password:h.root_password,\r\n\t\t\tvirtual_type:type,\r\n\t\t\tforce: $s.host.force,\r\n\t\t\tmanagement_dev:$s.agent_detail.node_manage_dev,\r\n\t\t\tmanagement_ip:$s.agent_detail.node_manage_ip,\r\n\t\t\tmanagement_netmask:$s.agent_detail.node_manage_netmask,\r\n\t\t\tbond_switch_infos:$s.dataNets.map(n => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdev:n._data_dev ? n._data_dev._dev : null,\r\n\t\t\t\t\tswitch:n.switch_name\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tHost.add_agent(postData,function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tif($s.item){\r\n\t\t\t\t$location.url(\"/resource/pool/\"+$s.item.id+\"/\"+type)\r\n\t\t\t}else{\r\n\t\t\t\t$s.get_list();\r\n\t\t\t}\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t_this.loadding = false;\r\n\t\t});\r\n\t}\r\n}])\r\n.controller('configPubStorageDialog', ['$scope','$modalInstance','Storage', function($scope,$modalInstance,Storage){\r\n\t\r\n\t$scope.ok = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller('configStorageDialog', ['$scope','param','$modalInstance','Host', 'Storage', function($scope,param,$modalInstance,Host,Storage){\r\n\t$scope.host = param.host;\r\n\t$scope.loading = true;\r\n\t$scope.sys_luns = [];\r\n\t$scope.data_luns =[];\r\n\tStorage.query({storage_uuid:param.storage_uuid},function(res){\r\n\t\t$scope.loading = false;\r\n\t\t// res.host_storages.unshift({name:\"本地存储\",uuid:undefined});\r\n\t\t$scope.luns = res.storages.map(function(s){\r\n\t\t\ttry{\r\n\t\t\t\ts._total_size = Number(s.storage_metadata.capabilities.total_capacity_gb).toFixed(0);\r\n\t\t\t\ts._free_size =  Number(s.storage_metadata.capabilities.free_capacity_gb).toFixed(0);\r\n\t\t\t\ts._used_size =  Number(s._total_size - s._free_size).toFixed(0);\r\n\t\t\t}catch(err){}\r\n\t\t\treturn s;\r\n\t\t});\r\n\t\t$scope.hostluns = res.host_storages.map(function(s){\r\n\t\t\ttry{\r\n\t\t\t\ts._total_size = Number(s.storage_metadata.capabilities.total_capacity_gb).toFixed(0);\r\n\t\t\t\ts._free_size =  Number(s.storage_metadata.capabilities.free_capacity_gb).toFixed(0);\r\n\t\t\t\ts._used_size =  Number(s._total_size - s._free_size).toFixed(0);\r\n\t\t\t}catch(err){} \r\n\t\t\treturn s;\r\n\t\t});\r\n\t\t$scope.imagePropertyLun = $scope.luns.filter(function(item){ return item.uuid === param.image_storage_performance})[0];\r\n\t\t$scope.imageCapacityLun = $scope.luns.filter(function(item){ return item.uuid === param.image_storage_capacity})[0];\r\n\t\t$scope.hostLun = $scope.hostluns.filter(function(item){ return res.choosed_storage === 'local' ? item.uuid == undefined : item.uuid === res.choosed_storage})[0];\r\n\t\t$scope.filterStorage($scope.imagePropertyLun,1);\r\n\t\t$scope.filterStorage($scope.imageCapacityLun,2);\r\n\t});\r\n\t$scope.filterStorage = function(_s,type){\r\n\t\t$scope.loading_lun = true;\r\n\t\tHost.filter_storage({\r\n\t\t\tstorage_id:_s.uuid,\r\n\t\t\tdevice_type:_s.device_type,\r\n\t\t\tnode_uuid:_s.node_uuid\r\n\t\t}).$promise.then(function(res){\r\n\t\t\t$scope.loading_lun = false;\r\n\t\t\tres.result.forEach(function(s){\r\n\t\t\t\ttry{\r\n\t\t\t\t\ts._total_size = Number(s.storage_metadata.capabilities.total_capacity_gb).toFixed(0);\r\n\t\t\t\t\ts._free_size =  Number(s.storage_metadata.capabilities.free_capacity_gb).toFixed(0);\r\n\t\t\t\t\ts._used_size =  Number(s._total_size - s._free_size).toFixed(0);\r\n\t\t\t\t}catch(err){}\r\n\t\t\t});\r\n\t\t\tswitch(type){\r\n\t\t\t\tcase 1: {\r\n\t\t\t\t\t$scope.sys_luns = res.result;\r\n\t\t\t\t\t$scope.propertyLun = ($scope.sys_luns.filter(function(item){ return item.uuid === param.storage_performance})[0]) || $scope.sys_luns[0];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\tcase 2: {\r\n\t\t\t\t\t$scope.data_luns = res.result;\r\n\t\t\t\t\t$scope.capacityLun = ($scope.data_luns.filter(function(item){ return item.uuid === param.storage_capacity})[0]) || $scope.data_luns[0];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t};\r\n\t\t\t\tdefault:{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\t$scope.loading = true;\r\n\t\tHost.config_storage({\r\n\t\t\thost:param.id,\r\n\t\t\t// storage_base:this.baseLun.uuid,\r\n\t\t\tstorage_performance: $scope.propertyLun.uuid,\r\n\t\t\tstorage_capacity: $scope.capacityLun.uuid,\r\n\t\t\tcache_storage: _this.hostLun.uuid,\r\n\t\t\timage_storage_performance: $scope.imagePropertyLun.uuid,\r\n\t\t\timage_storage_capacity:$scope.imageCapacityLun.uuid\r\n\t\t}).$promise.then(function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).finally(function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\t// 过滤远端存储\r\n\tfunction filter_data(rsts){\r\n\t\tvar ip = param.ip;\r\n\t\tvar _storages = rsts.filter(function(item){\r\n\t\t\tif(item.device_type === 'local' && item.ip !== ip){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\treturn _storages;\r\n\t}\r\n}])\r\n.controller('boundNetcardDialog', ['$scope','param','$modalInstance','HostManage','$filter','$$$I18N','maskModel','$rootScope', '$modal', function($scope,param,$modalInstance,HostManage,$filter,$$$I18N,maskModel,$rootScope,$modal){\r\n\t// 主控和计算节点公用\r\n\tvar host_mess = param.p_host;\r\n\tvar net_mess = param.p_networks;\r\n\tvar dev_status = param.p_dev_states;\r\n\tvar temp = {\r\n\t\tip: null,\r\n\t\tnetmask: null,\r\n\t\tuneditable:false,\r\n\t\tip_editable:{\r\n\t\t\tis_management:false,\r\n\t\t\tis_image:false\r\n\t\t}\r\n\t};\r\n\t$scope.type = 'add';\r\n\t$scope.bond_types = param.p_bondtypes;\r\n\t$scope.netcards = net_mess.filter(function(n){ return n.has_bond === false });\r\n\t$scope.ips = [angular.copy(temp)];\r\n\t$scope.data = {};\r\n\r\n\t// HostManage.network_info({\r\n\t// \thost:host_mess.ip,\r\n\t//     id:host_mess.id || ''\r\n\t// },function(res){\r\n\t// \t$scope.netcards = res.networks.filter(function(net){\r\n\t// \t\treturn net.has_bond === false;\r\n\t// \t});\r\n\t// \tall_nets = res.networks.concat(res.bond_networks);\r\n\t// });\r\n\r\n\t// HostManage.network_types({host_ip:host_mess.ip},function(res){\r\n\t// \t$scope.types = res.result;\r\n\t// });\r\n\t$scope.update_ip = function(){\r\n\t\t// var eth0 = $filter(\"selectedFilter\")($scope.netcards).filter(function(n){ return n.iface === \"eth0\" })[0];\r\n\t\tvar manage_image_ips = $filter(\"selectedFilter\")($scope.netcards).reduce((arr,netcard) => {\r\n\t\t\tnetcard.ips.forEach(ip => {\r\n\t\t\t\tif(ip.uneditable){\r\n\t\t\t\t\tarr.push(ip);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tif(manage_image_ips.length){\r\n\t\t\t$scope.ips = angular.copy(manage_image_ips);\r\n\t\t}else{\r\n\t\t\t$scope.ips = [angular.copy(temp)];\r\n\t\t}\r\n\t};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.netcards.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\t$scope.update_ip();\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.data.is_all = $scope.netcards.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t\t$scope.update_ip();\r\n\t};\r\n\t$scope.add_ip = function(){\r\n\t\t$scope.ips.push(angular.copy(temp));\r\n\t};\r\n\t$scope.minus_ip = function(idx){\r\n\t\t$scope.ips.splice(idx,1);\r\n\t};\r\n\t$scope.get_select_nets_length = function(){\r\n\t\treturn $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface }).length\r\n\t};\r\n\tvar parentScope = $scope;\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar select_nets = $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface });\r\n\t\tif(select_nets.every(card => dev_status[card])){\r\n\t\t\tparentScope.okPost(_this);\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='INFOR_TIP'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='DELETE_BOND_IVALID_CONFIRM'></p><footer class='text-right'> <img ng-show='loadding' src='img/loadingtext.gif' width='24px' height='24px'/><button ng-show='!loadding' class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button ng-show='!loadding' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tparentScope.okPost(_this);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.okPost = function(scope){\r\n\t\tvar _this = scope;\r\n\t\tvar select_nets = $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface });\r\n\t\tvar postData = {\r\n\t\t\tid:host_mess.id,\r\n\t\t\tis_console:host_mess.is_console,\r\n\t\t\tbond_name:_this.name,\r\n\t\t\tbond_type:_this.bond_type,\r\n\t\t\tifaces:select_nets,\r\n\t\t\tips:$scope.ips.map(ip => { return ip.ip}),\r\n\t\t\tnetmasks:$scope.ips.map(ip => { return ip.netmask}),\r\n\t\t\tips_editable:$scope.ips.map(ip => { return ip.ip_editable})\r\n\t\t};\r\n\t\tif(postData.ifaces && postData.ifaces.length > 1){\r\n\t\t\t$scope.loadding = true;\r\n\t\t\tHostManage.new_bond(postData,function(res){\r\n\t\t\t\t// maskModel.open(angular.copy($rootScope.activeHostIds));\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.loadding = false;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiBondNetcard_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('editboundNetcardDialog', ['$scope','param','$modalInstance','HostManage','$filter','$$$I18N','maskModel','$rootScope','$modal', function($scope,param,$modalInstance,HostManage,$filter,$$$I18N,maskModel,$rootScope,$modal){\r\n\t// 主控和计算节点公用\r\n\tvar currentItem = param.p_item;\r\n\tvar host_mess = param.p_host;\r\n\tvar dev_status = param.p_dev_states;\r\n\tvar net_mess = param.p_networks.concat(currentItem.member.map(it => {\r\n\t\treturn {\r\n\t\t\tiface:it,\r\n\t\t\tname:it,\r\n\t\t\tips:[]\r\n\t\t}\r\n\t}));\r\n\t\r\n\tvar temp = {\r\n\t\tip:\"\",\r\n\t\tnetmask:\"\",\r\n\t\tuneditable:false,\r\n\t\tip_editable:{\r\n\t\t\tis_management:false,\r\n\t\t\tis_image:false\r\n\t\t}\r\n\t};\r\n\t$scope.type = 'edit';\r\n\t$scope.bond_types = param.p_bondtypes;\r\n\t$scope.netcards = net_mess.map(n => {\r\n\t\tn._selected = currentItem.member.indexOf(n.iface) > -1; \r\n\t\treturn n;\r\n\t});\r\n\r\n\t$scope.data = {};\r\n\t$scope.ips = currentItem.ips;\r\n\r\n\t$scope.name = currentItem.name;\r\n\t$scope.bond_type = currentItem.mode;\r\n\t$scope.update_ip = function(){\r\n\t\tvar manage_image_ips = $filter(\"selectedFilter\")($scope.netcards).reduce((arr,netcard) => {\r\n\t\t\tnetcard.ips.forEach(ip => {\r\n\t\t\t\tif(ip.uneditable){\r\n\t\t\t\t\tarr.push(ip);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn arr;\r\n\t\t},[]);\r\n\t\tif(manage_image_ips.length){\r\n\t\t\t$scope.ips = angular.copy(manage_image_ips).concat(currentItem.ips);\r\n\t\t}else{\r\n\t\t\t$scope.ips = currentItem.ips;\r\n\t\t}\r\n\t};\r\n\t$scope.selectAllHost = function(bool){\r\n\t\t$scope.netcards.map(function(item){\r\n\t\t\titem._selected = bool;\r\n\t\t\treturn item;\r\n\t\t});\r\n\t\t$scope.update_ip();\r\n\t};\r\n\t$scope.selectOneHost = function(){\r\n\t\t$scope.data.is_all = $scope.netcards.every(function(item){\r\n\t\t\treturn item._selected === true;\r\n\t\t});\r\n\t\t$scope.update_ip();\r\n\t};\r\n\t$scope.add_ip = function(){\r\n\t\t$scope.ips.push(angular.copy(temp));\r\n\t};\r\n\t$scope.minus_ip = function(idx){\r\n\t\t$scope.ips.splice(idx,1);\r\n\t};\r\n\t$scope.get_select_nets_length = function(){\r\n\t\treturn $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface }).length\r\n\t}\r\n\tvar parentScope = $scope;\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar select_nets = $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface });\r\n\t\tif(select_nets.every(card => dev_status[card])){\r\n\t\t\tparentScope.okPost(_this);\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='INFOR_TIP'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='DELETE_BOND_IVALID_CONFIRM'></p><footer class='text-right'> <img ng-show='loadding' src='img/loadingtext.gif' width='24px' height='24px'/><button ng-show='!loadding' class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button ng-show='!loadding' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tparentScope.okPost(_this);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.okPost = function(scope){\r\n\t\tvar _this = scope;\r\n\t\tvar select_nets = $filter(\"selectedFilter\")($scope.netcards).map(function(n){ return n.iface });\r\n\t\tvar postData = {\r\n\t\t\tid:host_mess.id,\r\n\t\t\tis_console:host_mess.is_console,\r\n\t\t\tbond_name:_this.name,\r\n\t\t\tbond_type:_this.bond_type,\r\n\t\t\tifaces:select_nets,\r\n\t\t\tips:$scope.ips.map(ip => { return ip.ip}),\r\n\t\t\tnetmasks:$scope.ips.map(ip => { return ip.netmask}),\r\n\t\t\tips_editable:$scope.ips.map(ip => { return ip.ip_editable})\r\n\t\t};\r\n\t\tif(postData.ifaces && postData.ifaces.length > 1){\r\n\t\t\t$scope.loadding = true;\r\n\t\t\tHostManage.alter_bond(postData,function(res){\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}).$promise.finally(function(){\r\n\t\t\t\t$scope.loadding = false;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle:$$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"vdiBondNetcard_TIP1\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('unbundleNetcardDialog', ['$scope','$modalInstance','param','HostManage','maskModel','$rootScope','$modal', function($scope,$modalInstance,param,HostManage,maskModel,$rootScope,$modal){\r\n\tvar host = param.p_host;\r\n\tvar data = $scope.data = param.p_net;\r\n\tvar dev_status = param.p_dev_states;\r\n\tdata.ips.forEach(d => {\r\n\t\tif(d.uneditable){\r\n\t\t\tdata._has_inherit_net = true;\r\n\t\t\td._inherit_menber  = data.member[0];\r\n\t\t}else{\r\n\t\t\td._inherit_menber = \"\";\r\n\t\t}\r\n\t\t\r\n\t});\r\n\tdata.is_inherit = data._has_inherit_net;\r\n\t$scope.okPost = function(){\r\n\t\tvar d = data;\r\n\t\tvar _inherit_infos = d.ips.map(val => {\r\n\t\t\treturn {\r\n\t\t\t\tip:val.ip,\r\n\t\t\t\tnetmask:val.netmask,\r\n\t\t\t\tdev:val._inherit_menber,\r\n\t\t\t\tis_management:val.ip_editable.is_management,\r\n\t\t\t\tis_image:val.ip_editable.is_image\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar postData = {\r\n\t\t\tid:host.id,\r\n\t\t\tis_console:host.is_console,\r\n\t\t\tbond_name:d.name,\r\n\t\t\tis_inherit:d.is_inherit,\r\n\t\t\tinherit_infos:d.is_inherit ? _inherit_infos : []\r\n\t\t};\r\n\t\t$scope.submiting = true;\r\n\t\tHostManage.delete_bond(postData).$promise.then(function(){\r\n\t\t\tlocation.reload();\r\n\t\t}).finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t});\r\n\t};\r\n\tvar parentScope = $scope;\r\n\t$scope.ok = function(){\r\n\t\tif(check_inherit()){\r\n\t\t\tparentScope.okPost();\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='INFOR_TIP'>\"+\r\n\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' localize='DELETE_BOND_IVALID_CONFIRM'></p><footer class='text-right'> <img ng-show='loadding' src='img/loadingtext.gif' width='24px' height='24px'/><button ng-show='!loadding' class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button ng-show='!loadding' class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tparentScope.okPost();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\tfunction check_inherit(){\r\n\t\tvar ips = data.ips;\r\n\t\tvar valid = true;\r\n\t\tips.forEach(ip => {\r\n\t\t\tif(dev_status[ip._inherit_menber] === false){\r\n\t\t\t\tvalid = false;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn valid;\r\n\t}\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/resource/pool/controllers.js","angular.module(\"vdi.network\", [\"vdi.network.manageNetwork\",\"vdi.network.virtualSwitch\",\"vdi.network.dataNetwork\",\"vdi.network.dhcp\"])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/network/controllers.js","angular.module(\"vdi.network.manageNetwork\", [])\r\n.factory(\"Manage\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/management_networks\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tput: { method: \"PUT\"}\r\n\t});\r\n}])\r\n.factory(\"HostNetworkInfo\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/host/networkInfo\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false}\r\n\t});\r\n}])\r\n.controller(\"vdiManageNetworkListController\", [\"$scope\",'$modal','Manage','$interval','Host',function($scope,$modal,Manage,$interval,Host){\r\n\t$scope.rows = [];$scope.loading = true;\r\n\t$interval(function(){\r\n\t\t$scope.rows && $scope.$root && $scope.$root.$broadcast(\"manageNetworkIDS\", $scope.rows.filter(item => item.status === 'active').map(it => it.id));\r\n\t}, 1000);\r\n\t$scope.$on(\"manage_networksRowsUpdate\", function($event, data){\r\n\t\tvar _rows = {};\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\t_rows[item.id] = item;\r\n\t\t});\r\n\t\tdata.forEach(function(item){\r\n\t\t\tif(_rows[item.id]){\r\n\t\t\t\tfor(var k in item){\r\n\t\t\t\t\t_rows[item.id][k] = item[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\tfunction test_connect(remote_ip, item){\r\n\t\tHost.node_ping({ remote_ip:remote_ip, node_ip:item.ip },function(res){\r\n\t\t\titem._connect = res.result;\r\n\t\t});\r\n\t}\r\n\tvar get_rows = function(){\r\n\t\tManage.query(function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$scope.rows = res.result;\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\titem._connect = true;\r\n\t\t\t});\r\n\t\t\tvar remote_ip = $scope.rows.filter(function(item){ return item.host_type=='controller' })[0].image_ip;\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.host_type=='compute' && item.status=='active'){\r\n\t\t\t\t\ttest_connect(remote_ip, item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(res.enable_ha){\r\n\t\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\t\tif(item.host_type=='controller'){item.enable_ha = true;}\r\n\t\t\t\t})\r\n\t\t\t};\r\n\t\t\t$scope.source_controller_ip = $scope.rows.filter(function(item){ return item.host_type=='controller' })[0].management_ip;\r\n\t\t\t$scope.img_rows = $scope.rows.filter(function(item){ return item.host_type=='controller' });\r\n\t\t\t$scope.img_rowsHA = $scope.img_rows.filter(function(item){ return item.enable_ha });\r\n\t\t\t$scope.manage_rows = $scope.rows.filter(function(item){ return item.status === 'active' });\r\n\t\t\t$scope.manage_rowsHA = $scope.manage_rows.filter(function(item){ return item.enable_ha });\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\r\n\t$scope.modify = function(type){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/network/manageNetwork/modifyManageImgNetwork.html\",\r\n\t\t\tcontroller: \"modifyManageImgDialog\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tscope: $scope,\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { type: type };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(data){\r\n\t\t\tif(data){\r\n\t\t\t\tget_rows();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n}])\r\n.controller('modifyManageImgDialog', ['$scope','$modalInstance', 'HostNetworkInfo', \"params\", \"Manage\",\"maskModel\", function($scope,$modalInstance,HostNetworkInfo,params,Manage,maskModel){\r\n\t$scope.type = params.type;\r\n\t$scope.lists = $scope.type=='image'?$scope.img_rows:$scope.manage_rows;\r\n\t$scope.controller_ip = $scope.source_controller_ip;\r\n\t$scope.loading = true;\r\n\t$scope.lists.forEach(function(item, i){\r\n\t\tHostNetworkInfo.query({id: item.host_id}, function(res){\r\n\t\t\tvar bondNetworks = res.bond_networks.filter(function(network){ return network.ips.length!==0; });\r\n\t\t\tvar networks = res.networks.filter(function(network){ return network.ips.length!==0; });\r\n\t\t\titem.allNetworks = networks.concat(bondNetworks);\r\n\t\t\titem.allNetworks.forEach(function(data){\r\n\t\t\t\tdata.IP = [];\r\n\t\t\t\tfor(var i=0; i<data.ips.length; i++){\r\n\t\t\t\t\tdata.IP.push({ip: data.ips[i], mask: data.netmasks[i], editable: data.ips_editable[i]});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\titem._selectNetwork = item.allNetworks.filter(function(n){ return n.name == item[$scope.type+'_dev'] })[0];\r\n\t\t\titem._selectIP = item._selectNetwork && item._selectNetwork.IP.filter(function(n){ return n.ip == item[$scope.type+'_ip'] })[0];\r\n\r\n\t\t\tif(i==$scope.lists.length-1){\r\n\t\t\t\t$scope.loading = false;\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t$scope.changeIP = function(host){\r\n\t\t$scope.lists.forEach(function(item){\r\n\t\t\tif(item.host_name == host.host_name){\r\n\t\t\t\titem._selectIP = item._selectNetwork && item._selectNetwork.IP[0];\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.isUnchanged = function(){\r\n\t\tvar flag = true;\r\n\t\t$scope.lists.forEach(function(list){\r\n\t\t\tif(list._selectNetwork && list._selectIP){\r\n\t\t\t\tvar host = $scope.rows.filter(function(item){ return item.host_name == list.host_name })[0];\r\n\t\t\t\tif(host._selectNetwork && host._selectIP){\r\n\t\t\t\t\tif(list._selectNetwork.name !== host[$scope.type+'_dev'] || list._selectIP.ip !== host[$scope.type+'_ip'] ){\r\n\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn flag;\r\n\t}\r\n\t$scope.hasUnselect = function(){\r\n\t\tvar flag = false;\r\n\t\t$scope.lists.forEach(function(item){\r\n\t\t\tif(!item._selectNetwork || !item._selectIP){\r\n\t\t\t\tflag = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn flag;\r\n\t}\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar data = {type: $scope.type, infos: {}, source_controller_ip: $scope.controller_ip};\r\n\t\t$scope.lists.forEach(function(item){\r\n\t\t\t//只要是主控节点id就传null\r\n\t\t\tdata.infos[item.host_name] = {\r\n\t\t\t\tid: item.host_type === 'controller' ? null : item.host_id,\r\n\t\t\t\tdev: item._selectNetwork.name,\r\n\t\t\t\tip: item._selectIP.ip,\r\n\t\t\t\tnetmask: item._selectIP.mask\r\n\t\t\t}\r\n\t\t});\r\n\t\tManage.put(data, function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$modalInstance.close();\r\n\t\t\tmaskModel.open(null,\"manageNetwork\");\r\n\t\t\twindow.ignoreAnyRequestError = true;\r\n\t\t},function(error){ $scope.loading = false; });\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/network/manageNetwork/controllers.js","angular.module(\"vdi.network.virtualSwitch\", [])\r\n.factory(\"Switch\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/switchs\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tadd: { method: \"POST\"},\r\n\t\tput: { method: \"PUT\"},\r\n\t\tdelete: { method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory(\"SwitchItem\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/switch\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tput: { method: \"PUT\"},\r\n\t\tadd: { method: \"POST\"},\r\n\t\tdelete: { method: \"DELETE\"}\r\n\t});\r\n}])\r\n.factory(\"Switchdevice\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/list_devices_for_switch\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false}\r\n\t});\r\n}])\r\n.factory(\"AvailableNodes\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/list_available_nodes_for_switch\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false}\r\n\t});\r\n}])\r\n.controller(\"vdiVirtualSwitchListController\", [\"$scope\",'$modal',\"Switch\", \"isHAEnabled\", \"$$$I18N\",function($scope,$modal,Switch, isHAEnabled,$$$I18N){\r\n\t$scope.hasHA_loading = true;\r\n\tisHAEnabled().then(function(enabled){\r\n\t\t$scope.hasHA_loading = false;\r\n        $scope.hasHA = enabled;\r\n    });\r\n\t$scope.rows = [];$scope.loading = true;\r\n\r\n\tvar get_rows = function(){\r\n\t\tSwitch.query(function(res){\r\n\t\t\t$scope.rows = res.result;\r\n\t\t\t$scope.rows.map(function(item){ item.decodeName = encodeURIComponent(item.name) })\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\tvar _SCOPE = $scope;\r\n\r\n\t$scope.add = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/virtualSwitch/addVirtualSwitch.html\",\r\n\t\t\t\tcontroller: \"addVirtualSwitchDialog\",\r\n\t\t\t\tsize: \"md\"\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(res){\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t$scope.edit = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar virtualSwitch = this.item;\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/virtualSwitch/editVirtualSwitch.html\",\r\n\t\t\t\tcontroller: \"editVirtualSwitchDialog\",\r\n\t\t\t\tscope: $scope,\r\n\t\t\t\tsize: \"md\",\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tparams : function(){\r\n\t\t\t\t\t\treturn { virtualSwitch: angular.copy(virtualSwitch) };\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(data){\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.delete = function(item){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除分布式虚拟交换机'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='DELETE_VIRTUALSWITCH'></p><footer class='text-right'><img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''><button class='btn btn-primary' ng-if='!loading' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' ng-if='!loading' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\tSwitch.delete({name:item.name},function(res){\r\n\t\t\t\t\t\t\tget_rows();\r\n\t\t\t\t\t\t\t$modalInstance && $modalInstance.close();\r\n\t\t\t\t\t\t}).$promise.finally(res => {\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.controller('editVirtualSwitchDialog', ['$scope', 'params',\"$modalInstance\",\"Switch\", \"Switchdevice\",function($scope,params,$modalInstance,Switch,Switchdevice){\r\n\t$scope.virtualSwitch = params.virtualSwitch;\r\n\tconsole.log($scope.virtualSwitch);\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.querySwitchdevice = function(type){\r\n\t\t$scope.loading_hosts = true;\r\n\t\tSwitchdevice.query({ type: type },function(res){\r\n\t\t\t$scope.loading_hosts = false;\r\n\t\t\t$scope.hosts = res.result.filter(function(host){ return host.status === 'active' });\r\n\t\t\t$scope.hosts.forEach(function(item){\r\n\t\t\t\tvar host = $scope.virtualSwitch.hosts.filter(function(host){ return host.host == item.hostname })[0];\r\n\t\t\t\tif(host){\r\n\t\t\t\t\tif(host.dev!==''){ item.devs.push(host.dev); };\r\n\t\t\t\t\titem._dev = host.dev;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t});\r\n\t};\r\n\t$scope.querySwitchdevice($scope.virtualSwitch.type);\r\n\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar hosts = [];\r\n\t\t$scope.hosts.forEach(function(item){\r\n\t\t\thosts.push({host_id: item.host_id, dev: item._dev?item._dev:\"\"});\r\n\t\t});\r\n\t\tSwitch.put({\r\n\t\t\tname: $scope.virtualSwitch.name,\r\n\t\t\tdescription: this.virtualSwitch.description,\r\n\t\t\ttype: $scope.virtualSwitch.type,\r\n\t\t\thosts: hosts\r\n\t\t},function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){ $scope.loading = false; })\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('addVirtualSwitchDialog', ['$scope',\"$modalInstance\",\"Switchdevice\",\"Switch\",function($scope,$modalInstance,Switchdevice,Switch){\r\n\t$scope.type = 'flat';\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.querySwitchdevice = function(type){\r\n\t\t$scope.loading_hosts = true;\r\n\t\tSwitchdevice.query({ type: type },function(res){\r\n\t\t\t$scope.loading_hosts = false;\r\n\t\t\t$scope.hosts = res.result.filter(function(host){ return host.status === 'active' });\r\n\t\t\t$scope.hosts.forEach(function(item){\r\n\t\t\t\titem._dev = item.devs[0];\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\t$scope.querySwitchdevice($scope.type);\r\n\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tvar hosts = [];\r\n\t\t$scope.hosts.forEach(function(item){\r\n\t\t\thosts.push({host_id: item.host_id, dev: item._dev?item._dev:\"\"});\r\n\t\t});\r\n\t\tSwitch.add({\r\n\t\t\tname: this.name,\r\n\t\t\tdescription: this.description,\r\n\t\t\ttype: this.type,\r\n\t\t\thosts: hosts\r\n\t\t},function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t})\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n\r\n.controller(\"vdiVirtualSwitchItemController\", [\"$scope\",'$modal',\"Switch\",\"SwitchItem\",\"isHAEnabled\",\"$$$I18N\",function($scope,$modal,Switch,SwitchItem,isHAEnabled,$$$I18N){\r\n\t$scope.hasHA_loading = true;\r\n\tisHAEnabled().then(function(enabled){\r\n\t\t$scope.hasHA_loading = false;\r\n        $scope.hasHA = enabled;\r\n    });\r\n\t\r\n\tvar $hashstr = location.hash.substr(1) || \"\";\r\n\tvar $hash = $hashstr.replace(/^\\/+/, \"\").split(\"&\");\r\n\t$scope.hostName = decodeURIComponent($hash[0].slice($hash[0].lastIndexOf(\"#\")+1));\r\n\t$scope.type = $hash[1];\r\n\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"网络管理\", \"分布式虚拟交换机\", $scope.hostName]);\r\n\r\n\t$scope.rows = [];\r\n\r\n\tvar get_rows = function(){\r\n\t\t$scope.loading = true;\r\n\t\t$scope.rows.splice(0);\r\n\t\tSwitchItem.query({switch_name: $scope.hostName}, function(res){\r\n\t\t\tfor(var i in res.result){\r\n\t\t\t\t$scope.rows.push({\r\n\t\t\t\t\t'pool': i,\r\n\t\t\t\t\t'hosts': res.result[i]\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\tvar _SCOPE = $scope;\r\n\r\n\t$scope.add = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar virtualSwitchItem = this.host;\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/virtualSwitch/addVirtualSwitchItem.html\",\r\n\t\t\t\tcontroller: \"addVirtualSwitchItemDialog\",\r\n\t\t\t\tscope: $scope,\r\n\t\t\t\tsize: \"md\"\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(data){\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.edit = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar virtualSwitchItem = this.host;\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/virtualSwitch/editVirtualSwitchItem.html\",\r\n\t\t\t\tcontroller: \"editVirtualSwitchItemDialog\",\r\n\t\t\t\tscope: $scope,\r\n\t\t\t\tsize: \"md\",\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tparams : function(){\r\n\t\t\t\t\t\treturn { virtualSwitchItem: angular.copy(virtualSwitchItem) };\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(data){\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.delete = function(item){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除关联主机'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='DELETE_VIRTUALSWITCHITEM'></p><footer class='text-right'><img src='img/loadingtext.gif' ng-if='loading' height='24' width='24' alt=''><button class='btn btn-primary' data-ng-click='ok()' ng-if='!loading' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' ng-if='!loading'  style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$scope.loading = true;\r\n\t\t\t\t\t\tSwitchItem.delete({switch_name: _SCOPE.hostName, host_id:item.host_id},function(res){\r\n\t\t\t\t\t\t\tget_rows();\r\n\t\t\t\t\t\t\t$modalInstance && $modalInstance.close();\r\n\t\t\t\t\t\t}).$promise.finally(res => {\r\n\t\t\t\t\t\t\t$scope.loading = false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.controller('editVirtualSwitchItemDialog', ['$scope',\"$modalInstance\",\"params\",\"Switchdevice\",\"SwitchItem\",function($scope,$modalInstance,params,Switchdevice,SwitchItem){\r\n\t$scope.item = params.virtualSwitchItem;\r\n\t$scope.loading_hosts = true;\r\n\t$scope.old_dev = params.virtualSwitchItem.dev\r\n\t$scope.querySwitchdevice = function(type, node_id){\r\n\t\t$scope.loading_hosts = true;\r\n\t\tSwitchdevice.query({ type: type, node_id: node_id },function(res){\r\n\t\t\t$scope.loading_hosts = false;\r\n\t\t\t$scope.item.devs = res.result.filter(function(host){ return host.status === 'active' && host.host_id == $scope.item.host_id })[0].devs;\r\n\t\t\tif($scope.item.dev!==\"\"){\r\n\t\t\t\t$scope.item.devs.push($scope.item.dev);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.querySwitchdevice($scope.type);\r\n\t\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tSwitchItem.put({\r\n\t\t\tswitch_name: $scope.hostName,\r\n\t\t\thost_id: $scope.item.host_id,\r\n\t\t\tdev: $scope.item.dev?$scope.item.dev:\"\"\r\n\t\t},function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('addVirtualSwitchItemDialog', ['$scope',\"$modalInstance\",\"SwitchItem\",\"Switchdevice\",\"AvailableNodes\",function($scope,$modalInstance,SwitchItem,Switchdevice,AvailableNodes){\r\n\t$scope.item = {pools: [], devs: []};\r\n\tlet relateHosts = [];\r\n\t$scope.loading_hosts = true;\r\n\tSwitchdevice.query({ type: $scope.type },function(res){\r\n\t\t$scope.loading_hosts = false;\r\n\t\trelateHosts = res.result.filter(function(host){ return host.status === 'active' });\r\n\t\t$scope.queryPool($scope.hostName);\r\n\t});\r\n\t$scope.queryPool = function(name){\r\n\t\tAvailableNodes.query({switch_name: name}, function(res){\r\n\t\t\tfor(var i in res.result){\r\n\t\t\t\tvar hosts = res.result[i].filter(function(host){ return host.status==='active' });\r\n\t\t\t\t$scope.item.pools.push({name: i, hosts: hosts});\r\n\t\t\t};\r\n\t\t\t$scope.item.pool = $scope.item.pools[0];\r\n\t\t\t$scope.changePool();\r\n\t\t});\r\n\t};\r\n\t$scope.changePool = function(){\r\n\t\tif($scope.item.pool){\r\n\t\t\t$scope.item.host = $scope.item.pool.hosts[0];\r\n\t\t\tif($scope.item.host){\r\n\t\t\t\t$scope.changeHost();\r\n\t\t\t}\r\n\t\t\telse{ $scope.loading_hosts = false; }\r\n\t\t}\r\n\t\telse{ $scope.loading_hosts = false; }\r\n\t}\r\n\t$scope.changeHost = function(){\r\n\t\tif($scope.item.host){\r\n\t\t\t$scope.item.devs = relateHosts.filter(function(host){ return host.host_id == $scope.item.host.host_id })[0].devs;\r\n\t\t\t$scope.item.dev = $scope.item.devs[0];\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t$scope.ok = function(){\r\n\t\t$scope.loading = true;\r\n\t\tSwitchItem.add({\r\n\t\t\tswitch_name: $scope.hostName,\r\n\t\t\thost_id: $scope.item.host.host_id,\r\n\t\t\tdev: $scope.item.dev?$scope.item.dev:\"\"\r\n\t\t},function(res){\r\n\t\t\t$scope.loading = false;\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t}\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/network/virtualSwitch/controllers.js","angular.module(\"vdi.network.dataNetwork\", [])\r\n.factory(\"Network\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/networks\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false, params: null},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\", isArray: false},\r\n\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\t\talter:\r\n\t\t\t{ method: \"PUT\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url:$Domain + \"/thor/network/:id\", params: { id: \"@id\" }, isArray: false},\r\n\r\n\t\tquery_sub:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/:id/subnets\", params: { id: \"@id\" }},\r\n\t\tadd_sub:\r\n\t\t\t{ method: \"POST\", url:$Domain + \"/thor/network/:id/subnets\", params: { id: \"@id\" }},\r\n\r\n\t\tget_sub:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\t\talter_sub:\r\n\t\t\t{ method: \"PUT\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\t\tdelete_sub:\r\n\t\t\t{ method: \"DELETE\", url:$Domain + \"/thor/network/subnet/:id\", params: { id: \"@id\" }},\r\n\r\n\t\tports:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/subnet/:id/ports\", params: { id: \"@id\" }},\r\n\t\tports_unused_ips:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/network/subnet/:id/ports?enable_unused_ips=false\", params: { id: \"@id\" }}\r\n\r\n\t});\r\n}])\r\n.factory(\"Listswitchs\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/list_switchs_for_network\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false}\r\n\t});\r\n}])\r\n.controller(\"vdiDataNetworkListController\", [\"$scope\", \"Network\",'$modal','isHAEnabled','$$$I18N',function($scope,Network,$modal,isHAEnabled,$$$I18N){\r\n\t$scope.hasHA_loading = true;\r\n\tisHAEnabled().then(function(enabled){\r\n\t\t$scope.hasHA_loading = false;\r\n        $scope.hasHA = enabled;\r\n    });\r\n\t\r\n\t$scope.rows = [];$scope.loading = true;\r\n\r\n\tvar get_rows = function(){\r\n\t\tNetwork.query(function(res){\r\n\t\t\t$scope.rows = res.networks.sort(function(a,b){ return a.name > b.name});\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t$scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n\t$scope.currentPage = 1;\r\n\r\n\tvar _SCOPE = $scope;\r\n\t$scope.add = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/dataNetwork/new_network.html\",\r\n\t\t\t\tcontroller: \"newNetworkDialog\",\r\n\t\t\t\tsize: \"dm\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.alter = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar network = this.item;\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/dataNetwork/alter_network.html\",\r\n\t\t\t\tcontroller: \"alterNetworkDialog\",\r\n\t\t\t\tsize: \"dm\",\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tparams : function(){\r\n\t\t\t\t\t\treturn {network:angular.copy(network)};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(data){\r\n\t\t\t\tif(data){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t$scope.delete = function(item){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除网络'>\"+\r\n\t\t\t\t\t\t\"删除网络</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='DELETE_NETWORK_COMFIRM'>删除网络将删除该网络下的所有子网，桌面将无法使用该网络，确认删除吗</p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tNetwork.delete({id:item.id},function(res){\r\n\t\t\t\t\t\t\tNetwork.query(function(res){\r\n\t\t\t\t\t\t\t\t_SCOPE.rows = res.networks.sort(function(a,b){ return a.name > b.name});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.new_sub_network = function(id){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar modal = $modal.open({\r\n\t\t\t\tcontroller:\"newSubNetworkDialog\",\r\n\t\t\t\ttemplateUrl:\"views/vdi/dialog/network/dataNetwork/new_sub_network.html\",\r\n\t\t\t\tresolve:{params: function(){\r\n\t\t\t\t\treturn angular.copy(id);\r\n\t\t\t\t}}\r\n\t\t\t});\r\n\t\t\tmodal.result.then(function(res){\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.controller('vdiDataNetworkSubNetworkListController', ['$scope',\"$modal\",\"$routeParams\",\"Network\", \"isHAEnabled\",\"$$$I18N\",function($scope,$modal,$routeParams,Network,isHAEnabled,$$$I18N){\r\n\t$scope.hasHA_loading = true;\r\n\tisHAEnabled().then(function(enabled){\r\n\t\t$scope.hasHA_loading = false;\r\n        $scope.hasHA = enabled;\r\n    });\r\n\t\r\n\tvar get_rows = function(){\r\n\t\tNetwork.query_sub({id:$routeParams.id},function(res){\r\n\t\t\t$scope.rows = res.result.sort(function(a,b){ return a.name > b.name});\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"网络\", \"数据网络\",\"子网\"]);\r\n\t$scope.cur_network_id = $routeParams.id;\r\n\t$scope.delete = function(item){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$modal.open({\r\n\t\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除网络'>\"+\r\n\t\t\t\t\t\t\t\"删除子网</h4></div><div class='modal-body'><form class='form-horizontal'><p localize='DELETE_SUB_NETWORK_COMFIRM'>删除子网后，桌面将无法使用该子网，确认删除吗</p><footer  class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t\tNetwork.delete_sub({id: item.id},function(res){\r\n\t\t\t\t\t\t\t\tget_rows();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsize : \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.alter_sub_network = function(item){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\ttemplateUrl: \"views/vdi/dialog/network/dataNetwork/new_sub_network.html\",\r\n\t\t\t\tcontroller: \"alterSubNetworkDialog\",\r\n\t\t\t\tsize: \"dm\",\r\n\t\t\t\tresolve:{\r\n\t\t\t\t\tparams : function(){\r\n\t\t\t\t\t\treturn {network:angular.copy(item)};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(res){\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.new_sub_network = function(){\r\n\t\tif($scope.hasHA){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"ENABLEHA_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tvar dialog = $modal.open({\r\n\t\t\t\tcontroller:\"newSubNetworkDialog\",\r\n\t\t\t\ttemplateUrl:\"views/vdi/dialog/network/dataNetwork/new_sub_network.html\",\r\n\t\t\t\tresolve:{params: function(){\r\n\t\t\t\t\treturn angular.copy($scope.cur_network_id);\r\n\t\t\t\t}}\r\n\t\t\t});\r\n\t\t\tdialog.result.then(function(res){\r\n\t\t\t\tif(res){\r\n\t\t\t\t\tget_rows();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n\t$scope.enableDHCP = function(data){\r\n\t\tvar postData = {\r\n\t\t\tid:data.id,\r\n\t\t\tname:data.name,\r\n\t\t\tstart_ip:data.start_ip,\r\n\t\t\tend_ip:data.end_ip,\r\n\t\t\tnetmask:data.netmask,\r\n\t\t\tgateway_ip: data.gateway_ip,\r\n\t\t\tdns1:data.dns1,\r\n\t\t\tdns2:data.dns2\r\n\t\t};\r\n\t\tNetwork.alter_sub(postData,function(res){\r\n\t\t\tget_rows();\r\n\t\t},function(){\r\n\t\t});\r\n\t};\r\n}])\r\n.controller(\"vdiDataNetworkIPListController\", [\"$scope\", \"$routeParams\" ,\"$modal\",\"Network\",\"$$$I18N\",function($scope, $routeParams,$modal, Network,$$$I18N){\r\n\t$scope.rows =[];$scope.loading = true;\r\n\t$scope.$root && $scope.$root.$broadcast(\"navItemSelected\", [\"资源\", \"网络\", \"子网\",\"IP池\"]);\r\n\t$scope.cur_network_id = $routeParams.id;\r\n\t$scope.cur_subnet_id = $routeParams.sub_id;\r\n\r\n\tvar get_rows = function(){\r\n\t\tNetwork.ports_unused_ips({id:$scope.cur_subnet_id},function(res){\r\n\t\t\t$scope.rows = res.result;\r\n\t\t\t$scope.loading = false;\r\n\t\t});\r\n\t};\r\n\tget_rows();\r\n\t\r\n\t// var fn_address_callback = function(res){\r\n\t// \t$scope.rows = res.data.map(function(item){\r\n\t// \t\titem.able = !item.disable;\r\n\t// \t\treturn item;\r\n\t// \t});\r\n\t// \t$scope.loading = false;\r\n\t// \t$scope.rows.forEach(function(row){\r\n\t// \t\tvar _ip = row.address.split(\".\");\r\n\t// \t\trow._ip = (_ip[0] << 16) + (_ip[1] << 8) + Number(_ip[2]) + (_ip[3] / 1000);\r\n\t// \t});\r\n\t// \t$scope.netmess = res.network;\r\n\t// };\r\n\r\n\t// $scope.pagesize = parseInt(localStorage.netIP_pagesize) || 30;\r\n\t// $scope.currentPage = 1;\r\n\r\n\t// $scope.$watch(\"pagesize\" , function(newvalue){\r\n\t// \tnewvalue && ( localStorage.netIP_pagesize = newvalue)\r\n\t// })\r\n\t// network.get({\r\n\t// \tid : $routeParams.id\r\n\t// }, fn_address_callback, function(err){ \r\n\t// \tlocation.replace(\"#resource/network/\");\r\n\t// \t$.bigBox({\r\n\t// \t\t\t\ttitle : $$$I18N.get(\"INFOR_TIP\"),\r\n\t// \t\t\t\tcontent : \"您所访问的网络IP池不存在\",//$$$I18N.get(\"NOEXSIT_NETWORKIP_TIP\")\r\n\t// \t\t\t\ttimeout : 6000\r\n\t// \t\t\t});\r\n\t// });\r\n\t// $scope.parent_id = $routeParams.id;\r\n\r\n\t// $scope.switchable = function(ascope){\r\n\t// \tvar item = ascope.item;\r\n\t// \tnetwork.delete({ids:item.id} ,function(res){\r\n\t// \t\tnetwork.get({\r\n\t// \t\t\tid : $routeParams.id\r\n\t// \t\t}, fn_address_callback);\r\n\t// \t} , function(){\r\n\t// \t\tnetwork.get({\r\n\t// \t\t\tid : $routeParams.id\r\n\t// \t\t}, fn_address_callback);\r\n\t// \t})\r\n\t// };\r\n\r\n\t// $scope.sortUsed = function(order){\r\n\t// \t$scope.rows.sort(function(a, b){\r\n\t// \t\treturn (a._ip > b._ip) ? 1 : -1;\r\n\t// \t});\r\n\t// \tvar a = $scope.rows.filter(function(row){\r\n\t// \t\treturn row.has_used;\r\n\t// \t});\r\n\t// \ta.forEach(function(row){\r\n\t// \t\t$scope.rows.splice($scope.rows.indexOf(row), 1);\r\n\t// \t});\r\n\t// \t$scope.rows.unshift.apply($scope.rows, a);\r\n\t// \tif(order){\r\n\t// \t\t$scope.rows.reverse();\r\n\t// \t}\r\n\t// };\r\n\t// $scope.sortUser = function(order){\r\n\t// \t$scope.rows.sort(function(a, b){\r\n\t// \t\treturn (a.assignOwner > b.assignOwner) ? 1 : -1;\r\n\t// \t});\r\n\t// \t//assignOwner\r\n\t// };\r\n\t// $scope.sortAllocated = function(order){\r\n\t// \t$scope.rows.sort(function(a, b){\r\n\t// \t\treturn (a._ip > b._ip) ? 1 : -1;\r\n\t// \t});\r\n\t// \tvar a = $scope.rows.filter(function(row){\r\n\t// \t\treturn row.allocated;\r\n\t// \t});\r\n\t// \ta.forEach(function(row){\r\n\t// \t\t$scope.rows.splice($scope.rows.indexOf(row), 1);\r\n\t// \t});\r\n\t// \t$scope.rows.unshift.apply($scope.rows, a);\r\n\t// \tif(order){\r\n\t// \t\t$scope.rows.reverse();\r\n\t// \t}\r\n\t// };\r\n\t// $scope.sortIP = function(order){\r\n\t// \t$scope.rows.sort(function(a, b){\r\n\t// \t\treturn (a._ip > b._ip) ? 1 : -1;\r\n\t// \t});\r\n\t// \tif(order){\r\n\t// \t\t$scope.rows.reverse();\r\n\t// \t}\r\n\t// };\r\n}])\r\n\r\n//dialog controller\r\n.controller(\"newNetworkDialog\", [\"$scope\", \"$modalInstance\", \"Network\", \"$$$I18N\", \"HostManage\", \"Listswitchs\",\r\n\tfunction($scope, $modalInstance, Network, $$$I18N, HostManage, Listswitchs){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.network = {};\r\n\t$scope.loadding = false;\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\r\n\t// HostManage.physic_netword_info(function(res){\r\n\t// \t$scope.physic_nets = res.result;\r\n\t// \t$scope.network.physic_net = $scope.physic_nets[0];\r\n\t// });\r\n\tvar switches = [];\r\n\tListswitchs.query(function(res){\r\n\t\tswitches = res.result;\r\n\t\t$scope.getSwitch($scope.network.type);\r\n\t});\r\n\t$scope.getSwitch = function(type){\r\n\t\t$scope.network.switches = switches.filter(function(item){ return item.type == type });\r\n\t\t$scope.network.switch = $scope.network.switches[0];\r\n\t};\r\n\r\n\t$scope.ok = function () {\r\n\t\tvar postData = {};\r\n\t\t$scope.loadding = true;\r\n\t\tvar _netData = $scope.network;\r\n\r\n\t\tpostData.name = _netData.name;\r\n\t\tpostData.type = _netData.type;\r\n\t\tpostData.create_subnet = _netData.has_sub;\r\n\t\tpostData.switch_name = _netData.switch.name;\r\n\t\tpostData.switch_type = _netData.switch.type;\r\n\t\tpostData.switch_uuid = _netData.switch.uuid;\r\n\t\tif(postData.type === 'vlan'){\r\n\t\t\tpostData.vlan_id = _netData.vlanid;\r\n\t\t\tpostData.physical_network = \"public\";\r\n\t\t}\r\n\t\tif(postData.type === 'flat'){\r\n\t\t\tpostData.physical_network = _netData.physic_net;\r\n\t\t}\r\n\t\tif(postData.create_subnet){\r\n\t\t\tpostData.subnet_name = _netData.sub_name;\r\n\t\t\tpostData.start_ip = _netData.dhcp_start;\r\n\t\t\tpostData.end_ip = _netData.dhcp_end;\r\n\t\t\tpostData.netmask = _netData.netmask;\r\n\t\t\tpostData.gateway = _netData.gateway;\r\n\t\t\tpostData.dns1 = _netData.dns1;\r\n\t\t\tpostData.dns2 = _netData.dns2;\r\n\t\t}\r\n\t\tNetwork.add(postData,function(res){\r\n\t\t\t$modalInstance.close();\r\n\t\t\tNetwork.query(function(res){\r\n\t\t\t\t$scope.rows.splice(0,$scope.rows.length);\r\n\t\t\t\t[].push.apply($scope.rows,res.networks.sort(function(a,b){ return a.name > b.name}));\r\n\t\t\t});\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('newSubNetworkDialog', ['$scope','Network','params','$modalInstance', function($scope,Network,params,$modalInstance){\r\n\t//新增子网\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.network = {};\r\n\t$scope.loadding = false;\r\n\t$scope.ok = function(){\r\n\t\t$scope.loadding = true;\r\n\t\tvar _netData = $scope.network;\r\n\t\tvar postData = {\r\n\t\t\tid:params,\r\n\t\t\tname:_netData.name,\r\n\t\t\tstart_ip:_netData.dhcp_start,\r\n\t\t\tend_ip:_netData.dhcp_end,\r\n\t\t\tnetmask:_netData.netmask,\r\n\t\t\tgateway_ip: _netData.gateway,\r\n\t\t\tdns1:_netData.dns1,\r\n\t\t\tdns2:_netData.dns2\r\n\t\t};\r\n\t\tNetwork.add_sub(postData,function(res){\r\n\t\t\t$modalInstance.close(res);\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('alterNetworkDialog', ['$scope', 'params',\"$modalInstance\",\"Network\",function($scope,params,$modalInstance,Network){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\tvar oldName = params.network.name;\r\n\t$scope.network = params.network;\r\n\t$scope.loadding = false;\r\n\t$scope.isUnchanged = function(){\r\n\t\treturn angular.equals($scope.network.name,oldName);\r\n\t}\r\n\t$scope.ok = function(){\r\n\t\t$scope.loadding = true;\r\n\t\tNetwork.alter({name:$scope.network.name,id:$scope.network.id},function(res){\r\n\t\t\t$modalInstance.close(res);\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n}])\r\n.controller('alterSubNetworkDialog', ['$scope','params',\"$modalInstance\",\"Network\", function($scope,params,$modalInstance,Network){\r\n\t// 修改子网\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\tvar _net = params.network;console.log(555555555, _net)\r\n\t$scope.network = {\r\n\t\tid:_net.id,\r\n\t\tname:_net.name,\r\n\t\tdhcp_start: _net.start_ip,\r\n\t\tdhcp_end:_net.end_ip,\r\n\t\tnetmask:_net.netmask,\r\n\t\tgateway:_net.gateway_ip,\r\n\t\tdns1:_net.dns_nameservers[0],\r\n\t\tdns2:_net.dns_nameservers[1]\r\n\t};\r\n\t$scope.title_type = 'update';\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\t$scope.loadding = true;\r\n\t\tvar _netData = $scope.network;\r\n\t\tvar postData = {\r\n\t\t\tid:_netData.id,\r\n\t\t\tname:_netData.name,\r\n\t\t\tstart_ip:_netData.dhcp_start,\r\n\t\t\tend_ip:_netData.dhcp_end,\r\n\t\t\tnetmask:_netData.netmask,\r\n\t\t\tgateway_ip: _netData.gateway,\r\n\t\t\tdns1:_netData.dns1,\r\n\t\t\tdns2:_netData.dns2\r\n\t\t};\r\n\t\tNetwork.alter_sub(postData,function(res){\r\n\t\t\t$modalInstance.close(res);\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.loadding = false;\r\n\t\t});\r\n\t};\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/network/dataNetwork/controllers.js","angular.module(\"vdi.network.dhcp\", [])\r\n.factory(\"DHCP\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/dhcp\", null, {\r\n\t\tquery: { method: \"GET\", isArray: false},\r\n\t\tupdate: { method: \"POST\"}\r\n\t});\r\n}])\r\n.controller(\"vdiDHCPController\", [\"$scope\",'$modal','DHCP',function($scope,$modal,DHCP){\r\n\tvar DHCPCtrl = this;\r\n\tDHCPCtrl.data = {};\r\n\tvar initData = {\r\n\t\tstart: '192.168.68.50',\r\n\t\tend: '192.168.68.254',\r\n\t\tnetmask: '255.255.255.0',\r\n\t\tgateway: '192.168.68.1',\r\n\t\tdns: ['114.114.114.114']\r\n\t}\r\n\r\n\tDHCPCtrl.changeModify = function(val){\r\n\t\tDHCPCtrl.updateDHCP(true);\r\n\t}\r\n\tDHCPCtrl.loadDHCP = function(){\r\n\t\tDHCP.query(function(res){\r\n\t\t\tDHCPCtrl.data.enable_dhcp = res.enable_dhcp;\r\n\t\t\t// 第一次没有值传默认值\r\n\t\t\t// if(!res.enable_dhcp && res.start==''){\r\n\t\t\t// \tfor(var i in initData){\r\n\t\t\t// \t\tif(i=='dns'){\r\n\t\t\t// \t\t\tDHCPCtrl['data'][i] = initData[i][0];\r\n\t\t\t// \t\t}else{\r\n\t\t\t// \t\t\tDHCPCtrl['data'][i] = initData[i]\r\n\t\t\t// \t\t}\r\n\t\t\t// \t}\r\n\t\t\t// }else{\r\n\t\t\t\tfor(var i in res){\r\n\t\t\t\t\tif(i!=='code'){\r\n\t\t\t\t\t\tif(i=='dns'){\r\n\t\t\t\t\t\t\tDHCPCtrl['data'][i] = res[i][0];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tDHCPCtrl['data'][i] = res[i]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t// }\r\n\r\n\t\t},function(){})\r\n\t}\r\n\tDHCPCtrl.loadDHCP();\r\n\tDHCPCtrl.updateDHCP = function(onlyEnable){\r\n\t\tvar postData = { enable_dhcp: DHCPCtrl.data.enable_dhcp };\r\n\t\tif(DHCPCtrl.data.enable_dhcp){\r\n\t\t\t//第一次没有值传默认值\r\n\t\t\tif(DHCPCtrl.data.start==''){\r\n\t\t\t\tfor(var i in initData){\r\n\t\t\t\t\tif(i=='dns'){\r\n\t\t\t\t\t\tDHCPCtrl['data'][i] = initData[i][0];\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tDHCPCtrl['data'][i] = initData[i]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(var i in initData){\r\n\t\t\t\t\tpostData[i] = DHCPCtrl['data'][i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tif(onlyEnable){\r\n\t\t\tDHCPCtrl.enabling = true;\r\n\t\t\tDHCP.update(postData,function(res){\r\n\t\t\t\tDHCPCtrl.enabling = false;\r\n\t\t\t\tDHCPCtrl.loadDHCP();\r\n\t\t\t\tif(!DHCPCtrl.data.enable_dhcp){\r\n\t\t\t\t\tDHCPCtrl.modify = false;\r\n\t\t\t\t}\r\n\t\t\t},function(){ DHCPCtrl.enabling = false; })\r\n\t\t}\r\n\t\telse{\r\n\t\t\tDHCPCtrl.updating = true;\r\n\t\t\tDHCP.update(postData,function(res){\r\n\t\t\t\tDHCPCtrl.modify = false;\r\n\t\t\t\tDHCPCtrl.updating = false;\r\n\t\t\t},function(){ DHCPCtrl.updating = false; })\r\n\t\t}\r\n\t}\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/network/dhcp/controllers.js","/*\r\n*  Module\r\n*\r\n* Description\r\n*/\r\nangular.module('vdi.monitor', [])\r\n.factory(\"SystemAlarm\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/alarmLog\", null, {\r\n        query: { method: \"GET\", isArray: false},\r\n        query_log:\r\n            { method: \"GET\", url: $Domain + \"/thor/alarm_history/list\"},\r\n        delete :\r\n            { method: \"DELETE\"},\r\n        // setRead: { method: \"PUT\" },\r\n        delete_alarm: \r\n            { method: \"DELETE\", url : $Domain  + \"/thor/alarm_history\"}\r\n    });\r\n}])\r\n.factory(\"AlarmHistory\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/alarm_history\", null, {\r\n        setRead: { method: \"POST\" }\r\n    });\r\n}])\r\n.factory('AlarmPlicy', ['$resource','$Domain', function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/alarm/strategy\", null, {\r\n        add: \r\n            { method: \"POST\", url: $Domain + \"/thor/alarm/strategy\"},\r\n        alter:\r\n            { method: \"PUT\", url: $Domain + \"/thor/alarm/strategy/:id\", params:{id:\"@strategy_id\"}},\r\n        query:\r\n            { method: \"GET\", url: $Domain + \"/thor/alarm/strategy/all\"},\r\n        get:\r\n            { method: \"GET\", url: $Domain + \"/thor/alarm/strategy/:id\", params:{id:\"@strategy_id\"}},\r\n        get_hosts: \r\n            { method: \"GET\", url: $Domain + \"/thor/alarm/hostInfo\"},\r\n        //删除策略\r\n        delete:\r\n            { method:\"DELETE\", url: $Domain + \"/thor/alarm/strategy\"},\r\n        // 设置全局报警项配置\r\n        global_config:\r\n            { method: \"POST\", url: $Domain + \"/thor/alarm/sys\"},\r\n        // 获取全局报警项配置\r\n        get_global_config:\r\n            { method: \"GET\", url: $Domain + \"/thor/alarm/sys\"},\r\n        //读取邮件投递配置\r\n        get_email_config:\r\n            { method: \"GET\", url: $Domain + \"/thor/settings\"},\r\n        // 更新邮件投递配置\r\n        update_email_config:\r\n            { method: \"POST\" , url: $Domain + \"/thor/settings/email\"},\r\n        //用邮件配置发送测试邮件\r\n        test_email:\r\n            { method : \"POST\", url: $Domain + \"/thor/sendmail\"}\r\n\r\n    });\r\n}])\r\n.controller(\"vdiMonitorAlarmController\", [\"$scope\", \"SystemAlarm\", \"$modal\", function($scope, alarm, $modal){\r\n    $scope.rows =[];\r\n    var _scope = $scope;\r\n\t// alarm.query(function(data){\r\n //        $scope.allRows = data.result;\r\n\t// \t$scope.rows = data.result;\r\n //        $scope.loading = false;\r\n //        // angular.copy($scope.rows,$scope.allRows);\r\n\t// });\r\n\r\n    $scope.getList = function(){\r\n        $scope.loading = true;\r\n        alarm.query_log(function(res){\r\n            $scope.allRows = res.data.sort(function(a,b){ return a.created_at>b.created_at?-1:1 });\r\n            $scope.rows = res.data.sort(function(a,b){ return a.created_at>b.created_at?-1:1 });\r\n            $scope.loading = false;\r\n        });\r\n    };\r\n    $scope.getList();\r\n\r\n    $scope.currentPage = 1;\r\n    $scope.pagesize = Number($$$storage.getSessionStorage('alarm_pagesize')) || 30;\r\n\r\n    $scope.$watch(\"pagesize\", function(newvalue){\r\n        if(newvalue){\r\n            $$$storage.setSessionStorage('alarm_pagesize', newvalue);\r\n        }\r\n    })\r\n\r\n    $scope.updateData = function(text){\r\n    \t$scope.rows = $scope.allRows.filter(function(row){\r\n    \t\trow._selected = false;\r\n    \t\t// if(text){\r\n    \t\t// \treturn row.log.content.indexOf(text) !== -1;\r\n    \t\t// }\r\n    \t\treturn true;\r\n    \t});\r\n    };\r\n    $scope.delete = function(item){\r\n        var rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; })\r\n        $modal.open({\r\n                template: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='DELETE_ALARM'>\"+\r\n                        \"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='ALARM_DELETE'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n                    controller : function($scope, $modalInstance){\r\n                        $scope.name = rows.map(function(row){ return row.id }).join(', ')\r\n                        $scope.ok = function(){\r\n                            alarm.delete_alarm({ids:rows.map(function(row){ return row.id })},function(data){\r\n                                rows.forEach(function(row){\r\n                                   _scope.getList();\r\n                                });\r\n                            });\r\n                            $modalInstance.close();\r\n                        },\r\n                        $scope.close = function(){\r\n                            $modalInstance.close();\r\n                        }\r\n                },\r\n                size : \"sm\"\r\n            });\r\n        \r\n    };\r\n    $scope.deleteAll = function(){\r\n        $modal.open({\r\n                template: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='清空确认'>\"+\r\n                        \"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='CLEAR_TIP'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n                    controller : function($scope, $modalInstance){\r\n                        $scope.ok = function(){\r\n                            alarm.delete_alarm({ids:'all'},function(data){\r\n                                _scope.rows.forEach(function(row){\r\n                                   _scope.getList();\r\n                                });\r\n                            })\r\n                            $modalInstance.close();\r\n                        },\r\n                        $scope.close = function(){\r\n                            $modalInstance.close();\r\n                        }\r\n                },\r\n                size : \"sm\"\r\n            });\r\n    };\r\n}])\r\n\r\n.controller(\"vdiMonitorController\", [\"$scope\",\"$interval\",\"$http\",\"$location\", \"Host\",\"PersonDesktop\",\"$$$I18N\",\"$Domain\",\r\n function($scope,$interval,$http,$location,Host,instance,$$$I18N,$Domain){\r\n \t$scope.net_categories = [];\r\n \t$scope.disk_categories = [];\r\n \t$scope.$on(\"setDisk\",function(e,value){\r\n \t\t$scope.disk_category = value;\r\n \t});\r\n \t$scope.$on(\"setNet\",function(e,value){\r\n \t\t$scope.net_category = value;\r\n \t}) \t\r\n    $scope.refresh_time = 5000;\r\n\r\n    $scope.cpu_options ={\r\n        options: {\r\n            chart: {\r\n                type: 'area',   \r\n                height: 250,\r\n                animation: Highcharts.svg, // don't animate in old IE\r\n                margin: [30, 0, 65, 68]\r\n            },\r\n\r\n            title: {\r\n                text: null\r\n            },\r\n            xAxis: {\r\n                type: 'datetime'\r\n            },\r\n            yAxis: {\r\n                lineWidth: 1,\r\n                tickWidth: 1,\r\n                title: {\r\n                    text: '%',\r\n                    align: 'high',\r\n                    ffset: 0,\r\n                    rotation: 0,\r\n                    y: -20,\r\n                    x: 26\r\n\r\n                },\r\n                plotLines: [\r\n                    {\r\n                        value: 0,\r\n                        width: 1,\r\n                        color: '#808080'\r\n                    }\r\n                ]\r\n            },\r\n            tooltip: {\r\n                pointFormat: '<span\">{series.name}</span>: <b>{point.y:.1f}%</b><br/>',\r\n                //pointFormat: '<span\">{series.name}</span>: <b>{point.y:.1f} GB</b><br/>',\r\n                crosshairs: true,\r\n                shared: true,\r\n                xDateFormat: '%Y-%m-%d %H:%M:%S'\r\n            },\r\n            // plotOptions: {\r\n            //     area: {\r\n            //         stacking: 'percent',\r\n            //         // lineColor: '#ffffff',\r\n            //         lineWidth: 1,\r\n            //         marker: {   \r\n            //             lineWidth: 1,\r\n            //             lineColor: '#ffffff'\r\n            //         }\r\n            //     }\r\n\r\n            // },\r\n            legend: {\r\n                align: 'right',\r\n                verticalAlign: 'top',\r\n                y: -15\r\n            },\r\n\r\n            series: [\r\n                // {\r\n                //     name: '空闲', color: \"transparent\",\r\n                //     marker: {\r\n                //         enabled: false\r\n                //     }\r\n                // },\r\n                // {name: '正在使用', marker: {\r\n                //     enabled: false\r\n                // }},\r\n                // {name: '系统', color: '#f86161', marker: {\r\n                //     enabled: false\r\n                // }},\r\n                // {name: '等待使用', color: '#88de67', marker: {\r\n                //     enabled: false\r\n                // }}\r\n\r\n                {name: $$$I18N.get(\"占用率\"), marker: {\r\n                    enabled: false\r\n                }}\r\n            ]\r\n\r\n        },\r\n        drawpoint: function (series,data, now) {\r\n            var y0\r\n            // var y1 = data.cpu.user;\r\n            // var y2 = data.cpu.system;\r\n            // var y3 = data.cpu.iowait;\r\n            // var y0 = 100 - y1 - y2 - y3;\r\n\r\n            // series[0].addPoint([now, y0 / 100], true, true);//idel空闲\r\n            // series[1].addPoint([now, y1 / 100], true, true);//user\r\n            // series[2].addPoint([now, y2 / 100], true, true);//system\r\n            // series[3].addPoint([now, y3 / 100], true, true);//iowait\r\n            if(data.cpu.iowait){\r\n                y0 = (data.cpu.system + data.cpu.user + data.cpu.iowait);\r\n            }\r\n            else \r\n                y0 = (data.cpu.system + data.cpu.user);\r\n\r\n            series[0].addPoint([now, y0], true, true);\r\n        }\r\n    };\r\n\r\n    $scope.mem_options ={\r\n            options:{\r\n                chart: {\r\n                    type: 'area',\r\n                    height: 250,\r\n                    animation: Highcharts.svg, // don't animate in old IE\r\n                    margin: [30, 0, 65, 38],\r\n                },\r\n                title: {\r\n                    text: null\r\n                },\r\n                xAxis: {\r\n                    type: 'datetime',\r\n                },\r\n                yAxis: {\r\n                    lineWidth: 1,\r\n                    tickWidth: 1,\r\n                    title: {\r\n                        text: 'GB',\r\n                        align: 'high',\r\n                        ffset: 0,\r\n                        rotation: 0,\r\n                        y: -20,\r\n                        x: 26\r\n\r\n                    },\r\n                    plotLines: [\r\n                        {\r\n                            value: 0,\r\n                            width: 1,\r\n                            color: '#808080'\r\n                        }\r\n                    ]\r\n                },\r\n                tooltip: {\r\n                    pointFormat: '<span\">{series.name}</span>: <b>{point.y:.1f} GB</b><br/>',\r\n                    crosshairs: true,\r\n                    shared: true,\r\n                    xDateFormat: '%Y-%m-%d %H:%M:%S'\r\n                },\r\n                legend: {\r\n                    align: 'right',\r\n                    verticalAlign: 'top',\r\n                    y: -15\r\n                },\r\n\r\n                series: [\r\n                    {\r\n                        name: $$$I18N.get(\"己用内存\"),\r\n                        color: '#88de67',\r\n                        marker: {\r\n                            enabled: false\r\n                        }\r\n                    }\r\n                ]\r\n\r\n            },\r\n            drawpoint: function (series, data, now) {\r\n                var y0 = (data.mem.total - data.mem.free)/ 1024 / 1024 / 1024;\r\n\r\n                series[0].addPoint([now, y0], true, true);\r\n            }\r\n        };\r\n\r\n    $scope.net_options = {\r\n        options:{\r\n            chart: {\r\n                type: 'spline',\r\n                height: 250,\r\n                animation: Highcharts.svg, // don't animate in old IE\r\n                margin: [30,0,65,68]\r\n            },\r\n\r\n            title: {\r\n                text: null\r\n            },\r\n            xAxis: {\r\n                type: 'datetime'\r\n            },\r\n            yAxis: {\r\n                lineWidth: 1,\r\n                tickWidth: 1,\r\n                labels:{\r\n                    format:\"{value}\"\r\n                },\r\n                title: {\r\n                    text: 'KB/s',\r\n                    align: 'high',\r\n                    offset: 0,\r\n                    rotation: 0,\r\n                    y: -20,\r\n                    x: 40\r\n\r\n                },\r\n                plotLines: [{\r\n                    value: 0,\r\n                    width: 1,\r\n                    color: '#808080'\r\n                }]\r\n            },\r\n            tooltip: {\r\n                pointFormat: '<span\">{series.name}</span>: <b>{point.y:.1f}KB/s</b><br/>',\r\n                crosshairs: true,\r\n                shared: true,\r\n                xDateFormat: '%Y-%m-%d %H:%M:%S'\r\n            },\r\n\r\n            legend: {\r\n                align: 'right',\r\n                verticalAlign: 'top',\r\n                y: -15\r\n            },\r\n            series: [{\r\n                name:  $$$I18N.get(\"上行\"),\r\n                marker: {\r\n                    enabled: false\r\n                }\r\n            },{\r\n                name:  $$$I18N.get(\"下行\"),\r\n                color: '#88de67',\r\n                marker: {\r\n                    enabled: false\r\n                }\r\n            }]\r\n\r\n        },\r\n        drawpoint : function (series, data, now) {\r\n            var y0 = 0;\r\n            var y1 = 0;\r\n            if($scope.subpath === 'monitor_hostinfo'){\r\n\t            if($scope.net_category){\r\n\t\t            y0 = data.net[$scope.net_category].sent_rate / 1024;\r\n\t\t            y1 = data.net[$scope.net_category].recv_rate / 1024;\r\n\t\t            series[0].addPoint([now, y0], true, true);\r\n\t\t            series[1].addPoint([now, y1], true, true);\r\n\t            }\r\n            }\r\n            else{\r\n            \ty0 = data.net.read_speed / 1024;\r\n             \ty1 = data.net.write_speed / 1024;\r\n             \tseries[0].addPoint([now, y0], true, true);\r\n\t\t        series[1].addPoint([now, y1], true, true);\r\n            }\r\n\r\n\r\n        }\r\n    };\r\n\r\n    $scope.disk_options = {\r\n        options:{\r\n            chart: {\r\n                type: 'spline',\r\n                height: 250,\r\n                animation: Highcharts.svg, // don't animate in old IE\r\n                margin: [30,0,65,68]\r\n            },\r\n\r\n            title: {\r\n                text: null\r\n            },\r\n            xAxis: {\r\n                type: 'datetime'\r\n            },\r\n            yAxis: {\r\n                lineWidth: 1,\r\n                tickWidth: 1,\r\n                labels:{\r\n                    format:\"{value}\"\r\n                },\r\n                title: {\r\n                    text: 'KB/s',\r\n                    align: 'high',\r\n                    offset: 0,\r\n                    rotation: 0,\r\n                    y: -20,\r\n                    x: 40\r\n\r\n                },\r\n                plotLines: [{\r\n                    value: 0,\r\n                    width: 1,\r\n                    color: '#808080'\r\n                }]\r\n            },\r\n            tooltip: {\r\n                pointFormat: '<span\">{series.name}</span>: <b>{point.y:.1f}KB/s</b><br/>',\r\n                crosshairs: true,\r\n                shared: true,\r\n                xDateFormat: '%Y-%m-%d %H:%M:%S'\r\n            },\r\n\r\n            legend: {\r\n                align: 'right',\r\n                verticalAlign: 'top',\r\n                y: -15\r\n            },\r\n            series: [{\r\n                name:  $$$I18N.get(\"读取\"),\r\n                marker: {\r\n                    enabled: false\r\n                }\r\n            },{\r\n                name:  $$$I18N.get(\"写入\"),\r\n                color: '#88de67',\r\n                marker: {\r\n                    enabled: false\r\n                }\r\n            }]\r\n\r\n        },\r\n        drawpoint : function (series, data, now) {\r\n        \tvar y0 = 0;\r\n            var y1 = 0;\r\n            if($scope.subpath === 'monitor_hostinfo'){\r\n\t        \tif($scope.disk_category){\r\n\t\t            y0 = data.disk[$scope.disk_category].read_rate / 1024;\r\n\t\t            y1 = data.disk[$scope.disk_category].write_rate / 1024;\r\n                \tseries[0].addPoint([now, y1], true, true);\r\n        \t        series[1].addPoint([now, y0], true, true);\r\n\t        \t}            \t\r\n            }\r\n            else{\r\n            \ty0 = data.disk.read_speed / 1024;\r\n            \ty1 = data.disk.write_speed /1024 ;\r\n            \tseries[0].addPoint([now, y1], true, true);\r\n\t        \tseries[1].addPoint([now, y0], true, true);\r\n            }\r\n        }\r\n    };\r\n    \r\n    $scope.change_server = function(item){\r\n            $scope.net_categories = [];\r\n            $scope.disk_categories = [];\r\n            $scope.item = item;\r\n            $scope.subpath = item.type == 'vm' ? \"monitor_vminfo\" : \"monitor_hostinfo\";\r\n            if(item.type != \"vm\"){\r\n                return;\r\n            }\r\n            $scope.cur_instance = item;\r\n    };\r\n\r\n    function metric_start(){\r\n        return $interval(function(){\r\n            if($scope.item){\r\n                $scope.loading = true;\r\n                $http.get($Domain+\"/thor/\"+$scope.subpath+\"/\"+$scope.item.id).success(function(data){\r\n                    $scope.loading = false;\r\n                    //4个图表directive会监听metric_data,4个图表的数据是一次请求拿下来的\r\n                    if(data.data.msg){\r\n                        //console.log(data.data.msg);\r\n                    }else{\r\n                        if($scope.subpath === 'monitor_hostinfo'){\r\n                            if($scope.item.id == data.hostid){\r\n                            \t$scope.metric_data = data.data;\r\n    \t                        for(var i in data.data.disk){\r\n    \t                        \tif($scope.disk_categories.indexOf(i)===-1){\r\n    \t                        \t\t$scope.disk_categories.push(i);\r\n    \t                        \t\t$scope.$root.$broadcast(\"setDisk\", $scope.disk_categories[0]);\r\n    \t                        \t}\r\n    \t                        };\r\n    \t                        for(i in data.data.net){\r\n    \t                        \tif($scope.net_categories.indexOf(i)===-1){\r\n    \t                        \t\t$scope.net_categories.push(i);\r\n    \t                        \t\t$scope.$root.$broadcast(\"setNet\", $scope.net_categories[0]);\r\n    \t                        \t}\r\n    \t                        };\r\n                            }\r\n                        }\r\n                        else{\r\n                        \t$scope.metric_data = data.data.result;\r\n                        }\r\n                    }\r\n\r\n                });\r\n            }\r\n\r\n        },$scope.refresh_time);\r\n    }\r\n\r\n    var load_metric_data = metric_start();\r\n\r\n    $scope.$watch('refresh_time',function(newvalue){\r\n        $interval.cancel(load_metric_data);\r\n        load_metric_data = metric_start();\r\n    });\r\n\r\n    $scope.$on('$destroy', function() {\r\n        // Make sure that the interval is destroyed\r\n        $interval.cancel(load_metric_data);\r\n\r\n    });\r\n\r\n    var path = $location.path();\r\n\r\n    if(path == '/monitor/desktop'){\r\n        $http.get($Domain+\"/thor/monitor_tree\").success(function(data){\r\n        \tvar trees = [];\r\n        \tdata.data.forEach(function(item){\r\n        \t\titem.insts = item.insts.filter(function(ins){ return ins.status === \"running\"; });\r\n        \t\ttrees.push(item);\r\n        \t});\r\n            $scope.items = trees.map(function(item){\r\n                item.opened =false;\r\n                return item;\r\n            });\r\n        });\r\n    }else{\r\n        Host.query_agent(function(data){\r\n            $scope.items = data.hosts_list.filter(function(item){ return item.status === \"active\" });\r\n            if(data.hosts_list.length > 0)\r\n                $scope.change_server(data.hosts_list[0]);\r\n        });\r\n    }\r\n\r\n\r\n    //console.log($scope);\r\n    $scope.collapAll = function(){\r\n\r\n        $scope.items.map(function(item,index){\r\n            item.opened = false;\r\n            return item;\r\n        })\r\n    };\r\n    $scope.openAll = function(){\r\n        $scope.items.map(function(item,index){\r\n            item.opened = true;\r\n            return item;\r\n        })\r\n    }\r\n}])\r\n.controller('vdiMonitorPolicyController', ['$scope','$modal','AlarmPlicy', function($scope, $modal, AlarmPlicy){\r\n    $scope.rows = [];\r\n    $scope.pagesize = 30;\r\n    $scope.currentPage = 1;\r\n    $scope.pagesizes = [10,20,30];\r\n    var monitorScope = $scope;\r\n    function getList(){\r\n        AlarmPlicy.query(function(res){\r\n            $scope.rows = res.strategys;\r\n        });\r\n    }\r\n    getList();\r\n\t$scope.add = function(){\r\n\t\tvar addDialog = $modal.open({\r\n\t\t\ttemplateUrl:\"views/vdi/dialog/monitor/add.html\",\r\n\t\t\tcontroller:\"addDialogController\",\r\n\t\t\tsize:\"md\",\r\n            resolve:{\r\n                param:function(){\r\n                    return monitorScope.rows;\r\n                }\r\n            }\r\n\t\t});\r\n        addDialog.result.then(function(){\r\n            getList();\r\n        });\r\n\t};\r\n    $scope.alter = function(item){\r\n        var addDialog = $modal.open({\r\n            templateUrl:\"views/vdi/dialog/monitor/add.html\",\r\n            controller:\"alterDialogController\",\r\n            size:\"md\",\r\n            resolve: { param: function(){\r\n                return {\r\n                    getPolicyList:monitorScope.rows,\r\n                    item:item\r\n                }\r\n            }}\r\n        });\r\n        addDialog.result.then(function(){\r\n            getList();\r\n        });\r\n    };\r\n    $scope.view = function(item){\r\n        $modal.open({\r\n            templateUrl:\"views/vdi/dialog/monitor/view.html\",\r\n            controller:\"viewDialogController\",\r\n            size:\"md\",\r\n            resolve: { param: function(){return item}}\r\n        });\r\n    };\r\n    $scope.delete = function(item){\r\n        var rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected});\r\n        $modal.open({\r\n            template: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除'>\"+\r\n                    \"删除</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确认删除吗'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'></button></footer></form></div></div></section>\",\r\n            \r\n            controller : function($scope, $modalInstance){\r\n                $scope.ok = function(){\r\n                    $modalInstance.close();\r\n                     AlarmPlicy.delete({ids:rows.map(function(r){ return r.strategy_id})},function(){\r\n                       getList();\r\n                    });\r\n                },\r\n                $scope.close = function(){\r\n                    $modalInstance.close();\r\n                }\r\n            },\r\n            size : \"sm\"\r\n        });\r\n       \r\n    };\r\n    $scope.config = function(){\r\n        $modal.open({\r\n            templateUrl:\"views/vdi/dialog/monitor/config.html\",\r\n            controller:\"configDialogController\",\r\n            size:\"md\"\r\n        });\r\n    };\r\n    $scope.notice = function(){\r\n        $modal.open({\r\n            templateUrl:\"views/vdi/dialog/monitor/notice.html\",\r\n            controller:\"noticeDialogController\",\r\n            size:\"md\"\r\n        });\r\n    };\r\n    $scope.active = function(item){\r\n        var postData = item;\r\n        item.active_loadding = true;\r\n        postData.strategy_enabled = !item.strategy_enabled;\r\n        AlarmPlicy.alter(postData,function(){\r\n            item.active_loadding = false;\r\n        });\r\n    };\r\n}])\r\n.controller('addDialogController', ['$scope','$modalInstance','AlarmPlicy', '$$$I18N', 'param', function($scope, $modalInstance, AlarmPlicy, $$$I18N, param){\r\n    var AlarmPlicyList = param;\r\n    $scope.pageType = 'add';\r\n    $scope.loading = true;\r\n    $scope.alarm_settings = {\r\n        'node.cpu_util_rate':{\r\n            \"cond_duration\": 10,\r\n            \"cond_value\": 80,\r\n            \"enabled\": false,\r\n        },\r\n        'node.mem_util_rate':{\r\n            \"cond_duration\": 10,\r\n            \"cond_value\": 80,\r\n            \"enabled\": false,\r\n        },\r\n        'node.network_util_rate':{\r\n            \"cond_duration\": 10,\r\n            \"cond_value\": 80,\r\n            \"enabled\": false,\r\n        },\r\n        'node.mount_point_util_rate':{\r\n            \"cond_value\": 90,\r\n            \"enabled\": false,\r\n        },\r\n        'node.disk_io':{\r\n            \"cond_duration\": 10,\r\n            \"cond_value\": 80,\r\n            \"enabled\": false,\r\n        }\r\n    };\r\n    $scope.pools = [];\r\n    $scope.data = {};\r\n    $scope.data.host_ids = [];\r\n    AlarmPlicy.get_hosts(function(res){\r\n        $scope.loading = false;\r\n        $scope.pools = res.result.filter(function(r){\r\n            return r.hosts.length;\r\n        });\r\n    });\r\n    $scope.check_alarm_null = function(){\r\n        return Object.keys($scope.alarm_settings).every(key => {\r\n            return $scope.alarm_settings[key].enabled === false;\r\n        });\r\n    };\r\n    $scope.checkOne = function(pool){\r\n        pool._selected = pool.hosts.every(function(h){ return h._selected});\r\n        $scope.data.host_ids = $scope.pools.reduce(function(host_ids,pool){\r\n            pool.hosts.forEach(function(host){\r\n                if(host._selected){\r\n                    host_ids.push(host.host_uuid);\r\n                }\r\n            });\r\n            return host_ids;\r\n        },[]);\r\n    };\r\n    $scope.checkAll = function(pool){\r\n        pool.hosts.forEach(function(h){\r\n            h._selected = pool._selected;\r\n        });\r\n        $scope.data.host_ids = $scope.pools.reduce(function(host_ids,pool){\r\n            pool.hosts.forEach(function(host){\r\n                if(host._selected){\r\n                    host_ids.push(host.host_uuid);\r\n                }\r\n            });\r\n            return host_ids;\r\n        },[]);\r\n    };\r\n\r\n    $scope.ok = function(){\r\n        var d = $scope.data;\r\n        var s = $scope.alarm_settings;\r\n        var flag = false;\r\n        var postData = {\r\n            \"name\": d.name,\r\n            \"desc\": d.desc,\r\n            \"alarm_settings\": s,\r\n            \"hosts\": d.host_ids,\r\n            \"email_enabled\": d.email_enabled,\r\n            \"email_address\": d.email_enabled ? d.email_address : undefined,\r\n            \"strategy_enabled\": true\r\n        };\r\n        AlarmPlicyList.map(function(it){\r\n            if(it.name === postData.name){\r\n                flag = true;\r\n            }\r\n        });\r\n        if(flag){\r\n            $.bigBox({\r\n                title: $$$I18N.get(\"INFOR_TIP\"),\r\n                content:$$$I18N.get(\"VDI_AlarmPlicy_TIPS\"),\r\n                timeout:6000\r\n            });\r\n            return;\r\n        }\r\n        $scope.submiting = true;\r\n        AlarmPlicy.add(postData).$promise\r\n            .then(function(){\r\n                $modalInstance.close();\r\n            })\r\n            .finally(function(){\r\n                $scope.submiting = false;\r\n            })\r\n    };\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.dismiss();\r\n\t}\r\n}])\r\n.controller('alterDialogController', ['$scope','$modalInstance','param','AlarmPlicy', '$$$I18N', function($scope, $modalInstance, param, AlarmPlicy, $$$I18N){\r\n    $scope.pageType = 'alter';\r\n    $scope.data = param.item;\r\n    var filterAlterPolicy = param.getPolicyList.filter(it => it.name != param.item.name);\r\n    $scope.alarm_settings = {\r\n        'node.cpu_util_rate':{},\r\n        'node.mem_util_rate':{},\r\n        'node.network_util_rate':{},\r\n        'node.mount_point_util_rate':{},\r\n        'node.disk_io':{},\r\n    };\r\n    Object.keys(param.item.alarm_settings).forEach(function(key){\r\n        $scope.alarm_settings[key] = param.item.alarm_settings[key];\r\n    });\r\n    $scope.loading = true;\r\n\r\n    AlarmPlicy.get_hosts(function(res){\r\n        $scope.loading = false;\r\n        $scope.pools = res.result.map(function(p){\r\n            p.hosts.forEach(function(h){\r\n                if(param.item.hosts.indexOf(h.host_uuid) > -1){\r\n                    h._selected = true;\r\n                }\r\n            });\r\n            p._selected = p.hosts.length ? p.hosts.every(function(h){ return param.item.hosts.indexOf(h.host_uuid) > -1}) : false;\r\n            return p;\r\n        }).filter(function(p){\r\n            return p.hosts.length;\r\n        });\r\n        get_host_ids();\r\n    });\r\n    \r\n    function get_host_ids(){\r\n         $scope.data.host_ids = $scope.pools.reduce(function(host_ids,pool){\r\n            pool.hosts.forEach(function(host){\r\n                if(host._selected){\r\n                    host_ids.push(host.host_uuid);\r\n                }\r\n            });\r\n            return host_ids;\r\n        },[]);\r\n    }\r\n    $scope.check_alarm_null = function(){\r\n        return Object.keys($scope.alarm_settings).every(key => {\r\n            return $scope.alarm_settings[key].enabled === false;\r\n        });\r\n    };\r\n    $scope.checkOne = function(pool){\r\n        pool._selected = pool.hosts.every(function(h){ return h._selected});\r\n        get_host_ids();\r\n    };\r\n    $scope.checkAll = function(pool){\r\n        pool.hosts.forEach(function(h){\r\n            h._selected = pool._selected;\r\n        });\r\n       get_host_ids();\r\n    };\r\n\r\n    $scope.ok = function(){\r\n        var d = $scope.data;\r\n        var s = $scope.alarm_settings;\r\n        var flag = false;\r\n        var postData = {\r\n            \"name\": d.name,\r\n            \"desc\": d.desc,\r\n            \"alarm_settings\":s,\r\n            \"hosts\": d.host_ids,\r\n            \"email_enabled\": d.email_enabled,\r\n            \"email_address\": d.email_enabled ? d.email_address : undefined,\r\n            \"strategy_enabled\": d.strategy_enabled,\r\n            \"strategy_id\": d.strategy_id\r\n        };\r\n        filterAlterPolicy.map(function(it){\r\n            if(it.name === postData.name){\r\n                flag = true;\r\n            }\r\n        });\r\n        if(flag){\r\n            $.bigBox({\r\n                title: $$$I18N.get(\"INFOR_TIP\"),\r\n                content:$$$I18N.get(\"VDI_AlarmPlicy_TIPS\"),\r\n                timeout:6000\r\n            });\r\n            return;\r\n        }\r\n        $scope.submiting = true;\r\n        AlarmPlicy.alter(postData).$promise\r\n            .then(function(){\r\n                $modalInstance.close();\r\n            })\r\n            .finally(function(){\r\n                $scope.submiting = false;\r\n            })\r\n    };\r\n    $scope.close = function(){\r\n        $modalInstance.dismiss();\r\n    };\r\n}])\r\n.controller('viewDialogController', ['$scope','$modalInstance','param','AlarmPlicy', function($scope, $modalInstance,param,AlarmPlicy){\r\n    $scope.data = param;\r\n    $scope.loading = true;\r\n    AlarmPlicy.get_hosts(function(res){\r\n        $scope.loading = false;\r\n        $scope.pools = res.result.reduce(function(p_arr,p){\r\n            var p_hosts = p.hosts.reduce(function(h_arr,h){\r\n                if(param.hosts.indexOf(h.host_uuid) > -1){\r\n                    h_arr.push(h);\r\n                }\r\n                return h_arr;\r\n            },[]);\r\n            if(p_hosts.length){\r\n                p.hosts = p_hosts;\r\n                p_arr.push(p);\r\n            }\r\n            return p_arr;\r\n        },[]);\r\n    });\r\n    $scope.close = function(){\r\n        $modalInstance.close();\r\n    };\r\n}])\r\n.controller('configDialogController', ['$scope','$modalInstance','AlarmPlicy', function($scope,$modalInstance, AlarmPlicy){\r\n\t$scope.data = {\r\n        'node.service_exception':{},\r\n        'node.disconn':{},\r\n        'sys.ha':{},\r\n        'inst.ha':{},\r\n        'inst.teach_desktop_using_time':{},\r\n        'inst.personal_desktop_using_time':{},\r\n        'sys.authorization':{}\r\n    };\r\n    $scope.submiting = true;\r\n    AlarmPlicy.get_global_config(function(res){\r\n        var resdata = res.alarm_settings;\r\n        Object.keys(resdata).forEach(function(key){\r\n            $scope.data[key] = resdata[key];\r\n        });\r\n        $scope.config = res;\r\n    }).$promise.finally(function(){\r\n        $scope.submiting = false;\r\n    });\r\n\t$scope.ok = function(){\r\n        var d = $scope.data;\r\n        var postData = {\r\n            'alarm_settings':d,\r\n            'email_enabled':$scope.config.email_enabled,\r\n            'email_address':$scope.config.email_enabled ? $scope.config.email_address : undefined\r\n        }\r\n        $scope.submiting = true;\r\n\t\tAlarmPlicy.global_config(postData).$promise\r\n        .then(function(){\r\n            $modalInstance.close();\r\n        })\r\n        .finally(function(){\r\n            $scope.submiting = false;\r\n        });\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n.controller('noticeDialogController', ['$scope', '$modalInstance','AlarmPlicy', function($scope,$modalInstance, AlarmPlicy){\r\n\t$scope.data = {};\r\n    $scope.submiting = true;\r\n    AlarmPlicy.get_email_config({name:'email'},function(res){\r\n        $scope.data = res.value;\r\n    }).$promise.finally(function(){\r\n        $scope.submiting = false;\r\n    });\r\n\t$scope.ok = function(){\r\n        $scope.submiting = true;\r\n        AlarmPlicy.update_email_config({\r\n            \"name\": \"email\",\r\n            \"value\": $scope.data\r\n        }).$promise.then(function(){\r\n            $modalInstance.close();\r\n        }).finally(function(){\r\n            $scope.submiting = false;\r\n        });\r\n\t};\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n    $scope.test_mail = function(){\r\n        $scope.submiting = true;\r\n        AlarmPlicy.test_email({\r\n            \"name\": \"email\",\r\n            \"value\": $scope.data\r\n        }).$promise.then(function(){\r\n\r\n        }).finally(function(){\r\n            $scope.submiting = false;\r\n        });\r\n    };\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/monitor/controllers.js","angular.module(\"vdi.scheduler\", [])\r\n\r\n.factory(\"Scheduler\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n\treturn $resource($Domain + \"/thor/classScheduler\", { pool_id: \"@pool_id\" }, {\r\n\t\tget: { method: \"GET\" },\r\n\t\tsave: { method: \"POST\" },\r\n\t\tgetConfig: { method: \"GET\", url: $Domain + \"/thor/classSchedulerConfig\" },\r\n\t\tupdateConfig: { method: \"PUT\", url: $Domain + \"/thor/classSchedulerConfig\" }\r\n\t});\r\n}])\r\n\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\tvar num_day = 3600 * 1000 * 24;\r\n\t$filterProvider.register(\"weekChecked\", function(){\r\n\t\treturn function(items, checked){\r\n\t\t\tif(!items instanceof Array) return items;\r\n\t\t\tchecked = Boolean(checked);\r\n\t\t\treturn items.filter(function(item){\r\n\t\t\t\treturn item.checked === checked;\r\n\t\t\t});\r\n\t\t};\r\n\t});\r\n\t$filterProvider.register(\"getWeeks\", function(){\r\n\t\treturn function(items, start, end){\r\n\t\t\tif(!items instanceof Array) return items;\r\n\t\t\tvar start_time_week_start_time = start - num_day * start.getDay();\r\n\t\t\tvar start_time_week_end_time = start_time_week_start_time + num_day * 7;\r\n\t\t\tvar end_time_week_start_time = end - num_day * end.getDay();\r\n\t\t\tvar end_time_week_end_time = end_time_week_start_time + num_day * 7;\r\n\t\t\tvar weeks = [];\r\n\t\t\tvar span = end_time_week_end_time - start_time_week_start_time;\r\n\t\t\twhile(span > 0){\r\n\t\t\t\tweeks.push({\r\n\t\t\t\t\tname: \"第\" + (weeks.length + 1) + \"周\",\r\n\t\t\t\t\tstart: start_time_week_start_time + weeks.length * num_day * 7,\r\n\t\t\t\t\tend: start_time_week_end_time + weeks.length * num_day * 7,\r\n\t\t\t\t\tchecked: false,\r\n\t\t\t\t\tdisabled: false\r\n\t\t\t\t});\r\n\t\t\t\tspan -= num_day * 7;\r\n\t\t\t}\r\n\t\t\treturn weeks;\r\n\t\t};\r\n\t});\r\n}])\r\n.directive(\"schedulerweek\", function(){\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\t//require: \"^vdiSchedulerViewController\",\r\n\t\ttemplate: '<div class=\"btn btn-md vdi_scheduler_week_button\" ng-class=\"{disabled: week.disabled,\\'btn-primary\\': week.selected, \\'btn-default\\': !week.selected}\" \\\r\n\t\t\tng-click=\"week.checked = !week.checked;\">\\\r\n\t\t\t<label class=\"checkbox\"><input ng-model=\"week.checked\" type=\"checkbox\"><i></i></label>\\\r\n\t\t\t<span >{{ week.name }}</span></div>',\r\n\t\tscope: {\r\n\t\t\tweek: \"=\"\r\n\t\t},\r\n\t\tcontroller: function($scope){\r\n\t\t\t//console.log($scope);\r\n\t\t},\r\n\t\treplace: true,\r\n\t\tlink: function($scope, ele, attrs){\r\n\r\n\t\t}\r\n\t};\r\n})\r\n.directive(\"schedulersceneitem\", function(){\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\treplace: true,\r\n\t\trequire: [\"^schedulerday\", \"^schedulerCanvas\"],\r\n\t\ttemplate: '<div class=\"scene_in_day_item\" ng-class=\"{modifiable:modifiable}\">\\\r\n\t\t\t<div class=\"item_body\">\\\r\n\t\t\t\t<div class=\"item_dnd_body\"><b>{{ scene.name }}</b></div>\\\r\n\t\t\t\t<div class=\"item_dnd_header\"></div>\\\r\n\t\t\t\t<div class=\"item_dnd_footer\"></div>\\\r\n\t\t\t\t<a class=\"item_remove\" ng-click=\"remove()\"><i class=\"fa fa-times\"></i></a>\\\r\n\t\t\t</div></div>',\r\n\t\tscope: {\r\n\t\t\tscene: \"=\",\r\n\t\t\tmodifiable: \"=\"\r\n\t\t},\r\n\t\tcontroller: function($scope){\r\n\t\t\tlet scene = $scope.scene;\r\n\t\t\tthis.value = $scope.value = function(){\r\n\t\t\t\treturn (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\t};\r\n\t\t},\r\n\t\tlink: function(scope, ele, attr, ctrls){\r\n\t\t\tlet ox = 0;\r\n\t\t\tlet oy = 0;\r\n\t\t\tlet enable = false;\r\n\t\t\tlet day = ctrls[0];\r\n\t\t\tlet canvas = ctrls[1];\r\n\t\t\tscope.remove = function(){\r\n\t\t\t\tscope.modifiable && day.removeChild(scope.scene);\r\n\t\t\t};\r\n\t\t\tele.find(\".item_dnd_body\").mousedown(function(e){\r\n\t\t\t\tscope.modifiable && canvas.startSceneDND(scope.scene, e, ele);\r\n\t\t\t});\r\n\t\t\tele.find(\".item_dnd_header\").mousedown(function(e){\r\n\t\t\t\tscope.modifiable && canvas.startSceneStartModify(scope.scene, e, ele, day.mask());\r\n\t\t\t});\r\n\t\t\tele.find(\".item_dnd_footer\").mousedown(function(e){\r\n\t\t\t\tscope.modifiable && canvas.startSceneEndModify(scope.scene, e, ele, day.mask());\r\n\t\t\t});\r\n\t\t\tvar scene = scope.scene;\r\n\t\t\tele.css({\r\n\t\t\t\ttop: Math.max(0, Math.min(13, (scene.start - 1))) * 48 + \"px\",\r\n\t\t\t\theight: (Math.max(1, Math.min(13, scene.end - scene.start + 1))) * 48 - 8 + \"px\"\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n})\r\n.directive(\"schedulerday\", function(){\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\t//require: \"^vdiSchedulerViewController\",\r\n\t\ttemplate: '<div class=\"class_day\">\\\r\n\t\t\t\t<ol class=\"class_hour_list no_index\"><li class=\"class_hour_cell\" data-ng-repeat=\"classHour in classHours\"></li></ol>\\\r\n\t\t\t\t<div class=\"scene_in_day\"><schedulerSceneItem data-modifiable=\"modifiable\" data-scene=\"scene\" data-ng-repeat=\"scene in scenes\"></schedulerSceneItem></div>\\\r\n\t\t\t</div>',\r\n\t\treplace: true,\r\n\t\tcontroller: function($scope){\r\n\t\t\tvar it = this;\r\n\t\t\tthis.scope = $scope;\r\n\t\t\tthis.mask = $scope.mask = function(){\r\n\t\t\t\treturn 4095 ^ $scope.scenes.reduce(function(m, scene){\r\n\t\t\t\t\treturn m | (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\t\t}, 0);\r\n\t\t\t};\r\n\t\t\tthis.removeChild = function(child){\r\n\t\t\t\tvar index = $scope.scenes.indexOf(child);\r\n\t\t\t\tif(index > -1){\r\n\t\t\t\t\t$scope.scenes.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\tclassHours: \"=hours\",\r\n\t\t\tscenes: \"=scenes\",\r\n\t\t\tmodifiable: \"=\"\r\n\t\t},\r\n\t\tlink: function(scope, ele, attrs){}\r\n\t};\r\n})\r\n.directive(\"scheduleritems\", function(){\r\n\r\n\r\n\r\n\r\n\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\t//require: [\"schedulerCanvas\"],\r\n\t\ttemplate: '<div class=\"jarviswidget jarviswidget-sortable\">\\\r\n\t\t\t<header role=\"heading\"><h2 data-localize=\"添加场景排程\"></h2></header>\\\r\n\t\t\t<div role=\"content\"><div style=\"color:#333;margin-bottom:10px;\" data-localize=\"SCHEDULES\"></div>\\\r\n\t\t\t\t<div class=\"widget-body\" data-ng-transclude>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t</div>',\r\n\t\tcontroller: function($scope){\r\n\t\t},\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tlink: function(scope, ele, attrs){}\r\n\t};\r\n})\r\n.directive(\"scheduleritem\", function(){\r\n\treturn {\r\n\t\trestrict: \"E\",\r\n\t\ttemplate: '<div class=\"scene_item\">{{ scene.name }}</div>',\r\n\t\tcontroller: function($scope){},\r\n\t\trequire: [\"^scheduleritems\", \"^schedulerCanvas\"],\r\n\t\treplace: true,\r\n\t\ttransluce: true,\r\n\t\tscope: {\r\n\t\t\tscene: \"=\",\r\n\t\t\tmodifiable: \"=\"\r\n\t\t},\r\n\t\tlink: function(scope, ele, attrs, ctrls){\r\n\t\t\tvar canvas = ctrls[1];\r\n\t\t\tele.mousedown(function(e){\r\n\t\t\t\tscope.modifiable && canvas.startDND(scope.scene, e, ele);\r\n\t\t\t})\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive(\"schedulerCanvas\", [\"Scene\", function(){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tcontroller: function($scope){\r\n\t\t\tvar fn_pos_info = function(e, target){\r\n\t\t\t\tvar cells = $scope._element.find(\".class_hour_cell\");\r\n\t\t\t\t$scope._cell_offset = cells.offset();\r\n\t\t\t\t$scope._cell_offset.width = cells.width();\r\n\t\t\t\t$scope._cell_offset.height = cells.height();\r\n\t\t\t\tvar _t = $(target[0].cloneNode(1));\r\n\t\t\t\tvar target_offset = target.offset();\r\n\t\t\t\t$scope._handler._px = e.pageX;\r\n\t\t\t\t$scope._handler._py = e.pageY;\r\n\t\t\t\t$scope._handler._fx = e.pageX - target_offset.left;\r\n\t\t\t\t$scope._handler._fy = e.pageY - target_offset.top;\r\n\t\t\t\t$scope._handler._ow = target.width();\r\n\t\t\t\t$scope._handler._oh = target.height();\r\n\t\t\t\t$scope._handler._tx = e.clientX - $scope._handler._fx;\r\n\t\t\t\t$scope._handler._ty = e.clientY - $scope._handler._fy;\r\n\t\t\t\t_t.css({\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\twidth: $scope._handler._ow + \"px\",\r\n\t\t\t\t\theight: $scope._handler._oh + \"px\",\r\n\t\t\t\t\tleft: $scope._handler._tx + \"px\",\r\n\t\t\t\t\ttop: $scope._handler._ty + \"px\"\r\n\t\t\t\t});\r\n\t\t\t\t$scope._handler._t = _t;\r\n\t\t\t\t$scope._handler.html(\"\");\r\n\t\t\t\t$scope._handler.append(_t);\r\n\t\t\t\tdocument.body.appendChild($scope._canvas);\r\n\t\t\t\t//$(\"html body\").css(\"overflow\", \"hidden\");\r\n\t\t\t}\r\n\t\t\tthis.startSceneDND = function(scene, domEvent, target){\r\n\t\t\t\tfn_pos_info(domEvent, target);\r\n\t\t\t\t$scope._source_scene = scene;\r\n\t\t\t\t$scope._event_type = \"moveScene\";\r\n\t\t\t\t$scope.$emit(\"moveSceneStart\", scene);\r\n\t\t\t\t//target.remove();\r\n\t\t\t};\r\n\t\t\tthis.startSceneStartModify = function(scene, domEvent, target){\r\n\t\t\t\tfn_pos_info(domEvent, target);\r\n\t\t\t\t$scope._source_scene = scene;\r\n\t\t\t\t$scope._event_type = \"modifySceneStart\";\r\n\t\t\t\t$scope.$emit(\"moveSceneStart\", scene);\r\n\t\t\t\t//target.remove();\r\n\t\t\t};\r\n\t\t\tthis.startSceneEndModify = function(scene, domEvent, target){\r\n\t\t\t\tfn_pos_info(domEvent, target);\r\n\t\t\t\t$scope._source_scene = scene;\r\n\t\t\t\t$scope._event_type = \"modifySceneEnd\";\r\n\t\t\t\t$scope.$emit(\"moveSceneStart\", scene);\r\n\t\t\t\t//target.remove();\r\n\t\t\t};\r\n\t\t\tthis.startDND = function(scene, domEvent, target){\r\n\t\t\t\tfn_pos_info(domEvent, target);\r\n\t\t\t\t$scope._source_scene = scene;\r\n\t\t\t\t$scope._event_type = \"addNewScene\";\r\n\t\t\t};\r\n\t\t},\r\n\t\tlink: function(scope, ele, attrs){\r\n\t\t\tscope._element = ele;\r\n\t\t\tvar fn_restore_canvas_state = function(){\r\n\t\t\t\tfn_move_handler_to(0, 0);\r\n\t\t\t};\r\n\t\t\tvar fn_move_handler_to = function(x, y){\r\n\t\t\t\thandler.css(\"transform\", \"translate(\" + x + \"px, \" + y + \"px)\");\r\n\t\t\t};\r\n\t\t\tvar canvas = scope._canvas = $('<div class=\"scheduler_dnd_canvas\"><div class=\"dnd_handler\"></div><div class=\"dnd_masker\"></div></div>')[0];\r\n\t\t\tvar masker = $(\".dnd_masker\", canvas)\r\n\t\t\t\t.scroll(function(e){ e.preventDefault(); })\r\n\t\t\t\t.on(\"mousewheel\", function(e){ e.preventDefault(); })\r\n\t\t\t\t.mousemove(function(e){\r\n\t\t\t\t\tvar height;\r\n\t\t\t\t\tif(scope._event_type.indexOf(\"modifyScene\") === 0){\r\n\t\t\t\t\t\tswitch(scope._event_type){\r\n\t\t\t\t\t\t\tcase \"modifySceneStart\":\r\n\t\t\t\t\t\t\t\tvar top = Math.min(\r\n\t\t\t\t\t\t\t\t\thandler._ty + handler._oh - 40,\r\n\t\t\t\t\t\t\t\t\tMath.max(\r\n\t\t\t\t\t\t\t\t\t\thandler._ty - (scope._source_scene.start - 1) * 48,\r\n\t\t\t\t\t\t\t\t\t\thandler._ty - (handler._py - e.pageY)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\theight = Math.min(\r\n\t\t\t\t\t\t\t\t\t(scope._source_scene.end) * 48 - 8,\r\n\t\t\t\t\t\t\t\t\tMath.max(40,\r\n\t\t\t\t\t\t\t\t\t\thandler._oh + handler._py - e.pageY\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\thandler._t.css({\r\n\t\t\t\t\t\t\t\t\ttop: top + \"px\",\r\n\t\t\t\t\t\t\t\t\theight: height + \"px\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\thandler._ns = top;\r\n\t\t\t\t\t\t\t\thandler._nh = height;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"modifySceneEnd\":\r\n\t\t\t\t\t\t\t\theight = Math.min(\r\n\t\t\t\t\t\t\t\t\t(13 - scope._source_scene.start) * 48 - 8,\r\n\t\t\t\t\t\t\t\t\tMath.max(40,\r\n\t\t\t\t\t\t\t\t\t\thandler._oh + (e.pageY - handler._py)\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\thandler._t.css({\r\n\t\t\t\t\t\t\t\t\theight: height + \"px\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\thandler._ns = handler._ty;\r\n\t\t\t\t\t\t\t\thandler._nh = height;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tfn_move_handler_to(\r\n\t\t\t\t\t\t\te.pageX - handler._px,\r\n\t\t\t\t\t\t\te.pageY - handler._py\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdocument.selection && document.selection.empty();\r\n\t\t\t\t\tdocument.getSelection && document.getSelection().removeAllRanges();\r\n\t\t\t\t})\r\n\t\t\t\t.mouseup(function(e){\r\n\t\t\t\t\tvar day = (e.pageX - scope._cell_offset.left) / (scope._cell_offset.width + 1) | 0;\r\n\t\t\t\t\tvar start = ((e.pageY - scope._cell_offset.top) / (scope._cell_offset.height) | 0) + 1;\r\n\t\t\t\t\tvar end;\r\n\t\t\t\t\tswitch(scope._event_type){\r\n\t\t\t\t\t\tcase \"addNewScene\":\r\n\t\t\t\t\t\t\tend = start;\r\n\t\t\t\t\t\t\tscope.$emit(\"addNewScene\", day, {\r\n\t\t\t\t\t\t\t\tstart: start,\r\n\t\t\t\t\t\t\t\tend: end,\r\n\t\t\t\t\t\t\t\tpool: scope._source_scene.pool,\r\n\t\t\t\t\t\t\t\tmode: scope._source_scene.id\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"moveScene\":\r\n\t\t\t\t\t\t\tstart -= (handler._fy / scope._cell_offset.height | 0);\r\n\t\t\t\t\t\t\tscope.$emit(\"moveScene\", day, scope._source_scene, {\r\n\t\t\t\t\t\t\t\tstart: start,\r\n\t\t\t\t\t\t\t\tend: start + (scope._source_scene.end - scope._source_scene.start)\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"modifySceneStart\":\r\n\t\t\t\t\t\tcase \"modifySceneEnd\":\r\n\t\t\t\t\t\t\thandler._ns = handler._ns || handler._ty;\r\n\t\t\t\t\t\t\thandler._nh = handler._nh || handler._oh;\r\n\t\t\t\t\t\t\thandler._nh += 8;\r\n\t\t\t\t\t\t\tstart = Math.max(1,\r\n\t\t\t\t\t\t\t\tMath.min(12,\r\n\t\t\t\t\t\t\t\t\tscope._source_scene.start + Math.round((handler._ns - handler._ty) / 48)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tend = Math.max(start,\r\n\t\t\t\t\t\t\t\tMath.min(12,\r\n\t\t\t\t\t\t\t\t\tstart + Math.round(handler._nh / 48) - 1\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.log(scope._source_scene.start, scope._source_scene.end,\r\n\t\t\t\t\t\t\t\t\thandler._oh\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconsole.log(start, end, handler._nh, handler._nh / 48);\r\n\t\t\t\t\t\t\tscope.$emit(\"modifyScene\", scope._source_scene, {\r\n\t\t\t\t\t\t\t\tstart: start,\r\n\t\t\t\t\t\t\t\tend: end\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\thandler._ns = handler._nh = NaN;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfn_restore_canvas_state();\r\n\t\t\t\t\tcanvas.parentNode && canvas.parentNode.removeChild(canvas);\r\n\t\t\t\t\tscope._source_scene = null;\r\n\t\t\t\t\t//$(\"html body\").css(\"overflow\", \"auto\");\r\n\t\t\t\t\tscope.$emit(\"endModifyScene\");\r\n\t\t\t\t})\r\n\t\t\t\t.mouseout(function(){\r\n\t\t\t\t\tcanvas.parentNode && canvas.parentNode.removeChild(canvas);\r\n\t\t\t\t\t//$(\"html body\").css(\"overflow\", \"auto\");\r\n\t\t\t\t\tscope.$emit(\"endModifyScene\");\r\n\t\t\t\t})[0];\r\n\t\t\tvar handler = scope._handler = $(\".dnd_handler\", canvas);\r\n\t\t\tscope.$on(\"newScheduler\", function($event, scene, offset){\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.controller(\"vdiSchedulerViewController\", [\r\n\"$scope\", \"Scheduler\", \"Scene\", \"SchoolRoom\", \"$modal\", \"UserRole\",\r\nfunction($scope, scheduler, Scene, schoolroom, $modal, UserRole){\r\n\tlet user = UserRole.currentUser;\r\n\tif(user === null){ return; }\r\n\t$scope.editMode = false;\r\n\t$scope.classes = [];\r\n\t$scope.class = null;\r\n\t//$scope.start_time = new Date();\r\n\t//$scope.end_time = new Date();\r\n\t$scope.time_span = 0;\r\n\tvar num_day = 3600 * 1000 * 24;\r\n\r\n\t$scope.scenes = [];\r\n\t$scope.dates = [];\r\n\tvar _scenes = {};\r\n\t$scope.editWeek = null;\r\n\tschoolroom.querywithSimple(function(res){\r\n\t\tvar schoolrooms = [];\r\n\t\tres.pools_.forEach(function(item){\r\n\t\t\tif(item.user_ids.some(data => data === user.id )){\r\n\t\t\t\tschoolrooms.push(item);\r\n\t\t\t}\r\n\t\t})\r\n\t\t$scope.classes = schoolrooms;\r\n\t\t$scope.class = $scope.classes[0] || null;\r\n\t\tScene.query(function(res){\r\n\t\t\t$scope.scenes = res.modes;\r\n\t\t\t$scope.scenes.forEach(function(mode){\r\n\t\t\t\t_scenes[mode.id] = mode;\r\n\t\t\t});\r\n\t\t\t$scope.class && fn_get_scheduler($scope.class);\r\n\t\t});\r\n\t\t\r\n\r\n\t});\r\n\t// Scene.query(function(res){\r\n\t// \tconsole.log(this, arguments, $scope.class);\r\n\t// \t$scope.scenes = res.modes;\r\n\t// \t$scope.scenes.forEach(function(mode){\r\n\t// \t\t_scenes[mode.id] = mode;\r\n\t// \t});\r\n\t// \tschoolroom.query(function(res){\r\n\t// \t\tvar schoolrooms = [];\r\n\t// \t\tres.pools_.forEach(function(item){\r\n\t// \t\t\tif(item.user_ids.some(data => data === user.id )){\r\n\t// \t\t\t\tschoolrooms.push(item);\r\n\t// \t\t\t}\r\n\t// \t\t})\r\n\t// \t\t$scope.classes = schoolrooms;\r\n\t// \t\t$scope.class = $scope.classes[0] || null;\r\n\t// \t\t$scope.class && fn_get_scheduler($scope.class);\r\n\t// \t});\r\n\t// });\r\n\twindow.sss = $scope;\r\n\r\n\tvar fn_update_config = function(config){\r\n\t\tvar now = new Date(config.now);\r\n\t\t$scope.time_span = now.getTime() - Date.now();\r\n\t\t$scope.start_time = new Date(config.semester_start - (config.semester_start % num_day));\r\n\t\t$scope.end_time = new Date(config.semester_end - (config.semester_end % num_day));\r\n\r\n\r\n\t\tvar week_start_day = -1;\r\n\r\n\t\t$scope.start_time_week_start_time = $scope.start_time - num_day * ($scope.start_time.getDay() + week_start_day);\r\n\t\t$scope.start_time_week_end_time = $scope.start_time_week_start_time + num_day * 7;\r\n\t\t$scope.end_time_week_start_time = $scope.end_time - num_day * ($scope.end_time.getDay() + week_start_day);\r\n\t\t$scope.end_time_week_end_time = $scope.end_time_week_start_time + num_day * 7;\r\n\r\n\t\t//var ymd = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join(\"-\");\r\n\t\tvar y = now.getFullYear(), m = now.getMonth(), d = now.getDate();\r\n\t\t$scope.classHours = config.period.map(function(classHour, i){\r\n\t\t\tvar start = classHour[0].split(\":\");\r\n\t\t\tvar end = classHour[1].split(\":\");\r\n\t\t\treturn {\r\n\t\t\t\tindex: i + 1,\r\n\t\t\t\tstart: new Date(y, m, d, start[0], start[1]),\r\n\t\t\t\tend: new Date(y, m, d, end[0], end[1])\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tvar start_time = $scope.start_time.getTime();\r\n\t\tvar end_time = $scope.end_time.getTime();\r\n\t\t$scope.dates.splice(0, $scope.dates.length);\r\n\t\tvar date_start = 0;\r\n\t\tdo{\r\n\t\t\tvar date_start_time = date_start * num_day + $scope.start_time_week_start_time;\r\n\t\t\tvar start_date = new Date(date_start_time);\r\n\t\t\t$scope.dates.push({\r\n\t\t\t\tstart: date_start_time,\r\n\t\t\t\tstart_date: start_date,\r\n\t\t\t\tname: \"周\" + \"日一二三四五六\"[start_date.getDay()],\r\n\t\t\t\tscenes: date_start_time >= start_time && date_start_time <= end_time ? [] : null\r\n\t\t\t});\r\n\t\t\tdate_start ++;\r\n\t\t}\r\n\t\twhile(date_start_time < end_time || $scope.dates.length % 7);\r\n\r\n\t\tvar week_start = 0;\r\n\t\t$scope.weeks.splice(0);\r\n\r\n\t\twhile(week_start * 7 < $scope.dates.length){\r\n\t\t\tvar _start = $scope.start_time_week_start_time + (num_day * 7 * week_start);\r\n\t\t\t$scope.weeks.push({\r\n\t\t\t\tindex: week_start,\r\n\t\t\t\tname: \"第\" + (week_start + 1) + \"周\",\r\n\t\t\t\tselected: false,\r\n\t\t\t\tstart: _start,\r\n\t\t\t\tend: _start + num_day * 7,\r\n\t\t\t\tchecked: false,\r\n\t\t\t\tdisabled: _start - now < - num_day * 7,\r\n\t\t\t\tdays: $scope.dates.slice(week_start * 7, ++ week_start * 7)\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar now_week = null;\r\n\t\tvar now_day = null;\r\n\t\tvar now_ts = Date.now() + $scope.time_span;\r\n\r\n\t\tnow_week = $scope.weeks.filter(function(week){\r\n\t\t\treturn now_ts >= week.start && now_ts < week.start + num_day * 7;\r\n\t\t})[0];\r\n\t\tnow_day = now_week ? now_week.days.filter(function(day){\r\n\t\t\treturn now_ts >= day.start && now_ts < day.start + num_day;\r\n\t\t})[0] : null;\r\n\t\tnow_week && (now_week.current = true);\r\n\t\tnow_day && (now_day.current = true);\r\n\r\n\t\tif($scope.currentWeek){\r\n\t\t\tvar WEEk = $scope.weeks.filter(function(item){ return item.index == $scope.currentWeek.index })[0];\r\n\t\t\tif(WEEk){ $scope.currentWeek = WEEk; }\r\n\t\t\telse{ $scope.currentWeek = now_week; }\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$scope.currentWeek = now_week;\r\n\t\t}\r\n\t\t$scope.class && fn_get_scheduler($scope.class);\r\n\r\n\t\t// $scope.currentWeek = $scope.currentWeek? $scope.currentWeek : now_week;\r\n\t\t//now_week && (now_week.checked = true);\r\n\t};\r\n\r\n\tscheduler.getConfig(function(res){\r\n\t\tfn_update_config(res.result);\r\n\t});\r\n\r\n\t$scope.classChange = function(){\r\n\t\t$scope.class && fn_get_scheduler($scope.class);\r\n\t};\r\n\tvar _currentWeek = null;\r\n\t$scope.enableEditMode = function(){\r\n\t\t_currentWeek = $scope.currentWeek;\r\n\t\t$scope.currentWeek = angular.copy(_currentWeek);\r\n\t\t$scope.currentWeek.days.forEach(function(day){\r\n\t\t\tday.scenes = day.scenes || [];\r\n\t\t});\r\n\t};\r\n\t$scope.disableEditMode = function(){\r\n\t\t$scope.currentWeek = _currentWeek;\r\n\t\t$scope.editMode = false;\r\n\t\t$scope.weeks.forEach(function(week){\r\n\t\t\tweek.checked = false;\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.siblingWeek = function(seed){\r\n\t\tif($scope.currentWeek){\r\n\t\t\t$scope.currentWeek = $scope.weeks[\r\n\t\t\t\tMath.min($scope.weeks.length - 1, Math.max(0,\r\n\t\t\t\t\t$scope.currentWeek.index + seed\r\n\t\t\t\t))\r\n\t\t\t];\r\n\t\t}\r\n\t};\r\n\t$scope.siblingWeekState = function(seed){\r\n\t\treturn $scope.currentWeek && $scope.weeks[$scope.currentWeek.index + seed] ? true : false;\r\n\t};\r\n\r\n\r\n\tvar fn_get_scheduler = function(_class){\r\n\t\tscheduler.get({ pool_id: _class.id },\r\n\t\t\tfunction(res){\r\n\t\t\t\t_class.data = res.result.data;\r\n\t\t\t\t\r\n\t\t\t\t$scope.dates.forEach(function(day){\r\n\t\t\t\t\tday.scenes && day.scenes.splice(0, day.scenes.length);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tObject.keys(_class.data).forEach(function(date){\r\n\t\t\t\t\t$scope.dates.forEach(function(day){\r\n\t\t\t\t\t\tif(date >= day.start && date - day.start < num_day){\r\n\t\t\t\t\t\t\t// console.log(day.start - date, day.start, date);\r\n\t\t\t\t\t\t\tday.scenes && _class.data[date].forEach(function(scene){\r\n\t\t\t\t\t\t\t\t_scenes[scene.mode_id] && day.scenes.push({\r\n\t\t\t\t\t\t\t\t\ttime: day.start,\r\n\t\t\t\t\t\t\t\t\tstart: scene.start_at + 1,\r\n\t\t\t\t\t\t\t\t\tend: scene.end_at + 1,\r\n\t\t\t\t\t\t\t\t\tmode: scene.mode_id,\r\n\t\t\t\t\t\t\t\t\tname: _scenes[scene.mode_id].name,\r\n\t\t\t\t\t\t\t\t\tpool: scene.pool_id\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t);\r\n\t};\r\n\r\n\t$scope.weeks = [];\r\n\t$scope.weekCheckAll = false;\r\n\t$scope.weekCheckOdd = false;\r\n\t$scope.weekCheckEven = false;\r\n\t$scope.weekCheckSome = false;\r\n\t$scope.currentEditWeek = null;\r\n\t$scope.checkSomeWeeks = function(val){\r\n\t\treturn $scope.weeks.some(function(week){\r\n\t\t\treturn week.checked === val;\r\n\t\t});\r\n\t};\r\n\t$scope.checkAllWeeks = function(val){\r\n\t\tif(val !== undefined){\r\n\t\t\t$scope.weeks.forEach(function(week){\r\n\t\t\t\tweek.checked = !val;\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif($scope.weeks.length){\r\n\t\t\t\tvar res = $scope.weeks.every(function(week){ return week.checked });\r\n\t\t\t\tif(res){\r\n\t\t\t\t\t$scope.weekCheckAll = $scope.weekCheckOdd = $scope.weekCheckEven;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\t$scope.checkAllOddWeeks = function(val){\r\n\t\tif(val !== undefined){\r\n\t\t\t$scope.weeks.forEach(function(week, index){\r\n\t\t\t\t!Boolean(index % 2) && (week.checked = !val);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif($scope.weeks.length){\r\n\t\t\t\tvar res = $scope.weeks.every(function(week, index){\r\n\t\t\t\t\treturn Boolean(index % 2) || week.checked;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.weekCheckOdd = res;\r\n\t\t\t\t$scope.weekCheckAll = $scope.weekCheckOdd && $scope.weekCheckEven;\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\t$scope.checkAllEvenWeeks = function(val){\r\n\t\tif(val !== undefined){\r\n\t\t\t$scope.weeks.forEach(function(week, index){\r\n\t\t\t\tBoolean(index % 2) && (week.checked = !val);\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\tif($scope.weeks.length){\r\n\t\t\t\tvar res = $scope.weeks.every(function(week, index){\r\n\t\t\t\t\treturn !Boolean(index % 2) || week.checked;\r\n\t\t\t\t});\r\n\t\t\t\t$scope.weekCheckEven = res;\r\n\t\t\t\t$scope.weekCheckAll = $scope.weekCheckOdd && $scope.weekCheckEven;\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\t$scope.$on(\"moveSceneStart\", function(de, scene){\r\n\t\t$scope.currentWeek.days.forEach(function(day){\r\n\t\t\tvar index = day.scenes ? day.scenes.indexOf(scene) : -1;\r\n\t\t\tif(index > -1){\r\n\t\t\t\tday.moving_scene = day.scenes.splice(index, 1);\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.$apply();\r\n\t});\r\n\t$scope.$on(\"moveScene\", function(de, day, scene, newScene){\r\n\t\tvar _day = $scope.currentWeek.days[day];\r\n\t\tif(_day && _day.scenes){\r\n\t\t\tvar m = 4095 ^ _day.scenes.reduce(function(m, scene){\r\n\t\t\t\treturn m | (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\t}, 0);\r\n\t\t\tvar data = (Math.pow(2, newScene.end - newScene.start + 1) - 1) << (12 - newScene.end);\r\n\t\t\tif((m & data) === data){\r\n\t\t\t\tscene.start = newScene.start;\r\n\t\t\t\tscene.end = newScene.end;\r\n\t\t\t\t_day.scenes.push(scene);\r\n\t\t\t\t$scope.currentWeek.days.forEach(function(day){\r\n\t\t\t\t\tday.moving_scene = undefined;\r\n\t\t\t\t\tdelete day.moving_scene;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.$on(\"modifyScene\", function(de, scene, newScene){\r\n\t\tvar _day = $scope.currentWeek.days.filter(function(day){ return day.moving_scene })[0];\r\n\t\tif(_day && _day.scenes){\r\n\t\t\tvar m = 4095 ^ _day.scenes.reduce(function(m, scene){\r\n\t\t\t\treturn m | (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\t}, 0);\r\n\t\t\tvar data = (Math.pow(2, newScene.end - newScene.start + 1) - 1) << (12 - newScene.end);\r\n\t\t\tif((m & data) === data){\r\n\t\t\t\tscene.start = newScene.start;\r\n\t\t\t\tscene.end = newScene.end;\r\n\t\t\t\t//_day.scenes.push(scene);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$scope.$on(\"endModifyScene\", function(){\r\n\t\t$scope.currentWeek.days.forEach(function(day){\r\n\t\t\tif(day.moving_scene){\r\n\t\t\t\tday.scenes.push.apply(day.scenes, day.moving_scene);\r\n\t\t\t\tday.moving_scene = undefined;\r\n\t\t\t\tdelete day.moving_scene;\r\n\t\t\t}\r\n\t\t});\r\n\t\t$scope.$apply();\r\n\t});\r\n\r\n\t$scope.$on(\"addNewScene\", function(de, day, scene){\r\n\t\tvar _day = $scope.currentWeek.days[day];\r\n\t\tif(_day && _day.scenes){\r\n\t\t\tvar m = 4095 ^ _day.scenes.reduce(function(m, scene){\r\n\t\t\t\treturn m | (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\t}, 0);\r\n\t\t\tvar data = (Math.pow(2, scene.end - scene.start + 1) - 1) << (12 - scene.end);\r\n\t\t\tif((m & data) === data){\r\n\t\t\t\tscene.time = _day.start;\r\n\t\t\t\tscene.name = _scenes[scene.mode].name;\r\n\t\t\t\t_day.scenes.push(scene);\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t$scope.currentWeek = null;\r\n\r\n\t$scope.selectWeek = function(week){\r\n\t\t$scope.currentWeek = week;\r\n\t};\r\n\t$scope.clearData = function(){\r\n\t\tscheduler.save({\r\n\t\t\ttimezone_offset: new Date().getTimezoneOffset(),\r\n\t\t\tpool_id: $scope.class.id,\r\n\t\t\tdata: []\r\n\t\t}, function(res){\r\n\t\t\t$scope.disableEditMode();\r\n\t\t});\r\n\t};\r\n\t$scope.save = function(){\r\n\t\t//console.log($scope.dates);\r\n\t\tvar data = [];\r\n\t\t$scope.weeks.forEach(function(week){\r\n\t\t\tweek.days.forEach(function(day, i){\r\n\t\t\t\tvar scenes = (week.checked ? $scope.currentWeek.days[i] : day).scenes;\r\n\t\t\t\tscenes && scenes.forEach(function(scene){\r\n\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\tteaching_time: day.start,\r\n\t\t\t\t\t\tpool_id: $scope.class.id,\r\n\t\t\t\t\t\tmode_id: scene.mode,\r\n\t\t\t\t\t\tstart_at: scene.start - 1,\r\n\t\t\t\t\t\tend_at: scene.end - 1\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t});\r\n\t\tscheduler.save({\r\n\t\t\t\ttimezone_offset: new Date().getTimezoneOffset(),\r\n\t\t\t\tpool_id: $scope.class.id,\r\n\t\t\t\tdata: data\r\n\t\t\t},\r\n\t\t\tfunction(res){\r\n\t\t\t\tfn_get_scheduler(_scope.class);\r\n\t\t\t\t$scope.disableEditMode();\r\n\t\t});\r\n\t};\r\n\tvar _scope = $scope;\r\n\t$scope.clearAll = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplate: '<div class=\"padding-10\">\\\r\n\t\t\t\t<div class=\"modal-header\">\\\r\n\t\t\t\t\t<button type=\"button\" class=\"close\" data-ng-click=\"close()\"><span aria-hidden=\"true\">×</span></button>\\\r\n\t\t\t\t\t<h4 class=\"modal-title\" data-localize=\"清除课程表\"></h4>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<form name=\"schedulerForm\">\\\r\n\t\t\t\t\t<div class=\"padding-10\" data-localize=\"DELETE_SCHEDULE\"></div>\\\r\n\t\t\t\t\t<div style=\"text-align:right\">\\\r\n\t\t\t\t\t\t<button class=\"btn btn-primary\" ng-click=\"ok()\" data-localize=\"确定\"></button>\\\r\n\t\t\t\t\t\t<button class=\"btn btn-default\" ng-click=\"close()\" data-localize=\"取消\"></button>\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t</form>\\\r\n\t\t\t</div>',\r\n\t\t\tsize: \"sm\",\r\n\t\t\tbackground: \"static\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tscheduler.save({\r\n\t\t\t\t\t\tpool_id: _scope.class.id,\r\n\t\t\t\t\t\tdata: []\r\n\t\t\t\t\t}, function(res){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t\tfn_get_scheduler(_scope.class);\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.setting = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/scheduler/config.html\",\r\n\t\t\tsize: \"md\",\r\n\t\t\tbackdrop: \"static\",\r\n\t\t\tcontroller: function($scope, $modalInstance){\r\n\t\t\t\tconsole.log($scope, this);\r\n\t\t\t\t$scope.start_time = _scope.start_time || new Date();\r\n\t\t\t\t$scope.end_time = _scope.end_time || new Date();\r\n\t\t\t\t$scope.classHours = angular.copy(_scope.classHours);\r\n\r\n\t\t\t\t$scope.startDateOptions = {\r\n\t\t\t\t\tformatYear: 'yy',\r\n\t\t\t\t\tstartingDay: 1\r\n\t\t\t\t};\r\n\t\t\t\t$scope.endDateOptions = {\r\n\t\t\t\t\tformatYear: 'yy',\r\n\t\t\t\t\tstartingDay: 1\r\n\t\t\t\t};\r\n\t\t\t\t//$scope.startDateOpened = true;\r\n\r\n\t\t\t\t$scope.minEndTime = function(){\r\n\t\t\t\t\tif($scope.start_time){\r\n\t\t\t\t\t\treturn $scope.start_time.getTime() + num_day * 60;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.maxEndTime = function(){\r\n\t\t\t\t\tif($scope.start_time)\r\n\t\t\t\t\t\treturn $scope.start_time.getTime() + num_day * 180;\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$scope.openStartDate = function($event){\r\n\t\t\t\t\t$event.preventDefault();\r\n\t\t\t\t\t$event.stopPropagation();\r\n\t\t\t\t\t$scope.endDateOpened = false;\r\n\t\t\t\t\t$scope.startDateOpened = true;\r\n\t\t\t\t\t//this.$$childTail.$$prevSibling.isOpen = true;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.openEndDate = function($event){\r\n\t\t\t\t\t$event.preventDefault();\r\n\t\t\t\t\t$event.stopPropagation();\r\n\t\t\t\t\t$scope.startDateOpened = false;\r\n\t\t\t\t\t$scope.endDateOpened = true;\r\n\t\t\t\t\t//this.$$childTail.isOpen = true;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.startTimeChange = function(){\r\n\t\t\t\t\tif($scope.start_time > $scope.end_time){\r\n\t\t\t\t\t\t$scope.end_time = $scope.start_time;\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\t// $scope.changeStartHours = function(hour){\r\n\t\t\t\t// \tif(hour.start >= hour.end){\r\n\t\t\t\t// \t\thour.start = new Date(hour.end.getTime());\r\n\t\t\t\t// \t}\r\n\t\t\t\t// };\r\n\t\t\t\t// $scope.changeEndHours = function(hour){\r\n\t\t\t\t// \tif(hour.end <= hour.start){\r\n\t\t\t\t// \t\thour.end = new Date(hour.start.getTime());\r\n\t\t\t\t// \t}\r\n\t\t\t\t// };\r\n\r\n\t\t\t\t$scope.formValid = function(){\r\n\t\t\t\t\tvar time_wrong = false;\r\n\t\t\t\t\t$scope.classHours.map(function(hour){\r\n\t\t\t\t\t\tif( hour.start>=hour.end || hour.end<= hour.start){\r\n\t\t\t\t\t\t\ttime_wrong = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn $scope.$$childTail.schedulerForm.$valid && !time_wrong;\r\n\t\t\t\t};\r\n\t\t\t\t$scope.$on('matchInput', function(e,v){\r\n\t\t\t\t\t$scope.matchInput = v;\r\n\t\t\t\t})\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\tsemester_start: $scope.start_time.getTime(),\r\n\t\t\t\t\t\tsemester_end: $scope.end_time.getTime(),\r\n\t\t\t\t\t\tperiod: $scope.classHours.map(function(hour){\r\n\t\t\t\t\t\t\treturn hour.start.getHours() + \":\" + hour.start.getMinutes() + \"-\" +\r\n\t\t\t\t\t\t\t\thour.end.getHours() + \":\" + hour.end.getMinutes();\r\n\t\t\t\t\t\t}).join(\",\")\r\n\t\t\t\t\t};\r\n\t\t\t\t\tscheduler.updateConfig(data, function(res){\r\n\t\t\t\t\t\tfn_update_config(res.result);\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/scheduler/controllers.js","angular.module(\"vdi.plan\", [])\r\n\r\n/* 计划任务 */\r\n.factory(\"Plan\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/thor/tasks\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false, params: null},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\", isArray: false},\r\n\t\tupdate:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/tasks/:id\", params: { id: \"@id\" }},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url:$Domain + \"/thor/tasks\", isArray: false}\r\n\r\n\t});\r\n}])\r\n.factory(\"HostPlan\", [\"$resource\", \"$Domain\", function(res, $Domain){\r\n\treturn res($Domain + \"/compute/v1/tasks/node\", null, {\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", isArray: false, params: null},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\", url:$Domain + \"/compute/v1/tasks\", isArray: false},\r\n\t\tupdate:\r\n            { method: \"PUT\", url: $Domain + \"/compute/v1/tasks/:id\", params: { id: \"@id\" } },\r\n        active:\r\n            { method: \"PUT\", url: $Domain + \"/compute/v1/tasks/:id\", params: { id: \"@id\" } },\r\n\t\tdelete:\r\n            { method: \"DELETE\", url:$Domain + \"/compute/v1/tasks\"},\r\n        hostList:\r\n            { method: \"GET\", url:$Domain + \"/compute/v1/nodes\" }\r\n\r\n\t});\r\n}])\r\n\r\n.factory(\"weekdays\", [\"$$$I18N\", function($$$I18N){\r\n\treturn function(){\r\n\t\treturn \"周一 周二 周三 周四 周五 周六 周日\".split(\" \").map(function(s, i){\r\n\t\t\treturn {id: i + 1, name: $$$I18N.get(s)};\r\n\t\t});\r\n\t}\r\n}])\r\n\r\n.directive('iptNumber', ['$rootScope', '$timeout', function($rootScope, $timeout){\r\n    // Runs during compile\r\n    return {\r\n        require: 'ngModel', // Array = multiple requires, ? = optional, ^ = check parent elements\r\n        restrict: 'AE', // E = Element, A = Attribute, C = Class, M = Comment\r\n        link:function(scope, $element, $attrs){\r\n            var minLen = Number($attrs.min);\r\n            var maxLen = Number($attrs.max);\r\n            $element.click(function(e){\r\n                var preVal = Number(e.target.value);\r\n                if(this.value ===''){\r\n                    this.value = '';\r\n                } else {\r\n                    if(preVal >= maxLen){\r\n                        this.value = minLen;\r\n                    }\r\n                    if(preVal <= minLen){\r\n                        this.value = maxLen ;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n\r\n.factory(\"initPlanScope\", [\"Plan\", \"$$$I18N\", \"weekdays\", function(Plan, $$$I18N, weekdays){\r\n\treturn function(scope, $modalInstance, Scene, TeachDesktop, Plan){\r\n\t\t// scope 变量\r\n        scope.min_namelength = 2;\r\n        scope.max_namelength = 20;\r\n        scope.data = {open: false, off: false};\r\n        scope.modes = [];\r\n        scope.modes_loading = true;\r\n        scope.weeks = weekdays();\r\n\r\n        Plan.query(function(res){\r\n            scope.getPlanList = res.tasks;\r\n        });\r\n        // scope 方法\r\n        scope.loadList = function(mode){\r\n            scope.modes.forEach(function(item){\r\n                if(item.id == mode.id){\r\n                    item.is_open=!item.is_open;\r\n                    if(!item.desktops){\r\n                        item.desktop_loading = true;\r\n                        TeachDesktop.query({id: mode.id}, function(res){\r\n                            item.desktop_loading = false;\r\n                            item.desktops = res.result;\r\n                            // item._selected = item.desktops.filter(function(d){ return d.in_task }).length == item.desktops.length ? true:false;\r\n                            // item.desktops.forEach(function(d){\r\n                                // if(d.in_task){\r\n                                    // d._selected = true;\r\n                                    // item.has_inTask = true;\r\n                                // }\r\n                            // });\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        scope.checksublist = function(item){\r\n            if(!item._selected){\r\n                item.desktops.forEach(function(data){ data._selected = true; })\r\n            }\r\n            else{\r\n                item.desktops.forEach(function(data){ data._selected = false; })\r\n            }\r\n        };\r\n        scope.setparent = function(item){\r\n            var select_len = item.desktops.filter(function(data){ return data._selected==true; }).length;\r\n            if(select_len==item.desktops.length){\r\n                item._selected = true;\r\n            }\r\n            else\r\n                item._selected = false;\r\n        };\r\n        scope.$watch('data.open',function(newData, oldData, scope){\r\n            if(!newData){\r\n                scope.data.openHouer = undefined;\r\n                scope.data.openMinute = undefined;\r\n            }\r\n        });\r\n        scope.$watch('data.off',function(newData, oldData, scope){\r\n            if(!newData){\r\n                scope.data.offHouer = undefined;\r\n                scope.data.offMinute = undefined;\r\n            }\r\n        });\r\n        scope.check = function(){\r\n            // let select_len = scope.modes.filter(function(item){ return item.desktops && item.desktops.filter(function(desktop){ return !desktop.in_task && desktop._selected }).length }).length;\r\n            let select_len = scope.modes.filter(function(item){ return item.desktops && item.desktops.filter(function(desktop){ return desktop._selected }).length }).length;\r\n            if(scope.data.open && scope.data.off)\r\n                return select_len && scope.data.openHouer!=undefined && scope.data.openMinute!=undefined && scope.data.offHouer!=undefined && scope.data.offMinute!=undefined;\r\n            else\r\n                return select_len && ( (scope.data.open && scope.data.openHouer!=undefined && scope.data.openMinute!=undefined) || (scope.data.off && scope.data.offHouer!=undefined && scope.data.offMinute!=undefined ) );\r\n        };\r\n        scope.checkWeek = function(){\r\n            return scope.weeks.filter(function(item){ return item._selected }).length\r\n        };\r\n        scope.selectAllWeek = function(selectAll){\r\n            scope.weeks.forEach(function(item){ item._selected = selectAll; });\r\n        };\r\n        scope.selectOne = function(){\r\n            var selectNum = scope.weeks.filter(function(item){ return item._selected; }).length;\r\n            if(selectNum === scope.weeks.length){\r\n                scope.selectAll = true;\r\n            } else {\r\n                scope.selectAll = false;\r\n            }\r\n        };\r\n        scope.ok = function(){\r\n\t\t\tvar data = scope.getValues();\r\n            var flag = false ;\r\n            if(data.task_type === 'bootup,shutdown' && scope.data.openHouer == scope.data.offHouer && scope.data.openMinute == scope.data.offMinute){\r\n                $.bigBox({\r\n                    title\t: $$$I18N.get(\"INFOR_TIP\"),\r\n                    content\t: $$$I18N.get(\"SCHEDUL_TIP\"),\r\n                    timeout\t: 6000\r\n                });\r\n            } else {\r\n                scope.getPlanList.map(function(it){\r\n                    if(it.name===data.name){\r\n                        flag = true;\r\n                    }\r\n                })\r\n                if(flag){\r\n                  $.bigBox({\r\n                      title : $$$I18N.get(\"INFOR_TIP\"),\r\n                      content   : $$$I18N.get(\"SCHEDUL_SAME_NAME_TIPS\"),\r\n                      timeout   : 6000\r\n                  });\r\n                  return false;  \r\n                }\r\n                Plan.add({'task': data}, function(res){\r\n                    Plan.query(function(res){\r\n                        scope.rows.splice(0, scope.rows.length);\r\n                        Array.prototype.push.apply(scope.rows, res.tasks);\r\n                    });\r\n                    $modalInstance.close();\r\n                });\r\n\t\t\t}\r\n        };\r\n        scope.close = function(){\r\n            $modalInstance.close();\r\n        };\r\n        // 对于增改来说，获取、设置当前 scope 值是必须的，这样保证提交数据的接口代码足够简单\r\n\t\tscope.getValues = function(){\r\n            // 这个值是要返回的，放在函数的第一行，更醒目\r\n            var data = {\r\n                'name': scope.data.name,\r\n                'desc': scope.data.desc,\r\n                'is_active': true,\r\n                'trigger_type': \"cron\",\r\n                'task_type': '',\r\n                'trigger_kwargs': {},\r\n                'instance': []\r\n            };\r\n            // 这个值很常用，建议封装为独立的方法\r\n            var week_days = scope.weeks.filter(function(item){ return item._selected }).map(function(item){ return item.id });\r\n            if(scope.data.off && scope.data.open){\r\n                data.task_type = 'bootup,shutdown';\r\n                data.trigger_kwargs.bootup = {\r\n                    \"week_days\": week_days,\r\n                    \"hour\": scope.data.openHouer,\r\n                    \"minute\": scope.data.openMinute,\r\n                    \"second\": 0\r\n                };\r\n                data.trigger_kwargs.shutdown = {\r\n                    \"week_days\": week_days,\r\n                    \"hour\": scope.data.offHouer,\r\n                    \"minute\": scope.data.offMinute,\r\n                    \"second\": 0\r\n                };\r\n            } else if (!scope.data.off && scope.data.open){\r\n                data.task_type = 'bootup';\r\n                data.trigger_kwargs.bootup = {\r\n                    \"week_days\": week_days,\r\n                    \"hour\": scope.data.openHouer,\r\n                    \"minute\": scope.data.openMinute,\r\n                    \"second\": 0\r\n                };\r\n            } else {\r\n                data.task_type = 'shutdown';\r\n                data.trigger_kwargs.shutdown = {\r\n                    \"week_days\": week_days,\r\n                    \"hour\": scope.data.offHouer,\r\n                    \"minute\": scope.data.offMinute,\r\n                    \"second\": 0\r\n                };\r\n            }\r\n            scope.modes.forEach(function(mode){\r\n                mode.desktops && mode.desktops.forEach(function(desktop){\r\n                    if(desktop._selected){\r\n                        data.instance.push(desktop.instance_extra_id);\r\n                    }\r\n                })\r\n            });\r\n            return data;\r\n\t\t};\r\n\t\tscope.setValues = function(planItem){\r\n            scope.data.name = planItem.name;\r\n            scope.data.desc = planItem.desc;\r\n            var bootupArgs = planItem.trigger_kwargs.bootup;\r\n            var shutdownArgs = planItem.trigger_kwargs.shutdown;\r\n            if(bootupArgs) {\r\n                scope.data.open = true;\r\n                scope.data.openHouer = bootupArgs.hour;\r\n                scope.data.openMinute = bootupArgs.minute;\r\n                scope.weeks.forEach(function(item){\r\n                    item._selected = bootupArgs.week_days.indexOf(item.id) > -1;\r\n                });\r\n            }\r\n            if(shutdownArgs) {\r\n                scope.data.off = true;\r\n                scope.data.offHouer = shutdownArgs.hour;\r\n                scope.data.offMinute = shutdownArgs.minute;\r\n                scope.weeks.forEach(function(item){\r\n                    item._selected = shutdownArgs.week_days.indexOf(item.id) > -1;\r\n                });\r\n\t\t\t}\r\n        };\r\n        // scope 状态初始化，如加载数据\r\n\t};\r\n}])\r\n.controller(\"vdiPlanSwitchController\", [\"$scope\", \"$modal\", \"Plan\", \"$$$I18N\", function($scope, $modal, Plan, $$$I18N){\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesize = Number($$$storage.getSessionStorage('plan_pagesize')) || 30;\r\n\t$scope.$watch(\"pagesize\" , function(newvalue){\r\n\t\t$scope.pagesize = newvalue || 0;\r\n        $$$storage.setSessionStorage('plan_pagesize', newvalue ? newvalue : 0);\r\n\t});\r\n\t$scope.loading = true;\r\n\r\n\tPlan.query(function(res){\r\n\t\t$scope.loading = false;\r\n\t\t$scope.rows = res.tasks;\r\n\t},function(err){\r\n\t\t$scope.loading = false;\r\n\t});\r\n\r\n\t$scope.active = function(plan){\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\tif(item.id == plan.id){\r\n\t\t\t\titem.active_loadding = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\tPlan.update({ id: plan.id, is_active: !plan.is_active }, function(res){\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == plan.id){\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t\titem.is_active = !plan.is_active;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, function(err){\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == plan.id){\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\tvar _controllerScope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar onrows = rows.filter(function(row){ return row.is_active; });\r\n\t\tvar offrows = rows.filter(function(row){ return !row.is_active; });\r\n\t\tif(rows.length == onrows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"DELE_PLAN_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_PLAN_T' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t\t$scope.name = offrows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tPlan.delete({ id: offrows.map(function(item){ return item.id }) },function(res){\r\n\t\t\t\t\t\t\tPlan.query(function(res){\r\n\t\t\t\t\t\t\t\t_controllerScope.rows.splice(0, _controllerScope.rows.length);\r\n\t\t\t\t\t\t\t\tArray.prototype.push.apply(_controllerScope.rows,res.tasks);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n}])\r\n\r\n.controller(\"addSwitchDialog\", [\"$scope\", \"$modalInstance\", \"Scene\", \"TeachDesktop\", \"Plan\", \"initPlanScope\", function($scope, $modalInstance, Scene, TeachDesktop, Plan, initPlanScope){\r\n\tinitPlanScope($scope, $modalInstance, Scene, TeachDesktop, Plan);\r\n\r\n    Scene.query(function(res){\r\n        $scope.modes = res.modes;\r\n        $scope.modes.forEach(function(item){\r\n            item.is_open = false;\r\n        });\r\n        $scope.modes_loading = false;\r\n    }, function(err){\r\n        $scope.modes_loading = false;\r\n    });\r\n}])\r\n.controller(\"editSwitchDialog\", [\"$scope\", \"$modalInstance\", \"Scene\", \"TeachDesktop\", \"Plan\", \"initPlanScope\", \"$$$I18N\", function($scope, $modalInstance, Scene, TeachDesktop, Plan, initPlanScope, $$$I18N){\r\n\tvar planItem = $scope.item || $scope.currentItem;\r\n    initPlanScope($scope, $modalInstance, Scene, TeachDesktop, Plan);\r\n    var filterPlanList = $scope.rows.filter(it => it.name != planItem.name);\r\n    $scope.setValues(planItem);\r\n    // 重写 $scope.ok\r\n\t$scope.ok = function(){\r\n        var data = $scope.getValues();\r\n        var flag = false;\r\n        data.id = planItem.id;\r\n        data.is_active = planItem.is_active;\r\n        if(data.task_type === 'bootup,shutdown' && $scope.data.openHouer == $scope.data.offHouer && $scope.data.openMinute == $scope.data.offMinute){\r\n            $.bigBox({\r\n                title\t: $$$I18N.get(\"INFOR_TIP\"),\r\n                content\t: $$$I18N.get(\"SCHEDUL_TIP\"),\r\n                timeout\t: 6000\r\n            });\r\n        } else {\r\n            filterPlanList.map(function(it){\r\n                if(it.name===data.name){\r\n                    flag = true;\r\n                }\r\n            })\r\n            if(flag){\r\n              $.bigBox({\r\n                  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                  content   : $$$I18N.get(\"SCHEDUL_SAME_NAME_TIPS\"),\r\n                  timeout   : 6000\r\n              });\r\n              return false;  \r\n            }\r\n            Plan.update(data, function(res){\r\n                Plan.query(function(res){\r\n                    $scope.rows.splice(0, $scope.rows.length);\r\n                    Array.prototype.push.apply($scope.rows, res.tasks);\r\n                });\r\n                $modalInstance.close();\r\n            });\r\n        }\r\n    };\r\n\t$scope.selectOne();\r\n\r\n    Scene.query(function(res){\r\n        $scope.modes = res.modes;\r\n        $scope.modes.forEach(function(item){\r\n            item.is_open = false;\r\n            planItem.instance.forEach(function(ins){\r\n                if(item.id == ins.mode_id){\r\n                    item.is_open = true;\r\n                    item.desktop_loading = true;\r\n                    TeachDesktop.query({id: ins.mode_id}, function(res){\r\n                        item.desktop_loading = false;\r\n                        item.desktops = res.result;\r\n                        item.desktops.forEach(function(d){\r\n                            var has_selected = ins.desktop.filter(function(instance){ return instance==d.instance_extra_id }).length;\r\n                            if(has_selected){\r\n                                d._selected = true;\r\n                                // d._own = true;\r\n                                // item.has_inTask = true;\r\n                                // item._own = true;\r\n                            }else{  }\r\n                        });\r\n                        item._selected = item.desktops.filter(function(d){ return d._selected }).length == item.desktops.length;\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        $scope.modes_loading = false;\r\n    }, function(err){\r\n        $scope.modes_loading = false;\r\n    });\r\n}])\r\n\r\n.controller(\"vdiHostPlanSwitchController\", [\"$scope\", \"$modal\", \"HostPlan\", \"$$$I18N\",function($scope, $modal, HostPlan, $$$I18N){\r\n    $scope.pagesizes = [10, 20, 30];\r\n\t$scope.pagesize = $scope.pagesizes[0];\r\n    $scope.currentPage = 1;\r\n\r\n    $scope.rows = [];\r\n    $scope.loading = true;\r\n\r\n    function getList(){\r\n        HostPlan.query(function(res){\r\n            $scope.loading = false;\r\n            $scope.rows = res.tasks;\r\n        },function(err){\r\n            $scope.loading = false;\r\n        });\r\n    }\r\n    getList();\r\n\r\n    $scope.add = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/plan/host_switch.html\",\r\n\t\t\tcontroller: \"addEditHostSwitchDialog\",\r\n            size: \"md\",\r\n            resolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(res){\r\n\t\t\tif(res){\r\n\t\t\t\tgetList();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t$scope.edit = function(){\r\n\t\tvar hostPlan = this.item || this.currentItem;\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl: \"views/vdi/dialog/plan/host_switch.html\",\r\n\t\t\tcontroller: \"addEditHostSwitchDialog\",\r\n\t\t\tscope: $scope,\r\n\t\t\tsize: \"md\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparams : function(){\r\n\t\t\t\t\treturn { hostPlan: angular.copy(hostPlan) };\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(data){\r\n\t\t\tif(data){\r\n\t\t\t\tgetList();\r\n\t\t\t}\r\n\t\t});\r\n    }\r\n    \r\n    $scope.active = function(plan){\r\n\t\t$scope.rows.forEach(function(item){\r\n\t\t\tif(item.id == plan.id){\r\n\t\t\t\titem.active_loadding = true;\r\n\t\t\t}\r\n        });\r\n\t\tHostPlan.active({ id: plan.id, action: !plan.enable?'enable':'disable' }, function(res){\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == plan.id){\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t\titem.enable = !plan.enable;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}, function(err){\r\n\t\t\t$scope.rows.forEach(function(item){\r\n\t\t\t\tif(item.id == plan.id){\r\n\t\t\t\t\titem.active_loadding = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n    }\r\n\r\n    $scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected; });\r\n\t\tvar onrows = rows.filter(function(row){ return row.enable; });\r\n\t\tvar offrows = rows.filter(function(row){ return !row.enable; });\r\n\t\tif(rows.length == onrows.length){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle\t: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent\t: $$$I18N.get(\"DELE_PLAN_TIP\"),\r\n\t\t\t\ttimeout\t: 6000\r\n\t\t\t});\r\n\t\t}\r\n\t\telse{\r\n\t\t\t$modal.open({\r\n\t\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' data-localize='删除确认'>\"+\r\n\t\t\t\t\t\t\"</h4></div><div class='modal-body'><form class='form-horizontal'><p style='margin-bottom:20px;' data-localize='DELETE_PLAN_T' param1='{{name}}'></p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' data-localize='确定'></button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'></button></footer></form></div></div></section>\",\r\n\t\t\t\tcontroller: function($scope, $modalInstance,$q){\r\n\t\t\t\t\t$scope.name = offrows.map(function(row){ return row.name }).join(', ');\r\n\t\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t\tHostPlan.delete({ id: offrows.map(function(item){ return item.id }) },function(res){\r\n\t\t\t\t\t\t\tgetList();\r\n\t\t\t\t\t\t},function(error){\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsize: \"sm\"\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n}])\r\n.controller(\"addEditHostSwitchDialog\", [\"$scope\", \"$modalInstance\", \"Plan\", \"weekdays\", \"AlarmPlicy\", \"HostPlan\",\"$$$I18N\",\"params\",function($scope, $modalInstance, Plan, weekdays, AlarmPlicy,HostPlan,$$$I18N,params){\r\n    $scope.min_namelength = 2;\r\n    $scope.max_namelength = 20;\r\n    $scope.weeks = weekdays();\r\n    $scope.data = {};\r\n    $scope.pools = [];\r\n    $scope.loading = true;\r\n    $scope.isEdit = params.hostPlan?true:false;\r\n\r\n    if(params.hostPlan){\r\n        setValues(params.hostPlan);\r\n        var hostID = params.hostPlan.targets.map(function(item){ return item.id });\r\n        AlarmPlicy.get_hosts(function(res){\r\n            $scope.loading = false;\r\n            $scope.pools = res.result.map(function(p){\r\n                p.hosts.forEach(function(h){\r\n                    if(hostID.indexOf(h.host_uuid) > -1){\r\n                        h._selected = true;\r\n                    }\r\n                    if(h.host_uuid=='-1' && params.hostPlan.trigger_kwargs.with_controller){\r\n                        h._selected = true;\r\n                    }\r\n                });\r\n                p._selected = p.hosts.length ? p.hosts.every(function(h){ return hostID.indexOf(h.host_uuid) > -1 || (h.host_uuid=='-1' && params.hostPlan.trigger_kwargs.with_controller)}) : false;\r\n                return p;\r\n            }).filter(function(p){\r\n                return p.hosts.length;\r\n            });\r\n            get_host_ids();\r\n        });\r\n    }else{\r\n        $scope.data = {open: false, off: false};\r\n        AlarmPlicy.get_hosts(function(res){\r\n            $scope.loading = false;\r\n            $scope.pools = res.result.filter(function(r){\r\n                return r.hosts.length;\r\n            });\r\n        });\r\n    }\r\n\r\n    \r\n    function setValues (planItem){\r\n        $scope.data.name = planItem.name;\r\n        $scope.data.description = planItem.description;\r\n        var bootupArgs = planItem.trigger_kwargs.bootup;\r\n        var shutdownArgs = planItem.trigger_kwargs.shutdown;\r\n        if(bootupArgs) {\r\n            $scope.data.open = true;\r\n            $scope.data.openHouer = bootupArgs.hour;\r\n            $scope.data.openMinute = bootupArgs.minute;\r\n            $scope.weeks.forEach(function(item){\r\n                item._selected = bootupArgs.week_days.indexOf(item.id) > -1;\r\n            });\r\n        }\r\n        if(shutdownArgs) {\r\n            $scope.data.off = true;\r\n            $scope.data.offHouer = shutdownArgs.hour;\r\n            $scope.data.offMinute = shutdownArgs.minute;\r\n            $scope.weeks.forEach(function(item){\r\n                item._selected = shutdownArgs.week_days.indexOf(item.id) > -1;\r\n            });\r\n        }\r\n    };\r\n    function get_host_ids(){\r\n        $scope.data.host_ids = $scope.pools.reduce(function(host_ids,pool){\r\n           pool.hosts.forEach(function(host){\r\n               if(host._selected){\r\n                   host_ids.push(host.host_uuid);\r\n               }\r\n           });\r\n           return host_ids;\r\n       },[]);\r\n   }\r\n    $scope.checkOne = function(pool){\r\n        pool._selected = pool.hosts.every(function(h){ return h._selected});\r\n        get_host_ids();\r\n    };\r\n    $scope.checkAll = function(pool){\r\n        pool.hosts.forEach(function(h){\r\n            h._selected = pool._selected;\r\n        });\r\n       get_host_ids();\r\n    };\r\n    $scope.selectAllWeek = function(selectAll){\r\n        $scope.weeks.forEach(function(item){ item._selected = selectAll; });\r\n    };\r\n    $scope.selectOneWeek = function(){\r\n        var selectNum = $scope.weeks.filter(function(item){ return item._selected; }).length;\r\n        if(selectNum === $scope.weeks.length){\r\n            $scope.selectAll = true;\r\n        } else {\r\n            $scope.selectAll = false;\r\n        }\r\n    };\r\n    $scope.checkWeek = function(){\r\n        return $scope.weeks.filter(function(item){ return item._selected }).length\r\n    };\r\n    $scope.$watch('data.open',function(newData, oldData, scope){\r\n        if(!newData){\r\n            scope.data.openHouer = undefined;\r\n            scope.data.openMinute = undefined;\r\n        }\r\n    });\r\n    $scope.$watch('data.off',function(newData, oldData, scope){\r\n        if(!newData){\r\n            scope.data.offHouer = undefined;\r\n            scope.data.offMinute = undefined;\r\n        }\r\n    });\r\n    function getValues(){\r\n        // 这个值是要返回的，放在函数的第一行，更醒目\r\n        var data = {\r\n            'name': $scope.data.name,\r\n            'description': $scope.data.description,\r\n            'enable': true,\r\n            'trigger_type': \"cron\",\r\n            'action': '',\r\n            'type': 'node',\r\n            'trigger_kwargs': {},\r\n            'targets': $scope.data.host_ids\r\n        };\r\n        var hasConsole = $scope.data.host_ids.filter(function(item){ return item=='-1' }).length;\r\n        if(hasConsole){ data.trigger_kwargs.with_controller=true }\r\n        else{ data.trigger_kwargs.with_controller=false }\r\n        // 这个值很常用，建议封装为独立的方法\r\n        var week_days = $scope.weeks.filter(function(item){ return item._selected }).map(function(item){ return item.id });\r\n        if($scope.data.off && $scope.data.open){\r\n            data.action = 'bootup,shutdown';\r\n            data.trigger_kwargs.bootup = {\r\n                \"week_days\": week_days,\r\n                \"hour\": $scope.data.openHouer,\r\n                \"minute\": $scope.data.openMinute,\r\n                \"second\": 0\r\n            };\r\n            data.trigger_kwargs.shutdown = {\r\n                \"week_days\": week_days,\r\n                \"hour\": $scope.data.offHouer,\r\n                \"minute\": $scope.data.offMinute,\r\n                \"second\": 0\r\n            };\r\n        } else if (!$scope.data.off && $scope.data.open){\r\n            data.action = 'bootup';\r\n            data.trigger_kwargs.bootup = {\r\n                \"week_days\": week_days,\r\n                \"hour\": $scope.data.openHouer,\r\n                \"minute\": $scope.data.openMinute,\r\n                \"second\": 0\r\n            };\r\n        } else {\r\n            data.action = 'shutdown';\r\n            data.trigger_kwargs.shutdown = {\r\n                \"week_days\": week_days,\r\n                \"hour\": $scope.data.offHouer,\r\n                \"minute\": $scope.data.offMinute,\r\n                \"second\": 0\r\n            };\r\n        }\r\n        return data;\r\n    };\r\n    $scope.ok = function(){\r\n        var data = getValues();\r\n        var flag = false;\r\n        if(data.action === 'bootup,shutdown' && $scope.data.openHouer == $scope.data.offHouer && $scope.data.openMinute == $scope.data.offMinute){\r\n            $.bigBox({\r\n                title\t: $$$I18N.get(\"INFOR_TIP\"),\r\n                content\t: $$$I18N.get(\"SCHEDUL_TIP\"),\r\n                timeout\t: 6000\r\n            });\r\n        } else {\r\n            // $scope.getPlanList.map(function(it){\r\n            //     if(it.name===data.name){\r\n            //         flag = true;\r\n            //     }\r\n            // })\r\n            if(flag){\r\n              $.bigBox({\r\n                  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                  content   : $$$I18N.get(\"SCHEDUL_SAME_NAME_TIPS\"),\r\n                  timeout   : 6000\r\n              });\r\n              return false;  \r\n            }\r\n            if(!params.hostPlan){\r\n                HostPlan.add({'data': data}, function(res){\r\n                    $modalInstance.close(res);\r\n                });\r\n            }else{\r\n                HostPlan.update({'id': params.hostPlan.id, 'data': data}, function(res){\r\n                    $modalInstance.close(res);\r\n                });\r\n            }\r\n            \r\n        }\r\n    };\r\n    $scope.close = function(){\r\n        $modalInstance.close();\r\n    }\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/plan/controllers.js","/**\r\n*  Module\r\n*\r\n* Description\r\n*/\r\nangular.module('vdi.HA', [])\r\n.factory('HA', ['$resource','$Domain', function($resource,$Domain){\r\n\treturn $resource($Domain + \"/thor/controller/ha\", null, {\r\n\t\tget_console_ha:\r\n\t\t\t{ method: \"GET\", url:$Domain + \"/thor/controller/ha\"},\r\n\t\tset_console_ha:\r\n\t\t\t{ method: \"PUT\",url: $Domain + \"/thor/controller/ha\"},\r\n\t\tquery:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/ha/instances\"},\r\n\t\tdelete:\r\n\t\t\t{ method: \"DELETE\", url: $Domain + \"/thor/ha/instances\",params:{ id:\"@id\" }},\r\n\t\tadd:\r\n\t\t\t{ method: \"POST\", url: $Domain + \"/thor/ha/instances\"},\r\n\t\tget:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/ha/instance/:id\",params:{ id:\"@id\"}},\r\n\t\tedit:\r\n\t\t\t{ method: \"PUT\", url: $Domain + \"/thor/ha/instance/:id\",params:{ id:\"@id\"}},\r\n\t\tconsole_ha_ping:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/ping\"},\r\n\t\tget_hosts:\r\n\t\t\t{ method: \"GET\", url: $Domain + \"/thor/ha/instance/get_vm_hosts\"}\r\n\t})\r\n}])\r\n.filter('filterChecked',function(){\r\n\treturn function(rows){\r\n\t\treturn rows.filter(function(item){\r\n\t\t\treturn item._checked;\r\n\t\t});\r\n\t}\r\n})\r\n.controller('vdiDesktopHAViewController', ['$scope','$modal','HA', function($scope,$modal,HA){\r\n\tvar haScope = $scope;\r\n\t$scope.currentPage = 1;\r\n\t$scope.pagesize = 30;\r\n\r\n\t\r\n\t$scope.get_list = function(){\r\n\t\tHA.query(function(res){\r\n\t\t\t$scope.rows = res.result;\r\n\t\t});\r\n\t};\r\n\t$scope.get_list();\r\n\t$scope.add = function(){\r\n\t\tvar dialog = $modal.open({\r\n\t\t\ttemplateUrl:'views/vdi/dialog/HA/new_ha.html',\r\n\t\t\tcontroller:'newDesktopHADialog',\r\n\t\t\tresolve:{\r\n\t\t\t\tparam:function(){\r\n\t\t\t\t\treturn haScope.rows\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdialog.result.then(function(){\r\n\t\t\tHA.query(function(res){\r\n\t\t\t\t$scope.rows = res.result;\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\t$scope.edit = function(item){\r\n\t\tvar modal = $modal.open({\r\n\t\t\ttemplateUrl:'views/vdi/dialog/HA/new_ha.html',\r\n\t\t\tcontroller:'editDesktopHADialog',\r\n\t\t\tresolve:{param:function(){\r\n\t\t\t\treturn {item:item,HaList:haScope.rows}\r\n\t\t\t}}\r\n\t\t});\r\n\t\tmodal.result.then(function(res){\r\n\t\t\tif(res){\r\n\t\t\t\tHA.query(function(res){\r\n\t\t\t\t\t$scope.rows = res.result;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\t$scope.view = function(item){\r\n\t\t$modal.open({\r\n\t\t\ttemplateUrl:'views/vdi/dialog/HA/view_ha.html',\r\n\t\t\tcontroller:\"viewDesktopHADialog\",\r\n\t\t\tresolve:{\r\n\t\t\t\tparam:function(){ return item }\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$scope.active = function(item){\r\n\t\titem.active_loadding = true;\r\n\t\tHA.edit({\r\n\t\t\t\"id\":item.id,\r\n\t\t\t\"enable_ha\":!item.enable_ha, \r\n\t\t\t\"action\":\"simple_update\"\r\n\t\t},function(res){\r\n\t\t\titem.enable_ha = !item.enable_ha;\r\n\t\t}).$promise.finally(function(){\r\n\t\t\titem.active_loadding = false;\r\n\t\t});\r\n\t};\r\n\tvar parentScope = $scope;\r\n\t$scope.delete = function(item){\r\n\t\tvar rows = item ? [item] : $scope.rows.filter(function(row){ return row._selected });\r\n\t\t$modal.open({\r\n\t\t\ttemplate: \"<section id='widget-grid'><div class='modal-content'><div class='modal-header'><button type='button' class='close' data-ng-click='close()'><span aria-hidden='true'>×</span><span class='sr-only'>Close</span></button><h4 class='modal-title' id='mySmallModalLabel' localize='删除HA策略'>\"+\r\n\t\t\t\t\t\"删除HA策略</h4></div><div class='modal-body'><form class='form-horizontal'><p  style='margin-bottom:20px;' localize='确定删除HA策略吗'>确定删除HA策略吗?</p><footer class='text-right'><button class='btn btn-primary' data-ng-click='ok()' localize='确定'>确定</button><button class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' localize='取消'>取消</button></footer></form></div></div></section>\",\r\n\t\t\t\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t\tHA.delete({\r\n\t\t\t\t\t\tids:rows.map(function(item){ return item.id })\r\n\t\t\t\t\t},function(res){\r\n\t\t\t\t\t\tparentScope.get_list();\r\n\t\t\t\t\t});\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t\t\r\n\t};\r\n}])\r\n.controller('newDesktopHADialog', ['$scope','$modalInstance','HA','ResourcePool','UserRole', 'Scene','PersonDesktop', \"param\", \"$$$I18N\",\r\n\tfunction($scope,$modalInstance,HA,ResourcePool,UserRole,Scene,PersonDesktop, param, $$$I18N){\r\n\t$scope.min_namelength=2;\r\n\t$scope.max_namelength=20;\r\n\tvar HaList = param;\r\n\t$scope.data = {\r\n\t\ttype_code:1,\r\n\t\tpriority:2,\r\n\t\tha_response_time: 60\r\n\t};\r\n\tvar _scope = $scope;\r\n\tvar allScenes = [];\r\n\tvar allInstances = [];\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.resources = res.result.filter(function(r){ return r.type === 'kvm'});\r\n\t\t$scope.data.resource_pool_id = $scope.resources[0] ? $scope.resources[0].id : undefined;\r\n\t\tHA.get({id:-1},function(res){\r\n\t\t\t$scope.ready = true;\r\n\t\t\tallScenes = res.unused_modes;\r\n\t\t\tallInstances = res.unused_vms;\r\n\t\t\t$scope.scenes = allScenes.filter(function(mode){ return mode.mode_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t\t$scope.instances = allInstances.filter(function(ins){ return ins.vm_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t\t$scope.data.scene = $scope.scenes[0];\r\n\t\t});\r\n\t});\r\n\r\n\t$scope.updateHaList = function(){\r\n\t\t$scope.scenes = allScenes.filter(function(mode){ return mode.mode_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t$scope.instances = allInstances.filter(function(ins){ return ins.vm_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t$scope.data.scene = $scope.scenes[0];\r\n\t};\r\n\r\n\tvar get_ins_ids = function(){\r\n\t\treturn $scope.instances.filter(function(ins){ return ins._used }).map(function(ins){ return ins.vm_id});\r\n\t};\r\n\t// var get_mode_ids = function(){\r\n\t// \treturn $scope.scenes.filter(function(scene){ return scene._used }).map(function(scene){ return scene.mode_id});\r\n\t// };\r\n\tvar get_host_names = function(){\r\n\t\treturn $scope.ha_hosts.filter(function(host){ return host._used}).map(function(host){ return host.name });\r\n\t};\r\n\r\n\t$scope.checked = function(key,alls){\r\n\t\t$scope.data[key] = alls.every(function(ins){ return Boolean(ins._used)});\r\n\t};\r\n\t$scope.checkedAll = function(key,alls){\r\n\t\tif(alls){\r\n\t\t\talls.forEach(function(item){\r\n\t\t\t\titem._used = Boolean($scope.data[key]);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$scope.next = function(){\r\n\t\t//新增时点击下一步再返回上一步，重置上次的操作\r\n\t\t$scope.data.selectAllHost = false;\r\n\t\tvar flag = false;\r\n\t\tHaList.forEach(function(it){\r\n\t\t\tif(it.name === _scope.data.name){\r\n\t\t\t\tflag = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(flag){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"HA_SAME_NAME_TIP\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$scope.data.step = 2;\r\n\t\tvar d = $scope.data;\r\n\t\tvar postData = {\r\n\t\t\tresource_pool_id:d.resource_pool_id,\r\n\t\t\ttype_code:d.type_code,\r\n\t\t\tinstance_ids:d.type_code == 2 ? get_ins_ids() : undefined,\r\n\t\t\tmode_ids: d.type_code == 1 ? [d.scene.mode_id] : undefined\r\n\t\t};\r\n\t\t$scope.host_ready = false;\r\n\t\t$scope.hosts = [];\r\n\t\t$scope.ha_hosts =[];\r\n\t\tHA.get_hosts(postData,function(res){\r\n\t\t\t$scope.host_ready = true;\r\n\t\t\t$scope.hosts = res.use_host_result;\r\n\t\t\t$scope.ha_hosts = Object.keys(res.host_result).map(function(key){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname:key,\r\n\t\t\t\t\tnum:res.host_result[key]\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar _ins_ids = get_ins_ids();\r\n\t\t// var _mode_ids = get_mode_ids();\r\n\t\tvar _host_names = get_host_names();\r\n\r\n\t\tvar d = $scope.data;\r\n\t\tvar postData = {\r\n\t\t\tname:d.name,\r\n\t\t\tdesc:d.desc,\r\n\t\t\tresource_pool_id:d.resource_pool_id,\r\n\t\t\ttype_code:d.type_code,\r\n\t\t\tinstance_ids:d.type_code == 2 ? _ins_ids : undefined,\r\n\t\t\tmode_ids: d.type_code == 1 ? [d.scene.mode_id] : undefined,\r\n\t\t\tpriority:d.priority,\r\n\t\t\tha_response_time:Number(d.ha_response_time),\r\n\t\t\thost_scope:_host_names,\r\n\t\t\tenable_ha:true\r\n\t\t};\r\n\t\t$scope.submiting = true;\r\n\t\tHA.add(postData,function(res){\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t\t$scope.get_list();\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('editDesktopHADialog', ['$scope','HA','$modalInstance','param','ResourcePool','$$$I18N', function($scope,HA,$modalInstance,param, ResourcePool,$$$I18N){\r\n\t$scope.min_namelength=2;$scope.max_namelength=20;\r\n\t$scope.data = angular.copy(param.item);\r\n\tvar _scope = $scope;\r\n\tvar filterHaList = param.HaList.filter(it => it.name != param.item.name);\r\n\tvar get_ins_ids = function(){\r\n\t\treturn $scope.instances.filter(function(ins){ return ins._used }).map(function(ins){ return ins.vm_id});\r\n\t};\r\n\t// var get_mode_ids = function(){\r\n\t// \treturn $scope.scenes.filter(function(scene){ return scene._used }).map(function(scene){ return scene.mode_id});\r\n\t// };\r\n\tvar get_host_names = function(){\r\n\t\treturn $scope.ha_hosts.filter(function(host){ return host._used}).map(function(host){ return host.name });\r\n\t};\r\n\tvar allScenes = [];\r\n\tvar allInstances = [];\r\n\tResourcePool.query(function(res){\r\n\t\t$scope.resources = res.result.filter(function(r){ return r.type === 'kvm'});\r\n\t\tHA.get({id:param.item.id},function(res){\r\n\t\t\t$scope.ready = true;\r\n\t\t\tallScenes = res.used_modes.map(function(item){ item._used = true;return item}).concat(res.unused_modes);\r\n\t\t\tallInstances = res.used_vms.map(function(item){ item._used = true;return item}).concat(res.unused_vms);\r\n\t\t\t$scope.scenes = allScenes.filter(function(mode){ return mode.mode_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t\t$scope.instances = allInstances.filter(function(ins){ return ins.vm_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t\t$scope.data.scene = $scope.scenes[0];\r\n\t\t});\r\n\t});\r\n\t$scope.updateHaList = function(){\r\n\t\t$scope.scenes = allScenes.filter(function(mode){ return mode.mode_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t$scope.instances = allInstances.filter(function(ins){ return ins.vm_resource_pool_id === $scope.data.resource_pool_id});\r\n\t\t$scope.data.scene = $scope.scenes[0];\r\n\t};\r\n\t\r\n\t$scope.checked = function(key,alls){\r\n\t\t$scope.data[key] = alls.every(function(ins){ return Boolean(ins._used)});\r\n\t};\r\n\t$scope.checkedAll = function(key,alls){\r\n\t\tif(alls){\r\n\t\t\talls.forEach(function(item){\r\n\t\t\t\titem._used = Boolean($scope.data[key]);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\t//编辑的时候是否为全选\r\n\t$scope.isSelectedAll = function(hosts){\r\n\t\tvar isAllchecked = false;\r\n\t\tisAllchecked = hosts.every(it => it._used);\r\n\t\treturn isAllchecked;\r\n\t}\r\n\r\n\t$scope.next = function(){\r\n\t\tvar flag = false, isAllchecked = false;\r\n\t\tfilterHaList.forEach(function(it){\r\n\t\t\tif(it.name === _scope.data.name){\r\n\t\t\t\tflag = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t\tif(flag){\r\n\t\t\t$.bigBox({\r\n\t\t\t\ttitle: $$$I18N.get(\"INFOR_TIP\"),\r\n\t\t\t\tcontent:$$$I18N.get(\"HA_SAME_NAME_TIP\"),\r\n\t\t\t\ttimeout:6000\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$scope.data.step = 2;\r\n\t\tvar d = $scope.data;\r\n\t\tvar postData = {\r\n\t\t\tresource_pool_id:d.resource_pool_id,\r\n\t\t\ttype_code:d.type_code,\r\n\t\t\tinstance_ids:d.type_code == 2 ? get_ins_ids() : undefined,\r\n\t\t\tmode_ids: d.type_code == 1 ? [d.scene.mode_id] : undefined\r\n\t\t};\r\n\t\t$scope.host_ready = false;\r\n\t\t$scope.hosts = [];\r\n\t\t$scope.ha_hosts =[];\r\n\t\tHA.get_hosts(postData,function(res){\r\n\t\t\t$scope.host_ready = true;\r\n\t\t\t$scope.hosts = res.use_host_result;\r\n\t\t\t$scope.ha_hosts = Object.keys(res.host_result).map(function(key){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname:key,\r\n\t\t\t\t\tnum:res.host_result[key],\r\n\t\t\t\t\t_used: d.load_host_scope[key] ? true : false\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t\tisAllchecked = $scope.isSelectedAll($scope.ha_hosts);\r\n\t\t\t$scope.data.selectAllHost = isAllchecked;\r\n\t\t});\r\n\t};\r\n\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n\t$scope.ok = function(){\r\n\t\tvar _this = this;\r\n\t\tvar _ins_ids = get_ins_ids();\r\n\t\t// var _mode_ids = get_mode_ids();\r\n\t\tvar _host_names = get_host_names();\r\n\r\n\t\tvar d = $scope.data;\r\n\t\tvar postData = {\r\n\t\t\tid:d.id,\r\n\t\t\tname:d.name,\r\n\t\t\tdesc:d.desc,\r\n\t\t\tresource_pool_id:d.resource_pool_id,\r\n\t\t\ttype_code:d.type_code,\r\n\t\t\tinstance_ids:d.type_code == 2 ? _ins_ids : undefined,\r\n\t\t\tmode_ids:d.type_code == 1 ? [d.scene.mode_id] : undefined,\r\n\t\t\tpriority:d.priority,\r\n\t\t\tha_response_time:Number(d.ha_response_time),\r\n\t\t\thost_scope:_host_names,\r\n\t\t\taction:\"update\",\r\n\t\t\tenable_ha:d.enable_ha\r\n\t\t};\r\n\t\t$scope.submiting = true;\r\n\t\tHA.edit(postData,function(res){\r\n\t\t\t$modalInstance.close(res);\r\n\t\t},function(){\r\n\t\t\t$modalInstance.close();\r\n\t\t}).$promise.finally(function(){\r\n\t\t\t$scope.submiting = false;\r\n\t\t\t$scope.get_list();\r\n\t\t});\r\n\t};\r\n}])\r\n.controller('viewDesktopHADialog', ['$scope', 'HA','$modalInstance','param',function($scope,HA,$modalInstance,param){\r\n\tHA.get({id:param.id},function(res){\r\n\t\t$scope.ready = true;\r\n\t\t$scope.data = res;\r\n\t});\r\n\t$scope.close = function(){\r\n\t\t$modalInstance.close();\r\n\t};\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/HA/controllers.js","angular.module(\"vdi.about\", [])\r\n.factory(\"permissionList\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/permission\", null, {\r\n        query: { method: \"GET\", isArray:false}\r\n    });\r\n}])\r\n.factory(\"pushlicenseFile\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/license/show\", null, {\r\n        update: { method: \"GET\", isArray:false}\r\n    });\r\n}])\r\n.service(\"desktopHelpBox\",[\"$$$I18N\", function($$$I18N){\r\n    var _this = this;\r\n    this.open = function(content, id, callback){\r\n        if(!$(\"#desktopHelpBox\").length){\r\n            $(\"body\").append(\"<div id='desktopHelpBox'></div>\");\r\n            $(\"body #desktopHelpBox\").append('<div class=\"modal-header\">'+\r\n                    '<button type=\"button\" class=\"close\"><span aria-hidden=\"true\">×</span><span class=\"sr-only\">Close</span></button>'+\r\n                    '<h4 class=\"modal-title\">'+ $$$I18N.get(\"桌面部署帮助\") +'</h4>'+\r\n                '</div>'+\r\n                '<div class=\"modal-body\">'+\r\n                    '<form class=\"form-horizontal\" novalidate>'+\r\n                        '<div class=\"form-group\">'+\r\n                            '<div class=\"col-xs-4\">'+\r\n                                '<select class=\"form-control type\">'+\r\n                                    '<option value=\"1\">'+ $$$I18N.get(\"教学桌面部署流程\") +'</option>'+\r\n                                    '<option value=\"2\">'+ $$$I18N.get(\"个人桌面部署流程\") +'</option>'+\r\n                                '</select>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<div class=\"form-group teach\">'+\r\n                            '<div class=\"col-xs-12\">'+\r\n                                '<div class=\"map\">'+\r\n                                    '<div>'+\r\n                                        '<div class=\"first\">'+\r\n                                            '<div style=\"margin-bottom: 40px;\">'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-028\"></i><br/><span title=\"'+ $$$I18N.get(\"新增资源池\") +'\">'+ $$$I18N.get(\"新增资源池\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-029\"></i><br/><span title=\"'+ $$$I18N.get(\"添加计算节点\") +'\">'+ $$$I18N.get(\"添加计算节点\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-030\"></i><br/><span title=\"'+ $$$I18N.get(\"新增分布式虚拟交换机\") +'\">'+ $$$I18N.get(\"新增分布式虚拟交换机\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-017\"></i><br/><span title=\"'+ $$$I18N.get(\"新增网络\") +'\">'+ $$$I18N.get(\"新增网络\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-classroom\"></i><br/><span title=\"'+ $$$I18N.get(\"新增教室\") +'\">'+ $$$I18N.get(\"新增教室\") +'</span></div>'+\r\n                                            '</div>'+\r\n                                            '<div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-Upload\"></i><br/><span title=\"'+ $$$I18N.get(\"上传安装包\") +'\">'+ $$$I18N.get(\"上传安装包\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-032\"></i><br/><span title=\"'+ $$$I18N.get(\"新增硬件模板\") +'\">'+ $$$I18N.get(\"新增硬件模板\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-Template\"></i><br/><span title=\"'+ $$$I18N.get(\"新增模板\") +'\">'+ $$$I18N.get(\"新增模板\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-034\"></i><br/><span title=\"'+ $$$I18N.get(\"加载gesttools\") +'\">'+ $$$I18N.get(\"加载gesttools\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-035\"></i><br/><span title=\"'+ $$$I18N.get(\"保存模板\") +'\">'+ $$$I18N.get(\"保存模板\") +'</span></div>'+\r\n                                            '</div>'+\r\n                                        '</div>'+\r\n                                        '<div class=\"help_arrow_big\"><div class=\"help_arrow nomargin\"><span class=\"tou\"></span></div></div>'+\r\n                                        '<div class=\"last\">'+\r\n                                            '<div class=\"icon\"><i class=\"fa-fw fa icon-036\"></i><br/><span title=\"'+ $$$I18N.get(\"新增教学场景\") +'\">'+ $$$I18N.get(\"新增教学场景\") +'</span></div>'+\r\n                                            '<div class=\"help_arrow down\"><span class=\"tou\"></span></div>'+\r\n                                        '</div>'+\r\n                                    '</div>'+\r\n                                    '<div class=\"second\">'+\r\n                                        '<div class=\"last\">'+\r\n                                            '<div class=\"icon\"><i class=\"fa-fw fa icon-037\"></i><br/><span title=\"'+ $$$I18N.get(\"激活场景\") +'\">'+ $$$I18N.get(\"激活场景\") +'</span></div>'+\r\n                                            '<div class=\"help_arrow down\"><span class=\"tou\"></span></div>'+\r\n                                        '</div>'+\r\n                                    '</div>'+\r\n                                    '<div class=\"third\">'+\r\n                                        '<div class=\"icon green\"><i class=\"fa-fw fa icon-jj-008\"></i><br/><span title=\"'+ $$$I18N.get(\"安装客户端\") +'\">'+ $$$I18N.get(\"安装客户端\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon\"><i class=\"fa-fw fa icon-031\"></i><br/><span title=\"'+ $$$I18N.get(\"为终端分配教室\") +'\">'+ $$$I18N.get(\"为终端分配教室\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon\"><i class=\"fa-fw fa icon-033\"></i><br/><span title=\"'+ $$$I18N.get(\"终端排序\") +'\">'+ $$$I18N.get(\"终端排序\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-IP\"></i><br/><span title=\"'+ $$$I18N.get(\"分配IP\") +'\">'+ $$$I18N.get(\"分配IP\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon green\"><i class=\"fa-fw fa icon-038\"></i><br/><span title=\"'+ $$$I18N.get(\"终端访问桌面\") +'\">'+ $$$I18N.get(\"终端访问桌面\") +'</span></div>'+\r\n                                    '</div>'+\r\n                                '</div>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                        '<div class=\"form-group personal\">'+\r\n                            '<div class=\"col-xs-12\">'+\r\n                                '<div class=\"map\">'+\r\n                                    '<div>'+\r\n                                        '<div class=\"first\">'+\r\n                                            '<div style=\"margin-bottom: 40px;\">'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-028\"></i><br/><span title=\"'+ $$$I18N.get(\"新增资源池\") +'\">'+ $$$I18N.get(\"新增资源池\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-029\"></i><br/><span title=\"'+ $$$I18N.get(\"添加计算节点\") +'\">'+ $$$I18N.get(\"添加计算节点\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-030\"></i><br/><span title=\"'+ $$$I18N.get(\"新增分布式虚拟交换机\") +'\">'+ $$$I18N.get(\"新增分布式虚拟交换机\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-017\"></i><br/><span title=\"'+ $$$I18N.get(\"新增网络\") +'\">'+ $$$I18N.get(\"新增网络\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-people\"></i><br/><span title=\"'+ $$$I18N.get(\"新增用户\") +'\">'+ $$$I18N.get(\"新增用户\") +'</span></div>'+\r\n                                            '</div>'+\r\n                                            '<div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-Upload\"></i><br/><span title=\"'+ $$$I18N.get(\"上传安装包\") +'\">'+ $$$I18N.get(\"上传安装包\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-032\"></i><br/><span title=\"'+ $$$I18N.get(\"新增硬件模板\") +'\">'+ $$$I18N.get(\"新增硬件模板\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-jj-Template\"></i><br/><span title=\"'+ $$$I18N.get(\"新增模板\") +'\">'+ $$$I18N.get(\"新增模板\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-034\"></i><br/><span title=\"'+ $$$I18N.get(\"加载gesttools\") +'\">'+ $$$I18N.get(\"加载gesttools\") +'</span></div>'+\r\n                                                '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                                '<div class=\"icon\"><i class=\"fa-fw fa icon-035\"></i><br/><span title=\"'+ $$$I18N.get(\"保存模板\") +'\">'+ $$$I18N.get(\"保存模板\") +'</span></div>'+\r\n                                            '</div>'+\r\n                                        '</div>'+\r\n                                        '<div class=\"help_arrow_big\"><div class=\"help_arrow nomargin\"><span class=\"tou\"></span></div></div>'+\r\n                                        '<div class=\"last\">'+\r\n                                            '<div class=\"icon\"><i class=\"fa-fw fa icon-036\"></i><br/><span title=\"'+ $$$I18N.get(\"新增个人桌面\") +'\">'+ $$$I18N.get(\"新增个人桌面\") +'</span></div>'+\r\n                                            '<div class=\"help_arrow down\"><span class=\"tou\"></span></div>'+\r\n                                        '</div>'+\r\n                                    '</div>'+\r\n                                    '<div class=\"third\">'+\r\n                                        '<div class=\"icon green\"><i class=\"fa-fw fa icon-jj-008\"></i><br/><span title=\"'+ $$$I18N.get(\"安装客户端\") +'\">'+ $$$I18N.get(\"安装客户端\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon green\"><i class=\"fa-fw fa icon-039\"></i><br/><span title=\"'+ $$$I18N.get(\"输入用户名密码\") +'\">'+ $$$I18N.get(\"输入用户名密码\") +'</span></div>'+\r\n                                        '<div class=\"help_arrow\"><span class=\"tou\"></span></div>'+\r\n                                        '<div class=\"icon green\"><i class=\"fa-fw fa icon-038\"></i><br/><span title=\"'+ $$$I18N.get(\"终端访问桌面\") +'\">'+ $$$I18N.get(\"终端访问桌面\") +'</span></div>'+\r\n                                    '</div>'+\r\n                                '</div>'+\r\n                            '</div>'+\r\n                        '</div>'+\r\n                    '</form>'+\r\n                '</div>');\r\n                if($$$I18N.get(\"GOD_VERSION\")=='cloudClassEn'){\r\n                    $('#desktopHelpBox').addClass('en')\r\n                }\r\n                $('#desktopHelpBox .personal').hide();\r\n            $('#desktopHelpBox .teach').show();\r\n            $$$storage.setSessionStorage(\"desktopHelpBox\", 'open');\r\n            var obj = document.getElementById('desktopHelpBox');\r\n            obj.style.left = (document.documentElement.clientWidth - obj.offsetWidth)/2 + 'px';\r\n            obj.style.top = (document.documentElement.clientHeight - obj.offsetHeight)/2 + 'px';\r\n            $('#desktopHelpBox select.type').change(function(e){\r\n                var value = e.target.value;\r\n                if(value=='1'){\r\n                    $('#desktopHelpBox .personal').hide();\r\n                    $('#desktopHelpBox .teach').show();\r\n                }else{\r\n                    $('#desktopHelpBox .personal').show();\r\n                    $('#desktopHelpBox .teach').hide();\r\n                }\r\n\r\n            })\r\n        }\r\n        function drag(obj) {\r\n            var d = document, x, y, maxLeft, maxTop;\r\n            var dragging = false;\r\n            if (typeof obj == \"string\") {\r\n                obj = document.getElementById(obj);\r\n                obj.orig_index = obj.style.zIndex;\r\n                maxLeft = document.documentElement.clientWidth - obj.offsetWidth;\r\n                maxTop = document.documentElement.clientHeight - obj.offsetHeight;\r\n                //设置当前对象永远显示在最上层\r\n            }\r\n            obj.onmousedown = function(a) {\r\n                //鼠标按下\r\n                this.style.cursor = \"move\";\r\n                //设置鼠标样式\r\n                if (!a) a = window.event;\r\n                //按下时创建一个事件\r\n                x = a.clientX - document.body.scrollLeft - obj.offsetLeft;\r\n                //x=鼠标相对于网页的x坐标-网页被卷去的宽-待移动对象的左外边距\r\n                y = a.clientY - document.body.scrollTop - obj.offsetTop;\r\n                //y=鼠标相对于网页的y左边-网页被卷去的高-待移动对象的左上边距\r\n                dragging = true;\r\n            }\r\n            obj.addEventListener(\"mousemove\", function(a) { //鼠标移动\r\n                if (!a) a = window.event; //移动时创建一个事件\r\n                if(!dragging) { return; }\r\n                var left = a.clientX + document.body.scrollLeft - x;\r\n                var top = a.clientY + document.body.scrollTop - y;\r\n                if(left<0) left = 0;\r\n                if(top<0) top = 0;\r\n                obj.style.left = left>maxLeft?maxLeft:left + 'px';\r\n                obj.style.top = top>maxTop?maxTop:top + 'px';\r\n            });\r\n            d.addEventListener(\"mouseup\", function() { //鼠标放开\r\n                obj.style.cursor = \"normal\"; //设置放开的样式\r\n                obj.style.zIndex = obj.orig_index;\r\n                dragging = false;\r\n            });\r\n        }\r\n        drag('desktopHelpBox')\r\n        $(\"#desktopHelpBox .close\").click(function(e){\r\n            $$$storage.setSessionStorage(\"desktopHelpBox\", 'unopen');\r\n            _this.close();\r\n        })\r\n    };\r\n    this.close = function(){\r\n        $(\"body #desktopHelpBox\") && $(\"body #desktopHelpBox\").remove();\r\n    }\r\n}])\r\n\r\n.controller(\"vdiAboutController\", [\"$scope\", \"$Domain\", function($scope,$Domain){\r\n}])\r\n\r\n.controller(\"vdiPermissionController\", [\"$scope\",\"$modal\",\"permissionList\",\"desktopHelpBox\",\"$Domain\",function($scope,$modal,permission_list,desktopHelpBox,$Domain){\r\n    $scope.domain = $Domain;\r\n    $scope.service_qq = [\"9714711\", \"330740825\"];\r\n    permission_list.query(function(res){\r\n    $scope.pmis = {\r\n        \"version\":res.version,\r\n        \"build\"  :res.build,\r\n        \"instance_num_quota\":res.instance_num_quota,\r\n        \"license_time\":res.license_time,\r\n        \"remain_days\":res.remain_days,\r\n        };\r\n    });\r\n    $scope.$on('test',function(event,data){\r\n    \t$scope.pmis = {\r\n    \t\t\"instance_num_quota\" : data.instnum,\r\n    \t\t\"build\" : data.build_version,\r\n    \t\t\"version\" : data.version,\r\n    \t\t\"license_time\" : data.time,\r\n            \"remain_days\" : data.remain_days,\r\n    \t}\r\n    })\r\n\r\n    /**\r\n     * [shutdown 一键关机]\r\n     */\r\n    $scope.shutdown=function(){\r\n        $modal.open({\r\n            size:\"sm\",\r\n            templateUrl:\"views/vdi/dialog/license/shutdown.html\",\r\n            backdrop:\"static\",\r\n            controller:function($scope, $modalInstance){\r\n                $scope.ok=function(){\r\n                    // About.query(function(){\r\n                        \r\n                    // });\r\n                    $modalInstance.close();\r\n                }\r\n                $scope.close=function(){\r\n                    $modalInstance.close();\r\n                }\r\n            }\r\n        })\r\n    }\r\n    $scope.help=function(){\r\n        desktopHelpBox.open();\r\n    }\r\n}])\r\n\r\n.controller(\"UpdateLicenseDialog\",[\"$scope\",\"$modalInstance\", \"$$$version\",\"$$$I18N\",\"$Domain\", function($scope,$modalInstance,$$$version, $$$I18N,$Domain){\r\n    $scope.ex={\r\n        url: $Domain + '/thor/license/export'\r\n    }\r\n    $scope.version = $$$version;\r\n    $scope.close=function(){\r\n        $modalInstance.close();\r\n    };\r\n    var encodeHTML = function(txt, con){\r\n        con = con || document.createElement(\"div\");\r\n        while(con.firstChild){\r\n            con.removeChild(con.firstChild);\r\n        }\r\n        return con.appendChild(con.ownerDocument.createTextNode(txt)).parentNode.innerHTML;\r\n    };\r\n    var format = function(tmpl){\r\n        var data = Array.prototype.slice.call(arguments, 0);\r\n        return typeof tmpl === \"string\" ? tmpl.replace(/\\{\\{([^\\}]+)?\\}\\}/g, function(match, param){\r\n            if(data[param]){\r\n                return encodeHTML(data[param]);\r\n            }\r\n            return match;\r\n        }) : \"\";\r\n    };\r\n\r\n    $scope.finishUpload = function(response){\r\n        var data = response.data;\r\n        switch(data.code){\r\n            case 0:\r\n                $modalInstance.close();\r\n                $.bigBox({\r\n                    title   : $$$I18N.get(\"授权更新成功\"),\r\n                    // 新的授权内容已生效，请关闭本窗口后刷新页面查看。\r\n                    content : $$$I18N.get(\"LICENSE_MESS_1\"),\r\n                    color   : \"#8ac38b\",\r\n                    icon    : \"fa fa-ok shake animated\",\r\n                    timeout : 6000\r\n                });\r\n                $scope.$emit('test',data);\r\n                break;\r\n            case -1:\r\n                $.bigBox({\r\n                    title   : $$$I18N.get(\"授权更新失败\"),\r\n                    // \"授权文件与服务器硬件ID不匹配，请确认后重新上传。\"\r\n                    content : $$$I18N.get(\"LICENSE_MESS_2\"),\r\n                    color   : \"#C46A69\",\r\n                    icon    : \"fa fa-warning shake animated\",\r\n                    timeout : 6000\r\n                });\r\n                break;\r\n            default :\r\n                $.bigBox({\r\n                    title   : $$$I18N.get(\"授权更新失败\"),\r\n                    // \"不是合法的授权文件格式或内容，请检查确认后重新上传。\"\r\n                    content : $$$I18N.get(\"LICENSE_MESS_3\"),\r\n                    color   : \"#C46A69\",\r\n                    icon    : \"fa fa-warning shake animated\",\r\n                    timeout : 6000\r\n                });\r\n        }\r\n    };\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/about/controllers.js","var views = {\"includes/header.html\":\"\\r\\n<div id=\\\"logo-group\\\"  data-ng-controller=\\\"LogoController\\\">\\r\\n\\r\\n\\t<!-- PLACE YOUR LOGO HERE -->\\r\\n\\t<span id=\\\"logo\\\" ng-class=\\\"{cloudPC: version == 'cloudPC',cloudClassEn: version == 'cloudClassEn',cloudClassCh: version == 'cloudClassCh',korean: version == 'korean'}\\\">\\r\\n\\t\\t<img key=\\\"header\\\" base64 alt=\\\"OS-EASY VDI\\\">\\r\\n\\t</span>\\r\\n\\t<!-- END LOGO PLACEHOLDER -->\\r\\n\\t<!--span data-ng-controller=\\\"ActivityDemoCtrl\\\">\\r\\n\\t\\t<activity data-onrefresh=\\\"refreshCallback\\\">\\r\\n\\t\\t\\t<activity:button data-icon=\\\"fa fa-user\\\" data-total=\\\"total\\\" />\\r\\n\\t\\t\\t<activity:content data-footer=\\\"footerContent\\\">\\r\\n\\t\\t\\t\\t<activity:item data-src=\\\"item.src\\\" data-onload=\\\"item.onload\\\" data-active=\\\"item.active\\\" data-ng-repeat=\\\"item in items\\\">\\r\\n\\t\\t\\t\\t\\t<span data-localize=\\\"{{ item.title }}\\\">{{ item.title }}</span> ({{ item.count }})\\r\\n\\t\\t\\t\\t</activity:item>\\r\\n\\t\\t\\t</activity:content>\\r\\n\\t\\t</activity>\\r\\n\\t</span-->\\r\\n</div>\\r\\n\\r\\n<!-- projects dropdown -->\\r\\n<!--div class=\\\"project-context hidden-xs\\\">\\r\\n\\t<span class=\\\"label\\\"><span data-localize=\\\"Projects\\\">Projects</span>:</span>\\r\\n\\t<span class=\\\"project-selector\\\" class=\\\"popover-trigger-element dropdown-toggle\\\" data-toggle=\\\"dropdown\\\"><span data-localize=\\\"Recent projects\\\">Recent projects </span> <i class=\\\"fa fa-angle-down\\\"></i></span>\\r\\n\\r\\n\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t<a href=\\\"javascript:void(0);\\\">Online e-merchant management system - attaching integration with the iOS</a>\\r\\n\\t\\t</li>\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t<a href=\\\"javascript:void(0);\\\">Notes on pipeline upgradee</a>\\r\\n\\t\\t</li>\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t<a href=\\\"javascript:void(0);\\\">Assesment Report for merchant account</a>\\r\\n\\t\\t</li>\\r\\n\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t<a href=\\\"javascript:void(0);\\\"><i class=\\\"fa fa-power-off\\\"></i> Clear</a>\\r\\n\\t\\t</li>\\r\\n\\t</ul>\\r\\n</div-->\\r\\n<!-- end projects dropdown -->\\r\\n\\r\\n<!-- pulled right: nav area -->\\r\\n<div class=\\\"pull-right\\\">\\r\\n\\t\\r\\n\\t<!-- collapse menu button -->\\r\\n\\t<!--div id=\\\"hide-menu\\\" class=\\\"btn-header pull-right\\\">\\r\\n\\t\\t<span> <a href=\\\"javascript:void(0);\\\" data-action=\\\"toggleMenu\\\" title=\\\"Collapse Menu\\\"><i class=\\\"fa fa-reorder\\\"></i></a> </span>\\r\\n\\t</div-->\\r\\n\\t<!-- end collapse menu -->\\r\\n\\r\\n\\t<!-- Skin Change -->\\r\\n\\t<div class=\\\"btn-header transparent pull-right\\\" data-ng-controller=\\\"SkinController\\\">\\r\\n\\t\\t<form class=\\\"skin_change\\\" id='skinHolder' action=\\\"javascript:\\\">\\r\\n\\t\\t\\t<label data-localize-title='皮肤一' id='skin0' data-ng-click=\\\"changeSkin('smart-style-0')\\\"></label>\\r\\n\\t\\t\\t<label data-localize-title='皮肤二' id='skin1' data-ng-click=\\\"changeSkin('smart-style-1')\\\"></label>\\r\\n\\t\\t</form>\\r\\n\\t</div>\\r\\n\\t<!-- Top menu profile link : this shows only when top menu is active -->\\r\\n\\t<!--ul id=\\\"mobile-profile-img\\\" class=\\\"header-dropdown-list hidden-xs padding-5\\\">\\r\\n\\t\\t<li class=\\\"\\\">\\r\\n\\t\\t\\t<a href=\\\"#\\\" class=\\\"dropdown-toggle no-margin userdropdown\\\" data-toggle=\\\"dropdown\\\"> \\r\\n\\t\\t\\t\\t<img src=\\\"img/avatars/sunny.png\\\" alt=\\\"John Doe\\\" class=\\\"online\\\" />  \\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<ul class=\\\"dropdown-menu pull-right\\\">\\r\\n\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0);\\\" class=\\\"padding-10 padding-top-0 padding-bottom-0\\\"><i class=\\\"fa fa-cog\\\"></i> Setting</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"#/misc/other/profile\\\" class=\\\"padding-10 padding-top-0 padding-bottom-0\\\"> <i class=\\\"fa fa-user\\\"></i> <u>P</u>rofile</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0);\\\" class=\\\"padding-10 padding-top-0 padding-bottom-0\\\" data-action=\\\"toggleShortcut\\\"><i class=\\\"fa fa-arrow-down\\\"></i> <u>S</u>hortcut</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0);\\\" class=\\\"padding-10 padding-top-0 padding-bottom-0\\\" data-action=\\\"launchFullscreen\\\"><i class=\\\"fa fa-arrows-alt\\\"></i> Full <u>S</u>creen</a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t<li>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"login.html\\\" class=\\\"padding-10 padding-top-5 padding-bottom-5\\\" data-action=\\\"userLogout\\\"><i class=\\\"fa fa-sign-out fa-lg\\\"></i> <strong><u>L</u>ogout</strong></a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t</li>\\r\\n\\t</ul-->\\r\\n\\r\\n\\r\\n\\t<!-- logout button -->\\r\\n\\t<div id=\\\"logout\\\" class=\\\"btn-header transparent pull-right\\\" data-ng-controller=\\\"pageHeaderController\\\">\\r\\n\\t\\t<a class=\\\"btn btn-primary logout\\\" ng-if=\\\"dmsURL!=='nodms'\\\" ng-href=\\\"{{ dmsURL }}\\\" target=\\\"_blank\\\" data-localize=\\\"切换到DMS\\\"></a>\\r\\n        <button class=\\\"btn btn-primary logout\\\" data-ng-click=\\\"logout()\\\" data-localize='退出系统'></button>\\r\\n\\t</div>\\r\\n\\t<!-- end logout button -->\\r\\n\\r\\n    <!-- User info -->\\r\\n    <div class=\\\"login-info-2 transparent pull-right\\\" data-ng-controller=\\\"userLoginInfoController\\\">\\r\\n        <span>Hi, {{ loginUser.name }}</span>\\r\\n    </div>\\r\\n\\r\\n\\t<div class=\\\"alarm pull-right\\\" data-ng-controller=\\\"AlarmController\\\" data-ng-click=\\\"open()\\\">\\r\\n\\t\\t<i class=\\\"fa icon-jj-011\\\"></i><span data-localize=\\\"消息\\\">消息</span><span class=\\\"number\\\">(<strong>{{ alarms.length }}</strong>)</span>\\r\\n\\t\\t<div class=\\\"modal-content\\\" data-ng-show=\\\"alarms.length!==0 && isOpen\\\">\\r\\n\\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t\\t<div class=\\\"modal-header\\\">\\r\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"close\\\" data-ng-click=\\\"close($event)\\\"><span aria-hidden=\\\"true\\\">×</span><span class=\\\"sr-only\\\">Close</span></button>\\r\\n\\t\\t\\t\\t<h4 class=\\\"modal-title\\\" style=\\\"color: #000;\\\" data-localize=\\\"消息\\\">消息</h4>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"modal-body\\\">\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_grid_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"序号\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"对象\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"内容\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_grid_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in alarms\\\" class=\\\"alarms\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ $index+1 }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.object }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"content\\\" title=\\\"{{ item.content }}\\\">{{ item.content }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.created_at | date: 'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<footer class=\\\"text-right\\\">\\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:\\\" class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"delete()\\\">清除消息</a>\\r\\n\\t\\t\\t\\t</footer>\\t\\t\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\r\\n\\t<!-- search mobile button (this is hidden till mobile view port) -->\\r\\n\\t<!--div id=\\\"search-mobile\\\" class=\\\"btn-header transparent pull-right\\\">\\r\\n\\t\\t<span> <a href=\\\"javascript:void(0)\\\" title=\\\"Search\\\"><i class=\\\"fa fa-search\\\"></i></a> </span>\\r\\n\\t</div-->\\r\\n\\t<!-- end search mobile button -->\\r\\n\\r\\n\\t<!-- input: search field -->\\r\\n\\t<!--form action=\\\"#/misc/search\\\" class=\\\"header-search pull-right\\\">\\r\\n\\t\\t<input id=\\\"search-fld\\\"  type=\\\"text\\\" name=\\\"param\\\" data-localize=\\\"Find reports and more\\\" placeholder=\\\"Find reports and more\\\" data-autocomplete='[\\r\\n\\t\\t\\\"ActionScript\\\",\\r\\n\\t\\t\\\"AppleScript\\\",\\r\\n\\t\\t\\\"Asp\\\",\\r\\n\\t\\t\\\"BASIC\\\",\\r\\n\\t\\t\\\"C\\\",\\r\\n\\t\\t\\\"C++\\\",\\r\\n\\t\\t\\\"Clojure\\\",\\r\\n\\t\\t\\\"COBOL\\\",\\r\\n\\t\\t\\\"ColdFusion\\\",\\r\\n\\t\\t\\\"Erlang\\\",\\r\\n\\t\\t\\\"Fortran\\\",\\r\\n\\t\\t\\\"Groovy\\\",\\r\\n\\t\\t\\\"Haskell\\\",\\r\\n\\t\\t\\\"Java\\\",\\r\\n\\t\\t\\\"JavaScript\\\",\\r\\n\\t\\t\\\"Lisp\\\",\\r\\n\\t\\t\\\"Perl\\\",\\r\\n\\t\\t\\\"PHP\\\",\\r\\n\\t\\t\\\"Python\\\",\\r\\n\\t\\t\\\"Ruby\\\",\\r\\n\\t\\t\\\"Scala\\\",\\r\\n\\t\\t\\\"Scheme\\\"]'>\\r\\n\\t\\t<button type=\\\"submit\\\">\\r\\n\\t\\t\\t<i class=\\\"fa fa-search\\\"></i>\\r\\n\\t\\t</button>\\r\\n\\t\\t<a href=\\\"javascript:void(0);\\\" id=\\\"cancel-search-js\\\" title=\\\"Cancel Search\\\"><i class=\\\"fa fa-times\\\"></i></a>\\r\\n\\t</form-->\\r\\n\\t<!-- end input: search field -->\\r\\n\\r\\n\\t<!-- fullscreen button -->\\r\\n\\t<!--div id=\\\"fullscreen\\\" class=\\\"btn-header transparent pull-right\\\">\\r\\n\\t\\t<span> <a href=\\\"javascript:void(0);\\\" data-action=\\\"launchFullscreen\\\" title=\\\"Full Screen\\\"><i class=\\\"fa fa-arrows-alt\\\"></i></a> </span>\\r\\n\\t</div-->\\r\\n\\t<!-- end fullscreen button -->\\r\\n\\r\\n\\t<!-- #Voice Command: Start Speech -->\\r\\n\\t<!--div id=\\\"speech-btn\\\" class=\\\"btn-header transparent pull-right hidden-sm hidden-xs\\\">\\r\\n\\t\\t<div> \\r\\n\\t\\t\\t<a href=\\\"javascript:void(0)\\\" title=\\\"Voice Command\\\" data-action=\\\"voiceCommand\\\"><i class=\\\"fa fa-microphone\\\"></i></a> \\r\\n\\t\\t\\t<div class=\\\"popover bottom\\\"><div class=\\\"arrow\\\"></div>\\r\\n\\t\\t\\t\\t<div class=\\\"popover-content\\\">\\r\\n\\t\\t\\t\\t\\t<h4 class=\\\"vc-title\\\">Voice command activated <br><small>Please speak clearly into the mic</small></h4>\\r\\n\\t\\t\\t\\t\\t<h4 class=\\\"vc-title-error text-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t<i class=\\\"fa fa-microphone-slash\\\"></i> Voice command failed\\r\\n\\t\\t\\t\\t\\t\\t<br><small class=\\\"txt-color-red\\\">Must <strong>\\\"Allow\\\"</strong> Microphone</small>\\r\\n\\t\\t\\t\\t\\t\\t<br><small class=\\\"txt-color-red\\\">Must have <strong>Internet Connection</strong></small>\\r\\n\\t\\t\\t\\t\\t</h4>\\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0);\\\" class=\\\"btn btn-success\\\" onclick=\\\"commands.help()\\\">See Commands</a> \\r\\n\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0);\\\" class=\\\"btn bg-color-purple txt-color-white\\\" onclick=\\\"$('#speech-btn .popover').fadeOut(50);\\\">Close Popup</a> \\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div-->\\r\\n\\t<!-- end voice command -->\\r\\n\\r\\n\\t<!-- multiple lang dropdown : find all flags in the image folder -->\\r\\n<!-- \\t<ul data-lang-menu=\\\"\\\" class=\\\"header-dropdown-list hidden-xs\\\" data-ng-controller=\\\"LangController\\\">\\r\\n\\t\\t<li>\\r\\n\\t\\t\\t<a href=\\\"\\\" class=\\\"dropdown-toggle\\\" data-toggle=\\\"dropdown\\\">\\r\\n\\t\\t\\t\\t<img alt=\\\"\\\" class=\\\"flag flag-{{ currentLang.flagCode }}\\\" src=\\\"img/blank.gif\\\"> <span> {{ currentLang.translation }} </span> <i class=\\\"fa fa-angle-down\\\"></i> \\r\\n\\t\\t\\t</a>\\r\\n\\t\\t\\t<ul class=\\\"dropdown-menu pull-right\\\">\\r\\n\\t\\t\\t\\t<li data-ng-class=\\\"{active: lang == currentLang}\\\" data-ng-repeat=\\\"lang in languages\\\">\\r\\n\\t\\t\\t\\t\\t<a href=\\\"\\\" data-ng-click=\\\"setLang(lang)\\\" ><img class=\\\"flag flag-{{ lang.flagCode }}\\\" src=\\\"img/blank.gif\\\" /> {{ lang.language }} ({{ lang.translation }}) </a>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t</li>\\r\\n\\t</ul> -->\\r\\n\\t<!-- end multiple lang -->\\r\\n\\r\\n</div>\\r\\n<!-- end pulled right: nav area -->\\r\\n<script type=\\\"text/javascript\\\">\\r\\n\\tvar skinHolder = document.querySelector(\\\"#skinHolder\\\");\\r\\n\\tvar skin0 = document.querySelector(\\\"#skin0\\\");\\r\\n\\tvar skin1 = document.querySelector(\\\"#skin1\\\");\\r\\n\\r\\n\\tskinHolder.addEventListener(\\\"click\\\",function(e){\\r\\n\\t\\tfor(var i=0; i<skinHolder.children.length; i++){\\r\\n\\t\\t\\tif(e.target == skin0 || e.target == skin1){\\r\\n\\t\\t\\t\\t$(document.body).removeClass('smart-style-' + i);\\r\\n\\t\\t\\t\\tif(i == skinHolder.children.length-1 && e.target == skin0){\\r\\n\\t\\t\\t\\t\\t$(document.body).addClass('smart-style-0');\\r\\n\\t\\t\\t\\t\\t$$$storage.setSessionStorage('current_theme', 'smart-style-0');\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tif(i == skinHolder.children.length-1 && e.target == skin1){\\r\\n\\t\\t\\t\\t\\t$(document.body).addClass('smart-style-1');\\r\\n\\t\\t\\t\\t\\t$$$storage.setSessionStorage('current_theme', 'smart-style-1');\\r\\n\\t\\t\\t\\t}\\t\\t\\t\\t\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t\\r\\n\\t\\t}\\r\\n\\r\\n\\t})\\r\\n</script>\",\"includes/left-panel.html\":\"\\r\\n<!-- end user info -->\\r\\n\\r\\n<!-- NAVIGATION : This navigation is also responsive\\r\\n\\r\\nTo make this navigation dynamic please make sure to link the node\\r\\n(the reference to the nav > ul) after page load. Or the navigation\\r\\nwill not initialize.\\r\\n-->\\r\\n\\r\\n<navigation>\\r\\n\\t<!--nav:item ng-repeat=\\\"nav in navs\\\" data-sublist=\\\"{{ nav.sublist }}\\\" data-view=\\\"{{nav.url}}\\\" data-icon=\\\"fa fa-lg fa-fw {{ nav.icon }}\\\" nav-title=\\\"{{ nav.value }}\\\" /-->\\r\\n\\t<nav:item ng-repeat=\\\"nav in navs\\\" data-view=\\\"{{nav.url}}\\\" data-icon=\\\"fa fa-lg fa-fw {{ nav.icon }}\\\" nav-title=\\\"{{ nav.value }}\\\">\\r\\n\\t\\t<nav:item data-ng-repeat=\\\"subnav in nav.sublist\\\" data-view=\\\"{{subnav.url}}\\\" nav-title=\\\"{{ subnav.value }}\\\" />\\r\\n\\t</nav:item>\\r\\n</navigation>\\r\\n<span class=\\\"minifyme\\\" data-action=\\\"minifyMenu\\\"> <i class=\\\"fa fa-arrow-circle-left hit\\\"></i> </span>\\r\\n\",\"includes/login.html\":\"<div class=\\\"login_wrapper\\\">\\r\\n\\t<p class=\\\"login_logo \\\" data-ng-if=\\\"current_theme =='smart-style-0'\\\"><img key=\\\"login_style0\\\" base64/></p>\\r\\n\\t<p class=\\\"login_logo \\\" data-ng-if=\\\"current_theme =='smart-style-1'\\\"><img key=\\\"login_style1\\\" base64/></p>\\r\\n\\r\\n\\t<form id=\\\"login-form\\\" class=\\\"smart-form\\\" novalidate>\\r\\n\\t\\t<table class=\\\"layout\\\">\\r\\n\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"input\\\"> <i class=\\\"icon-append fa fa-user\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"username\\\" maxlength=\\\"20\\\" data-ng-model=\\\"username\\\" required>\\r\\n\\t\\t\\t\\t\\t\\t<b class=\\\"tooltip tooltip-top-right\\\"><i class=\\\"fa fa-user txt-color-teal\\\"></i> <span localize=\\\"用户名\\\">用户名</span></b></label>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t<label class=\\\"input\\\"> <i class=\\\"icon-append fa fa-lock\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t<input type=\\\"password\\\" maxlength=\\\"20\\\" name=\\\"password\\\" data-ng-model=\\\"password\\\" required>\\r\\n\\t\\t\\t\\t\\t\\t<b class=\\\"tooltip tooltip-top-right\\\"><i class=\\\"fa fa-lock txt-color-teal\\\"></i> <span localize=\\\"密码\\\">密码</span></b> </label>\\r\\n\\t\\t\\t<!--div class=\\\"note\\\"><a href=\\\"forgotpassword.html\\\">Forgot password?</a></div-->\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t<button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" localize=\\\"登录\\\" ng-disabled=\\\"loading\\\" data-ng-click=\\\"login()\\\"></button>\\r\\n\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t</tr>\\r\\n\\t\\t</table>\\r\\n\\t</form>\\r\\n    <!--<div class=\\\"version\\\">Version 4.0</div>-->\\r\\n\\t<div class=\\\"copyright\\\">\\r\\n\\t\\t<!--<p>版权所有：武汉噢易云计算有限公司</p>-->\\r\\n\\r\\n        <p localize=\\\"噢易云计算\\\"></p>\\r\\n        <p><a data-localize-href=\\\"WEBSITE_login_a\\\" target=\\\"_blank\\\" data-localize=\\\"WEBSITE_init\\\"></a></p>\\r\\n\\t</div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"right_bottom\\\">Ver {{version}}</div><div id=\\\"hint_bar\\\" class=\\\"alert alert-warning fade in ng-hide\\\" ng-show=\\\"!$root.is_chrome\\\">\\r\\n\\t<button class=\\\"close\\\" data-dismiss=\\\"alert\\\">\\r\\n\\t×\\r\\n\\t</button>\\r\\n\\t<i class=\\\"fa-fw fa fa-warning\\\"></i>\\r\\n\\t<span localize='chromeTips'></span>\\r\\n</div>\",\"includes/monitor_panel.html\":\"<div class=\\\"portlet box grey\\\" >\\r\\n\\t<div class=\\\"portlet-title clearfix padding-5\\\" >\\r\\n\\t\\t<div class=\\\"pull-left\\\">\\r\\n\\t\\t\\t<a href=\\\"javascript:\\\" class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"collapAll()\\\"><i class=\\\"fa  icon-jj-Shrinkfrom\\\"></i> </a>\\r\\n\\t\\t\\t<a href=\\\"javascript:\\\"class=\\\"btn btn-default  btn-xs\\\"  ng-click=\\\"openAll()\\\"><i class=\\\"fa icon-jj-Open\\\"></i></a>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"pull-right\\\" ng-init=\\\"showSearch=false\\\" ng-click=\\\"showSearch?showSearch=false:showSearch=true\\\"><a href=\\\"javascript:\\\"class=\\\"btn btn-default  btn-xs\\\"><i class=\\\"fa fa-search\\\"></i></a></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"search\\\" ng-show=\\\"showSearch\\\"><input type=\\\"search\\\" maxlength=\\\"20\\\" localize=\\\"请输入搜索内容\\\" ng-model=\\\"searchText\\\"></div>\\r\\n\\t<div class=\\\"portlet-body fuelux\\\">\\r\\n\\t\\t<ul>\\r\\n\\t\\t\\t<li ng-repeat='item in rows' class='parent'>\\r\\n\\t\\t\\t\\t<a href='#' class='tree-toggle' ng-click=\\\"item.opened?item.opened=false:item.opened=true\\\"><em class='fa' ng-class=\\\"{'icon-jj-xiala':!item.opened,'icon-jj-sou':item.opened}\\\"></em>&nbsp;{{item.ip}}</a>\\r\\n\\t\\t\\t\\t<ul class='branch' ng-class=\\\"{in:item.opened}\\\">\\r\\n\\t\\t\\t\\t\\t<li ng-repeat='subitem in item.names |filter:searchText'> <a href='#' class='tree-toggle' > {{subitem}} </a> </li>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</li>\\r\\n\\t\\t</ul>\\r\\n\\t</div>\\r\\n</div>\",\"includes/pagination.html\":\"<div data-grid-pagination data-ng-show=\\\"($parent.totalCount || $parent.rows.length) > 0\\\" class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t<div class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\" data-localize=\\\"PAGE\\\" param1=\\\"{{ getStart() }}\\\" param2=\\\"{{ getEnd() }}\\\" param3=\\\"{{ $parent.totalCount || $parent.getFilterRows().length }}\\\"></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\ttotal-items=\\\"totalCount || getFilterRows().length\\\"\\r\\n\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\tdata-ng-model=\\\"$parent.currentPage\\\"\\r\\n\\t\\t\\t\\tdata-ng-change=\\\"pageChange()\\\"\\r\\n\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t></pagination>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\",\"includes/ribbon.html\":\"<!--span class=\\\"ribbon-button-alignment\\\">\\r\\n\\t<span\\r\\n\\t\\tid=\\\"refresh\\\"\\r\\n\\t\\tclass=\\\"btn btn-ribbon\\\"\\r\\n\\t\\tdata-action=\\\"resetWidgets\\\"\\r\\n\\t\\tdata-title=\\\"refresh\\\"\\r\\n\\t\\trel=\\\"tooltip\\\"\\r\\n\\t\\tdata-placement=\\\"bottom\\\"\\r\\n\\t\\tdata-original-title=\\\"<i class='text-warning fa fa-warning'></i> Warning! This will reset all your widget settings.\\\" data-html=\\\"true\\\" data-reset-msg=\\\"Would you like to RESET all your saved widgets and clear LocalStorage?\\\"><i class=\\\"fa fa-refresh\\\"></i></span>\\r\\n</span-->\\r\\n\\r\\n<!-- breadcrumb -->\\r\\n<breadcrumb>\\r\\n\\t<!-- This is auto generated -->\\r\\n</breadcrumb>\\r\\n<span class=\\\"ribbon-button-alignment pull-right\\\"><span data-localize=\\\"HELP\\\">Help</span>\\r\\n\\t<a href=\\\"javascript:void(0);\\\" rel=\\\"popover\\\" data-ribbon-tips data-placement=\\\"bottom\\\" data-html=\\\"true\\\" data-content=\\\"<ul>\\r\\n\\t\\t<li>注意文件名重复时将覆盖掉原先的备份。</li>\\r\\n\\t\\t<li>本功能只备份系统数据库。</li>\\r\\n\\t\\t</ul>\\\" data-original-title=\\\"\\\" title=\\\"\\\"><i class=\\\"fa fa-question-circle\\\"></i></a>\\r\\n</span>\\r\\n<!-- end breadcrumb -->\\r\\n\\r\\n<!-- You can also add more buttons to the\\r\\nribbon for further usability\\r\\n\\r\\nExample below:\\r\\n\\r\\n<span class=\\\"ribbon-button-alignment pull-right\\\">\\r\\n<span id=\\\"search\\\" class=\\\"btn btn-ribbon hidden-xs\\\" data-title=\\\"search\\\"><i class=\\\"fa-grid\\\"></i> Change Grid</span>\\r\\n<span id=\\\"add\\\" class=\\\"btn btn-ribbon hidden-xs\\\" data-title=\\\"add\\\"><i class=\\\"fa-plus\\\"></i> Add</span>\\r\\n<span id=\\\"search\\\" class=\\\"btn btn-ribbon\\\" data-title=\\\"search\\\"><i class=\\\"fa-search\\\"></i> <span class=\\\"hidden-mobile\\\">Search</span></span>\\r\\n</span> -->\",\"includes/shortcut.html\":\"<ul>\\r\\n\\t<!--li><a href=\\\"#/vdi/\\\" class=\\\"jarvismetro-tile big-cubes bg-color-blue\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">制作模版</span>\\r\\n\\t</span></a></li-->\\r\\n\\t<li><a href=\\\"#/desktop/personal\\\" class=\\\"jarvismetro-tile big-cubes bg-color-purple\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">查看个人桌面</span>\\r\\n\\t</span></a></li>\\r\\n\\t<!--li><a href=\\\"#/vdi/\\\" class=\\\"jarvismetro-tile big-cubes bg-color-blue\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">新增用户</span>\\r\\n\\t</span></a></li-->\\r\\n\\t<li><a href=\\\"#/user/common\\\" class=\\\"jarvismetro-tile big-cubes bg-color-orangeDark\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">查看所有用户</span>\\r\\n\\t</span></a></li>\\r\\n\\t<!--li><a href=\\\"javascript:\\\" data-ng-click=\\\"\\\" class=\\\"jarvismetro-tile big-cubes bg-color-purple\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">关闭所有终端</span>\\r\\n\\t</span></a></li-->\\r\\n\\t<li><a href=\\\"#/terminal/client\\\" class=\\\"jarvismetro-tile big-cubes bg-color-greenLight\\\"><span class=\\\"iconbox\\\">\\r\\n\\t\\t<i class=\\\"fa fa-envelope fa-4x\\\"></i>\\r\\n\\t\\t<span data-localize=\\\"\\\">查看所有终端</span>\\r\\n\\t</span></a></li>\\r\\n</ul>\",\"includes/tasklist.html\":\"<div id=\\\"PageBottomBar\\\" data-ng-controller=\\\"TaskListController\\\" style=\\\"display: none\\\">\\r\\n\\t<div class=\\\"progress_wrapper\\\">\\r\\n\\t\\t<div class=\\\"progress_resize_handler\\\" data-ng-click=\\\"toggleTaskList()\\\">\\r\\n\\t\\t\\t<i class=\\\"fa fa-reorder up_arrow\\\"></i>\\r\\n\\t\\t\\t<i class=\\\"fa fa-reorder down_arrow\\\"></i>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"progress_body row no-margin no-padding\\\">\\r\\n\\t\\t\\t<div class=\\\"progress_content\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"progress_list_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"序号\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作类型\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"对象名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"开始时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"结束时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作人员\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"状态\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"详细\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.id }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td><span data-localize=\\\"{{ item.task_type }}\\\"></span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">{{ item.task_target }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">{{ item.created_at | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">{{ item.task_time | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa  icon-jj-right txt-color-greenjj\\\" data-ng-if=\\\"item.status==1\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa icon-jj-wrong .txt-color-redjj\\\" data-ng-if=\\\"item.status==2\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<img data-ng-src=\\\"img/building.gif\\\" data-ng-if=\\\"item.status==0\\\" width=\\\"13\\\" height=\\\"13\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.task_exception }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n\",\"includes/userMenu.html\":\"<section class=\\\"dir-user-menu\\\">\\r\\n<!-- {{$scope.type}}\\r\\n<div>\\r\\n\\t<div class=\\\"col-xs-5 control-label text-center\\\">\\r\\n\\t\\t<label class=\\\"text-center\\\" localize=\\\"从下表选择一个或多个用户\\\">从下表选择一个或多个用户</label>\\r\\n\\t\\t{{$scope.type}}\\r\\n\\t</div>\\r\\n\\t<div class=\\\"col-xs-2\\\">&nbsp;</div>\\r\\n\\t<div class=\\\"col-xs-5 control-label text-center\\\">\\r\\n\\t\\t<label class=\\\"text-center\\\" localize=\\\"已选择用户\\\">已选择用户</label>\\r\\n\\t</div>\\r\\n</div> -->\\r\\n\\r\\n<div class=\\\"user-menus\\\">\\r\\n\\t<div>\\r\\n\\t\\t<label class=\\\"text-center\\\" localize=\\\"从下表选择一个或多个用户\\\">从下表选择一个或多个用户</label>\\r\\n\\t\\t<div class=\\\"dataTables_filter search\\\" style=\\\"float: right;\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t</div>\\t\\r\\n\\t<div class=\\\"menus\\\" style=\\\"width: 100%\\\">\\r\\n\\t\\t<ul class=\\\"menu menu-tree\\\" data-ng-repeat=\\\"item in _users track by $index\\\">\\r\\n\\t\\t\\t<div class=\\\"menu_header\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"fa icon-jj\\\"></span>\\r\\n\\t\\t\\t\\t<span>{{item.typeName}}</span>\\r\\n\\t\\t\\t\\t<span class=\\\"pull-right  fa icon-jj-add\\\" data-ng-click=\\\"add_selected(item.userData);$event.stopPropagation()\\\"></span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"menu_body\\\">\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<li class=\\\"menuitem\\\" data-ng-repeat=\\\"_user in (item.userData) | filter:searchText\\\" ng-click=\\\"add_select_rows($event,_user,item.userData)\\\" ng-dblclick=\\\"add_selected(_user)\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"text-overflow text-overflow-half\\\">{{_user.name}}</span><span class=\\\"text-overflow text-overflow-half\\\">{{_user.real_name}}</span>\\r\\n\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ul>\\r\\n\\t\\t<ul class=\\\"menu menu-tree\\\" data-ng-repeat=\\\"item in domain_users track by $index\\\">\\r\\n\\t\\t\\t<div class=\\\"menu_header\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"fa icon-jj\\\"></span>\\r\\n\\t\\t\\t\\t<span>{{item._name}}</span>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"menu_body\\\">\\r\\n\\t\\t\\t\\t<ul class=\\\"menu menu-tree\\\" data-ng-repeat=\\\"group in item.groups track by $index\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"menu_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"fa icon-jj\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"menu-name\\\">{{group.name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"pull-right  fa icon-jj-add\\\" data-ng-click=\\\"add_selected(group.users,$event)\\\"></span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"menu_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menuitem\\\" data-ng-repeat=\\\"user in group.users | filter:searchText\\\" ng-click=\\\"add_select_rows($event,user,group.users)\\\" ng-dblclick=\\\"add_selected(user)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"text-overflow text-overflow-half\\\" title=\\\"{{user.name}}\\\">{{user.name}}</span><span class=\\\"text-overflow text-overflow-half\\\">{{user.real_name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ul>\\r\\n\\t\\t<ul class=\\\"menu menu-tree\\\">\\r\\n\\t\\t\\t<div class=\\\"menu_header\\\">\\r\\n\\t\\t\\t\\t<span class=\\\"fa icon-jj\\\"></span>\\r\\n\\t\\t\\t\\t<span localize='普通用户'></span>\\r\\n\\t\\t\\t\\t<!-- <span class=\\\"pull-right  fa icon-jj-add\\\" data-ng-click=\\\"add_selected(item.userData);$event.stopPropagation()\\\"></span> -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"menu_body\\\">\\r\\n\\t\\t\\t\\t<tree-node-parent data-users='common_users' data-filtertext='searchText'></tree-node-parent>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ul>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"text-center operators\\\">\\r\\n\\t\\t<button  ng-disabled=\\\"seRows.length===0\\\" ng-click=\\\"ltor()\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"><i class=\\\"fa icon-jj-003\\\"></i></button>\\r\\n\\t\\t<button  ng-disabled=\\\"rmRows.length===0\\\" ng-click=\\\"rtol()\\\" type=\\\"button\\\" class=\\\"btn btn-default btn-xs\\\"><i class=\\\"fa icon-jj-002\\\"></i></button>\\r\\n\\t</div>\\r\\n\\t<!-- <label class=\\\"text-center\\\" localize=\\\"已选择用户\\\">已选择用户</label> -->\\r\\n\\t<div class=\\\"menus\\\" ng-class=\\\"{'menus-error': !selected.length}\\\">\\r\\n\\t\\t<ul class=\\\"menu menu-selected\\\">\\r\\n\\t\\t\\t<div class=\\\"menu_body\\\">\\r\\n\\t\\t\\t\\t<li class=\\\"menuitem\\\" data-ng-repeat=\\\"sitem in selected\\\" ng-click=\\\"add_remove_rows($event,sitem)\\\" ng-dblclick=\\\"remove_selected(sitem)\\\">\\r\\n\\t\\t\\t\\t\\t<span class=\\\"text-overflow text-overflow-half\\\">{{sitem.name}}</span><span class=\\\"text-overflow text-overflow-half\\\">{{sitem.real_name}}</span>\\r\\n\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</ul>\\r\\n\\t</div>\\r\\n</div>\\r\\n</section>\",\"views/vdi/about.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\t\\t\\r\\n\\t\\t<div class=\\\"col-xs-4 col-sm-4 col-md-4 col-lg-4\\\" style=\\\"padding:0px 0px 0px 40px\\\">\\r\\n\\t\\t\\t<header><h2><strong data-localize=\\\"ABOUT_NAME\\\"></strong> <br><small>{{pmis.build}}</small></h2></header>\\r\\n\\t\\t\\t<p data-localize='许可内容'></p>\\r\\n\\t\\t\\t<ul class=\\\"has-style\\\">\\r\\n\\t\\t\\t\\t<li data-localize='MAX_CONTECT' param1='{{pmis.instance_num_quota || 0}}'></li>\\r\\n\\t\\t\\t</ul>\\r\\n\\t\\t\\t<p ng-show=\\\"pmis.remain_days && pmis.remain_days<=10000\\\" class=\\\"font-sm license-alert license-alert-danger\\\" data-localize='PERIOD_TIME' param1='{{pmis.license_time}}' param2='{{pmis.remain_days}}'></p>        \\t\\r\\n\\t\\t\\t<p ng-show=\\\"pmis.remain_days && pmis.remain_days>10000\\\" class=\\\"font-sm license-alert license-alert-danger\\\" localize=\\\"无限期\\\"></p>\\r\\n\\t\\t\\t<a class=\\\"btn btn-sm btn-primary\\\" href=\\\"javascript:\\\" data-dialog=\\\"UpdateLicenseDialog\\\" data-dialog-url=\\\"license/addlicense.html\\\" data-dialog-size=\\\"md\\\" data-localize='更新授权'></a>\\r\\n\\t\\t\\t<table cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\" role=\\\"grid\\\" style=\\\"margin: 40px 0 40px 0;\\\" class=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t<th localize=\\\"组件名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t<th localize=\\\"备注\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t</thead>\\t\\r\\n\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t<td localize='Windows客户端1'></td>\\r\\n\\t\\t\\t\\t\\t\\t<td localize='安装在windows系统下的客户端'></td>\\r\\n\\t\\t\\t\\t\\t\\t<td><a class=\\\"btn btn-xs btn-default\\\" href=\\\"{{ domain }}/thor/download_win_client\\\" localize-title=\\\"下载\\\"><i class=\\\"fa icon-jj-Download\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t</table>\\r\\n\\r\\n\\t\\t\\t<button class=\\\"btn btn-default btn-sm\\\" ng-click=\\\"help()\\\" localize=\\\"桌面部署帮助\\\"></button>\\r\\n\\t\\t\\t<!--div class=\\\"col-md-12 col-sm-12 row\\\" style=\\\"padding-top: 10px;\\\">\\r\\n\\t\\t\\t\\t<h4><strong data-localize=\\\"售后服务\\\">售后服务</strong></h4>\\r\\n\\t\\t\\t\\t<h6><strong data-localize=\\\"在线客服\\\">在线客服</strong></h6>\\r\\n\\t\\t\\t\\t<p>\\r\\n\\t\\t\\t\\t\\t<a target=\\\"_blank\\\" ng-href=\\\"http://wpa.qq.com/msgrd?v=3&uin=188368715&site=qq&menu=yes\\\"><img border=\\\"0\\\" src=\\\"data:image/png;base64,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\\\"/></a>\\r\\n\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t<h6><strong data-localize=\\\"售后电话\\\">售后电话</strong></h6>\\r\\n\\t\\t\\t\\t<p>\\r\\n\\t\\t\\t\\t\\t<span>4001-027-580</span>\\r\\n\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t</div-->\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"col-xs-8 col-sm-8 col-md-8 col-lg-8\\\">\\t\\r\\n\\t\\t\\t<header><h2 class=\\\"text-center\\\"><strong data-localize='许可协议'></strong></h2></header>\\r\\n\\t\\t\\t<div class=\\\"xukexieyi\\\">\\r\\n\\t\\t\\t\\t<p style='text-indent:2em;' data-localize='ABOUT'></p>\\r\\n\\t\\t\\t\\t<ol>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT1'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT2'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT3'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT4'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT5'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT6'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT7'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT8'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT9'></li>\\r\\n\\t\\t\\t\\t\\t<li data-localize='ABOUT10'></li>\\r\\n\\t\\t\\t\\t </ol>\\r\\n\\t\\t\\t<div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n<style>\\r\\n\\t.xukexieyi p,ol>li{\\r\\n\\t\\tline-height:25px;\\r\\n\\t}\\r\\n</style>\",\"views/vdi/common/input-number-temp.html\":\"<div class =\\\"input-number-field-container\\\" >\\r\\n\\t<input ng-model=\\\"userNumber\\\" class=\\\"input-number-field-input\\\" ng-keydown=\\\"keydown($event)\\\" ng-blur=\\\"round()\\\" ng-change=\\\"setValidation()\\\" ui-input-number-formatter>\\r\\n\\t<span class=\\\"input-number-field-arrow\\\">\\r\\n\\t\\t<i class=\\\"input-number-add input-number-arrow\\\" ng-mousedown=\\\"add(this.addStep)\\\"></i>\\r\\n\\t\\t<i class=\\\"input-number-sub input-number-arrow\\\" ng-mousedown=\\\"add(-this.addStep)\\\"></i>\\r\\n\\t</span>\\r\\n<style type=\\\"text/css\\\">\\r\\n\\t.input-number-wraper-sm{\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\twidth: 60px;\\r\\n\\t}\\r\\n\\t.input-number-field-container{\\r\\n    \\tborder-color: #ccc;\\r\\n\\t\\tmin-width: 40px;\\r\\n\\t\\tbackground-color: #fff;\\r\\n\\t\\twidth:100%;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\tdisplay: -webkit-flex;\\r\\n\\t\\tborder-style: solid;\\r\\n\\t\\tborder-width: 1px;\\r\\n\\t}\\r\\n\\t.input-number-wraper-sm .input-number-field-container{\\r\\n\\t\\tpadding: 6px;\\r\\n\\t\\t-webkit-transition: all .2s linear;\\r\\n\\t}\\r\\n\\t.input-number-field-container:hover .input-number-field-arrow{\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n\\t.input-number-field-container .input-number-field-input{\\r\\n\\t\\tborder: none;\\r\\n\\t\\tbackground-color: transparent;\\r\\n\\t\\tborder-radius: none;\\r\\n\\t\\tline-height: 18px;\\r\\n\\t\\theight: 18px;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\t-webkit-flex:1;\\r\\n\\t\\tflex:1;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\tmargin-right: 2px;\\r\\n\\t}\\r\\n\\tinput[ui-input-number].ng-invalid+.input-number-field-container\\r\\n\\t{\\r\\n\\t\\tbackground: #fff0f0;\\r\\n    \\tborder-color: #A90329;\\r\\n\\t}\\r\\n\\t.input-number-field-container .input-number-field-input:focus~.input-number-field-arrow{\\r\\n\\t\\topacity: 1;\\r\\n\\t}\\r\\n\\t.input-number-field-container .input-number-field-arrow {\\r\\n\\t\\twidth: 15px;\\r\\n\\t\\theight: 18px;\\r\\n\\t\\tbackground-color: #F1F1F1;\\r\\n\\t\\tposition: relative;\\r\\n\\t\\t-webkit-user-select: none;\\r\\n\\t\\topacity: 0;\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow{\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\theight: 9px;\\r\\n\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow:active:hover{\\r\\n\\t\\tbackground-color: #D2D2D2;\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow:hover{\\r\\n\\t\\tbackground-color: #ccc;\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow.input-number-add{\\r\\n\\r\\n\\t\\ttop: 0px;\\r\\n\\t\\tright: 0px;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\ttext-align: center;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tline-height: 9px;\\r\\n\\t\\theight: 9px;\\r\\n\\t\\t\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow.input-number-sub{\\r\\n\\t\\tbottom: 0px;\\r\\n\\t\\tright: 0px;\\r\\n\\t\\twidth: 100%;\\r\\n\\t\\ttext-align: center;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tline-height: 9px;\\r\\n\\t\\theight: 9px;\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow.input-number-add:before{\\r\\n\\t\\tcontent: \\\"\\\";\\r\\n\\t    display: inline-block;\\r\\n\\t    border-bottom: 4px solid #505050;\\r\\n\\t    width: 8px;\\r\\n\\t    height: 8px;\\r\\n\\t    border-top: 4px solid transparent;\\r\\n\\t    border-left: 4px solid transparent;\\r\\n\\t    border-right: 4px solid transparent;\\r\\n\\t    margin: 0px 0px 3px 0px;\\r\\n\\t}\\r\\n\\t.input-number-field-arrow .input-number-arrow.input-number-sub:before{\\r\\n\\t\\tcontent: \\\"\\\";\\r\\n\\t    display: inline-block;\\r\\n\\t    border-top: 4px solid #505050;\\r\\n\\t    width: 8px;\\r\\n\\t    height: 8px;\\r\\n\\t    border-bottom: 4px solid transparent;\\r\\n\\t    border-left: 4px solid transparent;\\r\\n\\t    border-right: 4px solid transparent;\\r\\n\\t    margin: 3px 0px 0px 0px;\\r\\n\\t}\\r\\n\\t\\r\\n</style>\\r\\n</div>\\r\\n\\r\\n\",\"views/vdi/common/ui-web-upload.html\":\"<form action=\\\"javascript:\\\" enctype=\\\"multipart/form-data\\\" method=\\\"POST\\\">\\r\\n\\t<input name=\\\"iso\\\" type=\\\"file\\\" style=\\\"display:none\\\">\\r\\n\\t<button type=\\\"button\\\" ng-disabled=\\\"!disableTest || isUploading\\\" class=\\\"btn btn-primary\\\"><i class=\\\"icon icon-jj-Upload\\\"></i> {{btnName}}</button>\\r\\n</form>\\r\\n<div class=\\\"upload-progress\\\" ng-show=\\\"isUploading\\\">\\r\\n\\t<!-- 百分比 -->\\r\\n\\t<span class=\\\"progress-percent\\\">{{progressPercent}}</span>\\r\\n\\t<!-- 进度条 -->\\r\\n\\t<div class=\\\"progress progress-xs\\\">\\r\\n\\t\\t<div class=\\\"progress-bar bg-color-blue\\\" role=\\\"progressbar\\\" ng-style=\\\"{'width':progressPercent}\\\"></div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"upload-mess\\\">\\r\\n\\t\\t<div class=\\\"progress-word\\\">{{progressName}}{{progressSize}}</div>\\r\\n\\t</div>\\r\\n\\t<!-- 关闭按钮 -->\\r\\n\\t<span class=\\\"upload-cancel-icon icon  icon-jj-close-2\\\" id=\\\"abortBtn\\\"></span>\\r\\n</div>\",\"views/vdi/common/ui-web-upload2.html\":\"<form action=\\\"javascript:\\\" enctype=\\\"multipart/form-data\\\" method=\\\"POST\\\" class=\\\"left\\\">\\r\\n\\t<input name=\\\"iso\\\" type=\\\"file\\\" style=\\\"display:none\\\">\\r\\n\\t<button type=\\\"button\\\" ng-disabled=\\\"isUploading\\\" class=\\\"btn btn-xs btn-default\\\" title=\\\"{{btnName}}\\\"><i class=\\\"icon icon-jj-Upload\\\"></i></button>\\r\\n</form>\\r\\n<div class=\\\"upload-progress left\\\" ng-show=\\\"isUploading\\\">\\r\\n\\t<span class=\\\"upload-cancel-icon icon  icon-jj-close-2\\\" id=\\\"abortBtn\\\"></span>\\r\\n\\t<div class=\\\"upload-mess\\\"><span class=\\\"progress-word\\\">{{progressName}}{{progressSize}}</span><span class=\\\"progress-percent\\\">{{progressPercent}}</span></div>\\r\\n\\t<div class=\\\"progress progress-xs\\\"><div class=\\\"progress-bar bg-color-blue\\\" role=\\\"progressbar\\\" ng-style=\\\"{'width':progressPercent}\\\"></div></div>\\r\\n</div>\",\"views/vdi/desktop/personal.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-12\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span data-localize=\\\"选择用户\\\"></span>：&nbsp;&nbsp;\\r\\n                        <span class=\\\"myselectDepart\\\" data-ng-click='selectMode()' title=\\\"{{ depart.name }}\\\">{{ depart.name }}</span>&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<span localize=\\\"运行状态\\\">运行状态</span>：<select class=\\\"selectclassroomName filter\\\" ng-disabled='loading' ng-change=\\\"updateData(searchText,select,depart)\\\" ng-model=\\\"select\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" localize=\\\"全部状态\\\">全部</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"running\\\" localize=\\\"开机状态\\\">开机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"shutdown\\\" localize=\\\"关机状态\\\">关机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"paused\\\" localize=\\\"挂起状态\\\">挂起</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"nostate\\\" localize=\\\"未知\\\">未知</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"error\\\" localize=\\\"错误状态\\\">错误</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"other\\\" localize=\\\"其他\\\">其他</option>\\r\\n\\t\\t\\t\\t\\t\\t</select>&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n<!-- \\t\\t\\t\\t\\t\\t<span class=\\\"totalmess ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t param1=\\\"{{(rows | filter:searchText | filter:{status:select}).length + (rows | filter:searchText | filter:{other_status:'other'}).length}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param2=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'running'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param3=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'shutdown'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param4=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'paused'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param5=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'nostate'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param6=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'error'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param7=\\\"{{(rows | filter:searchText | filter:{other_status:'other'}).length }}\\\"></span> -->\\r\\n\\t\\t\\t\\t\\t\\t<span ng-if=\\\"select\\\" class=\\\"ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{other_status:'certain'}).length + (rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length}}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t<span ng-if=\\\"!select\\\" class=\\\"ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ (rows  | paging:currentPage:pagesize | filter:searchText | filter:{status:select}).length }}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t <span class='desktopStatistic' ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{other_status:'certain'}).length + (rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length\\\">\\r\\n\\t\\t\\t\\t\\t\\t \\t<span localize='桌面统计的其中'></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'running'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 running\\\" localize-title=\\\"开机状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'running'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'shutdown'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 shutdown\\\" localize-title=\\\"关机状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'shutdown'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'error'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 error\\\" localize-title=\\\"错误状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'error'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'paused'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 paused\\\" localize-title=\\\"挂起状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'paused'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'nostate'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 nostate\\\" localize-title=\\\"未知\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'nostate'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length\\\"><span class=\\\"status16 other\\\" localize-title=\\\"其他\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t </span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-8 col-sm-8\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\" data-dialog=\\\"newPersonDialog\\\" data-dialog-url=\\\"desktop/personal_new.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"开机\\\">开机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"关机\\\">关机</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" ><span localize=\\\"强制关机\\\">强制关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\"><span localize=\\\"自然关机\\\">自然关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\">重启</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"pause()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-pause\\\"></i>&nbsp;<span localize=\\\"挂起状态\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"resume()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Recovery\\\"></i>&nbsp;<span localize=\\\"唤醒\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne() || moveto_loading}\\\" data-ng-click=\\\"moveto()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-move-1\\\"></i>&nbsp;<span localize=\\\"移动至\\\">移动至</span>&nbsp;<img ng-if=\\\"moveto_loading\\\" style=\\\"position: relative;bottom: 2px\\\" width=\\\"14px\\\" height=\\\"14px\\\" ng-src=\\\"img/HLloading.gif\\\"></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-people\\\"></i>&nbsp;<span localize=\\\"域\\\">域</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"openAddDomainDialog()\\\" href=\\\"javascript:\\\" ><span localize=\\\"加域\\\">加域</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"personExitDomain()\\\" href=\\\"javascript:\\\"><span localize=\\\"退域\\\">退域</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne() || hasPausedStatus()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-4 col-sm-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"100\\\" placeholder=\\\"1-100\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" data-ng-model=\\\"pagesize\\\" ng-change=\\\"pageSizeChange()\\\" input-number><span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\"  class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select,depart)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-vertical-center table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"desktopSort\\\" ng-click=\\\"desktopSort = !desktopSort;sort('display_name', desktopSort)\\\" localize=\\\"桌面名\\\">桌面</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"runStatus\\\" ng-click=\\\"runStatus = !runStatus;sort('status', runStatus)\\\"  localize=\\\"运行状态\\\">运行状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><span localize=\\\"桌面\\\"></span>IP/MAC</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"user\\\" ng-click=\\\"user = !user;sort('user', user)\\\" localize=\\\"用户组/用户/姓名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"OS/模板\\\">OS/模板</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"CPU/内存/数据盘\\\">CPU/内存/数据盘</th>\\r\\n\\r\\n                                            <th><span localize=\\\"资源池\\\"></span>/<span localize=\\\"宿主机\\\"></span></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"登录终端名/IP\\\">登录终端名/IP</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-class=\\\"{'disabled':item.status === 'updating'}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-repeat-start=\\\"item in rows | filter:searchText | paging:currentPage:pagesize track by item.id\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-contextmenu\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-id=\\\"{{ item.id }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" type=\\\"checkbox\\\" ng-click=\\\"select_network(item,$index);\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{item.instance_id}}\\\">{{ item.display_name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.usb_redir || item.usb3_redir\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"fa icon-jj-usb flag-icon\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.mark_ha\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"fa icon-jj-HA flag-icon\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'share'\\\" data-localize-title=\\\"显卡共享\\\"><span class=\\\"fa icon-jj-025 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'through'\\\" data-localize-title=\\\"显卡直通\\\"><span class=\\\"fa icon-jj-026 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.status === 'updating'\\\" data-localize=\\\"正在更新\\\"></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-if=\\\"item.status=='running' && !item.task_state\\\" localize-title=\\\"开机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='shutdown' && !item.task_state\\\" localize-title=\\\"关机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='paused' && !item.task_state\\\" localize-title=\\\"挂起状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='nostate' && !item.task_state\\\" localize-title=\\\"未知状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(item.status=='error' && !item.task_state) || (item.status=='crashed' && !item.task_state)\\\" localize-title=\\\"错误状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.task_state\\\" title=\\\"{{ item.tips }}\\\" class=\\\"status32 building\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.running_time }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p>{{ item.ips }}</p><p>{{ item.mac }}</p></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p style=\\\"max-width: 200px;margin: auto;\\\" class='text-overflow' title=\\\"{{ item.user_group }}\\\">{{ item.user_group }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p style=\\\"max-width: 200px;margin: auto;\\\" class='text-overflow' title=\\\"{{ item.user }}\\\">{{ item.user }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p style=\\\"max-width: 200px;margin: auto;\\\" class='text-overflow' title=\\\"{{ item.real_name }}\\\">{{ item.real_name }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p><span class=\\\"status32\\\"><img ng-src=\\\"img/{{ item.icon || 'win7.png' }}\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.system }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.image_name }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.vcpu }} <span localize='核'></span> / {{item.memory_mb/1024 }}GB / {{ item.local_gb }}GB</td>\\r\\n\\r\\n                                            <td>\\r\\n                                            \\t<p>{{item.resource_pool_name}}</p>\\r\\n                                            \\t<p>{{item.hostname}}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if=\\\"linkTerminal && inCurrentUserPool(item.client_pool)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"#/terminal/client?client_pool={{ item.client_pool }}&ip={{item.client_ip}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.client_name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.client_ip }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if=\\\"!linkTerminal || !inCurrentUserPool(item.client_pool)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.client_name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.client_ip }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\"  data-ng-click=\\\"view(item)\\\" localize-title=\\\"查看桌面\\\" ng-disabled=\\\"item.status!=='running'\\\"><i class=\\\"fa icon-jj-look\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"!item._expand\\\"  data-ng-click=\\\"expand(item)\\\" localize-title=\\\"更多详情\\\"><i class=\\\"fa icon-jj-014\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"item._expand\\\" data-ng-click=\\\"expand(item)\\\" ><i class=\\\"fa icon-jj-015\\\"></i></button></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-show=\\\"item._expand\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"11\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"vtop-table\\\" ng-show=\\\"!loading_detail\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label localize=\\\"网络\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"网络\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9 margin-b-5\\\">{{item.detailData.network.name}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"子网\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\" ng-show=\\\"item.detailData.subnet_name\\\"><p class=\\\"margin-b-5\\\" >{{item.detailData.subnet_name}}({{item.detailData.allocation_pools[0].start}} ~ {{item.detailData.allocation_pools[0].end}})</p></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\" ng-show=\\\"!item.detailData.subnet_name\\\"><p  class=\\\"margin-b-5\\\" localize=\\\"不分配\\\"></p></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"width:30%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label localize=\\\"还原设置\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9 margin-b-5\\\">{{item.detailData.rollback_desc}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label ng-show=\\\"item.detailData.data_rollback!==null\\\" class=\\\"col-sm-3 text-right\\\"  localize=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-show=\\\"item.detailData.data_rollback!==null\\\" class=\\\"col-sm-9\\\"><p  class=\\\"margin-b-5\\\">{{item.detailData.data_rollback_desc}}</p></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"width:22%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label style=\\\"width: 41%;\\\" localize=\\\"域\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-5 text-right\\\"  localize=\\\"拟加入域\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-5 margin-b-5\\\" ng-show=\\\"item.detailData.ad_server_name\\\">{{item.detailData.ad_server_name}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-5 margin-b-5\\\" ng-show=\\\"!item.detailData.ad_server_name\\\" localize=\\\"无\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label data-localize=\\\"系统盘镜像\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.system_image_base track by key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9 margin-b-5\\\">{{key}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-show=\\\"getObjLength(item.detailData.inst_volumes.system_image_base)==0\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label data-localize=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.system_image track by key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9 margin-b-5\\\">{{key}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-show=\\\"getObjLength(item.detailData.inst_volumes.system_image)==0\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-3 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"vdi_expend-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label style=\\\"width: 41%;\\\" data-localize=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.data_image track by key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-5 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-5 margin-b-5\\\">{{key}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-show=\\\"getObjLength(item.detailData.inst_volumes.data_image)==0\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"col-sm-5 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-if=\\\"loading_detail\\\" style=\\\"min-height: 200px\\\"><img ng-src=\\\"img/HLloading.gif\\\"  height=\\\"32\\\" width=\\\"32\\\" alt=\\\"\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat-end></tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"(currentItem.status!=='shutdown' && currentItem.status!=='suspended') || currentItem.task_state\\\"  data-ng-click=\\\"start(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"开机\\\">开机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status!=='running' && currentItem.status!=='suspended'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ><span localize=\\\"关机\\\">关机</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"forceShutdown(currentItem)\\\" ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"natureShutdown(currentItem)\\\" ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"restart(currentItem)\\\"  ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"重启\\\">重启</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"pause(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='running' || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"挂起状态\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"resume(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='paused' || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"唤醒\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"delete(currentItem)\\\" ng-disabled=\\\"currentItem.status=='paused'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"删除\\\">删除</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\" data-dialog=\\\"alterPersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_alter.html\\\" data-error=\\\"关机状态才可进行桌面修改！\\\"  ng-disabled=\\\"currentItem.status!=='shutdown' || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"桌面修改\\\">桌面修改</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\"  data-dialog=\\\"saveTemplatePersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_save_template.html\\\" ng-disabled=\\\"currentItem.status!=='shutdown' || currentItem.task_state\\\" data-error=\\\"关机状态才可执行存为模板操作！\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"COPY_TEM\\\">另存为模板</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-show=\\\"currentItem.virtual_type === 'kvm'\\\" ng-disabled=\\\"currentItem.status!=='running' || currentItem.task_state || currentItem.enable_gpu\\\" data-ng-click=\\\"migration(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"动态迁移\\\">动态迁移</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-show=\\\"currentItem.virtual_type === 'kvm'\\\" ng-disabled=\\\"currentItem.status!=='shutdown' || currentItem.task_state\\\" data-ng-click=\\\"moveto(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"移动至\\\">移动至</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status!=='shutdown' || currentItem.task_state\\\" data-ng-model=\\\"currentItem\\\" data-dialog=\\\"snapshotPersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_snapshot.html\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"快照管理\\\">快照管理</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"!currentItem.is_domain_user || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"><span localize=\\\"域\\\">域</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.ad_server_name || !currentItem.is_domain_user || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ng-click=\\\"openAddDomainDialog(currentItem)\\\" localize=\\\"加域\\\" >加域</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"!currentItem.ad_server_name || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ng-click=\\\"personExitDomain(currentItem)\\\" localize=\\\"退域\\\">退域</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\",\"views/vdi/desktop/pool.html\":\"<section>\\r\\n    <div class=\\\"row\\\">\\r\\n        <article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n                <div class=\\\"noborder\\\">\\r\\n                    <div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n                    <div class=\\\"widget-body no-padding\\\">\\r\\n                        <div class=\\\"dt-toolbar\\\">\\r\\n                            <div class=\\\"left_side left-btn-group col-xs-6 col-sm-6\\\">\\r\\n                                <a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\"  data-dialog=\\\"newDeskPoolDialog\\\" data-dialog-url=\\\"desktop/newDeskPool.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></a>\\r\\n                                <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"桌面池开机\\\"></span></a>\\r\\n                                <div class=\\\"btn-group\\\">\\r\\n                                    <button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"> <i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"桌面池关机\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n                                    <ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa\\\"></i><span localize=\\\"强制关机\\\">强制关机</span></a></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa\\\"></i><span localize=\\\"自然关机\\\">自然关机</span></a></li>\\r\\n                                    </ul>\\r\\n                                </div>\\r\\n                                <a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n                            </div>\\r\\n                            <div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n                                <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"30\\\" class=\\\"mysmallinput\\\" type=\\\"number\\\" ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\" input-number><span localize=\\\"项结果\\\"></span> </div>\\r\\n                                <div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div class=\\\"table-responsive\\\">\\r\\n                            <table data-vdi-grid\\r\\n                                class=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n                                width=\\\"100%\\\">\\r\\n                                <thead class=\\\"vdi_header\\\">\\r\\n                                    <tr>\\r\\n                                        <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\r\\n                                        <th ng-model=\\\"poolNameSort\\\" ng-click=\\\"poolNameSort = !poolNameSort;sort('pool_name', poolNameSort)\\\" localize=\\\"名称\\\"></th>\\r\\n                                        <th localize=\\\"所属用户组\\\" ng-model=\\\"groupNameSort\\\" ng-click=\\\"groupNameSort = !groupNameSort;sort('user_group_name',groupNameSort) \\\"></th>\\r\\n                                        <th ng-model=\\\"resourcePoolNameSort\\\" ng-click=\\\"resourcePoolNameSort = !resourcePoolNameSort;sort('resource_pool_name', resourcePoolNameSort)\\\" localize=\\\"资源池\\\"></th>\\r\\n                                        <th localize=\\\"在线/桌面数\\\"></th>\\r\\n                                        <th localize=\\\"桌面模板\\\"></th>\\r\\n                                        <th localize=\\\"硬件模板\\\"></th>\\r\\n                                        <th localize=\\\"还原属性\\\"></th>\\r\\n                                    </tr>\\r\\n                                </thead>\\r\\n                                <tbody class=\\\"vdi_body\\\">\\r\\n                                    <tr ng-class=\\\"{'disabled':item.status === 'making' || item.status === 'updating' || item.status === 'setting-recoverable'}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize track by $index\\\"\\r\\n                                        data-contextmenu\\r\\n                                        data-id=\\\"{{ item.id }}\\\">\\r\\n                                        <td class=\\\"selectable\\\">\\r\\n                                            <label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label> </td>\\r\\n                                        <td>\\r\\n                                            <a href=\\\"#/desktop/poolList/{{item.id}}\\\">{{ item.pool_name }}</a>\\r\\n                                            <p ng-if=\\\"item.status === 'setting-recoverable'\\\" data-localize=\\\"正在设置还原\\\"></p>\\r\\n                                        </td>\\r\\n                                        <td>{{ item.user_group_name }}</td>\\r\\n                                        <td>{{ item.resource_pool_name }}</td>\\r\\n                                        <td>{{ item.online_count }} / {{ item.total_count }} </td>\\r\\n                                        <td>{{ item.image_name }}</td>\\r\\n                                        <td>{{ item.instance_type_name }}</td>\\r\\n                                        <td>\\r\\n                                            <p><span localize=\\\"系统盘\\\" class=\\\"text-right td-inside-laout\\\"></span><span class=\\\"text-left td-inside-laout\\\">{{item.rollback_desc}}</span></p>\\r\\n                                            <p ng-show=\\\"item.data_rollback!==null\\\"><span localize=\\\"数据盘\\\" class=\\\"text-right td-inside-laout\\\"></span><span class=\\\"text-left td-inside-laout\\\">{{item.data_rollback_desc}}</span></p>\\r\\n                                        </td>\\r\\n                                    </tr>\\r\\n                                </tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                        <div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n                        <div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n                        <div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <section class=\\\"context_wrapper\\\">\\r\\n                    <div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n                        <ul class=\\\"menu_item_list\\\">\\r\\n                            <li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.online_count > 0\\\" data-dialog=\\\"editPoolDialog\\\" data-dialog-url=\\\"desktop/pool_alter.html\\\" data-dialog-size=\\\"md\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"修改桌面池\\\"></a></li>\\r\\n                        </ul>\\r\\n                    </div>\\r\\n                </section>\\r\\n            </div>\\r\\n        </article>\\r\\n    </div>\\r\\n</section>\\r\\n\",\"views/vdi/desktop/poolList.html\":\"<section id=\\\"widget-grid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n                <div class=\\\"noborder\\\">\\r\\n                    <div class=\\\"widget-body no-padding\\\">\\r\\n                        <section class=\\\"dt-toolbar\\\">\\r\\n                            <div class=\\\"left_side left-btn-group col-xs-6 col-sm-6\\\">\\r\\n                                <a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/desktop/pool\\\"><i class=\\\" icon-jj-recovery fa\\\"></i>  &nbsp;<span  localize=\\\"返回\\\"></span></a>\\r\\n                                <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"开机\\\"></span></a>\\r\\n                                <div class=\\\"btn-group\\\">\\r\\n                                    <button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"关机\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n                                    <ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" ><span localize=\\\"强制关机\\\"></span></a></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\"><span localize=\\\"自然关机\\\"></span></a></li>\\r\\n                                    </ul>\\r\\n                                </div>\\r\\n                                <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\"></span></a>\\r\\n                                <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"pause()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-pause\\\"></i>&nbsp;<span localize=\\\"挂起状态\\\"></span></a>\\r\\n                                <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"resume()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Recovery\\\"></i>&nbsp;<span localize=\\\"唤醒\\\"></span></a>\\r\\n                            </div>\\r\\n                            <div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n                                <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" data-ng-model=\\\"pagesize\\\" ng-change=\\\"pageSizeChange()\\\" input-number><span localize=\\\"项结果\\\"></span> </div>\\r\\n                                <div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\"  class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n                            </div>\\r\\n                        </section>\\r\\n                        <div class=\\\"table-responsive\\\">\\r\\n                            <table\\r\\n                                class=\\\"table table-vertical-center table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n                                width=\\\"100%\\\">\\r\\n                                    <thead class=\\\"vdi_header\\\">\\r\\n                                        <tr>\\r\\n                                            <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n                                            <th ng-model=\\\"desktopSort\\\" ng-click=\\\"desktopSort = !desktopSort;sortDesktopName('display_name', desktopSort)\\\" localize=\\\"桌面名\\\"></th>\\r\\n                                            <th ng-model=\\\"runStatus\\\" ng-click=\\\"runStatus = !runStatus;sort('status', runStatus)\\\"  localize=\\\"运行状态\\\"></th>\\r\\n                                            <th localize=\\\"桌面IP/MAC\\\"></th>\\r\\n                                            <th><span localize=\\\"资源池\\\"></span>/<span localize=\\\"宿主机\\\"></span></th>\\r\\n                                            <th localize=\\\"登录终端名/IP\\\"></th>\\r\\n                                            <th localize=\\\"操作\\\"></th>\\r\\n                                        </tr>\\r\\n                                    </thead>\\r\\n                                    <tbody class=\\\"vdi_body\\\">\\r\\n                                        <tr ng-class=\\\"{'disabled':item.status === 'updating'}\\\"\\r\\n                                            data-ng-repeat-start=\\\"item in rows | filter:searchText | paging:currentPage:pagesize track by item.id\\\"\\r\\n                                            data-id=\\\"{{ item.id }}\\\">\\r\\n                                            <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" type=\\\"checkbox\\\" ng-click=\\\"select_network(item,$index);\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n                                            <td>    \\r\\n                                                <p title=\\\"{{item.instance_id}}\\\">{{ item.display_name }}</p>\\r\\n                                                <p ng-if=\\\"item.usb_redir || item.usb3_redir\\\">\\r\\n                                                    <span class=\\\"fa icon-jj-usb flag-icon\\\"></span>\\r\\n                                                </p>\\r\\n                                                <p ng-if=\\\"item.mark_ha\\\">\\r\\n                                                    <span class=\\\"fa icon-jj-HA flag-icon\\\"></span>\\r\\n                                                </p>\\r\\n                                                <p ng-if=\\\"item.gpu_type == 'share'\\\" data-localize-title=\\\"显卡共享\\\"><span class=\\\"fa icon-jj-025 flag-icon\\\"></span></p>\\r\\n                                                <p ng-if=\\\"item.gpu_type == 'through'\\\" data-localize-title=\\\"显卡直通\\\"><span class=\\\"fa icon-jj-026 flag-icon\\\"></span></p>\\r\\n                                                <p ng-if=\\\"item.status === 'updating'\\\" data-localize=\\\"正在更新\\\"></p>\\r\\n                                            </td>\\r\\n                                            <td><span ng-if=\\\"item.status=='running' && !item.task_state\\\" localize-title=\\\"开机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='shutdown' && !item.task_state\\\" localize-title=\\\"关机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='paused' && !item.task_state\\\" localize-title=\\\"挂起状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='nostate' && !item.task_state\\\" localize-title=\\\"未知状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(item.status=='error' && !item.task_state) || (item.status=='crashed' && !item.task_state)\\\" localize-title=\\\"错误状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.task_state\\\" title=\\\"{{ item.tips }}\\\" class=\\\"status32 building\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.running_time }}</p></td>\\r\\n                                            <td><p>{{ item.ips }}</p><p>{{ item.mac }}</p></td>\\r\\n                                            <td>\\r\\n                                                <p>{{item.resource_pool_name}}</p>\\r\\n                                                <p>{{item.hostname}}</p>\\r\\n                                            </td>\\r\\n                                            <td data-ng-if=\\\"linkTerminal && inCurrentUserPool(item.client_pool)\\\">\\r\\n                                                <a href=\\\"#/terminal/client?client_pool={{ item.client_pool }}&ip={{item.client_ip}}\\\">\\r\\n                                                    <p>{{ item.client_name }}</p>\\r\\n                                                    <p>{{ item.client_ip }}</p>\\r\\n                                                </a></td>\\r\\n                                            <td data-ng-if=\\\"!linkTerminal || !inCurrentUserPool(item.client_pool)\\\">\\r\\n                                                <p>{{ item.client_name }}</p>\\r\\n                                                <p>{{ item.client_ip }}</p></td>\\r\\n                                            <td>\\r\\n                                                <button class=\\\"btn btn-xs btn-default\\\"  data-ng-click=\\\"view(item)\\\" localize-title=\\\"查看桌面\\\" ng-disabled=\\\"item.status!=='running'\\\"><i class=\\\"fa icon-jj-look\\\"></i></button>\\r\\n                                                <button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"!item._expand\\\"  data-ng-click=\\\"expand(item)\\\" localize-title=\\\"更多详情\\\"><i class=\\\"fa icon-jj-014\\\"></i></button>\\r\\n                                                <button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"item._expand\\\" data-ng-click=\\\"expand(item)\\\" ><i class=\\\"fa icon-jj-015\\\"></i></button>\\r\\n                                            </td>\\r\\n                                        </tr>\\r\\n                                        <tr ng-show=\\\"item._expand\\\">\\r\\n                                            <td colspan=\\\"11\\\">\\r\\n                                                <table class=\\\"vtop-table\\\" ng-show=\\\"!loading_detail\\\">\\r\\n                                                    <tbody>\\r\\n                                                        <tr>\\r\\n                                                            <td>\\r\\n                                                                <div class=\\\"vdi_expend-wrap\\\">\\r\\n                                                                    <label localize=\\\"网络\\\"></label>\\r\\n                                                                    <div class=\\\"form-group clearfix\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"网络\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9 margin-b-5\\\">{{item.detailData.network.name}}</div>\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"子网\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9\\\" ng-show=\\\"item.detailData.subnet_name\\\"><p class=\\\"margin-b-5\\\" >{{item.detailData.subnet_name}}({{item.detailData.allocation_pools[0].start}} ~ {{item.detailData.allocation_pools[0].end}})</p></div>\\r\\n                                                                        <div class=\\\"col-sm-9\\\" ng-show=\\\"!item.detailData.subnet_name\\\"><p  class=\\\"margin-b-5\\\" localize=\\\"不分配\\\"></p></div>\\r\\n                                                                    </div>\\r\\n                                                                </div>\\r\\n                                                            </td>\\r\\n                                                            <td style=\\\"width:28%\\\">\\r\\n                                                                <div class=\\\"vdi_expend-wrap\\\">\\r\\n                                                                    <label localize=\\\"还原设置\\\"></label>\\r\\n                                                                    <div class=\\\"form-group clearfix\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"系统盘\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9 margin-b-5\\\">{{item.detailData.rollback_desc}}</div>\\r\\n                                                                        <label ng-show=\\\"item.detailData.data_rollback!==null\\\" class=\\\"col-sm-3 text-right\\\"  localize=\\\"数据盘\\\"></label>\\r\\n                                                                        <div ng-show=\\\"item.detailData.data_rollback!==null\\\" class=\\\"col-sm-9\\\"><p  class=\\\"margin-b-5\\\">{{item.detailData.data_rollback_desc}}</p></div>\\r\\n                                                                    </div>\\r\\n                                                                </div>\\r\\n                                                            </td>\\r\\n                                                        </tr>\\r\\n                                                        <tr>\\r\\n                                                            <td>\\r\\n                                                                <div class=\\\"vdi_expend-wrap\\\">\\r\\n                                                                    <label data-localize=\\\"系统盘镜像\\\"></label>\\r\\n                                                                    <div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.system_image_base track by key\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9 margin-b-5\\\">{{key}}</div>\\r\\n                                                                    </div>\\r\\n                                                                    <div ng-show=\\\"getObjLength(item.detailData.inst_volumes.system_image_base)==0\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n                                                                    </div>\\r\\n                                                                </div>\\r\\n                                                            </td>\\r\\n                                                            <td>\\r\\n                                                                <div class=\\\"vdi_expend-wrap\\\">\\r\\n                                                                    <label data-localize=\\\"系统盘\\\"></label>\\r\\n                                                                    <div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.system_image track by key\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9 margin-b-5\\\">{{key}}</div>\\r\\n                                                                    </div>\\r\\n                                                                    <div ng-show=\\\"getObjLength(item.detailData.inst_volumes.system_image)==0\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n                                                                    </div>\\r\\n                                                                </div>\\r\\n                                                            </td>\\r\\n                                                            <td style=\\\"width: 20%;\\\">\\r\\n                                                                <div class=\\\"vdi_expend-wrap\\\">\\r\\n                                                                    <label data-localize=\\\"数据盘\\\"></label>\\r\\n                                                                    <div class=\\\"form-group clearfix\\\" ng-repeat=\\\"(key,ids) in item.detailData.inst_volumes.data_image track by key\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"位置\\\"></label>\\r\\n                                                                        <div class=\\\"col-sm-9 margin-b-5\\\">{{key}}</div>\\r\\n                                                                    </div>\\r\\n                                                                    <div ng-show=\\\"getObjLength(item.detailData.inst_volumes.data_image)==0\\\">\\r\\n                                                                        <label class=\\\"col-sm-3 text-right\\\"  localize=\\\"无\\\"></label>\\r\\n                                                                    </div>\\r\\n                                                                </div>\\r\\n                                                            </td>\\r\\n                                                        </tr>\\r\\n                                                    </tbody>\\r\\n                                                </table>\\r\\n                                                <div ng-if=\\\"loading_detail\\\" style=\\\"min-height: 200px\\\"><img ng-src=\\\"img/HLloading.gif\\\"  height=\\\"32\\\" width=\\\"32\\\" alt=\\\"\\\"></div>\\r\\n                                            </td>\\r\\n                                        </tr>\\r\\n                                        <tr data-ng-repeat-end></tr>\\r\\n                                    </tbody>\\r\\n                            </table>\\r\\n                        </div>\\r\\n                        <div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n                        <div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n                        <div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </article>\\r\\n    </div>\\r\\n</section>\\r\\n\\r\\n\",\"views/vdi/desktop/scene.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-12\\\" style=\\\"padding-left: 8px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span data-localize=\\\"选择教室\\\"></span>&nbsp;&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" ng-model=\\\"select\\\" ng-change=\\\"updateData(searchText,select);cacheValue(select)\\\" ng-disabled=\\\"selectLoading\\\" data-ng-options=\\\"item.id as item.name for item in classrooms\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<option localize=\\\"所有教室\\\" value=''>所有教室</option>\\r\\n\\t\\t\\t\\t\\t\\t</select>&nbsp;&nbsp;<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"selectLoading\\\" height=\\\"12\\\" width=\\\"12\\\" alt=\\\"\\\" style=\\\"position: relative;bottom:4px\\\">&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ getTotalCount() }}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t<span class='desktopStatistic' ng-if=\\\"getTotalCount()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span localize='桌面统计的其中'></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<img ng-if=\\\"!getRunningCount() && !getShutdownCount() && !getErrorCount() && !getPausedCount() && !getNostateCount() && !getOtherCount()\\\" ng-src=\\\"img/HLloading.gif\\\" width=\\\"10\\\" height=\\\"10\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getRunningCount()\\\"><span class=\\\"status16 running\\\" localize-title=\\\"开机状态\\\"></span> {{ getRunningCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getShutdownCount()\\\"><span class=\\\"status16 shutdown\\\" localize-title=\\\"关机状态\\\"></span> {{ getShutdownCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getErrorCount()\\\"><span class=\\\"status16 error\\\" localize-title=\\\"错误状态\\\"></span> {{ getErrorCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getPausedCount()\\\"><span class=\\\"status16 paused\\\" localize-title=\\\"挂起状态\\\"></span> {{ getPausedCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getNostateCount()\\\"><span class=\\\"status16 nostate\\\" localize-title=\\\"未知\\\"></span> {{ getNostateCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"getOtherCount()\\\"><span class=\\\"status16 other\\\" localize-title=\\\"其他\\\"></span> {{ getOtherCount() }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\t\\t\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\" ng-disabled=\\\"!classrooms.length\\\"  data-dialog=\\\"newSceneDialog\\\" data-dialog-url=\\\"desktop/scene_new.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"场景桌面开机\\\">场景桌面开机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"> <i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"场景桌面关机\\\">场景桌面关机</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa\\\"></i><span localize=\\\"强制关机\\\">强制关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa\\\"></i><span localize=\\\"自然关机\\\">自然关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"sortScene()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!select||!rows.length}\\\"><i class=\\\"fa icon-jj-all\\\"></i>&nbsp;<span localize=\\\"场景排序\\\">场景排序</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"restartScene()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"场景桌面重启\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" class=\\\"mysmallinput\\\" type=\\\"number\\\" ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\" input-number><span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"sceneNameSort\\\" ng-click=\\\"sceneNameSort = !sceneNameSort;sort('name', sceneNameSort)\\\" localize=\\\"场景名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"资源池\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"schoolroomSort\\\" ng-click=\\\"schoolroomSort = !schoolroomSort;sort('schoolroom', schoolroomSort)\\\" localize=\\\"所属教室\\\">所属教室</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"schoolroomSort\\\" ng-click=\\\"schoolroomSort = !schoolroomSort;sort('active', schoolroomSort)\\\" localize=\\\"激活\\\">激活</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"在线/桌面数\\\">在线/桌面数</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"桌面模板\\\">桌面模板</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"硬件模板\\\">硬件模板</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"还原设置\\\">还原设置</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th >RDP</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"虚拟化类型\\\">虚拟化类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr style=\\\"height:100px;\\\" ng-class=\\\"{'disabled':item.status === 'making' || item.status === 'updating' || item.status === 'setting-recoverable'}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize track by $index\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-contextmenu\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-id=\\\"{{ item.id }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" ng-disabled=\\\"item.status=='making'\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label> </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-if=\\\"item.status === 'making'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/HLloading.gif\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p localize=\\\"场景创建中\\\">场景创建中</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-if=\\\"item.status === 'updating'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/HLloading.gif\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p localize=\\\"正在更新\\\"></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-if=\\\"item.status === 'setting-recoverable'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/HLloading.gif\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p localize=\\\"正在设置还原\\\"></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.status !== 'making' && item.status !== 'updating'  && item.status !== 'setting-recoverable'\\\"><a href=\\\"#/desktop/teach/{{item.id}}\\\" >{{ item.name }}</a></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.usb_redir || item.usb3_redir\\\"><span class=\\\"fa  icon-jj-usb flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.mark_ha\\\"><span class=\\\"fa  icon-jj-HA flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'share'\\\" data-localize-title=\\\"显卡共享\\\"><span class=\\\"fa icon-jj-025 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'through'\\\" data-localize-title=\\\"显卡直通\\\"><span class=\\\"fa icon-jj-026 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.resource_pool_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.schoolroom }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-show=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.active\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item.id,$event)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/HLloading.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.running_count }} / {{ item.instances_count }} </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.image_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.instance_type }}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><span localize=\\\"系统盘\\\" class=\\\"text-right td-inside-laout\\\">系统盘</span><span class=\\\"text-left td-inside-laout\\\">{{item.rollback_desc}}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-show=\\\"item.data_rollback!==null\\\"><span localize=\\\"数据盘\\\" class=\\\"text-right td-inside-laout\\\">数据盘</span><span class=\\\"text-left td-inside-laout\\\">{{item.data_rollback_desc}}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.is_exam\\\" localize=\\\"是\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"!item.is_exam\\\" localize=\\\"否\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.virtual_type}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-class=\\\"{disabled:currentItem.running_count==currentItem.instances_count}\\\" data-ng-click=\\\"start(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"场景桌面开机\\\">场景桌面开机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-class=\\\"{disabled:currentItem.running_count==0}\\\"><a class=\\\"menu_label\\\"  href=\\\"javascript:\\\" ><span localize=\\\"场景桌面关机\\\">场景桌面关机</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"forceShutdown(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"natureShutdown(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" onclick=\\\"return false;\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-class=\\\"{disabled:currentItem.running_count==0}\\\" data-ng-click=\\\"restartScene(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"场景桌面重启\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.active\\\"  data-ng-click=\\\"delete(currentItem)\\\"  ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"删除\\\">删除</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.running_count > 0\\\" data-dialog=\\\"alterSceneDialog\\\" data-dialog-url=\\\"desktop/sence_alter.html\\\" data-dialog-size=\\\"md\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"修改场景\\\">修改场景</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"><span localize=\\\"域\\\">域</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.ad_server\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ng-click=\\\"openAddDomainDialog(currentItem)\\\" localize=\\\"加域\\\" >加域</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"!currentItem.ad_server\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ng-click=\\\"sceneExitServerDialog(currentItem)\\\" localize=\\\"退域\\\">退域</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\",\"views/vdi/desktop/teach.html\":\"<section>\\r\\n\\t<!-- row -->\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<!-- Widget ID (each widget will need unique ID)-->\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span localize=\\\"运行状态\\\">运行状态</span>：<select class=\\\"selectclassroomName filter\\\" ng-disabled='loading' ng-change=\\\"updateData(searchText,select)\\\" ng-model=\\\"select\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" localize=\\\"全部状态\\\">全部</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"running\\\" localize=\\\"开机状态\\\">开机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"shutdown\\\" localize=\\\"关机状态\\\">关机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"paused\\\" localize=\\\"挂起状态\\\">挂起</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"nostate\\\" localize=\\\"未知\\\">未知</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"error\\\" localize=\\\"错误状态\\\">错误</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"other\\\" localize=\\\"其他\\\">其他</option>\\r\\n\\t\\t\\t\\t\\t\\t</select>&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<span ng-if=\\\"select\\\" class=\\\"ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{other_status:'certain'}).length + (rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length}}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t<span ng-if=\\\"!select\\\" class=\\\"ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ (rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select}).length }}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t <span class='desktopStatistic' ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{other_status:'certain'}).length + (rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length\\\">\\r\\n\\t\\t\\t\\t\\t\\t \\t<span localize='桌面统计的其中'></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'running'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 running\\\" localize-title=\\\"开机状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'running'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'shutdown'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 shutdown\\\" localize-title=\\\"关机状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'shutdown'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'error'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 error\\\" localize-title=\\\"错误状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'error'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'paused'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 paused\\\" localize-title=\\\"挂起状态\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'paused'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'nostate'} | filter:{other_status:'certain'}).length\\\"><span class=\\\"status16 nostate\\\" localize-title=\\\"未知\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{status:select} | filter:{status:'nostate'} | filter:{other_status:'certain'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length\\\"><span class=\\\"status16 other\\\" localize-title=\\\"其他\\\"></span> {{(rows | paging:currentPage:pagesize | filter:searchText | filter:{other_status:'other'}).length }} <span localize=\\\"个\\\"></span><span class=\\\"dohao\\\">, </span></span>\\r\\n\\t\\t\\t\\t\\t\\t </span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-3\\\">\\t\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_wrapper form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- toolbar -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"comment_mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"clearfix comment_mess_ul\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"场景名\\\">场景</span> :</label> {{res.mode_name}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"操作系统\\\">操作系统</span> :</label> {{rows[0].system}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"模板名\\\">模板</span> :</label> {{rows[0].image_name}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"CPU/内存/数据盘\\\">CPU/内存/数据盘</span> :</label> \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{rows[0] && rows[0].vcpu}}<span localize='核'>核</span>/ {{rows[0] && rows[0].memory_mb/1024}}GB / {{rows[0] && rows[0].local_gb}}GB</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"网络\\\">网络</span> :</label>{{rows[0].network.name}} <span ng-if=\\\"rows[0].network.cidr\\\">( {{rows[0].network.dhcp_start}}-{{rows[0].network.dhcp_end}} ) </span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"pull-left comment_mess_i\\\"><label class=\\\"lable_name\\\"><span localize=\\\"拟加入域\\\">拟加入域</span> :</label>{{res.ad_server_name}}</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group col-xs-8 col-sm-8\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/desktop/scene\\\"><i class=\\\" icon-jj-recovery fa\\\"></i>  &nbsp;<span  localize=\\\"返回\\\">返回</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"开机\\\">开机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i> &nbsp;<span localize=\\\"关机\\\">关机</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\">重启</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"pause()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-pause\\\"></i>&nbsp;<span localize=\\\"挂起状态\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"resume()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-Recovery\\\"></i>&nbsp;<span localize=\\\"唤醒\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"rename()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-edit\\\"></i>&nbsp;<span localize=\\\"修改桌面计算机名\\\">修改桌面计算机名</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne() || moveto_loading}\\\" data-ng-click=\\\"moveto()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-move-1\\\"></i>&nbsp;<span localize=\\\"移动至\\\">移动至</span>&nbsp;<img ng-if=\\\"moveto_loading\\\" style=\\\"position: relative;bottom: 2px\\\" width=\\\"14px\\\" height=\\\"14px\\\" ng-src=\\\"img/HLloading.gif\\\"></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"moveto()\\\" href=\\\"javascript:\\\"><i class=\\\"fa\\\"></i>&nbsp;<span localize=\\\"移动至\\\">移动至</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a> -->\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-4 col-sm-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\" input-number> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\"  class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- toolbar end -->\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"desktopSort\\\" ng-click=\\\"desktopSort = !desktopSort;sortDesktopName('display_name', desktopSort)\\\"  localize=\\\"桌面名\\\">桌面</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"runStatus\\\" ng-click=\\\"runStatus = !runStatus;sort('status', runStatus)\\\" localize=\\\"运行状态\\\">运行状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>IP/MAC</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"userName\\\" localize=\\\"桌面计算机名/用户名\\\">桌面计算机名/用户名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"宿主机\\\">宿主机</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th localize=\\\"当前域\\\">当前域</th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-contextmenu\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-id=\\\"{{ item.id }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.instance_id }}\\\">{{ item.display_name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p><span ng-if=\\\"item.usb_redir \\\" class=\\\"fa icon-jj-usb flag-icon\\\"></span><span class=\\\"icon-jj-HA flag-icon\\\" ng-if=\\\"item.needha\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.mark_ha\\\"><span class=\\\"fa  icon-jj-HA flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'share'\\\" data-localize-title=\\\"显卡共享\\\"><span class=\\\"fa icon-jj-025 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-if=\\\"item.gpu_type == 'through'\\\" data-localize-title=\\\"显卡直通\\\"><span class=\\\"fa icon-jj-026 flag-icon\\\"></span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-if=\\\"item.status=='running' && !item.task_state\\\" localize-title=\\\"开机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='shutdown' && !item.task_state\\\" localize-title=\\\"关机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='paused' && !item.task_state\\\" localize-title=\\\"挂起状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='nostate' && !item.task_state\\\" localize-title=\\\"未知状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"(item.status=='error' && !item.task_state) || (item.status=='crashed' && !item.task_state)\\\" localize-title=\\\"错误状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.task_state\\\" title=\\\"{{ item.tips }}\\\" class=\\\"status32 building\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.running_time }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{item.ips}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.mac }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td>{{ item.mode_name }}</td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{ item.vm_hostname }} <span ng-show=\\\"item.vm_hostname && item.vm_username\\\">/</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{ item.vm_username }}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.hostname }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td>{{ item.ad_domain_name }}</td> -->\\r\\n\\r\\n<!-- \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"view_personal_desktop\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\"  data-ng-click=\\\"view(item)\\\" localize-title=\\\"查看桌面\\\" ng-disabled=\\\"item.status!=='running'\\\"><i class=\\\"fa icon-jj-look\\\"></i></button></td>\\r\\n -->\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"view_personal_desktop\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"more_list_container more_list_container-right\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"item.status!=='running'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"view(item)\\\" href=\\\"javascript:void(0)\\\"><span data-localize=\\\"查看桌面\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"viewStorage(item)\\\" href=\\\"javascript:void(0)\\\"><span data-localize=\\\"存储详情\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"(currentItem.status!=='shutdown' && currentItem.status!=='suspended') || currentItem.task_state\\\"  data-ng-click=\\\"start(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"开机\\\">开机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ><span localize=\\\"关机\\\">关机</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"forceShutdown(currentItem)\\\" ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"natureShutdown(currentItem)\\\" ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"restart(currentItem)\\\"  ng-disabled=\\\"(currentItem.status!=='running' && currentItem.status!=='suspended') || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"重启\\\">重启</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"pause(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='running' || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"挂起状态\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"resume(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='paused' || currentItem.task_state\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"唤醒\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-click=\\\"delete(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"删除\\\">删除</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status=='paused' || currentItem.status=='running' || currentItem.task_state\\\" data-ng-click=\\\"reset(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"重置\\\">重置</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status=='paused' || currentItem.status=='running' || currentItem.task_state\\\" data-ng-click=\\\"alter(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"修改桌面计算机名\\\">修改桌面计算机名</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-show=\\\"currentItem.virtual_type === 'kvm'\\\" ng-disabled=\\\"currentItem.status!=='running' || currentItem.task_state || currentItem.enable_gpu\\\" data-ng-click=\\\"migration(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"动态迁移\\\">动态迁移</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-show=\\\"currentItem.virtual_type === 'kvm'\\\" ng-disabled=\\\"currentItem.status!=='shutdown' || currentItem.task_state\\\" data-ng-click=\\\"moveto(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"移动至\\\">移动至</a></li>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-click=\\\"view(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"查看桌面\\\">查看桌面</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-class=\\\"{disabled:currentItem.status}\\\" data-ng-click=\\\"start(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ng-disabled=\\\"currentItem.status!=='shutdown'\\\" localize=\\\"开机\\\">开机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label btn\\\" href=\\\"javascript:\\\" ng-disabled=\\\"currentItem.status!=='running'\\\"><span localize=\\\"关机\\\">关机</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label btn\\\"  ng-disabled=\\\"currentItem.status!=='running'\\\"  href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label btn\\\"  ng-disabled=\\\"currentItem.status!=='running'\\\"  href=\\\"javascript:\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"restart(currentItem)\\\"><a class=\\\"menu_label btn\\\" href=\\\"javascript:\\\" ng-disabled=\\\"currentItem.status!=='running'\\\" localize=\\\"重启\\\">重启</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"pause(currentItem)\\\"><a class=\\\"menu_label btn\\\" href=\\\"javascript:\\\" ng-disabled=\\\"currentItem.status!=='running'\\\" localize=\\\"暂停\\\">暂停</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"resume(currentItem)\\\"><a class=\\\"menu_label btn\\\" href=\\\"javascript:\\\" ng-disabled=\\\"currentItem.status!=='paused'\\\" localize=\\\"恢复\\\">恢复</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"delete(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"删除\\\">删除</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"view(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"查看桌面\\\">查看桌面</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/HA/desktop_ha.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n                                    <button class=\\\"btn btn-primary btn-xs\\\" ng-click=\\\"add()\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></button>\\r\\n                                    <button class=\\\"btn btn-danger btn-xs\\\" ng-click=\\\"delete()\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></button>\\r\\n                                    <!-- <button class=\\\"btn btn-danger btn-xs\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></button> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\"data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\r\\n                                        <th localize=\\\"策略名称\\\">策略名称</th>\\r\\n                                        <th localize=\\\"描述\\\">描述</th>\\r\\n\\r\\n                                        <th localize=\\\"优先级\\\">优先级</th>\\r\\n                                        <th localize=\\\"响应时间\\\">响应时间</th>\\r\\n\\r\\n                                        <th localize=\\\"启用状态\\\">启用状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n                                        <th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\r\\n                                        <td>{{item.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.desc}}</td>\\r\\n\\r\\n                                        <td>\\r\\n                                        \\t<span localize=\\\"低\\\" ng-if=\\\"item.priority == 1\\\"></span>\\r\\n                                        \\t<span localize=\\\"中\\\" ng-if=\\\"item.priority == 2\\\"></span>\\r\\n                                        \\t<span localize=\\\"高\\\" ng-if=\\\"item.priority == 3\\\"></span></td>\\r\\n                                        <td>{{item.ha_response_time}}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"item.enable_ha\\\" localize=\\\"启用\\\"></span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"!item.enable_ha\\\" localize=\\\"未启用\\\"></span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-if=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.enable_ha\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n                                        <td class=\\\"nowrap\\\"> \\r\\n                                        \\t<div>\\r\\n                                        \\t\\t<button localize-title='查看详情' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"view(item)\\\"><i class=\\\"fa icon-jj-look\\\"></i></button>\\r\\n                                        \\t\\t<button localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"edit(item)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n                                        \\t\\t<button localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n                                        \\t</div>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/monitor/alarm.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\"  href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-disabled=\\\"rows.length == 0\\\" data-ng-click=\\\"deleteAll()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Empty\\\"></i> <span data-localize=\\\"清空\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"number\\\" min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" class=\\\"mysmallinput\\\" input-number\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t/>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,null)\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"序号\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"objectSort\\\" ng-click=\\\"objectSort = !objectSort;sort('object', objectSort)\\\" data-localize=\\\"对象\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"内容\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"created_atSort\\\" ng-click=\\\"created_atSort = !created_atSort;sort('created_at', created_atSort)\\\" data-localize=\\\"时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ $index+1 }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.object }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.content }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.created_at | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/monitor/desktop.html\":\"<section class=\\\"col-xs-2 col-sm-2 col-md-3 col-lg-2\\\">\\r\\n    <div class=\\\"portlet box grey\\\"  data-monitor-tree> \\r\\n        <!-- 左侧栏列表 -->\\r\\n        <ul>\\r\\n            <li ng-repeat='item in items' class=\\\"parent\\\">\\r\\n                <div class=\\\"tree-host\\\">\\r\\n                    <a href='#' class='tree-toggle fa icon-jj-xiala' >\\r\\n                        <em class='fa'></em>\\r\\n                    </a>\\r\\n                    <a class=\\\"tree-it\\\">\\r\\n                        <em class=\\\"fa icon-jj-host\\\"></em>{{item.ip}}\\r\\n                    </a>\\r\\n                </div>\\r\\n                <ul class='tree-branch'>\\r\\n                    <li title=\\\"{{ subitem.name }}\\\" class=\\\"text-overflow\\\" ng-repeat='subitem in item.insts | reverse:searchText:\\\"name\\\"'> \\r\\n                        <a href='#' ng-click=\\\"change_server(subitem)\\\" class=\\\"tree-it\\\">\\r\\n                            <em ng-class=\\\"{running:true,shutoff:false}\\\"></em>{{subitem.name}} \\r\\n                        </a> \\r\\n                    </li>\\r\\n                </ul>\\r\\n            </li>\\r\\n        </ul>\\r\\n         <!-- 左侧栏列表结束 -->\\r\\n    </div>\\r\\n</section>\\r\\n\\r\\n<section class=\\\" col-xs-10 col-sm-10 col-md-9 col-lg-10\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12\\\">\\r\\n            <ul class=\\\"monitor-mess  clearfix\\\">\\r\\n                <li><label data-localize=\\\"桌面名\\\"></label>： {{cur_instance.name}}</li>\\r\\n                <li><label data-localize=\\\"桌面编号\\\"></label>： {{cur_instance.id}}</li>\\r\\n                <li><label data-localize=\\\"桌面类型\\\"></label>：\\r\\n                     <span ng-if=\\\"cur_instance.vm_type===1\\\" localize=\\\"教学桌面\\\"></span>\\r\\n                     <span ng-if=\\\"cur_instance.vm_type===2\\\" localize=\\\"个人桌面\\\"></span>\\r\\n                </li>\\r\\n                <li><label data-localize=\\\"状态\\\"></label>：\\r\\n                    <span ng-show=\\\"cur_instance.status=='running'\\\" localize=\\\"开机状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='shutdown'\\\" localize=\\\"关机状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='paused'\\\" localize=\\\"挂起状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='migrating'\\\" localize=\\\"迁移状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='building'\\\" localize=\\\"创建中状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='error'\\\" localize=\\\"错误状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='crashed'\\\" localize=\\\"异常状态\\\"></span>\\r\\n                    <span ng-show=\\\"cur_instance.status=='nostate'\\\" localize=\\\"未知异常状态\\\"></span>\\r\\n                </li>\\r\\n            </ul>        \\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12 col-lg-6\\\">\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2><span data-localize=\\\"CPU占用率\\\"></span> ({{item.name}})</h2>\\r\\n                    <!-- <div class=\\\"pull-right\\\" style=\\\"line-height:32px;margin-right: 10px;\\\">\\r\\n                        <img src=\\\"../../../img/loading.gif\\\" width=\\\"16px\\\" height=\\\"16px\\\" ng-show=\\\"loading\\\"/> 刷新频率：\\r\\n                        <select data-ng-model=\\\"refresh_time\\\">\\r\\n                            <option value=\\\"3000\\\" selected>3秒</option>\\r\\n                            <option value=\\\"5000\\\">5秒</option>\\r\\n                            <option value=\\\"10000\\\">10秒</option>\\r\\n                        </select>\\r\\n                    </div> 刷新频率暂时不做-->\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div area-traffic options=\\\"cpu_options\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12 col-lg-6\\\">\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2><span data-localize=\\\"内存\\\"></span> ({{item.name}})</h2>\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div area-traffic options=\\\"mem_options\\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12 col-lg-6\\\">\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2><span data-localize=\\\"网络上下行流量\\\"></span> ({{item.name}})</h2>\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div area-traffic options=\\\"net_options\\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2><span data-localize=\\\"磁盘读写速度\\\"></span> ({{item.name}})</h2>\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div area-traffic options=\\\"disk_options\\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12 col-lg-6\\\">\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2><span data-localize=\\\"进程\\\"></span> ({{item.name}})</h2>\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div class=\\\"table-responsive jincheng\\\">\\r\\n                        <table data-vdi-grid class=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n                    width=\\\"100%\\\">\\r\\n                            <thead class=\\\"vdi_header\\\">\\r\\n                                <tr>\\r\\n                                    <th ng-model=\\\"pidSort\\\" ng-click=\\\"pidSort = !pidSort;sort('pid', pidSort)\\\">PID</th>\\r\\n                                    <th ng-model=\\\"userSort\\\" ng-click=\\\"userSort = !userSort;sort('user', userSort)\\\">USER</th>\\r\\n                                    <!--<th>PR</th>-->\\r\\n                                    <!--<th>NI</th>-->\\r\\n                                    <!--<th>VIRT</th>-->\\r\\n                                    <!--<th>RES</th>-->\\r\\n                                    <!--<th>SHR</th>-->\\r\\n                                    <!--<th>S</th>-->\\r\\n                                    <th ng-model=\\\"cpuSort\\\" ng-click=\\\"cpuSort = !cpuSort;sort('cpu', cpuSort)\\\">CPU</th>\\r\\n                                    <th ng-model=\\\"memSort\\\" ng-click=\\\"memSort = !memSort;sort('mem', memSort)\\\">MEM</th>\\r\\n                                    <th ng-model=\\\"timeSort\\\" ng-click=\\\"timeSort = !timeSort;sort('time', timeSort)\\\">TIME+</th>\\r\\n                                    <th>COMMAND</th>\\r\\n                                </tr>\\r\\n                            </thead>\\r\\n                            <tbody class=\\\"vdi_body\\\">\\r\\n                                <tr data-ng-repeat=\\\"item in metric_data.process_list\\\">\\r\\n                                    <td>{{ item.pid }}</td>\\r\\n                                    <td>{{ item.user }}</td>\\r\\n                                    <!--<td>{{item.pr }}</td>-->\\r\\n                                    <!--<td>{{ item.ni }}</td>-->\\r\\n                                    <!--<td>{{ item.virt }}</td>-->\\r\\n                                    <!--<td>{{ item.res }}</td>-->\\r\\n                                    <!--<td>{{ item.shr }}</td>-->\\r\\n                                    <!--<td>{{ item.s}}</td>-->\\r\\n                                    <td>{{ item.cpu }}%</td>\\r\\n                                    <td>{{ item.mem | to_mb}}MB</td>\\r\\n                                    <td>{{ item.time}}</td>\\r\\n                                    <td>{{ item.command}}</td>\\r\\n                                </tr>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</section>\\r\\n\\r\\n<script type=\\\"text/javascript\\\">\\r\\n    $(\\\".jincheng\\\").on(\\\"scroll\\\", function(e){\\r\\n    var toolbar = $(\\\".vdi_header\\\");\\r\\n    var table = $(\\\".vdi_body\\\");\\r\\n    var topHei = (toolbar.length && table.length) ? table.offset().top - toolbar.innerHeight() : 0;\\r\\n    if(topHei){\\r\\n        toolbar.css({\\r\\n            \\\"transform\\\":\\\"translateY(\\\"+($(\\\".jincheng\\\").scrollTop())+\\\"px)\\\"\\r\\n        })\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\",\"views/vdi/monitor/host.html\":\"<div class=\\\"margin-bottom-10\\\">\\r\\n\\t<span>\\r\\n\\t\\t<span data-localize=\\\"主机：\\\"></span>\\r\\n\\t\\t<select data-ng-model=\\\"item\\\" data-ng-change=\\\"change_server(item)\\\" data-ng-options=\\\"item.ip for item in items\\\"></select>\\r\\n\\t</span>\\r\\n\\t<span>\\r\\n\\t\\t&nbsp;&nbsp;&nbsp;&nbsp;<span data-localize=\\\"刷新频率\\\"></span>\\r\\n\\t\\t<select ng-model=\\\"refresh_time\\\">\\r\\n    \\t\\t<option value=\\\"3000\\\" selected>3s</option>\\r\\n    \\t\\t<option value=\\\"5000\\\">5s</option>\\r\\n    \\t\\t<option value=\\\"10000\\\">10s</option>\\r\\n    \\t</select>\\r\\n\\t</span>\\r\\n</div>\\r\\n\\r\\n\\r\\n<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t<header role=\\\"heading\\\">\\r\\n\\t\\t\\t\\t\\t<h2 data-localize=\\\"CPU占用率\\\"></h2>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t<div options=\\\"cpu_options\\\" area-traffic></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"col col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t<header role=\\\"heading\\\">\\r\\n\\t\\t\\t\\t\\t<h2 data-localize=\\\"内存\\\"></h2>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t<div area-traffic options=\\\"mem_options\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<div class=\\\"col col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t<header role=\\\"heading\\\">\\r\\n\\t\\t\\t\\t\\t<h2 data-localize=\\\"网络上下行流量\\\"></h2>\\r\\n                    <select ng-model=\\\"net_category\\\" class=\\\"select_Monitor\\\" data-ng-options=\\\"net for net in net_categories\\\">\\r\\n                    </select>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t<div area-traffic options=\\\"net_options\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t<header role=\\\"heading\\\">\\r\\n\\t\\t\\t\\t\\t<h2 data-localize=\\\"磁盘读写速度\\\"></h2>\\r\\n                    <select ng-model=\\\"disk_category\\\" class=\\\"select_Monitor\\\" data-ng-options=\\\"disk for disk in disk_categories\\\">\\r\\n                    </select>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t<div area-traffic options=\\\"disk_options\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\r\\n        <div class=\\\"col col-xs-12 col-sm-12 col-md-12 col-lg-6\\\">\\r\\n            <div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n                <header role=\\\"heading\\\">\\r\\n                    <h2 data-localize=\\\"进程\\\"></h2>\\r\\n                </header>\\r\\n                <div role=\\\"content\\\">\\r\\n                    <div class=\\\"table-responsive jincheng\\\">\\r\\n                        <table data-vdi-grid class=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n                               width=\\\"100%\\\">\\r\\n                            <thead class=\\\"vdi_header\\\">\\r\\n                            <tr>\\r\\n                                <th ng-model=\\\"pidSort\\\" ng-click=\\\"pidSort = !pidSort;sort('pid', pidSort)\\\">PID</th>\\r\\n                                <th ng-model=\\\"userSort\\\" ng-click=\\\"userSort = !userSort;sort('user', userSort)\\\">USER</th>\\r\\n                                <!--<th>PR</th>-->\\r\\n                                <!--<th>NI</th>-->\\r\\n                                <!--<th>VIRT</th>-->\\r\\n                                <!--<th>RES</th>-->\\r\\n                                <!--<th>SHR</th>-->\\r\\n                                <!--<th>S</th>-->\\r\\n                                <th ng-model=\\\"cpuSort\\\" ng-click=\\\"cpuSort = !cpuSort;sort('cpu', cpuSort)\\\">CPU</th>\\r\\n                                <th ng-model=\\\"memSort\\\" ng-click=\\\"memSort = !memSort;sort('mem', memSort)\\\">MEM</th>\\r\\n                                <th ng-model=\\\"timeSort\\\" ng-click=\\\"timeSort = !timeSort;sort('time', timeSort)\\\">TIME+</th>\\r\\n                                <th>COMMAND</th>\\r\\n                            </tr>\\r\\n                        </thead>\\r\\n                        <tbody class=\\\"vdi_body\\\">\\r\\n                            <tr data-ng-repeat=\\\"item in metric_data.processs_list\\\">\\r\\n                                <td>{{ item.pid }}</td>\\r\\n                                <td>{{ item.username }}</td>\\r\\n                                <!--<td>{{item.pr }}</td>-->\\r\\n                                <!--<td>{{ item.ni }}</td>-->\\r\\n                                <!--<td>{{ item.virt }}</td>-->\\r\\n                                <!--<td>{{ item.res }}</td>-->\\r\\n                                <!--<td>{{ item.shr }}</td>-->\\r\\n                                <!--<td>{{ item.s}}</td>-->\\r\\n                                <td>{{ item.cpu_percent}}%</td>\\r\\n                                <td>{{ (item.memory_percent).toFixed(2) }}%</td>\\r\\n                                <td>{{ item.create_time*1000 | date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td>\\r\\n                                <td>{{ item.name}}</td>\\r\\n                            </tr>\\r\\n                            </tbody>\\r\\n                        </table>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n    </div>\\r\\n\\r\\n</section>\\r\\n<script type=\\\"text/javascript\\\">\\r\\n    $(\\\".jincheng\\\").on(\\\"scroll\\\", function(e){\\r\\n    var toolbar = $(\\\".vdi_header\\\");\\r\\n    var table = $(\\\".vdi_body\\\");\\r\\n    var topHei = (toolbar.length && table.length) ? table.offset().top - toolbar.innerHeight() : 0;\\r\\n    if(topHei){\\r\\n        toolbar.css({\\r\\n            \\\"transform\\\":\\\"translateY(\\\"+($(\\\".jincheng\\\").scrollTop())+\\\"px)\\\"\\r\\n        })\\r\\n    }\\r\\n});\\r\\n</script>\\r\\n\",\"views/vdi/monitor/policy.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"add()\\\"  href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"config()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Setup\\\"></i> <span localize=\\\"配置全局告警\\\">配置全局告警</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"notice()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Setup\\\"></i> <span localize=\\\"配置告警邮件\\\">配置告警邮件</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select data-ng-model=\\\"pagesize\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"状态\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--<th>告警</th>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.desc}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-show=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.strategy_enabled\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"view(item)\\\" ><i class=\\\"icon icon-jj-look\\\" localize-title=\\\"查看详情\\\"></i></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"alter(item)\\\"><i class=\\\"icon icon-jj-edit\\\" localize-title=\\\"编辑\\\"></i></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"btn btn-default btn-xs\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"icon icon-jj-delete\\\" localize-title=\\\"删除\\\"></i></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\",\"views/vdi/network/dataNetwork/dataNetwork.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n                                    <button class=\\\"btn btn-primary btn-xs\\\" ng-disabled=\\\"hasHA_loading\\\" ng-click=\\\"add()\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></button>\\r\\n                                    <!-- <button class=\\\"btn btn-danger btn-xs\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></button> -->\\r\\n                                    <!-- <ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('logic')\\\" localize=\\\"普通网络\\\"></a></li>\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('vlan')\\\">VLAN</a></li>\\r\\n                                    </ul> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n                                        <th localize=\\\"名称\\\">名称</th>\\r\\n                                        <th localize=\\\"关联分布式虚拟交换机\\\">关联分布式虚拟交换机</th>\\r\\n                                        <th localize=\\\"类型\\\">类型</th>\\r\\n\\r\\n                                        <th localize=\\\"子网数量\\\">子网数量</th>\\r\\n                                        <th>VLAN ID</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n                                        <th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n                                        <td width=\\\"20%\\\"><a href=\\\"#/network/dataNetwork/{{item.id}}\\\">{{item.name}}</a></td>\\r\\n                                        <td>{{ item.switch_name }}</td>\\r\\n                                        <td>\\r\\n\\t                                        <span>{{item.switch_type}}</span>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.subnet_count }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.vlan_id }}</td>\\r\\n\\r\\n                                        <td class=\\\"nowrap\\\"> \\r\\n                                        \\t<div ng-show=\\\"item.type!=='bridge'\\\">\\r\\n                                        \\t\\t<button localize-title='新增子网' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"hasHA_loading\\\" ng-click=\\\"new_sub_network(item.id)\\\"><i class=\\\"fa icon-jj-add-1\\\"></i></button>\\r\\n                                        \\t\\t<abbr class=\\\"abbr-title\\\" localize-title='不可编辑'><button class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"item.un_edit\\\" ng-show=\\\"item.un_edit\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button></abbr>\\r\\n                                        \\t\\t<button localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"item.un_edit || hasHA_loading\\\" ng-show=\\\"!item.un_edit\\\" ng-click=\\\"alter(item)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n                                        \\t\\t<button localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"hasHA_loading\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n                                        \\t</div>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/network/dataNetwork/IPpool.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/network/dataNetwork/{{cur_network_id}}\\\"><i class=\\\"fa  icon-jj-recovery\\\"></i>&nbsp;<span localize=\\\"返回\\\">返回</span></a>\\r\\n<!-- \\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"javascript:\\\" data-dialog=\\\"newNetworkIPDialog\\\" data-dialog-url=\\\"resource/IP_new.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"调整范围\\\">调整范围</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" input-number class=\\\"mysmallinput\\\"  ng-change=\\\"pageSizeChange()\\\" ng-init=\\\"pagesize=10;pagesizes=[10,20,30]\\\" data-ng-model=\\\"pagesize\\\"></input> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th localize=\\\"禁用启用\\\">启用/禁用</th> -->\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th style=\\\"width:200px;cursor:pointer;\\\"  ng-model=\\\"IPSort\\\" ng-click=\\\"IPSort = !IPSort;sortIP(IPSort)\\\">IP</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"分配类型\\\">分配类型</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"名称\\\">名称</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"终端名\\\">终端名</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"所有人\\\">所有人</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"教室\\\">教室</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize:rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.ip }} </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- 0:非桌面，1：教学桌面，2：个人桌面 -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show=\\\"item.is_mode==1\\\" localize=\\\"教学桌面\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show=\\\"item.is_mode==2\\\" localize=\\\"个人桌面\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show=\\\"item.is_mode==3\\\" localize=\\\"教学模板\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show=\\\"item.is_mode==4\\\" localize=\\\"个人模板\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show=\\\"item.is_mode==5\\\" localize=\\\"系统桌面\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.instance_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.client_name }}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.pool_name }}</td>\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/network/dataNetwork/sub_network.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n                                    <a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/network/dataNetwork\\\"><i class=\\\"fa  icon-jj-recovery\\\"></i>&nbsp;<span localize=\\\"返回\\\">返回</span></a>\\r\\n                                    <button ng-disabled=\\\"hasHA_loading\\\" class=\\\"btn btn-primary btn-xs\\\" ng-click=\\\"new_sub_network()\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></button>\\r\\n                                    <!-- <button class=\\\"btn btn-danger btn-xs\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></button> -->\\r\\n                                    <!-- <ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('logic')\\\" localize=\\\"普通网络\\\"></a></li>\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('vlan')\\\">VLAN</a></li>\\r\\n                                    </ul> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"><span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\" ng-init=\\\"pagesize=10;pagesizes=[10,20,30]\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n                                        <th localize=\\\"子网名称\\\">子网名称</th>\\r\\n                                        <th localize=\\\"IP范围\\\">IP范围</th>\\r\\n\\r\\n                                        <!-- <th localize=\\\"已分配IP数\\\">已分配IP数</th> -->\\r\\n                                        <th localize=\\\"子网掩码\\\">子网掩码</th>\\r\\n\\r\\n                                        <th localize=\\\"网关\\\">网关</th>\\r\\n                                        <th>DNS</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th localize=\\\"状态\\\">状态</th> -->\\r\\n                                        <th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td> -->\\r\\n\\r\\n                                        <td><a href=\\\"#/network/dataNetwork/{{cur_network_id}}/subnet/{{item.id}}\\\">{{item.name}}</a></td>\\r\\n                                        <td><span ng-show=\\\"item.start_ip\\\">{{item.start_ip + \\\"--\\\" +item.end_ip}}</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td></td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.netmask}}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.gateway_ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{item.dns_nameservers[0]}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{item.dns_nameservers[1]}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.enable_dhcp\\\" ng-change=\\\"enableDHCP(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"start_interval{{$index}}\\\" class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td> -->\\r\\n                                        <td class=\\\"nowrap\\\"> \\r\\n                                        \\t<div ng-show=\\\"item.type!=='bridge'\\\">\\r\\n                                        \\t\\t<!-- <button localize-title='新增子网' class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"newSubNetworkDialog\\\" data-dialog-url=\\\"resource/network/new_sub_network.html\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i></button> -->\\r\\n                                        \\t\\t<abbr class=\\\"abbr-title\\\" localize-title='不可编辑'><button class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"item.un_edit\\\" ng-show=\\\"item.un_edit\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button></abbr>\\r\\n                                        \\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"item.un_edit\\\" ng-show=\\\"!item.un_edit\\\" ng-click=\\\"alter_sub_network(item)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n                                        \\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n                                        \\t</div>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/network/dhcp/dhcp.html\":\"<section class='dhcp' style=\\\"padding: 20px 0 0 0;\\\">\\r\\n    <form class=\\\"form-horizontal col-xs-5\\\" name=\\\"dhcpFrom\\\" novalidate>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <div class=\\\"col-xs-4 text-right\\\">\\r\\n                <label>\\r\\n                    <input type=\\\"checkbox\\\" class=\\\"checkbox style-0\\\" ng-model=\\\"DHCPCtrl.data.enable_dhcp\\\" ng-change='DHCPCtrl.changeModify(DHCPCtrl.data.enable_dhcp)'>\\r\\n                    <span localize='启用'></span>\\r\\n                </label>\\r\\n                <label>\\r\\n                    <a href=\\\"javascript:void(0);\\\" rel=\\\"popover-hover\\\" data-ribbon-tips data-my-tips='DHCPTips' data-placement=\\\"right\\\" data-html=\\\"true\\\"><i class=\\\"fa fa-question-circle\\\"></i></a>\\r\\n                </label>\\r\\n            </div>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <img src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"DHCPCtrl.enabling\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-xs-4 control-label required\\\" localize=\\\"开始IP\\\"></label>\\r\\n            <div class=\\\"col-xs-7\\\" >\\r\\n                <input type=\\\"text\\\" format-ip ng-model=\\\"DHCPCtrl.data.start\\\" ng-class='{disableDHCP: !DHCPCtrl.data.enable_dhcp}' ng-disabled=\\\"!DHCPCtrl.data.enable_dhcp || !DHCPCtrl.modify\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-xs-4 control-label required\\\" localize=\\\"结束IP\\\"></label>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <input type=\\\"text\\\" format-ip ng-model=\\\"DHCPCtrl.data.end\\\" ng-class='{disableDHCP: !DHCPCtrl.data.enable_dhcp}' ng-disabled=\\\"!DHCPCtrl.data.enable_dhcp || !DHCPCtrl.modify\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-xs-4 control-label required\\\" localize=\\\"子网掩码\\\"></label>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <input type=\\\"text\\\" format-ip data-ng-model=\\\"DHCPCtrl.data.netmask\\\" ng-class='{disableDHCP: !DHCPCtrl.data.enable_dhcp}' ng-disabled=\\\"!DHCPCtrl.data.enable_dhcp || !DHCPCtrl.modify\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-xs-4 control-label required\\\" localize=\\\"网关\\\"></label>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <input type=\\\"text\\\" format-ip data-ng-model=\\\"DHCPCtrl.data.gateway\\\" ng-class='{disableDHCP: !DHCPCtrl.data.enable_dhcp}' ng-disabled=\\\"!DHCPCtrl.data.enable_dhcp || !DHCPCtrl.modify\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group\\\">\\r\\n            <label class=\\\"col-xs-4 control-label required\\\">DNS</label>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <input type=\\\"text\\\" format-ip data-ng-model=\\\"DHCPCtrl.data.dns\\\" ng-class='{disableDHCP: !DHCPCtrl.data.enable_dhcp}' ng-disabled=\\\"!DHCPCtrl.data.enable_dhcp || !DHCPCtrl.modify\\\">\\r\\n            </div>\\r\\n        </div>\\r\\n        <div class=\\\"form-group text-right\\\">\\r\\n            <label class=\\\"col-xs-4 control-label\\\"></label>\\r\\n            <div class=\\\"col-xs-7\\\">\\r\\n                <img src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"DHCPCtrl.updating\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                <button class=\\\"btn btn-primary\\\" ng-if=\\\"!DHCPCtrl.modify\\\" data-ng-disabled='!DHCPCtrl.data.enable_dhcp' ng-click=\\\"DHCPCtrl.modify = true\\\" localize=\\\"更改\\\"></button>\\r\\n                <button class=\\\"btn btn-primary\\\" ng-if=\\\"DHCPCtrl.modify && !DHCPCtrl.updating\\\" data-ng-disabled='dhcpFrom.$invalid' ng-click=\\\"DHCPCtrl.updateDHCP()\\\" localize=\\\"保存\\\"></button>\\r\\n                <button class=\\\"btn btn-primary\\\" ng-if=\\\"DHCPCtrl.modify && !DHCPCtrl.updating\\\" ng-click=\\\"DHCPCtrl.modify = false;DHCPCtrl.loadDHCP()\\\" localize=\\\"取消\\\" style=\\\"margin-left: 10px;\\\"></button>                \\r\\n            </div>\\r\\n        </div>\\r\\n    </form>\\r\\n        \\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/network/manageNetwork/manageNetwork.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-primary btn-xs dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\" data-ng-class=\\\"{disabled:loading || rows.length == 0}\\\"><i class=\\\"fa icon-jj-all\\\"></i> <span data-localize=\\\"修改\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li style=\\\"cursor:pointer; position:relative;\\\"><a class=\\\"btn isBatch\\\" data-localize=\\\"修改管理网络\\\" data-ng-click=\\\"modify('management')\\\" data-ng-class=\\\"{disabled:manage_rowsHA.length==rows.length}\\\"></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"manage_rowsHA.length==rows.length\\\"></span></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li style=\\\"cursor:pointer; position:relative;\\\"><a class=\\\"btn isBatch\\\" data-localize=\\\"修改镜像网络\\\" data-ng-click=\\\"modify('image')\\\" data-ng-class=\\\"{disabled:img_rowsHA.length==img_rows.length}\\\"></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"img_rowsHA.length==img_rows.length\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\"data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n                                        <th localize=\\\"主机名\\\"></th>\\r\\n                                        <th localize=\\\"类型\\\"></th>\\r\\n                                        <th localize=\\\"管理网络\\\"></th>\\r\\n                                        <th localize=\\\"镜像网络\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n                                        <td width=\\\"15%\\\">{{ item.host_name }}</td>\\r\\n                                        <td data-ng-if=\\\"!item.controller_and_compute && item.host_type=='controller'\\\" data-localize=\\\"主控节点\\\"></td>\\r\\n                                        <td data-ng-if=\\\"!item.controller_and_compute && item.host_type=='compute'\\\" data-localize=\\\"计算节点\\\"></td>\\r\\n                                        <td data-ng-if=\\\"item.controller_and_compute\\\" data-localize=\\\"主控节点/计算节点\\\"></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.management_dev }}/{{ item.management_ip }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if=\\\"item.host_type=='controller'\\\">{{ item.image_dev }}/{{ item.image_ip }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if=\\\"(item.host_type=='compute' && item.status=='active' && item.image_ip && item._connect) || (item.host_type=='compute' && item.status!=='active')\\\">{{ item.image_dev }}/{{ item.image_ip }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if=\\\"item.host_type=='compute' && item.status=='active' && (!item._connect || !item.image_ip)\\\"><i class=\\\"icon icon-jj-Warning txt-color-redjj\\\" data-localize-title=\\\"镜像网络无法连通\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n<!-- \\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"><span data-localize=\\\"修改\\\"></span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-localize=\\\"修改管理网络\\\" data-ng-click=\\\"modify('management')\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-localize=\\\"修改镜像网络\\\" data-ng-click=\\\"modify('image')\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section> -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/network/virtualSwitch/virtualSwitch.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-primary btn-xs isBatch\\\" ng-disabled=\\\"hasHA_loading\\\" data-ng-click=\\\"add()\\\"><i class=\\\"fa icon-jj-addddd\\\"></i> <span data-localize=\\\"新增\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\"data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive switch-tabel\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center switch-tabel-first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th> -->\\r\\n                                        <th localize=\\\"名称\\\"></th>\\r\\n                                        <th localize=\\\"描述\\\"></th>\\r\\n                                        <th localize=\\\"网络类型\\\"></th>\\r\\n                                        <th localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"20%\\\"><a href=\\\"#/network/virtualSwitch/{{item.uuid}}#{{ item.decodeName }}&{{ item.type }}\\\">{{ item.name }}</a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.description }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.type }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"edit(item)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/network/virtualSwitch/virtualSwitchItem.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-12\\\" style=\\\"padding-left: 8px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span localize='名称'></span>：{{ hostName }}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span localize='网络类型'></span>：{{ type }}\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/network/virtualSwitch\\\"><i class=\\\"fa  icon-jj-recovery\\\"></i>&nbsp;<span localize=\\\"返回\\\">返回</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-primary btn-xs isBatch\\\" ng-disabled=\\\"hasHA_loading\\\" data-ng-click=\\\"add()\\\"><i class=\\\"fa icon-jj-addddd\\\"></i> <span data-localize=\\\"新增\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\"data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive switch-tabel\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center switch-tabel-first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th> -->\\r\\n                                        <th localize=\\\"资源池\\\"></th>\\r\\n                                        <th localize=\\\"关联主机\\\"></th>\\r\\n                                        <th localize=\\\"映射网络适配器\\\"></th>\\r\\n                                        <th localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"20%\\\">{{ item.pool }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"3\\\" width=\\\"80%\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"switch-tabel-second\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"host in item.hosts\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"31.5%\\\">{{ host.hostname }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"48%\\\" data-ng-if=\\\"host.dev!==''\\\">{{ host.dev }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"48%\\\" data-ng-if=\\\"host.dev==''\\\" data-localize=\\\"无\\\"></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"host.status!=='active'\\\" ng-click=\\\"edit(host)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"hasHA_loading\\\" localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"host.status!=='active'\\\" ng-click=\\\"delete(host)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/plan/host_switch.html\":\"<section data-widget-grid=\\\"\\\" id=\\\"teach-page\\\">\\r\\n\\t<!-- row -->\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div  class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6 uploadFile \\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-click=\\\"add()\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll()\\\" name=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"任务名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"状态\\\" ng-model=\\\"enableSort\\\" ng-click=\\\"enableSort = !enableSort;sort('enable', enableSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.description }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-if=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.enable\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"viewSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_view.html\\\" data-localize-title=\\\"查看详情\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" data-ng-click='edit(item)' data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-default\\\" data-ng-if=\\\"!item.enable\\\" data-ng-click='delete(item)' data-localize-title=\\\"删除\\\"><i class=\\\"fa icon-jj-delete\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" ><a data-dialog=\\\"viewSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_view.html\\\" data-localize=\\\"查看详情\\\"></a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_split\\\"></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a ng-click=\\\"edit(currentItem)\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.active}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"currentItem.active\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/plan/switch.html\":\"<section data-widget-grid=\\\"\\\" id=\\\"teach-page\\\">\\r\\n\\t<!-- row -->\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div  class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6 uploadFile \\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"addSwitchDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll()\\\" name=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"任务名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"状态\\\" ng-model=\\\"is_activeSort\\\" ng-click=\\\"is_activeSort = !is_activeSort;sort('is_active', is_activeSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.desc }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-if=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.is_active\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"viewSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_view.html\\\" data-localize-title=\\\"查看详情\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_edit.html\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-default\\\" data-ng-if=\\\"!item.is_active\\\" data-ng-click='delete(item)' data-localize-title=\\\"删除\\\"><i class=\\\"fa icon-jj-delete\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" ><a data-dialog=\\\"viewSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_view.html\\\" data-localize=\\\"查看详情\\\"></a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_split\\\"></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-dialog=\\\"editSwitchDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"plan/switch_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.active}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"currentItem.active\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/resource/console/console.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div\\r\\n\\t\\t\\t\\tclass=\\\"jarviswidget\\\"\\r\\n\\t\\t\\t\\tdata-widget-grid\\r\\n\\t\\t\\t\\tdata-widget-editbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-colorbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-togglebutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-deletebutton=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-fullscreenbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-custombutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-collapsed=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-sortable=\\\"true\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"form-inline no-footer clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-12 col-sm-12\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\"><i class=\\\"fa icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\">重启</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"poweroff()\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"关机\\\">关机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div> -->\\r\\n                        <div class=\\\"row ha-header\\\" ng-if=\\\"haEnabled\\\">\\r\\n                            <div class=\\\"col-xs-6 ha-header-block\\\">\\r\\n                                <img ng-src=\\\"{{'/img/ha/ha-' + (ha.is_split_brain ? 'blue' : 'green') + '.png'}}\\\" class=\\\"ha-header-block-icon\\\"/>\\r\\n                                <div class=\\\"ha-header-block-info\\\">\\r\\n                                    <p><span localize=\\\"HA启用状态\\\"></span><span localize=\\\"已启用\\\"></span></p>\\r\\n                                    <p><span localize=\\\"数据同步状态\\\"></span><span ng-style=\\\"{color: ha.data_sync == 'unsynced' ? 'red' : ''}\\\">{{ ha | haDataStatus }}</span></p>\\r\\n                                    <p><span localize=\\\"HA运行状态\\\"></span><span ng-style=\\\"{color: ha.is_split_brain ? 'red' : ''}\\\">{{ ha | haRunningStatus }}</span></p>\\r\\n                                    <p><span localize=\\\"浮动IP地址\\\"></span>{{ ha.floating_ip }}</p>\\r\\n                                </div>\\r\\n                                <div class=\\\"ha-header-block-tools\\\">\\r\\n                                    <button class=\\\"btn btn-block btn-sm btn-primary\\\" ng-click=\\\"viewDetail()\\\" localize=\\\"查看详情\\\"></button>\\r\\n                                    <button class=\\\"btn btn-block btn-sm btn-primary\\\" ng-disabled=\\\"!switchable\\\" ng-click=\\\"switchBrain()\\\" localize=\\\"主备控切换\\\"></button>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"col-xs-6 ha-header-block\\\">\\r\\n                                <img src=\\\"/img/ha/info.png\\\" class=\\\"ha-header-block-icon\\\"/>\\r\\n                                <div class=\\\"ha-header-block-info\\\" localize=\\\"ha.boottips\\\"></div>\\r\\n                                <div class=\\\"ha-header-block-tools\\\">\\r\\n                                    <button class=\\\"btn btn-block btn-sm btn-primary\\\" ng-click=\\\"onekeyShutdown()\\\" localize=\\\"一键关机\\\"></button>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-4 col-lg-3\\\"\\r\\n\\t\\t\\t\\t\\t\\t        \\tdata-ng-repeat=\\\"item in rows track by $index\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big\\\" ng-class=\\\"{'panel-primary':item.status=='active','panel-darken':item.status!='active'} \\\">\\r\\n\\t\\t\\t\\t\\t\\t            \\t<div class=\\\"ribbon\\\" ng-if=\\\"item.role ==='controller'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            \\t<img data-ng-if=\\\"current_theme =='smart-style-0'\\\" key=\\\"host_style0\\\" base64>\\r\\n\\t\\t\\t\\t\\t\\t\\t            \\t<img data-ng-if=\\\"current_theme =='smart-style-1'\\\" key=\\\"host_style1\\\" base64>\\r\\n\\t\\t\\t\\t\\t\\t            \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t            \\t<div class=\\\"ribbon\\\" ng-if=\\\"item.role ==='backup'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            \\t<img data-ng-if=\\\"current_theme =='smart-style-0'\\\" key=\\\"backuphost_style0\\\" base64>\\r\\n\\t\\t\\t\\t\\t\\t\\t            \\t<img data-ng-if=\\\"current_theme =='smart-style-1'\\\" key=\\\"backuphost_style1\\\" base64>\\r\\n\\t\\t\\t\\t\\t\\t            \\t</div>\\r\\n \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"padding-left-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" class=\\\"checkbox style-0\\\" data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" data-ng-value=\\\"item.id\\\" ><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t                    <div class=\\\"panel-cont\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item panel-title\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label><img  ng-show=\\\"item.status==='building'\\\" ng-src=\\\"img/ajax-loader.gif\\\" style=\\\"width:48px;height:48px;\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<h2 class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"host_title\\\" title=\\\"{{item.hostname}}\\\">{{item.hostname}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\">{{item.ip}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small red\\\" ng-show=\\\"item.status==='inactive'\\\" localize=\\\"服务状态异常\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='maintenance'\\\" localize=\\\"维护中...\\\">维护中...</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='building'\\\" localize=\\\"创建中...\\\">创建中...</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='active'||item.status==='offline'\\\">&nbsp;</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label>CPU</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n                                                            <div>{{item.cpu_idle?(100 - item.cpu_idle).toFixed(1):0.0}}% &nbsp;<span class=\\\"pull-right\\\">100%</span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.cpu_idle&&item.cpu_idle>=60,'bg-color-yellowLight':item.cpu_idle&&item.cpu_idle>20&&item.cpu_idle<60,'bg-color-redLight':item.cpu_idle&&item.cpu_idle<20}\\\" ng-style=\\\"{width:(item.cpu_idle?(100 - item.cpu_idle):0.0)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize=\\\"内存\\\">内存</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div><span class=\\\"pull-left\\\">{{item.memory_mb_used}}</span>&nbsp;<span class=\\\"pull-right\\\">{{item.memory_mb}} GB</span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.memory_mb_used/item.memory_mb*100<=60,'bg-color-redLight':item.memory_mb_used/item.memory_mb*100>=80,'bg-color-yellowLight':item.memory_mb_used/item.memory_mb*100>60&&item.memory_mb_used/item.memory_mb*100<80}\\\" ng-style=\\\"{width:(item.memory_mb_used/item.memory_mb*100)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize=\\\"存储\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div><span class=\\\"pull-left\\\">{{item.disk_gb_used}}</span>&nbsp;<span class=\\\"pull-right\\\">{{item.disk_gb}} GB</span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.disk_gb_used/item.disk_gb*100<=60,'bg-color-redLight':item.disk_gb_used/item.disk_gb*100>=80,'bg-color-yellowLight':item.disk_gb_used/item.disk_gb*100>60&&item.disk_gb_used/item.disk_gb*100<80}\\\" ng-style=\\\"{width:(item.disk_gb_used/item.disk_gb*100)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t                  \\t<div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='active','primary':item.status=='active'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t                  \\t\\t<a class=\\\"icon\\\" href=\\\"javascript:\\\" data-ng-click=\\\"restart(item)\\\" data-localize-title=\\\"重启\\\"><i class=\\\"fa icon-jj-Restart\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon\\\" ng-if=\\\"item.role ==='controller'\\\" href=\\\"javascript:\\\" data-ng-click=\\\"poweroff(item)\\\" data-localize-title=\\\"关机\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"icon\\\" ng-if=\\\"item.role ==='backup'\\\" href=\\\"javascript:\\\" data-ng-click=\\\"poweroffBackup(item)\\\" data-localize-title=\\\"关机\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i></a>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"(item.status=='active' || item.status=='inactive') && item.role ==='controller'\\\" class=\\\"icon\\\" data-localize-title=\\\"HA配置\\\" ng-click=\\\"openHAConfigDialog(item)\\\"><i class=\\\"fa icon-jj-001\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"高级\\\" ng-click=\\\"openHostMoreDialog(item)\\\"><i class=\\\"fa icon-jj-010\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n\",\"views/vdi/resource/pool/host.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div\\r\\n\\t\\t\\t\\tclass=\\\"jarviswidget\\\"\\r\\n\\t\\t\\t\\tdata-widget-grid\\r\\n\\t\\t\\t\\tdata-widget-editbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-colorbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-togglebutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-deletebutton=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-fullscreenbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-custombutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-collapsed=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-sortable=\\\"true\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-10 col-sm-10\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"#/resource/pool\\\"><i class=\\\"fa  icon-jj-recovery\\\"></i>&nbsp;<span localize=\\\"返回\\\">返回</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" ng-show=\\\"vtype=='kvm'\\\" href=\\\"javascript:\\\" data-dialog=\\\"addHostDialog\\\" data-dialog-url=\\\"resource/pool/new_host.html\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"添加计算节点\\\">添加计算节点</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" ng-show=\\\"vtype=='hyper-v'\\\"  href=\\\"javascript:\\\" data-dialog=\\\"addHostDialog\\\" data-dialog-url=\\\"resource/pool/new_host_hyperv.html\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"添加计算节点\\\">添加计算节点</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"configStorage()\\\"><i class=\\\"fa icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"配置存储\\\">配置存储</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-dialog=\\\"configPubStorageDialog\\\" data-dialog-url=\\\"resource/pool/config_pub_storage.html\\\"><i class=\\\"fa icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"配置公共存储\\\">配置公共存储</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\"><i class=\\\"fa icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\">重启</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"poweroff()\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"关机\\\">关机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"recovery()\\\"><i class=\\\"fa icon-jj-Recovery\\\"></i>&nbsp;<span localize=\\\"恢复\\\">恢复</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" href=\\\"javascript:\\\" data-ng-click=\\\"maintain()\\\"><i class=\\\"fa icon-jj-007\\\"></i>&nbsp;<span localize=\\\"维护\\\">维护</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-2 col-sm-2\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" ng-model=\\\"order\\\" data-ng-options=\\\"order.name for order in orders\\\" data-ng-change=\\\"sortTem(order.val)\\\"></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restarVirtical\\\">重启虚拟化服务</a>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-4 col-lg-3\\\"\\r\\n\\t\\t\\t\\t\\t\\t        \\tdata-ng-repeat=\\\"item in rows track by $index\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big\\\" ng-class=\\\"{'panel-primary':item.status=='active','panel-darken':item.status!='active'} \\\">\\r\\n \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"padding-left-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" class=\\\"checkbox style-0\\\" data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" data-ng-value=\\\"item.id\\\" ><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t                    <div class=\\\"panel-cont\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <ul class=\\\"panel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item panel-title \\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label><img  ng-show=\\\"item.status==='building'\\\" ng-src=\\\"img/ajax-loader.gif\\\" style=\\\"width:48px;height:48px;\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<h2 class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"host_title\\\" title=\\\"{{item.host}}\\\">{{item.host}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\">{{item.ip}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small red\\\" ng-show=\\\"item.status==='inactive'\\\" localize=\\\"服务状态异常\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='maintenance'\\\" localize=\\\"维护中...\\\">维护中...</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='building'\\\" localize=\\\"创建中...\\\">创建中...</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span class=\\\"small\\\" ng-show=\\\"item.status==='active'||item.status==='offline'\\\">&nbsp;</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"DESKTOP\\\" localize=\\\"DESKTOP\\\">桌面</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n                                                            <div>{{item.inst_run}}  &nbsp;&nbsp;<span class=\\\"pull-right\\\">{{item.inst_total}} <em class=\\\"font-w\\\" localize=\\\"个\\\"></em></span></div>\\r\\n                                                            <div class=\\\"progress progress-micro\\\">\\r\\n                                                                <div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.inst_run/item.inst_total*100<=50,'bg-color-redLight':item.inst_run/item.inst_total*100>=80,'bg-color-yellowLight':item.inst_run/item.inst_total*100>50&&item.inst_run/item.inst_total*100<80}\\\" ng-style=\\\"{width:(item.inst_run/item.inst_total*100)+'%'}\\\"></div>\\r\\n                                                            </div>\\r\\n                                                            <!--<div class=\\\"pull-right\\\">个</div>-->\\r\\n                                                        </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label title=\\\"CPU\\\">CPU</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n                                                            <div>{{item.cpu_used}} &nbsp;<span class=\\\"pull-right\\\">{{item.h_cpu}} <em class=\\\"font-w\\\" localize=\\\"核\\\">核</em></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.cpu_used/item.h_cpu<=1,'bg-color-yellowLight':item.cpu_used/item.h_cpu>1&&item.cpu_used/item.h_cpu<2,'bg-color-redLight':item.cpu_used/item.h_cpu>2}\\\" ng-style=\\\"{width:(item.cpu_used/item.h_cpu*100)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                                                            <!--<div class=\\\"pull-right\\\">核</div>-->\\r\\n                                                            <!--<div class=\\\"pull-right\\\"> V:{{item.v_cpu}}</div>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"内存\\\" localize=\\\"内存\\\">内存</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div><span class=\\\"pull-left\\\">{{item.mem_used}}</span>&nbsp;<span class=\\\"pull-right\\\">{{item.h_mem}} GB</span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.mem_used/item.h_mem*100<=60,'bg-color-redLight':item.mem_used/item.h_mem*100>=80,'bg-color-yellowLight':item.mem_used/item.h_mem*100>60&&item.mem_used/item.h_mem*100<80}\\\" ng-style=\\\"{width:(item.mem_used/item.h_mem*100)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                                                            <!--<div class=\\\"pull-right\\\">GB</div>-->\\r\\n                                                            <!--<div class=\\\"pull-right\\\"> V:{{item.v_mem}}GB</div>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"镜像存储\\\" localize=\\\"镜像存储\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div><span class=\\\"pull-left\\\">{{(item.disk_used).toFixed(0)}}</span>&nbsp;<span class=\\\"pull-right\\\">{{(item.h_disk).toFixed(0)}} GB</span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"progress progress-micro\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-bar  progress-bar-primary\\\" role=\\\"progressbar\\\" ng-class=\\\"{'bg-color-greenLight':item.disk_used/item.h_disk*100<=60,'bg-color-redLight':item.disk_used/item.h_disk*100>=80,'bg-color-yellowLight':item.disk_used/item.h_disk*100>60&&item.disk_used/item.h_disk*100<80}\\\" ng-style=\\\"{width:(item.disk_used/item.h_disk*100)+'%'}\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n                                                            <!--<div class=\\\"pull-right\\\">GB</div>-->\\r\\n                                                            <!--<div class=\\\"pull-right\\\"> V:{{item.v_mem}}GB</div>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t                  \\t<div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='active','primary':item.status=='active'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"(item.status=='active' || item.status=='inactive') && !item.rbd_enabled\\\" class=\\\"icon\\\" data-localize-title=\\\"配置存储\\\" ng-click=\\\"configStorage(item)\\\"><i class=\\\"fa icon-jj-009\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='active' || item.status=='inactive'\\\" class=\\\"icon\\\" data-localize-title=\\\"高级\\\" ng-click=\\\"openHostMoreDialog(item)\\\"><i class=\\\"fa icon-jj-010\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\",\"views/vdi/resource/pool/pool.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n                                    <button class=\\\"btn btn-primary btn-xs\\\" data-dialog=\\\"newPoolDialog\\\" data-dialog-url=\\\"resource/pool/new_pool.html\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增资源池\\\">新增资源池</span></button>\\r\\n                                    <!-- <button class=\\\"btn btn-danger btn-xs\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></button> -->\\r\\n                                    <!-- <ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('logic')\\\" localize=\\\"普通网络\\\"></a></li>\\r\\n                                        <li><a class=\\\"isBatch text-center\\\" href=\\\"javascript:\\\" ng-click=\\\"open_storage_dialog('vlan')\\\">VLAN</a></li>\\r\\n                                    </ul> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div> \\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-bordered table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll()\\\" name=\\\"checkbox-inline\\\"><i></i></label></th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n                                        <th localize=\\\"资源池名称\\\">资源池名称</th>\\r\\n                                        <th localize=\\\"类型\\\">类型</th>\\r\\n                                        <th localize=\\\"主机数量\\\">主机数量</th>\\r\\n\\r\\n                                        <th localize=\\\"状态\\\">状态</th>\\r\\n                                        <th localize=\\\"描述\\\">描述</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n                                        <th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize:rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td> -->\\r\\n\\r\\n                                        <td><a href=\\\"#/resource/pool/{{item.uuid}}/{{item.type}}\\\">{{item.name}}</a></td>\\r\\n                                        <td>{{item.type}}</td>\\r\\n                                        <td>{{item.hosts.length}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"icon icon-jj-yes txt-color-greenjj\\\" ng-show=\\\"item.status=='normal'\\\" localize-title=\\\"正常\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"icon icon-jj-Warning txt-color-redjj\\\" ng-show=\\\"item.status!='normal'\\\" localize-title=\\\"异常\\\"></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"width:50%;word-break: break-all\\\">{{item.description}}</td>\\r\\n\\r\\n                                        <td class=\\\"nowrap\\\"> \\r\\n                                        \\t<div>\\r\\n                                        \\t\\t<button localize-title='添加计算节点' ng-show=\\\"item.type=='kvm'\\\" class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"addHostDialog\\\" data-dialog-url=\\\"resource/pool/new_host.html\\\"><i class=\\\"fa icon-jj-add-1\\\"></i></button>\\r\\n                                        \\t\\t<button localize-title='添加计算节点' ng-show=\\\"item.type=='hyper-v'\\\" class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"addHostDialog\\\" data-dialog-url=\\\"resource/pool/new_host_hyperv.html\\\"><i class=\\\"fa icon-jj-add-1\\\"></i></button>\\r\\n                                        \\t\\t<!-- <abbr class=\\\"abbr-title\\\" localize-title='不可编辑'><button class=\\\"btn btn-xs btn-default\\\" ng-disabled=\\\"item.un_edit\\\" ng-show=\\\"item.un_edit\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button></abbr> -->\\r\\n                                        \\t\\t<button localize-title='编辑' class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"edit(item)\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n                                        \\t\\t<!-- <abbr ng-show=\\\"item.hosts.length>0&&item.name!=='default'\\\" class=\\\"abbr-title\\\" localize-title='不可删除'><button class=\\\"btn btn-xs btn-default\\\" disabled><i class=\\\"fa icon-jj-delete\\\"></i></button></abbr> -->\\r\\n                                        \\t\\t<button localize-title='删除' class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"item.hosts.length==0&&item.name!=='default'\\\" ng-click=\\\"delete(item)\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n                                        \\t</div>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\",\"views/vdi/resource/storage/storage.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\" data-dialog=\\\"configPublicStorageDialog\\\" data-dialog-url=\\\"resource/storage/config_pub_storage.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa icon-jj-009\\\"></i>&nbsp;<span localize=\\\"配置公共存储\\\">配置公共存储</span></a>\\r\\n\\t\\t\\t\\t<header class=\\\"storage_header\\\" localize=\\\"本地存储\\\">\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"storage-dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group left_side col-xs-12 col-sm-4 col-md-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-sm-8 col-xs-10 hidden-xs col-md-8\\\"> \\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"资源池\\\">资源池</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectServer\\\" ng-model=\\\"select_pool_local\\\" ng-change=\\\"filterLocalStorage(select_pool_local.name)\\\"  ng-options=\\\"pool.name for pool in pools track by pool.id\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" data-localize=\\\"所有\\\">所有</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive storage-tabel\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form storage-tabel-first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"资源池\\\" width=\\\"10%\\\">资源池</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"主机\\\" width=\\\"11%\\\">主机</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"分配类型\\\" width=\\\"11%\\\">分配类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储服务器\\\" width=\\\"11%\\\">存储服务器</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储类型\\\" width=\\\"11%\\\">存储类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储名\\\" width=\\\"11%\\\">存储名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\"><span localize=\\\"总容量\\\"></span>(GB)</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"5%\\\"><span localize=\\\"可用空间\\\"></span>(GB)</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body rowspan3\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"(key,pool) in datas.local_storages\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{key}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"9\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-second\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"server in pool.servers track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{server.ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"8\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-third\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"storage in server.storages track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"storage.storage_type==1\\\" localize=\\\"基础镜像存储设备\\\">基础镜像存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type==2\\\" localize=\\\"性能型存储设备\\\">性能型存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type==3\\\" localize=\\\"容量型存储设备\\\">容量型存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type=='cache'\\\" localize=\\\"主机缓存设备\\\">主机缓存设备</span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{storage.storage_type}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"storage.storage_type==4\\\" localize=\\\"公共型存储\\\">公共型存储</span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.device_type}}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-show=\\\"storage.total_size\\\">{{storage.total_size}}</span><span ng-show=\\\"!storage.total_size\\\">--</span></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-show=\\\"storage.free_size\\\">{{storage.free_size}}</span><span ng-show=\\\"!storage.free_size\\\">--</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-show=\\\"!loading && get_obj_length(datas.local_storages) == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div data-grid-pagination data-ng-show=\\\"(totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) > 0\\\" class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"PAGE\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ (currentPage - 1) * pagesize + 1 }}\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{ currentPage * pagesize < (totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) ? currentPage * pagesize : (totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{ totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotal-items=\\\"totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"$parent.currentPage\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t></pagination>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t\\t<header class=\\\"storage_header\\\" localize=\\\"远端存储\\\"></header>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"storage-dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group left_side col-xs-12 col-sm-4 col-md-4\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\" data-dialog=\\\"addStorageDialog\\\" data-dialog-url=\\\"resource/storage/new_storage.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"添加存储\\\">添加存储</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-sm-8 col-xs-10 hidden-xs col-md-8\\\"> \\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span data-localize=\\\"资源池\\\">资源池</span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <select class=\\\"selectServer\\\" ng-model=\\\"select_pool_remote\\\" ng-options=\\\"pool.name for pool in datas.remote_assigned_storages\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" data-localize=\\\"所有\\\">所有</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</select> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\">显示</span> <select data-ng-model=\\\"pagesize\\\"  ng-change=\\\"pageSizeChange()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"10\\\" >10</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"20\\\" >20</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"30\\\" >30</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</select> <span localize=\\\"项结果\\\"></span> </div> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<tabset>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tab heading=\\\"已分配存储\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive storage-tabel\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form storage-tabel-first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\" localize=\\\"资源池\\\">资源池</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"11%\\\" localize=\\\"主机\\\">主机</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"12%\\\" localize=\\\"分配类型\\\">分配类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"11%\\\" localize=\\\"存储服务器\\\">存储服务器</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\" localize=\\\"存储类型\\\">存储类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\" localize=\\\"存储名\\\">存储名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"11%\\\" localize=\\\"精简配置\\\">精简配置</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\" localize=\\\"存储控制节点\\\">存储控制节点</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"9%\\\"><span localize=\\\"总容量\\\"></span>(GB)</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><span localize=\\\"可用空间\\\"></span>(GB)</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body rowspan3\\\">\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"(key,pool) in datas.remote_assigned_storages track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{pool.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"9\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-second\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"server in pool.servers track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"width:12.3%\\\">{{server.ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"8\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-third\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"storage in server.storages track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"storage.storage_type==1\\\" localize=\\\"基础镜像存储设备\\\">基础镜像存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type==2\\\" localize=\\\"性能型存储设备\\\">性能型存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type==3\\\" localize=\\\"容量型存储设备\\\">容量型存储设备</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"storage.storage_type=='cache'\\\" localize=\\\"主机缓存设备\\\">主机缓存设备</span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span ng-if=\\\"storage.storage_type==4\\\" localize=\\\"公共型存储\\\">公共型存储</span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{storage.storage_type}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.device_type}}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span localize=\\\"启用\\\" ng-if=\\\"storage.dynamic_lv\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span localize=\\\"未启用\\\" ng-if=\\\"!storage.dynamic_lv\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.storage_control_ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-show=\\\"storage.total_size\\\">{{storage.total_size}}</span><span ng-show=\\\"!storage.total_size\\\">--</span></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td style=\\\"width:7%\\\"><span ng-show=\\\"storage.free_size\\\">{{storage.free_size}}</span><span ng-show=\\\"!storage.free_size\\\">--</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && get_obj_length(datas.remote_assigned_storages)===0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tab>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tab heading=\\\"未分配存储\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive storage-tabel storage-tabel-unsigned\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form storage-tabel-first\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储类型\\\" width=\\\"12%\\\">存储类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储服务器\\\" width=\\\"13%\\\">存储服务器</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储名\\\" width=\\\"11%\\\">存储名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"精简配置\\\" width=\\\"11%\\\">精简配置</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储用途\\\" width=\\\"11%\\\">存储用途</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"存储控制节点\\\" width=\\\"11%\\\">存储控制节点</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"11%\\\"><span localize=\\\"总容量\\\"></span>(GB)</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\"><span localize=\\\"可用空间\\\"></span>(GB)</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\" width=\\\"7%\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body rowspan3\\\">\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"(storage_type,type_val) in datas.remote_unassigned_storages track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage_type}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"8\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-second\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"(storage_ip,ip_val) in type_val track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage_ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"6\\\" class=\\\"nopadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"storage-tabel-third\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"storage in ip_val track by $index\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span localize=\\\"启用\\\" ng-if=\\\"storage.dynamic_lv\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span localize=\\\"未启用\\\" ng-if=\\\"!storage.dynamic_lv\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-show=\\\"storage.storage_usability=='instance'\\\" localize=\\\"桌面磁盘镜像存储\\\"></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-show=\\\"storage.storage_usability=='local'\\\" localize=\\\"本地文件共享存储\\\"></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{storage.storage_control_ip}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-show=\\\"storage.total_size\\\">{{storage.total_size}}</span><span ng-show=\\\"!storage.total_size\\\">--</span></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-show=\\\"storage.free_size\\\">{{storage.free_size}}</span><span ng-show=\\\"!storage.free_size\\\">--</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><button localize-title=\\\"删除\\\" class=\\\"btn btn-xs btn-default\\\" ng-hide=\\\"storage.device_type=='local'\\\" ng-click=\\\"delete(storage)\\\" title=\\\"删除\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && get_obj_length(datas.remote_unassigned_storages)===0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tab>\\r\\n\\t\\t\\t\\t\\t\\t\\t</tabset>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div data-grid-pagination data-ng-show=\\\"(totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) > 0\\\" class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"PAGE\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ (currentPage - 1) * pagesize + 1 }}\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{ currentPage * pagesize < (totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) ? currentPage * pagesize : (totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length) }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{ totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotal-items=\\\"totalCount || (rows | filter:select | paging:currentPage:pagesize:rows).length\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"$parent.currentPage\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t></pagination>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\",\"views/vdi/scheduler/view.html\":\"<style>\\r\\n.vdi_scheduler_week_button{\\r\\n\\tposition:relative;\\r\\n\\tpadding:20px 0;\\r\\n\\tmargin:4px 4px 0 0;\\r\\n\\ttext-align:center;\\r\\n\\twidth:85px;\\r\\n}\\r\\n.vdi_scheduler_week_button.selected{\\r\\n\\tbackground:#456b7b;\\r\\n}\\r\\n.vdi_scheduler_week_button label.checkbox{\\r\\n\\tposition:absolute;\\r\\n\\ttop:0;\\r\\n\\tleft:3px;\\r\\n}\\r\\n.vdi_scheduler_week_button label.checkbox i{\\r\\n\\twidth:13px;\\r\\n\\theight:13px;\\r\\n\\tdisplay:none;\\r\\n}\\r\\n.vdi_scheduler_week_button:hover label.checkbox i,\\r\\n.vdi_scheduler_week_button label.checkbox input[type=\\\"checkbox\\\"]:checked+i{\\r\\n\\tdisplay:block;\\r\\n}\\r\\n.vdi_scheduler_week_button label.checkbox i::after{\\r\\n\\tfont-size:12px;\\r\\n\\ttop:-2px;\\r\\n\\tleft:-1px;\\r\\n}\\r\\n.scheduler_label{\\r\\n\\tmargin: 0 30px 4px 0;\\r\\n}\\r\\ntable.scheduler{\\r\\n\\tbackground:#999;\\r\\n}\\r\\ntable.scheduler caption{\\r\\n\\tdisplay:none;\\r\\n}\\r\\ntable.scheduler td, table.scheduler th{\\r\\n\\tbackground:#fff;\\r\\n\\tfont-size:12px/18px;\\r\\n}\\r\\ntable.scheduler th{\\r\\n\\ttext-align:center;\\r\\n\\tpadding:4px 8px;\\r\\n}\\r\\n.class_hour_list{\\r\\n\\tmargin:0;\\r\\n\\tpadding:0;\\r\\n\\tlist-style-position:inside;\\r\\n\\tlist-style-type:none;/*decimal-leading-zero;*/\\r\\n\\ttext-align:center;\\r\\n}\\r\\n.class_hour_list.no_index{\\r\\n\\tlist-style-type:none;\\r\\n}\\r\\n.class_hour_list li{\\r\\n\\tborder-top:1px solid #999;\\r\\n\\theight:48px;\\r\\n\\tline-height:48px;\\r\\n}\\r\\n.class_hour_list li:first-child{\\r\\n\\tborder-top:0 none;\\r\\n}\\r\\n.class_hour_cell.active{\\r\\n\\tbackground:red;\\r\\n}\\r\\n.class_day{\\r\\n\\tposition:relative;\\r\\n}\\r\\n.class_day .scene_in_day{\\r\\n\\tposition:absolute;\\r\\n\\ttop:0;left:0;\\r\\n\\tbottom:0;right:0;\\r\\n\\ttransform:translate(0,0);\\r\\n\\t-moz-transform:translate(0,0);\\r\\n\\t-ms-transform:translate(0,0);\\r\\n\\t-webkit-transform:translate(0,0);\\r\\n}\\r\\n.scene_in_day .scene_in_day_item{\\r\\n\\tposition:absolute;\\r\\n\\twidth:100%;\\r\\n}\\r\\n.scene_in_day_item>.item_body{\\r\\n\\tmargin:4px;\\r\\n\\tbackground:transparent;\\r\\n\\theight:100%;\\r\\n\\tborder-radius:4px;\\r\\n\\tposition:relative;\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_dnd_body{\\r\\n\\theight:100%;\\r\\n\\ttext-align:center;\\r\\n\\tpadding:10px;\\r\\n\\tcolor:#fff;\\r\\n\\toverflow:hidden;\\r\\n\\tline-height:24px;\\r\\n\\tword-wrap:break-word;\\r\\n\\tword-break:break-word;\\r\\n}\\r\\n.scene_in_day_item.modifiable>.item_body .item_dnd_body{\\r\\n\\tcursor:move;\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_dnd_header,\\r\\n.scene_in_day_item>.item_body .item_dnd_footer{\\r\\n\\tcursor:n-resize;\\r\\n\\theight:8px;\\r\\n\\tposition:absolute;\\r\\n\\twidth:100%;\\r\\n\\tbackground:rgba(255,255,255,.6);\\r\\n\\tdisplay:none;\\r\\n}\\r\\n.scene_in_day_item.modifiable>.item_body .item_dnd_header,\\r\\n.scene_in_day_item.modifiable>.item_body .item_dnd_footer{\\r\\n\\tdisplay:block;\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_dnd_header:hover,\\r\\n.scene_in_day_item>.item_body .item_dnd_footer:hover{\\r\\n\\tbackground:rgba(255,255,255,.9);\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_dnd_header{\\r\\n\\ttop:0;\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_dnd_footer{\\r\\n\\tbottom:0;\\r\\n}\\r\\n.scene_in_day_item>.item_body .item_remove{\\r\\n\\tposition:absolute;\\r\\n\\ttop:-2px;\\r\\n\\tright:-2px;\\r\\n\\tfont-size:14px;\\r\\n\\twidth:18px;\\r\\n\\ttext-align:center;\\r\\n\\theight:18px;\\r\\n\\tbackground:#c00;\\r\\n\\tcolor:#fff;\\r\\n\\tline-height:18px;\\r\\n\\tborder-radius:50%;\\r\\n\\tbox-shadow:0 0 1px #000;\\r\\n\\tcursor:pointer;\\r\\n\\tdisplay:none;\\r\\n}\\r\\n.scene_in_day_item.modifiable:hover>.item_body .item_remove{\\r\\n\\tdisplay:block;\\r\\n}\\r\\n.scene_item{\\r\\n/*\\tborder:1px solid #666;\\r\\n\\tborder-radius:4px;\\r\\n*/\\tmargin:0 8px 8px 0;\\r\\n\\tcursor:move;\\r\\n\\twidth:100%;\\r\\n\\theight:36px;\\r\\n\\ttext-align:center;\\r\\n\\tline-height:36px;\\r\\n\\t-user-select:none;\\r\\n\\tcolor:#fff;\\r\\n\\toverflow:hidden;\\r\\n\\tword-wrap:break-word;\\r\\n\\tword-break:break-word;\\r\\n}\\r\\n.disabled .scene_item{\\r\\n\\tcursor:default;\\r\\n}\\r\\n.scheduler_canvas{\\r\\n\\r\\n}\\r\\n.scheduler_dnd_canvas{\\r\\n\\tposition:fixed;\\r\\n\\ttop:0;\\r\\n\\tleft:0;\\r\\n\\tbottom:0;\\r\\n\\tright:0;\\r\\n\\tbackground:transparent;\\r\\n\\tz-index:99999;\\r\\n}\\r\\n.scheduler_dnd_canvas .dnd_handler{\\r\\n\\tposition:absolute;\\r\\n\\topacity:.9;\\r\\n}\\r\\n.scheduler_dnd_canvas .dnd_masker{\\r\\n\\twidth:100%;\\r\\n\\theight:100%;\\r\\n\\tposition:relative;\\r\\n\\tbackground:transparent;\\r\\n\\tcursor:move;\\r\\n}\\r\\n.btn.disabled{\\r\\n\\topacity:.8!important;\\r\\n}\\r\\n</style>\\r\\n<div ng-show=\\\"weeks.length\\\">\\r\\n\\t<div class=\\\"toolbar\\\">\\r\\n\\t\\t<div class=\\\"col-xs-8 col-md-8 col-lg-8 col-sm-8\\\">\\r\\n\\t\\t\\t<div class=\\\"inline-goup\\\">\\r\\n\\t\\t\\t\\t<label data-localize='教室'></label>\\r\\n\\t\\t\\t\\t<label>\\r\\n\\t\\t\\t\\t\\t<select class=\\\"input-sm\\\" ng-disabled=\\\"editMode\\\" ng-model=\\\"class\\\" ng-change=\\\"classChange()\\\" ng-options=\\\"class.name for class in classes track by class.id\\\"></select>\\r\\n\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<div class=\\\"col-xs-4 col-md-4 col-lg-4 col-sm-4 text-right\\\">\\r\\n\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t<button class=\\\"btn btn-default\\\" ng-class=\\\"{disabled: editMode}\\\" ng-click=\\\"setting()\\\" data-localize=\\\"课时设置\\\"></button>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n\\t<!--  -->\\r\\n\\t<div data-scheduler-canvas>\\r\\n\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<form class=\\\"smart-form col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"btn btn-default vdi_scheduler_week_button\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-model=\\\"$parent.currentWeek\\\"\\r\\n\\t\\t\\t\\t\\t\\tbtn-radio=\\\"week\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-repeat=\\\"week in weeks track by $index\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-class=\\\"{disabled: editMode}\\\"\\r\\n\\t\\t\\t\\t\\t\\tstyle=\\\"background:{{ week.current ? '#cde0c4' : '' }}\\\"\\r\\n\\t\\t\\t\\t\\t><label class=\\\"checkbox\\\" onclick=\\\"arguments && arguments[0] && arguments[0].stopPropagation()\\\"><input ng-model=\\\"week.checked\\\" ng-checked=\\\"week.checked\\\" type=\\\"checkbox\\\"><i></i></label>\\r\\n\\t\\t\\t\\t\\t\\t<div data-localize='{{ week.name }}'></div>\\r\\n\\t\\t\\t\\t\\t\\t<small>{{ week.start | date:\\\"MM/dd\\\" }} - {{ week.end - 864e5 | date:\\\"MM/dd\\\" }}</small>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-5 col-sm-5 col-md-5 col-lg-5\\\" style='margin-top:6px;'>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"inline-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"scheduler_label\\\"><i></i><input class=\\\"checkbox\\\" ng-disabled=\\\"editMode\\\" ng-model=\\\"weekCheckAll\\\" ng-checked=\\\"checkAllWeeks()\\\" ng-click=\\\"checkAllWeeks(weekCheckAll)\\\" type=\\\"checkbox\\\"><span data-localize='全选'></span></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"scheduler_label\\\"><i></i><input class=\\\"checkbox\\\" ng-disabled=\\\"editMode\\\" ng-model=\\\"weekCheckOdd\\\" ng-checked=\\\"checkAllOddWeeks()\\\" ng-click=\\\"checkAllOddWeeks(weekCheckOdd)\\\" type=\\\"checkbox\\\"><span data-localize='单周'></span></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"scheduler_label\\\"><i></i><input class=\\\"checkbox\\\" ng-disabled=\\\"editMode\\\" ng-model=\\\"weekCheckEven\\\" ng-checked=\\\"checkAllEvenWeeks()\\\" ng-click=\\\"checkAllEvenWeeks(weekCheckEven)\\\" type=\\\"checkbox\\\"><span data-localize='双周'></span></label>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</form>\\r\\n\\t\\t\\t<div class=\\\"col-xs-10 col-sm-10 col-md-10 col-lg-10 row\\\" style=\\\"padding:8px 0;\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"col-sm-5 col-xs-5 col-md-5 col-lg-5\\\">\\r\\n\\t\\t\\t\\t\\t<button ng-disabled=\\\"editMode\\\" class=\\\"btn btn-danger\\\" ng-click=\\\"clearAll()\\\" data-localize='清除全部课表'></button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<div class=\\\"col-xs-7 col-sm-7 col-md-7 col-lg-7 text-right\\\">\\r\\n\\t\\t\\t\\t\\t<button ng-show=\\\"editMode\\\" class=\\\"btn btn-success\\\" data-ng-click=\\\"save()\\\" data-localize='保存修改'></button>\\r\\n\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\tclass=\\\"btn btn-default\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-model=\\\"editMode\\\"\\r\\n\\t\\t\\t\\t\\t\\tbtn-checkbox=\\\"editMode\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-class=\\\"{disabled: !checkSomeWeeks(true)}\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-hide=\\\"editMode\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-click=\\\"enableEditMode()\\\" data-localize='编辑勾选的周次'\\r\\n\\t\\t\\t\\t\\t></button>\\r\\n\\t\\t\\t\\t\\t<button\\r\\n\\t\\t\\t\\t\\t\\tclass=\\\"btn btn-default\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-show=\\\"editMode\\\"\\r\\n\\t\\t\\t\\t\\t\\tng-click=\\\"disableEditMode()\\\" data-localize='取消编辑'\\r\\n\\t\\t\\t\\t\\t></button>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-xs-10 col-sm-10 col-md-10 col-lg-10 row\\\">\\r\\n\\t\\t\\t\\t<table ng-show=\\\"currentWeek\\\" class=\\\"scheduler\\\" width=\\\"100%\\\" cellpadding=\\\"1\\\" cellspacing=\\\"1\\\" border=\\\"1\\\">\\r\\n\\t\\t\\t\\t\\t<caption data-localize='编辑模式'></caption>\\r\\n\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th width=\\\"120\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t<th width=\\\"128\\\" class=\\\"day\\\" style=\\\"background:{{ day.current ? '#cde0c4' : '' }}\\\" data-ng-repeat=\\\"day in currentWeek.days\\\"><span data-localie=\\\"{{ day.key }}\\\" data-localize=\\\"{{ day.name }}\\\"></span></th>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<ol class=\\\"class_hour_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<li data-ng-repeat=\\\"classHour in classHours\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div style=\\\"line-height:24px\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b data-localize='CLASS' param1=\\\"{{classHour.index}}\\\"></b><br>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<small>{{ classHour.start | date:\\\"HH:mm\\\" }} - {{ classHour.end | date:\\\"HH:mm\\\" }}</small>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</ol>\\r\\n\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t<td data-ng-repeat=\\\"day in currentWeek.days\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<schedulerday data-day=\\\"day.key\\\" data-modifiable=\\\"editMode\\\" data-hours=\\\"classHours\\\" data-scenes=\\\"day.scenes\\\"></schedulerday>\\r\\n\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t<div ng-hide=\\\"currentWeek\\\" class=\\\"well text-center\\\" data-localize=\\\"OUTOFFSCHULE\\\"></div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<div class=\\\"col-xs-2 col-sm-2 col-md-2 col-lg-2\\\" ng-class=\\\"{disabled: !editMode}\\\">\\r\\n\\t\\t\\t\\t<scheduleritems>\\r\\n\\t\\t\\t\\t\\t<scheduleritem data-scene=\\\"scene\\\" data-modifiable=\\\"editMode\\\" data-ng-repeat=\\\"scene in $parent.scenes | filter:{ pool: $parent.class.id }:true \\\"></scheduleritem>\\r\\n\\t\\t\\t\\t</scheduleritems>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t</div>\\r\\n</div>\\r\\n<div ng-hide=\\\"weeks.length || true\\\">\\r\\n\\t<p data-localize=\\\"NOWEEK\\\" class=\\\"text-center\\\"></p>\\r\\n\\t<div class=\\\"text-center\\\"><button class=\\\"btn btn-lg btn-default\\\" ng-class=\\\"{disabled: editMode}\\\" ng-click=\\\"setting()\\\" data-localize=\\\"课时设置\\\"></button></div>\\r\\n</div>\\r\\n<div class=\\\"col-xs-12\\\" style=\\\"height:45px;\\\"></div>\\r\\n<!--p style=\\\"height:800px;\\\">{{ start_time }},<div ng-repeat=\\\"date in dates\\\">{{ date.start | date:\\\"yyyy-MM-dd HH:mm\\\" }}, {{ date.scenes.length }}</div>{{ end_time }}</p-->\\r\\n<script>pageSetUp()</script>\",\"views/vdi/summary.html\":\"<section id=\\\"widget-grid\\\" class=\\\"ng-scope\\\">\\r\\n<!--{{summary}}-->\\r\\n\\t<div class=\\\"well\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n        \\t<div class=\\\"col-xs-6\\\">\\r\\n        \\t\\t<form class=\\\"form-horizontal\\\">\\r\\n\\t        \\t\\t<div class=\\\"form-group\\\">\\r\\n\\t        \\t\\t\\t<label class=\\\"control-label col-xs-2\\\" localize=\\\"资源池\\\"></label>\\r\\n\\t        \\t\\t\\t<div class=\\\"col-xs-4\\\">\\r\\n\\t\\t        \\t\\t\\t<select ng-disabled=\\\"loading\\\" class=\\\"form-control\\\" ng-change=\\\"get_host(pool.uuid)\\\" ng-model=\\\"pool\\\" ng-options=\\\"pool.name for pool in pools\\\">\\r\\n\\t\\t        \\t\\t\\t\\t<option value=\\\"\\\" localize=\\\"所有\\\"></option>\\r\\n\\t\\t        \\t\\t\\t</select>\\r\\n\\t\\t        \\t\\t</div>\\r\\n\\t        \\t\\t\\t<img  ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"loading\\\" height=\\\"32\\\" width=\\\"32\\\">\\r\\n\\t        \\t\\t</div>\\r\\n        \\t\\t</form>\\r\\n        \\t</div>\\r\\n            <div class=\\\"col-xs-6 col-sm-6\\\">\\r\\n                <ul id=\\\"sparks\\\" class=\\\"\\\">\\r\\n                    <li class=\\\"sparks-info\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"sparkline txt-color-bluejj hidden-mobile hidden-md hidden-sm\\\"><i class=\\\"fa-fw fa icon-jj-host\\\"></i></div>\\r\\n\\t\\t\\t\\t\\t\\t<h5 data-localize=\\\"SUMMARY_TITLE_NODE\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{summary.host_total - summary.host_master|| 0}}\\\"></h5>\\r\\n                    </li>\\r\\n                    <li class=\\\"sparks-info\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"sparkline txt-color-bluejj hidden-mobile hidden-md hidden-sm\\\"><i class=\\\"fa icon-jj-pc fa-fw \\\"></i></div>\\r\\n\\t\\t\\t\\t\\t\\t<h5 data-localize=\\\"SUMMARY_TITLE_DESKTOP\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{summary.mode_instance_cnt || 0}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{summary.person_instance_cnt || 0}}\\\"> </h5>\\r\\n                    </li>\\r\\n                    <!-- <li class=\\\"sparks-info\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"sparkline txt-color-bluejj hidden-mobile hidden-md hidden-sm\\\"><i class=\\\"fa-fw fa icon-jj-Terminal\\\"></i></div>\\r\\n\\t\\t\\t\\t\\t\\t<h5 data-localize=\\\"SUMMARY_TITLE_CLIENT\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{summary.schoolroom_cnt || 0}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{summary.client_cnt || 0}}\\\"> </h5>\\r\\n                    </li> -->\\r\\n                </ul>\\r\\n            </div>\\r\\n        </div>\\r\\n        <!-- row -->\\r\\n        <div class=\\\"row\\\">\\r\\n            <article class=\\\"col-sm-12\\\">\\r\\n                <!-- new widget -->\\r\\n                <div class=\\\"jarviswidget\\\" id=\\\"wid-id-0\\\" data-widget-togglebutton=\\\"false\\\" data-widget-editbutton=\\\"false\\\" data-widget-fullscreenbutton=\\\"false\\\" data-widget-colorbutton=\\\"false\\\" data-widget-deletebutton=\\\"false\\\">\\r\\n                    <header>\\r\\n                        <h2 data-localize=\\\"HOST\\\">主机</h2>\\r\\n                        <h2\\r\\n                        \\tdata-localize=\\\"SUMMARY_HOST_DESC\\\"\\r\\n                        \\tparam1=\\\"{{summary.host_total || 0}}\\\"\\r\\n                        \\tparam2=\\\"{{summary.host_running || 0}}\\\"\\r\\n                        \\tparam3=\\\"{{summary.host_shutdown || 0}}\\\"\\r\\n                        ></h2>\\r\\n                        <ul class=\\\"nav nav-tabs pull-right in\\\" id=\\\"myTab\\\">\\r\\n                        </ul>\\r\\n\\r\\n                    </header>\\r\\n\\r\\n                    <!-- widget div-->\\r\\n                    <div class=\\\"no-padding\\\">\\r\\n                        <div class=\\\"widget-body\\\">\\r\\n                            <!-- content -->\\r\\n                            <div id=\\\"myTabContent\\\" class=\\\"tab-content\\\">\\r\\n                                <div class=\\\"tab-pane fade in padding-10 no-padding-bottom active\\\" id=\\\"s0\\\">\\r\\n                                \\t<div class=\\\"row index all text-center\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-4 col-lg-4\\\">\\r\\n                                            <h3 class=\\\"title\\\">CPU</h3>\\r\\n                                            <div class=\\\"item\\\">\\r\\n                                                <p localize=\\\"SUMMARY_ALL_CORE\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{summary.cpu_cnt || 0}}\\\"></p>\\r\\n                                                <p localize=\\\"SUMMARY_VCPU_CORE\\\"\\r\\n                                               \\t\\tparam1=\\\"{{summary.cpu_v_running || 0}}\\\"></p>\\r\\n                                                <!--<div class=\\\"progress\\\">-->\\r\\n                                                    <!--<div class=\\\"progress-bar bg-color-teal\\\" aria-valuetransitiongoal=\\\"25\\\" aria-valuenow=\\\"25\\\" style=\\\"width: 25%;\\\">25%</div>-->\\r\\n                                                <!--</div>-->\\r\\n                                                <div class=\\\"svgpic\\\" ng-show=\\\"cpu_rate\\\"><strong>{{ summary.cpu_cnt==0?0:1 }} : {{cpu_rate}}</strong></div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"foootbar\\\" \\r\\n                                            \\tlocalize=\\\"SUMMARY_VCPU_TOTAL\\\"\\r\\n                                            \\tparam1=\\\"{{summary.cpu_v_total || 0}} \\\"></div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-4 col-lg-4\\\">\\r\\n                                            <h3 class=\\\"title\\\" localize=\\\"内存\\\">内存</h3>\\r\\n                                            <div class=\\\"item\\\">\\r\\n                                                <p data-localize=\\\"SUMMARY_SIZE_USED\\\" param1=\\\"{{summary.mem_used || 0}}\\\"></p>\\r\\n                                                <p data-localize=\\\"SUMMARY_SIZE_FREE\\\" param1=\\\"{{summary.mem_remain || 0}}\\\"></p>\\r\\n                                                <div id=\\\"3Dmemory\\\" style=\\\"position:relative;top:-10px;\\\">\\r\\n                                                    <!-- 这里是svg图                    -->\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"foootbar\\\" \\r\\n                                            \\tlocalize=\\\"SUMMARY_SIZE_TOTAL\\\"\\r\\n                                            \\tparam1=\\\"{{summary.memory_cnt || 0}} \\\"></div>\\r\\n\\t                  \\t\\t\\t\\t\\t\\t\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n                                        <div class=\\\"col-xs-12 col-sm-12 col-md-4 col-lg-4\\\">\\r\\n                                            <h3 class=\\\"title\\\" localize=\\\"存储\\\">存储</h3>\\r\\n                                            <div class=\\\"item\\\">\\r\\n                                            \\t<p data-localize=\\\"SUMMARY_SIZE_USED\\\" param1=\\\"{{summary.disk_used || 0}}\\\"></p>\\r\\n                                                <p data-localize=\\\"SUMMARY_SIZE_FREE\\\" param1=\\\"{{summary.disk_remain || 0}}\\\"></p>\\r\\n                                                <div id=\\\"3Ddisk\\\"  style=\\\"position:relative;top:-10px;\\\">\\r\\n                                                    <!-- 这里是svg图                    -->\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"foootbar\\\" \\r\\n                                            \\tlocalize=\\\"SUMMARY_SIZE_TOTAL\\\"\\r\\n                                            \\tparam1=\\\"{{summary.disk_cnt || 0}} \\\"></div>\\r\\n                                        </div>\\r\\n                                        <!--<div class=\\\"col-xs-12 col-sm-12 col-md-3 col-lg-3\\\">-->\\r\\n                                            <!--<h3 class=\\\"title\\\">网络</h3>-->\\r\\n                                            <!--<div class=\\\"item\\\">-->\\r\\n                                                <!--<p>总共:3个Vlan75个IP</p>-->\\r\\n                                                <!--<p>已分配使用18个</p>-->\\r\\n                                            <!--</div>-->\\r\\n                                            <!--<div class=\\\"foootbar\\\">总共使用率<span>25</span>%</div>-->\\r\\n                                        <!--</div>-->\\r\\n                  \\t\\t\\t\\t\\t</div>\\r\\n                                </div>\\r\\n                                <!-- end s0 tab pane -->\\r\\n                                <div class=\\\"tab-pane fade  in padding-10 no-padding-bottom\\\" id=\\\"s1\\\">\\r\\n                                \\t<div class=\\\"row\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div id=\\\"updating-chart-CPU\\\" class=\\\"chart\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t\\t<!-- 这里是svg图 -->\\r\\n\\t                  \\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>TOP</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>主机</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in hostrows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.CPU.TOP}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.CPU.host}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><i class=\\\"fa {{item.CPU.state}}\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n                  \\t\\t\\t\\t\\t</div>\\r\\n\\r\\n                                </div>\\r\\n                                <!-- end s1 tab pane -->\\r\\n\\r\\n                                <div class=\\\"tab-pane fade  in padding-10 no-padding-bottom\\\" id=\\\"s2\\\">\\r\\n                                \\t<div class=\\\"row\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div id=\\\"updating-chart-memory\\\" class=\\\"chart\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t\\t<!-- 这里是svg图 -->\\r\\n\\t                  \\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>TOP</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>主机</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in hostrows\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.memory.TOP}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.memory.host}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><i class=\\\"fa {{item.memory.state}}\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n                  \\t\\t\\t\\t\\t</div>\\r\\n                                </div>\\r\\n                                <!-- end s2 tab pane -->\\r\\n\\r\\n                                <div class=\\\"tab-pane fade  in padding-10 no-padding-bottom\\\" id=\\\"s3\\\">\\r\\n                                \\t<div class=\\\"row\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div id=\\\"updating-chart-save\\\" class=\\\"chart\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t\\t<!-- 这里是svg图 -->\\r\\n\\t                  \\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t                  \\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>TOP</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>主机</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in hostrows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.save.TOP}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.save.host}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><i class=\\\"fa {{item.save.state}}\\\"></i></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t                  \\t\\t\\t\\t\\t</div>\\r\\n                  \\t\\t\\t\\t\\t</div>\\r\\n                                </div>\\r\\n                                <!-- end s3 tab pane -->\\r\\n                            </div>\\r\\n                            <!-- end content -->\\r\\n                        </div>\\r\\n\\r\\n                    </div>\\r\\n                    <!-- end widget div -->\\r\\n                </div>\\r\\n                <!-- end widget -->\\r\\n            </article>\\r\\n        </div>\\r\\n        <!-- end row -->\\r\\n        <!-- row -->\\r\\n        <div class=\\\"row\\\">\\r\\n\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t\\t<header role=\\\"heading\\\" class=\\\"home-header\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2 data-localize=\\\"桌面\\\">桌面</h2>\\r\\n\\t\\t\\t\\t\\t\\t<h2\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"SUMMARY_DESKTOP_DESC\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{instances_summary.instances_total || 0}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{instances_summary.instances_running || 0}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{instances_summary.instances_shutdown || 0}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t></h2>\\r\\n\\t\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"widget-body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered nomargin\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>TOP 5</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"桌面\\\">桌面</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"持续运行时间\\\">持续运行时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"教室/所有人\\\">教室/所有人</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in top_instances_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td align=\\\"center\\\">{{item.top}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p class=\\\"text-overflow\\\" style=\\\"width: 80px\\\" title=\\\"{{item.name}}\\\">{{item.name}}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.startup_at}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"text-overflow\\\" style=\\\"width: 100px\\\" ng-if=\\\"item.pool_name\\\" title=\\\"{{ (item.pool_name?item.pool_name:'')+(item.pool_name && item.inst_owner?'/':'')+(item.inst_owner?item.inst_owner:'')}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{item.pool_name}}<span ng-if=\\\"item.pool_name && item.inst_owner\\\">/</span>{{item.inst_owner}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"text-overflow\\\" style=\\\"width: 100px\\\" ng-if=\\\"!item.pool_name\\\" title=\\\"{{ item.inst_owner}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{item.inst_owner}}\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a href=\\\"javascript:\\\" ng-click=\\\"view_desktop(item.id)\\\" data-localize=\\\"查看桌面\\\">查看桌面</a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- <div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t\\t<header role=\\\"heading\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2  data-localize=\\\"终端\\\">终端</h2>\\r\\n\\t\\t\\t\\t\\t\\t <h2\\r\\n                        \\tdata-localize=\\\"SUMMARY_CLIENT_DESC\\\"\\r\\n                        \\tparam1=\\\"{{clients_summary.clients_total || 0}}\\\"\\r\\n                        \\tparam2=\\\"{{clients_summary.clients_running || 0}}\\\"\\r\\n                        \\tparam3=\\\"{{clients_summary.clients_shutdown || 0}}\\\"\\r\\n                        ></h2>\\r\\n\\t\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"widget-body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"10%\\\">TOP 5</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"50%\\\" data-localize=\\\"终端\\\">终端</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th width=\\\"40%\\\" data-localize=\\\"持续开机时间\\\">持续开机时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in top_clients_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td align=\\\"center\\\">{{item.top}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.name}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{item.access_at}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div> -->\\r\\n\\t\\t\\t<div class=\\\"col-xs-12 col-sm-12 col-md-6 col-lg-6\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"jarviswidget jarviswidget-sortable\\\">\\r\\n\\t\\t\\t\\t\\t<header role=\\\"heading\\\" class=\\\"home-header\\\">\\r\\n\\t\\t\\t\\t\\t\\t<h2  data-localize=\\\"操作日志\\\">操作日志</h2>\\r\\n\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"more\\\" href=\\\"#/system/logs\\\" data-localize=\\\"更多\\\">更多</a> -->\\r\\n\\t\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t\\t<div role=\\\"content\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"widget-body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"height210\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-bordered nomargin\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作者\\\">操作者</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作内容\\\">操作内容</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作时间\\\">操作时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in top_logs_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td align=\\\"center\\\">{{item.user}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td title=\\\"{{item.content}}\\\"><p class=\\\"text-overflow text-overflow-summary\\\">{{item.content}}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">{{item.datetime | date: 'yyyy-MM-dd HH:mm:ss'}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</div>\\r\\n\\t\\t<!-- end row -->\\r\\n\\r\\n\\t</div>\\r\\n</section>\\r\\n              \",\"views/vdi/system/backup.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <form class=\\\"navbar-left ng-pristine no-margin\\\" role=\\\"search\\\" name=\\\"backupForm\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-left margin-r-10 form-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input width=\\\"260\\\" class=\\\"form-control nodirty\\\"  data-localize=\\\"备份名为英文或数字\\\" name=\\\"isoname\\\" data-ng-pattern=\\\"/^[A-Za-z0-9]+$/\\\" maxlength=\\\"20\\\" type=\\\"text\\\" ng-model=\\\"backupname\\\" required>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-show=\\\"!submiting\\\" class=\\\"btn btn-primary\\\"  ng-class=\\\"{disabled:backupForm.isoname.$invalid}\\\" ng-click=\\\"add()\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i class=\\\"fa  icon-jj-Recovery-1\\\"></i>&nbsp;<span localize=\\\"备份\\\">备份</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-show=\\\"submiting\\\" width=\\\"32\\\" height=\\\"32\\\" ng-src=\\\"img/loadingtext.gif\\\" alt=\\\"\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</form> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" ng-disabled=\\\"submitting\\\" ng-click=\\\"backup()\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"立即备份\\\">立即备份</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" ng-click=\\\"config()\\\"><i class=\\\"icon-jj-Recovery-1 fa\\\"></i> <span data-localize=\\\"备份配置\\\">备份配置</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ng-click=\\\"delete()\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('display_name', nameSort)\\\" localize=\\\"备份文件名\\\">备份文件名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"大小\\\">大小</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"timeSort\\\" ng-click=\\\"timeSort = !timeSort;sort('created_at', timeSort)\\\" localize=\\\"备份时间\\\">备份时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"备份方式\\\">备份方式</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\" ><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"break_all\\\" width=\\\"240\\\">{{ item.display_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.size }}MB</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.created_at |  date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td> <span localize=\\\"自动备份\\\" ng-show=\\\"item.is_auto_backup === true\\\">自动备份</span><span ng-show=\\\"item.is_auto_backup === false\\\" localize=\\\"手动备份\\\">手动备份</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a class=\\\"btn btn-xs btn-default\\\" href=\\\"{{ getURL(item) }}\\\" localize-title=\\\"下载\\\"><i class=\\\"fa icon-jj-Download\\\"></i></a>&nbsp;<button class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"delete(item)\\\" localize-title=\\\"删除\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- widget div end -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/deploy.html\":\"<div ng-if=\\\"hideStep\\\" role=\\\"content\\\" class=\\\"col-xs-8 clearfix\\\" style=\\\"padding-top: 10px;\\\">\\r\\n    <div data-wizard disable-nav=\\\"true\\\" data-last-text=\\\"完成\\\" class=\\\"widget-body fuelux\\\" style=\\\"position: relative; padding-bottom: 40px\\\">\\r\\n        <!-- 第一步 -->\\r\\n        <div class=\\\"step-pane active\\\" data-wizard-step data-name=\\\"init.import-img\\\">\\r\\n            <div ng-controller=\\\"importImageStepController\\\">\\r\\n            <form class=\\\"form-horizontal\\\" name=\\\"imgForm\\\" novalidate>\\r\\n                <div class=\\\"quick-deploy-toolbar clearfix\\\">\\r\\n                    <button style=\\\"float: left;\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"importByServer()\\\"><i class=\\\"icon-jj-Import\\\"></i><span localize=\\\"button.import-by-server\\\"></span></button>\\r\\n                    <div ui-web-upload=\\\"img_upload\\\"\\r\\n                         ui-web-upload-name=\\\"src_file\\\"\\r\\n                         ui-upload-type=\\\"img\\\"\\r\\n                         ui-web-upload-params=\\\"{upload_type: 'remote'}\\\"\\r\\n                         ui-upload-btn-name=\\\"button.upload-img\\\"\\r\\n                         ui-upload-url=\\\"/thor/init/prepare_import_img\\\"\\r\\n                         btn-class=\\\"btn-primary quick-deploy-upload\\\"\\r\\n                         style=\\\"float: left;margin-left: 15px;\\\">\\r\\n                    </div>\\r\\n                </div>\\r\\n                \\r\\n                <ul class=\\\"diskimg-list\\\">\\r\\n                    <li ng-repeat=\\\"img in imglist track by $index\\\" ng-click=\\\"selectSysImage(img)\\\" ng-class=\\\"{'quick-deploy-selimg': selectedSysImage === img}\\\" title=\\\"{{img.filename}}\\\">{{img.filename|filename}}</li>\\r\\n                    <li class=\\\"quick-deploy-empty-imgs\\\" ng-if=\\\"ctrl.imglist.length === 0\\\" localize=\\\"quickdeploy.empty-imgs\\\"></li>\\r\\n                </ul>\\r\\n                <img src=\\\"img/loadingtext.gif\\\" ng-if=\\\"loading\\\" class=\\\"loadingtext\\\" style=\\\"width:24px;height:24px;\\\">\\r\\n\\r\\n                <p class=\\\"quick-deploy-helpmsg\\\" style=\\\"position: relative;top:100px;\\\" localize=\\\"quickdeploy.helpmsg\\\" ng-if=\\\"firstDeployTips\\\"></p>\\r\\n            </form>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"step-pane active\\\" data-wizard-step data-name=\\\"init.register-teach-tmpl\\\" next-btn-text=\\\"init.register-tmpl\\\">\\r\\n            <div ng-controller=\\\"registerTeachTemplateStepController\\\">\\r\\n            <form name=\\\"registerForm\\\" ng-class=\\\"{is_error:error}\\\" novalidate>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label required\\\" for=\\\"select-1\\\" data-localize=\\\"系统盘镜像\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <div style=\\\"border-color: transparent;background-color: transparent;\\\" class=\\\"form-control\\\" ng-bind=\\\"selectIsoName\\\"></div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"col-xs-3 control-label required\\\" data-localize=\\\"模板名\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <input class=\\\"form-control\\\"\\r\\n                            type=\\\"text\\\"\\r\\n                            name=\\\"name\\\"\\r\\n                            required\\r\\n                            data-ng-model=\\\"name\\\"\\r\\n                            data-ng-minlength=\\\"{{ min_namelength }}\\\"\\r\\n                            data-ng-maxlength=\\\"{{ max_namelength }}\\\"\\r\\n                            data-ng-trim=\\\"false\\\"\\r\\n                        >\\r\\n                    </div>\\r\\n                    <label class=\\\"col-xs-3 note\\\" data-localize=\\\"LENGTH_LIMIT\\\" param1=\\\"{{min_namelength}}\\\" param2=\\\"{{max_namelength}}\\\"></label>\\r\\n                </div>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label\\\" for=\\\"select-1\\\" data-localize=\\\"操作系统\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" ng-model=\\\"os_type\\\" data-ng-options=\\\"os_type.value for os_type in os_types track by os_type.key\\\"></select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label\\\" for=\\\"select-1\\\" data-localize=\\\"所有人\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" ng-model=\\\"owner\\\" data-ng-options=\\\"owner.name for owner in users track by owner.id\\\"></select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label required\\\" for=\\\"network\\\" data-localize=\\\"宿主机\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" required data-ng-options=\\\"host.host_name for host in hosts track by host.host_uuid\\\"\\r\\n                            required \\r\\n                            data-ng-disabled=\\\"host_loading\\\"\\r\\n                            data-ng-change=\\\"getNetwork(host)\\\"\\r\\n                            data-ng-model=\\\"host\\\">\\r\\n                            <option value=\\\"\\\" localize=\\\"--请选择--\\\"></option>\\r\\n                        </select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label required\\\" for=\\\"network\\\" data-localize=\\\"网络\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" required data-ng-options=\\\"network.name for network in networks track by network.id\\\"\\r\\n                            data-ng-change=\\\"switchSubnet(network, this)\\\"\\r\\n                            data-ng-model=\\\"network\\\">\\r\\n                        </select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group \\\">\\r\\n                    <label class=\\\"col-xs-3 control-label required\\\" for=\\\"subnet\\\" data-localize=\\\"子网\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" data-ng-disabled=\\\"network_loading\\\" data-ng-options=\\\"subnet.name+' ('+ subnet.start_ip + '~' + subnet.end_ip +')' for subnet in subnets track by subnet.id\\\"\\r\\n                            data-ng-change=\\\"switchIps(subnet, this)\\\"\\r\\n                            data-ng-model=\\\"subnet\\\">\\r\\n                            <option value=\\\"\\\" data-localize=\\\"不分配\\\"></option>\\r\\n                        </select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"col-xs-3 control-label\\\" data-localize=\\\"绑定IP\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <div class=\\\"input-group\\\">\\r\\n                            <span class=\\\"input-group-addon\\\" style=\\\"padding: 0 4px;\\\">\\r\\n                                <label style=\\\"margin-top: 3px;\\\">\\r\\n                                    <select data-ng-model=\\\"bind_ip_type\\\" ng-disabled='bind_ip_type.value==\\\"none\\\"' ng-options=\\\"type.name for type in types track by type.value\\\" ng-change='bind_ip.value=nul'></select>\\r\\n                                </label>\\r\\n                            </span>\\r\\n                            <label class=\\\"text classroomNet \\\" data-ng-class=\\\"{bind_ip_able:bind_ip_type.value=='static' && subnets.length===0,bind_ip_disable:bind_ip_type.value!=='static' || subnets.length===0}\\\" style=\\\"margin: 0;\\\">\\r\\n                                <input type=\\\"text\\\" format-ip data-ng-if=\\\"bind_ip_type.value==='static'\\\" start=\\\"subnet.start_ip\\\" end=\\\"subnet.end_ip\\\" class=\\\"form-control\\\" ng-model=\\\"bind_ip.value\\\" required>\\r\\n                            </label>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n            <div ng-show=\\\"registerFormLoading\\\" style=\\\"position: absolute;top:68px;left:-10px;right:-10px;bottom:-10px;background-color: #fafafa;z-index: 99;\\\">\\r\\n\\r\\n                <div class=\\\"row\\\">\\r\\n                    <div class=\\\"col-xs-12 col-sm-6 col-md-6 col-lg-6\\\" data-id=\\\"{{item.id}}\\\" data-ng-repeat=\\\"item in teachTemplates\\\">\\r\\n                        <div class=\\\"panel pricing-big relative\\\" data-ng-class=\\\"{'panel-darken':item.status!='alive','panel-primary':item.status=='alive'}\\\">\\r\\n                            <div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n                                <div class=\\\"checkbox row\\\">\\r\\n                                    <h2 class=\\\"head-title col-md-12 col-sm-12 col-xs-12\\\">\\r\\n                                        <span title=\\\"{{item.image_id}}\\\">{{item.name}}</span>\\r\\n                                        <div title=\\\"{{ item.description }}\\\" class=\\\"desc\\\">{{ item.description }}</div>\\r\\n                                    </h2>\\r\\n                                </div>\\r\\n                                <div class=\\\"template panel-cont flex\\\">\\r\\n                                    <div class=\\\"panel-pic\\\" style=\\\"position: relative;bottom: 10px;\\\">\\r\\n                                        <div class=\\\"mynote\\\">\\r\\n                                            <span data-ng-if=\\\"item.status=='update failed'\\\" data-localize=\\\"TEMPLATE_UPDATE_FAILED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='updating'\\\" data-localize=\\\"TEMPLATE_UPDATING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='cloning'\\\" data-localize=\\\"TEMPLATE_CLONING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='sync failed'\\\" data-localize=\\\"TEMPLATE_SYNC_FAILED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='uploading'\\\" data-localize=\\\"UPLOADING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='register failed'\\\" data-localize=\\\"REGISTER_FAILED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='cloning failed'\\\" data-localize=\\\"CLONING_FAILED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='reset failed'\\\" data-localize=\\\"RESET_FAILED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='error'\\\" data-localize=\\\"CREATE_FAILED\\\"></span>\\r\\n\\r\\n                                            <span data-ng-if=\\\"item.status=='making'\\\" data-localize=\\\"MAKING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='saving'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='saveAs'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='installed'\\\" data-localize=\\\"INSTALLED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='syncing'\\\" data-localize=\\\"SYNCING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='building'\\\" data-localize=\\\"BUILDING\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='making seed'\\\" data-localize=\\\"MAKING_SEED\\\"></span>\\r\\n                                            <span data-ng-if=\\\"item.status=='registering'\\\" data-localize=\\\"REGESTER\\\"></span>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"pic-wrap\\\">\\r\\n                                            <img ng-src=\\\"img/ajax-loader.gif\\\" data-ng-if=\\\"item.status =='making' || item.status =='syncing' || item.status == 'making seed'\\\">\\r\\n                                            <img ng-src=\\\"img/{{ item.icon || 'win7.png' }}\\\" data-ng-if=\\\"item.status !== 'making' && item.status !== 'syncing' && item.status != 'making seed'\\\">\\r\\n                                        </div>\\r\\n                                        <div data-ng-if=\\\"item.status!='making' && item.status !='syncing' && item.status!='making seed'\\\">\\r\\n                                            <p class=\\\"pic-version\\\">{{item.os_type}}</p>\\r\\n                                            <p class=\\\"memsize\\\">{{item.is_64==true? 64:32}}Bit</p>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"panel-status\\\" >\\r\\n                                            <span ng-if=\\\"item.instance_status=='running'\\\" localize-title=\\\"开机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='shutdown'\\\" localize-title=\\\"关机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='paused'\\\" localize-title=\\\"挂起状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='migrating'\\\" localize-title=\\\"迁移状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='building'\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='nostate'\\\" localize-title=\\\"未知状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='error' ||item.instance_status=='crashed'\\\" localize-title=\\\"错误状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='reboot'\\\" localize-title=\\\"重启中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                            <span ng-if=\\\"item.instance_status=='updating'\\\" localize-title=\\\"更新中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n                                         </div>\\r\\n                                    </div>\\r\\n                                    <ul class=\\\"panel-mess\\\">\\r\\n                                        <li class=\\\"panel-item\\\">\\r\\n                                            <label data-localize=\\\"系统盘\\\" data-localize-title=\\\"系统盘\\\"></label>\\r\\n                                            <div class=\\\"item-flex\\\">{{item.updateSize?item.updateSize:item.system_size_desc}}G/{{item.system_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n                                        </li>\\r\\n                                        <li class=\\\"panel-item\\\">\\r\\n                                            <label data-localize=\\\"数据盘\\\" data-localize-title=\\\"数据盘\\\"></label>\\r\\n                                            <div class=\\\"item-flex\\\">{{item.data_size_desc}}G/{{item.data_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n                                        </li>\\r\\n                                        <li class=\\\"panel-item\\\">\\r\\n                                            <label data-localize=\\\"关联桌面数\\\" data-localize-title=\\\"关联桌面数\\\"></label>\\r\\n                                            <div class=\\\"item-flex\\\">{{item.instance_count}}</div>\\r\\n                                        </li>\\r\\n                                        <li class=\\\"panel-item\\\">\\r\\n                                            <label data-localize=\\\"创建者\\\" data-localize-title=\\\"创建者\\\"></label>\\r\\n                                            <div class=\\\"item-flex\\\">{{item.owner_desc}}</div>\\r\\n                                        </li>\\r\\n                                        <li class=\\\"panel-item\\\">\\r\\n                                            <label data-localize=\\\"创建时间\\\" data-localize-title=\\\"创建时间\\\"></label>\\r\\n                                            <div class=\\\"item-flex\\\">{{item.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</div>\\r\\n                                        </li>\\r\\n                                    </ul>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                            <div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='alive','primary':item.status=='alive'}\\\">\\r\\n                                <a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-ng-click=\\\"delete(item)\\\" ng-show=\\\"item.status === 'register failed'\\\"><i class=\\\"fa fa-trash-o\\\" data-localize-title=\\\"删除模版\\\"></i></a>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"tips\\\" data-ng-if=\\\"loadingTeachTemplates\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n                <div class=\\\"tips\\\" data-ng-if=\\\"!loadingTeachTemplates && teachTemplates.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n            </div>\\r\\n            </div>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"step-pane active\\\" data-wizard-step data-name=\\\"init.create-teach-scene\\\" next-btn-text=\\\"init.create-teach-scene\\\" prev-btn-text=\\\"\\\">\\r\\n            <div ng-controller=\\\"createTeachSceneController\\\">\\r\\n            <form class=\\\"form-horizontal\\\" name=\\\"createForm\\\" novalidate>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label  class=\\\"col-xs-3 control-label required\\\" localize=\\\"场景名\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <input type=\\\"text\\\" class=\\\"form-control\\\" data-ng-model=\\\"data.name\\\" data-localize=\\\"LENGTH_LIMIT\\\" maxlength=\\\"20\\\" ng-maxlength=\\\"20\\\" ng-minlength=\\\"2\\\" param1=\\\"2\\\" param2=\\\"20\\\" required>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label for=\\\"\\\" class=\\\"control-label required col-xs-3\\\" localize=\\\"桌面数\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <input type=\\\"number\\\" input-number class=\\\"form-control\\\" ng-model=\\\"data.instance_max\\\" max=\\\"{{data.max_instance || 100}}\\\" min=\\\"1\\\" required ng-pattern=\\\"/^[0-9]*$/\\\">\\r\\n                    </div>\\r\\n                    <label class=\\\"col-xs-3 note\\\"><span localize=\\\"最大\\\"></span>{{data.max_instance || 100}}</label>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"control-label col-xs-3\\\" data-localize=\\\"教室\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select name=\\\"classroom\\\" ng-model=\\\"classroom\\\" class=\\\"form-control\\\" ng-options=\\\"classroom.name for classroom in classrooms\\\" required></select>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <!-- 自定义教室 -->\\r\\n                <div ng-if=\\\"classroom.id === -1\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label required\\\" for=\\\"name\\\" data-localize=\\\"名称\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <input class=\\\"form-control\\\"\\r\\n                                type=\\\"text\\\"\\r\\n                                name=\\\"name\\\"\\r\\n                                data-ng-minlength=\\\"{{min_namelength}}\\\" data-ng-maxlength=\\\"{{max_namelength}}\\\" data-localize=\\\"LENGTH_LIMIT\\\" param1=\\\"{{min_namelength}}\\\" param2=\\\"{{max_namelength}}\\\"\\r\\n                                required\\r\\n                                data-ng-model=\\\"data.classroomName\\\"\\r\\n                                data-ng-trim=\\\"true\\\"\\r\\n                            >\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label\\\" for=\\\"desc\\\" data-localize=\\\"描述\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <textarea class=\\\"form-control\\\"\\r\\n                                style=\\\"height: 80px;\\\" \\r\\n                                rows=\\\"4\\\"\\r\\n                                name=\\\"desc\\\"\\r\\n                                data-localize=\\\"不能超过30位字符\\\"\\r\\n                                maxlength=\\\"30\\\"\\r\\n                                data-ng-maxlength=\\\"30\\\"\\r\\n                                data-ng-model=\\\"data.desc\\\"\\r\\n                                data-ng-trim=\\\"false\\\"\\r\\n                            >\\r\\n                            </textarea>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group \\\">\\r\\n                        <label class=\\\"col-xs-3 control-label required\\\" for=\\\"network\\\" data-localize=\\\"网络\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <select class=\\\"form-control\\\" data-ng-options=\\\"network.name for network in networks track by network.id\\\"\\r\\n                                data-ng-change=\\\"switchSubnet(data.network)\\\"\\r\\n                                data-ng-model=\\\"data.network\\\">\\r\\n                            </select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group \\\">\\r\\n                        <label class=\\\"col-xs-3 control-label required\\\" for=\\\"subnet\\\" data-localize=\\\"子网\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <select class=\\\"form-control\\\" data-ng-disabled=\\\"network_loading\\\" data-ng-show=\\\"subnets.length!==0\\\" data-ng-options=\\\"subnet.name+' ('+ subnet.start_ip + '~' + subnet.end_ip +')' for subnet in subnets track by subnet.id\\\" data-ng-model=\\\"data.subnet\\\">\\r\\n                            </select>\\r\\n                            <select class=\\\"form-control\\\" data-ng-disabled=\\\"subnets.length===0\\\" data-ng-show=\\\"subnets.length===0\\\"><option data-localize=\\\"无\\\"></option></select>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"col-xs-3 control-label\\\" data-localize=\\\"硬件模板\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <select class=\\\"form-control\\\" data-ng-model=\\\"hardware\\\" data-ng-options=\\\"hardware.name for hardware in hardwareList track by hardware.id\\\" required></select>\\r\\n                        <div class=\\\"control-des\\\" ng-if=\\\"hardware.id !== -1\\\">\\r\\n                            <label class=\\\"control-label\\\"><span>CPU</span> {{hardware.cpu_num}}<span data-localize=\\\"核\\\">核</span></label>\\r\\n                            <label class=\\\"control-label\\\"><span data-localize=\\\"内存\\\"></span>{{hardware.memory_mb/1024}}G</label>\\r\\n                            <label class=\\\"control-label\\\"><span data-localize=\\\"系统盘\\\"></span>{{hardware.system_gb}}G</label>\\r\\n                            <label class=\\\"control-label\\\" ng-if=\\\"hardware.local_gb > 1\\\"><span data-localize=\\\"数据盘\\\"></span>{{hardware.local_gb}}G</label>\\r\\n                            <label class=\\\"control-label\\\" ng-if=\\\"hardware.local_gb1 > 1\\\"><span data-localize=\\\"数据盘\\\"></span>{{hardware.local_gb1}}G</label>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <!-- 自定义模板 -->\\r\\n                <div ng-if=\\\"hardware.id === -1\\\">\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label required\\\" for=\\\"hardwareName\\\" data-localize=\\\"名称\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <input class=\\\"form-control\\\" id=\\\"hardwareName\\\" type=\\\"text\\\"\\r\\n                                name=\\\"name\\\"\\r\\n                                required\\r\\n                                data-ng-model=\\\"data.hardwareName\\\"\\r\\n                                data-ng-minlength=\\\"{{min_namelength}}\\\" data-ng-maxlength=\\\"{{max_namelength}}\\\" data-localize=\\\"LENGTH_LIMIT\\\" param1=\\\"{{min_namelength}}\\\" param2=\\\"{{max_namelength}}\\\"\\r\\n                                data-ng-trim=\\\"true\\\"\\r\\n                            >\\r\\n                        </div>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label\\\" data-localize=\\\"CPU\\\"></label>\\r\\n                        <div class=\\\"col-xs-6 btn-group\\\">\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.cpu_num\\\" btn-radio=\\\"1\\\">1</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.cpu_num\\\" btn-radio=\\\"2\\\">2</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.cpu_num\\\" btn-radio=\\\"3\\\">3</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.cpu_num\\\" btn-radio=\\\"4\\\">4</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.cpu_num\\\" btn-radio=\\\"8\\\">8</label>\\r\\n                            <div class=\\\"input-group my_input_group\\\">\\r\\n                              <!-- <input class=\\\"form-control\\\" type=\\\"number\\\" name=\\\"cpu_num\\\"\\r\\n                                    required\\r\\n                                    data-ng-model=\\\"data.cpu_num\\\"\\r\\n                                    data-ng-pattern=\\\"/^\\\\s*([1-8])\\\\s*$/\\\"\\r\\n                                    data-ng-trim=\\\"false\\\"\\r\\n                              > -->\\r\\n                              <div class=\\\"input-number-wraper-sm\\\"><input ui-input-number step=\\\"1\\\" max=\\\"32\\\" min=\\\"1\\\" ng-model=\\\"data.cpu_num\\\" data-ng-trim=\\\"false\\\" required></div>\\r\\n                              <span></span>\\r\\n                              <div class=\\\"input-group-addon input-group-addon-disk\\\" data-localize=\\\"核\\\"></div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"col-xs-3 note hardwarenote\\\">1~32<span data-localize=\\\"核\\\"></span></label>\\r\\n                    </div>\\r\\n\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label\\\" data-localize=\\\"内存\\\"></label>\\r\\n                        <div class=\\\"btn-group col-xs-6\\\">\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.memory_mb\\\" btn-radio=\\\"1.5\\\">1.5GB</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.memory_mb\\\" btn-radio=\\\"2\\\">2GB</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.memory_mb\\\" btn-radio=\\\"2.5\\\">2.5GB</label>\\r\\n                            <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.memory_mb\\\" btn-radio=\\\"3\\\">3GB</label>\\r\\n                            <div class=\\\"input-group my_input_group\\\">\\r\\n                             <!--  <input class=\\\"form-control\\\" type=\\\"number\\\" name=\\\"memory_mb\\\"\\r\\n                                    required\\r\\n                                    data-ng-model=\\\"data.memory_mb\\\"\\r\\n                                    data-ng-pattern=\\\"/^\\\\s*([1-8]|1.5|2.5|3.5|4.5|5.5|6.5|7.5)\\\\s*$/\\\"\\r\\n                                    data-ng-trim=\\\"false\\\"\\r\\n                              > -->\\r\\n                                  <div class=\\\"input-number-wraper-sm\\\"><input ui-input-number step=\\\"0.5\\\" max=\\\"64\\\" min=\\\"1\\\" ng-model=\\\"data.memory_mb\\\" ng-init=\\\"data.memory_mb = 3\\\" data-ng-trim=\\\"false\\\" required></div>\\r\\n                                  <span></span>\\r\\n                                  <div class=\\\"input-group-addon input-group-addon-disk\\\">GB</div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"col-xs-3 note hardwarenote\\\">1-64GB</label>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\" style=\\\"margin-bottom: 0;\\\">\\r\\n                        <label class=\\\"col-xs-3 control-label\\\" data-localize=\\\"系统盘\\\" style=\\\"white-space: nowrap;\\\"></label>\\r\\n                        <div class=\\\"col-xs-6\\\">\\r\\n                            <div class=\\\"btn-group\\\" style=\\\"width:100%;\\\">\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.system_gb\\\" btn-radio=\\\"10\\\">10GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.system_gb\\\" btn-radio=\\\"20\\\">20GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.system_gb\\\" btn-radio=\\\"30\\\">30GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"data.system_gb\\\" btn-radio=\\\"40\\\">40GB</label>\\r\\n                                <div class=\\\"input-group my_input_group\\\">\\r\\n                                      <!-- <input class=\\\"form-control\\\" type=\\\"number\\\" name=\\\"system_gb\\\"\\r\\n                                            required\\r\\n                                            data-ng-model=\\\"data.system_gb\\\"\\r\\n                                            data-ng-pattern=\\\"/^\\\\s*([1-9][0-9]|100)\\\\s*$/\\\"\\r\\n                                            data-ng-trim=\\\"false\\\"\\r\\n                                      > -->\\r\\n                                      <div class=\\\"input-number-wraper-sm\\\"><input ui-input-number step=\\\"1\\\" max=\\\"500\\\" min=\\\"10\\\" ng-model=\\\"data.system_gb\\\" data-ng-trim=\\\"false\\\" required></div>\\r\\n                                      <span></span>\\r\\n                                      <div class=\\\"input-group-addon input-group-addon-disk\\\">GB</div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <label class=\\\"col-xs-3 note hardwarenote\\\">10-500GB</label>\\r\\n                    </div>\\r\\n                    <div class=\\\"form-group\\\">\\r\\n                        <div class=\\\"col-xs-offset-3 col-xs-6\\\">\\r\\n                            <div class=\\\"btn-group datapan\\\" style=\\\"width:100%; margin: 15px 0 0 0;\\\" data-ng-repeat=\\\"btndisk in btndisks\\\">\\r\\n                                <span data-localize=\\\"数据盘\\\" class=\\\"mydatapan\\\"></span>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"btndisk.local_gb\\\" btn-radio=\\\"5\\\">5GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"btndisk.local_gb\\\" btn-radio=\\\"10\\\">10GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"btndisk.local_gb\\\" btn-radio=\\\"15\\\">15GB</label>\\r\\n                                <label class=\\\"btn btn-default\\\" data-ng-model=\\\"btndisk.local_gb\\\" btn-radio=\\\"20\\\">20GB</label>\\r\\n                                <div class=\\\"input-group my_input_group\\\">\\r\\n                                  <!-- <input class=\\\"form-control\\\" type=\\\"number\\\" name=\\\"local_gb\\\"\\r\\n                                         required\\r\\n                                         data-ng-model=\\\"btndisk.local_gb\\\"\\r\\n                                         data-ng-pattern=\\\"/^\\\\s*([1-9]|[1-9][0-9]|[1-4][0-9]{2}|500)\\\\s*$/\\\"\\r\\n                                         data-ng-trim=\\\"false\\\"\\r\\n                                  > -->\\r\\n                                    <div class=\\\"input-number-wraper-sm\\\">\\r\\n                                        <input ui-input-number step=\\\"1\\\" max=\\\"1024\\\" min=\\\"5\\\" ng-model=\\\"btndisk.local_gb\\\" data-ng-trim=\\\"false\\\" required>\\r\\n                                    </div>\\r\\n                                    <span></span>\\r\\n                                    <div class=\\\"input-group-addon input-group-addon-disk\\\">GB</div>\\r\\n                                </div>\\r\\n                                <label style=\\\"right: -70px;\\\" class=\\\"note hardwarenote myhardwarenote\\\">5-1024GB</label>\\r\\n                            </div>\\r\\n                                \\r\\n                            <div style=\\\"margin-top: 15px;\\\">\\r\\n                                <a ng-hide=\\\"btndisks.length>1\\\" href=\\\"javascript:void(0);\\\" class=\\\"btn btn-default txt-color-blueLight\\\" data-ng-click=\\\"addbtndisk()\\\"><i class=\\\"fa fa-plus fa-lg\\\"></i></a>\\r\\n                                <a ng-hide=\\\"!btndisks.length\\\" href=\\\"javascript:void(0);\\\" class=\\\"btn btn-default txt-color-blueLight\\\" data-ng-click=\\\"minusbtndisk()\\\"><i class=\\\"fa fa-minus fa-lg\\\"></i></a>\\r\\n                                <span class=\\\"control-label\\\">&nbsp;\\r\\n                                    <span data-localize=\\\"增加\\\" data-ng-if=\\\"btndisks.length<2\\\">增加</span><span data-ng-if=\\\"btndisks.length==1\\\">/ </span><span data-localize=\\\"删除2\\\" data-ng-if=\\\"btndisks.length\\\">删除</span><span data-localize=\\\"数据盘\\\"></span>&nbsp;&nbsp;\\r\\n                                </span>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <div class=\\\"form-group\\\">\\r\\n                    <label class=\\\"col-xs-3\\\"></label>\\r\\n                    <div class=\\\"col-xs-6\\\">\\r\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-click=\\\"showAdvanceSceneOptionDialog()\\\" localize=\\\"高级\\\"></button>\\r\\n                    </div>\\r\\n                </div>\\r\\n            </form>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <!-- end widget content -->\\r\\n    <div class=\\\"quick-deploy-wait\\\" ng-if=\\\"unknowStep\\\">\\r\\n        <img src=\\\"img/loadingtext.gif\\\" class=\\\"loadingtext\\\"/>\\r\\n    </div>\\r\\n    <!--mask-->\\r\\n    <div ng-if=\\\"showMask\\\" class=\\\"deploy-mask\\\">\\r\\n        <p localize=\\\"DEPLOY-TIPS1\\\"></p>\\r\\n        <p localize=\\\"DEPLOY-TIPS2\\\"></p>\\r\\n    </div>\\r\\n</div>\\r\\n<script>setTimeout(function(){ pageSetUp(); })</script>\",\"views/vdi/system/desktop_detail.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span localize=\\\"运行状态\\\">运行状态</span>：<select class=\\\"selectclassroomName filter\\\" ng-change=\\\"changeStatus()\\\" ng-model=\\\"select\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\\\" localize=\\\"全部状态\\\">全部</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"running\\\" localize=\\\"开机状态\\\">开机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"shutdown\\\" localize=\\\"关机状态\\\">关机</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"paused\\\" localize=\\\"挂起状态\\\">挂起</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"migrating\\\" localize=\\\"迁移状态\\\">迁移</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"building\\\" localize=\\\"创建中状态\\\">创建中</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"error\\\" localize=\\\"错误状态\\\">错误</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"crashed\\\" localize=\\\"异常状态\\\">异常</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"nostate\\\" localize=\\\"未知异常状态\\\">未知异常</option>\\r\\n\\t\\t\\t\\t\\t\\t</select>&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"totalmess ng-binding\\\" localize=\\\"DESKTOP_TOTAL_MESS\\\"\\r\\n\\t\\t\\t\\t\\t\\t param1=\\\"{{(rows | filter:searchText | filter:{status:select}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param2=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'running'}).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t param3=\\\"{{(rows | filter:searchText | filter:{status:select} | filter:{status:'shutdown'}).length }}\\\"></span>\\t\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"#/system/desktop\\\"><i class=\\\"fa  icon-jj-recovery\\\"></i>&nbsp;<span localize=\\\"返回\\\">返回</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" href=\\\"javascript:\\\" ng-click=\\\"add()\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary\\\" data-ng-if=\\\"templateNum==0\\\" href=\\\"#/template/personal\\\"><i class=\\\"fa  icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增\\\">新增</span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"start()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-boot\\\"></i>&nbsp;<span localize=\\\"开机\\\">开机</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i>&nbsp;<span localize=\\\"关机\\\">关机</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"forceShutdown()\\\" href=\\\"javascript:\\\" ><span localize=\\\"强制关机\\\">强制关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a class=\\\"isBatch\\\" data-ng-click=\\\"natureShutdown()\\\" href=\\\"javascript:\\\"><span localize=\\\"自然关机\\\">自然关机</span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restart()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Restart\\\"></i>&nbsp;<span localize=\\\"重启\\\">重启</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"pause()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-pause\\\"></i>&nbsp;<span localize=\\\"暂停\\\">暂停</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"resume()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Recovery\\\"></i>&nbsp;<span localize=\\\"恢复\\\">恢复</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" data-ng-model=\\\"pagesize\\\" ng-change=\\\"pageSizeChange()\\\" input-number></input> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\"  class=\\\"form-control\\\" ng-model=\\\"searchText\\\" data-localize-placeholder=\\\"桌面名\\\" ng-change=\\\"updataData()\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-vertical-center table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"desktopSort\\\" ng-click=\\\"desktopSort = !desktopSort;sort('display_name', desktopSort)\\\" localize=\\\"桌面名\\\">桌面</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"runStatus\\\" ng-click=\\\"runStatus = !runStatus;sort('status', runStatus)\\\"  localize=\\\"运行状态\\\">运行状态</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><span localize=\\\"桌面\\\"></span>IP/MAC</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"CPU/内存\\\">CPU/内存</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"宿主机\\\">宿主机</th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-repeat=\\\"item in rows  | filter:searchText| paging:currentPage:pagesize \\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-contextmenu\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-id=\\\"{{ item.id }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\"  type=\\\"checkbox\\\" ng-click=\\\"select_network(item,$index);\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p title=\\\"{{item.instance_id}}\\\">{{ item.display_name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.usb_redir \\\" class=\\\"fa icon-jj-usb flag-icon\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.ha_enabled\\\" class=\\\"fa icon-jj-HA flag-icon\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span ng-if=\\\"item.status=='running'\\\" localize-title=\\\"开机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='shutdown'\\\" localize-title=\\\"关机状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='paused'\\\" localize-title=\\\"挂起状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='migrating'\\\" localize-title=\\\"迁移状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='building'\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-if=\\\"item.status=='error' ||item.status=='crashed' || item.status=='nostate'\\\" localize-title=\\\"错误状态\\\" class=\\\"status32\\\" ng-class=\\\"item.status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{ item.running_time }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p>{{ item.ips }}</p><p>{{ item.mac }}</p></td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.vcpu }} <span localize='核'></span> / {{item.memory_mb/1024 }}GB</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.hostname }}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"view_personal_desktop\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\"  data-ng-click=\\\"config(item)\\\" localize-title=\\\"配置桌面\\\"><i class=\\\"fa icon-jj-005\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" data-id=\\\"{{ item.image_id }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&system_desktop');return false;\\\" href=\\\"javascript:\\\" data-localize-title=\\\"编辑桌面\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status!=='shutdown' && currentItem.status!=='suspended'\\\"  data-ng-click=\\\"start(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"开机\\\">开机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-disabled=\\\"currentItem.status!=='running' && currentItem.status!=='suspended'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" ><span localize=\\\"关机\\\">关机</span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"forceShutdown(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='running' && currentItem.status!=='suspended'\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"强制关机\\\">强制关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"natureShutdown(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='running' && currentItem.status!=='suspended'\\\" ><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"自然关机\\\">自然关机</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"restart(currentItem)\\\"  ng-disabled=\\\"currentItem.status!=='running' && currentItem.status!=='suspended'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"重启\\\">重启</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"pause(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='running'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"暂停\\\">暂停</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"resume(currentItem)\\\" ng-disabled=\\\"currentItem.status!=='paused'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"恢复\\\">恢复</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"delete(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"删除\\\">删除</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_split\\\"></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-click=\\\"view(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"查看桌面\\\">查看桌面</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\" data-dialog=\\\"dynamicMigrationPersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_dynamic_migration.html\\\" ng-disabled=\\\"currentItem.status!=='running'\\\" data-error=\\\"开机状态才可进行动态迁移！\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"localize=\\\"动态迁移\\\">动态迁移</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\" data-dialog=\\\"alterPersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_alter.html\\\" data-error=\\\"关机状态才可进行桌面修改！\\\"  ng-disabled=\\\"currentItem.status!=='shutdown'\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"桌面修改\\\">桌面修改</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\"  data-dialog=\\\"saveTemplatePersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_save_template.html\\\" ng-disabled=\\\"currentItem.status!=='shutdown'\\\" data-error=\\\"关机状态才可执行存为模板操作！\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"  localize=\\\"COPY_TEM\\\">另存为模板</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\" data-ng-model=\\\"currentItem\\\" data-dialog=\\\"snapshotPersonalDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"desktop/personal_snapshot.html\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" localize=\\\"快照管理\\\">快照管理</a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end item -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/desktop.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-sm-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-12\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"addTemplateDialog\\\" data-dialog-size=\\\"lg\\\" data-dialog-url=\\\"system/template_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"systemTemplateRegisterDialog\\\" data-dialog-size=\\\"lg\\\" data-dialog-url=\\\"system/template_register.html\\\" href=\\\"javascript:\\\"><i class=\\\"con-jj-zhuche fa\\\"></i> <span data-localize=\\\"注册系统桌面\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive noborderbottom\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row teach_myrow\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-6 col-lg-4\\\" data-id=\\\"{{item.id}}\\\" data-ng-repeat=\\\"item in rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big relative\\\" data-ng-class=\\\"{'panel-darken':item.status!='alive','panel-primary':item.status=='alive'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"checkbox row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t<div class=\\\"col-md-1 col-sm-1 col-xs-1\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\" class=\\\"checkbox style-0\\\"><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h2 class=\\\"head-title col-md-11 col-sm-11 col-xs-11\\\" title=\\\"{{item.image_id}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span>{{item.name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"desc\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <div class=\\\"template panel-cont flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<div class=\\\"panel-pic\\\" style=\\\"position: relative;bottom: 10px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"mynote\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='update failed'\\\" data-localize=\\\"TEMPLATE_UPDATE_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='updating'\\\" data-localize=\\\"TEMPLATE_UPDATING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning'\\\" data-localize=\\\"TEMPLATE_CLONING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='sync failed'\\\" data-localize=\\\"TEMPLATE_SYNC_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='uploading'\\\" data-localize=\\\"UPLOADING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='register failed'\\\" data-localize=\\\"REGISTER_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning failed'\\\" data-localize=\\\"CLONING_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='reset failed'\\\" data-localize=\\\"RESET_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='error'\\\" data-localize=\\\"CREATE_FAILED\\\"></span>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='making'\\\" data-localize=\\\"MAKING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saving'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saveAs'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='installed'\\\" data-localize=\\\"INSTALLED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='syncing'\\\" data-localize=\\\"SYNCING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='building'\\\" data-localize=\\\"BUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='making seed'\\\" data-localize=\\\"MAKING_SEED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='registering'\\\" data-localize=\\\"REGESTER\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='rebuilding'\\\" data-localize=\\\"REBUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"pic-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/ajax-loader.gif\\\" data-ng-if=\\\"item.status =='making' || item.status =='syncing' || item.status == 'making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/{{ item.icon || 'win7.png' }}\\\" data-ng-if=\\\"item.status !== 'making' && item.status !== 'syncing' && item.status != 'making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div data-ng-if=\\\"item.status!='making' && item.status !='syncing' && item.status!='making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"pic-version\\\">{{item.os_type}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"memsize\\\">{{item.is_64==true? 64:32}}Bit</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"panel-status\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='running'\\\" localize-title=\\\"开机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='shutdown'\\\" localize-title=\\\"关机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='paused'\\\" localize-title=\\\"挂起状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='migrating'\\\" localize-title=\\\"迁移状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='building'\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='nostate'\\\" localize-title=\\\"未知状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='error' ||item.instance_status=='crashed'\\\" localize-title=\\\"错误状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='reboot'\\\" localize-title=\\\"重启中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='updating'\\\" localize-title=\\\"更新中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                  \\t<ul class=\\\"panel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"系统盘\\\" data-localize=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.updateSize?item.updateSize:item.system_size_desc}}G/{{item.system_size_total}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.data_size_desc}}G/{{item.data_size_total}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"关联桌面数\\\" data-localize=\\\"关联桌面数\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.instance_count}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"创建者\\\" data-localize=\\\"创建者\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.owner_desc}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label localize-title=\\\"创建时间\\\" data-localize=\\\"创建时间\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"item-flex\\\">{{item.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t                </ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t                 <div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='alive','primary':item.status=='alive'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"(item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed') && sync_mode == 'bt'\\\" onclick=\\\"window.open('templateModifybt.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name') + '&sytem_desktop');return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"(item.status=='alive' || item.status =='making' || item.status =='installed') && sync_mode == 'scp'\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name') + '&sytem_desktop');return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-ng-if=\\\"item.status=='alive'\\\" ng-class=\\\"{'limitItem': item.instance_status!=='shutdown'}\\\" data-ng-click=\\\"editSysdesktop(item)\\\" data-localize-title=\\\"配置桌面\\\"><i class=\\\"fa icon-jj-009\\\"></i></a>\\t\\r\\n\\t\\t\\t\\t\\t\\t                \\t<!-- <a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='alive'\\\" class=\\\"icon\\\" data-localize-title=\\\"另存为\\\" data-ng-click=\\\"copy(item)\\\"><i class=\\\"fa icon-jj-copy\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"more_list_container\\\">\\r\\n\\t\\t                \\t                \\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t                \\t                \\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t                \\t                \\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t</ul>\\r\\n\\t\\t                \\t                \\t\\t</div>\\r\\n\\t\\t                \\t                \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"icon\\\" data-ng-if=\\\"item.status =='update failed'\\\" data-id=\\\"{{ item.id }}\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type'),'_new','location=no,menubar=no,resizable=yes,scrollbars=yes,status=no,toolbar=no');return false;\\\" href=\\\"javascript:\\\" data-localize-title=\\\"查看详情\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/system/device.html\":\"<section >\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-options=\\\"pagesize for pagesize in pagesizes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\" width=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"设备名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"设备制造商\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>PID</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>VID</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"所属主机\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"透传到桌面\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\" ><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.made }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.PID }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.VID }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.host }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.desktop }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.desc }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a class=\\\"btn btn-xs btn-default\\\" data-ng-click=\\\"transmission()\\\" data-localize-title=\\\"透传\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/endlogs.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\">\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-3 text-right\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group left_side  col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\"  href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"deleteAll()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Empty\\\"></i>&nbsp;<span localize=\\\"清空\\\">清空</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" class=\\\"mysmallinput\\\" type=\\\"number\\\" data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"logPageSizeChange()\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\" input-number></input> <span localize=\\\"项结果\\\"></span> </div> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"userSort\\\" ng-click=\\\"userSort = !userSort;sort('user', userSort)\\\" localize=\\\"操作者\\\">操作者</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"contentSort\\\" ng-click=\\\"contentSort = !contentSort;sort('content', contentSort)\\\" localize=\\\"操作内容\\\">操作内容</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"timeSort\\\" ng-click=\\\"timeSort = !timeSort;sort('datetime', timeSort)\\\" localize=\\\"操作时间\\\">操作时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p class=\\\"text-overflow text-overflow-log\\\">{{ item.content }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.datetime |  date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-show=\\\"totalCount > 0\\\" class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div data-grid-pagination class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"PAGE\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ getStart() }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{ rows.length > 0 ? getStart() + rows.length - 1 : 0 }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{ totalCount }} \\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotal-items=\\\"totalCount\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"currentPage\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"logPageChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></pagination>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- widget div end -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/iso.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"form-group col-xs-4 col-sm-5\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-2\\\"><button class=\\\"btn btn-primary\\\" ng-disabled=\\\"isUploading\\\" ng-click=\\\"upload()\\\"><i class=\\\"icon icon-jj-Upload\\\"></i><span localize=\\\"上传\\\" ></span></button></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-9 upload-progress\\\" ng-show=\\\"isUploading\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"upload-cancel-icon icon  icon-jj-close-2\\\" ng-click=\\\"abortUpload()\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"progress-percent\\\">{{progressPercent}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress progress-xs\\\"><div class=\\\"progress-bar bg-color-blue\\\" role=\\\"progressbar\\\" ng-style=\\\"{'width':progressPercent}\\\"></div></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"upload-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"progress-word\\\" title=\\\"{{progressName}}\\\">{{progressName}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-8 col-sm-7\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"pull-right selectclassroomName filter\\\" ng-model=\\\"select\\\" ng-change=\\\"updateData(searchText,select)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option localize=\\\"所有\\\" value=''></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option localize=\\\"系统包\\\" value='system'></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option localize=\\\"软件包\\\" value='package'></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option localize=\\\"其它\\\" value='other'></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n                                        <th localize=\\\"路径\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"isoNameSort\\\" ng-click=\\\"isoNameSort = !isoNameSort;sort('name', isoNameSort)\\\" localize=\\\"ISO名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"大小\\\"></th>\\r\\n\\r\\n                                        <th ng-model=\\\"autoSort\\\" ng-click=\\\"autoSort = !autoSort;sort('support_auto_install', autoSort)\\\" localize=\\\"自动安装\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"系统类型\\\"></th>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"isoTimeSort\\\" ng-click=\\\"isoTimeSort = !isoTimeSort;sort('created_at', isoTimeSort)\\\" localize=\\\"上传时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p ng-show=\\\"!item.type_editable\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b ng-if=\\\"item.type=='system'\\\" localize=\\\"系统包\\\"></b>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b ng-if=\\\"item.type=='package'\\\" localize=\\\"软件包\\\"></b>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<b ng-if=\\\"item.type=='other'\\\" localize=\\\"其它\\\"></b>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<select ng-show=\\\"item.type_editable\\\" name=\\\"formSelectType\\\" ng-model=\\\"item.type\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"system\\\" localize=\\\"系统包\\\"></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"package\\\" localize=\\\"软件包\\\"></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"other\\\" localize=\\\"其它\\\"></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><div class=\\\"break_all\\\">{{ item.name }}</div></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.size && item.size>=1024\\\">{{ item.size/1024 | number:2 }}GB</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.size && item.size<1024\\\">{{ item.size | number:2 }}MB</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n                                        <td >\\r\\n                                        \\t<span localize=\\\"支持\\\" ng-if=\\\"item.support_auto_install\\\"></span>\\r\\n                                        \\t<span localize=\\\"不支持\\\" ng-if=\\\"!item.support_auto_install\\\"></span>\\r\\n                                        </td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td >\\r\\n                                            <span ng-show=\\\"!item.os_editable\\\">{{item.os_type.value}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<select ng-show=\\\"item.os_editable\\\" data-ng-model=\\\"item.os_type\\\" data-ng-options=\\\"os_type.value for os_type in os_types track by os_type.key\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.created_at | date:\\\"yyyy-MM-dd HH:mm:ss\\\"  }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"!item._editstatus\\\" ng-click=\\\"item._editstatus = true;edit(item);\\\" localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"item._editstatus\\\" ng-click=\\\"item._editstatus = false;cancel(item)\\\" localize-title=\\\"取消\\\"><i class=\\\"fa icon-jj-recovery\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"item._editstatus\\\" ng-click=\\\"change(item);item._editstatus = false\\\" localize-title=\\\"保存\\\"><i class=\\\"fa icon-jj-Preservation\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" localize-title=\\\"下载\\\" href='{{ domain }}/download/iso/{{item.name}}' download=\\\"{{ item.name }}\\\"><i class=\\\"fa icon-jj-Download\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"delete(item)\\\" localize-title=\\\"删除\\\"><i class=\\\"fa icon-jj-delete\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- widget div end -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>\\r\\npageSetUp();\\r\\n</script>\",\"views/vdi/system/logs.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group left_side  col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\"  href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-click=\\\"deleteAll()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-Empty\\\"></i>&nbsp;<span localize=\\\"清空\\\">清空</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <input min=\\\"1\\\" class=\\\"mysmallinput\\\" type=\\\"number\\\" data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"logPageSizeChange()\\\" data-ng-options=\\\"pagesize for pagesize in pagesizes\\\" input-number></input> <span localize=\\\"项结果\\\"></span> </div> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" data-ng-keyup='search($event)'></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"userSort\\\" ng-click=\\\"userSort = !userSort;sort('user', userSort)\\\" localize=\\\"操作者\\\">操作者</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"contentSort\\\" ng-click=\\\"contentSort = !contentSort;sort('content', contentSort)\\\" localize=\\\"操作内容\\\">操作内容</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"timeSort\\\" ng-click=\\\"timeSort = !timeSort;sort('datetime', timeSort)\\\" localize=\\\"操作时间\\\">操作时间</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows | paging:currentPage:pagesize\\\">\\r\\n\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p class=\\\"text-overflow text-overflow-log\\\" title=\\\"{{ item.content }}\\\">{{ item.content }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.datetime |  date:\\\"yyyy-MM-dd HH:mm:ss\\\" }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-show=\\\"totalCount > 0\\\" class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div data-grid-pagination class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"PAGE\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ getStart() }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{ rows.length > 0 ? getStart() + rows.length - 1 : 0 }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{ totalCount }} \\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotal-items=\\\"totalCount\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"currentPage\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"logPageChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></pagination>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- widget div end -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/set.html\":\"<section id=\\\"widget-grid\\\">\\r\\n    <div class=\\\"row\\\">\\r\\n        <article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n            <div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n                <!-- widget div-->\\r\\n                <div class=\\\"noborder sysSet\\\">\\r\\n                    <div class=\\\"widget-body no-padding\\\">\\r\\n                        <div ng-controller=\\\"vdiSystemRecycleController as RecycleCtrl\\\">\\r\\n                            <h4 localize='资源回收'></h4>\\r\\n                            <span class=\\\"desk-border\\\">&nbsp;</span>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <div class=\\\"col-xs-6\\\" style=\\\"padding-left: 25px;\\\">\\r\\n                                    <label class=\\\"col-xs-12 control-label\\\" for=\\\"time\\\" style=\\\"font-weight: 700\\\" localize=\\\"教学桌面\\\"></label>\\r\\n                                    <div class=\\\"col-xs-12\\\">\\r\\n                                        <div class=\\\"teach-desk\\\">\\r\\n                                            <label class=\\\"checkbox-inline checkbox-align week-label\\\">\\r\\n                                                <input \\r\\n                                                    class=\\\"checkbox\\\" \\r\\n                                                    type=\\\"checkbox\\\" \\r\\n                                                    name=\\\"start\\\" \\r\\n                                                    ng-model=\\\"RecycleCtrl.data.tecOpen\\\" \\r\\n                                                    ng-change='RecycleCtrl.setTechDefault(RecycleCtrl.data.tecOpen)'\\r\\n                                                    >\\r\\n                                                <span localize=\\\"启用\\\"></span>\\r\\n                                            </label>\\r\\n                                            <img src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"RecycleCtrl.techenabling\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\"><br/>\\r\\n                                            <div class=\\\"offline-connect\\\">\\r\\n                                                <span localize=\\\"断开连接\\\"></span>&nbsp;\\r\\n                                                <input class=\\\"form-control inline\\\" input-number\\r\\n                                                    type=\\\"text\\\" \\r\\n                                                    name=\\\"hours\\\" \\r\\n                                                    style=\\\"width:70px;padding-left: 5px;\\\"\\r\\n                                                    data-ng-pattern=\\\"/^(00[5-9]|0[5-9]|[5-9]|0[1-9][0-9]|[1-9][0-9]|[1-6][0-9][0-9]|7[0-1][0-9]|720)$/\\\"\\r\\n                                                    placeholder=\\\"5-720\\\" \\r\\n                                                    maxlength=\\\"3\\\"\\r\\n                                                    min=\\\"5\\\"  \\r\\n                                                    max=\\\"720\\\" \\r\\n                                                    ng-model=\\\"RecycleCtrl.data.tecDesk\\\" \\r\\n                                                    ng-disabled=\\\"!RecycleCtrl.techEdit || RecycleCtrl.techSave\\\"\\r\\n                                                    >\\r\\n                                                <span localize=\\\"after-minutes\\\"></span>\\r\\n                                                <select class=\\\"form-control inline\\\"\\r\\n                                                    style=\\\"width: 100px\\\" \\r\\n                                                    ng-model=\\\"RecycleCtrl.data.tecStatus\\\" \\r\\n                                                    ng-disabled=\\\"!RecycleCtrl.techEdit || RecycleCtrl.techSave\\\">\\r\\n                                                    <option value=\\\"shutdown\\\" localize=\\\"自然关机\\\"></option>\\r\\n                                                    <option value=\\\"suspend\\\" localize=\\\"挂起\\\"></option>\\r\\n                                                </select><br/>\\r\\n                                            </div>\\r\\n                                            <img class='recycleLoading' src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"RecycleCtrl.techSave\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                                            <div class=\\\"btn btn-primary btn-update\\\" ng-disabled=\\\"!RecycleCtrl.data.tecOpen\\\" ng-click=\\\"RecycleCtrl.techEdit = true\\\" ng-if=\\\"!RecycleCtrl.techEdit && !RecycleCtrl.techSave\\\" localize=\\\"更改\\\"></div>\\r\\n                                            <div class=\\\"btn btn-primary btn-save\\\" ng-disabled='RecycleCtrl.data.tecOpen && !RecycleCtrl.data.tecDesk' ng-click=\\\"RecycleCtrl.tecSave()\\\" ng-if=\\\"RecycleCtrl.techEdit && !RecycleCtrl.techSave\\\" localize=\\\"保存\\\"></div>\\r\\n                                            <div class=\\\"btn btn-primary btn-cencel\\\" ng-click=\\\"RecycleCtrl.techEdit = false;RecycleCtrl.getTech()\\\" ng-if=\\\"RecycleCtrl.techEdit && !RecycleCtrl.techSave\\\" localize=\\\"取消\\\"></div> \\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"col-xs-6\\\">\\r\\n                                    <label class=\\\"col-xs-12 control-label\\\" for=\\\"time\\\" style=\\\"font-weight: 700\\\" localize=\\\"个人桌面\\\"></label>\\r\\n                                    <div class=\\\"col-xs-12\\\">\\r\\n                                        <div class=\\\"teach-desk\\\">\\r\\n                                            <label class=\\\"checkbox-inline checkbox-align week-label\\\">\\r\\n                                                <input\\r\\n                                                    class=\\\"checkbox\\\"\\r\\n                                                    type=\\\"checkbox\\\"\\r\\n                                                    name=\\\"start\\\"\\r\\n                                                    ng-model=\\\"RecycleCtrl.submit.perOpen\\\"\\r\\n                                                    ng-change='RecycleCtrl.setPerDefault(RecycleCtrl.submit.perOpen)'\\r\\n                                                >\\r\\n                                                <span localize=\\\"启用\\\"></span>\\r\\n                                            </label>\\r\\n                                            <img src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"RecycleCtrl.perenabling\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\"><br/>\\r\\n                                            <div class=\\\"offline-connect\\\">\\r\\n                                                <span localize=\\\"断开连接\\\"></span>&nbsp;\\r\\n                                                <input type=\\\"text\\\" class=\\\"form-control inline\\\" input-number\\r\\n                                                    name=\\\"hours\\\" \\r\\n                                                    style=\\\"width:70px;padding-left: 5px;\\\" \\r\\n                                                    data-ng-pattern=\\\"/^(0[1-9]|[1-9]|[1-3][0-9]|4[0-8])$/\\\" \\r\\n                                                    maxlength=\\\"2\\\"\\r\\n                                                    min=\\\"1\\\"  \\r\\n                                                    max=\\\"48\\\" \\r\\n                                                    placeholder=\\\"1-48\\\"\\r\\n                                                    ng-model=\\\"RecycleCtrl.submit.perDesk\\\"\\r\\n                                                    ng-disabled=\\\"!RecycleCtrl.personEdit || RecycleCtrl.personSave\\\"\\r\\n                                                    >\\r\\n                                                <span localize=\\\"after-hours\\\"></span>\\r\\n                                                <select class=\\\"form-control inline\\\" style=\\\"width: 100px\\\" \\r\\n                                                        ng-model=\\\"RecycleCtrl.submit.perStatus\\\"\\r\\n                                                        ng-disabled=\\\"!RecycleCtrl.personEdit || RecycleCtrl.personSave\\\">\\r\\n                                                    <option value=\\\"shutdown\\\" localize=\\\"自然关机\\\"></option>\\r\\n                                                    <option value=\\\"suspend\\\" localize=\\\"挂起\\\"></option>\\r\\n                                                </select><br/>\\r\\n                                            </div>\\r\\n                                            <img class='recycleLoading' src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"RecycleCtrl.personSave\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                                            <div class=\\\"btn btn-primary btn-update\\\" ng-disabled=\\\"!RecycleCtrl.submit.perOpen\\\" ng-if=\\\"!RecycleCtrl.personEdit && !RecycleCtrl.personSave\\\" ng-click=\\\"RecycleCtrl.personEdit = true\\\" localize=\\\"更改\\\"></div>\\r\\n                                            <div class=\\\"btn btn-primary btn-save\\\" ng-disabled='RecycleCtrl.submit.perOpen && !RecycleCtrl.submit.perDesk' ng-if=\\\"RecycleCtrl.personEdit && !RecycleCtrl.personSave\\\" ng-click=\\\"RecycleCtrl.perSave()\\\" localize=\\\"保存\\\"></div>\\r\\n                                            <div class=\\\"btn btn-primary btn-cencel\\\" ng-if=\\\"RecycleCtrl.personEdit && !RecycleCtrl.personSave\\\" ng-click=\\\"RecycleCtrl.personEdit = false;RecycleCtrl.getPerson()\\\" localize=\\\"取消\\\"></div> \\r\\n                                        </div>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div ng-controller=\\\"vdiSystemOutsideController\\\" style=\\\"clear: both;\\\">\\r\\n                            <h4 localize='外网访问'></h4>\\r\\n                            <span class=\\\"desk-border\\\">&nbsp;</span>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <section class='outside'>\\r\\n                                    <form class=\\\"form-horizontal\\\" name=\\\"outsideFrom\\\" method=\\\"post\\\" ng-submit=\\\"outsideFrom.$valid\\\"  novalidate>\\r\\n                                        <div class=\\\"form-group\\\">\\r\\n                                            <label class=\\\"control-label col-xs-1\\\"></label>\\r\\n                                            <label class=\\\"control-label\\\">\\r\\n                                                <input type=\\\"checkbox\\\" data-ng-disabled=\\\"save_loading\\\" class=\\\"checkbox\\\" data-ng-change=\\\"start()\\\" data-ng-model=\\\"enable\\\">\\r\\n                                                <span data-localize=\\\"启用\\\"></span>\\r\\n                                                <img ng-show=\\\"enable_loading\\\" ng-src=\\\"img/loadingtext.gif\\\" width=\\\"16px\\\" height=\\\"16px\\\"/>\\r\\n                                            </label>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group\\\">\\r\\n                                            <label class=\\\"control-label col-xs-1\\\" data-localize=\\\"外网IP\\\"></label>\\r\\n                                            <div class=\\\"col-xs-2\\\" style=\\\"padding-left: 0\\\" data-ng-class=\\\"{'state-success':outsideFrom.IP.$valid && outsideFrom.IP.$dirty,'state-error':outsideFrom.IP.$invalid && outsideFrom.IP.$dirty, 'state-disabled': !enable}\\\">\\r\\n                                                <input class=\\\"form-control\\\" type=\\\"text\\\" name=\\\"IP\\\" format-ip ng-model=\\\"IP\\\">\\r\\n                                            </div>\\r\\n                                            <div>\\r\\n                                                <button type=\\\"submit\\\" name=\\\"button\\\" disabled=\\\"disabled\\\" class=\\\"btn btn-primary\\\"\\r\\n                                                        data-ng-disabled=\\\"outsideFrom.$invalid || !IP || !enable || enable_loading || save_loading || ips_loading\\\"\\r\\n                                                        data-ng-click=\\\"save()\\\" data-localize=\\\"保存\\\"></button>\\r\\n                                                <img ng-show=\\\"save_loading\\\" ng-src=\\\"img/loadingtext.gif\\\" width=\\\"16px\\\" height=\\\"16px\\\"/>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group\\\">\\r\\n                                            <label class=\\\"control-label col-xs-1\\\"></label>\\r\\n                                            <button class=\\\"btn btn-primary\\\"\\r\\n                                                    data-ng-disabled=\\\"outsideFrom.$invalid || !IP  || !enable || enable_loading || save_loading\\\"\\r\\n                                                    data-dialog=\\\"outsideAdvancedDialog\\\"\\r\\n                                                    data-dialog-size=\\\"sm\\\"\\r\\n                                                    data-dialog-url=\\\"system/outside_advanced.html\\\"\\r\\n                                                    data-localize=\\\"高级\\\"></button>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"form-group\\\">\\r\\n                                            <label class=\\\"control-label col-xs-1\\\" ></label>\\r\\n                                            <div class=\\\"col-xs-9\\\" style=\\\"padding-left: 0\\\">\\r\\n                                                <div class=\\\"tip\\\" data-localize='OUTER_IP_NOTE'></div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </form>\\r\\n                                </section>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div ng-controller=\\\"spiceConnectController as spiceCtrl\\\" style=\\\"clear: both;\\\">\\r\\n                            <h4 localize='连接模式'></h4>\\r\\n                            <span class=\\\"desk-border\\\">&nbsp;</span>\\r\\n                            <form class=\\\"form-horizontal\\\" name=\\\"spiceFrom\\\" method=\\\"post\\\" ng-submit=\\\"spiceFrom.$valid\\\"  novalidate>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"control-label col-xs-1\\\" data-localize=\\\"连接模式\\\"></label>\\r\\n                                    <div class=\\\"col-xs-2\\\" style=\\\"white-space: nowrap;\\\">\\r\\n                                        <select class=\\\"form-control inline\\\"\\r\\n                                            ng-model=\\\"spiceCtrl.mode\\\" \\r\\n                                            ng-disabled=\\\"!spiceCtrl.edit || spiceCtrl.save\\\">\\r\\n                                            <option value=\\\"always\\\" localize=\\\"高质量\\\"></option>\\r\\n                                            <option value=\\\"auto_glz\\\" localize=\\\"高流畅性\\\"></option>\\r\\n                                        </select>\\r\\n                                        <label>\\r\\n                                            <a href=\\\"javascript:void(0);\\\" style=\\\"margin-left: 10px\\\" rel=\\\"popover-hover\\\" data-ribbon-tips data-my-tips='spiceConnectTip' data-placement=\\\"right\\\" data-html=\\\"true\\\" data-content=\\\"\\\" data-original-title=\\\"\\\" title=\\\"\\\"><i class=\\\"fa fa-question-circle\\\"></i></a>\\r\\n                                        </label>\\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                <div class=\\\"form-group\\\">\\r\\n                                    <label class=\\\"control-label col-xs-1\\\"></label>\\r\\n                                    <div class=\\\"col-xs-2 text-right\\\">\\r\\n                                        <img class='recycleLoading' src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"spiceCtrl.save\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-disabled=\\\"spiceCtrl.loading\\\" ng-click=\\\"spiceCtrl.edit = true\\\" ng-if=\\\"!spiceCtrl.edit && !spiceCtrl.save\\\" localize=\\\"更改\\\"></div>\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-click=\\\"spiceCtrl.saveSpiceConnect()\\\" ng-if=\\\"spiceCtrl.edit && !spiceCtrl.save\\\" localize=\\\"保存\\\"></div>\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-click=\\\"spiceCtrl.edit = false;spiceCtrl.getSpiceConnect()\\\" ng-if=\\\"spiceCtrl.edit && !spiceCtrl.save\\\" localize=\\\"取消\\\" style=\\\"margin-left: 10px;\\\"></div> \\r\\n                                    </div>\\r\\n                                </div>\\r\\n                            </form>\\r\\n                        </div>\\r\\n                        <div ng-controller=\\\"vdiSystemtimeSyncController as SyncCtrl\\\">\\r\\n                            <h4 localize='时间同步'></h4>\\r\\n                            <span class=\\\"desk-border\\\">&nbsp;</span>\\r\\n                            <div class=\\\"form-group\\\">\\r\\n                                <section class='timeSync'>\\r\\n                                    <form class=\\\"form-horizontal\\\" name=\\\"timeSyncFrom\\\" style=\\\"float: left;\\\" novalidate>\\r\\n                                        <div class='col-xs-5'>\\r\\n                                            <label class=\\\"control-label\\\" for=\\\"time\\\" localize=\\\"时区\\\"></label>\\r\\n                                            <select style=\\\"margin: 10px 0;\\\" class=\\\"form-control\\\" ng-disabled='!SyncCtrl.modifyTime' ng-model=\\\"SyncCtrl.zone\\\" data-ng-options=\\\"'('+zone.offset+') '+zone.value for zone in SyncCtrl.zones\\\"></select>\\r\\n                                            <div  class='col-xs-12' style=\\\"padding: 0\\\">\\r\\n                                                <div class=\\\"col-xs-6\\\" style=\\\"padding-left: 0\\\">\\r\\n                                                    <p class=\\\"input-group\\\" style=\\\"margin: 0\\\">\\r\\n                                                        <span class=\\\"input-group-btn\\\">\\r\\n                                                            <button type=\\\"button\\\" class=\\\"btn btn-default\\\" ng-disabled='!SyncCtrl.modifyTime' data-ng-click=\\\"SyncCtrl.openStartDate($event)\\\" ><i class=\\\"glyphicon glyphicon-calendar\\\" ></i></button>\\r\\n                                                        </span>\\r\\n                                                        <input type=\\\"text\\\"\\r\\n                                                            scheduler-input\\r\\n                                                            placeholder=\\\"yyyy-mm-dd\\\" \\r\\n                                                            class=\\\"form-control\\\"\\r\\n                                                            datepicker-popup=\\\"yyyy-MM-dd\\\"\\r\\n                                                            data-ng-model=\\\"SyncCtrl.choose_time\\\"\\r\\n                                                            is-open=\\\"SyncCtrl.startDateOpened\\\"\\r\\n                                                            datepicker-options=\\\"SyncCtrl.startDateOptions\\\"\\r\\n                                                            show-weeks=\\\"false\\\"\\r\\n                                                            show-button-bar=\\\"false\\\"\\r\\n                                                            required\\r\\n                                                            ng-disabled='!SyncCtrl.modifyTime'\\r\\n                                                        >\\r\\n                                                    </p>\\r\\n                                                </div>\\r\\n                                                <div class=\\\"col-xs-2 hour\\\">\\r\\n                                                    <input input-number\\r\\n                                                        class=\\\"form-control\\\" \\r\\n                                                        type=\\\"text\\\" \\r\\n                                                        data-ng-pattern=\\\"/^(0[0-9]|[0-9]|1[0-9]|2[0-3])$/\\\" \\r\\n                                                        maxlength=\\\"2\\\"\\r\\n                                                        min=\\\"0\\\"\\r\\n                                                        max=\\\"23\\\"\\r\\n                                                        required\\r\\n                                                        ng-model=\\\"SyncCtrl.hours\\\"\\r\\n                                                        ng-disabled='!SyncCtrl.modifyTime'\\r\\n                                                        ng-change='SyncCtrl.loopTime=false'\\r\\n                                                        />\\r\\n                                                </div>\\r\\n                                                <div class=\\\"col-xs-2 minute\\\">\\r\\n                                                    <input input-number\\r\\n                                                        class=\\\"form-control\\\" \\r\\n                                                        type=\\\"text\\\"\\r\\n                                                        data-ng-pattern=\\\"/^(0[0-9]|[0-9]|[1-5][0-9])$/\\\" \\r\\n                                                        maxlength=\\\"2\\\"\\r\\n                                                        min=\\\"0\\\"\\r\\n                                                        max=\\\"59\\\"\\r\\n                                                        required\\r\\n                                                        ng-model=\\\"SyncCtrl.minutes\\\"\\r\\n                                                        ng-disabled='!SyncCtrl.modifyTime'\\r\\n                                                        ng-change='SyncCtrl.loopTime=false'\\r\\n                                                        />\\r\\n                                                </div>\\r\\n                                                <div class=\\\"col-xs-2 second\\\">\\r\\n                                                    <input input-number\\r\\n                                                        class=\\\"form-control\\\"\\r\\n                                                        data-ng-pattern=\\\"/^(0[0-9]|[0-9]|[1-5][0-9])$/\\\"\\r\\n                                                        maxlength=\\\"2\\\"\\r\\n                                                        min=\\\"0\\\"\\r\\n                                                        max=\\\"59\\\"\\r\\n                                                        required\\r\\n                                                        ng-model=\\\"SyncCtrl.seconds\\\"\\r\\n                                                        ng-disabled='!SyncCtrl.modifyTime'\\r\\n                                                        type=\\\"text\\\"\\r\\n                                                        ng-change='SyncCtrl.loopTime=false'\\r\\n                                                        />\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-xs-12 text-right\\\" style=\\\"padding: 0;margin: 15px 0 20px 0\\\">\\r\\n                                                <img src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"SyncCtrl.updating_zone\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                                                <button class=\\\"btn btn-primary\\\" data-ng-disabled='SyncCtrl.loading_zone || SyncCtrl.loading_internet || SyncCtrl.loading_updateServer' ng-if=\\\"!SyncCtrl.modifyTime\\\" ng-click=\\\"SyncCtrl.modifyTime = true\\\" localize=\\\"更改\\\"></button>\\r\\n                                                <button class=\\\"btn btn-primary\\\" data-ng-disabled='!SyncCtrl.hours || !SyncCtrl.minutes || !SyncCtrl.seconds || !matchInput' ng-if=\\\"SyncCtrl.modifyTime && !SyncCtrl.updating_zone\\\" ng-click=\\\"SyncCtrl.updateZone()\\\" localize=\\\"保存\\\"></button>\\r\\n                                                <button class=\\\"btn btn-primary\\\" ng-if=\\\"SyncCtrl.modifyTime && !SyncCtrl.updating_zone\\\" ng-click=\\\"SyncCtrl.modifyTime = false;SyncCtrl.loadZone()\\\" localize=\\\"取消\\\" style=\\\"margin-left: 10px\\\"></button>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                        <div class=\\\"col-xs-6 col-xs-offset-1 server\\\">\\r\\n                                            <div class=\\\"col-xs-12\\\">\\r\\n                                                <label>\\r\\n                                                    <input \\r\\n                                                        class=\\\"checkbox\\\" \\r\\n                                                        type=\\\"checkbox\\\" \\r\\n                                                        name=\\\"start\\\"\\r\\n                                                        ng-model=\\\"SyncCtrl.internetSync\\\" \\r\\n                                                        ng-disabled=\\\"SyncCtrl.loading_internet || SyncCtrl.loading_updateServer\\\"\\r\\n                                                        ng-change='SyncCtrl.setInternetSync(SyncCtrl.internetSync)'\\r\\n                                                        >\\r\\n                                                    <span localize=\\\"与Internet时间服务器同步(s)\\\"></span>\\r\\n                                                </label>\\r\\n                                                <img ng-if=\\\"SyncCtrl.loading_internet\\\" src=\\\"img/loadingtext.gif\\\" height=\\\"12\\\" width=\\\"12\\\">\\r\\n                                            </div>\\r\\n                                            <div class=\\\"col-xs-12\\\">\\r\\n                                                <label class=\\\"col-xs-3 control-label\\\" style=\\\"white-space: nowrap;\\\" for=\\\"network\\\" data-localize=\\\"服务器(E):\\\"></label>\\r\\n                                                <div class=\\\"col-xs-6\\\">\\r\\n                                                    <select class=\\\"form-control inline\\\" \\r\\n                                                            data-ng-options=\\\"server for server in SyncCtrl.servers\\\"\\r\\n                                                            ng-model=\\\"SyncCtrl.server\\\"\\r\\n                                                            ng-disabled='SyncCtrl.loading_updateServer'>\\r\\n                                                        <!-- <option value=\\\"\\\" localize=\\\"请选择\\\"></option> -->\\r\\n                                                    </select>\\r\\n                                                </div>\\r\\n                                                <div class=\\\"col-xs-3\\\">\\r\\n                                                    <img ng-if='SyncCtrl.loading_updateServer' src=\\\"img/loadingtext.gif\\\" height=\\\"24\\\" width=\\\"24\\\">\\r\\n                                                    <button ng-if='!SyncCtrl.loading_updateServer' class=\\\"btn btn-primary immediateSync\\\" ng-click=\\\"SyncCtrl.updateSyncServer()\\\" localize=\\\"立即同步\\\"></button>\\r\\n                                                </div>\\r\\n                                            </div>\\r\\n                                        </div>\\r\\n                                    </form>\\r\\n                                </section>\\r\\n                            </div>\\r\\n                        </div>\\r\\n                        <div ng-controller='vdiSystemAutoclearController as clearCtrl'>\\r\\n                            <h4 localize='共享磁盘自动清理时间'></h4>\\r\\n                            <span class=\\\"desk-border\\\">&nbsp;</span>\\r\\n                            <form class=\\\"form-horizontal\\\" name=\\\"clearFrom\\\" method=\\\"post\\\" ng-submit=\\\"clearFrom.$valid\\\" style=\\\"padding-left: 25px\\\" novalidate>\\r\\n                                <div class=\\\"form-group col-xs-12\\\" style=\\\"font-weight: 700\\\" localize=\\\"教学桌面\\\"></div>\\r\\n                                <div class=\\\"form-group col-xs-5 clearTime\\\">\\r\\n                                    <label class=\\\"control-label col-xs-1\\\" data-localize=\\\"每\\\" style=\\\"padding-right: 0\\\"></label>\\r\\n                                    <div class=\\\"col-xs-5\\\">\\r\\n                                        <select class=\\\"form-control inline\\\" ng-disabled='!clearCtrl.edit || clearCtrl.save' ng-model=\\\"clearCtrl.day\\\">\\r\\n                                            <option value=\\\"Mon\\\" data-localize=\\\"周一\\\">周一</option>\\r\\n                                            <option value=\\\"Tue\\\" data-localize=\\\"周二\\\">周二</option>\\r\\n                                            <option value=\\\"Wed\\\" data-localize=\\\"周三\\\">周三</option>\\r\\n                                            <option value=\\\"Thu\\\" data-localize=\\\"周四\\\">周四</option>\\r\\n                                            <option value=\\\"Fri\\\" data-localize=\\\"周五\\\">周五</option>\\r\\n                                            <option value=\\\"Sat\\\" data-localize=\\\"周六\\\">周六</option>\\r\\n                                            <option value=\\\"Sun\\\" data-localize=\\\"周日\\\">周日</option>\\r\\n                                        </select>\\r\\n                                    </div>\\r\\n                                    <div class=\\\"col-xs-2 hour\\\">\\r\\n                                        <input input-number\\r\\n                                            class=\\\"form-control\\\" \\r\\n                                            type=\\\"text\\\" \\r\\n                                            data-ng-pattern=\\\"/^(0[0-9]|[0-9]|1[0-9]|2[0-3])$/\\\" \\r\\n                                            maxlength=\\\"2\\\"\\r\\n                                            min=\\\"0\\\"\\r\\n                                            max=\\\"23\\\"\\r\\n                                            required\\r\\n                                            ng-model=\\\"clearCtrl.hours\\\"\\r\\n                                            ng-disabled='!clearCtrl.edit || clearCtrl.save'\\r\\n                                            />\\r\\n                                    </div>\\r\\n                                    <div class=\\\"col-xs-2 minute\\\">\\r\\n                                        <input input-number\\r\\n                                            class=\\\"form-control\\\" \\r\\n                                            type=\\\"text\\\"\\r\\n                                            data-ng-pattern=\\\"/^(0[0-9]|[0-9]|[1-5][0-9])$/\\\" \\r\\n                                            maxlength=\\\"2\\\"\\r\\n                                            min=\\\"0\\\"\\r\\n                                            max=\\\"59\\\"\\r\\n                                            required\\r\\n                                            ng-model=\\\"clearCtrl.minutes\\\"\\r\\n                                            ng-disabled='!clearCtrl.edit || clearCtrl.save'\\r\\n                                            />\\r\\n                                    </div>\\r\\n                                    <div class=\\\"col-xs-2 second\\\">\\r\\n                                        <input input-number\\r\\n                                            class=\\\"form-control\\\"\\r\\n                                            data-ng-pattern=\\\"/^(0[0-9]|[0-9]|[1-5][0-9])$/\\\"\\r\\n                                            maxlength=\\\"2\\\"\\r\\n                                            min=\\\"0\\\"\\r\\n                                            max=\\\"59\\\"\\r\\n                                            required\\r\\n                                            ng-model=\\\"clearCtrl.seconds\\\"\\r\\n                                            ng-disabled='!clearCtrl.edit || clearCtrl.save'\\r\\n                                            type=\\\"text\\\"\\r\\n                                            />\\r\\n                                    </div>\\r\\n                                    <div class=\\\"col-xs-12 text-right\\\" style=\\\"padding-right: 0;margin-top: 15px;\\\">\\r\\n                                        <img class='recycleLoading' src=\\\"img/loadingtext.gif\\\" data-ng-if=\\\"clearCtrl.save\\\" height=\\\"24\\\" width=\\\"24\\\" alt=\\\"\\\">\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-disabled=\\\"clearCtrl.loading\\\" ng-click=\\\"clearCtrl.edit = true\\\" ng-if=\\\"!clearCtrl.edit && !clearCtrl.save\\\" localize=\\\"更改\\\"></div>\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-disabled=\\\"!clearCtrl.hours || !clearCtrl.minutes || !clearCtrl.seconds\\\" ng-click=\\\"clearCtrl.saveClearTime()\\\" ng-if=\\\"clearCtrl.edit && !clearCtrl.save\\\" localize=\\\"保存\\\"></div>\\r\\n                                        <div class=\\\"btn btn-primary\\\" ng-click=\\\"clearCtrl.edit = false;clearCtrl.getClearTime()\\\" ng-if=\\\"clearCtrl.edit && !clearCtrl.save\\\" localize=\\\"取消\\\" style=\\\"margin-left: 10px;\\\"></div> \\r\\n                                    </div>\\r\\n                                </div>\\r\\n                                \\r\\n                            </form>\\r\\n                        </div>\\r\\n                    </div>\\r\\n                </div>\\r\\n                <!-- widget div end -->\\r\\n            </div>\\r\\n        </article>\\r\\n    </div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/system/snapshot.html\":\"<section >\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-ng-click=\\\"add()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-options=\\\"pagesize for pagesize in pagesizes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\" width=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"resource_pool_nameSort = !resource_pool_nameSort;sort('resource_pool_name', resource_pool_nameSort)\\\" data-localize=\\\"资源池\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"dateSort\\\" ng-click=\\\"dateSort = !dateSort;sort('date', dateSort)\\\" data-localize=\\\"周期\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"activeSort\\\" ng-click=\\\"activeSort = !activeSort;sort('active', activeSort)\\\" data-localize=\\\"启用状态\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\" ><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.description }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.resource_pool_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td ng-if=\\\"item.period=='weekly'\\\"><span data-localize='每周{{ item.week_date }}'></span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td ng-if=\\\"item.period=='monthly'\\\"><span data-localize='每月{{ item.month_date }}'></span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"switch\\\" ng-if=\\\"!item.active_loadding\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"start_interval\\\" class=\\\"switch-checkbox\\\" id=\\\"start_interval{{$index}}\\\" ng-model=\\\"item.active\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"switch-label\\\" data-swchon-text=\\\"ON\\\" data-swchoff-text=\\\"OFF\\\" ng-click=\\\"active(item)\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<img ng-src=\\\"img/loadingtext.gif\\\" ng-if=\\\"item.active_loadding\\\" height=\\\"24\\\" width=\\\"24\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"edit(item)\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" ng-click=\\\"view(item)\\\" data-localize-title=\\\"查看详情\\\"><i class=\\\"fa icon-jj-look\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a ng-click=\\\"edit(currentItem)\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a ng-click=\\\"view(currentItem)\\\" data-localize=\\\"查看详情\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-localize=\\\"删除\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/through.html\":\"<section >\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-options=\\\"pagesize for pagesize in pagesizes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form\\\" width=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"manufacturerSort\\\" ng-click=\\\"manufacturerSort = !manufacturerSort;sort('manufacturer', manufacturerSort)\\\" data-localize=\\\"设备名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"所属资源池/主机\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"桌面类型/透传桌面名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.manufacturer }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.resource_info }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span localize=\\\"无\\\" ng-if=\\\"item.display_name == ''\\\"></span><span>{{ item.display_name }}</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" ng-if=\\\"item.display_name==''\\\" ng-click=\\\"through(item)\\\" data-localize-title=\\\"绑定桌面\\\"><i class=\\\"icon-041\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" ng-if=\\\"item.display_name!==''\\\" ng-click=\\\"editThrough(item)\\\" data-localize-title=\\\"编辑绑定桌面\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-default\\\" ng-if=\\\"item.display_name!==''\\\" ng-click=\\\"cancelThrough(item)\\\" data-localize-title=\\\"取消绑定桌面\\\"><i class=\\\"fa icon-040\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li ng-if=\\\"currentItem.display_name==''\\\" class=\\\"menu_item\\\" ><a ng-click=\\\"through(currentItem)\\\" data-localize=\\\"绑定桌面\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li ng-if=\\\"currentItem.display_name!==''\\\" class=\\\"menu_item\\\" ><a ng-click=\\\"editThrough(currentItem)\\\" data-localize=\\\"编辑绑定桌面\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li ng-if=\\\"currentItem.display_name!==''\\\" class=\\\"menu_item\\\" ><a ng-click=\\\"cancelThrough(currentItem)\\\" data-localize=\\\"取消绑定桌面\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/upgrade.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"类型\\\">类型</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"当前版本\\\">当前版本</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"升级包\\\">升级包</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"已升级组件数/组件总数\\\">已升级组件数/组件总数</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th localize=\\\"操作\\\">操作</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat-start=\\\"arr in rows\\\"></tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat=\\\"item in arr\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td class=\\\"nowrap\\\">{{ item.type }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.version }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.newer_version }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.new_client_count}}/{{ item.client_count }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td ng-show=\\\"$first\\\" rowspan=\\\"{{arr.length}}\\\" class=\\\"ver_middle\\\" width=\\\"340\\\" height=\\\"35\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"updata-btn-wraper\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default left margin-r-10\\\"  ng-click=\\\"upgrade(item)\\\" localize-title=\\\"立即升级\\\" data-ng-show=\\\"item.need_update && item.newer_version\\\"><i class=\\\"fa  icon-jj-update\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default left margin-r-10\\\" ng-click=\\\"viewDetail(item.owner)\\\" localize-title=\\\"查看未升级组件详情\\\" ng-show=\\\"(item.new_client_count < item.client_count) && (item.owner=='win_client' || item.owner=='lin_client' || item.owner=='arm_client' || item.owner=='android_client')\\\"><i class=\\\"fa icon-jj-look\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ng-show=\\\"item.updatable\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-web-upload=\\\"upgrade_bin_upload{{item._idx}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-upload-config=\\\"uploadConfig\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-upload-limit=\\\"10G\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-upload-type=\\\"{{item.packtype}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-upload-btn-name=\\\"上传系统包\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t template-url=\\\"views/vdi/common/ui-web-upload2.html\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t ui-upload-url=\\\"/thor/admin/upgrade/{{item.owner}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t finish-handel=\\\"finish()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-repeat-end></tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\"  localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- widget div end -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<style>\\r\\n\\r\\n#uploadISO-queue{\\r\\n\\tfloat:left;\\r\\n\\theight:32px;\\r\\n}\\r\\n</style>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/system/usb.html\":\"<section >\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-dialog=\\\"addSystemUSBDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"system/system_usb_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-options=\\\"pagesize for pagesize in pagesizes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\" width=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th ng-model=\\\"idSort\\\" ng-click=\\\"idSort = !idSort;sort('id', idSort)\\\" data-localize=\\\"id\\\"></th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"class_idSort\\\" ng-click=\\\"class_idSort = !class_idSort;sortClass_id(class_idSort)\\\" data-localize=\\\"USB_GROUP\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"prioritySort\\\" ng-click=\\\"prioritySort = !prioritySort;sort('priority', prioritySort)\\\" data-localize=\\\"优先级\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"rule_nameSort\\\" ng-click=\\\"rule_nameSort = !rule_nameSort;sort('rule_name', rule_nameSort)\\\" data-localize=\\\"RULE_NAME\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"product_idSort\\\" ng-click=\\\"product_idSort = !product_idSort;sort('product_id', product_idSort)\\\" data-localize=\\\"PID\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"vendor_idSort\\\" ng-click=\\\"vendor_idSort = !vendor_idSort;sort('vendor_id', vendor_idSort)\\\" data-localize=\\\"VID\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"allowSort\\\" ng-click=\\\"allowSort = !allowSort;sort('allow', allowSort)\\\" data-localize=\\\"IS_REDIRECT\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\" ><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td>{{ item.id }}</td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.class_id.value }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.priority }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.rule_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.product_id == -1? \\\"-1\\\": item.product_id.indexOf(\\\"0x\\\")>-1 ? item.product_id.substring(2): item.product_id}}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.vendor_id == -1? \\\"-1\\\": item.vendor_id.indexOf(\\\"0x\\\")>-1 ? item.vendor_id.substring(2): item.vendor_id }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-localize=\\\"{{ item.allow == true ? '是':'否' }}\\\"></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editSystemUSBDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"system/system_usb_edit.html\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-dialog=\\\"editSystemUSBDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"system/system_usb_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-localize=\\\"删除\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\\r\\n<script>pageSetUp();</script>\",\"views/vdi/template/hardware.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs \\\" data-dialog=\\\"addHardwareTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_hardware_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive noborderbottom\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-4 col-sm-3\\\" data-id=\\\"{{item.id}}\\\" data-ng-repeat=\\\"item in rows\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big relative panel-primary\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-heading smart-form mypanelhead hardwarepanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"checkbox row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t<div class=\\\"col-md-2 col-sm-2 col-xs-2\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\" class=\\\"checkbox style-0\\\"><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h2 class=\\\"head-title col-md-10 col-sm-10 col-xs-10\\\" title=\\\"{{item.name}}\\\">{{item.name}}</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <div class=\\\"panel-cont panel-cont flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<img ng-src=\\\"img/hardware_model.png\\\" class=\\\"panel-picture\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    <ul class=\\\"panel-mess mypanel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"CPU\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.cpu_num}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"内存\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.memory_mb/1024}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.system_gb}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\" data-ng-if=\\\"item.local_gb>1\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"item-flex\\\">{{item.local_gb}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\" data-ng-if=\\\"item.local_gb1>1\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"item-flex\\\">{{item.local_gb1}}G</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-footbar primary hardware_panelfooter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/template/personal.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-sm-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-12\\\" style=\\\"padding-left: 8px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"totalmess\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"TEMPLATE_DESC\\\"\\r\\n\\t\\t                    data-localize-title=\\\"HELP\\\"\\r\\n\\t\\t                    param1=\\\"{{ (rows | filter:searchText).length }}\\\"\\r\\n\\t\\t                    param2=\\\"{{ (rows | filter:searchText | filter:{instance_status: 'running'}).length }}\\\"\\r\\n\\t\\t                    param3=\\\"{{ (rows | filter:searchText | filter:{instance_status: 'shutdown'}).length }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"addPersonalTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_personal_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"registerPersonalTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_teach_register.html\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-zhuche fa\\\"></i> <span data-localize=\\\"注册\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"shutdown()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-shutdown fa\\\"></i> <span data-localize=\\\"关机\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" ng-model=\\\"order\\\" data-ng-options=\\\"order.name for order in orders\\\" data-ng-change=\\\"sortTem(order.val)\\\"></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" style=\\\"height: 22px;\\\" ng-model=\\\"select\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"all\\\" data-localize=\\\"全部状态\\\"></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"kvm\\\">kvm</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"hyper-v\\\">hyper-v</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive noborderbottom\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row teach_myrow\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-6 col-lg-4\\\" data-id=\\\"{{item.id}}\\\" style=\\\"height: 289px;\\\" data-ng-repeat=\\\"item in rows | filter:searchText\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big relative\\\" data-ng-class=\\\"{'panel-darken':item.status!='alive','panel-primary':item.status=='alive'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"checkbox row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t<div class=\\\"col-md-1 col-sm-1 col-xs-1\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\" class=\\\"checkbox style-0\\\"><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h2 class=\\\"head-title col-md-11 col-sm-11 col-xs-11\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span title=\\\"{{item.image_id}}\\\">{{item.name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div title=\\\"{{ item.description }}\\\" class=\\\"desc\\\">{{ item.description }}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <div class=\\\"template panel-cont flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<div class=\\\"panel-pic\\\" style=\\\"position: relative;bottom: 10px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"mynote\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='update failed'\\\" data-localize=\\\"TEMPLATE_UPDATE_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='updating'\\\" data-localize=\\\"TEMPLATE_UPDATING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning'\\\" data-localize=\\\"TEMPLATE_CLONING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='sync failed'\\\" data-localize=\\\"TEMPLATE_SYNC_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='uploading'\\\" data-localize=\\\"UPLOADING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='register failed'\\\" data-localize=\\\"REGISTER_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning failed'\\\" data-localize=\\\"CLONING_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='reset failed'\\\" data-localize=\\\"RESET_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='error'\\\" data-localize=\\\"CREATE_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='making'\\\" data-localize=\\\"MAKING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saving'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saveAs'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='installed'\\\" data-localize=\\\"INSTALLED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='syncing'\\\" data-localize=\\\"SYNCING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='building'\\\" data-localize=\\\"BUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='registering'\\\" data-localize=\\\"REGESTER\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='rebuilding'\\\" data-localize=\\\"REBUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"pic-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/ajax-loader.gif\\\" data-ng-if=\\\"item.status =='making' || item.status =='syncing'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/{{ item.icon || 'win7.png' }}\\\" data-ng-if=\\\"item.status !== 'making' && item.status !== 'syncing'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div data-ng-if=\\\"item.status!='making' && item.status !='syncing'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"pic-version\\\">{{item.os_type}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"memsize\\\">{{item.is_64==true? 64:32}}Bit</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"panel-status\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='running'\\\" localize-title=\\\"开机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='shutdown'\\\" localize-title=\\\"关机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='paused'\\\" localize-title=\\\"挂起状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='migrating'\\\" localize-title=\\\"迁移状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='building'\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='nostate'\\\" localize-title=\\\"未知状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='error' ||item.instance_status=='crashed'\\\" localize-title=\\\"错误状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='reboot'\\\" localize-title=\\\"重启中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='updating'\\\" localize-title=\\\"更新中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    <ul class=\\\"panel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"系统盘\\\" data-localize-title=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.updateSize?item.updateSize:item.system_size_desc}}G/{{item.system_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"数据盘\\\" data-localize-title=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.data_size_desc}}G/{{item.data_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"关联桌面数\\\" data-localize-title=\\\"关联桌面数\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.instance_count}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"创建者\\\" data-localize-title=\\\"创建者\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.owner_desc}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"创建时间\\\" data-localize-title=\\\"创建时间\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"item-flex\\\">{{item.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='alive','primary':item.status=='alive'}\\\">\\r\\n\\t\\t                                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='kvm' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name') +'&personal');return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t                                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='hyper-v' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModify_rdp.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name') +'&personal');return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='alive'\\\" class=\\\"icon\\\" data-localize-title=\\\"COPY_TEM\\\" data-ng-click=\\\"copy(item)\\\"><i class=\\\"fa icon-jj-copy\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='alive'\\\" class=\\\"icon\\\" data-localize-title=\\\"下载模版\\\" download-url urls=\\\"{{item.download_image_uuid}}\\\"><i class=\\\"fa icon-jj-Download\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span class=\\\"mylili\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\" data-ng-class=\\\"{disabled_ico:item.instance_count > 0? true:false}\\\"></i></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 0? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"more_list_container\\\">\\r\\n\\t\\t                \\t                \\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t                \\t                \\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t                \\t                \\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-class=\\\"{disabled:item.instance_status!=='shutdown'}\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"modify(item)\\\" ng-disabled=\\\"item.instance_status!=='shutdown'\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-009\\\"></span> <span data-localize=\\\"配置属性\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive' && !item.rbd_enabled\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"imgManage(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-Template\\\"></span> <span data-localize=\\\"镜像管理\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"resetTemp(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-Recovery\\\"></span> <span data-localize=\\\"重置模板\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"detail(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-013\\\"></span> <span data-localize=\\\"模板详情\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除模版\\\" style=\\\"padding-left: 3px\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t</ul>\\r\\n\\t\\t                \\t                \\t\\t</div>\\r\\n\\t\\t                \\t                \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"icon\\\" data-ng-if=\\\"item.status =='update failed'\\\" data-id=\\\"{{ item.id }}\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type'));return false;\\\" href=\\\"javascript:\\\" data-localize-title=\\\"查看详情\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\",\"views/vdi/template/teach.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-sm-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-12\\\" style=\\\"padding-left: 8px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"totalmess\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"TEMPLATE_DESC\\\"\\r\\n\\t\\t                    data-localize-title=\\\"HELP\\\"\\r\\n\\t\\t                    param1=\\\"{{ (rows | filter:searchText).length }}\\\"\\r\\n\\t\\t                    param2=\\\"{{ (rows | filter:searchText | filter:{instance_status: 'running'}).length }}\\\"\\r\\n\\t\\t                    param3=\\\"{{ (rows | filter:searchText | filter:{instance_status: 'shutdown'}).length }}\\\">\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"addTeachTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_teach_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-dialog=\\\"registerTeachTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_teach_register.html\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-zhuche fa\\\"></i> <span data-localize=\\\"注册\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"shutdown()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-shutdown fa\\\"></i> <span data-localize=\\\"关机\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" ng-model=\\\"order\\\" data-ng-options=\\\"order.name for order in orders\\\" data-ng-change=\\\"sortTem(order.val)\\\"></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<select class=\\\"selectclassroomName filter\\\" style=\\\"height: 22px;\\\" ng-model=\\\"select\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"all\\\" data-localize=\\\"全部状态\\\"></option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"kvm\\\">kvm</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"hyper-v\\\">hyper-v</option>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</select>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive noborderbottom\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-6 col-lg-4\\\" data-id=\\\"{{item.id}}\\\" style=\\\"height: 289px;\\\" data-ng-repeat=\\\"item in rows | filter:searchText\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big relative\\\" data-ng-class=\\\"{'panel-darken':item.status!='alive','panel-primary':item.status=='alive'}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-heading smart-form mypanelhead\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"checkbox row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t<div class=\\\"col-md-1 col-sm-1 col-xs-1\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\" class=\\\"checkbox style-0\\\"><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<h2 class=\\\"head-title col-md-11 col-sm-11 col-xs-11\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span title=\\\"{{item.image_id}}\\\">{{item.name}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div title=\\\"{{ item.description }}\\\" class=\\\"desc\\\">{{ item.description }}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <div class=\\\"template panel-cont flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<div class=\\\"panel-pic\\\" style=\\\"position: relative;bottom: 10px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"mynote\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='update failed'\\\" data-localize=\\\"TEMPLATE_UPDATE_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='updating'\\\" data-localize=\\\"TEMPLATE_UPDATING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning'\\\" data-localize=\\\"TEMPLATE_CLONING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='sync failed'\\\" data-localize=\\\"TEMPLATE_SYNC_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='uploading'\\\" data-localize=\\\"UPLOADING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='register failed'\\\" data-localize=\\\"REGISTER_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='cloning failed'\\\" data-localize=\\\"CLONING_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='reset failed'\\\" data-localize=\\\"RESET_FAILED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='error'\\\" data-localize=\\\"CREATE_FAILED\\\"></span>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='making'\\\" data-localize=\\\"MAKING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saving'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='saveAs'\\\" data-localize=\\\"SAVING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='installed'\\\" data-localize=\\\"INSTALLED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='syncing'\\\" data-localize=\\\"SYNCING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='building'\\\" data-localize=\\\"BUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='making seed'\\\" data-localize=\\\"MAKING_SEED\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='registering'\\\" data-localize=\\\"REGESTER\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<span data-ng-if=\\\"item.status=='rebuilding'\\\" data-localize=\\\"REBUILDING\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"pic-wrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/ajax-loader.gif\\\" data-ng-if=\\\"item.status =='making' || item.status =='syncing' || item.status == 'making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<img ng-src=\\\"img/{{ item.icon || 'win7.png' }}\\\" data-ng-if=\\\"item.status !== 'making' && item.status !== 'syncing' && item.status != 'making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div data-ng-if=\\\"item.status!='making' && item.status !='syncing' && item.status!='making seed'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"pic-version\\\">{{item.os_type}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<p class=\\\"memsize\\\">{{item.is_64==true? 64:32}}Bit</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"panel-status\\\" >\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='running'\\\" localize-title=\\\"开机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='shutdown'\\\" localize-title=\\\"关机状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='paused'\\\" localize-title=\\\"挂起状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='migrating'\\\" localize-title=\\\"迁移状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='building'\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='nostate'\\\" localize-title=\\\"未知状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='error' ||item.instance_status=='crashed'\\\" localize-title=\\\"错误状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='reboot'\\\" localize-title=\\\"重启中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<span ng-if=\\\"item.instance_status=='updating'\\\" localize-title=\\\"更新中状态\\\" class=\\\"status50\\\" ng-class=\\\"item.instance_status\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    <ul class=\\\"panel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"系统盘\\\" data-localize-title=\\\"系统盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.updateSize?item.updateSize:item.system_size_desc}}G/{{item.system_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"数据盘\\\" data-localize-title=\\\"数据盘\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.data_size_desc}}G/{{item.data_size_total}}G <span class=\\\"template\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"关联桌面数\\\" data-localize-title=\\\"关联桌面数\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.instance_count}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"创建者\\\" data-localize-title=\\\"创建者\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.owner_desc}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"创建时间\\\" data-localize-title=\\\"创建时间\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"item-flex\\\">{{item.created_at | date:'yyyy-MM-dd HH:mm:ss'}}</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='alive','primary':item.status=='alive'}\\\" data-ng-if=\\\"sync_mode == 'bt'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                \\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"item.virtual_type=='kvm' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModifybt.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--html5 spice\\t\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='kvm' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('js/vdi-spice/spiceModifybt.html#?id=' + this.getAttribute('data-id') + '&os_type=' + this.getAttribute('data-os-type') + '&name=' + this.getAttribute('data-name')+'&instance_id='+this.getAttribute('data-instance-id'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"item.virtual_type=='hyper-v' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModifybt_rdp.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--html5 spice\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='hyper-v' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('js/vdi-spice/spiceModifybt_rdp.html#?id=' + this.getAttribute('data-id') + '&os_type=' + this.getAttribute('data-os-type') + '&name=' + this.getAttribute('data-name')+'&instance_id='+this.getAttribute('data-instance-id'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:\\\" class=\\\"icon\\\" data-ng-if=\\\"item.status=='alive' || item.status=='sync failed'\\\" data-localize-title=\\\"SYNC_TEM\\\" data-ng-click=\\\"sync(item)\\\"><i class=\\\"fa icon-jj-send\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a data-ng-if=\\\"item.sync_status.length\\\" href=\\\"javascript:\\\"  class=\\\"icon\\\" data-localize-title=\\\"模板分布\\\" data-ng-click=\\\"syncTem(item)\\\"><i data-ng-if=\\\"item.syncFaild\\\" class=\\\"fa icon-jj-back\\\"></i><i data-ng-if=\\\"!(item.syncFaild || item.syncing)\\\" class=\\\"fa icon-jj-look\\\"></i><i data-ng-if=\\\"item.syncing\\\" class=\\\"fa icon-jj-more\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a data-ng-if=\\\"item.sync_status.length\\\" href=\\\"javascript:\\\"  class=\\\"icon\\\" data-localize-title=\\\"模板分布\\\" data-ng-click=\\\"syncTem(item)\\\"><i data-ng-class=\\\"{'failed': item.sync_status.syncFaild, 'normal': !(item.sync_status.syncFaild || item.sync_status.syncing), 'syncing': item.sync_status.syncing}\\\" class=\\\"fa icon-jj-look syncTemIco\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a data-ng-if=\\\"item.sync_status.length\\\" href=\\\"javascript:\\\"  class=\\\"icon\\\" data-localize-title=\\\"模板分布\\\" data-ng-click=\\\"syncTem(item)\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-ng-click=\\\"copy(item)\\\" data-ng-if=\\\"item.status=='alive'\\\"><i class=\\\"fa icon-jj-copy\\\" data-localize-title=\\\"COPY_TEM\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"more_list_container\\\" data-ng-if=\\\"item.status=='alive'\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a class=\\\"menu_label\\\" target=\\\"_blank\\\" href=\\\"{{ domain }}/thor/image/download/{{ item.id }}\\\"><span class=\\\"fa icon-jj-Download\\\"></span> <span data-localize=\\\"下载模版\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a href=\\\"javascript:\\\" class=\\\"menu_label\\\" data-ng-if=\\\"item.status=='alive'\\\" data-localize-title=\\\"UNDO_SYNC_TEM\\\" data-ng-click=\\\"undoSync(item)\\\"><span class=\\\"fa icon-jj-back\\\"></span><span data-localize=\\\"UNDO_SYNC_TEM\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:item.instance_count > 1? false:true}\\\" data-ng-click=\\\"update(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-update\\\"></span> <span data-localize=\\\"更新桌面\\\"></span></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 1? false:true\\\" data-localize-title=\\\"该模版未关联任何场景\\\"></span></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:item.instance_count > 0? true:false}\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除模版\\\"></span></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 0? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"update(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-update\\\"></span> <span data-localize=\\\"更新桌面\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除模版\\\"></span></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a href=\\\"javascript:\\\" class=\\\"icon\\\" data-ng-show=\\\"item.status=='syncing' || item.status=='sync failed' || item.status=='making seed'\\\" data-localize-title=\\\"查看同步信息\\\" data-dialog=\\\"syncTemplateDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"template/template_sync.html\\\" data-ng-click=\\\"syncTem(item)\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <span class=\\\"mylili\\\" data-ng-if=\\\"item.status!=='alive'\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\" data-ng-class=\\\"{disabled_ico:item.instance_count > 0? true:false}\\\"></i></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 0? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></span> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a data-ng-if=\\\"item.status!=='alive'\\\" href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t                \\t                <div class=\\\"panel-footbar\\\" data-ng-class=\\\"{'darken':item.status!='alive','primary':item.status=='alive'}\\\" data-ng-if=\\\"sync_mode == 'scp'\\\">\\r\\n\\t\\t                \\t                \\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"item.virtual_type=='kvm' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModify.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t                                \\t\\t<!-- html5-spice <a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='kvm' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('js/vdi-spice/spiceModify.html#?id=' + this.getAttribute('data-id') + '&os_type=' + this.getAttribute('data-os-type') + '&name=' + this.getAttribute('data-name')+'&instance_id='+this.getAttribute('data-instance-id'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a> -->\\r\\n\\t\\t                                \\t\\t<a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-ng-if=\\\"item.virtual_type=='hyper-v' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('templateModify_rdp.html#' + this.getAttribute('data-id') + '&' + this.getAttribute('data-os-type') + '&' + this.getAttribute('data-name'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t                                \\t\\t<!-- html5 spice <a data-id=\\\"{{ item.id }}\\\" data-name=\\\"{{ item.name }}\\\" data-os-type=\\\"{{ item.os_type }}\\\" data-instance-id=\\\"{{ item.instance_id}}\\\" data-ng-if=\\\"item.virtual_type=='hyper-v' && (item.status=='alive' || item.status =='making' || item.status =='installed' || item.status =='update failed')\\\" onclick=\\\"window.open('js/vdi-spice/spiceModify_rdp.html#?id=' + this.getAttribute('data-id') + '&os_type=' + this.getAttribute('data-os-type') + '&name=' + this.getAttribute('data-name')+'&instance_id='+this.getAttribute('data-instance-id'));return false;\\\" href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑模板\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a> -->\\r\\n\\t\\t                                \\t\\t<!-- <a href=\\\"javascript:\\\" class=\\\"icon\\\" data-localize-title=\\\"模板分布\\\" data-ng-click=\\\"syncTem(item)\\\"><i class=\\\"fa icon-jj-look\\\"></i></a> -->\\r\\n\\t\\t                                \\t\\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='alive'\\\" class=\\\"icon\\\" data-localize-title=\\\"COPY_TEM\\\" data-ng-click=\\\"copy(item)\\\"><i class=\\\"fa icon-jj-copy\\\"></i></a>\\r\\n\\t\\t                \\t                \\t<a href=\\\"javascript:void(0)\\\" data-ng-if=\\\"item.status=='alive'\\\" class=\\\"icon\\\" data-localize-title=\\\"下载模版\\\" download-url urls=\\\"{{item.download_image_uuid}}\\\"><i class=\\\"fa icon-jj-Download\\\"></i></a>\\r\\n<!-- \\t\\t                \\t                \\t<div class=\\\"more_list_container\\\" data-ng-if=\\\"item.status=='alive'\\\">\\r\\n\\t\\t                \\t                \\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t                \\t                \\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t                \\t                \\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a class=\\\"menu_label\\\" target=\\\"_blank\\\" href=\\\"{{ domain }}/thor/image/download/{{ item.id }}\\\"><span class=\\\"fa icon-jj-Download\\\"></span> <span data-localize=\\\"下载模版\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:item.instance_count > 1? false:true}\\\" data-ng-click=\\\"update(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-update\\\"></span> <span data-localize=\\\"更新桌面\\\"></span></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 1? false:true\\\" data-localize-title=\\\"该模版未关联任何场景\\\"></span></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:item.instance_count > 0? true:false}\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除模版\\\"></span></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 0? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></li>\\r\\n\\t\\t                \\t                \\t\\t\\t</ul>\\r\\n\\t\\t                \\t                \\t\\t</div>\\r\\n\\t\\t                \\t                \\t</div> -->\\r\\n\\t\\t                \\t                \\t<!-- <span class=\\\"mylili\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\" data-ng-class=\\\"{disabled_ico:item.instance_count > 0? true:false}\\\"></i></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 0? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></span> -->\\r\\n\\t\\t                \\t                \\t<!-- <a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除模版\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\"></i></a> -->\\r\\n\\t\\t                \\t                \\t<div class=\\\"more_list_container\\\">\\r\\n\\t\\t                \\t                \\t\\t<a href=\\\"javascript:\\\" class=\\\"icon more_icon\\\" data-localize-title=\\\"MORE\\\"><i class=\\\"fa icon-jj-more\\\"></i></a>\\r\\n\\t\\t                \\t                \\t\\t<div class=\\\"menu_wrapper my_menu_wrapper\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t<div class=\\\"arraw\\\"></div>\\r\\n\\t\\t                \\t                \\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" ng-class=\\\"{disabled:item.instance_status!=='shutdown'}\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" ng-disabled=\\\"item.instance_status!=='shutdown'\\\" data-ng-click=\\\"modify(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-009\\\"></span> <span data-localize=\\\"配置属性\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive' && !item.rbd_enabled\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"imgManage(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-Template\\\"></span> <span data-localize=\\\"镜像管理\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"resetTemp(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-Recovery\\\"></span> <span data-localize=\\\"重置模板\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-if=\\\"item.status=='alive'\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"detail(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa icon-jj-013\\\"></span> <span data-localize=\\\"模板详情\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:void(0)\\\"><span class=\\\"fa fa-trash-o\\\"></span> <span data-localize=\\\"删除模版\\\" style=\\\"padding-left: 3px\\\"></span></a></li>\\r\\n\\t\\t                \\t                \\t\\t\\t</ul>\\r\\n\\t\\t                \\t                \\t\\t</div>\\r\\n\\t\\t                \\t                \\t</div>\\r\\n\\t\\t                \\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t    \\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/terminal/client.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-xs-12\\\" style=\\\"padding-left: 8px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t<span data-localize=\\\"选择教室\\\"></span>&nbsp;&nbsp;<select class=\\\"selectclassroomName filter\\\" ng-model=\\\"select\\\" data-ng-options=\\\"item.name for item in classrooms\\\"></select>&nbsp;&nbsp;&nbsp;&nbsp;\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"totalmess\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\tdata-localize=\\\"CLIENT_DESC\\\"\\r\\n\\t\\t                    data-localize-title=\\\"HELP\\\"\\r\\n\\t\\t                    param1=\\\"{{(rows | filter:searchText | filter:select.name).length}}\\\"\\r\\n\\t\\t                    param2=\\\"{{(rows | filter:searchText | filter:select.name | filter:{is_up:true}).length}}\\\"\\r\\n\\t\\t                    param3=\\\"{{(rows | filter:searchText | filter:select.name | filter:{is_up:false}).length}}\\\">\\r\\n\\t\\t\\t\\t\\t\\t</span>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t<!-- This area used as dropdown edit box -->\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar makefloat\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-dialog=\\\"configureClassroomDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_configureclassroom_edit.html\\\"><i class=\\\"fa icon-jj-classroom\\\"></i> <span data-localize=\\\"分配教室\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button data-ng-class=\\\"{disabled:!checkOne()}\\\" class=\\\"btn btn-primary btn-xs dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-all\\\"></i> <span data-localize=\\\"排序\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li style=\\\"cursor:pointer\\\"><a class=\\\"btn isBatch\\\" data-ng-click=\\\"clientManualSort()\\\" data-localize=\\\"人工排序\\\" data-dialog=\\\"clientSortDialog\\\" data-dialog-size=\\\"fs\\\" data-dialog-url=\\\"terminal/clientSort.html\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\"><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP5\\\" data-ng-if=\\\"!checkOne()\\\"></span></a></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li style=\\\"cursor:pointer; position:relative;\\\"><a class=\\\"btn isBatch\\\" data-ng-click=\\\"clientAutoSort()\\\" data-localize=\\\"自动排序\\\" data-dialog=\\\"clientSortDialog\\\" data-dialog-size=\\\"fs\\\" data-dialog-url=\\\"terminal/clientSort.html\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" ></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP5\\\" data-ng-if=\\\"!checkOne()\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button data-ng-class=\\\"{disabled:!checkOne()}\\\" class=\\\"btn btn-primary btn-xs dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-005\\\"></i> <span data-localize=\\\"设置终端\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li style=\\\"cursor:pointer; position:relative;\\\"><a class=\\\"btn isBatch\\\" data-ng-click=\\\"configurename()\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP4\\\" data-ng-class=\\\"{disabled:!selectUp()}\\\" data-localize=\\\"修改终端名\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP3\\\" data-ng-if=\\\"!selectUp()\\\"></span></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li style=\\\"cursor:pointer; position:relative;\\\"><a class=\\\"btn isBatch\\\" data-ng-click=\\\"configure()\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP2\\\" data-ng-class=\\\"{disabled:!selectUp()}\\\" data-localize=\\\"设置运行参数\\\" data-dialog=\\\"configureTerminalParameterDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"terminal/terminal_calculateconfigureparameter_edit.html\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"vdiTerminalClientManage_TIP1\\\" data-ng-if=\\\"!selectUp()\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<button data-ng-class=\\\"{disabled:!checkOne()}\\\" class=\\\"btn btn-primary btn-xs dropdown-toggle isBatch\\\" data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-IP\\\"></i> <span data-localize=\\\"设置桌面IP\\\"></span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n                                        <li style=\\\"cursor:pointer\\\"><a class=\\\"btn isBatch\\\" data-localize=\\\"固定桌面IP\\\" data-dialog=\\\"clientBindingIpDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_clientbindingip_edit.html\\\"></a></li>\\r\\n                                        <li class=\\\"divider\\\"></li>\\r\\n                                        <li style=\\\"cursor:pointer\\\"><a class=\\\"btn isBatch\\\" data-ng-click=\\\"cancelBindingIp()\\\" data-localize=\\\"取消桌面IP\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-dialog=\\\"clientBindingIpDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_clientbindingip_edit.html\\\"><i class=\\\"fa icon-jj-IP\\\"></i> <span data-localize=\\\"固定桌面IP\\\"></span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"wakeup()\\\" href=\\\"javascript:\\\"><i class=\\\"fa icon-jj-boot\\\"></i> <span data-localize=\\\"唤醒\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"closeTerminal()\\\" data-ng-class=\\\"{graydisabled:ables}\\\"><i class=\\\"fa icon-jj-shutdown\\\"></i> <span data-localize=\\\"关机\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"rebootTerminal()\\\" data-ng-class=\\\"{graydisabled:ables}\\\"><i class=\\\"fa icon-jj-Restart\\\"></i> <span data-localize=\\\"重启\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"terminate()\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{graydisabled:ables}\\\"><i class=\\\"fa icon-jj-breakoff\\\"></i> <span data-localize=\\\"中断会话\\\"></span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete()\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<!-- <a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" href=\\\"javascript:\\\" data-ng-click=\\\"editPass()\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"终端密码\\\"></span></a> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-click=\\\"dynamicPass()\\\"><i class=\\\"icon-jj-Key fa\\\"></i> <span data-localize=\\\"动态密码\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" style=\\\"width: 54px;\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updateData(searchText,select)\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-vertical-center table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"client_nameSort\\\" ng-click=\\\"client_nameSort = !client_nameSort;sort('client_name', client_nameSort)\\\" data-localize=\\\"终端名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"client_typeSort\\\" ng-click=\\\"client_typeSort = !client_typeSort;sortClientType(client_typeSort)\\\" data-localize=\\\"类型\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"orderSort\\\" ng-click=\\\"orderSort = !orderSort;sort('order', orderSort)\\\" data-localize=\\\"登录序号\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"终端IP/MAC\\\" ng-model=\\\"client_IPSort\\\" ng-click=\\\"client_IPSort = !client_IPSort;sortClientIP(client_IPSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"固定桌面IP\\\" ng-model=\\\"target_IPSort\\\" ng-click=\\\"target_IPSort = !target_IPSort;sortTargetIP(target_IPSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"is_upSort\\\" ng-click=\\\"is_upSort = !is_upSort;sort('is_up', is_upSort)\\\" data-localize=\\\"运行状态\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"inst_display_nameSort\\\" ng-click=\\\"inst_display_nameSort = !inst_display_nameSort;instNameSort('inst_display_name', inst_display_nameSort)\\\" data-localize=\\\"接入桌面\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"launched_atSort\\\" ng-click=\\\"launched_atSort = !launched_atSort;sort('launched_at', launched_atSort)\\\" data-localize=\\\"接入时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"running_timeSort\\\" ng-click=\\\"running_timeSort = !running_timeSort;sort('running_time', running_timeSort)\\\" data-localize=\\\"接入时长\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-id=\\\"{{item.id}}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-contextmenu\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"item\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"checkbox-inline\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"item._selected\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-checked=\\\"item._selected\\\"  \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-value=\\\"item.id\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-click=\\\"addselect(item)\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.client_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.client_type === 97\\\">android</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.client_type === 98\\\">arm</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.client_type === 99\\\">linux</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-ng-if=\\\"item.client_type === 1 || item.client_type === 999\\\">windows</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.order }}<!-- <i data-ng-if=\\\"item.order_status == 2 && item.order != null\\\" class=\\\"fa icon-jj-lock\\\"> --></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.client_ip }}<br>{{ item.client_mac }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.target_ip }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span class=\\\"status32\\\" data-ng-class=\\\"{shutdown:!item.is_up,running:item.is_up}\\\"></span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td title=\\\"{{ item.inst_name }}\\\" ng-if=\\\"!item.mode_id&&!item.person_pool_id\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a ng-show='item.can_jump_person' href=\\\"#/desktop/personal?name={{item.inst_display_name}}\\\">{{ item.inst_display_name }}</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show='!item.can_jump_person'>{{ item.inst_display_name }}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td title=\\\"{{ item.inst_name }}\\\" ng-if=\\\"item.mode_id&&!item.person_pool_id\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a ng-show='item.can_jump_teach' href=\\\"#/desktop/teach/{{ item.mode_id }}?name={{item.inst_display_name}}\\\">{{ item.inst_display_name }}</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show='!item.can_jump_teach'>{{ item.inst_display_name }}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td title=\\\"{{ item.inst_name }}\\\" ng-if=\\\"item.person_pool_id\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a ng-show='item.can_jump_person_pool' href=\\\"#/desktop/poolList/{{item.person_pool_id}}?{{item.inst_display_name}}&&client={{item.person_pool_name}}\\\">{{ item.inst_display_name }}</a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span ng-show='!item.can_jump_person_pool'>{{ item.inst_display_name }}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.launched_at | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.running_time }}</td>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-localize=\\\"分配教室\\\" data-dialog=\\\"configureClassroomDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_configureclassroom_edit.html\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{disabled:currentItem.status}\\\" href=\\\"javascript:\\\"><span data-localize=\\\"设置终端\\\"></span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:!currentItem.is_up}\\\" data-localize=\\\"修改终端名\\\" data-ng-click=\\\"configurename(currentItem)\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP1\\\" data-ng-if=\\\"!currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:!currentItem.is_up}\\\" data-ng-click=\\\"setSingle(true)\\\" data-dialog=\\\"configureTerminalParameterDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"terminal/terminal_calculateconfigureparameter_edit.html\\\" data-localize=\\\"设置运行参数\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP2\\\" data-ng-if=\\\"!currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\"><span data-localize=\\\"设置桌面IP\\\"></span><i></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"menu_wrapper sub_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-localize=\\\"固定桌面IP\\\" data-dialog=\\\"clientBindingIpDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_clientbindingip_edit.html\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" data-ng-class=\\\"{graydisabled:!currentItem.target_ip}\\\" data-localize=\\\"取消桌面IP\\\" data-ng-click=\\\"cancelBindingIp(currentItem)\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CANCELIP_TIP\\\" data-ng-if=\\\"!currentItem.target_ip\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-dialog=\\\"clientBindingIpDialog\\\" data-dialog-size=\\\"sm\\\" data-dialog-url=\\\"terminal/terminal_clientbindingip_edit.html\\\" data-localize=\\\"固定桌面IP\\\"></a></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"view(currentItem)\\\" data-ng-class=\\\"{graydisabled:!currentItem.inst_display_name}\\\" data-localize=\\\"查看桌面\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP7\\\" data-ng-if=\\\"!currentItem.inst_display_name\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"wakeup(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.is_up}\\\" data-localize=\\\"唤醒\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP3\\\" data-ng-if=\\\"currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"closeTerminal(currentItem)\\\" data-ng-class=\\\"{graydisabled:!currentItem.is_up}\\\" data-localize=\\\"关机\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP4\\\" data-ng-if=\\\"!currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"rebootTerminal(currentItem)\\\" data-ng-class=\\\"{graydisabled:!currentItem.is_up}\\\" data-localize=\\\"重启\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP4\\\" data-ng-if=\\\"!currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- <li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"terminate(currentItem)\\\" data-ng-class=\\\"{graydisabled:!currentItem.is_up}\\\" data-localize=\\\"中断会话\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP5\\\" data-ng-if=\\\"!currentItem.is_up\\\"></span></li> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.is_up}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"CLIENT_TIP6\\\" data-ng-if=\\\"currentItem.is_up\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/terminal/schoolroom.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-sm-12\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div data-ng-show=\\\"owner\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-dialog=\\\"addSchoolroomDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"terminal/terminal_schoolroom_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!selectNoDefault()}\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-ng-class=\\\"{disabled:!onlyOneItem()}\\\" ng-click=\\\"sendMessage()\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"发布消息\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-ng-class=\\\"{disabled:!onlyOneItem()}\\\" ng-click=\\\"closeMessage()\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"关闭消息\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_grid_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ><label data-ng-show=\\\"owner\\\" class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"教室名称\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <th ng-model=\\\"resource_pool_nameSort\\\" ng-click=\\\"resource_pool_nameSort = !resource_pool_nameSort;sort('resource_pool_name', resource_pool_nameSort)\\\"  data-localize=\\\"资源池\\\"></th> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"网络\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"终端IP范围\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"user_numSort\\\" ng-click=\\\"user_numSort = !user_numSort;sort('user_num', user_numSort)\\\" data-localize=\\\"授权管理员数\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"terminalCountSort\\\" ng-click=\\\"terminalCountSort = !terminalCountSort;sort('terminalCount', terminalCountSort)\\\" data-localize=\\\"当前终端数\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"sceneCountSort\\\" ng-click=\\\"sceneCountSort = !sceneCountSort;sort('sceneCount', sceneCountSort)\\\" data-localize=\\\"当前场景数\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_grid_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-id=\\\"{{item.id}}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label data-ng-if=\\\"owner\\\" class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <td>{{ item.resource_pool_name }}</td> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.network_name }}<span data-ng-if=\\\"item.subnet_name\\\">/{{ item.subnet_name }} ({{ item.dhcp_start }}~{{ item.dhcp_end }})</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span data-ng-if=\\\"item.ip_start\\\">{{item.ip_start + '-' + item.ip_end}}</span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user_num }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.terminalCount }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.sceneCount }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.desc }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editSchoolroomDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"terminal/terminal_schoolroom_edit.html\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-dialog=\\\"editSchoolroomDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"terminal/terminal_schoolroom_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-ng-if=\\\"owner\\\" class=\\\"menu_item\\\" data-ng-click=\\\"sendMessage(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-localize=\\\"发布消息\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-ng-if=\\\"owner\\\" class=\\\"menu_item\\\" data-ng-click=\\\"closeMessage(currentItem)\\\"><a ng-disabled=\\\"currentItem.message\\\" class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-localize=\\\"关闭消息\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-ng-if=\\\"owner && currentItem.id != 1\\\" class=\\\"menu_item\\\" data-ng-click=\\\"delete(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-localize=\\\"删除\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\\r\\n\",\"views/vdi/terminal/session.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-sm-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"terminate()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-breakoff\\\"></i> <span data-localize=\\\"中断会话\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"显示\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageSizeChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-options=\\\"pagesize for pagesize in pagesizes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></select>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span data-localize=\\\"项结果\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-vertical-center table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"接入终端\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"is_upSort\\\" ng-click=\\\"is_upSort = !is_upSort;sort('is_up', is_upSort)\\\" data-localize=\\\"运行状态\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"target_ipSort\\\" ng-click=\\\"target_ipSort = !target_ipSort;sort('target_ip', target_ipSort)\\\" data-localize=\\\"接入桌面\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"launched_atSort\\\" ng-click=\\\"launched_atSort = !launched_atSort;sort('launched_at', launched_atSort)\\\" data-localize=\\\"接入时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"running_timeSort\\\" ng-click=\\\"running_timeSort = !running_timeSort;sort('running_time', running_timeSort)\\\" data-localize=\\\"接入时长\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-id=\\\"{{item.id}}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.client_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><span class=\\\"status32\\\" data-ng-class=\\\"{shutdown:!item.is_up,running:item.is_up}\\\"></span></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.inst_display_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.launched_at | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.running_time }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" data-ng-click=\\\"terminate(currentItem)\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-localize=\\\"中断会话\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/user/admin.html\":\"<section >\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div data-ng-show=\\\"owner\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-dialog=\\\"addUserAdminDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_admin_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t<th><label class=\\\"checkbox\\\" data-ng-show=\\\"owner\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"登录名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"real_nameSort\\\" ng-click=\\\"real_nameSort = !real_nameSort;sort('real_name', real_nameSort)\\\" data-localize=\\\"姓名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"permissionSort\\\" ng-click=\\\"permissionSort = !permissionSort;sort('permission', permissionSort)\\\" data-localize=\\\"角色\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"instance_numSort\\\" ng-click=\\\"instance_numSort = !instance_numSort;sort('instance_num', instance_numSort)\\\" data-localize=\\\"关联桌面数\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"电子邮箱\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"联系电话\\\" ng-model=\\\"contactSort\\\" ng-click=\\\"contactSort = !contactSort;sort('contact', contactSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"createdDateSort\\\" ng-click=\\\"createdDateSort = !createdDateSort;sort('createdDate', createdDateSort)\\\" data-localize=\\\"创建时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"上次登录IP\\\" ng-model=\\\"IPSort\\\" ng-click=\\\"IPSort = !IPSort;sortIP(IPSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-contextmenu-disabled=\\\"{{ (owner && item.name=='admin') || (!owner && loginName != item.name) }}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t<td data-ng-if=\\\"owner && item.name != 'admin' && item.name != loginName\\\"><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t<td data-ng-if=\\\"!(owner && item.name != 'admin' && item.name != loginName)\\\" data-ng-init=\\\"item._ignore=true\\\"><label style=\\\"display:none;\\\" class=\\\"checkbox\\\"><input data-ng-model=\\\"item._ignore\\\" data-ng-checked=\\\"item._ignore\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.real_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.permission }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.instance_num }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><p style=\\\"max-width: 200px;\\\" class='text-overflow' title=\\\"{{ item.email }}\\\">{{ item.email }}</p></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.contact }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.createdDate | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.last_login }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><a data-ng-if=\\\"(owner && item.name!='admin') || (!ower && loginName == item.name)\\\" class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editUserAdminDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_admin_edit.html\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-dialog=\\\"editUserAdminDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_admin_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-ng-if=\\\"currentItem.name != 'admin' && loginName != currentItem.name\\\" class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li data-ng-if=\\\"currentItem.name != 'admin' && loginName != currentItem.name\\\" class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.instance_num != 0}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"ADMIN_TIP\\\" data-ng-if=\\\"currentItem.instance_num != 0\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n\\r\\n<script>pageSetUp();</script>\",\"views/vdi/user/common.html\":\"<section id=\\\"teach-page\\\">\\r\\n\\t<!-- row -->\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget common\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div  class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-3 text-right\\\">\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</header>\\r\\n\\t\\t\\t\\t\\t<!-- end widget edit box -->\\r\\n\\r\\n\\t\\t\\t\\t\\t<!-- widget content -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\" style=\\\"border:none;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 uploadFile\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-click=\\\"addDepartment()\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增用户组\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-click=\\\"modifyInfo()\\\" data-ng-class=\\\"{disabled: !selected}\\\"><i class=\\\"fa fa-pencil\\\"></i><span data-localize=\\\"修改\\\" style=\\\"margin-left: 3px;\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"{{ domain }}/thor/user/excel/template?file_name=users.xls\\\" download=\\\"users\\\"><i class=\\\"fa fa-cloud-download\\\"></i><span data-localize=\\\"下载模版\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div ui-web-upload=\\\"user_upload\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tui-upload-limit=\\\"10G\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tui-upload-btn-name=\\\"导入\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tui-upload-type=\\\"xlsx?\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tui-upload-url=\\\"/thor/user/excel/import\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfinish-handel=\\\"finishUpload(response)\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tbtn-class=\\\"btn-xs btn-primary\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ticon-class=\\\"icon-jj-Import\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tstyle=\\\"display: inline-block;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" data-ng-class=\\\"{disabled:!selected || !selected.user_num}\\\" href=\\\"{{ domain }}/thor/user/excel/export?department={{ selected.id }}\\\" download='{{ selected.name }}'><i class=\\\"fa icon-jj-Export-1\\\"></i> <span data-localize=\\\"导出\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!selected || selected.user_num || selected.parent_name==''}\\\" data-ng-click=\\\"deleteDpartment()\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除用户组\\\"></span></a>\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel\\\" style=\\\"background-color: #fafafa;border: none\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel-body no-padding\\\" style=\\\"margin:15px;border:1px solid #ccc;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-3\\\" style=\\\"padding: 0px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel panel-default\\\" style=\\\"margin-bottom: 0;border-top: none;border-left: none;border-bottom: none;background-color: #fafafa;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel-heading\\\" style=\\\"line-height: 23px;\\\" data-localize=\\\"组织结构\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div style=\\\"padding: 10px 15px\\\" data-ng-if=\\\"!treedata_loading && !treedata.length\\\" data-localize='无'></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div style=\\\"padding: 10px 15px\\\" data-ng-if=\\\"treedata_loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"panel-body\\\" style=\\\"overflow-y: auto;overflow-x: auto;min-height: 96px;padding: 10px 10px 26px 10px;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<treecontrol\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"tree-classic no-padding userCommon-tree\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttree-model=\\\"treedata\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\toptions=\\\"opts\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ton-selection=\\\"showSelected(node, selected)\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\texpanded-nodes=\\\"expandnodes\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tselected-node=\\\"selected\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span><i id=\\\"departmentIcon\\\"></i>{{ node.name }}&nbsp;({{ node.user_num }})</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</treecontrol>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>  \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-xs-9\\\" style=\\\"padding: 0 0 20px 0;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side left-btn-group col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-class=\\\"{disabled:!islastGroup()}\\\" data-dialog=\\\"addUserCommonDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_common_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\">新增</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"moveTo()\\\"><i class=\\\"fa icon-jj-move-1\\\"></i> <span data-localize=\\\"移动至\\\">移动至</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:;\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</section>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll()\\\" name=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<i></i>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"登录名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"real_nameSort\\\" ng-click=\\\"real_nameSort = !real_nameSort;sort('real_name', real_nameSort)\\\" data-localize=\\\"姓名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"上次登录IP\\\" ng-model=\\\"IPSort\\\" ng-click=\\\"IPSort = !IPSort;sortIP(IPSort)\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-ng-repeat-start=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><i data-ng-if=\\\"item.status\\\" class=\\\"icon-jj-lock fa\\\"></i> {{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.real_name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.last_login }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editUserCommonDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_common_edit.html\\\" data-localize-title=\\\"编辑\\\" localize-title=\\\"用户编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"!isFold\\\"  data-ng-click=\\\"isFold=!isFold\\\" localize-title=\\\"更多详情\\\"><i class=\\\"fa icon-jj-014\\\"></i></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button ng-disabled=\\\"loading_detail\\\" class=\\\"btn btn-xs btn-default\\\" ng-show=\\\"isFold\\\" data-ng-click=\\\"isFold=!isFold\\\" ><i class=\\\"fa icon-jj-015\\\"></i></button></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr ng-show=\\\"isFold\\\" class=\\\"ng-scope\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td colspan=\\\"7\\\" style=\\\"border:none;padding:0 !important;\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<table class=\\\"table table-striped table-condensed table-hover vtop-table\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"33%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"detailsWrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.dept_full_path }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"所属组\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.dept_full_path }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.desc }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"描述\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.desc }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"33%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"detailsWrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.contact }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"联系电话\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.contact }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.email }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"电子邮箱\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.email }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td width=\\\"33%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"detailsWrap\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.redactor }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"创建者\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.redactor }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.createdDate | date:'yyyy-MM-dd HH:mm:ss' }}\\\"><span class=\\\"col-xs-3\\\" localize=\\\"创建时间\\\"></span><span class=\\\"col-xs-9\\\">：{{ item.createdDate | date:'yyyy-MM-dd HH:mm:ss' }}</span></p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat-end></tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"user_loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!user_loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-ng-if=\\\"currentItem.id !== 1\\\" data-dialog=\\\"editUserCommonDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_common_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.instance_num != 0}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"ADMIN_TIP\\\" data-ng-if=\\\"currentItem.instance_num != 0\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-ng-click=\\\"moveTo(item)\\\" data-localize=\\\"移动至\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/user/domain.html\":\"<section id=\\\"widget-grid\\\">\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<div\\r\\n\\t\\t\\t\\tclass=\\\"jarviswidget\\\"\\r\\n\\t\\t\\t\\tdata-widget-grid\\r\\n\\t\\t\\t\\tdata-widget-editbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-colorbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-togglebutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-deletebutton=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-fullscreenbutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-custombutton=\\\"true\\\"\\r\\n\\t\\t\\t\\tdata-widget-collapsed=\\\"false\\\"\\r\\n\\t\\t\\t\\tdata-widget-sortable=\\\"true\\\">\\r\\n<!-- \\t\\t\\t\\t<header class=\\\"nobgheader\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-9\\\">\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t<span class=\\\"totalmess\\\" \\r\\n\\t\\t\\t\\t\\t\\tlocalize=\\\"DOMAIN_TOTAL_MESS\\\" \\r\\n\\t\\t\\t\\t\\t\\tparam1=\\\"{{rows.length}}\\\"\\r\\n\\t\\t\\t\\t\\t\\tparam2=\\\"{{(rows | filter:{'status':true}).length}}\\\"\\r\\n\\t\\t\\t\\t\\t\\tparam3=\\\"{{(rows | filter:{'status':false}).length}}\\\"></span>\\t\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"col-sm-3 text-right\\\">\\r\\n\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</header> -->\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer clearfix\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-12 col-sm-12\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-dialog=\\\"addUserDomainDialog\\\" data-dialog-url=\\\"user/user_domain_add.html\\\" data-dialog-size=\\\"md\\\"><i class=\\\"fa icon-jj-addddd\\\"></i>&nbsp;<span localize=\\\"新增域\\\">新增域</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete()\\\"><i class=\\\"fa icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!--<a class=\\\"btn btn-xs btn-primary isBatch\\\" href=\\\"javascript:\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"restarVirtical\\\">重启虚拟化服务</a>-->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"padding-20\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t        <div class=\\\"col-xs-12 col-sm-6 col-md-6 col-lg-4\\\" data-ng-repeat=\\\"item in rows\\\">\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t            <div class=\\\"panel pricing-big panel-primary\\\">\\r\\n\\t\\t\\t\\t\\t\\t            \\t<span class=\\\"ribbon\\\" ng-if=\\\"item.is_console\\\" data-ng-class=\\\"{'zh':currentLang.language === 'Chinese, Simplified','en':currentLang.language === 'English'}\\\"></span>\\r\\n\\t\\t\\t\\t\\t\\t            \\t<!-- <img src=\\\"img/ribbon.png\\\" class=\\\"ribbon\\\" ng-if=\\\"item.is_console\\\"> -->\\r\\n\\t\\t\\t\\t\\t\\t                <div class=\\\"panel-heading smart-form\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t<div class=\\\"padding-left-15\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"checkbox-inline\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" class=\\\"checkbox style-0\\\" data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" data-ng-value=\\\"item.id\\\" ><span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t                    <div class=\\\"panel-cont domain-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    <ul class=\\\"panel-mess\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item panel-title\\\">\\r\\n\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<label><img  ng-show=\\\"item.submiting\\\" ng-src=\\\"img/ajax-loader.gif\\\" style=\\\"width:48px;height:48px;\\\"></label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<h2 class=\\\"item-flex\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t\\t<div class=\\\"host_title\\\" title=\\\"{{item.name}}\\\" style=\\\"text-transform: none;\\\">{{item.name}}</div><span class=\\\"small\\\" style=\\\"color:#fff;\\\">{{item.host}}</span>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t</h2>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"关联用户数\\\" localize-title=\\\"关联用户数\\\">关联用户数</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div>{{item.user_num}} </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"域管理员\\\" localize-title=\\\"域管理员\\\">域管理员</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div>{{item.user}} </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"panel-item\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<label data-localize=\\\"描述\\\">描述</label>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t\\t<div class=\\\"item-flex\\\">{{item.desc}} </div>\\r\\n\\t\\t\\t\\t\\t\\t\\t                    \\t</li>\\r\\n\\t\\t\\t\\t\\t\\t\\t                  \\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t                  \\t</div>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t                  \\t<div class=\\\"primary panel-footbar user-domain-panel\\\">\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<a data-id=\\\"{{ item.id }}\\\" href=\\\"javascript:void(0)\\\" data-dialog=\\\"editUserDomainDialog\\\" data-dialog-url=\\\"user/user_domain_edit.html\\\" data-dialog-size=\\\"md\\\" class=\\\"icon\\\" data-localize-title=\\\"编辑域控制器\\\"><i class=\\\"fa icon-jj-edit\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t<!-- <span class=\\\"mylili\\\"><a data-ng-click=\\\"update(item)\\\" data-ng-if=\\\"item.status=='alive'\\\" href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"更新域用户\\\"><i class=\\\"fa icon-jj-update\\\" data-ng-class=\\\"{disabled_ico:item.instance_count > 1? false:true}\\\"></i></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 1? false:true\\\" data-localize-title=\\\"该模版未关联任何场景\\\"></span></span> -->\\r\\n\\t\\t\\t\\t\\t\\t                \\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"mylili\\\"><a href=\\\"javascript:void(0)\\\" class=\\\"icon\\\" data-localize-title=\\\"删除域控制器\\\"  data-ng-click=\\\"delete(item)\\\"><i class=\\\"fa fa-trash-o\\\" data-ng-class=\\\"{disabled_ico:item.instance_count > 1? true:false}\\\"></i></a><span class=\\\"parameterdisabled\\\" data-ng-if=\\\"item.instance_count > 1? true:false\\\" data-localize-title=\\\"TEMPLATE_DELETE_TIP\\\"></span></span>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<a data-id=\\\"{{ item.id }}\\\" href=\\\"#/user/domain/{{item.id}}\\\" class=\\\"icon\\\" data-localize-title=\\\"域用户\\\"><i class=\\\"fa icon-jj-men\\\"></i></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t                </div>\\r\\n\\t\\t\\t\\t\\t\\t            </div>\\r\\n\\t\\t\\t\\t\\t\\t        </div>\\r\\n\\t\\t\\t\\t    \\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t<!-- end widget div -->\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t\\t<!-- WIDGET END -->\\r\\n\\t</div>\\r\\n\\t<!-- end row -->\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/user/domainList.html\":\"<section>\\r\\n\\t<!-- row -->\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-lg-12\\\">\\r\\n\\t\\t\\t<!-- Widget ID (each widget will need unique ID)-->\\r\\n\\t\\t\\t<div data-widget-grid class=\\\"jarviswidget\\\">\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<!-- widget edit box -->\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"form-inline no-footer\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- toolbar -->\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left-btn-group col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-primary\\\"  href=\\\"#/user/domain\\\"><i class=\\\" icon-jj-recovery fa\\\"></i>  &nbsp;<span  localize=\\\"返回\\\">返回</span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<button class=\\\"btn btn-xs btn-primary dropdown-toggle\\\"  data-toggle=\\\"dropdown\\\"><i class=\\\"fa icon-jj-Synchronous\\\"></i> &nbsp;<span localize=\\\"同步域用户\\\">同步域用户</span> <span class=\\\"caret\\\"></span></button>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"dropdown-menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a data-ng-click=\\\"oneKeySycing()\\\" href=\\\"javascript:\\\" localize=\\\"一键同步\\\">一键同步</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"divider\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<li><a href=\\\"javascript:\\\" data-dialog=\\\"userDoaminAscingDialog\\\" data-dialog-url=\\\"user/user_domain_sycing.html\\\" data-dialog-size=\\\"md\\\" localize=\\\"自定义同步\\\">自定义同步</a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-xs btn-danger isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete()\\\" href=\\\"javascript:\\\"><i class=\\\"fa  icon-jj-delete\\\"></i>&nbsp;<span localize=\\\"删除\\\">删除</span></a>\\r\\n\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6 col-sm-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" input-number type=\\\"number\\\" class=\\\"mysmallinput\\\" data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<!-- <div class=\\\"pull-right filter\\\"> <span localize=\\\"显示\\\"></span> <select  ng-change=\\\"pageSizeChange()\\\" data-ng-model=\\\"pagesize\\\"data-ng-options=\\\"pagesize for pagesize in pagesizes\\\"></select> <span localize=\\\"项结果\\\"></span> </div> -->\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\" ng-change=\\\"updataData()\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<!-- toolbar end -->\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table data-vdi-grid\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\"  localize=\\\"域登录名\\\">域登录名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"real_nameSort\\\" ng-click=\\\"real_nameSort = !real_nameSort;sort('real_name', real_nameSort)\\\" localize=\\\"姓名\\\">姓名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"instance_numSort\\\" ng-click=\\\"instance_numSort = !instance_numSort;sort('instance_num', instance_numSort)\\\" localize=\\\"关联桌面数\\\">关联桌面数</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"group_nameSort\\\" ng-click=\\\"group_nameSort = !group_nameSort;sort('group_name', group_nameSort)\\\" localize=\\\"分组名\\\">分组名</th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-ng-repeat=\\\"item in rows |filter:searchText | paging:currentPage:pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-id=\\\"{{ item.id }}\\\" ng-class=\\\"{warning:item.role==5}\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p title=\\\"{{ item.name }}\\\">{{ item.name }}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p>{{item.real_name}}</p>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.instance_num }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.group }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\"  localize=\\\"LOADING_TEXT\\\">数据正在加载...</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" localize=\\\"NO_MATCHING_DATA\\\">没有匹配数据</div>\\r\\n\\t\\t\\t\\t\\t\\t<div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div data-grid-pagination class=\\\"dt-toolbar-footer row\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-sm-6 col-xs-12 hidden-xs\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_info\\\" role=\\\"status\\\"  data-localize=\\\"PAGE\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam1=\\\"{{ getStart() }}\\\" \\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam2=\\\"{{ getEnd() }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tparam3=\\\"{{ (rows | filter:searchText| filter:{'status':select} ).length }}\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"col-md-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"dataTables_paginate paging_simple_numbers\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<pagination\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tboundary-links=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\ttotal-items=\\\"(rows | filter:searchText| filter:{'status':select} ).length\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\titems-per-page=\\\"pagesize\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-model=\\\"currentPage\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tdata-ng-change=\\\"pageChange()\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\trotate=\\\"true\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tmax-size=\\\"10\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"pagination-sm\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tprevious-text=\\\"&lsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tnext-text=\\\"&rsaquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tfirst-text=\\\"&laquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\tlast-text=\\\"&raquo;\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t></pagination>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t<!-- end widget content -->\\r\\n\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t\\t<!-- end widget -->\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\",\"views/vdi/user/role.html\":\"<section>\\r\\n\\t<div class=\\\"row\\\">\\r\\n\\t\\t<article class=\\\"col-xs-12 col-sm-12 col-md-12 col-sm-12\\\">\\r\\n\\t\\t\\t<div class=\\\"jarviswidget\\\" data-widget-grid>\\r\\n\\t\\t\\t\\t<!-- widget div-->\\r\\n\\t\\t\\t\\t<div class=\\\"noborder\\\">\\r\\n\\t\\t\\t\\t\\t<div class=\\\"jarviswidget-editbox\\\"></div>\\r\\n\\t\\t\\t\\t\\t<div class=\\\"widget-body no-padding\\\">\\r\\n\\t\\t\\t\\t\\t\\t<section class=\\\"dt-toolbar\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"left_side col-xs-6 left-btn-group\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-primary btn-xs\\\" data-dialog=\\\"addUserRoleDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_role_add.html\\\"><i class=\\\"icon-jj-addddd fa\\\"></i> <span data-localize=\\\"新增\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<a class=\\\"btn btn-danger btn-xs isBatch\\\" data-ng-class=\\\"{disabled:!checkOne()}\\\" data-ng-click=\\\"delete(item)\\\" href=\\\"javascript:\\\"><i class=\\\"icon-jj-delete fa\\\"></i> <span data-localize=\\\"删除\\\"></span></a>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t\\t<div class=\\\"right_side col-xs-6\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right filter\\\"> <span data-localize=\\\"显示\\\"></span> <input min=\\\"1\\\" max=\\\"500\\\" placeholder=\\\"1-500\\\" type=\\\"number\\\" class=\\\"mysmallinput\\\" input-number data-ng-model=\\\"pagesize\\\" data-ng-change=\\\"pageSizeChange()\\\"> <span data-localize=\\\"项结果\\\"></span></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"pull-right dataTables_filter search\\\"><label><span class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></span> <input type=\\\"search\\\" maxlength=\\\"20\\\" class=\\\"form-control\\\" ng-model=\\\"searchText\\\"></label></div>\\r\\n\\t\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t</section>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"table-responsive\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<table\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tclass=\\\"table table-striped table-condensed table-hover smart-form has-tickbox table-vertical-center\\\"\\r\\n\\t\\t\\t\\t\\t\\t\\t\\twidth=\\\"100%\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<thead class=\\\"vdi_grid_header\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th><label class=\\\"checkbox\\\"><input type=\\\"checkbox\\\" data-ng-model=\\\"checkedAll\\\" data-ng-change=\\\"selectAllChange(checkedAll)\\\" data-ng-checked=\\\"checkAll(all)\\\" name=\\\"checkbox-inline\\\"><i></i></label></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"nameSort\\\" ng-click=\\\"nameSort = !nameSort;sort('name', nameSort)\\\" data-localize=\\\"角色名\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"描述\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"user_numSort\\\" ng-click=\\\"user_numSort = !user_numSort;sort('user_num', user_numSort)\\\" data-localize=\\\"授权管理员数\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"redactorSort\\\" ng-click=\\\"redactorSort = !redactorSort;sort('redactor', redactorSort)\\\" data-localize=\\\"修改人\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th ng-model=\\\"updated_timeSort\\\" ng-click=\\\"updated_timeSort = !updated_timeSort;sort('updated_time', updated_timeSort)\\\" data-localize=\\\"修改时间\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<th data-localize=\\\"操作\\\"></th>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</thead>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t<tbody class=\\\"vdi_grid_body\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<tr data-contextmenu data-id=\\\"{{item.id}}\\\" data-contextmenu-disabled=\\\"{{ item.access_key == powers }}\\\" data-ng-repeat=\\\"item in rows | filter:searchText | paging:currentPage:pagesize\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if='item.access_key != powers'><label class=\\\"checkbox\\\"><input data-ng-model=\\\"item._selected\\\" data-ng-checked=\\\"item._selected\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td data-ng-if='item.access_key == powers' data-ng-init=\\\"item._ignore = true\\\"><label style=\\\"display:none;\\\" class=\\\"checkbox\\\"><input data-ng-model=\\\"item._ignore\\\" data-ng-checked=\\\"item._ignore\\\" type=\\\"checkbox\\\" data-ng-value=\\\"item.id\\\" name=\\\"checkbox-inline\\\"><i></i></label></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.name }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.desc }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.user_num }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.redactor }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td>{{ item.updated_time | date:'yyyy-MM-dd HH:mm:ss' }}</td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<td ><a data-ng-if='item.access_key != powers' class=\\\"btn btn-xs btn-default\\\" data-dialog=\\\"editUserRoleDialog\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_role_edit.html\\\" data-localize-title=\\\"编辑\\\"><i class=\\\"fa icon-jj-Write\\\"></i></a></td>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</tr>\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t</tbody>\\r\\n\\t\\t\\t\\t\\t\\t\\t</table>\\r\\n\\t\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"loading\\\" data-localize=\\\"LOADING_TEXT\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div class=\\\"tips\\\" data-ng-if=\\\"!loading && rows.length == 0\\\" data-localize=\\\"NO_MATCHING_DATA\\\"></div>\\r\\n\\t\\t\\t\\t\\t\\t<div data-ng-include=\\\"'includes/pagination.html'\\\"></div>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</div>\\r\\n\\r\\n\\t\\t\\t\\t<section class=\\\"context_wrapper\\\">\\r\\n\\t\\t\\t\\t\\t<div data-ng-if=\\\"currentItem\\\" class=\\\"menu_wrapper grid_context_menu\\\">\\r\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"menu_item_list\\\">\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\" ><a data-dialog=\\\"editUserRoleDialog\\\" data-ng-model=\\\"currentItem\\\" data-dialog-size=\\\"md\\\" data-dialog-url=\\\"user/user_role_edit.html\\\" data-localize=\\\"编辑\\\"></a></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_split\\\"></li>\\r\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"menu_item\\\"><a class=\\\"menu_label\\\" href=\\\"javascript:\\\" data-ng-click=\\\"delete(currentItem)\\\" data-ng-class=\\\"{graydisabled:currentItem.user_num != 0}\\\" data-localize=\\\"删除\\\"></a><span class=\\\"parameterdisabled\\\" data-localize-title=\\\"ROEL_TIP\\\" data-ng-if=\\\"currentItem.user_num != 0\\\"></span></li>\\r\\n\\t\\t\\t\\t\\t\\t</ul>\\r\\n\\t\\t\\t\\t\\t</div>\\r\\n\\t\\t\\t\\t</section>\\r\\n\\r\\n\\t\\t\\t</div>\\r\\n\\t\\t</article>\\r\\n\\t</div>\\r\\n</section>\\r\\n<script>pageSetUp();</script>\\r\\n\\r\\n\"};\n\tangular.module(\"ng\").run([\"$templateCache\", function(c){\n\t\tObject.keys(views).forEach(function(key){\n\t\t\tc.put(key, views[key]);\n\t\t});\n\t}]);\n\tmodule.exports = views;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./views/view-bundles.js\n// module id = 158\n// module chunks = 0"],"sourceRoot":""}