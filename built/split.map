{"version":3,"sources":["webpack:///webpack/bootstrap 73c0292a4c28d0d1ccce","webpack:///./js/vdi/config.js","webpack:///./js/vdi/os-types.json","webpack:///./js/vdi/split.js","webpack:///./resources/info.json","webpack:///./js/ng/ng.controllers.js","webpack:///./js/ng/ng.directives.js","webpack:///./js/vdi/vdi.js"],"names":["window","$$$storage","getSessionStorage","key","sessionStorage","getItem","setSessionStorage","value","setItem","clearSessionStorage","clear","codeData","i18nData","imagesData","firstKey","ng","angular","module","supportedOems","getSupportedOEMs","currentOEM","host","location","hostname","hasBootstrap","domain","protocol","controllerDomain","interfaceDomain","vdiEnvironment","origin","main","constant","splitDomain","service","get","load","langCode","cb","loadOEMResources","factory","languages","Object","keys","map","currentLang","require","config","$httpProvider","interceptors","push","$q","$root","$$$MSG","test","url","withCredentials","reject","console","log","info","arguments","code","message","res","data","$broadcast","href","replace","ignoreAnyRequestError","$","bigBox","title","content","color","icon","timeout","bootstrap","oem","oemData","alert","lang","images","$body","document","body","theme","pathname","addClass","attr","fadeIn","$$$MAIN_MODULE","concat","error","when","getJSON","done","codeResponse","langResponse","imagesResponse","registerLazyService","fail","statusXhr","langXhr","status_ha","statusResponse","haResponse","JSON","parse","current_lang_type","isSplitBrain","result","is_split_brain","isInitPage","isPersonalLoginPage","isControlNode","is_control_node","isSplitBrainPage","start","roles","ip","initCurrentUser","length","navigator","language","split","toLowerCase","list","resources","ret","forEach","item","flagCode","name","translation","userId","ajax","method","stringify","user_id","dataType","oldInfo","user","run","localize","setLang","$splitDomain","split_brain_info","isArray","recover_split_brain","directive","$compile","restrict","link","scope","element","attrs","count","param1","timer","setInterval","find","text","clearInterval","$emit","controller","$scope","$$$I18N","$timeout","$location","$rootScope","Split","restore_host_ip","undefined","click_restore","restoring","restore_status","FloatingIP","loading","getLists","servers","sort","a","b","priority","high","selectServer","server","host_ip","restore","back","$on","e","v","_scope","schedule","countDown","taskTimer","IP","data_sync","floating_ip","restoreSuc","setTimeout","clearTimeout","restoreFail","restoreSplit","controller_ip","$route","$animate","settings","on","preventDefault","ribbon","currentBreadcrumb","updateBreadcrumb","crumbs","breadCrumb","reverse","smartActions","userLogout","$this","SmartMessageBox","buttons","ButtonPressed","root_","logout","resetWidgets","widresetMSG","localStorage","reload","launchFullscreen","hasClass","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","removeClass","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","minifyMenu","toggleClass","effect","toggleMenu","toggleShortcut","shortcut_dropdown","is","shortcut_buttons_hide","shortcut_buttons_show","click","mouseup","target","has","animate","height","actionEvents","documentElement","isDefined","action","actionEvent","append","smartbgimage","fadeOut","prop","bind","$html","bgurl","css","$logo","removeClassPrefix","remove","prepend","breadcrumbs","setBreadcrumb","$watch","newVal","oldVal","updateDOM","empty","crumb","li","localizeText","template","$http","$window","$RESOURCE","encodeHTML","txt","tmplReg","interestAttrReg","ready","currentLocaleData","getLangUrl","sourceText","translate","transkey","onAttrChange","tmpl","myhtml","match","index","myattr","html","k","$observe","isReady","transclude","timer_handle","topmenu","first","jarvismenu","accordion","speed","menu_speed","closedSign","openedSign","number","fn","slimScroll","getElement","navs","cancel","isChild","active","isActive","viewLocation","path","hasIcon","hasIconCaption","iconCaption","getItemUrl","view","getItemTarget","parentCtrls","navCtrl","navgroupCtrl","setActive","openParents","parents","each","el","parent","trim","trigger","ctrl","items","loadItem","loadedItem","callback","onLoad","src","then","addItem","refresh","btn","currentTarget","button","onRefresh","total","activityCtrl","next","mytest","$badge","currentContent","loadContent","footer","newContent","oldContent","contentCtrl","setup_widget_desktop","jarvisWidgets","enableJarvisWidgets","grid","widgets","deleteSettingsKey","settingsKeyLabel","deletePositionKey","positionKeyLabel","sortable","buttonsHidden","toggleButton","toggleSpeed","onToggle","deleteButton","deleteClass","deleteSpeed","onDelete","editButton","editPlaceholder","editClass","editSpeed","onEdit","colorButton","fullscreenButton","fullscreenClass","fullscreenDiff","onFullscreen","customButton","customClass","customStart","customEnd","buttonOrder","opacity","dragHandle","placeholderClass","indicator","indicatorTime","timestampPlaceholder","timestampFormat","refreshButton","refreshButtonClass","labelError","labelUpdated","labelRefresh","labelDelete","afterLoad","rtl","onChange","onSave","ajaxnav","navAsAjax","setup_widget_mobile","enableMobileWidgets","setup_widgets_desktop","device","class","$$$IMAGES","iElm","iAttrs","modelCtrl","validate","val","vals","Array","reg","isvalide","every","parser","reduce","arr","formatter","join","viewChangeListener","$setValidity","$modelValue","$isEmpty","$parsers","$formatters","$viewChangeListeners","ngModel","isValid","format","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","RegExp","$1","getFullYear","substr","$modal","openModal","obj","init","delTips","delete_rows","delParm","nodelete_rows","nodelTips","open","$modalInstance","deleteName","row","nodeleteName","ok","close","size","users","selecteduser","node","selectUser","children","contents","$resource","$Domain","query","post","put","id","loadISO","save","filter","lun","isUndefined","vendor","type2str","local","iscsi","netfs","fc","type","stauts2str","running","building","stauts","$sce","trustAsHtml","slash","d","nat","bridge","vlan","toFixed","input","searchText","searchName","outPut","indexOf","$filterProvider","register","pageSize","totalPage","ceil","min","max","slice","disabled","dialog","templateUrl","dialogUrl","dialogSize","dismiss","___dialog","$filter","getPosition","ele","st","scrollTop","sl","scrollLeft","cw","clientWidth","ch","clientHeight","sw","scrollWidth","sh","scrollHeight","ow","offsetWidth","oh","offsetHeight","x","pageX","y","pageY","getCurrentPage","Number","currentPage","getCurrentRows","getPageSize","pagesize","context_wrapper","hide","getFilterRows","rows","checkAll","_all","_ignore","_selected","checkedAll","selectAllChange","checkOne","some","asc","pageSizeChange","pageChange","i","currentItem","de","handler","$apply","menu","offset","pos","top","left","stopPropagation","conroller","ctrls","getStart","current","getEnd","end","currentCount","getCurrentCount","$interval","dereg","fn_update_help_info","$$path","help_text","myTips","show","contextmenuDisabled","contextmenuEventName","lastText","btnUnable","steps","currentStep","moveWth","defaults","prevBtnText","nextBtnText","doneBtnText","stepIndex","go","select","step","s","selected","stepScope","getCurrentIndex","prev","getMarginValue","is_dirty","stepEventName","$$nextSibling","showPrev","isLast","doneEventName","addStep","jumpStep","removeStep","insertStep","_idx","wizardWth","outerWidth","_wth","eq","testValid","wizard","options","Highcharts","setOptions","global","useUTC","init_data","time","Date","getTime","$parent","refresh_time","hc_options","chart","renderTo","yAxis","series","highcharts","Chart","drawPoint","datetime","hc_series","drawpoint","reset_highcharts","destroy","newvalue","delegate","event","ip_pattern","elm","ngmodelctl","ngrequiredctl","viewValue","keyCode","numKey","ctrlKey","which","num","nextValue","isNaN","ngModelCtrl","required","ipRequired","$eval","CHECKTOOLS","checkIP","parts","numre","valid","parseInt","ipformatNum","pow","ip2long","checkRange","s_ip","e_ip","c","popEl","$input","after","$render","modelVal","modelValArr","$setPristine","idx","err","$setViewValue","nextEles","nextAll","focus","prevAll","selectionStart","selectionEnd","filtertext","lastFilter","lastFiltedResult","add_selected","getUsers","filterUser","copy","user_name","real_name","nodes","add_select_rows","$event","APIadmin","APIuser","APIdomain","expandedNodes","_users","seRows","rmRows","common_users","formatData","iteration","childName","len","_is_last","oldlen","splice","removeNoChildrenDeparts","noUserFilter","walk","dept_id","get_admin","deferred","defer","resolve","promise","get_user","query_tree","get_domain","all","typeName","userData","domain_users","_name","getLastLevelNodes","obj_levels","arrays","levels","remove_selected","lastRow2","shiftKey","begin_idx","end_idx","lastRow","add_remove_rows","ltor","rtol","last","menuItems","allMenuItems","apply","$templateCache","userNumber","addMax","addMin","is_dot","String","temp","ctrKey","keydown","_code","_valsplit","add","round","setValidation","newval","exp","abs","org","XMLHttpRequest","org_open","prototype","allowUpload","FormData","uploadPool","finishHandel","upload_id","progressName","isUploading","percent","loaded","progressPercent","uploadISOSize","uiWebUpload","btnName","uiUploadBtnName","uiWebUploadTest","degfn","disableTest","filetype","form","checkConfig","file","uiUploadType","maxSize","uiUploadLimit","uiUploadUrl","Error","typematch","clearDOM","clone","progressSize","finish","success","response","files","uiWebUploadParams","uiWebUploadName","transformRequest","xhr","q","w","r","t","upload","addEventListener","position","totalSize","call","headers","btnClass","iconClass","abort","warn","task","UserRole","warnBox","toggleTaskList","currentUser","ids","instances","clients","modes","manage_networks","personpools","lists","flag","postData","results","tasks","notifies","waringtype","ID","notify_id","Auth","desktopHelpBox","dms","dmsURL","$$$version","version","changeSkin","Role","loginUser","userInfo","alarm","AlarmHistory","isOpen","alarms","delete","setRead","nets","invalidArr","n","_data_dev","_dev"],"mappings":"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","file":"split.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/devbuild/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 161);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73c0292a4c28d0d1ccce","/**\r\n * 这个文件会在每个独立页面用到，如：init, index, templateXXX\r\n */\r\n\r\n// TODO: 移动到基础代码\r\nwindow.$$$storage = {\r\n\tgetSessionStorage(key){\r\n\t\treturn sessionStorage.getItem('vdi_'+ key);\r\n\t},\r\n\tsetSessionStorage(key, value){\r\n\t\tsessionStorage.setItem('vdi_'+ key, value);\r\n\t},\r\n\tclearSessionStorage(){\r\n\t\tsessionStorage.clear()\r\n\t}\r\n}\r\n\r\n// 提供翻译的闭包变量\r\nlet codeData = {};\r\nlet i18nData = {};\r\nlet imagesData = {};\r\n\r\nlet firstKey; // 记录第一个支持的 OEM，没有其它选择的时候使用这个\r\nlet ng = angular.module(\"ng\");\r\nlet supportedOems = getSupportedOEMs();\r\nlet currentOEM = null;\r\n\r\nlet host = location.hostname;\r\nlet hasBootstrap = false;\r\n\r\n\r\n// 定义后端接口地址\r\nlet domain = location.protocol + \"//\" + host + \":8081\"; // 多数用这个\r\nlet controllerDomain = location.protocol + \"//\" + host + \":19891\"; // 很少用\r\nlet interfaceDomain = location.protocol + \"//\" + host + \":19893\"; // 很少用\r\nif(window.vdiEnvironment === \"development\") {\r\n\thost = $$$storage.getSessionStorage('dev_host');\r\n\t// use dev_host\r\n\tif(host) {\r\n\t\tdomain = \"http://\" + host + \":8081\";\r\n\t\tcontrollerDomain = \"http://\" + host + \":19891\";\r\n\t\tinterfaceDomain = \"http://\" + host + \":19893\";\r\n\t} else {\r\n\t\t// use mock server\r\n\t\tdomain = controllerDomain = interfaceDomain = location.origin;\r\n\t}\r\n}\r\n\r\nmain();\r\n\r\n/* 定义一些 angular 服务 */\r\nng.constant(\"$Domain\", domain);\r\nng.constant(\"$controllerDomain\", controllerDomain);\r\nng.constant(\"$interfaceDomain\", interfaceDomain);\r\nng.constant(\"$splitDomain\", location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\");\r\nlet splitDomain = location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\";\r\nng.service(\"$RESOURCE\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn supportedOems[key];\r\n\t};\r\n\tthis.load = function(langCode, cb){\r\n\t\tloadOEMResources(langCode, cb);\r\n\t};\r\n}]);\r\n\r\nng.factory(\"settings\", [function(){\r\n\treturn {\r\n\t\tlanguages: Object.keys(supportedOems).map(function(key){\r\n\t\t\treturn supportedOems[key];\r\n\t\t}),\r\n\t\tcurrentLang: supportedOems[currentOEM]\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$MSG\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn codeData[key] || \"\";\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$I18N\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn i18nData[key] || \"\";\r\n\t};\r\n}]);\r\nng.service(\"$$$IMAGES\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn imagesData[key] || \"\";\r\n\t};\r\n}]);\r\nng.constant(\"$$$os_types\", require(\"./os-types\"));\r\nng.config([\"$httpProvider\", function($httpProvider){\r\n\t$httpProvider.interceptors.push([\"$q\", \"$rootScope\", \"$$$MSG\", function($q, $root, $$$MSG){\r\n\t\treturn {\r\n\t\t\t\"request\": function(config){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(config.url)){\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(/\\.html$/i.test(config.url)) {\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(!/^https?:\\/\\//.test(config.url)) {\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\tconfig.url = domain + config.url;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t\"requestError\": function(reject){\r\n\t\t\t\tconsole.log(\"REQ_ERROR\");\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"responseError\": function(reject){\r\n\t\t\t\tconsole.log(\"RES_ERROR\", arguments);\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tcode: 100,\r\n\t\t\t\t\tmessage: $$$MSG.get(\"返回信息格式错误\"),\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"response\": function(res){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(res.config.url)){\r\n\t\t\t\t\tif(/\\/thor\\/toolkit\\//.test(res.config.url) || /\\/v1\\/(?:node|network)\\//.test(res.config.url)){\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tswitch(res.data.code){\r\n\t\t\t\t\t\t\tcase 17001:\r\n\t\t\t\t\t\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 11011:\r\n\t\t\t\t\t\t\t\t$$$storage.setSessionStorage('returnUrl', location.href)\r\n\t\t\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif(/\\/thor\\/home\\/tasklog/.test(res.config.url)){\r\n\t\t\t\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(window.ignoreAnyRequestError) { return res; }\r\n\t\t\t\t\t\t\t\t$.bigBox && $.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n\t\t\t\t\t\t\t\t\tcontent : $$$MSG.get(res.data.code)==''?res.data.message:$$$MSG.get(res.data.code),\r\n\t\t\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n}]);\r\n\r\n/**\r\n * 启动 angular app\r\n * @param {String} oem oem 名字\r\n */\r\nfunction bootstrap(oem){\r\n\tvar oemData = supportedOems ? supportedOems[oem] : null;\r\n\tif(!oemData) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"加载资源出错！\");\r\n\t\t}\r\n\t}\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tvar $body = $(document.body);\r\n\t\tvar theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t\tif(!/personal_login/.test(location.pathname)) {\r\n\t\t\t$body.addClass(theme);\r\n\t\t\t$(\"#vdi_skins_url\").attr(\"href\", `/resources/pkg/${oem}/skins.css`);\r\n\t\t\t$body.fadeIn(1000);\r\n\t\t}\r\n\t\t\r\n\t\t// 仅开发模式提示\r\n\t\tif(window.vdiEnvironment === \"development\" && !window.$$$MAIN_MODULE) {\r\n\t\t\treturn alert(\"main module is not defined!\");\r\n\t\t}\r\n\t\tangular.bootstrap(document, [].concat(window.$$$MAIN_MODULE));\r\n\t\thasBootstrap = true;\r\n\t}\r\n}\r\n\r\n/**\r\n * 加载指定的 OEM 资源\r\n * @param {String} oem 要加载的 OEM 资源\r\n * @param {Function} cb 加载成功后的回调\r\n */\r\nfunction loadOEMResources(oem, cb){\r\n\tif(!oem) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"获取资源 key 失败！\");\r\n\t\t}\r\n\t}\r\n\tif(!(oem in supportedOems)) {\r\n\t\tconsole.error(\"unsupported resource key:\", oem);\r\n\t\toem = Object.keys(supportedOems)[0];\r\n\t}\r\n\tlet oemData = supportedOems[oem];\r\n\t// 先检查后加载\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tcodeData = oemData.code;\r\n\t\ti18nData = oemData.lang;\r\n\t\timagesData = oemData.images;\r\n\t\treturn cb(oemData);\r\n\t}\r\n\t$.when(\r\n\t\t$.getJSON(`/resources/pkg/${oem}/code.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/lang.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/images.js`)\r\n\t).done(function(codeResponse, langResponse, imagesResponse){\r\n\t\tcodeData = oemData.code = codeResponse[0];\r\n\t\ti18nData = oemData.lang = langResponse[0];\r\n\t\timagesData = oemData.images = imagesResponse[0];\r\n\t\tif(!hasBootstrap) {\r\n\t\t\tregisterLazyService();\r\n\t\t\tbootstrap(oem);\r\n\t\t} else {\r\n\t\t\tcb && cb(oemData);\r\n\t\t}\r\n\t}).fail(function(){\r\n\t\tconsole.log(`load ${oem} resource error:`, arguments[2]);\r\n\t});\r\n\tcurrentOEM = oem;\r\n}\r\nfunction main(){\r\n\tvar statusXhr = $.get(controllerDomain + \"/v1/node/status\");\r\n\tvar langXhr = $.get(domain + \"/thor/init/lang\");\r\n\tvar status_ha = $.get(domain + \"/thor/get_controller_ha_status\");\r\n\t$.when(statusXhr, langXhr, status_ha).done(function(statusResponse, langResponse, haResponse){\r\n\t\tif(typeof statusResponse[0] === \"string\") {\r\n\t\t\tstatusResponse[0] = JSON.parse(statusResponse[0])\r\n\t\t}\r\n\t\tvar oem = langResponse[0].current_lang_type;\r\n\t\tvar isSplitBrain = haResponse[0].result.is_split_brain;\r\n\t\tvar isInitPage = /init\\.html$/.test(location.pathname);\r\n\t\tvar isPersonalLoginPage = location.pathname==='/personal_login/';\r\n\t\tvar isControlNode = statusResponse[0].is_control_node;\r\n\t\tvar isSplitBrainPage = /split\\.html$/.test(location.pathname);\r\n\t\tif(isSplitBrainPage) {\r\n\t\t\tif(!isSplitBrain) {\r\n\t\t\t\tlocation.replace(\"/\");\r\n\t\t\t}else{\r\n\t\t\t\tstart();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(isSplitBrain){\r\n\t\t\t\t// $$$storage.clearSessionStorage();\r\n\t\t\t\t$$$storage.setSessionStorage('splitIP', haResponse[0].result.roles[0].ip);\r\n\t\t\t\tlocation.replace(\"split.html\");\r\n\t\t\t} else {\r\n\t\t\t\tif(isControlNode) {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage) {\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart(oem);\r\n\t\t\t\t\t\tinitCurrentUser();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage){\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction start(oem){\r\n\t// 初始化页面默认没有语言\r\n\tif(!oem) {\r\n\t\t// NOTE: 版本是和语言相关的\r\n\t\t// 如果支持多个版本，优先使用系统默认语言\r\n\t\tif(Object.keys(supportedOems).length > 1) {\r\n\t\t\t// 仅仅我们自己的版本支持多语言\r\n\t\t\t// 参考：https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language\r\n\t\t\t// 调试时，使用这段代码将浏览器设置为其它语言\r\n\t\t\t//   navigator.__defineGetter__(\"language\", function(){ return \"en-us\" })\r\n\t\t\tlet lang = navigator.language;\r\n\t\t\tif(lang) {\r\n\t\t\t\tlang = lang.split(\"-\")[0].toLowerCase();\r\n\t\t\t}\r\n\t\t\tif(lang === \"zh\") {\r\n\t\t\t\toem = \"e-vdi\";\r\n\t\t\t} else if(lang === \"en\") {\r\n\t\t\t\toem = \"classEn\";\r\n\t\t\t}\r\n\t\t\tif(!supportedOems[oem]) {\r\n\t\t\t\toem = firstKey;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toem = firstKey; // 否则的话使用仅支持的版本\r\n\t\t}\r\n\t}\r\n\tloadOEMResources(oem, supportedOems);\r\n}\r\n\r\nfunction getSupportedOEMs(){\r\n\tvar list = require(\"../../resources/info\").resources;\r\n\tvar ret = {};\r\n\tlist.forEach(function(item){\r\n\t\tret[item.key] = item;\r\n\t\t// 不知道旧代码为什么要这么做\r\n\t\titem.langCode = item.key;\r\n\t\titem.flagCode = item.key;\r\n\t\titem.language = item.name;\r\n\t\titem.translation = item.title;\r\n\t});\r\n\tfirstKey = list[0].key;\r\n\treturn ret;\r\n}\r\n\r\nfunction initCurrentUser(){\r\n\tvar userId = $$$storage.getSessionStorage('userId');\r\n\tif(!userId) { return; }\r\n\t$.ajax({\r\n\t\tmethod: \"POST\",\r\n\t\turl: domain + \"/thor/user/session\",\r\n\t\tdata: JSON.stringify({\r\n\t\t\tuser_id: userId\r\n\t\t}),\r\n\t\tdataType: 'json'\r\n\t}).done(function(res){\r\n\t\tif(res.code === 0){\r\n\t\t\t// res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t});\r\n\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction registerLazyService(){\r\n\tng.constant(\"$$$version\", i18nData[\"GOD_VERSION\"] || \"dev\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/config.js","module.exports = [{\"key\":\"other\",\"icon\":\"other.png\",\"value\":\"Other\"},{\"key\":\"ArchLinux\",\"icon\":\"linux.png\",\"value\":\"Arch Linux\"},{\"key\":\"ArchLinux_64\",\"icon\":\"linux.png\",\"value\":\"Arch Linux (64 bit)\"},{\"key\":\"Debian\",\"icon\":\"debian.png\",\"value\":\"Debian\"},{\"key\":\"Debian_64\",\"icon\":\"debian.png\",\"value\":\"Debian (64 bit)\"},{\"key\":\"Fedora\",\"icon\":\"fedora.png\",\"value\":\"Fedora\"},{\"key\":\"Fedora_64\",\"icon\":\"fedora.png\",\"value\":\"Fedora (64 bit)\"},{\"key\":\"FreeBSD\",\"icon\":\"linux.png\",\"value\":\"FreeBSD\"},{\"key\":\"FreeBSD_64\",\"icon\":\"linux.png\",\"value\":\"FreeBSD (64 bit)\"},{\"key\":\"Gentoo\",\"icon\":\"linux.png\",\"value\":\"Gentoo\"},{\"key\":\"Gentoo_64\",\"icon\":\"linux.png\",\"value\":\"Gentoo (64 bit)\"},{\"key\":\"Linux\",\"icon\":\"linux.png\",\"value\":\"Other Linux\"},{\"key\":\"MacOS\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server\"},{\"key\":\"MacOS_64\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server (64 bit)\"},{\"key\":\"OpenBSD\",\"icon\":\"linux.png\",\"value\":\"OpenBSD\"},{\"key\":\"OpenBSD_64\",\"icon\":\"linux.png\",\"value\":\"OpenBSD (64 bit)\"},{\"key\":\"OpenSUSE\",\"icon\":\"linux.png\",\"value\":\"openSUSE\"},{\"key\":\"OpenSUSE_64\",\"icon\":\"linux.png\",\"value\":\"openSUSE (64 bit)\"},{\"key\":\"OpenSolaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later\"},{\"key\":\"OpenSolaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later (64 bit)\"},{\"key\":\"Oracle\",\"icon\":\"linux.png\",\"value\":\"Oracle\"},{\"key\":\"Oracle_64\",\"icon\":\"linux.png\",\"value\":\"Oracle (64 bit)\"},{\"key\":\"Other\",\"icon\":\"unknown.png\",\"value\":\"Other/Unknown\"},{\"key\":\"RedHat\",\"icon\":\"redhat.png\",\"value\":\"Red Hat\"},{\"key\":\"RedHat_64\",\"icon\":\"redhat.png\",\"value\":\"Red Hat (64 bit)\"},{\"key\":\"Solaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier\"},{\"key\":\"Solaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier (64 bit)\"},{\"key\":\"Ubuntu\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu\"},{\"key\":\"Ubuntu_64\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu (64 bit)\"},{\"key\":\"Windows2000\",\"icon\":\"win7.png\",\"value\":\"Windows 2000\"},{\"key\":\"Windows2003\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003\"},{\"key\":\"Windows2003_64\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003 (64 bit)\"},{\"key\":\"Windows2008\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008\"},{\"key\":\"Windows2008_64\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008 (64 bit)\"},{\"key\":\"Windows7\",\"icon\":\"win7.png\",\"value\":\"Windows 7\"},{\"key\":\"Windows7_64\",\"icon\":\"win7.png\",\"value\":\"Windows 7 (64 bit)\"},{\"key\":\"Windows8\",\"icon\":\"win8.png\",\"value\":\"Windows 8\"},{\"key\":\"Windows8_64\",\"icon\":\"win8.png\",\"value\":\"Windows 8 (64 bit)\"},{\"key\":\"WindowsNT\",\"icon\":\"win7.png\",\"value\":\"Other Windows\"},{\"key\":\"WindowsNT4\",\"icon\":\"win7.png\",\"value\":\"Windows NT 4\"},{\"key\":\"WindowsVista\",\"icon\":\"win7.png\",\"value\":\"Windows Vista\"},{\"key\":\"WindowsVista_64\",\"icon\":\"win7.png\",\"value\":\"Windows Vista (64 bit)\"},{\"key\":\"Windowsxp\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"Windowsxp_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"WindowsXP\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"WindowsXP_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"Windows 7\",\"icon\":\"win7.png\",\"value\":\"Windows 7 series\"},{\"key\":\"Windows10\",\"icon\":\"win8.png\",\"value\":\"Windows 10\"},{\"key\":\"Windows10_64\",\"icon\":\"win8.png\",\"value\":\"Windows 10 (64 bit)\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/vdi/os-types.json\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"vdi.split\",[\"ngRoute\",\"ngResource\", \"ui.bootstrap\",\"app.localize\",\"app.controllers\",\"vdi\"])\r\n.run(['localize',function(localize){\r\n    localize.setLang();\r\n}])\r\n.factory(\"Split\", [\"$resource\", \"$splitDomain\", function(res, $splitDomain){\r\n\treturn res($splitDomain + \"/thor/controller\", null, {\r\n        split_brain_info: { method: \"GET\", url:$splitDomain + \"/thor/controller/split_brain_info\", isArray: false},\r\n        recover_split_brain:{ method: \"POST\", url:$splitDomain + \"/thor/controller/recover_split_brain\"}\r\n\t});\r\n}])\r\n.directive(\"readCount\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        link: function(scope, element, attrs){\r\n            var count = attrs.param1;\r\n            var timer = setInterval(function(){\r\n                if(count>0){\r\n                    count--;\r\n                    $$$storage.setSessionStorage('count', count);\r\n                    element.find('span.count').text(count)\r\n                }else{\r\n                    clearInterval(timer);\r\n                    scope.$emit('conuntDownFinish', true);\r\n                }\r\n            },1000);\r\n        }\r\n    };\r\n}])\r\n.controller(\"splitBrainController\", [\"$scope\",\"localize\",\"$$$I18N\",\"$timeout\",\"$location\",\"$rootScope\",\"Split\",'$Domain',\"$splitDomain\",\r\nfunction($scope,localize,$$$I18N,$timeout,$location,$rootScope,Split,domain,$splitDomain){\r\n    $scope.restore_host_ip = $$$storage.getSessionStorage('restore_host_ip') || undefined;\r\n    $scope.click_restore = $$$storage.getSessionStorage('click_restore') || undefined;\r\n    $scope.restoring = $$$storage.getSessionStorage('restoring') || undefined;\r\n    $scope.restore_status = $$$storage.getSessionStorage('restore_status') || undefined;\r\n    $scope.FloatingIP = $$$storage.getSessionStorage('FloatingIP') || undefined;\r\n    $scope.count = $$$storage.getSessionStorage('count') || undefined;\r\n    $scope.loading = true;\r\n    function getLists(){\r\n        Split.split_brain_info(function(res){\r\n            $scope.loading = false;\r\n            $scope.servers = res.result.sort(function(a,b){ return a.priority>b.priority?-1:1 });\r\n            $scope.servers[0].high = true;\r\n        });\r\n    }\r\n    getLists();\r\n    $scope.selectServer = function(server){\r\n        $scope.restore_host_ip = server.host_ip;\r\n        $$$storage.setSessionStorage('restore_host_ip', server.host_ip);\r\n        $scope.restore = server;\r\n    }\r\n    $scope.back = function(){\r\n        $scope.restore_host_ip = undefined;\r\n        $scope.click_restore = undefined;\r\n        $scope.restoring = undefined;\r\n        $scope.restore_status = undefined;\r\n        $$$storage.clearSessionStorage();\r\n    }\r\n    $scope.$on(\"conuntDownFinish\",function(e,v){\r\n        $$$storage.clearSessionStorage();\r\n        location.replace('http://'+$scope.FloatingIP);\r\n    })\r\n\r\n    var _scope = $scope;\r\n    if($scope.restoring == 'restoring'){\r\n        schedule();\r\n        countDown(1800); //倒计时30分钟\r\n    }\r\n     /* 轮询 get_controller_ha_status，直至 is_split_brain 返回 false 修复成功，\r\n        若从轮询开始直到 30 分钟后还是返回 true 就修复失败 */\r\n    var taskTimer;\r\n    function schedule(){\r\n        var IP = location.protocol + \"//\" + ($$$storage.getSessionStorage('restore_host_ip') || _scope.restore_host_ip) + \":8081\";\r\n        var status_ha = $.get(IP + \"/thor/get_controller_ha_status\");\r\n        status_ha.done(function(res){\r\n            res = typeof res === \"string\" ? JSON.parse(res) : res;\r\n            if(res.result && !res.result.is_split_brain && res.result.data_sync=='synced') {\r\n                _scope.FloatingIP = res.result.floating_ip;\r\n                restoreSuc();\r\n            }\r\n            taskTimer = setTimeout(schedule, 3000);\r\n        });\r\n    }\r\n    \r\n    // ha恢复成功\r\n    function restoreSuc(){\r\n        clearTimeout(taskTimer);\r\n        clearInterval(timer);\r\n        $scope.restoring = 'restoring_finish';\r\n        $$$storage.setSessionStorage('restoring', 'restoring_finish');\r\n        $scope.restore_status = 'restoring_suc';\r\n        $$$storage.setSessionStorage('restore_status', 'restoring_suc');\r\n        $scope.count = 5;\r\n    }\r\n\r\n    // ha恢复失败\r\n    function restoreFail(){\r\n        clearTimeout(taskTimer);\r\n        clearInterval(timer);\r\n        $scope.restoring = 'restoring_finish';\r\n        $$$storage.setSessionStorage('restoring', 'restoring_finish');\r\n        $scope.restore_status = 'restoring_fail';\r\n        $$$storage.setSessionStorage('restore_status', 'restoring_fail');\r\n    }\r\n\r\n    // 多少秒后执行ha恢复失败\r\n    var timer;\r\n    function countDown(count){\r\n        timer = setInterval(function(){\r\n            if(count>0){\r\n                count--;\r\n            }else{\r\n                clearInterval(timer);\r\n                if($scope.restore_status == 'restoring_fail'){\r\n                    restoreFail();\r\n                }\r\n            }\r\n        },1000);\r\n    }\r\n\r\n    $scope.restoreSplit = function(){\r\n        $scope.click_restore = 'click';\r\n        $$$storage.setSessionStorage('click_restore', 'click');\r\n        $scope.restoring = 'restoring';\r\n        $$$storage.setSessionStorage('restoring', 'restoring');\r\n\r\n        // 发送恢复裂脑，若有返回且返回失败就恢复失败，若有返回且返回成功就恢复成功，若无返回需要轮询 get_controller_ha_status\r\n        Split.recover_split_brain({controller_ip:$scope.restore_host_ip},function(res){\r\n            if(!res.result){\r\n                restoreFail();\r\n            }else{\r\n                // restoreSuc();\r\n            }\r\n        }); \r\n\r\n        schedule();\r\n        countDown(1800); //倒计时30分钟\r\n    }\r\n\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/split.js","module.exports = {\"resource_template\":{\"key\":\"0\",\"title\":\"dev\"},\"resources\":[{\"key\":\"e-vdi\",\"name\":\"E-VDI\",\"title\":\"E-VDI\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"pc\",\"name\":\"云PC\",\"title\":\"云PC\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classCh\",\"name\":\"云教室\",\"title\":\"云教室中文\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classEn\",\"name\":\"Cloud Class\",\"title\":\"云教室英文\",\"langType\":\"en\",\"langDes\":\"English\",\"clientKey\":\"public\",\"public\":true}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/info.json\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"app.controllers\", [])\r\n\r\n.controller(\"PageViewController\", [\"$scope\", \"$route\", \"$animate\", function($scope, $route, $animate) {\r\n\t// controler of the dynamically loaded views, for DEMO purposes only.\r\n\t// $scope.$on(\"$viewContentLoaded\", function() {\r\n\t// \tconsole.log(\"ffffffff\")\r\n\t// })\r\n}])\r\n.controller(\"LangController\", [\"$scope\", \"settings\", \"localize\", function($scope, settings, localize) {\r\n\t$scope.languages = settings.languages;\r\n\t$scope.currentLang = settings.currentLang || $scope.languages[0];\r\n\t$scope.setLang = function(lang) {\r\n\t\tsettings.currentLang = lang;\r\n\t\t$scope.currentLang = lang;\r\n\t\tlocalize.setLang(lang);\r\n\t\t$$$storage.setSessionStorage('lang_code', lang.langCode)\r\n\t};\r\n\t// set the default language\r\n\t$scope.setLang($scope.currentLang);\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.controllers.js","angular.module('app.main', [])\r\n// initiate body\r\n.directive('body', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\telement.on('click', 'a[href=\"#\"], [data-toggle]', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.factory('ribbon', ['$rootScope', function($rootScope) {\r\n\tvar ribbon = {\r\n\t\tcurrentBreadcrumb: [],\r\n\t\tupdateBreadcrumb: function(crumbs) {\r\n\t\t\tvar breadCrumb = crumbs.reverse();\r\n\t\t\tribbon.currentBreadcrumb = breadCrumb;\r\n\t\t\t$rootScope.$broadcast('navItemSelected', breadCrumb);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ribbon;\r\n}])\r\n\r\n.directive('action', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t/*\r\n\t\t\t * SMART ACTIONS\r\n\t\t\t */\r\n\t\t\tvar smartActions = {\r\n    \r\n\t\t\t    // LOGOUT MSG \r\n\t\t\t    userLogout: function($this){\r\n\t\t\t\r\n\t\t\t\t\t// ask verification\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>\" + $('#show-shortcut').text() + \"</strong></span> ?\",\r\n\t\t\t\t\t\tcontent : $this.data('logout-msg') || \"You can improve your security further after logging out by closing this opened browser\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\") {\r\n\t\t\t\t\t\t\t$.root_.addClass('animated fadeOutUp');\r\n\t\t\t\t\t\t\tsetTimeout(logout, 1000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfunction logout() {\r\n\t\t\t\t\t\twindow.location = $this.attr('href');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// RESET WIDGETS\r\n\t\t\t    resetWidgets: function($this){\r\n\t\t\t\t\t$.widresetMSG = $this.data('reset-msg');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage\",\r\n\t\t\t\t\t\tcontent : $.widresetMSG || \"Would you like to RESET all your saved widgets and clear LocalStorage?\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\" && localStorage) {\r\n\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // LAUNCH FULLSCREEN \r\n\t\t\t    launchFullscreen: function(element){\r\n\t\t\t\r\n\t\t\t\t\tif (!$.root_.hasClass(\"full-screen\")) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t$.root_.addClass(\"full-screen\");\r\n\t\t\t\t\r\n\t\t\t\t\t\tif (element.requestFullscreen) {\r\n\t\t\t\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t\t\t} else if (element.mozRequestFullScreen) {\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t\t\t} else if (element.webkitRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t\t\t} else if (element.msRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.root_.removeClass(\"full-screen\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\t\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t\t\t} else if (document.webkitExitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t   },\r\n\t\t\t\r\n\t\t\t   // MINIFY MENU\r\n\t\t\t    minifyMenu: function($this){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$.root_.toggleClass(\"minified\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$this.effect(\"highlight\", {}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // TOGGLE MENU \r\n\t\t\t    toggleMenu: function(){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t} else if ( $.root_.hasClass(\"menu-on-top\") && $.root_.hasClass(\"mobile-view-activated\") ) {\r\n\t\t\t    \t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t}\r\n\t\t\t    },     \r\n\t\t\t\r\n\t\t\t    // TOGGLE SHORTCUT \r\n\t\t\t    toggleShortcut: function(){\r\n\t\t\t    \t\r\n\t\t\t\t\tif (shortcut_dropdown.is(\":visible\")) {\r\n\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshortcut_buttons_show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// SHORT CUT (buttons that appear when clicked on user name)\r\n\t\t\t\t\tshortcut_dropdown.find('a').click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.location = $(this).attr('href');\r\n\t\t\t\t\t\tsetTimeout(shortcut_buttons_hide, 300);\r\n\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT buttons goes away if mouse is clicked outside of the area\r\n\t\t\t\t\t$(document).mouseup(function(e) {\r\n\t\t\t\t\t\tif (!shortcut_dropdown.is(e.target) && shortcut_dropdown.has(e.target).length === 0) {\r\n\t\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE HIDE\r\n\t\t\t\t\tfunction shortcut_buttons_hide() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"hide\"\r\n\t\t\t\t\t\t}, 300, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.removeClass('shortcut-on');\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE SHOW\r\n\t\t\t\t\tfunction shortcut_buttons_show() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"show\"\r\n\t\t\t\t\t\t}, 200, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.addClass('shortcut-on');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t    }  \r\n\t\t\t   \r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar actionEvents = {\r\n\t\t\t\tuserLogout: function(e) {\r\n\t\t\t\t\tsmartActions.userLogout(element);\r\n\t\t\t\t},\r\n\t\t\t\tresetWidgets: function(e) {\r\n\t\t\t\t\tsmartActions.resetWidgets(element);\r\n\t\t\t\t},\r\n\t\t\t\tlaunchFullscreen: function(e) {\r\n\t\t\t\t\tsmartActions.launchFullscreen(document.documentElement);\r\n\t\t\t\t},\r\n\t\t\t\tminifyMenu: function(e) {\r\n\t\t\t\t\tsmartActions.minifyMenu(element);\r\n\t\t\t\t},\r\n\t\t\t\ttoggleMenu: function(e) {\r\n\t\t\t\t\tsmartActions.toggleMenu();\r\n\t\t\t\t},\r\n\t\t\t\ttoggleShortcut: function(e) {\r\n\t\t\t\t\tsmartActions.toggleShortcut();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (angular.isDefined(attrs.action) && attrs.action != '') {\r\n\t\t\t\tvar actionEvent = actionEvents[attrs.action];\r\n\t\t\t\tif (typeof actionEvent === 'function') {\r\n\t\t\t\t\telement.on('click', function(e) {\r\n\t\t\t\t\t\tactionEvent(e);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('header', function() {\r\n\treturn {\r\n\t\trestrict: 'EA',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t// SHOW & HIDE MOBILE SEARCH FIELD\r\n\t\t\tangular.element('#search-mobile').click(function() {\r\n\t\t\t\t$.root_.addClass('search-mobile');\r\n\t\t\t});\r\n\r\n\t\t\tangular.element('#cancel-search-js').click(function() {\r\n\t\t\t\t$.root_.removeClass('search-mobile');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('ribbon', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\treturn;\r\n\t\t\telement.append('<div class=\"demo\"><span id=\"demo-setting\"><i class=\"fa fa-cog txt-color-blueDark\"></i></span> <form><legend class=\"no-padding margin-bottom-10\">Layout Options</legend><section><label><input name=\"subscription\" id=\"smart-fixed-header\" type=\"checkbox\" class=\"checkbox style-0\"><span>Fixed Header</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-navigation\" class=\"checkbox style-0\"><span>Fixed Navigation</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-ribbon\" class=\"checkbox style-0\"><span>Fixed Ribbon</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-footer\" class=\"checkbox style-0\"><span>Fixed Footer</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-container\" class=\"checkbox style-0\"><span>Inside <b>.container</b> <div class=\"font-xs text-right\">(non-responsive)</div></span></label><label style=\"display:block;\"><input type=\"checkbox\" id=\"smart-topmenu\" class=\"checkbox style-0\"><span>Menu on <b>top</b></span></label> <span id=\"smart-bgimages\"></span></section><section><h6 class=\"margin-top-10 semi-bold margin-bottom-5\">Clear Localstorage</h6><a href=\"javascript:void(0);\" class=\"btn btn-xs btn-block btn-primary\" id=\"reset-smart-widget\"><i class=\"fa fa-refresh\"></i> Factory Reset</a></section> <h6 class=\"margin-top-10 semi-bold margin-bottom-5\">SmartAdmin Skins</h6><section id=\"smart-styles\"><a href=\"javascript:void(0);\" id=\"smart-style-0\" data-skinlogo=\"img/logo.png\" class=\"btn btn-block btn-xs txt-color-white margin-right-5\" style=\"background-color:#4E463F;\"><i class=\"fa fa-check fa-fw\" id=\"skin-checked\"></i>Smart Default</a><a href=\"javascript:void(0);\" id=\"smart-style-1\" data-skinlogo=\"img/logo-white.png\" class=\"btn btn-block btn-xs txt-color-white\" style=\"background:#3A4558;\">Dark Elegance</a><a href=\"javascript:void(0);\" id=\"smart-style-2\" data-skinlogo=\"img/logo-blue.png\" class=\"btn btn-xs btn-block txt-color-darken margin-top-5\" style=\"background:#fff;\">Ultra Light</a><a href=\"javascript:void(0);\" id=\"smart-style-3\" data-skinlogo=\"img/logo-pale.png\" class=\"btn btn-xs btn-block txt-color-white margin-top-5\" style=\"background:#f78c40\">Google Skin</a></section></form> </div>')\r\n\r\n\t\t\t// hide bg options\r\n\t\t\tvar smartbgimage = \"<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>\";\r\n\t\t\t$(\"#smart-bgimages\")\r\n\t\t\t    .fadeOut();\r\n\r\n\t\t\t$('#demo-setting')\r\n\t\t\t    .click(function () {\r\n\t\t\t        $('#ribbon .demo')\r\n\t\t\t            .toggleClass('activate');\r\n\t\t\t    })\r\n\t\t\t/*\r\n\t\t\t * FIXED HEADER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\r\n\t\t\t            $.root_.removeClass(\"fixed-header\");\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED NAV\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED RIBBON\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            //apply\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.addClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-footer')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-page-footer\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-page-footer\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-rtl')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"smart-rtl\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"smart-rtl\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * MENU ON TOP\r\n\t\t\t */\r\n\r\n\t\t\t$('#smart-topmenu')\r\n\t\t\t    .on('change', function (e) {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .prop('checked')) {\r\n\t\t\t            //window.location.href = '?menu=top';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'top');\r\n\t\t\t            location.reload();\r\n\t\t\t        } else {\r\n\t\t\t            //window.location.href = '?';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'left');\r\n\t\t\t            location.reload();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\tif (localStorage.getItem('sm-setmenu') == 'top') {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', true);\r\n\t\t\t} else {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', false);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * INSIDE CONTAINER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"container\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\r\n\t\t\t            if (smartbgimage) {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .append(smartbgimage)\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t                $(\"#smart-bgimages img\")\r\n\t\t\t                    .bind(\"click\", function () {\r\n\t\t\t                        var $this = $(this);\r\n\t\t\t                        var $html = $('html')\r\n\t\t\t                        bgurl = ($this.data(\"htmlbg-url\"));\r\n\t\t\t                        $html.css(\"background-image\", \"url(\" + bgurl + \")\");\r\n\t\t\t                    })\r\n\t\t\t                smartbgimage = null;\r\n\t\t\t            } else {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t            }\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\t\t\t            $(\"#smart-bgimages\")\r\n\t\t\t                .fadeOut();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * REFRESH WIDGET\r\n\t\t\t */\r\n\t\t\t$(\"#reset-smart-widget\")\r\n\t\t\t    .bind(\"click\", function () {\r\n\t\t\t        $('#refresh')\r\n\t\t\t            .click();\r\n\t\t\t        return false;\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * STYLES\r\n\t\t\t */\r\n\t\t\t$(\"#smart-styles > a\")\r\n\t\t\t   .on('click', function() {\r\n\t\t\t        var $this = $(this);\r\n\t\t\t        var $logo = $(\"#logo img\");\r\n\t\t\t        $.root_.removeClassPrefix('smart-style')\r\n\t\t\t            .addClass($this.attr(\"id\"));\r\n\t\t\t        $logo.attr('src', $this.data(\"skinlogo\"));\r\n\t\t\t        $(\"#smart-styles > a #skin-checked\")\r\n\t\t\t            .remove();\r\n\t\t\t        $this.prepend(\"<i class='fa fa-check fa-fw' id='skin-checked'></i>\");\r\n\t\t\t    });\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('breadcrumbController', ['$scope', function($scope) {\r\n\t$scope.breadcrumbs = [];\r\n\t$scope.$on('navItemSelected', function(name, crumbs) {\r\n\t\t$scope.setBreadcrumb(crumbs);\r\n\t});\r\n\r\n\t$scope.setBreadcrumb = function(crumbs) {\r\n\t\t$scope.breadcrumbs = crumbs;\r\n\t}\r\n}])\r\n\r\n.directive('breadcrumb', ['ribbon', 'localize', '$compile', function(ribbon, localize, $compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'breadcrumbController',\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.$watch('breadcrumbs', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal !== oldVal || !element.text()) {\r\n\t\t\t\t\t// update DOM\r\n\t\t\t\t\tscope.updateDOM();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tscope.updateDOM = function() {\r\n\t\t\t\telement.empty();\r\n\t\t\t\tangular.forEach(scope.breadcrumbs, function(crumb) {\r\n\t\t\t\t\tvar li = angular.element('<li data-localize=\"' + crumb + '\">' + crumb + '</li>');\r\n\t\t\t\t\tli.text(localize.localizeText(crumb));\r\n\t\t\t\t\t\r\n\t\t\t\t\t$compile(li)(scope);\r\n\t\t\t\t\telement.append(li);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// set the current breadcrumb on load\r\n\t\t\tscope.setBreadcrumb(ribbon.currentBreadcrumb);\r\n\t\t\tscope.updateDOM();\r\n\t\t},\r\n\t\ttemplate: '<ol class=\"breadcrumb\"></ol>'\r\n\t}\r\n}])\r\n;\r\n\r\n// directives for localization\r\nangular.module('app.localize', [])\r\n.factory('localize', ['$http', '$rootScope', '$window', \"settings\", \"$RESOURCE\", function($http, $rootScope, $window, settings, $RESOURCE){\r\n\t// shared variables for `translate`\r\n\tvar encodeHTML = function(txt){\r\n\t\treturn txt.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t}\r\n\tvar tmplReg = /\\{\\{([^\\}]+)\\}\\}/g;\r\n\tvar interestAttrReg = /^param\\d+$/;\r\n\t// internal flag\r\n\tvar ready = false;\r\n\t// factory\r\n\tvar localize = {\r\n\t\tcurrentLocaleData: {},\r\n\t\tcurrentLang: {},\r\n\t\tsetLang: function(lang) {\r\n\t\t\tif(!lang){\r\n\t\t\t\tlang = settings.languages[0];\r\n\t\t\t}\r\n\t\t\t$RESOURCE.load(lang.key, function(data){\r\n\t\t\t\tlocalize.currentLocaleData = data.lang;\r\n\t\t\t\tlocalize.currentLang = lang;\r\n\t\t\t\tready = true;\r\n\t\t\t\t$rootScope.$broadcast('localizeLanguageChanged');\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetLangUrl: function(lang) {\r\n\t\t\treturn \"resources/pkg/\" + lang.langCode + \"/lang.js\";\r\n\t\t},\r\n\r\n\t\tlocalizeText: function(sourceText) {\r\n\t\t\treturn localize.currentLocaleData[sourceText];\r\n\t\t},\r\n\t\ttranslate: function(scope, element, attrs, transkey){\r\n\t\t\tvar onAttrChange = function(e){\r\n\t\t\t\tif(!ready) { return; }\r\n\t\t\t\tvar tmpl = localize.localizeText(attrs[transkey]);\r\n\t\t\t\t// 无效的翻译\r\n\t\t\t\tif(!tmpl) {\r\n\t\t\t\t\t// debug\r\n\t\t\t\t\t// return console.error(\"invalid \" + transkey + \"=\\\"\" + attrs[transkey] + \"\\\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar myhtml = tmplReg.test(tmpl) ? tmpl.replace(tmplReg, function(match, index){\r\n\t\t\t\t\tvar myattr = \"param\" + index;\r\n\t\t\t\t\tvar value = attrs[myattr];\r\n\t\t\t\t\treturn encodeHTML(value);\r\n\t\t\t\t}) : tmpl;\r\n\t\t\t\tswitch(transkey) {\r\n\t\t\t\t\tcase \"localize\":\r\n\t\t\t\t\t\tif(element.is(\"input, textarea\")){\r\n\t\t\t\t\t\t\telement.attr(\"placeholder\", myhtml);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.html(myhtml);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"localizeHref\":\r\n\t\t\t\t\t\telement.attr(\"href\", myhtml); break;\r\n\t\t\t\t\tcase \"localizeTitle\":\r\n\t\t\t\t\t\telement.attr(\"title\", myhtml); break;\r\n\t\t\t\t\tcase \"localizePlaceholder\":\r\n\t\t\t\t\t\telement.attr(\"placeholder\", myhtml); break;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tangular.forEach(attrs, function(v, k){\r\n\t\t\t\tif(interestAttrReg.test(k)) {\r\n\t\t\t\t\tattrs.$observe(k, onAttrChange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(ready) {\r\n\t\t\t\tonAttrChange();\r\n\t\t\t}\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", onAttrChange);\r\n\t\t},\r\n\t\tisReady: function(){\r\n\t\t\treturn ready;\r\n\t\t}\r\n\t};\r\n\r\n\treturn localize;\r\n}])\r\n.directive('localize', ['localize', function(localize) {\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localize\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeTitle\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeTitle\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizePlaceholder\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizePlaceholder\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeHref\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeHref\");\r\n\t\t}\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for navigation\r\nangular.module('app.navigation', [])\r\n.directive('navigation', [\"$timeout\",  function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: ['$scope', function($scope) {\r\n\t\t\t//$scope.version = $$$version;\r\n\t\t}],\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar timer = null;\r\n\t\t\tlet timer_handle = function(){\r\n\t\t\t\tif (!topmenu) {\r\n\t\t\t\t\tif (!null) {\r\n\t\t\t\t\t\telement.first().jarvismenu({\r\n\t\t\t\t\t\t\taccordion : true,\r\n\t\t\t\t\t\t\tspeed : $.menu_speed,\r\n\t\t\t\t\t\t\tclosedSign : '<em class=\"fa icon-jj-xiala\"></em>',\r\n\t\t\t\t\t\t\topenedSign : '<em class=\"fa icon-jj-sou\"></em>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//alert(\"Error - menu anchor does not exist\");\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle : \"Error\",\r\n\t\t\t\t\t\t\tcontent : \"menu anchor does not exist\",\r\n\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\tnumber : \"1\",\r\n\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SLIMSCROLL FOR NAV\r\n\t\t\t\tif ($.fn.slimScroll) {\r\n\t\t\t\t\telement.slimScroll({\r\n\t\t\t\t        height: '100%'\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getElement = function() {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tscope.$on(\"updateNavData\", function(name, navs){\r\n\t\t\t\tscope.navs = navs;\r\n\t\t\t});\r\n\t\t\tscope.$on(\"renderNavItem\", function(name){\r\n\t\t\t\t$timeout.cancel(timer);\r\n\t\t\t\ttimer = $timeout(timer_handle, 100);\r\n\t\t\t});\r\n\t\t},\r\n\t\ttemplate: \"<nav><ul data-ng-transclude></ul></nav>\"\r\n\t};\r\n}])\r\n\r\n\r\n.controller('NavItemController', ['$rootScope', '$scope', '$location', function($rootScope, $scope, $location) {\r\n\t$scope.isChild = false;\r\n\t$scope.active = false;\r\n\t$scope.isActive = function (viewLocation) {\r\n        $scope.active = viewLocation === $location.path();\r\n        return $scope.active;\r\n    };\r\n    $scope.hasIcon = angular.isDefined($scope.icon);\r\n    $scope.hasIconCaption = angular.isDefined($scope.iconCaption);\r\n\r\n    $scope.getItemUrl = function(view) {\r\n    \tif (angular.isDefined($scope.href)) return $scope.href;\r\n    \tif (!angular.isDefined(view)) return '';\r\n    \treturn '#' + view;\r\n    };\r\n\r\n    $scope.getItemTarget = function() {\r\n    \treturn angular.isDefined($scope.target) ? $scope.target : '_self';\r\n    };\r\n\t$scope.$emit(\"renderNavItem\");\r\n\r\n}])\r\n.directive('navItem', ['ribbon', \"$rootScope\", function(ribbon, $root) {\r\n\treturn {\r\n\t\trequire: ['^navigation'],\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'NavItemController',\r\n\t\tscope: {\r\n\t\t\ttitle: '@navTitle',\r\n\t\t\tview: '@',\r\n\t\t\ticon: '@',\r\n\t\t\ticonCaption: '@',\r\n\t\t\thref: '@',\r\n\t\t\ttarget: '@'\r\n\t\t},\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar navCtrl = parentCtrls[0],\r\n\t\t\t\tnavgroupCtrl = parentCtrls[1];\r\n\t\t\tif(attrs.view){\r\n\t\t\t\telement.find(\"ul\").remove();\r\n\t\t\t}\r\n\t\t\tscope.$watch('active', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(true);\r\n\t\t\t\t\t$root.$broadcast(\"updateDocumentTitle\", scope.title);\r\n\t\t\t\t\tscope.setBreadcrumb();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tscope.openParents = scope.isActive(scope.view);\r\n\t\t\tscope.isChild = angular.isDefined(navgroupCtrl);\r\n\t\t\t\r\n\t\t\tscope.setBreadcrumb = function() {\r\n    \t\t\tvar crumbs = [];\r\n    \t\t\tcrumbs.push(scope.title);\r\n    \t\t\t// get parent menus\r\n\t\t\t\tvar test = element.parents('nav li').each(function() {\r\n\t\t\t\t\tvar el = angular.element(this);\r\n\t\t\t\t\tvar parent = el.find('.menu-item-parent:eq(0)');\r\n\t\t\t\t\tcrumbs.push(parent.data('localize').trim());\r\n\t\t\t\t\tif (scope.openParents) {\r\n\t\t\t\t\t\t// open menu on first load\r\n\t\t\t\t\t\tparent.trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// this should be only fired upon first load so let's set this to false now\r\n\t\t\t\tscope.openParents = false;\r\n\t\t\t\tribbon.updateBreadcrumb(crumbs);\r\n    \t\t};\r\n\r\n    \t\telement.on('click', 'a[href!=\"#\"]', function() {\r\n    \t\t\tif ($.root_.hasClass('mobile-view-activated')) {\r\n    \t\t\t\t$.root_.removeClass('hidden-menu');\r\n    \t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: `\r\n\t\t\t<li data-ng-class=\"{active: isActive(view)}\">\r\n\t\t\t\t<a href=\"{{ getItemUrl(view) }}\" target=\"{{ getItemTarget() }}\">\r\n\t\t\t\t\t<i data-ng-if=\"hasIcon\" class=\"{{ icon }}\"><em data-ng-if=\"hasIconCaption\"> {{ iconCaption }} </em></i>\r\n\t\t\t\t\t<span ng-class=\"{'menu-item-parent': !isChild}\" data-localize=\"{{ title }}\"></span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<ul data-ng-transclude=\"\"></ul>\r\n\t\t\t</li>`\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for activity\r\nangular.module('app.activity', [])\r\n.controller('ActivityController', ['$scope', '$http' , function($scope, $http) {\r\n\tvar ctrl = this,\r\n\t\titems = ctrl.items = $scope.items = [];\r\n\r\n\tctrl.loadItem = function(loadedItem, callback) {\r\n\t\tangular.forEach(items, function(item) {\r\n\t      \tif (item.active && item !== loadedItem) {\r\n\t        \titem.active = false;\r\n\t        \t//item.onDeselect();\r\n\t      \t}\r\n\t    });\r\n\r\n\t\tloadedItem.active = true;\r\n\t\tif (angular.isDefined(loadedItem.onLoad)) {\r\n\t\t\tloadedItem.onLoad(loadedItem);\r\n\t\t}\r\n\r\n\t\t$http.get(loadedItem.src).then(function(result) {\r\n\t\t\tvar content = result.data;\r\n\t\t\tif (angular.isDefined(callback)) {\r\n\t\t\t\tcallback(content);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tctrl.addItem = function(item) {\r\n\t\titems.push(item);\r\n\t\tif (!angular.isDefined(item.active)) {\r\n\t\t\t// set the default\r\n\t\t\titem.active = false;\r\n\t\t} else if (item.active) {\r\n\t\t\tctrl.loadItem(item);\r\n\t\t}\r\n\t};\r\n\r\n\tctrl.refresh = function(e) {\r\n\t\tvar btn = angular.element(e.currentTarget);\r\n\t\tbtn.button('loading');\r\n\r\n\t\tif (angular.isDefined($scope.onRefresh)) {\r\n\t\t\t$scope.onRefresh($scope, function() {\r\n\t\t\t\tbtn.button('reset');\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbtn.button('reset');\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activity', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: 'ActivityController',\r\n\t\tscope: {\r\n\t\t\tonRefresh: '=onrefresh',\r\n\t\t},\r\n\t\ttemplate: '<span data-ng-transclude=\"\"></span>'\r\n\t};\r\n})\r\n\r\n.directive('activityButton', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: function($scope) {\r\n\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\ticon: '@',\r\n\t\t\ttotal: '='\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t\t<span id=\"activity\" class=\"activity-dropdown\">\\\r\n\t\t\t\t\t<i ng-class=\"icon\"></i>\\\r\n\t\t\t\t\t<b class=\"badge\"> {{ total }} </b>\\\r\n\t\t\t\t</span>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\r\n\t\t\tattrs.$observe('icon', function(value) {\r\n\t\t\t\tif (!angular.isDefined(value))\r\n\t\t\t\t\tscope.icon = 'fa fa-user';\r\n\t\t\t});\r\n\r\n\t\t\telement.on('click', function(e) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\tif ($this.find('.badge').hasClass('bg-color-red')) {\r\n\t\t\t\t\t$this.find('.badge').removeClassPrefix('bg-color-');\r\n\t\t\t\t\t$this.find('.badge').text(\"0\");\r\n\t\t\t\t\t// console.log(\"Ajax call for activity\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$this.next('.ajax-dropdown').is(':visible')) {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeIn(150);\r\n\t\t\t\t\t$this.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeOut(150);\r\n\t\t\t\t\t$this.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mytest = $this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tif (scope.total > 0) {\r\n\t\t\t\tvar $badge = element.find('.badge');\r\n\t\t\t\t$badge.addClass(\"bg-color-red bounceIn animated\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('ActivityContentController', ['$scope' , function($scope) {\r\n\tvar ctrl = this;\r\n\t$scope.currentContent = '';\r\n\tctrl.loadContent = function(content) {\r\n\t\t$scope.currentContent = content;\r\n\t}\r\n}])\r\n\r\n.directive('activityContent', ['$compile', function($compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tfooter: '=?'\r\n\t\t},\r\n\t\tcontroller: 'ActivityContentController',\r\n\t\ttemplate: '\\\r\n\t\t\t<div class=\"ajax-dropdown\">\\\r\n\t\t\t\t<div class=\"btn-group btn-group-justified\" data-toggle=\"buttons\" data-ng-transclude=\"\"></div>\\\r\n\t\t\t\t<div class=\"ajax-notifications custom-scroll\">\\\r\n\t\t\t\t\t<div class=\"alert alert-transparent\">\\\r\n\t\t\t\t\t\t<h4>Click a button to show messages here</h4>\\\r\n\t\t\t\t\t\tThis blank page message helps protect your privacy, or you can show the first message here automatically.\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t<i class=\"fa fa-lock fa-4x fa-border\"></i>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<span> {{ footer }}\\\r\n\t\t\t\t\t<button type=\"button\" data-loading-text=\"Loading...\" data-ng-click=\"refresh($event)\" class=\"btn btn-xs btn-default pull-right\" data-activty-refresh-button=\"\">\\\r\n\t\t\t\t\t<i class=\"fa fa-refresh\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</div>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\t\t\tscope.refresh = function(e) {\r\n\t\t\t\tactivityCtrl.refresh(e);\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('currentContent', function(newContent, oldContent) {\r\n\t\t\t\tif (newContent !== oldContent) {\r\n\t\t\t\t\tvar el = element.find('.ajax-notifications').html(newContent);\r\n\t\t\t\t\t$compile(el)(scope);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activityItem', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: ['^activity', '^activityContent'],\r\n\t\tscope: {\r\n\t\t\tsrc: '=',\r\n\t\t\tonLoad: '=onload',\r\n\t\t\tactive: '=?'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '\\\r\n\t\t\t<label class=\"btn btn-default\" data-ng-click=\"loadItem()\" ng-class=\"{active: active}\">\\\r\n\t\t\t\t<input type=\"radio\" name=\"activity\">\\\r\n\t\t\t\t<span data-ng-transclude=\"\"></span>\\\r\n\t\t\t</label>',\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar activityCtrl = parentCtrls[0],\r\n\t\t\t\tcontentCtrl = parentCtrls[1];\r\n\r\n\t\t\tscope.$watch('active', function(active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tactivityCtrl.loadItem(scope, function(content) {\r\n\t\t\t\t\t\tcontentCtrl.loadContent(content);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactivityCtrl.addItem(scope);\r\n\r\n\t\t\tscope.loadItem = function() {\r\n\t\t\t\tscope.active = true;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n})\r\n;\r\n\r\nangular.module('app.smartui', [])\r\n.directive('widgetGrid', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.setup_widget_desktop = function() {\r\n\t\t\t\tif ($.fn.jarvisWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\telement.jarvisWidgets({\r\n\t\t\t\t\t\tgrid : 'article',\r\n\t\t\t\t\t\twidgets : '.jarviswidget',\r\n\t\t\t\t\t\tlocalStorage : true,\r\n\t\t\t\t\t\tdeleteSettingsKey : '#deletesettingskey-options',\r\n\t\t\t\t\t\tsettingsKeyLabel : 'Reset settings?',\r\n\t\t\t\t\t\tdeletePositionKey : '#deletepositionkey-options',\r\n\t\t\t\t\t\tpositionKeyLabel : 'Reset position?',\r\n\t\t\t\t\t\tsortable : true,\r\n\t\t\t\t\t\tbuttonsHidden : false,\r\n\t\t\t\t\t\t// toggle button\r\n\t\t\t\t\t\ttoggleButton : true,\r\n\t\t\t\t\t\ttoggleClass : 'fa fa-minus | fa fa-plus',\r\n\t\t\t\t\t\ttoggleSpeed : 200,\r\n\t\t\t\t\t\tonToggle : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// delete btn\r\n\t\t\t\t\t\tdeleteButton : true,\r\n\t\t\t\t\t\tdeleteClass : 'fa fa-times',\r\n\t\t\t\t\t\tdeleteSpeed : 200,\r\n\t\t\t\t\t\tonDelete : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// edit btn\r\n\t\t\t\t\t\teditButton : true,\r\n\t\t\t\t\t\teditPlaceholder : '.jarviswidget-editbox',\r\n\t\t\t\t\t\teditClass : 'fa fa-cog | fa fa-save',\r\n\t\t\t\t\t\teditSpeed : 200,\r\n\t\t\t\t\t\tonEdit : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// color button\r\n\t\t\t\t\t\tcolorButton : true,\r\n\t\t\t\t\t\t// full screen\r\n\t\t\t\t\t\tfullscreenButton : true,\r\n\t\t\t\t\t\tfullscreenClass : 'fa fa-expand | fa fa-compress',\r\n\t\t\t\t\t\tfullscreenDiff : 3,\r\n\t\t\t\t\t\tonFullscreen : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// custom btn\r\n\t\t\t\t\t\tcustomButton : false,\r\n\t\t\t\t\t\tcustomClass : 'folder-10 | next-10',\r\n\t\t\t\t\t\tcustomStart : function() {\r\n\t\t\t\t\t\t\talert('Hello you, this is a custom button...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcustomEnd : function() {\r\n\t\t\t\t\t\t\talert('bye, till next time...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// order\r\n\t\t\t\t\t\tbuttonOrder : '%refresh% %custom% %edit% %toggle% %fullscreen% %delete%',\r\n\t\t\t\t\t\topacity : 1.0,\r\n\t\t\t\t\t\tdragHandle : '> header',\r\n\t\t\t\t\t\tplaceholderClass : 'jarviswidget-placeholder',\r\n\t\t\t\t\t\tindicator : true,\r\n\t\t\t\t\t\tindicatorTime : 600,\r\n\t\t\t\t\t\tajax : true,\r\n\t\t\t\t\t\ttimestampPlaceholder : '.jarviswidget-timestamp',\r\n\t\t\t\t\t\ttimestampFormat : 'Last update: %m%/%d%/%y% %h%:%i%:%s%',\r\n\t\t\t\t\t\trefreshButton : true,\r\n\t\t\t\t\t\trefreshButtonClass : 'fa fa-refresh',\r\n\t\t\t\t\t\tlabelError : 'Sorry but there was a error:',\r\n\t\t\t\t\t\tlabelUpdated : 'Last Update:',\r\n\t\t\t\t\t\tlabelRefresh : 'Refresh',\r\n\t\t\t\t\t\tlabelDelete : 'Delete widget:',\r\n\t\t\t\t\t\tafterLoad : function() { },\r\n\t\t\t\t\t\trtl : false, // best not to toggle this!\r\n\t\t\t\t\t\tonChange : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonSave : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajaxnav : $.navAsAjax // declears how the localstorage should be saved (HTML or AJAX page)\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscope.setup_widget_mobile = function() {\r\n\t\t\t\tif ($.enableMobileWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\tscope.setup_widgets_desktop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($.device === \"desktop\") {\r\n\t\t\t\tscope.setup_widget_desktop();\r\n\t\t\t} else {\r\n\t\t\t\tscope.setup_widget_mobile();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.directive('widget', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetHeader', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\ttitle: '@',\r\n\t\t\ticon: '@'\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t<header>\\\r\n\t\t\t\t<span class=\"widget-icon\"> <i data-ng-class=\"icon\"></i> </span>\\\r\n\t\t\t\t<h2>{{ title }}</h2>\\\r\n\t\t\t\t<span data-ng-transclude></span>\\\r\n\t\t\t</header>'\r\n\t}\r\n})\r\n\r\n.directive('widgetToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetEditbox', function() {\r\n\treturn {\r\n\t\trestrict: 'AE', \r\n\t\ttransclude: true, \r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget-editbox\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBody', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBodyToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tclass: '@'\r\n\t\t},\r\n\t\ttemplate: '<div class=\"widget-body-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetContent', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-body\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\n\treturn {\r\n\t\trestrict: \"AE\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", function(){\r\n\t\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('textareaEmail', [function(){\r\n\treturn {\r\n\t\trequire: 'ngModel',\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, iElm, iAttrs, controller) {\r\n\t\t\tvar modelCtrl = controller;\r\n\t\t\tfunction validate(val){\r\n\t\t\t\tvar vals = Array.isArray(val) ? val : [val];\r\n\t\t\t\tvar reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n\t\t\t\tvar isvalide = vals.every(function(v){ return reg.test(v)});\r\n\t\t\t\treturn isvalide;\r\n\t\t\t}\r\n\t\t\tfunction parser(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value.split('\\n').reduce(function(arr,b){\r\n\t\t\t\t\t\tif(b.trim().length){\r\n\t\t\t\t\t\t\tarr.push(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t},[]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction formatter(value){\r\n\t\t\t\treturn validate(value) ? value.join(\"\\n\") : undefined;\r\n\t\t\t}\r\n\t\t\tfunction viewChangeListener(){\r\n\t\t\t\tmodelCtrl.$setValidity('email',validate(modelCtrl.$modelValue));\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$isEmpty = function(val){\r\n\t\t\t\tif(Array.isArray(val) && val.length === 0){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif(!val){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$parsers.push(parser);\r\n\t\t\tmodelCtrl.$formatters.push(formatter);\r\n\t\t\tmodelCtrl.$viewChangeListeners.push(viewChangeListener);\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('schedulerInput',['$rootScope',function($rootScope){\r\n\treturn {\r\n\t    require: \"ngModel\",\r\n\t    link: function(scope,element,attrs,ngModel){\r\n\t    \t$rootScope.$broadcast('matchInput', true);\r\n\t        element.bind('keyup',function(value){\r\n\t            // var isValid = this.value.match(/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/);\r\n\t            var isValid = this.value.match(/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/);\r\n\t            $rootScope.$broadcast('matchInput', isValid);\r\n\t        });\r\n\t    }\r\n\t}\r\n}])\r\n.service(\"formDate\",[function(){\r\n\tthis.format = function(date, fmt){\r\n\t\tvar o = {\r\n\t\t  \"M+\" : date.getMonth()+1,                 //月份   \r\n\t\t  \"d+\" : date.getDate(),                    //日   \r\n\t\t  \"h+\" : date.getHours(),                   //小时   \r\n\t\t  \"m+\" : date.getMinutes(),                 //分   \r\n\t\t  \"s+\" : date.getSeconds(),                 //秒   \r\n\t\t  \"q+\" : Math.floor((date.getMonth()+3)/3), //季度   \r\n\t\t  \"S\"  : date.getMilliseconds()             //毫秒   \r\n\t\t};   \r\n\t\tif(/(y+)/.test(fmt))   \r\n\t\t  fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \r\n\t\tfor(var k in o)   \r\n\t\t  if(new RegExp(\"(\"+ k +\")\").test(fmt))   \r\n\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \r\n\t\treturn fmt;\r\n\t}\r\n}])\r\n.service(\"customModal\",[\"$modal\",\"$rootScope\",function($modal,$root){\r\n\tthis.openModal=function(obj){\r\n\t\t/**\r\n\t\t * [init 模态框配置]\r\n\t\t */\r\n\t\tvar init={\r\n\t\t\ttitle: obj.title, \t\t\t\t\t\t\t\t\t\t// 标题，必传\r\n\t\t\tdelTips: obj.delTips,\t\t\t\t\t\t\t\t\t// 删除提示，必传\r\n\t\t\tkey: obj.key?obj.key:'',\t\t\t\t\t\t\t\t// 删除标志，一个页面可能有多个删除，可不传\r\n\t\t\tdelete_rows: obj.delete_rows?obj.delete_rows:[],\t\t// 可删除的数据，可不传，如清空操作\r\n\t\t\tdelParm: obj.delParm?obj.delParm:'',\t\t\t\t\t// 删除数据的名字key，可不传\r\n\t\t\tnodelete_rows: obj.nodelete_rows?obj.nodelete_rows:[],   // 不可删除的数据，可不传\r\n\t\t\tnodelTips: obj.nodelTips?obj.nodelTips:\"\"\t\t\t\t// 不可删除提示，可不传\r\n\t\t}\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: [\r\n\t\t\t\t\t\t\"<section id='widget-grid' ><div class='modal-content'>\",\r\n\t\t\t\t\t\t\"<div class='modal-header'><a type='button' class='close' data-ng-click='close()'>\",\r\n\t\t\t\t\t\t\"<span aria-hidden='true'>×</span><span class='sr-only'>\",\r\n\t\t\t\t\t\t\"Close</span></a><h4 class='modal-title' id='mySmallModalLabel' data-localize=\"+init.title+\"></h4></div><div class='modal-body'>\",\r\n\t\t\t\t\t\t\"<form class='form-horizontal'>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-localize='\"+init.delTips+\"' param1='{{deleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-ng-if='\"+init.nodelete_rows.length+\"' data-localize='\"+init.nodelTips+\"' param1='{{nodeleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<footer class='text-right'><a class='btn btn-primary' data-ng-click='ok()'  data-localize='确定'>确定\",\r\n\t\t\t\t\t\t\"</a><a class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'>取消\",\r\n\t\t\t\t\t\t\"</a></footer></form></div></div></section>\"].join(''),\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.deleteName = init.delete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.nodeleteName = init.nodelete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$root.$broadcast(\"DELETE\", init.key===''?init.delete_rows:{key: init.key, data: init.delete_rows});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n.directive(\"treeSelectNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', selecteduser: '='},\r\n        template: `<dd class=\"group\" ng-repeat=\"item in users\">\r\n\t\t\t\t\t<dl class=\"group\">\r\n\t\t\t\t\t\t<dt class=\"group-title\">{{item.dept_name}}</dt>\r\n\t\t\t\t\t\t<tree-select-node ng-repeat=\"node in item.children\" data-selecteduser=\"selecteduser\" data-node=\"node\"></tree-select-node>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t  </dd>`,\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeSelectNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', selecteduser: '='},\r\n        template: '<dd></dd>',\r\n        controller: function($scope){\r\n        \t$scope.selectUser = function(user){\r\n        \t\t$scope.$emit('selectCommonUser', user);\r\n        \t}\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n            \telement.append('<dl class=\"group\">'+\r\n\t\t\t\t\t\t\t\t\t'<dt class=\"group-title\">{{node.dept_name}}</dt>'+\r\n\t\t\t\t\t\t\t\t\t'<tree-select-node ng-repeat=\"sub in node.children\" data-selecteduser=\"selecteduser\" data-nodes=\"node.children\" data-node=\"sub\"></tree-select-node>'+\r\n\t\t\t\t\t\t\t\t'</dl>')\r\n            }else{\r\n            \telement.append('<dd class=\"group-item\" titile=\"{{selecteduser}}\" url=\"{{ node }}\" ng-class=\"{active:selecteduser.user_id === node.user_id}\" ng-click=\"selectUser(node)\">{{node.name}}({{node.real_name}})</dd>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.directives.js","angular.module(\"vdi\", [])\r\n\r\n.factory(\"Task\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/home/tasklog\", null, {\r\n        query: { method: \"GET\", isArray: false },\r\n        post: { method: \"POST\" },\r\n        put: { method: \"PUT\" }\r\n    });\r\n}])\r\n\r\n\r\n.factory(\"VNC\", [\"$resource\", \"$Domain\", function($resource, $Domain) {\r\n    return $resource($Domain + \"/thor/instance/vnc/:id\", { id: \"@id\" }, {\r\n        loadISO:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/loadISO\" },\r\n        save:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/update_template\" }\r\n    });\r\n}])\r\n\r\n.factory(\"loginResource\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/version\", null, {\r\n        query: { method: \"GET\"}\r\n    })\r\n}])\r\n\r\n\r\n.filter('lun_name', function () {\r\n    return function (lun) {\r\n        if (!angular.isUndefined(lun)) {\r\n            lun.map(function (item) {\r\n                item.value = item.vendor + \" lun-\" + item.lun + \" \" + item.size;\r\n            });\r\n        }\r\n        return lun;\r\n    };\r\n})\r\n.filter('storage_type', function () {\r\n    var type2str = {\r\n        local: \"本地磁盘\",\r\n        iscsi: 'iscsi 磁盘',\r\n        netfs: '网络文件系统',\r\n        fc: 'FC 光纤存储'\r\n    };\r\n    return function (type) {\r\n        return type2str[type]\r\n    }\r\n})\r\n.filter('storage_status', function () {\r\n    var stauts2str = {\r\n        running: \"正常\",\r\n        building:\"准备中\",\r\n        error:'异常'\r\n    };\r\n    return function (stauts) {\r\n        return stauts2str[stauts]\r\n    }\r\n})\r\n.filter('unsafe', function($sce) {\r\n    return function(val) {\r\n        return $sce.trustAsHtml(val+\"\");\r\n    };\r\n})\r\n.filter('join', function() {\r\n    return function(val,slash) {\r\n      return val.filter(function(d){\r\n        return d;\r\n      }).join(slash)\r\n    };\r\n})\r\n.filter('network_type', function () {\r\n    var type2str = {\r\n      nat:'NAT',\r\n      bridge:'桥接',\r\n      vlan:'VLAN'\r\n    };\r\n    return function (val) {\r\n      return type2str[val];\r\n    };\r\n})\r\n.filter('yesorno', function () {\r\n    return function (val) {\r\n      return val ? '是' : '否';\r\n    };\r\n})\r\n.filter('to_mb', function () {\r\n    return function (val) {\r\n      return (val/1024/1024).toFixed(2);\r\n    };\r\n})\r\n.filter('reverse', function() {\r\n  return function(input,searchText,searchName) {\r\n    if(input && searchText){\r\n        var outPut = [];\r\n        outPut = input.filter(function(item){\r\n            if(item[searchName].indexOf(searchText)>-1)\r\n                return item;\r\n        })\r\n        return outPut;\r\n    }\r\n    return input;\r\n  };\r\n})\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\t$filterProvider.register(\"paging\", function(){\r\n\t\treturn function(items, index, pageSize){\r\n\t\t\tif(!angular.isArray(items)){\r\n                return items;\r\n            }\r\n            if(pageSize > 0 && index > 0){\r\n    \t\t\tvar total = items.length;\r\n    \t\t\tvar totalPage = Math.ceil(total / pageSize);\r\n    \t\t\tindex = Math.min(totalPage, Math.max(1, index));\r\n    \t\t\treturn items.slice((index - 1) * pageSize, index * pageSize);\r\n            }\r\n            return items;\r\n\t\t};\r\n\t});\r\n}])\r\n\r\n.directive(\"dialog\", [\"$modal\", \"$rootScope\", \"$$$I18N\", function ($modal, $rootScope, $$$I18N) {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            element.click(function () {\r\n                if(attrs.disabled){\r\n                    $.bigBox({\r\n                        title:$$$I18N.get(\"INFOR_TIP\"),\r\n                        content:attrs.error\r\n                    });\r\n                }else{\r\n                    var dialog = $modal.open({\r\n                        templateUrl: \"views/vdi/dialog/\" + attrs.dialogUrl,\r\n                        controller: attrs.dialog,\r\n                        scope: $scope,\r\n                        size: attrs.dialogSize\r\n                    });\r\n                    $scope.close = dialog.dismiss.bind(dialog);\r\n                    window.___dialog = dialog;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"widgetGrid\", [\"$filter\", \"$modal\", function($filter, $modal){\r\n    function getPosition(e, ele) {\r\n        var st = Math.max(\r\n            document.documentElement.scrollTop,\r\n            document.body.scrollTop\r\n        );\r\n        var sl = Math.max(\r\n            document.documentElement.scrollLeft,\r\n            document.body.scrollLeft\r\n        );\r\n        var cw = document.documentElement.clientWidth;\r\n        var ch = document.documentElement.clientHeight;\r\n        var sw = Math.max(\r\n            document.documentElement.scrollWidth,\r\n            document.body.scrollWidth\r\n        );\r\n        var sh = Math.max(\r\n            document.documentElement.scrollHeight,\r\n            document.body.scrollHeight\r\n        );\r\n        var ow = ele.offsetWidth;\r\n        var oh = ele.offsetHeight;\r\n        return {\r\n            x: Math.max(0, e.pageX + ow > sl + cw ? sl + cw - ow : e.pageX),\r\n            y: Math.max(0, e.pageY + oh > st + ch ? st + ch - oh : e.pageY)\r\n        }\r\n    }\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function($scope){\r\n            this.getCurrentPage = function(){\r\n                return Number($scope.currentPage) > 0 ? $scope.currentPage : 0;\r\n            };\r\n            this.getCurrentRows = function(){\r\n                return $scope.getCurrentRows();\r\n            }\r\n            this.getPageSize = function(){\r\n                return Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n            };\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n            var context_wrapper = element.find(\".context_wrapper\");\r\n            context_wrapper.on(\"mousedown\", function (e) {\r\n                if (e.target === this) {\r\n                    context_wrapper.hide();\r\n                    element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n                }\r\n            }).on(\"click\", function () {\r\n                context_wrapper.hide();\r\n                element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n            });\r\n            context_wrapper.hide();\r\n\r\n            // $scope.searchText = \"\";\r\n            //$scope.pagesize = 5;\r\n            $scope.currentPage = 1;\r\n\r\n            $scope.getCurrentRows = function(){\r\n                return $filter(\"paging\")(\r\n                    $scope.getFilterRows(),\r\n                    $scope.currentPage, $scope.pagesize\r\n                );\r\n            };\r\n            $scope.getFilterRows = function(){\r\n                return $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n            };\r\n\r\n            $scope.checkAll = function(){\r\n                var rows = $scope.getCurrentRows();\r\n                var _all = rows.length && rows\r\n                    .filter(item => !item._ignore ).length && rows\r\n                    .filter(item => !item._ignore )\r\n                    .every(row => row._selected );\r\n                $scope.checkedAll = _all;\r\n                return _all;\r\n            };\r\n            $scope.selectAllChange = function (checkAll) {\r\n                var rows = $scope.getCurrentRows();\r\n                rows.filter(item => !item._ignore ).forEach(function (row) {\r\n                    row._selected = checkAll;\r\n                });\r\n                $scope.checkedAll = checkAll;\r\n            };\r\n            $scope.checkOne = function () {\r\n                var rows = $scope.getCurrentRows();\r\n                return rows.filter(item => !item._ignore ).some(function (row) {\r\n                    return row._selected;\r\n                });\r\n            };\r\n            $scope.sort = function(name, asc){\r\n                $scope.rows.sort(function(a, b){\r\n                    return (a[name] > b[name] ? 1 : -1) * (asc ? 1 : -1);\r\n                });\r\n            };\r\n            $scope.pageSizeChange =\r\n            $scope.pageChange = function(){\r\n                $scope.rows.forEach(function(item, i){\r\n                    item._selected = false;\r\n                });\r\n            };\r\n            $scope.currentItem = null;\r\n            $scope.$on(\"contextmenu\", function (e, item, de, handler) {\r\n                $scope.currentItem = item;\r\n                handler.addClass(\"contextmenu_selected\");\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                context_wrapper.fadeIn(200);\r\n                var menu = element.find(\".grid_context_menu\");\r\n                var offset = context_wrapper.offset();\r\n                var pos = getPosition(de, menu[0]);\r\n                menu.css({\r\n                    top: pos.y - offset.top + \"px\",\r\n                    left: pos.x - offset.left + \"px\"\r\n                });\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                e.stopPropagation();\r\n                de.preventDefault();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"gridPagination\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require: [\"^widgetGrid\"],\r\n        conroller: function($scope){\r\n\r\n        },\r\n        link: function($scope, element, attrs, ctrls){\r\n            var grid = ctrls[0];\r\n            $scope.getStart = function(){\r\n                var current = grid.getCurrentPage();\r\n                var pagesize = grid.getPageSize();\r\n                return pagesize > 0 ? (current - 1) * pagesize + 1 : 0;\r\n            };\r\n            $scope.getEnd = function(){\r\n                var current = $scope.currentPage;\r\n                var pagesize = grid.getPageSize();\r\n                var end = current * pagesize;\r\n                var currentCount = $scope.getFilterRows().length;\r\n                return end < currentCount ? end : currentCount;\r\n            };\r\n            $scope.getCurrentCount = function(){\r\n                return $scope.getCurrentRows().length;\r\n            };\r\n        }\r\n    }\r\n}])\r\n.directive(\"ribbonTips\", [\"localize\", \"$route\", \"$location\", \"$interval\", function(localize, $route, $location, $interval){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function($scope, element, attrs){\r\n            var timer, dereg;\r\n            var fn_update_help_info = function(){\r\n                var path = $location.$$path;\r\n                if(/^\\/resource\\/network\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/resource/network/:id\";\r\n                }\r\n                if(/^\\/desktop\\/teach\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/desktop/teach/:id\";\r\n                }\r\n                var help_text = attrs.myTips?localize.localizeText(attrs.myTips):localize.localizeText(path);\r\n                element.attr(\"data-content\", help_text);\r\n                if(help_text) {\r\n                    element.parent().show();\r\n                } else {\r\n                    element.parent().hide();\r\n                }\r\n            };\r\n            $scope.$on(\"$routeChangeSuccess\", function(){\r\n                fn_update_help_info();\r\n            });\r\n            if(localize.isReady()) {\r\n                fn_update_help_info();\r\n            }\r\n            $scope.$on(\"localizeLanguageChanged\", fn_update_help_info);\r\n        }\r\n    };\r\n}])\r\n.directive(\"contextmenu\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            if (attrs.contextmenuDisabled !== \"true\") {\r\n                element.bind(\"contextmenu\", function (e) {\r\n                    $scope.$emit(attrs.contextmenuEventName || \"contextmenu\", $scope.item, e, element);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}])\r\n\r\n.directive(\"wizard\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        scope: {\r\n            lastText: \"@\",\r\n            btnUnable:\"=\"\r\n        },\r\n        controller: function ($scope, localize, $$$I18N) {\r\n            var steps = $scope.steps = [];\r\n            $scope.currentStep = null;\r\n            $scope.moveWth = 0;\r\n            var defaults = {\r\n                prevBtnText: \"上一步\",\r\n                nextBtnText: \"下一步\",\r\n                doneBtnText: \"完成\",\r\n            };\r\n            $scope.$on(\"currentStepChange\", function(e, stepIndex){\r\n                $scope.go(stepIndex);\r\n            });\r\n            $scope.select = function (step) {\r\n                var index;\r\n                steps.forEach(function (s, i) {\r\n                    s.selected = s === step;\r\n                    if(s.selected) {\r\n                        index = i;\r\n                    }\r\n                });\r\n                $scope.currentStep = step;\r\n                [\"prev\", \"next\", \"done\"].forEach(function(s){\r\n                    var key = s + \"BtnText\";\r\n                    $scope[key] = $$$I18N.get(step[key] || defaults[key]);\r\n                });\r\n                $scope.$emit(\"selectStepChange\", {index: index, stepScope: step});\r\n            };\r\n            $scope.getCurrentIndex = function () {\r\n                return steps.indexOf($scope.currentStep);\r\n            };\r\n\r\n            $scope.prev = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                //var e = $scope.$emit(($scope.stepEventName || \"WizardStep\"), $scope.currentStep);\r\n                var prev = steps[index - 1];\r\n                prev && $scope.select(prev);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n\r\n            };\r\n            $scope.next = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling);\r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.moveWth = $scope.getMarginValue();\r\n                };\r\n\r\n            };\r\n            $scope.go = function(index){\r\n                $scope.select(steps[index]);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n            }\r\n            $scope.showPrev = function () {\r\n                return steps.indexOf($scope.currentStep) > 0 && $scope.currentStep.prevBtnText !== \"\";\r\n            };\r\n            $scope.isLast = function () {\r\n                return steps.indexOf($scope.currentStep) >= steps.length - 1;\r\n            };\r\n            $scope.done = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling); \r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.$emit($scope.doneEventName || \"WizardDone\", steps, steps.map(function (step) {\r\n                        return step.$$nextSibling\r\n                    }));\r\n                }\r\n            };\r\n            this.addStep = function (step) {\r\n                steps.push(step);\r\n                if (steps.length === 1) {\r\n                    $scope.select(step);\r\n                }\r\n            };\r\n            this.jumpStep = function (index) {\r\n\r\n            };\r\n            this.removeStep = function (index) {\r\n\r\n            };\r\n            this.insertStep = function (step) {\r\n\r\n            };\r\n        },\r\n        link : function($scope, element, attrs){\r\n            $scope.getMarginValue = function(){\r\n                var _idx = $scope.getCurrentIndex();\r\n                var wizardWth = element.find('.wizard').outerWidth();\r\n                var _wth = 60;\r\n                for(var i = 0; i<=_idx+1 ; i++){\r\n                    _wth+=element.find(\".steps>li\").eq(i).outerWidth();\r\n                }\r\n                if(wizardWth - _wth < 0){\r\n                    return (wizardWth - _wth) ;\r\n                }else{\r\n                    return 0;\r\n                }\r\n            };\r\n            // if(attrs.disableNav !== \"true\") {\r\n            //     element.find(\".steps\").delegate(\"li.complete\",\"click\",function(e){\r\n            //         var _idx = $(this).index();\r\n            //         $scope.go(_idx);\r\n            //     });\r\n            // }\r\n        },\r\n        template: `<div class=\"wizard\" style=\"margin-bottom:20px;\">\r\n            <ul class=\"steps\" style=\"margin-left:{{moveWth}}px\">\r\n                <li data-ng-repeat=\"step in steps\" data-target=\"#step{{ $index }}\" data-ng-class=\"{ active: getCurrentIndex() >= $index ,complete:getCurrentIndex() > $index }\">\r\n                    <span class=\"badge badge-info\">{{ $index + 1 }}</span><span localize=\"{{step.name}}\"></span><span class=\"chevron\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"actions\">\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"showPrev()\" data-ng-click=\"prev()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-primary btn-prev\">\r\n                    <i class=\"fa fa-arrow-left\"></i><span ng-bind=\"prevBtnText\"></span>\r\n                </button>\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"!isLast()\" data-ng-click=\"next()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"nextBtnText\"></span> <i class=\"fa fa-arrow-right\"></i>\r\n                </button>\r\n                <button id='finish' ng-show=\"!btnUnable && isLast()\" type=\"button\" data-ng-click=\"done()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"doneBtnText\"></span><i class=\"fa fa-check\" ></i>\r\n                </button>\r\n                <img ng-show=\"btnUnable\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n                <img ng-show=\"currentStep.showLoading === true\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"step-content\">\r\n            <form data-ng-transclude class=\"form-horizontal\" id=\"fuelux-wizard\" method=\"post\" novalidate>\r\n            </form>\r\n        </div>\r\n        <div ng-show=\"currentStep.showLoading === true\" style=\"position: absolute;top:0;right:0;bottom:0;left:0;z-index:999;\"></div>`\r\n    };\r\n}])\r\n.directive(\"wizardStep\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^wizard\",\r\n        transclude: true,\r\n        replace: true,\r\n        scope: {\r\n            name: \"@\",\r\n            prevBtnText: \"@\",\r\n            nextBtnText: \"@\",\r\n            doneBtnText: \"@\",\r\n            testValid: \"=\"\r\n        },\r\n        controller: function ($scope) {},\r\n        link: function (scope, element, attrs, wizard) {\r\n            wizard.addStep(scope);\r\n        },\r\n        template: `<div class=\"step-pane\" data-ng-class=\"{ active: selected }\" data-ng-show=\"selected\" data-ng-transclude></div>`\r\n    };\r\n}])\r\n\r\n.directive('areaTraffic', function ($interval,$http) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope:{\r\n            options : \"=\"\r\n        },\r\n        link: function (scope, e, attrs) {\r\n            Highcharts.setOptions({    //disable utc time\r\n                global: {    \r\n                    useUTC: false    \r\n                }    \r\n            }); \r\n            function init_data(){\r\n                // generate init data\r\n                var data = [],\r\n                    time = (new Date()).getTime(),\r\n                    i;\r\n\r\n                for (i = -40; i <= 0; i += 1) {\r\n                    data.push({\r\n                        x: time + i * scope.$parent.refresh_time,\r\n                        y: 0\r\n                    });\r\n                }\r\n                return data;\r\n            }\r\n            var hc_options = scope.options.options;\r\n            hc_options.chart.renderTo = e[0];\r\n            hc_options.yAxis.min = 0;\r\n            angular.forEach(hc_options.series,function(s){\r\n                s.data = init_data();\r\n            });\r\n\r\n            var highcharts = new Highcharts.Chart(hc_options);\r\n\r\n            function drawPoint(data) {\r\n                var datetime = (new Date()).getTime();\r\n                var hc_series = highcharts.series;\r\n\r\n                scope.options.drawpoint(hc_series,data,datetime);\r\n\r\n            }\r\n\r\n            function reset_highcharts(){\r\n                //reset highcharts\r\n                highcharts.destroy();\r\n                angular.forEach(hc_options.series,function(s){\r\n                    s.data = init_data();\r\n                });\r\n                highcharts = new Highcharts.Chart(hc_options);\r\n            }\r\n\r\n            scope.$watch('$parent.metric_data',function(newvalue){\r\n                if(newvalue){\r\n                    drawPoint(newvalue);\r\n                }\r\n            });\r\n\r\n            scope.$watch('$parent.refresh_time',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n            scope.$watch('$parent.item',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n        }\r\n    }\r\n})\r\n.directive(\"monitorTree\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        template: `<div class=\"portlet-title clearfix padding-5\">\r\n                <div class=\"pull-left\">\r\n                    <a href=\"javascript:\" id=\"collape\" class=\"btn btn-default btn-xs\"><i class=\"fa  icon-jj-Shrinkfrom\"></i> </a>\r\n                    <a href=\"javascript:\" id=\"open\" class=\"btn btn-default  btn-xs\"><i class=\"fa icon-jj-Open\"></i></a>\r\n                </div>\r\n                <div class=\"pull-right\"><a href=\"javascript:\"class=\"btn btn-default  btn-xs\" ng-init=\"ishow=false\" ng-click=\"ishow==true?ishow=false:ishow=true;open()\"><i class=\"fa fa-search\"></i></a></div> \r\n            </div>\r\n            <div class=\"search\" ng-show=\"ishow\"><input type=\"search\" localize=\"桌面名\" ng-model=\"searchText\"></div>\r\n            <div class=\"portlet-body fuelux monitor-tree\" data-ng-transclude></div>\r\n        `,\r\n        link: function(scope, element, attrs){\r\n            element.delegate('#open', 'click', function(event) {\r\n                element.find(\".parent\").addClass('in');\r\n            });\r\n            element.delegate('#collape', 'click', function(event) {\r\n                element.find(\".parent\").removeClass('in');\r\n            });\r\n            element.delegate (\".tree-toggle\",\"click\",function(event){\r\n                var parent =$(this).parent().parent(\".parent\");\r\n                if(parent.hasClass('in')){\r\n                    parent.removeClass('in');\r\n                }else{\r\n                    parent.addClass(\"in\");\r\n                }\r\n            });\r\n            element.delegate(\".tree-it\",\"click\",function(event){\r\n                element.find(\"li\").removeClass('active');\r\n                $(this).parent(\"li\").addClass('active');\r\n            });\r\n            scope.open = function(){\r\n                element.find(\".parent\").addClass('in');\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive('ipPattern',function (ip_pattern) {\r\n\r\n    return {\r\n      require: ['ngModel','?ngRequired'],\r\n      link: function (scope, elm, attrs, ctrls) {\r\n        var ngmodelctl = ctrls[0];\r\n        var ngrequiredctl = ctrls[1];\r\n\r\n        ngmodelctl.$parsers.push(function (viewValue) {\r\n\r\n          if (ip_pattern.test(viewValue)||(!ngrequiredctl&&!viewValue)) {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', true);\r\n            return viewValue;\r\n          } else {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', false);\r\n            return undefined;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n})\r\n.directive(\"preventSpace\", [function(){\r\n    return {\r\n      restrict: \"A\",\r\n      link: function(scope, element, attrs){\r\n        element.on(\"keypress\",function(e){\r\n          if(e.keyCode === 32){\r\n            e.preventDefault();\r\n          }\r\n        })\r\n      }\r\n    };\r\n  }])\r\n.directive(\"inputNumber\", [function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        link: function(scope, element, attrs){\r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrlKey = [\r\n                8, // backspace\r\n                46,// delete\r\n                37,// left arrow\r\n                39 // right arrow\r\n            ];\r\n            element.on(\"keydown\", function(e){\r\n                var code = e.which || e.keyCode;\r\n                if(numKey.indexOf(code) > -1) {\r\n                    var num = code < 60 ? code - 48 : code - 96;\r\n                    var nextValue = this.value + num;\r\n                    if(!attrs.max) { return; }\r\n                    var max = attrs.max * 1;\r\n                    if(!isNaN(max) && nextValue <= max) {\r\n                        return;\r\n                    }\r\n                } else if(ctrlKey.indexOf(code) > -1) {\r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n        }\r\n    };\r\n}])\r\n// .directive(\"inputDot\", [function(){\r\n//     return {\r\n//         restrict: \"AE\",\r\n//         link: function(scope, element, attrs){\r\n//             element.on(\"keydown\",function(e){\r\n//                 if(attrs.inputDot == 'true'){\r\n//                    if(e.keyCode === 190 || e.keyCode === 110 || e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                    }\r\n//                 }\r\n//                 else{\r\n//                     if(e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                     }\r\n//                 }\r\n\r\n//             });\r\n//         }\r\n//     };\r\n// }])\r\n.directive(\"formatIp\", [\"$compile\",function($compile){\r\n    return {\r\n        restrict:\"EA\",\r\n        require:\"ngModel\",\r\n        scope:{\r\n            start:\"=\",\r\n            end:\"=\"\r\n        },\r\n        link:function(scope,element,attrs,ctrl){\r\n            var ngModelCtrl = ctrl;\r\n            var required = attrs.ipRequired ? scope.$eval(attrs.ipRequired) : true;\r\n\r\n            if(!ngModelCtrl){\r\n                return;\r\n            };\r\n            var CHECKTOOLS = {};\r\n\r\n            CHECKTOOLS.checkIP = function(ip){\r\n                if(!ip) { return false; }\r\n                var parts = ip.split(\".\");\r\n                //9029bug 0.0.0.0不合法IP\r\n                var numre = /^(0|[1-9][0-9]*)$/;\r\n                var i, valid = true;\r\n                if(parts.length !== 4) { return false; }\r\n                for(i = 0; i < 4; i++) {\r\n                    if(numre.test(parts[i]) && parseInt(parts[i]) <= 255) {\r\n                        continue;\r\n                    } else {\r\n                        valid = false;\r\n                    }\r\n                }\r\n                valid = valid && (ipformatNum(ip) > ipformatNum('1.0.0.0'));\r\n                return valid;\r\n            };\r\n\r\n            function ipformatNum(ip){\r\n                var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];   \r\n            }\r\n\r\n            CHECKTOOLS.ip2long = function(ip){\r\n                if(CHECKTOOLS.checkIP(ip)){\r\n                    var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                    return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];\r\n                }\r\n            };\r\n            CHECKTOOLS.checkRange = function(ip,s_ip,e_ip){\r\n                if(CHECKTOOLS.checkIP(ip),CHECKTOOLS.checkIP(s_ip) && CHECKTOOLS.checkIP(e_ip)){\r\n                     var s = CHECKTOOLS.ip2long(s_ip);\r\n                     var e = CHECKTOOLS.ip2long(e_ip);\r\n                     var c = CHECKTOOLS.ip2long(ip);\r\n                     return c >= s && c <= e;\r\n                 }else{\r\n                    return false;\r\n                 }\r\n            };\r\n            var popEl = angular.element(\"<div format-ip-wrap></div>\");\r\n            var $input = $compile(popEl)(scope);\r\n            element.addClass(\"ng-hide\");\r\n            element.after($input);\r\n\r\n            // model -- ui\r\n            \r\n            ngModelCtrl.$render = function(){\r\n                var modelVal = ngModelCtrl.$modelValue;\r\n                var modelValArr;\r\n                try{\r\n                    if(modelVal === null) {\r\n                        modelValArr = [];\r\n                        ngModelCtrl.$setPristine();\r\n                    } else {\r\n                        modelValArr = modelVal.split(\".\");\r\n                    }\r\n                    [1,2,3,4].forEach(function(i,idx){\r\n                        scope[\"seg\" + i] = modelValArr[idx] || \"\";\r\n                    });\r\n                }catch(err){\r\n                }\r\n                // setValidate();\r\n            };\r\n            /*\r\n            function setValidate(){\r\n                var isValid;\r\n                if(ngModelCtrl.$modelValue){\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ngModelCtrl.$modelValue,scope.start,scope.end)\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ngModelCtrl.$modelValue);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\",isValid);\r\n                }else{\r\n                    ngModelCtrl.$setValidity(\"ip\",true);\r\n                }\r\n            };\r\n\r\n            // ui -- model\r\n            $input.on(\"input\",function(e){\r\n                scope.$apply(function(){\r\n                    var val = [1,2,3,4].map(function(i){ return scope[\"seg\" + i] || \"\"; }).join(\".\");\r\n                    var isNull = val.split(\".\").every(function(item){ return item.length===0 });\r\n                    if(isNull){\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }else{\r\n                        ngModelCtrl.$setViewValue(val);\r\n                    }\r\n                    ngModelCtrl.$render();\r\n                })\r\n            });\r\n\r\n            */\r\n\r\n            scope.$watch(\"seg1 + '.' + seg2 + '.' + seg3 + '.' + seg4\", function(ip){\r\n                var value = ngModelCtrl.$modelValue;\r\n                if(ip === \"...\") {\r\n                    if(value) {\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }\r\n                    if(!value || !required) {\r\n                        return ngModelCtrl.$setValidity(\"ip\", true);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", false);\r\n                } else {\r\n                    var isValid = false;\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ip, scope.start, scope.end);\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ip);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", isValid);\r\n                    ngModelCtrl.$setViewValue(ip);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n.directive(\"formatIpWrap\",function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        replace: true,\r\n        template: `<span role=\"ipgroup\"><input type=\"text\" ng-model=\"seg1\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg2\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg3\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg4\"></span>`,\r\n        link: function(scope,element,attrs){\r\n            element.on(\"keydown\", \"input\", function(event){\r\n                switch(event.keyCode){\r\n                    case 110:\r\n                    case 190:\r\n                        var nextEles = $(this).nextAll(\"input\");\r\n                        nextEles.length && nextEles.eq(0).focus();\r\n                        event.preventDefault();\r\n                        break;\r\n                    case 8:\r\n                        if(!$(this).val()){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        if(this.selectionStart === 0){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        };\r\n                        break;\r\n                    case 39:\r\n                        if(this.selectionStart === $(this).val().length){\r\n                            $(this).nextAll(\"input\").length && $(this).nextAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 32:\r\n                    case 229:\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        break;\r\n                }\r\n            });\r\n            element.on(\"keypress\", \"input\",function(e){\r\n                if(e.keyCode < 48 || e.keyCode > 57){\r\n                    e.preventDefault();\r\n                }\r\n                if($(this).val().length > 2 && this.selectionStart === this.selectionEnd){\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            element.on(\"paste\",function(e){\r\n                e.preventDefault();\r\n            });\r\n            element.on(\"focus\", \"input\", function(e){\r\n                element.addClass(\"focus\");\r\n            });\r\n            element.on(\"blur\", \"input\", function(e){\r\n                element.removeClass(\"focus\");\r\n            });\r\n        }\r\n    }\r\n})\r\n.directive(\"treeNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', filtertext: '='},\r\n        template: '<ul role=\"tree\" class=\"menu menu-tree\" ng-repeat=\"item in getUsers()\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{item.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(item);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"node in item.children\" data-nodes=\"item.children\" data-node=\"node\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>',\r\n        controller: function($scope){\r\n            var lastFilter;\r\n            var lastFiltedResult;\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n\r\n            $scope.getUsers = function(){\r\n                var text = $scope.filtertext || \"\";\r\n                var users = $scope.users;\r\n                text = text.trim();\r\n                if(!text) { return users; }\r\n                if(text !== lastFilter) {\r\n                    lastFilter = text;\r\n                    lastFiltedResult = filterUser(angular.copy(users), text);\r\n                }\r\n                return lastFiltedResult;\r\n            };\r\n\r\n            function filterUser(users, text) {\r\n                return users.filter(function(user){\r\n                    if(user.children) {\r\n                        user.children = filterUser(user.children, text);\r\n                        return user.children.length > 0;\r\n                    } else {\r\n                        return user.user_name.indexOf(text) > -1 || user.real_name.indexOf(text) > -1;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', nodes: '='},\r\n        template: '<div></div>',\r\n        controller: function($scope){\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n            $scope.add_select_rows = function($event,node,nodes){\r\n                $scope.$emit('add_select_rows', $event,node,nodes);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n                element.append('<ul role=\"group\" class=\"menu menu-tree\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{node.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(node);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"sub in node.children\" data-nodes=\"node.children\" data-node=\"sub\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>')\r\n            }else{\r\n                element.append('<li class=\"menuitem\" ng-click=\"add_select_rows($event,node,nodes)\" ng-dblclick=\"add_selected(node)\">'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.name}}</span>'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.real_name}}</span>'+\r\n                  '</li>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiMenuList\", [\"Admin\",\"User\",\"Domain\",\"$q\",\"$$$I18N\",function(APIadmin,APIuser,APIdomain,$q,$$$I18N){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            selected: \"=menuListData\",\r\n            // domain:\"=menuListDomain\"\r\n        },\r\n        templateUrl: \"includes/userMenu.html\",\r\n        controller: function($scope){\r\n            $scope.expandedNodes = [];\r\n            $scope._users = [];\r\n            $scope.selected = $scope.selected || [];\r\n            $scope.seRows = [];\r\n            $scope.rmRows = [];\r\n            $scope.common_users = [];\r\n            function formatData(d,name){\r\n                iteration(d,name);\r\n                return d;\r\n            }\r\n            function iteration(data,childName,list){\r\n                for(var i = 0 ; i < data.length ; i++){\r\n                    $scope.expandedNodes.push(data[i]);\r\n                    if(data[i][childName] && data[i][childName].length){\r\n                        var len = iteration(data[i][childName],childName);\r\n                        if(len === 0){\r\n                            data[i] = undefined;\r\n                        }\r\n                    }\r\n                    if(!data[i]) { continue; }\r\n                    if(data[i].users && data[i].users.length > 0){\r\n                        data[i].users.map(user => {\r\n                            user.name = user.name || user.user_name;\r\n                            user._is_last = true;\r\n                            return user;\r\n                        });\r\n                        data[i][childName] = data[i].users;\r\n                    }\r\n                    if(data[i][childName] && data[i][childName].length === 0){\r\n                        data[i]= undefined;\r\n                    }\r\n                }\r\n                while(data.length > 0) {\r\n                    // 如果有数组元素为空，每次删除一个\r\n                    var oldlen = data.length;\r\n                    for(var i = 0 ; i < oldlen ; i++){\r\n                        if(data[i] === undefined){\r\n                            data.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(oldlen === data.length) {\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                return data.length;\r\n            }\r\n            function removeNoChildrenDeparts(data) {\r\n                data = data.filter(noUserFilter);\r\n                data.forEach(walk);\r\n                return data;\r\n                function walk(node) {\r\n                    if(!node.dept_id) { return; }\r\n                    // 用户上级是没有 children 的\r\n                    if(node.children) {\r\n                        node.children = node.children.filter(noUserFilter);\r\n                        node.children.forEach(walk);\r\n                    }\r\n                }\r\n                function noUserFilter(node) {\r\n                    if(node.dept_id && !node.children && node.users.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            function get_admin(){\r\n                var deferred = $q.defer();\r\n                APIadmin.query(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_user(){\r\n                var deferred = $q.defer();\r\n                APIuser.query_tree(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_domain(){\r\n                var deferred = $q.defer();\r\n                APIdomain.list(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            $q.all([get_admin(),get_user(),get_domain()]).then(function(arr){\r\n                $scope._users = [{\r\n                    typeName: $$$I18N.get(\"管理用户\"),\r\n                    userData: arr[0].users\r\n                }];\r\n                $scope.domain_users = arr[2].result.map(function(res){\r\n                    res._name = $$$I18N.get(\"域\") + \"(\" + res.name + \")\";\r\n                    return res;\r\n                });\r\n                $scope.common_users = formatData(removeNoChildrenDeparts(arr[1].result),\"children\");\r\n                console.log($scope.common_users)\r\n            });\r\n            function getLastLevelNodes(obj_levels, arrays){\r\n                if(obj_levels.children){\r\n                    obj_levels.children.forEach(function(item){\r\n                        getLastLevelNodes(item, arrays);\r\n                    })\r\n                }else{\r\n                    arrays.push(obj_levels);\r\n                }\r\n            }\r\n\r\n            $scope.$on('add_selected', function(e, levels){\r\n                var arrays = [];\r\n                getLastLevelNodes(levels, arrays);\r\n                $scope.add_selected(arrays);\r\n            })\r\n            $scope.$on('add_select_rows', function(e,$event,node,nodes){\r\n                console.log(555555, $event,node, nodes);\r\n                $scope.add_select_rows($event,node, nodes);\r\n            })\r\n            $scope.add_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    if($scope.selected.indexOf(i) === -1){\r\n                        $scope.selected.push(i);\r\n                    }\r\n                });\r\n            };\r\n            $scope.remove_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    $scope.selected.splice($scope.selected.indexOf(i),1);\r\n                });\r\n                $scope.rmRows = [];\r\n            };\r\n            var lastRow2 = null;\r\n            $scope.add_select_rows = function(e,item,items){\r\n                var idx = $scope.seRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.seRows.push(item) : $scope.seRows.splice(idx,1);\r\n                    lastRow2 = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = items.indexOf(lastRow2);\r\n                    var end_idx = items.indexOf(item);\r\n                    if(begin_idx === -1){\r\n                        lastRow2 = item;\r\n                        $scope.seRows = [item];\r\n                    }else{\r\n                        $scope.seRows = items.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1);\r\n                        console.log(1111111,$scope.seRows)\r\n                    }\r\n                }else{\r\n                    $scope.seRows.splice(0,$scope.seRows.length,item);\r\n                    lastRow2 = item;\r\n                }\r\n            };\r\n            var lastRow = null;\r\n            $scope.add_remove_rows = function(e,item){\r\n                var idx = $scope.rmRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.rmRows.push(item) : $scope.rmRows.splice(idx,1);\r\n                    lastRow = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = $scope.selected.indexOf(lastRow);\r\n                    var end_idx = $scope.selected.indexOf(item);\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        $scope.rmRows = $scope.selected.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1); \r\n                    }else{\r\n                        $scope.rmRows = [item];\r\n                        lastRow = item;\r\n                    }\r\n                }\r\n                else{\r\n                    $scope.rmRows.splice(0,$scope.rmRows.length,item);\r\n                    lastRow = item;\r\n                }\r\n            };\r\n            $scope.ltor = function(){\r\n                $scope.add_selected($scope.seRows);\r\n            };\r\n            $scope.rtol = function(){\r\n                $scope.remove_selected($scope.rmRows);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            var last = null;\r\n            element.on(\"keyup\",'input[ng-model=\"searchText\"]',function(e){\r\n                $(\".menu_header\").addClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menu_header\",function(e){\r\n                $(this).toggleClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menuitem\", function(e){\r\n                var ele = $(this);\r\n                var menuItems = ele.parent().parent(\".menu_body\").find(\".menuitem\");\r\n                var allMenuItems = ele.parents(\".menus\").find(\".menuitem\");\r\n                if(e.ctrlKey){\r\n                    ele.hasClass(\"itemActive\") ? ele.removeClass(\"itemActive\") : ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = [].indexOf.apply(menuItems,last);\r\n                    var end_idx = [].indexOf.apply(menuItems,ele);\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        for(var i = 0; i < menuItems.length; i++){\r\n                            if(i > Math.max(begin_idx,end_idx) || i < Math.min(begin_idx,end_idx)){\r\n                                menuItems.eq(i).removeClass(\"itemActive\");\r\n                            }else{\r\n                                menuItems.eq(i).addClass(\"itemActive\");\r\n                            }\r\n                        }\r\n                    }else{\r\n                        ele.addClass(\"itemActive\");\r\n                        last = ele;\r\n                    }\r\n                }else{\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumber\", [\"$http\",\"$compile\",\"$templateCache\",function($http,$compile,$templateCache){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            step:\"@\",\r\n            max:\"@\",\r\n            userNumber: \"=ngModel\",\r\n            min:\"@\"\r\n        },\r\n        priority: 2,\r\n        require: \"ngModel\",\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs,ctrl){\r\n\r\n            scope.addStep = Number(scope.step) || 1;\r\n            scope.addMax  = Number(scope.max) || null;\r\n            scope.addMin  = Number(scope.min) || null;\r\n\r\n            var is_dot = String(Number(scope.step)).indexOf(\".\") === -1 ? false : true; \r\n\r\n            var modelCtrl = ctrl;\r\n            var temp = $compile($(\"<div ui-input-number-wrapper></div>\")[0])(scope);\r\n            element.hide();\r\n            element.after(temp);\r\n           \r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrKey = [8,9,13,35,36,37,38,39,40,45,46,144,112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,110,190];\r\n            scope.keydown = function(e){\r\n                var _code = e.keyCode;\r\n                var _valsplit = e.target.value.split(\".\"); \r\n\r\n                if(numKey.indexOf(_code) === -1 && ctrKey.indexOf(_code) === -1){\r\n                    e.preventDefault();\r\n                }\r\n                // 小数点后只能输入一位\r\n                if(numKey.indexOf(_code) > -1 && _valsplit.length > 1 && _valsplit[1].length > 0 && e.target.selectionStart > e.target.value.indexOf(\".\")){\r\n                    e.preventDefault();\r\n                }\r\n                // 屏蔽小数点\r\n                if(_code === 110 || _code === 190){\r\n                    if(!is_dot){\r\n                        e.preventDefault();\r\n                    }else{\r\n                        if(e.target.value.indexOf(\".\") !== -1){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                // 键盘上键加法\r\n                if(_code === 38){\r\n                    e.preventDefault();\r\n                    scope.add(scope.addStep);\r\n                    scope.round();\r\n                }\r\n                // 键盘下键减法\r\n                if(_code === 40){\r\n                    e.preventDefault();\r\n                    scope.add(-scope.addStep);\r\n                    scope.round();\r\n                }\r\n                \r\n            };\r\n            scope.round = function(){\r\n                scope.userNumber = is_dot ? Math.round(Number(scope.userNumber)*2)/2 : Math.round(scope.userNumber);\r\n            }\r\n\r\n            modelCtrl.$render = function(){\r\n                scope.setValidation();\r\n            };\r\n            scope.setValidation = function(){\r\n                var newval = modelCtrl.$modelValue;\r\n                var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n                if(exp.test(newval)){\r\n                    if((Math.abs(scope.addMax) >= 0 && newval > scope.addMax) || (Math.abs(scope.addMin) >= 0 && newval < scope.addMin) ){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }else{\r\n                    if(newval){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }\r\n            };\r\n            scope.add = function(num){\r\n                scope.userNumber = Number(scope.userNumber) ? Number(scope.userNumber) + Number(num) : Number(num);\r\n                scope.setValidation();\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberWrapper\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        replace:true,\r\n        templateUrl: \"./views/vdi/common/input-number-temp.html\",\r\n        link: function(scope,element){\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberFormatter\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require:\"ngModel\",\r\n        link: function(scope, element, attrs,ctrl){\r\n            var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n\r\n            ctrl.$parsers.push(function(value){\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n            ctrl.$formatters.push(function(value){\r\n\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiWebUpload\", [\"$http\", \"$rootScope\", \"$$$I18N\", \"$Domain\", function($http, $rootScope, $$$I18N, $Domain){\r\n    var org = XMLHttpRequest;\r\n    var org_open = org.prototype.open;\r\n    var allowUpload = window.FormData && typeof window.FormData === \"function\";\r\n    $rootScope.uploadPool = $rootScope.uploadPool || {};\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: function(ele, attrs){\r\n            if(attrs.templateUrl){\r\n                return attrs.templateUrl;\r\n            }\r\n            return \"views/vdi/common/ui-web-upload.html\";\r\n        },\r\n        scope: {\r\n            config:\"=uiUploadConfig\",\r\n            finishHandel:\"&\"\r\n        },\r\n        controller: [\"$scope\", function(scope){\r\n            scope.$on(\"progress\", function(e, size){\r\n                if(size.id === scope.upload_id){\r\n                    scope.progressName = size.name\r\n                    scope.isUploading = true;\r\n                    var percent = size.loaded / size.total * 100;\r\n                    if(isNaN(percent)) {\r\n                        percent = 0;\r\n                    }\r\n                    scope.progressPercent = percent.toFixed(2) + \"%\";\r\n                    if(scope.progressPercent === \"100.00%\"){ scope.isUploading = false; }\r\n                    // 初始化页面上传不更新问题\r\n                    scope.$apply();\r\n                }\r\n            });\r\n            scope.allowUpload = allowUpload;\r\n            scope.uploadISOSize = null;\r\n\r\n        }],\r\n        link: function(scope, element, attrs){\r\n            scope.upload_id = attrs.uiWebUpload;\r\n            scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n            scope.$on(\"localizeLanguageChanged\", function(){\r\n                // 重新apply数据才会更新视图，加定时器，调用apply才不会报错\r\n                setTimeout(function(){\r\n                     scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n                     scope.$apply();\r\n                });\r\n            });\r\n\r\n            // 绑定一个测试提交，如果条件为 true 则按钮可点击，否则不可点击\r\n            // 这种方式需要父 scope 配合\r\n            if(attrs.uiWebUploadTest) {\r\n                var degfn = scope.$parent.$watch(attrs.uiWebUploadTest, function (v) {\r\n                    scope.disableTest = v;\r\n                });\r\n                scope.$on(\"$destroy\", degfn);\r\n                scope.disableTest = false;\r\n            } else {\r\n                scope.disableTest = true;\r\n            }\r\n\r\n            var filetype,url;\r\n            var form = element.find(\"form\");\r\n            form.attr(\"action\", url);\r\n            function checkConfig(file,config){\r\n                var filetype = attrs.uiUploadType;\r\n                var maxSize = attrs.uiUploadLimit;\r\n                var url = attrs.uiUploadUrl;\r\n\r\n                if(!url){\r\n                    throw new Error(\"no url config\");\r\n                    return false;\r\n                }\r\n                var typematch = true;\r\n                if(filetype && file) {\r\n                    typematch = (new RegExp(\"\\\\.(\" + filetype + \")$\")).test(file.name);\r\n                    if(!typematch) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"不是一个可接受的文件类型\"),\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if(maxSize){\r\n                    maxSize = parseInt(maxSize);\r\n                    if(isNaN(maxSize)) {\r\n                        return console.error(\"invalid upload limit:\", attrs.uiUploadLimit);\r\n                    }\r\n                    if(file.size > maxSize * Math.pow(2,30)) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"超出文件大小限制\") + \"(\"+ maxSize +\"G)\",\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n                if(file.size === 0){\r\n                    $.bigBox({\r\n                        title : $$$I18N.get(\"INFOR_TIP\"),\r\n                        content : $$$I18N.get(\"文件为空\"),\r\n                        icon : \"fa fa-warning shake animated\",\r\n                        timeout : 6000\r\n                    });\r\n                    return false;\r\n                }\r\n                else{\r\n                    return true;\r\n                }\r\n            }\r\n            function clearDOM(){\r\n                var input = element.find(\"input[type=file]\");\r\n                input.after(input.clone(true).val(''));\r\n                input.remove();\r\n                scope.isUploading = false;\r\n                scope.progressSize = 0;\r\n            }\r\n            function finish(){\r\n                $rootScope.uploadPool[attrs.uiWebUpload] = undefined;\r\n                delete $rootScope.uploadPool[attrs.uiWebUpload];\r\n            }\r\n            function success(res){\r\n                if(typeof scope.finishHandel === \"function\"){\r\n                    scope.finishHandel({response: res});\r\n                }\r\n            }\r\n            element.find(\"input[type=file]\").on(\"change\", function(e){\r\n                var file = e.target.files[0];\r\n                if(!file){\r\n                    return ;\r\n                }\r\n                // var conf = scope.config;\r\n                var isValid = checkConfig(file);\r\n                \r\n                if(isValid){\r\n                    // $.bigBox({\r\n                    //  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                    //  content : $$$I18N.get(\"INFOR_UPISO\"),\r\n                    //  iconSmall : \"fa fa-warning shake animated\",\r\n                    //  timeout : 5000\r\n                    // });\r\n\r\n                    var data = new FormData();\r\n                    // 允许绑定额外的参数\r\n                    if(attrs.uiWebUploadParams) {\r\n                        $.each(scope.$eval(attrs.uiWebUploadParams), function(k, v){\r\n                            data.append(k, v);\r\n                        });\r\n                    }\r\n                    data.append(attrs.uiWebUploadName || e.target.name, file);\r\n                    scope.progressName = file.name;\r\n                    scope.progressSize = \"(\" + (file.size / Math.pow(2,20)).toFixed(2) + \"M)\";\r\n\r\n                    $http.post($Domain + attrs.uiUploadUrl, data, {\r\n                        transformRequest: function(config){\r\n                            window.XMLHttpRequest = function(a, b, c, e){\r\n                                window.XMLHttpRequest = org;\r\n                                var xhr = new org(a, b, c, e);\r\n                                $rootScope.uploadPool[attrs.uiWebUpload] = xhr;\r\n                                xhr.open = function(q,w,e,r,t,y){\r\n                                    xhr.open = undefined;\r\n                                    delete xhr.open;\r\n                                    if(xhr.upload){\r\n                                        xhr.upload.addEventListener(\"progress\", function(e){\r\n                                            $rootScope.$broadcast(\"progress\", {\r\n                                                id: attrs.uiWebUpload,\r\n                                                name: file.name,\r\n                                                loaded: e.loaded,\r\n                                                position: e.position,\r\n                                                total: e.total,\r\n                                                totalSize: e.totalSize\r\n                                            });\r\n                                            \r\n                                        });\r\n                                        xhr.addEventListener(\"abort\", finish);\r\n                                    }\r\n                                    return org_open.call(xhr, q, w, e, r, t, y);\r\n                                }\r\n                                return xhr;\r\n                            };\r\n                            return config;\r\n                        },\r\n                        headers: {\"Content-Type\": undefined}\r\n                    }).then(function(res){\r\n                        clearDOM();\r\n                        finish(res);\r\n                        success(res);\r\n                        $rootScope.$broadcast(\"finishUpload\", true, file.name);\r\n                    },function(){\r\n                        clearDOM();\r\n                        finish();\r\n                    });\r\n                }\r\n            });\r\n                \r\n            element.find(\"button[type='button']\").on(\"click\", function(e){\r\n                $(this).prev(\"input[type=file]\").click();\r\n            });\r\n            if(attrs.btnClass) {\r\n                element.find(\"button[type='button']\").removeClass(\"btn-primary\").addClass(attrs.btnClass);\r\n            }\r\n            if(attrs.iconClass) {\r\n                element.find(\".icon\").removeClass(\"icon-jj-Upload\").addClass(attrs.iconClass);\r\n            }\r\n\r\n            element.find(\"#abortBtn\").on(\"click\", function(e){\r\n                var xhr = $rootScope.uploadPool[attrs.uiWebUpload];\r\n                xhr && xhr.abort();\r\n                clearDOM();\r\n                scope.$apply();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.service(\"warnBox\",[function(){\r\n    this.warn = function(content, id, callback){\r\n        if(!$(\"#warnBox\").length){\r\n            $(\"body\").append(\"<div id='warnBox'></div>\");\r\n        }else{\r\n            $(\"#warnBox\").show();\r\n        }\r\n        $(\"body #warnBox\").append(\"<div class='box warnBox\"+id+\"'><i class='fa fa-bell'></i><div class='content'><div class='btn-close'><span>×</span></div><p class='detail' title=\"+content+\">\"+content+\"</p></div></div>\")\r\n        if($(\"body .warnBox\"+id+\" .detail\").height()>38){\r\n            $(\"body .warnBox\"+id+\" .detail\").addClass('highHeight');\r\n        }\r\n        $(\"#warnBox .warnBox\"+id+\" .btn-close\").click(function(e){\r\n            callback(id);\r\n        })\r\n        setTimeout(function(){\r\n            if($(\"#warnBox .warnBox\"+id+\"\")){\r\n                callback(id);\r\n            }\r\n        }, 30000)\r\n    },\r\n    this.close = function(id){\r\n        $(\"body .box.warnBox\"+id+\"\").remove();\r\n        if(!$(\"#warnBox\").children().length){\r\n            $(\"#warnBox\").hide();\r\n        }else{ $(\"#warnBox\").show(); }\r\n    }\r\n}])\r\n.controller(\"TaskListController\", [\"$scope\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\",\"$rootScope\", \"warnBox\", function($scope, task, $location, $$$I18N, UserRole,$rootScope,warnBox){\r\n    $scope.toggleTaskList = function(){\r\n        $(\"body\").toggleClass(\"show_prog\");\r\n    };\r\n    let user;\r\n    let taskTimer = null;\r\n    $scope.$on(\"NOAUTH\", () => {\r\n        user = null;\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"STOPLOG\", function(){\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"AUTHED\", () => {\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    });\r\n    if(UserRole.currentUser){\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    }\r\n    $scope.rows = [];\r\n    var data = {};\r\n    $scope.$on(\"instanceIDS\", function($event, ids){\r\n        data.instances = ids;\r\n    });\r\n    $scope.$on(\"imageIDS\", function($event, ids){\r\n        data.images = ids;\r\n    });\r\n    $scope.$on(\"clientIDS\", function($event, ids){\r\n        data.clients = ids;\r\n    });\r\n    $scope.$on('modeIDS', function($event, ids){\r\n        data.modes = ids;\r\n    });\r\n    $scope.$on('nodes', function($event, ids){\r\n        data.nodes = ids;\r\n    });\r\n    $scope.$on('manageNetworkIDS', function($event, ids){\r\n        data.manage_networks = ids;\r\n    })\r\n    $scope.$on('personpools',function($event,ids){\r\n        data.personpools=ids;\r\n    })\r\n    var lists = [], flag = false;\r\n    function schedule(){\r\n        var postData = data && Object.keys(data).map(function(key){\r\n            // if(key !== \"clients\"){\r\n                return {\r\n                    key: key,\r\n                    ids: data[key]\r\n                };                \r\n            // }\r\n            // else{\r\n            //     return {\r\n            //         key: key,\r\n            //         ids: []\r\n            //     };    \r\n            // }\r\n        });\r\n        task.post(postData,\r\n            function(res){\r\n                $scope.rows = res.results.tasks.filter(item => user.real_name ===  item.user);\r\n                \r\n                Object.keys(res.results).forEach(function(key){\r\n                    if(key !== \"tasks\"){\r\n                        $scope.$root && $scope.$root.$broadcast(key + \"RowsUpdate\", res.results[key]);\r\n                    }\r\n                });\r\n                for(var i in res.results.notifies){\r\n                    var item = res.results.notifies[i], color = '#004d60', content;\r\n                    if( lists[item.id] == undefined ){\r\n                        lists[item.id] = item;\r\n                        if(item.waringtype === 0){\r\n                            warnBox.warn(item.content, item.id, function(ID){\r\n                                warnBox.close(ID);\r\n                                task.put({notify_id: ID}, function(res){  })\r\n                            })\r\n                        }\r\n                        else{\r\n                            if(item.waringtype === 1){\r\n                                color = \"#004d60\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n\r\n                            }\r\n                            else{\r\n                                color = \"#C46A69\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n                            }\r\n                            $.bigBox({\r\n                                title:$$$I18N.get('waringtype'+item.waringtype),\r\n                                content:content,\r\n                                color : color,\r\n                                timeout : 3000\r\n                            }, function(){\r\n                                task.put({notify_id: item.id}, function(res){\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                taskTimer = setTimeout(schedule, 3000);\r\n            },\r\n            function(){\r\n                taskTimer = setTimeout(schedule, 10000);\r\n            }\r\n        );\r\n        for(var k in data){\r\n            data[k] = undefined;\r\n            delete data[k];\r\n        }\r\n    }\r\n\r\n}])\r\n.controller(\"pageHeaderController\", [\"$scope\", \"UserAuth\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\", \"desktopHelpBox\",function($scope, Auth, task, $location, $$$I18N, UserRole, desktopHelpBox){\r\n    $scope.logout = function(){\r\n        Auth.logout();\r\n        desktopHelpBox.close();\r\n    };\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        desktopHelpBox.close();\r\n    });\r\n    $scope.$on(\"DMS\", function(e,dms){\r\n        $scope.dmsURL = dms;\r\n        $$$storage.setSessionStorage('DMS', dms);\r\n    })\r\n    $scope.dmsURL = $$$storage.getSessionStorage('DMS') || 'nodms';\r\n    \r\n}])\r\n.controller(\"LogoController\", [\"$scope\",\"settings\", \"$Domain\", \"$$$version\", function($scope, settings, $Domain, $$$version){\r\n    $scope.domain = $Domain;\r\n    $scope.version = $$$version;\r\n    $scope.languages = settings.languages;\r\n    $scope.currentLang = settings.currentLang;\r\n}])\r\n.controller(\"SkinController\", [\"$scope\", function($scope){\r\n    $scope.changeSkin = function(theme){\r\n        $scope.$root.$broadcast(\"changeSkin\", theme)\r\n    }\r\n}])\r\n.controller(\"userLoginInfoController\", [\"$scope\", \"UserRole\", function($scope, Role){\r\n    $scope.loginUser = Role.currentUser;\r\n    $scope.$on(\"AUTHED\", function(name, userInfo){\r\n        $scope.loginUser = userInfo;\r\n    });\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        $scope.loginUser = null;\r\n    });\r\n}])\r\n.controller(\"AlarmController\", [\"$scope\", \"$modal\", \"SystemAlarm\", \"AlarmHistory\", function($scope, $modal, alarm, AlarmHistory){\r\n    $scope.isOpen = false;\r\n    $scope.open = function(){\r\n        $scope.isOpen = true;\r\n    }\r\n    $scope.close = function(e){\r\n        if(e)\r\n            e.stopPropagation();\r\n        $scope.isOpen = false;\r\n    }\r\n    // function findDif(oldArray, newArray, difAttr){\r\n    //     if(newArray.length){\r\n    //         var length = oldArray.length>=newArray.length?oldArray.length:newArray.length;\r\n    //         var difs = [];\r\n    //         for(var i=0; i<length; i++){\r\n    //             if(newArray[i]){\r\n    //                 var different = oldArray.filter(function(item){ return item[difAttr] == newArray[i][difAttr] })[0];\r\n    //                 if(!different){ difs.push(newArray[i]) };\r\n    //             }\r\n    //         }\r\n    //         return difs;\r\n    //     }else{ return []; }\r\n    // };\r\n\r\n    // var oldAlarms = [];\r\n    $scope.$on(\"alarmsRowsUpdate\", function($event, data){\r\n        $scope.alarms = data;\r\n        // if(!$scope.isOpen){\r\n        //     var unreads = [];\r\n        //     data.forEach(function(item){\r\n        //         if(!item.is_read){ unreads.push(item) }\r\n        //     })\r\n        //     if(unreads.length){\r\n        //         $scope.open();\r\n        //         setTimeout(function(){\r\n        //             $scope.close();\r\n        //         }, 30000)\r\n        //     }\r\n        // }\r\n\r\n        // var difs = findDif(oldAlarms, data, 'id');\r\n        // if(!$scope.isOpen && difs.length){\r\n        //     oldAlarms = data;\r\n        //     $scope.open();\r\n        //     setTimeout(function(){\r\n        //         $scope.close();\r\n        //     }, 30000)\r\n        // }\r\n    })\r\n    $scope.delete = function(){\r\n        AlarmHistory.setRead({ids: $scope.alarms.map(function(item){ return item.id; })},function(res){\r\n            $scope.alarms = [];\r\n            $scope.isOpen = false;\r\n        })\r\n    }\r\n}])\r\n.filter(\"interfaceFilter\",[function(){\r\n    return function(data,idx,nets){\r\n        var invalidArr = [];\r\n        nets.forEach((n,i) => {\r\n            if(i !== idx && n._data_dev && n._data_dev._dev){\r\n                invalidArr.push(n._data_dev._dev);\r\n            }\r\n        });\r\n        return data.filter(function(d){\r\n           if(invalidArr.indexOf(d._dev) === -1){\r\n                return true;\r\n           }\r\n           return false;\r\n        });\r\n    }\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/vdi.js"],"sourceRoot":""}