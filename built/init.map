{"version":3,"sources":["webpack:///webpack/bootstrap 73c0292a4c28d0d1ccce","webpack:///./js/vdi/config.js","webpack:///./js/vdi/os-types.json","webpack:///./js/vdi/init.js","webpack:///./resources/info.json","webpack:///./js/ng/ng.controllers.js","webpack:///./js/ng/ng.directives.js","webpack:///./js/vdi/vdi.js"],"names":["window","$$$storage","getSessionStorage","key","sessionStorage","getItem","setSessionStorage","value","setItem","clearSessionStorage","clear","codeData","i18nData","imagesData","firstKey","ng","angular","module","supportedOems","getSupportedOEMs","currentOEM","host","location","hostname","hasBootstrap","domain","protocol","controllerDomain","interfaceDomain","vdiEnvironment","origin","main","constant","splitDomain","service","get","load","langCode","cb","loadOEMResources","factory","languages","Object","keys","map","currentLang","require","config","$httpProvider","interceptors","push","$q","$root","$$$MSG","test","url","withCredentials","reject","console","log","info","arguments","code","message","res","data","$broadcast","href","replace","ignoreAnyRequestError","$","bigBox","title","content","color","icon","timeout","bootstrap","oem","oemData","alert","lang","images","$body","document","body","theme","pathname","addClass","attr","fadeIn","$$$MAIN_MODULE","concat","error","when","getJSON","done","codeResponse","langResponse","imagesResponse","registerLazyService","fail","statusXhr","langXhr","status_ha","statusResponse","haResponse","JSON","parse","current_lang_type","isSplitBrain","result","is_split_brain","isInitPage","isPersonalLoginPage","isControlNode","is_control_node","isSplitBrainPage","start","roles","ip","initCurrentUser","length","navigator","language","split","toLowerCase","list","resources","ret","forEach","item","flagCode","name","translation","userId","ajax","method","stringify","user_id","dataType","oldInfo","user","$resource","$Domain","$location","$controllerDomain","$interfaceDomain","check","set_version","get_version","init_data","init_classes_setting","init_complete","license_check","get_resource_id","get_controller_status","set_controller","get_interfaces","check_root","query_manage_network","query_data_network","add_agent","params","id","init_agent","add_network","init_network","get_physic_net","network_info","controller","$scope","init","localize","settings","$$$version","$$$I18N","$timeout","$rootScope","$splitDomain","gotoLogin","waitComplete","checkComplete","progress","localStorage","quickstart","next","agent","password","network","get_console_status","is_compute_node","loop_check","setLang","verifyAuth","submitting","root_password","node_ip","err","get_network","interfaces","rows","member","mem","undefined","cidrs","cidr","_ips","rtn","formatIP","c","setDefault","set_console_ip","loadding","d","postData","glance_ip","image_ip","management_ip","manage_ip","management_network","$promise","then","loop_get_status","catch","finishUpload","importData","date","Date","end_date","setMonth","getMonth","getTime","changeLanguage","filter","versions","selected_lang","submitting_version","lang_type","finally","ex","loading_net","_netData","switch_type","type","create_subnet","vlan_id","vlanid","switch_name","virtual_name","subnet_name","start_ip","dhcp_start","end_ip","dhcp_end","netmask","gateway","dns1","dns2","get_console_network","manage_nets","manage_net","sort","idx","dev","data_nets","networks","data_net","on","resouce_pool_uuid","virtual_type","management_dev","management_netmask","bond_switch_infos","timer","timer2","cancel","X","masklen","Number","binaryMask","arrmask","i","join","inter","image_net","directive","restrict","scope","getInit","transclude","template","steps","btn","version","currentStep","btnName","isLastStep","currentIdx","initFunc","promise","initData","s","active","goStep","num","defer","getLang","str","$on","addStep","link","element","attrs","css","e","langVersion","initStepCtr","$$$IMAGES","reduce","langType","show","l","$route","$animate","preventDefault","ribbon","currentBreadcrumb","updateBreadcrumb","crumbs","breadCrumb","reverse","smartActions","userLogout","$this","SmartMessageBox","text","buttons","ButtonPressed","root_","setTimeout","logout","resetWidgets","widresetMSG","reload","launchFullscreen","hasClass","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","removeClass","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","minifyMenu","toggleClass","effect","toggleMenu","toggleShortcut","shortcut_dropdown","is","shortcut_buttons_hide","shortcut_buttons_show","find","click","mouseup","target","has","animate","height","actionEvents","documentElement","isDefined","action","actionEvent","append","smartbgimage","fadeOut","prop","bind","$html","bgurl","$logo","removeClassPrefix","remove","prepend","breadcrumbs","setBreadcrumb","$compile","$watch","newVal","oldVal","updateDOM","empty","crumb","li","localizeText","$http","$window","$RESOURCE","encodeHTML","txt","tmplReg","interestAttrReg","ready","currentLocaleData","getLangUrl","sourceText","translate","transkey","onAttrChange","tmpl","myhtml","match","index","myattr","html","v","k","$observe","isReady","timer_handle","topmenu","first","jarvismenu","accordion","speed","menu_speed","closedSign","openedSign","number","fn","slimScroll","getElement","navs","isChild","isActive","viewLocation","path","hasIcon","hasIconCaption","iconCaption","getItemUrl","view","getItemTarget","$emit","parentCtrls","navCtrl","navgroupCtrl","setActive","openParents","parents","each","el","parent","trim","trigger","ctrl","items","loadItem","loadedItem","callback","onLoad","src","addItem","refresh","currentTarget","button","onRefresh","total","activityCtrl","mytest","$badge","currentContent","loadContent","footer","newContent","oldContent","contentCtrl","setup_widget_desktop","jarvisWidgets","enableJarvisWidgets","grid","widgets","deleteSettingsKey","settingsKeyLabel","deletePositionKey","positionKeyLabel","sortable","buttonsHidden","toggleButton","toggleSpeed","onToggle","deleteButton","deleteClass","deleteSpeed","onDelete","editButton","editPlaceholder","editClass","editSpeed","onEdit","colorButton","fullscreenButton","fullscreenClass","fullscreenDiff","onFullscreen","customButton","customClass","customStart","customEnd","buttonOrder","opacity","dragHandle","placeholderClass","indicator","indicatorTime","timestampPlaceholder","timestampFormat","refreshButton","refreshButtonClass","labelError","labelUpdated","labelRefresh","labelDelete","afterLoad","rtl","onChange","onSave","ajaxnav","navAsAjax","setup_widget_mobile","enableMobileWidgets","setup_widgets_desktop","device","class","iElm","iAttrs","modelCtrl","validate","val","vals","Array","isArray","reg","isvalide","every","parser","arr","b","formatter","viewChangeListener","$setValidity","$modelValue","$isEmpty","$parsers","$formatters","$viewChangeListeners","ngModel","isValid","format","fmt","o","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","RegExp","$1","getFullYear","substr","$modal","openModal","obj","delTips","delete_rows","delParm","nodelete_rows","nodelTips","open","$modalInstance","deleteName","row","nodeleteName","ok","close","size","users","selecteduser","node","selectUser","children","contents","query","post","put","loadISO","save","lun","isUndefined","vendor","type2str","local","iscsi","netfs","fc","stauts2str","running","building","stauts","$sce","trustAsHtml","slash","nat","bridge","vlan","toFixed","input","searchText","searchName","outPut","indexOf","$filterProvider","register","pageSize","totalPage","ceil","min","max","slice","disabled","dialog","templateUrl","dialogUrl","dialogSize","dismiss","___dialog","$filter","getPosition","ele","st","scrollTop","sl","scrollLeft","cw","clientWidth","ch","clientHeight","sw","scrollWidth","sh","scrollHeight","ow","offsetWidth","oh","offsetHeight","x","pageX","y","pageY","getCurrentPage","currentPage","getCurrentRows","getPageSize","pagesize","context_wrapper","hide","getFilterRows","checkAll","_all","_ignore","_selected","checkedAll","selectAllChange","checkOne","some","asc","a","pageSizeChange","pageChange","currentItem","de","handler","$apply","menu","offset","pos","top","left","stopPropagation","conroller","ctrls","getStart","current","getEnd","end","currentCount","getCurrentCount","$interval","dereg","fn_update_help_info","$$path","help_text","myTips","contextmenuDisabled","contextmenuEventName","lastText","btnUnable","moveWth","defaults","prevBtnText","nextBtnText","doneBtnText","stepIndex","go","select","step","selected","stepScope","getCurrentIndex","prev","getMarginValue","is_dirty","stepEventName","$$nextSibling","showPrev","isLast","doneEventName","jumpStep","removeStep","insertStep","_idx","wizardWth","outerWidth","_wth","eq","testValid","wizard","options","Highcharts","setOptions","global","useUTC","time","$parent","refresh_time","hc_options","chart","renderTo","yAxis","series","highcharts","Chart","drawPoint","datetime","hc_series","drawpoint","reset_highcharts","destroy","newvalue","delegate","event","ip_pattern","elm","ngmodelctl","ngrequiredctl","viewValue","keyCode","numKey","ctrlKey","which","nextValue","isNaN","ngModelCtrl","required","ipRequired","$eval","CHECKTOOLS","checkIP","parts","numre","valid","parseInt","ipformatNum","pow","ip2long","checkRange","s_ip","e_ip","popEl","$input","after","$render","modelVal","modelValArr","$setPristine","$setViewValue","nextEles","nextAll","focus","prevAll","selectionStart","selectionEnd","filtertext","lastFilter","lastFiltedResult","add_selected","getUsers","filterUser","copy","user_name","real_name","nodes","add_select_rows","$event","APIadmin","APIuser","APIdomain","expandedNodes","_users","seRows","rmRows","common_users","formatData","iteration","childName","len","_is_last","oldlen","splice","removeNoChildrenDeparts","noUserFilter","walk","dept_id","get_admin","deferred","resolve","get_user","query_tree","get_domain","all","typeName","userData","domain_users","_name","getLastLevelNodes","obj_levels","arrays","levels","remove_selected","lastRow2","shiftKey","begin_idx","end_idx","lastRow","add_remove_rows","ltor","rtol","last","menuItems","allMenuItems","apply","$templateCache","userNumber","priority","addMax","addMin","is_dot","String","temp","ctrKey","keydown","_code","_valsplit","add","round","setValidation","newval","exp","abs","org","XMLHttpRequest","org_open","prototype","allowUpload","FormData","uploadPool","finishHandel","upload_id","progressName","isUploading","percent","loaded","progressPercent","uploadISOSize","uiWebUpload","uiUploadBtnName","uiWebUploadTest","degfn","disableTest","filetype","form","checkConfig","file","uiUploadType","maxSize","uiUploadLimit","uiUploadUrl","Error","typematch","clearDOM","clone","progressSize","finish","success","response","files","uiWebUploadParams","uiWebUploadName","transformRequest","xhr","q","w","r","t","upload","addEventListener","position","totalSize","call","headers","btnClass","iconClass","abort","warn","task","UserRole","warnBox","toggleTaskList","taskTimer","clearTimeout","currentUser","schedule","ids","instances","clients","modes","manage_networks","personpools","lists","flag","results","tasks","notifies","waringtype","ID","notify_id","Auth","desktopHelpBox","dms","dmsURL","changeSkin","Role","loginUser","userInfo","alarm","AlarmHistory","isOpen","alarms","delete","setRead","nets","invalidArr","n","_data_dev","_dev"],"mappings":"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","file":"init.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/devbuild/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 159);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73c0292a4c28d0d1ccce","/**\r\n * init, index, templateXXX\r\n */\r\n\r\n// TODO: \r\nwindow.$$$storage = {\r\n\tgetSessionStorage(key){\r\n\t\treturn sessionStorage.getItem('vdi_'+ key);\r\n\t},\r\n\tsetSessionStorage(key, value){\r\n\t\tsessionStorage.setItem('vdi_'+ key, value);\r\n\t},\r\n\tclearSessionStorage(){\r\n\t\tsessionStorage.clear()\r\n\t}\r\n}\r\n\r\n// \r\nlet codeData = {};\r\nlet i18nData = {};\r\nlet imagesData = {};\r\n\r\nlet firstKey; //  OEM\r\nlet ng = angular.module(\"ng\");\r\nlet supportedOems = getSupportedOEMs();\r\nlet currentOEM = null;\r\n\r\nlet host = location.hostname;\r\nlet hasBootstrap = false;\r\n\r\n\r\n// \r\nlet domain = location.protocol + \"//\" + host + \":8081\"; // \r\nlet controllerDomain = location.protocol + \"//\" + host + \":19891\"; // \r\nlet interfaceDomain = location.protocol + \"//\" + host + \":19893\"; // \r\nif(window.vdiEnvironment === \"development\") {\r\n\thost = $$$storage.getSessionStorage('dev_host');\r\n\t// use dev_host\r\n\tif(host) {\r\n\t\tdomain = \"http://\" + host + \":8081\";\r\n\t\tcontrollerDomain = \"http://\" + host + \":19891\";\r\n\t\tinterfaceDomain = \"http://\" + host + \":19893\";\r\n\t} else {\r\n\t\t// use mock server\r\n\t\tdomain = controllerDomain = interfaceDomain = location.origin;\r\n\t}\r\n}\r\n\r\nmain();\r\n\r\n/*  angular  */\r\nng.constant(\"$Domain\", domain);\r\nng.constant(\"$controllerDomain\", controllerDomain);\r\nng.constant(\"$interfaceDomain\", interfaceDomain);\r\nng.constant(\"$splitDomain\", location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\");\r\nlet splitDomain = location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\";\r\nng.service(\"$RESOURCE\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn supportedOems[key];\r\n\t};\r\n\tthis.load = function(langCode, cb){\r\n\t\tloadOEMResources(langCode, cb);\r\n\t};\r\n}]);\r\n\r\nng.factory(\"settings\", [function(){\r\n\treturn {\r\n\t\tlanguages: Object.keys(supportedOems).map(function(key){\r\n\t\t\treturn supportedOems[key];\r\n\t\t}),\r\n\t\tcurrentLang: supportedOems[currentOEM]\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$MSG\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn codeData[key] || \"\";\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$I18N\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn i18nData[key] || \"\";\r\n\t};\r\n}]);\r\nng.service(\"$$$IMAGES\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn imagesData[key] || \"\";\r\n\t};\r\n}]);\r\nng.constant(\"$$$os_types\", require(\"./os-types\"));\r\nng.config([\"$httpProvider\", function($httpProvider){\r\n\t$httpProvider.interceptors.push([\"$q\", \"$rootScope\", \"$$$MSG\", function($q, $root, $$$MSG){\r\n\t\treturn {\r\n\t\t\t\"request\": function(config){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(config.url)){\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(/\\.html$/i.test(config.url)) {\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(!/^https?:\\/\\//.test(config.url)) {\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\tconfig.url = domain + config.url;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t\"requestError\": function(reject){\r\n\t\t\t\tconsole.log(\"REQ_ERROR\");\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"responseError\": function(reject){\r\n\t\t\t\tconsole.log(\"RES_ERROR\", arguments);\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tcode: 100,\r\n\t\t\t\t\tmessage: $$$MSG.get(\"\"),\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"response\": function(res){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(res.config.url)){\r\n\t\t\t\t\tif(/\\/thor\\/toolkit\\//.test(res.config.url) || /\\/v1\\/(?:node|network)\\//.test(res.config.url)){\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tswitch(res.data.code){\r\n\t\t\t\t\t\t\tcase 17001:\r\n\t\t\t\t\t\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 11011:\r\n\t\t\t\t\t\t\t\t$$$storage.setSessionStorage('returnUrl', location.href)\r\n\t\t\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif(/\\/thor\\/home\\/tasklog/.test(res.config.url)){\r\n\t\t\t\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(window.ignoreAnyRequestError) { return res; }\r\n\t\t\t\t\t\t\t\t$.bigBox && $.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n\t\t\t\t\t\t\t\t\tcontent : $$$MSG.get(res.data.code)==''?res.data.message:$$$MSG.get(res.data.code),\r\n\t\t\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n}]);\r\n\r\n/**\r\n *  angular app\r\n * @param {String} oem oem \r\n */\r\nfunction bootstrap(oem){\r\n\tvar oemData = supportedOems ? supportedOems[oem] : null;\r\n\tif(!oemData) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"\");\r\n\t\t}\r\n\t}\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tvar $body = $(document.body);\r\n\t\tvar theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t\tif(!/personal_login/.test(location.pathname)) {\r\n\t\t\t$body.addClass(theme);\r\n\t\t\t$(\"#vdi_skins_url\").attr(\"href\", `/resources/pkg/${oem}/skins.css`);\r\n\t\t\t$body.fadeIn(1000);\r\n\t\t}\r\n\t\t\r\n\t\t// \r\n\t\tif(window.vdiEnvironment === \"development\" && !window.$$$MAIN_MODULE) {\r\n\t\t\treturn alert(\"main module is not defined!\");\r\n\t\t}\r\n\t\tangular.bootstrap(document, [].concat(window.$$$MAIN_MODULE));\r\n\t\thasBootstrap = true;\r\n\t}\r\n}\r\n\r\n/**\r\n *  OEM \r\n * @param {String} oem  OEM \r\n * @param {Function} cb \r\n */\r\nfunction loadOEMResources(oem, cb){\r\n\tif(!oem) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\" key \");\r\n\t\t}\r\n\t}\r\n\tif(!(oem in supportedOems)) {\r\n\t\tconsole.error(\"unsupported resource key:\", oem);\r\n\t\toem = Object.keys(supportedOems)[0];\r\n\t}\r\n\tlet oemData = supportedOems[oem];\r\n\t// \r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tcodeData = oemData.code;\r\n\t\ti18nData = oemData.lang;\r\n\t\timagesData = oemData.images;\r\n\t\treturn cb(oemData);\r\n\t}\r\n\t$.when(\r\n\t\t$.getJSON(`/resources/pkg/${oem}/code.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/lang.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/images.js`)\r\n\t).done(function(codeResponse, langResponse, imagesResponse){\r\n\t\tcodeData = oemData.code = codeResponse[0];\r\n\t\ti18nData = oemData.lang = langResponse[0];\r\n\t\timagesData = oemData.images = imagesResponse[0];\r\n\t\tif(!hasBootstrap) {\r\n\t\t\tregisterLazyService();\r\n\t\t\tbootstrap(oem);\r\n\t\t} else {\r\n\t\t\tcb && cb(oemData);\r\n\t\t}\r\n\t}).fail(function(){\r\n\t\tconsole.log(`load ${oem} resource error:`, arguments[2]);\r\n\t});\r\n\tcurrentOEM = oem;\r\n}\r\nfunction main(){\r\n\tvar statusXhr = $.get(controllerDomain + \"/v1/node/status\");\r\n\tvar langXhr = $.get(domain + \"/thor/init/lang\");\r\n\tvar status_ha = $.get(domain + \"/thor/get_controller_ha_status\");\r\n\t$.when(statusXhr, langXhr, status_ha).done(function(statusResponse, langResponse, haResponse){\r\n\t\tif(typeof statusResponse[0] === \"string\") {\r\n\t\t\tstatusResponse[0] = JSON.parse(statusResponse[0])\r\n\t\t}\r\n\t\tvar oem = langResponse[0].current_lang_type;\r\n\t\tvar isSplitBrain = haResponse[0].result.is_split_brain;\r\n\t\tvar isInitPage = /init\\.html$/.test(location.pathname);\r\n\t\tvar isPersonalLoginPage = location.pathname==='/personal_login/';\r\n\t\tvar isControlNode = statusResponse[0].is_control_node;\r\n\t\tvar isSplitBrainPage = /split\\.html$/.test(location.pathname);\r\n\t\tif(isSplitBrainPage) {\r\n\t\t\tif(!isSplitBrain) {\r\n\t\t\t\tlocation.replace(\"/\");\r\n\t\t\t}else{\r\n\t\t\t\tstart();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(isSplitBrain){\r\n\t\t\t\t// $$$storage.clearSessionStorage();\r\n\t\t\t\t$$$storage.setSessionStorage('splitIP', haResponse[0].result.roles[0].ip);\r\n\t\t\t\tlocation.replace(\"split.html\");\r\n\t\t\t} else {\r\n\t\t\t\tif(isControlNode) {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage) {\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart(oem);\r\n\t\t\t\t\t\tinitCurrentUser();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage){\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction start(oem){\r\n\t// \r\n\tif(!oem) {\r\n\t\t// NOTE: \r\n\t\t// \r\n\t\tif(Object.keys(supportedOems).length > 1) {\r\n\t\t\t// \r\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language\r\n\t\t\t// \r\n\t\t\t//   navigator.__defineGetter__(\"language\", function(){ return \"en-us\" })\r\n\t\t\tlet lang = navigator.language;\r\n\t\t\tif(lang) {\r\n\t\t\t\tlang = lang.split(\"-\")[0].toLowerCase();\r\n\t\t\t}\r\n\t\t\tif(lang === \"zh\") {\r\n\t\t\t\toem = \"e-vdi\";\r\n\t\t\t} else if(lang === \"en\") {\r\n\t\t\t\toem = \"classEn\";\r\n\t\t\t}\r\n\t\t\tif(!supportedOems[oem]) {\r\n\t\t\t\toem = firstKey;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toem = firstKey; // \r\n\t\t}\r\n\t}\r\n\tloadOEMResources(oem, supportedOems);\r\n}\r\n\r\nfunction getSupportedOEMs(){\r\n\tvar list = require(\"../../resources/info\").resources;\r\n\tvar ret = {};\r\n\tlist.forEach(function(item){\r\n\t\tret[item.key] = item;\r\n\t\t// \r\n\t\titem.langCode = item.key;\r\n\t\titem.flagCode = item.key;\r\n\t\titem.language = item.name;\r\n\t\titem.translation = item.title;\r\n\t});\r\n\tfirstKey = list[0].key;\r\n\treturn ret;\r\n}\r\n\r\nfunction initCurrentUser(){\r\n\tvar userId = $$$storage.getSessionStorage('userId');\r\n\tif(!userId) { return; }\r\n\t$.ajax({\r\n\t\tmethod: \"POST\",\r\n\t\turl: domain + \"/thor/user/session\",\r\n\t\tdata: JSON.stringify({\r\n\t\t\tuser_id: userId\r\n\t\t}),\r\n\t\tdataType: 'json'\r\n\t}).done(function(res){\r\n\t\tif(res.code === 0){\r\n\t\t\t// res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t});\r\n\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction registerLazyService(){\r\n\tng.constant(\"$$$version\", i18nData[\"GOD_VERSION\"] || \"dev\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/config.js","module.exports = [{\"key\":\"other\",\"icon\":\"other.png\",\"value\":\"Other\"},{\"key\":\"ArchLinux\",\"icon\":\"linux.png\",\"value\":\"Arch Linux\"},{\"key\":\"ArchLinux_64\",\"icon\":\"linux.png\",\"value\":\"Arch Linux (64 bit)\"},{\"key\":\"Debian\",\"icon\":\"debian.png\",\"value\":\"Debian\"},{\"key\":\"Debian_64\",\"icon\":\"debian.png\",\"value\":\"Debian (64 bit)\"},{\"key\":\"Fedora\",\"icon\":\"fedora.png\",\"value\":\"Fedora\"},{\"key\":\"Fedora_64\",\"icon\":\"fedora.png\",\"value\":\"Fedora (64 bit)\"},{\"key\":\"FreeBSD\",\"icon\":\"linux.png\",\"value\":\"FreeBSD\"},{\"key\":\"FreeBSD_64\",\"icon\":\"linux.png\",\"value\":\"FreeBSD (64 bit)\"},{\"key\":\"Gentoo\",\"icon\":\"linux.png\",\"value\":\"Gentoo\"},{\"key\":\"Gentoo_64\",\"icon\":\"linux.png\",\"value\":\"Gentoo (64 bit)\"},{\"key\":\"Linux\",\"icon\":\"linux.png\",\"value\":\"Other Linux\"},{\"key\":\"MacOS\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server\"},{\"key\":\"MacOS_64\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server (64 bit)\"},{\"key\":\"OpenBSD\",\"icon\":\"linux.png\",\"value\":\"OpenBSD\"},{\"key\":\"OpenBSD_64\",\"icon\":\"linux.png\",\"value\":\"OpenBSD (64 bit)\"},{\"key\":\"OpenSUSE\",\"icon\":\"linux.png\",\"value\":\"openSUSE\"},{\"key\":\"OpenSUSE_64\",\"icon\":\"linux.png\",\"value\":\"openSUSE (64 bit)\"},{\"key\":\"OpenSolaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later\"},{\"key\":\"OpenSolaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later (64 bit)\"},{\"key\":\"Oracle\",\"icon\":\"linux.png\",\"value\":\"Oracle\"},{\"key\":\"Oracle_64\",\"icon\":\"linux.png\",\"value\":\"Oracle (64 bit)\"},{\"key\":\"Other\",\"icon\":\"unknown.png\",\"value\":\"Other/Unknown\"},{\"key\":\"RedHat\",\"icon\":\"redhat.png\",\"value\":\"Red Hat\"},{\"key\":\"RedHat_64\",\"icon\":\"redhat.png\",\"value\":\"Red Hat (64 bit)\"},{\"key\":\"Solaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier\"},{\"key\":\"Solaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier (64 bit)\"},{\"key\":\"Ubuntu\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu\"},{\"key\":\"Ubuntu_64\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu (64 bit)\"},{\"key\":\"Windows2000\",\"icon\":\"win7.png\",\"value\":\"Windows 2000\"},{\"key\":\"Windows2003\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003\"},{\"key\":\"Windows2003_64\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003 (64 bit)\"},{\"key\":\"Windows2008\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008\"},{\"key\":\"Windows2008_64\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008 (64 bit)\"},{\"key\":\"Windows7\",\"icon\":\"win7.png\",\"value\":\"Windows 7\"},{\"key\":\"Windows7_64\",\"icon\":\"win7.png\",\"value\":\"Windows 7 (64 bit)\"},{\"key\":\"Windows8\",\"icon\":\"win8.png\",\"value\":\"Windows 8\"},{\"key\":\"Windows8_64\",\"icon\":\"win8.png\",\"value\":\"Windows 8 (64 bit)\"},{\"key\":\"WindowsNT\",\"icon\":\"win7.png\",\"value\":\"Other Windows\"},{\"key\":\"WindowsNT4\",\"icon\":\"win7.png\",\"value\":\"Windows NT 4\"},{\"key\":\"WindowsVista\",\"icon\":\"win7.png\",\"value\":\"Windows Vista\"},{\"key\":\"WindowsVista_64\",\"icon\":\"win7.png\",\"value\":\"Windows Vista (64 bit)\"},{\"key\":\"Windowsxp\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"Windowsxp_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"WindowsXP\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"WindowsXP_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"Windows 7\",\"icon\":\"win7.png\",\"value\":\"Windows 7 series\"},{\"key\":\"Windows10\",\"icon\":\"win8.png\",\"value\":\"Windows 10\"},{\"key\":\"Windows10_64\",\"icon\":\"win8.png\",\"value\":\"Windows 10 (64 bit)\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/vdi/os-types.json\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"vdi.init\",[\"ngRoute\",\"ngResource\", \"ui.bootstrap\",\"app.localize\",\"app.controllers\",\"vdi\"])\r\n// .config([\"$httpProvider\",function($httpProvider){\r\n//     $httpProvider.interceptors.push(function($q,$$$MSG){\r\n//         return{\r\n//             \"response\":function(res){\r\n//                 if(/^https?\\:\\/\\//.test(res.config.url)){\r\n//                     if(/\\/v1\\/node\\//.test(res.config.url)){\r\n//                         return res;\r\n//                     }\r\n//                     else{\r\n//                         switch(res.data.code){\r\n//                             case 0:\r\n//                                 return res;\r\n//                                 break;\r\n//                             default:\r\n//                                 $.bigBox({\r\n//                                     title : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n//                                     content : $$$MSG.get(res.data.code),\r\n//                                     color : \"#C46A69\",\r\n//                                     icon : \"fa fa-warning shake animated\",\r\n//                                     timeout : 6000\r\n//                                 });\r\n//                             break;\r\n//                         }\r\n//                     }\r\n//                     return $q.reject({AAA:res});\r\n//                 }\r\n//                 return res;\r\n//             }\r\n//         }\r\n//     });\r\n\r\n// }])\r\n\r\n.factory(\"init\", [\"$resource\", \"$Domain\",\"$location\",\"$controllerDomain\",\"$interfaceDomain\", function($resource, $Domain,$location,$controllerDomain,$interfaceDomain){\r\nreturn $resource($Domain + \"/thor/init\", null, {\r\n    //\r\n    check: { method: \"GET\", url: $Domain + \"/thor/init/check\",timeout: 5000},\r\n\r\n     set_version:{ method: \"POST\", url: $Domain + \"/thor/init/lang\"},\r\n     get_version:{ method: \"GET\", url: $Domain + \"/thor/init/lang\"},\r\n     // \r\n    init_data: { method: \"GET\", url: $Domain + \"/thor/init/data\" },\r\n     init_classes_setting: { method: \"POST\", url: $Domain + \"/thor/init/classes\" },\r\n     init_complete:{ method: \"POST\",url: $Domain + \"/thor/init/complete\" },\r\n\r\n     // \r\n     license_check: { method:\"GET\", url: $Domain + \"/thor/license/check\"},\r\n     get_resource_id: { method:\"GET\", url: $Domain + \"/thor/init/get_resouce_id\"},\r\n\r\n     //\r\n    get_controller_status : { method:\"GET\", url: $controllerDomain + \"/v1/node/status\"},\r\n    set_controller:{method:\"POST\", url:$controllerDomain + \"/v1/node/config/set/controller/\"},\r\n   //\r\n    get_interfaces : \r\n        { method:\"GET\", url: $interfaceDomain + \"/v1/network/interface/list\"},\r\n    // root\r\n    check_root:\r\n        { method: \"POST\", url: $controllerDomain + \"/v1/node/check/root_account\"},\r\n    //\r\n    query_manage_network:\r\n        { method: \"GET\", url: $Domain + \"/thor/management_networks\"},\r\n    //\r\n    query_data_network:\r\n       { method: \"GET\", url: $Domain + \"/thor/networks\"},\r\n     //\r\n     add_agent: { method: \"POST\", url: $Domain + \"/thor/hosts/:id\", params:{id: \"@id\"} },\r\n     init_agent: { method: \"POST\", url: $Domain + \"/thor/init/agent\"},\r\n\r\n     //\r\n     add_network: { method: \"POST\", url: $Domain + \"/thor/networks\"},\r\n     init_network: { method: \"POST\", url: $Domain + \"/thor/init/network\"},\r\n     get_physic_net: { method: \"GET\", url: $Domain + \"/thor/host/get_node_physical_network\"},\r\n     network_info: { method: \"GET\", url: $Domain + \"/thor/host/networkInfo\"}\r\n});\r\n}])\r\n.controller(\"initController\", [\"$scope\",\"init\",\"localize\",\"settings\",\"$q\",\"$$$version\",\"$$$I18N\", \"$Domain\",\"$timeout\",\"$location\",\"$rootScope\",\"$splitDomain\",\r\nfunction($scope,init,localize,settings, $q, $$$version, $$$I18N,$Domain,$timeout,$location,$rootScope,$splitDomain){\r\n$scope.gotoLogin = function(){\r\n    $scope.waitComplete = true;\r\n    checkComplete();\r\n    function checkComplete(){\r\n        init.get_controller_status(function(res){\r\n            if(res.is_control_node && !res.progress){\r\n                done();\r\n            } else {\r\n                $timeout(checkComplete, 1);\r\n            }\r\n        });\r\n    }\r\n    function done(){\r\n        $scope.waitComplete = false;\r\n        init.init_complete();\r\n        localStorage.quickstart = true;\r\n        location.replace(\"index.html\");\r\n    }\r\n};\r\n$scope.next = function(data){\r\n    $rootScope.$broadcast('initGotoNext',data);\r\n};\r\n$scope.agent = {};\r\n$scope.console = {\r\n    ip:$Domain.split(\"http://\")[1].split(\":\")[0],\r\n    name:\"root\",\r\n    password: $$$storage.getSessionStorage('rootPassword')\r\n};\r\n$scope.network = {};\r\n\r\n$scope.get_console_status = function(){\r\n    init.get_controller_status(function(res){\r\n        $scope.console.is_compute_node = res.is_compute_node;\r\n        $scope.console.is_control_node = res.is_control_node;\r\n        if(res.is_control_node && !res.progress){\r\n            loop_check();\r\n        }\r\n        else{\r\n            $scope.next();\r\n        }\r\n    });\r\n };\r\n $scope.get_console_status();\r\n localize.setLang(settings.currentLang);\r\n\r\n //\r\n $scope.verifyAuth = function(){\r\n    $scope.submitting = true;\r\n    init.check_root({\r\n        root_password:$scope.console.password,\r\n        node_ip:$scope.console.ip\r\n    },function(){\r\n        $$$storage.setSessionStorage('rootPassword', $scope.console.password)\r\n        $scope.submitting = true;\r\n        $scope.next();\r\n    },function(err){\r\n        $scope.submitting = false;\r\n        $.bigBox({\r\n            title : \"ERROR\",\r\n            content : err.info.data,\r\n            color : \"#C46A69\",\r\n            icon : \"fa fa-warning shake animated\",\r\n            timeout : 6000\r\n        });\r\n    });\r\n     // $scope.next();\r\n }\r\n//\r\n $scope.get_network = function(){\r\n    init.get_interfaces(function(res){\r\n        var interfaces = res.interfaces;\r\n        var rows = $scope.interfaces = {};\r\n        Object.keys(interfaces).forEach(key => {\r\n            if(interfaces[key]){\r\n                var member = interfaces[key].member;\r\n                if(member){\r\n                    member.forEach(mem => {\r\n                        interfaces[mem] = undefined;\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        Object.keys(interfaces).forEach(key => {\r\n            if(interfaces[key]){\r\n                var cidrs = interfaces[key].cidr;\r\n                if(cidrs.length){\r\n                    rows[key] = interfaces[key];\r\n                    rows[key]._ips = cidrs.map(c => {\r\n                        var rtn = formatIP(c);\r\n                        if(rtn.ip === $scope.console.ip){\r\n                           setDefault(rows[key],rtn);\r\n                        }\r\n                        return rtn;\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    },function(err){\r\n        $.bigBox({\r\n            title : \"ERROR\",\r\n            content : err.info.data,\r\n            color : \"#C46A69\",\r\n            icon : \"fa fa-warning shake animated\",\r\n            timeout : 6000\r\n        });\r\n    });\r\n }\r\n$scope.set_console_ip = function(){\r\n    $scope.console.loadding = true;\r\n    var d = $scope.console;\r\n    var postData = {\r\n        root_password:d.password,\r\n        glance_ip:d.image_ip.ip,\r\n        management_ip:d.manage_ip.ip,\r\n        management_network:d.manage_ip.cidr\r\n    };\r\n    init.set_controller(postData).$promise\r\n    .then(function(){\r\n        loop_get_status();\r\n    })\r\n    .catch(function(err){\r\n        $scope.console.loadding = false;\r\n        $.bigBox({\r\n            title : \"ERROR\",\r\n            content : err.info.data,\r\n            color : \"#C46A69\",\r\n            icon : \"fa fa-warning shake animated\",\r\n            timeout : 6000\r\n        });\r\n    });\r\n};\r\n    \r\n //\r\n $scope.finishUpload = function(){\r\n    $scope.next();\r\n };\r\n\r\n // \r\n$scope.importData = function(){\r\n    var date = new Date();\r\n    var end_date = new Date();\r\n    end_date.setMonth(end_date.getMonth() + 3);\r\n    var postData = {\r\n        \"semester_start\":date.getTime(),\r\n        \"semester_end\":end_date.getTime()\r\n    };\r\n\r\n    init.init_data(function(res){\r\n        $scope.init_data = res.result;\r\n        init.init_classes_setting(postData);\r\n    });\r\n};\r\n\r\n // \r\n \r\n $scope.changeLanguage = function(key){\r\n    settings.currentLang = settings.languages.filter(function(lang){ return lang.key === key})[0];\r\n    localize.setLang(settings.currentLang);\r\n };\r\n\r\n //\r\n $scope.get_version = function(){\r\n    init.get_version(function(res){\r\n        $scope.versions = settings.languages;\r\n        $scope.versions.selected_lang = res.current_lang_type;\r\n    });\r\n };\r\n $scope.set_version = function(){\r\n    $scope.submitting_version = true;\r\n    init.set_version({lang_type: $scope.versions.selected_lang},function(res){\r\n        $scope.changeLanguage(res.current_lang_type);\r\n        $scope.next();\r\n    }).$promise.finally(function(){\r\n        $scope.submitting_version = false;\r\n    });\r\n };\r\n $scope.ex={\r\n     url: $Domain + '/thor/license/export'\r\n };\r\n //\r\n $scope.init_network = function(){\r\n    $scope.loading_net = true;\r\n    var _netData = $scope.network;\r\n    var postData = {};\r\n    postData.name = _netData.name;\r\n   postData.switch_type = _netData.type;\r\n    postData.create_subnet = true;\r\n   if(_netData.type === 'vlan'){\r\n        postData.vlan_id = _netData.vlanid;\r\n    }\r\n    postData.switch_name = _netData.virtual_name;\r\n    if(postData.create_subnet){\r\n        postData.subnet_name = _netData.subnet_name;\r\n        postData.start_ip = _netData.dhcp_start;\r\n        postData.end_ip = _netData.dhcp_end;\r\n        postData.netmask = _netData.netmask;\r\n        postData.gateway = _netData.gateway;\r\n        postData.dns1 = _netData.dns1;\r\n        postData.dns2 = _netData.dns2;\r\n    }\r\n    init.init_network(postData,function(res){\r\n        $scope.next();\r\n    }).$promise.finally(function(){\r\n        $scope.loading_net = false;\r\n    });\r\n };\r\n//\r\n$scope.get_console_network = function(){\r\n    init.query_manage_network(function(res){\r\n        $scope.agent.manage_nets = res.result;\r\n        $scope.agent.manage_net = $scope.agent.manage_nets[0];\r\n        init.get_interfaces(res => {\r\n            $scope.interfaces = {};\r\n            Object.keys(res.interfaces).forEach(key => {\r\n                if(res.interfaces[key]){\r\n                    var member = res.interfaces[key].member;\r\n                    if(member){\r\n                        member.forEach(mem => {\r\n                            res.interfaces[mem] = undefined;\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n            Object.keys(res.interfaces).filter(key => res.interfaces[key]).sort()\r\n            .forEach((key,idx) => {\r\n                !$scope.agent.dev && ($scope.agent.dev = key);\r\n                $scope.interfaces[key] = res.interfaces[key]; \r\n            });\r\n        });\r\n    });\r\n    init.query_data_network(function(res){\r\n        $scope.agent.data_nets = res.networks;\r\n        $scope.agent.data_net = $scope.agent.data_nets[0];\r\n    });\r\n    \r\n};\r\n$scope.init_agent = function(){\r\n    if($scope.agent.on){\r\n        $scope.agent.loadding = true;\r\n        init.get_resource_id(function(res){\r\n            var postData = {\r\n                id:res.result.resouce_pool_uuid,\r\n                ip:$scope.agent.manage_net.management_ip,\r\n                root_password:$scope.console.password,\r\n                virtual_type:\"kvm\",\r\n                management_dev:$scope.agent.manage_net.management_dev,\r\n                management_ip:$scope.agent.manage_net.management_ip,\r\n                management_netmask:$scope.agent.manage_net.management_netmask,\r\n                bond_switch_infos:[\r\n                    {\r\n                      'dev': $scope.agent.dev ? $scope.agent.dev : null,\r\n                      'switch': $scope.agent.data_net.switch_name\r\n                    }\r\n                ]\r\n            };\r\n            init.init_agent(postData,function(){\r\n                $scope.next();\r\n            }).$promise.finally(function(){\r\n                $scope.agent.loadding = false;\r\n            });\r\n        });\r\n    }else{\r\n        $scope.next();\r\n    }\r\n};\r\n\r\nvar timer = null;\r\nvar timer2 = null;\r\nfunction loop_check(){\r\n    init.check(function(res){\r\n        $scope.console.loadding = false;\r\n        $timeout.cancel(timer2);\r\n        $scope.next(res.X);\r\n    },function(err){\r\n        timer2 = $timeout(function(){\r\n            loop_check();\r\n        },1000)\r\n    });\r\n}\r\nfunction loop_get_status(){\r\n    timer = $timeout(function(){\r\n        init.get_controller_status(function(res){\r\n            if(res.is_control_node && !res.progress){\r\n                $timeout.cancel(timer);\r\n                loop_check();\r\n            }else{\r\n                loop_get_status();\r\n            }\r\n        });\r\n    },10000);\r\n}\r\nfunction formatIP(cidr){\r\n    var ip = cidr.split(\"/\")[0];\r\n    var masklen = Number(cidr.split(\"/\")[1]);\r\n    var binaryMask = 0xFFFFFFFF << (32 - masklen);\r\n    var arrmask = [];\r\n    for(var i = 32/8; i > 0 ;i--){\r\n        arrmask.push(binaryMask >>> 8 * (i-1) & 0xff);\r\n    }\r\n    return {\r\n        cidr:cidr,\r\n        ip:ip,\r\n        netmask:arrmask.join(\".\")\r\n    };\r\n}\r\nfunction setDefault(inter,ip){\r\n    $scope.console.manage_net = inter;\r\n    $scope.console.image_net = inter;\r\n    $scope.console.manage_ip = ip;\r\n    $scope.console.image_ip = ip;\r\n}\r\n}])\r\n.directive(\"initStep\", [\"init\",\"localize\",\"settings\",\"$$$version\",\"$$$I18N\",function(init,settings,$$$version,$$$I18N){\r\nreturn {\r\n    restrict: \"AE\",\r\n    scope:{\r\n        language:\"@\",\r\n         getInit:\"&\"\r\n     },\r\n    transclude:true,\r\n    replace:true,\r\n    template:'<div class=\"init\">\\\r\n                <aside id=\"left-panel\" class=\"left-panel\">\\\r\n                    <div class=\"logo-word\">VDI</div>\\\r\n                    <div class=\"step-list\">\\\r\n                        <header localize=\"\"></header>\\\r\n                        <ul>\\\r\n                            <li ng-repeat=\"step in steps\" ng-class=\"{on:$index < currentIdx}\"><i class=\"fa txt-color-greenjj icon-jj-Complete\" ></i>{{$index+1}} &nbsp;&nbsp;<span  localize=\"{{step.title}}\"></span></li>\\\r\n                        </ul>\\\r\n                    </div>\\\r\n                </aside>\\\r\n                <div id=\"main\" class=\"main\" >\\\r\n                    <header class=\"clearfix\">\\\r\n                        <h3  ng-repeat=\"step in steps\" ng-show=\"step.title === currentStep.title\" class=\"title pull-left\"><span localize=\"{{step.title}}\"></span></h3>\\\r\n                        <div class=\"pull-right\" data-lang-tool></div>\\\r\n                    </header>\\\r\n                    <div class=\"init-widget\" ng-transclude>\\\r\n                    </div>\\\r\n                </div>\\\r\n            </div>',\r\n    controller:[\"$scope\",\"$$$I18N\",\"$Domain\",function($scope,$$$I18N,$Domain){\r\n        var steps = $scope.steps =[];\r\n        $scope.btn = true;\r\n                \r\n        $scope.domain = $Domain;\r\n        $scope.version = $$$version;\r\n        \r\n        $scope.title = function(){\r\n            return $$$I18N.get($scope.currentStep.title);\r\n        }\r\n        $scope.btnName = function(){\r\n            return $$$I18N.get($scope.currentStep.btnName);\r\n        }\r\n        $scope.isLastStep = function(){\r\n            return $scope.currentIdx === steps.length - 1\r\n        };\r\n        // \r\n        $scope.initFunc = function(){\r\n            var promise = $scope.currentStep.initData();\r\n            angular.forEach(steps,function(s){ s.active = false})\r\n             $scope.currentStep.active = true;\r\n             $scope.btn = false;\r\n             if(promise){\r\n                promise && promise.then(function(){\r\n                    $scope.btn = true;\r\n                },function(){\r\n                    $scope.btn = false;\r\n                });\r\n             }else{\r\n                $scope.btn = true;\r\n             }\r\n             // $scope.$apply();\r\n        }\r\n        $scope.goStep = function(num){\r\n             if(typeof(num)==\"number\" && num < steps.length && num >= 0){\r\n                //\r\n                 $scope.currentIdx = num;\r\n                 $scope.currentStep = steps[$scope.currentIdx];\r\n                 $scope.initFunc();\r\n             }else if(num == \"-2\"){\r\n                 // \r\n                 var defer =  $scope.currentStep.postData();\r\n                 if(defer){\r\n                    defer.then(function(){\r\n                        $scope.currentIdx += 1;\r\n                        $scope.currentStep = steps[$scope.currentIdx];\r\n                        $scope.initFunc();\r\n                    });\r\n                 }else{\r\n                    $scope.currentIdx += 1;\r\n                    $scope.currentStep = steps[$scope.currentIdx];\r\n                    $scope.initFunc();\r\n                 }\r\n                 \r\n             }else if(num == \"-1\"){\r\n                //\r\n                 $scope.currentIdx = steps.length-1;\r\n                 $scope.currentStep = steps[$scope.currentIdx];\r\n                 $scope.initFunc();\r\n             }\r\n        };\r\n        $scope.getLang = function(str){\r\n            return $$$I18N.get(str);\r\n        };\r\n        $scope.$on('inituploadFinished',function(){\r\n            $scope.goStep(-2);\r\n        });\r\n\r\n        this.addStep = function(s){\r\n            if (steps.length === 0) {\r\n                 $scope.currentStep = s;\r\n             }\r\n             steps.push(s);\r\n        };              \r\n    }],\r\n    link: function(scope, element, attrs){\r\n        scope.currentIdx = -1;\r\n        element.css('display','block');\r\n            scope.$on('initGotoNext',function(e,num){\r\n                if(num){\r\n                    scope.goStep(num);\r\n                }else{\r\n                scope.goStep(-2);\r\n            }\r\n        });\r\n        scope.$on('initGotoLastStep',function(){\r\n            scope.goStep(-1);\r\n        });\r\n    }\r\n};\r\n}])\r\n.directive(\"stepCont\",[\"localize\",function(init){\r\nreturn {\r\n    restrict: \"AE\",\r\n    transclude:true,\r\n    replace:false,\r\n    require:\"^initStep\",\r\n    template:'<div class=\"step-cont\" aa=\"{{this.$id}}{{active}}\" ng-class=\"{active:active}\" ng-transclude></div>',\r\n    scope: {\r\n        title: '@',\r\n        btnName:'@',\r\n        langVersion:\"=\",\r\n        initData:'&initData',\r\n        postData:'&postData'\r\n    },\r\n    controller:function($scope){\r\n        $scope.active = false;\r\n    },\r\n    link: function(scope, element, attrs,initStepCtr){\r\n        initStepCtr.addStep(scope); \r\n    }\r\n};\r\n}])\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\nreturn {\r\n    restrict: \"AE\",\r\n    link: function(scope, element, attrs){\r\n        element.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n        scope.$on(\"localizeLanguageChanged\", function(){\r\n            element.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n        });\r\n    }\r\n};\r\n}])\r\n.directive('langTool',['localize','settings',function(localize,settings){\r\nreturn {\r\n    restrict: \"AE\",\r\n    template:'\\\r\n        <button style=\"margin-right:10px\" ng-show=\"show\" class=\"btn btn-primary\" ng-repeat=\"(key,lang) in versions\" ng-click=\"setLang(lang.key)\">{{lang.langDes}}</button>\\\r\n    ',\r\n    link: function(scope, element, attrs){\r\n        scope.versions = settings.languages.reduce(function(rtn,lang){\r\n            if(!rtn[lang.langType]){\r\n                rtn[lang.langType] = lang;\r\n            } \r\n            return rtn;\r\n        },{});\r\n        scope.show = Object.keys(scope.versions).length > 1;\r\n        scope.setLang = function(key){\r\n            settings.currentLang = settings.languages.filter(function(l) {return l.langCode === key})[0];\r\n            localize.setLang(settings.currentLang);\r\n        }; \r\n    }\r\n}\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/init.js","module.exports = {\"resource_template\":{\"key\":\"0\",\"title\":\"dev\"},\"resources\":[{\"key\":\"e-vdi\",\"name\":\"E-VDI\",\"title\":\"E-VDI\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"pc\",\"name\":\"PC\",\"title\":\"PC\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classCh\",\"name\":\"\",\"title\":\"\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classEn\",\"name\":\"Cloud Class\",\"title\":\"\",\"langType\":\"en\",\"langDes\":\"English\",\"clientKey\":\"public\",\"public\":true}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/info.json\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"app.controllers\", [])\r\n\r\n.controller(\"PageViewController\", [\"$scope\", \"$route\", \"$animate\", function($scope, $route, $animate) {\r\n\t// controler of the dynamically loaded views, for DEMO purposes only.\r\n\t// $scope.$on(\"$viewContentLoaded\", function() {\r\n\t// \tconsole.log(\"ffffffff\")\r\n\t// })\r\n}])\r\n.controller(\"LangController\", [\"$scope\", \"settings\", \"localize\", function($scope, settings, localize) {\r\n\t$scope.languages = settings.languages;\r\n\t$scope.currentLang = settings.currentLang || $scope.languages[0];\r\n\t$scope.setLang = function(lang) {\r\n\t\tsettings.currentLang = lang;\r\n\t\t$scope.currentLang = lang;\r\n\t\tlocalize.setLang(lang);\r\n\t\t$$$storage.setSessionStorage('lang_code', lang.langCode)\r\n\t};\r\n\t// set the default language\r\n\t$scope.setLang($scope.currentLang);\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.controllers.js","angular.module('app.main', [])\r\n// initiate body\r\n.directive('body', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\telement.on('click', 'a[href=\"#\"], [data-toggle]', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.factory('ribbon', ['$rootScope', function($rootScope) {\r\n\tvar ribbon = {\r\n\t\tcurrentBreadcrumb: [],\r\n\t\tupdateBreadcrumb: function(crumbs) {\r\n\t\t\tvar breadCrumb = crumbs.reverse();\r\n\t\t\tribbon.currentBreadcrumb = breadCrumb;\r\n\t\t\t$rootScope.$broadcast('navItemSelected', breadCrumb);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ribbon;\r\n}])\r\n\r\n.directive('action', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t/*\r\n\t\t\t * SMART ACTIONS\r\n\t\t\t */\r\n\t\t\tvar smartActions = {\r\n    \r\n\t\t\t    // LOGOUT MSG \r\n\t\t\t    userLogout: function($this){\r\n\t\t\t\r\n\t\t\t\t\t// ask verification\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>\" + $('#show-shortcut').text() + \"</strong></span> ?\",\r\n\t\t\t\t\t\tcontent : $this.data('logout-msg') || \"You can improve your security further after logging out by closing this opened browser\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\") {\r\n\t\t\t\t\t\t\t$.root_.addClass('animated fadeOutUp');\r\n\t\t\t\t\t\t\tsetTimeout(logout, 1000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfunction logout() {\r\n\t\t\t\t\t\twindow.location = $this.attr('href');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// RESET WIDGETS\r\n\t\t\t    resetWidgets: function($this){\r\n\t\t\t\t\t$.widresetMSG = $this.data('reset-msg');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage\",\r\n\t\t\t\t\t\tcontent : $.widresetMSG || \"Would you like to RESET all your saved widgets and clear LocalStorage?\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\" && localStorage) {\r\n\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // LAUNCH FULLSCREEN \r\n\t\t\t    launchFullscreen: function(element){\r\n\t\t\t\r\n\t\t\t\t\tif (!$.root_.hasClass(\"full-screen\")) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t$.root_.addClass(\"full-screen\");\r\n\t\t\t\t\r\n\t\t\t\t\t\tif (element.requestFullscreen) {\r\n\t\t\t\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t\t\t} else if (element.mozRequestFullScreen) {\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t\t\t} else if (element.webkitRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t\t\t} else if (element.msRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.root_.removeClass(\"full-screen\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\t\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t\t\t} else if (document.webkitExitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t   },\r\n\t\t\t\r\n\t\t\t   // MINIFY MENU\r\n\t\t\t    minifyMenu: function($this){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$.root_.toggleClass(\"minified\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$this.effect(\"highlight\", {}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // TOGGLE MENU \r\n\t\t\t    toggleMenu: function(){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t} else if ( $.root_.hasClass(\"menu-on-top\") && $.root_.hasClass(\"mobile-view-activated\") ) {\r\n\t\t\t    \t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t}\r\n\t\t\t    },     \r\n\t\t\t\r\n\t\t\t    // TOGGLE SHORTCUT \r\n\t\t\t    toggleShortcut: function(){\r\n\t\t\t    \t\r\n\t\t\t\t\tif (shortcut_dropdown.is(\":visible\")) {\r\n\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshortcut_buttons_show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// SHORT CUT (buttons that appear when clicked on user name)\r\n\t\t\t\t\tshortcut_dropdown.find('a').click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.location = $(this).attr('href');\r\n\t\t\t\t\t\tsetTimeout(shortcut_buttons_hide, 300);\r\n\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT buttons goes away if mouse is clicked outside of the area\r\n\t\t\t\t\t$(document).mouseup(function(e) {\r\n\t\t\t\t\t\tif (!shortcut_dropdown.is(e.target) && shortcut_dropdown.has(e.target).length === 0) {\r\n\t\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE HIDE\r\n\t\t\t\t\tfunction shortcut_buttons_hide() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"hide\"\r\n\t\t\t\t\t\t}, 300, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.removeClass('shortcut-on');\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE SHOW\r\n\t\t\t\t\tfunction shortcut_buttons_show() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"show\"\r\n\t\t\t\t\t\t}, 200, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.addClass('shortcut-on');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t    }  \r\n\t\t\t   \r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar actionEvents = {\r\n\t\t\t\tuserLogout: function(e) {\r\n\t\t\t\t\tsmartActions.userLogout(element);\r\n\t\t\t\t},\r\n\t\t\t\tresetWidgets: function(e) {\r\n\t\t\t\t\tsmartActions.resetWidgets(element);\r\n\t\t\t\t},\r\n\t\t\t\tlaunchFullscreen: function(e) {\r\n\t\t\t\t\tsmartActions.launchFullscreen(document.documentElement);\r\n\t\t\t\t},\r\n\t\t\t\tminifyMenu: function(e) {\r\n\t\t\t\t\tsmartActions.minifyMenu(element);\r\n\t\t\t\t},\r\n\t\t\t\ttoggleMenu: function(e) {\r\n\t\t\t\t\tsmartActions.toggleMenu();\r\n\t\t\t\t},\r\n\t\t\t\ttoggleShortcut: function(e) {\r\n\t\t\t\t\tsmartActions.toggleShortcut();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (angular.isDefined(attrs.action) && attrs.action != '') {\r\n\t\t\t\tvar actionEvent = actionEvents[attrs.action];\r\n\t\t\t\tif (typeof actionEvent === 'function') {\r\n\t\t\t\t\telement.on('click', function(e) {\r\n\t\t\t\t\t\tactionEvent(e);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('header', function() {\r\n\treturn {\r\n\t\trestrict: 'EA',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t// SHOW & HIDE MOBILE SEARCH FIELD\r\n\t\t\tangular.element('#search-mobile').click(function() {\r\n\t\t\t\t$.root_.addClass('search-mobile');\r\n\t\t\t});\r\n\r\n\t\t\tangular.element('#cancel-search-js').click(function() {\r\n\t\t\t\t$.root_.removeClass('search-mobile');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('ribbon', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\treturn;\r\n\t\t\telement.append('<div class=\"demo\"><span id=\"demo-setting\"><i class=\"fa fa-cog txt-color-blueDark\"></i></span> <form><legend class=\"no-padding margin-bottom-10\">Layout Options</legend><section><label><input name=\"subscription\" id=\"smart-fixed-header\" type=\"checkbox\" class=\"checkbox style-0\"><span>Fixed Header</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-navigation\" class=\"checkbox style-0\"><span>Fixed Navigation</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-ribbon\" class=\"checkbox style-0\"><span>Fixed Ribbon</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-footer\" class=\"checkbox style-0\"><span>Fixed Footer</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-container\" class=\"checkbox style-0\"><span>Inside <b>.container</b> <div class=\"font-xs text-right\">(non-responsive)</div></span></label><label style=\"display:block;\"><input type=\"checkbox\" id=\"smart-topmenu\" class=\"checkbox style-0\"><span>Menu on <b>top</b></span></label> <span id=\"smart-bgimages\"></span></section><section><h6 class=\"margin-top-10 semi-bold margin-bottom-5\">Clear Localstorage</h6><a href=\"javascript:void(0);\" class=\"btn btn-xs btn-block btn-primary\" id=\"reset-smart-widget\"><i class=\"fa fa-refresh\"></i> Factory Reset</a></section> <h6 class=\"margin-top-10 semi-bold margin-bottom-5\">SmartAdmin Skins</h6><section id=\"smart-styles\"><a href=\"javascript:void(0);\" id=\"smart-style-0\" data-skinlogo=\"img/logo.png\" class=\"btn btn-block btn-xs txt-color-white margin-right-5\" style=\"background-color:#4E463F;\"><i class=\"fa fa-check fa-fw\" id=\"skin-checked\"></i>Smart Default</a><a href=\"javascript:void(0);\" id=\"smart-style-1\" data-skinlogo=\"img/logo-white.png\" class=\"btn btn-block btn-xs txt-color-white\" style=\"background:#3A4558;\">Dark Elegance</a><a href=\"javascript:void(0);\" id=\"smart-style-2\" data-skinlogo=\"img/logo-blue.png\" class=\"btn btn-xs btn-block txt-color-darken margin-top-5\" style=\"background:#fff;\">Ultra Light</a><a href=\"javascript:void(0);\" id=\"smart-style-3\" data-skinlogo=\"img/logo-pale.png\" class=\"btn btn-xs btn-block txt-color-white margin-top-5\" style=\"background:#f78c40\">Google Skin</a></section></form> </div>')\r\n\r\n\t\t\t// hide bg options\r\n\t\t\tvar smartbgimage = \"<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>\";\r\n\t\t\t$(\"#smart-bgimages\")\r\n\t\t\t    .fadeOut();\r\n\r\n\t\t\t$('#demo-setting')\r\n\t\t\t    .click(function () {\r\n\t\t\t        $('#ribbon .demo')\r\n\t\t\t            .toggleClass('activate');\r\n\t\t\t    })\r\n\t\t\t/*\r\n\t\t\t * FIXED HEADER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\r\n\t\t\t            $.root_.removeClass(\"fixed-header\");\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED NAV\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED RIBBON\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            //apply\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.addClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-footer')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-page-footer\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-page-footer\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-rtl')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"smart-rtl\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"smart-rtl\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * MENU ON TOP\r\n\t\t\t */\r\n\r\n\t\t\t$('#smart-topmenu')\r\n\t\t\t    .on('change', function (e) {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .prop('checked')) {\r\n\t\t\t            //window.location.href = '?menu=top';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'top');\r\n\t\t\t            location.reload();\r\n\t\t\t        } else {\r\n\t\t\t            //window.location.href = '?';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'left');\r\n\t\t\t            location.reload();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\tif (localStorage.getItem('sm-setmenu') == 'top') {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', true);\r\n\t\t\t} else {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', false);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * INSIDE CONTAINER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"container\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\r\n\t\t\t            if (smartbgimage) {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .append(smartbgimage)\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t                $(\"#smart-bgimages img\")\r\n\t\t\t                    .bind(\"click\", function () {\r\n\t\t\t                        var $this = $(this);\r\n\t\t\t                        var $html = $('html')\r\n\t\t\t                        bgurl = ($this.data(\"htmlbg-url\"));\r\n\t\t\t                        $html.css(\"background-image\", \"url(\" + bgurl + \")\");\r\n\t\t\t                    })\r\n\t\t\t                smartbgimage = null;\r\n\t\t\t            } else {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t            }\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\t\t\t            $(\"#smart-bgimages\")\r\n\t\t\t                .fadeOut();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * REFRESH WIDGET\r\n\t\t\t */\r\n\t\t\t$(\"#reset-smart-widget\")\r\n\t\t\t    .bind(\"click\", function () {\r\n\t\t\t        $('#refresh')\r\n\t\t\t            .click();\r\n\t\t\t        return false;\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * STYLES\r\n\t\t\t */\r\n\t\t\t$(\"#smart-styles > a\")\r\n\t\t\t   .on('click', function() {\r\n\t\t\t        var $this = $(this);\r\n\t\t\t        var $logo = $(\"#logo img\");\r\n\t\t\t        $.root_.removeClassPrefix('smart-style')\r\n\t\t\t            .addClass($this.attr(\"id\"));\r\n\t\t\t        $logo.attr('src', $this.data(\"skinlogo\"));\r\n\t\t\t        $(\"#smart-styles > a #skin-checked\")\r\n\t\t\t            .remove();\r\n\t\t\t        $this.prepend(\"<i class='fa fa-check fa-fw' id='skin-checked'></i>\");\r\n\t\t\t    });\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('breadcrumbController', ['$scope', function($scope) {\r\n\t$scope.breadcrumbs = [];\r\n\t$scope.$on('navItemSelected', function(name, crumbs) {\r\n\t\t$scope.setBreadcrumb(crumbs);\r\n\t});\r\n\r\n\t$scope.setBreadcrumb = function(crumbs) {\r\n\t\t$scope.breadcrumbs = crumbs;\r\n\t}\r\n}])\r\n\r\n.directive('breadcrumb', ['ribbon', 'localize', '$compile', function(ribbon, localize, $compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'breadcrumbController',\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.$watch('breadcrumbs', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal !== oldVal || !element.text()) {\r\n\t\t\t\t\t// update DOM\r\n\t\t\t\t\tscope.updateDOM();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tscope.updateDOM = function() {\r\n\t\t\t\telement.empty();\r\n\t\t\t\tangular.forEach(scope.breadcrumbs, function(crumb) {\r\n\t\t\t\t\tvar li = angular.element('<li data-localize=\"' + crumb + '\">' + crumb + '</li>');\r\n\t\t\t\t\tli.text(localize.localizeText(crumb));\r\n\t\t\t\t\t\r\n\t\t\t\t\t$compile(li)(scope);\r\n\t\t\t\t\telement.append(li);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// set the current breadcrumb on load\r\n\t\t\tscope.setBreadcrumb(ribbon.currentBreadcrumb);\r\n\t\t\tscope.updateDOM();\r\n\t\t},\r\n\t\ttemplate: '<ol class=\"breadcrumb\"></ol>'\r\n\t}\r\n}])\r\n;\r\n\r\n// directives for localization\r\nangular.module('app.localize', [])\r\n.factory('localize', ['$http', '$rootScope', '$window', \"settings\", \"$RESOURCE\", function($http, $rootScope, $window, settings, $RESOURCE){\r\n\t// shared variables for `translate`\r\n\tvar encodeHTML = function(txt){\r\n\t\treturn txt.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t}\r\n\tvar tmplReg = /\\{\\{([^\\}]+)\\}\\}/g;\r\n\tvar interestAttrReg = /^param\\d+$/;\r\n\t// internal flag\r\n\tvar ready = false;\r\n\t// factory\r\n\tvar localize = {\r\n\t\tcurrentLocaleData: {},\r\n\t\tcurrentLang: {},\r\n\t\tsetLang: function(lang) {\r\n\t\t\tif(!lang){\r\n\t\t\t\tlang = settings.languages[0];\r\n\t\t\t}\r\n\t\t\t$RESOURCE.load(lang.key, function(data){\r\n\t\t\t\tlocalize.currentLocaleData = data.lang;\r\n\t\t\t\tlocalize.currentLang = lang;\r\n\t\t\t\tready = true;\r\n\t\t\t\t$rootScope.$broadcast('localizeLanguageChanged');\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetLangUrl: function(lang) {\r\n\t\t\treturn \"resources/pkg/\" + lang.langCode + \"/lang.js\";\r\n\t\t},\r\n\r\n\t\tlocalizeText: function(sourceText) {\r\n\t\t\treturn localize.currentLocaleData[sourceText];\r\n\t\t},\r\n\t\ttranslate: function(scope, element, attrs, transkey){\r\n\t\t\tvar onAttrChange = function(e){\r\n\t\t\t\tif(!ready) { return; }\r\n\t\t\t\tvar tmpl = localize.localizeText(attrs[transkey]);\r\n\t\t\t\t// \r\n\t\t\t\tif(!tmpl) {\r\n\t\t\t\t\t// debug\r\n\t\t\t\t\t// return console.error(\"invalid \" + transkey + \"=\\\"\" + attrs[transkey] + \"\\\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar myhtml = tmplReg.test(tmpl) ? tmpl.replace(tmplReg, function(match, index){\r\n\t\t\t\t\tvar myattr = \"param\" + index;\r\n\t\t\t\t\tvar value = attrs[myattr];\r\n\t\t\t\t\treturn encodeHTML(value);\r\n\t\t\t\t}) : tmpl;\r\n\t\t\t\tswitch(transkey) {\r\n\t\t\t\t\tcase \"localize\":\r\n\t\t\t\t\t\tif(element.is(\"input, textarea\")){\r\n\t\t\t\t\t\t\telement.attr(\"placeholder\", myhtml);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.html(myhtml);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"localizeHref\":\r\n\t\t\t\t\t\telement.attr(\"href\", myhtml); break;\r\n\t\t\t\t\tcase \"localizeTitle\":\r\n\t\t\t\t\t\telement.attr(\"title\", myhtml); break;\r\n\t\t\t\t\tcase \"localizePlaceholder\":\r\n\t\t\t\t\t\telement.attr(\"placeholder\", myhtml); break;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tangular.forEach(attrs, function(v, k){\r\n\t\t\t\tif(interestAttrReg.test(k)) {\r\n\t\t\t\t\tattrs.$observe(k, onAttrChange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(ready) {\r\n\t\t\t\tonAttrChange();\r\n\t\t\t}\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", onAttrChange);\r\n\t\t},\r\n\t\tisReady: function(){\r\n\t\t\treturn ready;\r\n\t\t}\r\n\t};\r\n\r\n\treturn localize;\r\n}])\r\n.directive('localize', ['localize', function(localize) {\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localize\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeTitle\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeTitle\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizePlaceholder\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizePlaceholder\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeHref\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeHref\");\r\n\t\t}\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for navigation\r\nangular.module('app.navigation', [])\r\n.directive('navigation', [\"$timeout\",  function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: ['$scope', function($scope) {\r\n\t\t\t//$scope.version = $$$version;\r\n\t\t}],\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar timer = null;\r\n\t\t\tlet timer_handle = function(){\r\n\t\t\t\tif (!topmenu) {\r\n\t\t\t\t\tif (!null) {\r\n\t\t\t\t\t\telement.first().jarvismenu({\r\n\t\t\t\t\t\t\taccordion : true,\r\n\t\t\t\t\t\t\tspeed : $.menu_speed,\r\n\t\t\t\t\t\t\tclosedSign : '<em class=\"fa icon-jj-xiala\"></em>',\r\n\t\t\t\t\t\t\topenedSign : '<em class=\"fa icon-jj-sou\"></em>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//alert(\"Error - menu anchor does not exist\");\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle : \"Error\",\r\n\t\t\t\t\t\t\tcontent : \"menu anchor does not exist\",\r\n\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\tnumber : \"1\",\r\n\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SLIMSCROLL FOR NAV\r\n\t\t\t\tif ($.fn.slimScroll) {\r\n\t\t\t\t\telement.slimScroll({\r\n\t\t\t\t        height: '100%'\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getElement = function() {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tscope.$on(\"updateNavData\", function(name, navs){\r\n\t\t\t\tscope.navs = navs;\r\n\t\t\t});\r\n\t\t\tscope.$on(\"renderNavItem\", function(name){\r\n\t\t\t\t$timeout.cancel(timer);\r\n\t\t\t\ttimer = $timeout(timer_handle, 100);\r\n\t\t\t});\r\n\t\t},\r\n\t\ttemplate: \"<nav><ul data-ng-transclude></ul></nav>\"\r\n\t};\r\n}])\r\n\r\n\r\n.controller('NavItemController', ['$rootScope', '$scope', '$location', function($rootScope, $scope, $location) {\r\n\t$scope.isChild = false;\r\n\t$scope.active = false;\r\n\t$scope.isActive = function (viewLocation) {\r\n        $scope.active = viewLocation === $location.path();\r\n        return $scope.active;\r\n    };\r\n    $scope.hasIcon = angular.isDefined($scope.icon);\r\n    $scope.hasIconCaption = angular.isDefined($scope.iconCaption);\r\n\r\n    $scope.getItemUrl = function(view) {\r\n    \tif (angular.isDefined($scope.href)) return $scope.href;\r\n    \tif (!angular.isDefined(view)) return '';\r\n    \treturn '#' + view;\r\n    };\r\n\r\n    $scope.getItemTarget = function() {\r\n    \treturn angular.isDefined($scope.target) ? $scope.target : '_self';\r\n    };\r\n\t$scope.$emit(\"renderNavItem\");\r\n\r\n}])\r\n.directive('navItem', ['ribbon', \"$rootScope\", function(ribbon, $root) {\r\n\treturn {\r\n\t\trequire: ['^navigation'],\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'NavItemController',\r\n\t\tscope: {\r\n\t\t\ttitle: '@navTitle',\r\n\t\t\tview: '@',\r\n\t\t\ticon: '@',\r\n\t\t\ticonCaption: '@',\r\n\t\t\thref: '@',\r\n\t\t\ttarget: '@'\r\n\t\t},\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar navCtrl = parentCtrls[0],\r\n\t\t\t\tnavgroupCtrl = parentCtrls[1];\r\n\t\t\tif(attrs.view){\r\n\t\t\t\telement.find(\"ul\").remove();\r\n\t\t\t}\r\n\t\t\tscope.$watch('active', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(true);\r\n\t\t\t\t\t$root.$broadcast(\"updateDocumentTitle\", scope.title);\r\n\t\t\t\t\tscope.setBreadcrumb();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tscope.openParents = scope.isActive(scope.view);\r\n\t\t\tscope.isChild = angular.isDefined(navgroupCtrl);\r\n\t\t\t\r\n\t\t\tscope.setBreadcrumb = function() {\r\n    \t\t\tvar crumbs = [];\r\n    \t\t\tcrumbs.push(scope.title);\r\n    \t\t\t// get parent menus\r\n\t\t\t\tvar test = element.parents('nav li').each(function() {\r\n\t\t\t\t\tvar el = angular.element(this);\r\n\t\t\t\t\tvar parent = el.find('.menu-item-parent:eq(0)');\r\n\t\t\t\t\tcrumbs.push(parent.data('localize').trim());\r\n\t\t\t\t\tif (scope.openParents) {\r\n\t\t\t\t\t\t// open menu on first load\r\n\t\t\t\t\t\tparent.trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// this should be only fired upon first load so let's set this to false now\r\n\t\t\t\tscope.openParents = false;\r\n\t\t\t\tribbon.updateBreadcrumb(crumbs);\r\n    \t\t};\r\n\r\n    \t\telement.on('click', 'a[href!=\"#\"]', function() {\r\n    \t\t\tif ($.root_.hasClass('mobile-view-activated')) {\r\n    \t\t\t\t$.root_.removeClass('hidden-menu');\r\n    \t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: `\r\n\t\t\t<li data-ng-class=\"{active: isActive(view)}\">\r\n\t\t\t\t<a href=\"{{ getItemUrl(view) }}\" target=\"{{ getItemTarget() }}\">\r\n\t\t\t\t\t<i data-ng-if=\"hasIcon\" class=\"{{ icon }}\"><em data-ng-if=\"hasIconCaption\"> {{ iconCaption }} </em></i>\r\n\t\t\t\t\t<span ng-class=\"{'menu-item-parent': !isChild}\" data-localize=\"{{ title }}\"></span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<ul data-ng-transclude=\"\"></ul>\r\n\t\t\t</li>`\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for activity\r\nangular.module('app.activity', [])\r\n.controller('ActivityController', ['$scope', '$http' , function($scope, $http) {\r\n\tvar ctrl = this,\r\n\t\titems = ctrl.items = $scope.items = [];\r\n\r\n\tctrl.loadItem = function(loadedItem, callback) {\r\n\t\tangular.forEach(items, function(item) {\r\n\t      \tif (item.active && item !== loadedItem) {\r\n\t        \titem.active = false;\r\n\t        \t//item.onDeselect();\r\n\t      \t}\r\n\t    });\r\n\r\n\t\tloadedItem.active = true;\r\n\t\tif (angular.isDefined(loadedItem.onLoad)) {\r\n\t\t\tloadedItem.onLoad(loadedItem);\r\n\t\t}\r\n\r\n\t\t$http.get(loadedItem.src).then(function(result) {\r\n\t\t\tvar content = result.data;\r\n\t\t\tif (angular.isDefined(callback)) {\r\n\t\t\t\tcallback(content);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tctrl.addItem = function(item) {\r\n\t\titems.push(item);\r\n\t\tif (!angular.isDefined(item.active)) {\r\n\t\t\t// set the default\r\n\t\t\titem.active = false;\r\n\t\t} else if (item.active) {\r\n\t\t\tctrl.loadItem(item);\r\n\t\t}\r\n\t};\r\n\r\n\tctrl.refresh = function(e) {\r\n\t\tvar btn = angular.element(e.currentTarget);\r\n\t\tbtn.button('loading');\r\n\r\n\t\tif (angular.isDefined($scope.onRefresh)) {\r\n\t\t\t$scope.onRefresh($scope, function() {\r\n\t\t\t\tbtn.button('reset');\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbtn.button('reset');\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activity', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: 'ActivityController',\r\n\t\tscope: {\r\n\t\t\tonRefresh: '=onrefresh',\r\n\t\t},\r\n\t\ttemplate: '<span data-ng-transclude=\"\"></span>'\r\n\t};\r\n})\r\n\r\n.directive('activityButton', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: function($scope) {\r\n\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\ticon: '@',\r\n\t\t\ttotal: '='\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t\t<span id=\"activity\" class=\"activity-dropdown\">\\\r\n\t\t\t\t\t<i ng-class=\"icon\"></i>\\\r\n\t\t\t\t\t<b class=\"badge\"> {{ total }} </b>\\\r\n\t\t\t\t</span>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\r\n\t\t\tattrs.$observe('icon', function(value) {\r\n\t\t\t\tif (!angular.isDefined(value))\r\n\t\t\t\t\tscope.icon = 'fa fa-user';\r\n\t\t\t});\r\n\r\n\t\t\telement.on('click', function(e) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\tif ($this.find('.badge').hasClass('bg-color-red')) {\r\n\t\t\t\t\t$this.find('.badge').removeClassPrefix('bg-color-');\r\n\t\t\t\t\t$this.find('.badge').text(\"0\");\r\n\t\t\t\t\t// console.log(\"Ajax call for activity\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$this.next('.ajax-dropdown').is(':visible')) {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeIn(150);\r\n\t\t\t\t\t$this.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeOut(150);\r\n\t\t\t\t\t$this.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mytest = $this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tif (scope.total > 0) {\r\n\t\t\t\tvar $badge = element.find('.badge');\r\n\t\t\t\t$badge.addClass(\"bg-color-red bounceIn animated\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('ActivityContentController', ['$scope' , function($scope) {\r\n\tvar ctrl = this;\r\n\t$scope.currentContent = '';\r\n\tctrl.loadContent = function(content) {\r\n\t\t$scope.currentContent = content;\r\n\t}\r\n}])\r\n\r\n.directive('activityContent', ['$compile', function($compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tfooter: '=?'\r\n\t\t},\r\n\t\tcontroller: 'ActivityContentController',\r\n\t\ttemplate: '\\\r\n\t\t\t<div class=\"ajax-dropdown\">\\\r\n\t\t\t\t<div class=\"btn-group btn-group-justified\" data-toggle=\"buttons\" data-ng-transclude=\"\"></div>\\\r\n\t\t\t\t<div class=\"ajax-notifications custom-scroll\">\\\r\n\t\t\t\t\t<div class=\"alert alert-transparent\">\\\r\n\t\t\t\t\t\t<h4>Click a button to show messages here</h4>\\\r\n\t\t\t\t\t\tThis blank page message helps protect your privacy, or you can show the first message here automatically.\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t<i class=\"fa fa-lock fa-4x fa-border\"></i>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<span> {{ footer }}\\\r\n\t\t\t\t\t<button type=\"button\" data-loading-text=\"Loading...\" data-ng-click=\"refresh($event)\" class=\"btn btn-xs btn-default pull-right\" data-activty-refresh-button=\"\">\\\r\n\t\t\t\t\t<i class=\"fa fa-refresh\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</div>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\t\t\tscope.refresh = function(e) {\r\n\t\t\t\tactivityCtrl.refresh(e);\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('currentContent', function(newContent, oldContent) {\r\n\t\t\t\tif (newContent !== oldContent) {\r\n\t\t\t\t\tvar el = element.find('.ajax-notifications').html(newContent);\r\n\t\t\t\t\t$compile(el)(scope);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activityItem', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: ['^activity', '^activityContent'],\r\n\t\tscope: {\r\n\t\t\tsrc: '=',\r\n\t\t\tonLoad: '=onload',\r\n\t\t\tactive: '=?'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '\\\r\n\t\t\t<label class=\"btn btn-default\" data-ng-click=\"loadItem()\" ng-class=\"{active: active}\">\\\r\n\t\t\t\t<input type=\"radio\" name=\"activity\">\\\r\n\t\t\t\t<span data-ng-transclude=\"\"></span>\\\r\n\t\t\t</label>',\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar activityCtrl = parentCtrls[0],\r\n\t\t\t\tcontentCtrl = parentCtrls[1];\r\n\r\n\t\t\tscope.$watch('active', function(active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tactivityCtrl.loadItem(scope, function(content) {\r\n\t\t\t\t\t\tcontentCtrl.loadContent(content);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactivityCtrl.addItem(scope);\r\n\r\n\t\t\tscope.loadItem = function() {\r\n\t\t\t\tscope.active = true;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n})\r\n;\r\n\r\nangular.module('app.smartui', [])\r\n.directive('widgetGrid', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.setup_widget_desktop = function() {\r\n\t\t\t\tif ($.fn.jarvisWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\telement.jarvisWidgets({\r\n\t\t\t\t\t\tgrid : 'article',\r\n\t\t\t\t\t\twidgets : '.jarviswidget',\r\n\t\t\t\t\t\tlocalStorage : true,\r\n\t\t\t\t\t\tdeleteSettingsKey : '#deletesettingskey-options',\r\n\t\t\t\t\t\tsettingsKeyLabel : 'Reset settings?',\r\n\t\t\t\t\t\tdeletePositionKey : '#deletepositionkey-options',\r\n\t\t\t\t\t\tpositionKeyLabel : 'Reset position?',\r\n\t\t\t\t\t\tsortable : true,\r\n\t\t\t\t\t\tbuttonsHidden : false,\r\n\t\t\t\t\t\t// toggle button\r\n\t\t\t\t\t\ttoggleButton : true,\r\n\t\t\t\t\t\ttoggleClass : 'fa fa-minus | fa fa-plus',\r\n\t\t\t\t\t\ttoggleSpeed : 200,\r\n\t\t\t\t\t\tonToggle : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// delete btn\r\n\t\t\t\t\t\tdeleteButton : true,\r\n\t\t\t\t\t\tdeleteClass : 'fa fa-times',\r\n\t\t\t\t\t\tdeleteSpeed : 200,\r\n\t\t\t\t\t\tonDelete : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// edit btn\r\n\t\t\t\t\t\teditButton : true,\r\n\t\t\t\t\t\teditPlaceholder : '.jarviswidget-editbox',\r\n\t\t\t\t\t\teditClass : 'fa fa-cog | fa fa-save',\r\n\t\t\t\t\t\teditSpeed : 200,\r\n\t\t\t\t\t\tonEdit : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// color button\r\n\t\t\t\t\t\tcolorButton : true,\r\n\t\t\t\t\t\t// full screen\r\n\t\t\t\t\t\tfullscreenButton : true,\r\n\t\t\t\t\t\tfullscreenClass : 'fa fa-expand | fa fa-compress',\r\n\t\t\t\t\t\tfullscreenDiff : 3,\r\n\t\t\t\t\t\tonFullscreen : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// custom btn\r\n\t\t\t\t\t\tcustomButton : false,\r\n\t\t\t\t\t\tcustomClass : 'folder-10 | next-10',\r\n\t\t\t\t\t\tcustomStart : function() {\r\n\t\t\t\t\t\t\talert('Hello you, this is a custom button...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcustomEnd : function() {\r\n\t\t\t\t\t\t\talert('bye, till next time...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// order\r\n\t\t\t\t\t\tbuttonOrder : '%refresh% %custom% %edit% %toggle% %fullscreen% %delete%',\r\n\t\t\t\t\t\topacity : 1.0,\r\n\t\t\t\t\t\tdragHandle : '> header',\r\n\t\t\t\t\t\tplaceholderClass : 'jarviswidget-placeholder',\r\n\t\t\t\t\t\tindicator : true,\r\n\t\t\t\t\t\tindicatorTime : 600,\r\n\t\t\t\t\t\tajax : true,\r\n\t\t\t\t\t\ttimestampPlaceholder : '.jarviswidget-timestamp',\r\n\t\t\t\t\t\ttimestampFormat : 'Last update: %m%/%d%/%y% %h%:%i%:%s%',\r\n\t\t\t\t\t\trefreshButton : true,\r\n\t\t\t\t\t\trefreshButtonClass : 'fa fa-refresh',\r\n\t\t\t\t\t\tlabelError : 'Sorry but there was a error:',\r\n\t\t\t\t\t\tlabelUpdated : 'Last Update:',\r\n\t\t\t\t\t\tlabelRefresh : 'Refresh',\r\n\t\t\t\t\t\tlabelDelete : 'Delete widget:',\r\n\t\t\t\t\t\tafterLoad : function() { },\r\n\t\t\t\t\t\trtl : false, // best not to toggle this!\r\n\t\t\t\t\t\tonChange : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonSave : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajaxnav : $.navAsAjax // declears how the localstorage should be saved (HTML or AJAX page)\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscope.setup_widget_mobile = function() {\r\n\t\t\t\tif ($.enableMobileWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\tscope.setup_widgets_desktop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($.device === \"desktop\") {\r\n\t\t\t\tscope.setup_widget_desktop();\r\n\t\t\t} else {\r\n\t\t\t\tscope.setup_widget_mobile();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.directive('widget', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetHeader', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\ttitle: '@',\r\n\t\t\ticon: '@'\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t<header>\\\r\n\t\t\t\t<span class=\"widget-icon\"> <i data-ng-class=\"icon\"></i> </span>\\\r\n\t\t\t\t<h2>{{ title }}</h2>\\\r\n\t\t\t\t<span data-ng-transclude></span>\\\r\n\t\t\t</header>'\r\n\t}\r\n})\r\n\r\n.directive('widgetToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetEditbox', function() {\r\n\treturn {\r\n\t\trestrict: 'AE', \r\n\t\ttransclude: true, \r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget-editbox\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBody', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBodyToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tclass: '@'\r\n\t\t},\r\n\t\ttemplate: '<div class=\"widget-body-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetContent', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-body\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\n\treturn {\r\n\t\trestrict: \"AE\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", function(){\r\n\t\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('textareaEmail', [function(){\r\n\treturn {\r\n\t\trequire: 'ngModel',\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, iElm, iAttrs, controller) {\r\n\t\t\tvar modelCtrl = controller;\r\n\t\t\tfunction validate(val){\r\n\t\t\t\tvar vals = Array.isArray(val) ? val : [val];\r\n\t\t\t\tvar reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n\t\t\t\tvar isvalide = vals.every(function(v){ return reg.test(v)});\r\n\t\t\t\treturn isvalide;\r\n\t\t\t}\r\n\t\t\tfunction parser(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value.split('\\n').reduce(function(arr,b){\r\n\t\t\t\t\t\tif(b.trim().length){\r\n\t\t\t\t\t\t\tarr.push(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t},[]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction formatter(value){\r\n\t\t\t\treturn validate(value) ? value.join(\"\\n\") : undefined;\r\n\t\t\t}\r\n\t\t\tfunction viewChangeListener(){\r\n\t\t\t\tmodelCtrl.$setValidity('email',validate(modelCtrl.$modelValue));\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$isEmpty = function(val){\r\n\t\t\t\tif(Array.isArray(val) && val.length === 0){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif(!val){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$parsers.push(parser);\r\n\t\t\tmodelCtrl.$formatters.push(formatter);\r\n\t\t\tmodelCtrl.$viewChangeListeners.push(viewChangeListener);\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('schedulerInput',['$rootScope',function($rootScope){\r\n\treturn {\r\n\t    require: \"ngModel\",\r\n\t    link: function(scope,element,attrs,ngModel){\r\n\t    \t$rootScope.$broadcast('matchInput', true);\r\n\t        element.bind('keyup',function(value){\r\n\t            // var isValid = this.value.match(/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/);\r\n\t            var isValid = this.value.match(/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/);\r\n\t            $rootScope.$broadcast('matchInput', isValid);\r\n\t        });\r\n\t    }\r\n\t}\r\n}])\r\n.service(\"formDate\",[function(){\r\n\tthis.format = function(date, fmt){\r\n\t\tvar o = {\r\n\t\t  \"M+\" : date.getMonth()+1,                 //   \r\n\t\t  \"d+\" : date.getDate(),                    //   \r\n\t\t  \"h+\" : date.getHours(),                   //   \r\n\t\t  \"m+\" : date.getMinutes(),                 //   \r\n\t\t  \"s+\" : date.getSeconds(),                 //   \r\n\t\t  \"q+\" : Math.floor((date.getMonth()+3)/3), //   \r\n\t\t  \"S\"  : date.getMilliseconds()             //   \r\n\t\t};   \r\n\t\tif(/(y+)/.test(fmt))   \r\n\t\t  fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \r\n\t\tfor(var k in o)   \r\n\t\t  if(new RegExp(\"(\"+ k +\")\").test(fmt))   \r\n\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \r\n\t\treturn fmt;\r\n\t}\r\n}])\r\n.service(\"customModal\",[\"$modal\",\"$rootScope\",function($modal,$root){\r\n\tthis.openModal=function(obj){\r\n\t\t/**\r\n\t\t * [init ]\r\n\t\t */\r\n\t\tvar init={\r\n\t\t\ttitle: obj.title, \t\t\t\t\t\t\t\t\t\t// \r\n\t\t\tdelTips: obj.delTips,\t\t\t\t\t\t\t\t\t// \r\n\t\t\tkey: obj.key?obj.key:'',\t\t\t\t\t\t\t\t// \r\n\t\t\tdelete_rows: obj.delete_rows?obj.delete_rows:[],\t\t// \r\n\t\t\tdelParm: obj.delParm?obj.delParm:'',\t\t\t\t\t// key\r\n\t\t\tnodelete_rows: obj.nodelete_rows?obj.nodelete_rows:[],   // \r\n\t\t\tnodelTips: obj.nodelTips?obj.nodelTips:\"\"\t\t\t\t// \r\n\t\t}\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: [\r\n\t\t\t\t\t\t\"<section id='widget-grid' ><div class='modal-content'>\",\r\n\t\t\t\t\t\t\"<div class='modal-header'><a type='button' class='close' data-ng-click='close()'>\",\r\n\t\t\t\t\t\t\"<span aria-hidden='true'></span><span class='sr-only'>\",\r\n\t\t\t\t\t\t\"Close</span></a><h4 class='modal-title' id='mySmallModalLabel' data-localize=\"+init.title+\"></h4></div><div class='modal-body'>\",\r\n\t\t\t\t\t\t\"<form class='form-horizontal'>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-localize='\"+init.delTips+\"' param1='{{deleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-ng-if='\"+init.nodelete_rows.length+\"' data-localize='\"+init.nodelTips+\"' param1='{{nodeleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<footer class='text-right'><a class='btn btn-primary' data-ng-click='ok()'  data-localize=''>\",\r\n\t\t\t\t\t\t\"</a><a class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize=''>\",\r\n\t\t\t\t\t\t\"</a></footer></form></div></div></section>\"].join(''),\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.deleteName = init.delete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.nodeleteName = init.nodelete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$root.$broadcast(\"DELETE\", init.key===''?init.delete_rows:{key: init.key, data: init.delete_rows});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n.directive(\"treeSelectNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', selecteduser: '='},\r\n        template: `<dd class=\"group\" ng-repeat=\"item in users\">\r\n\t\t\t\t\t<dl class=\"group\">\r\n\t\t\t\t\t\t<dt class=\"group-title\">{{item.dept_name}}</dt>\r\n\t\t\t\t\t\t<tree-select-node ng-repeat=\"node in item.children\" data-selecteduser=\"selecteduser\" data-node=\"node\"></tree-select-node>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t  </dd>`,\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeSelectNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', selecteduser: '='},\r\n        template: '<dd></dd>',\r\n        controller: function($scope){\r\n        \t$scope.selectUser = function(user){\r\n        \t\t$scope.$emit('selectCommonUser', user);\r\n        \t}\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n            \telement.append('<dl class=\"group\">'+\r\n\t\t\t\t\t\t\t\t\t'<dt class=\"group-title\">{{node.dept_name}}</dt>'+\r\n\t\t\t\t\t\t\t\t\t'<tree-select-node ng-repeat=\"sub in node.children\" data-selecteduser=\"selecteduser\" data-nodes=\"node.children\" data-node=\"sub\"></tree-select-node>'+\r\n\t\t\t\t\t\t\t\t'</dl>')\r\n            }else{\r\n            \telement.append('<dd class=\"group-item\" titile=\"{{selecteduser}}\" url=\"{{ node }}\" ng-class=\"{active:selecteduser.user_id === node.user_id}\" ng-click=\"selectUser(node)\">{{node.name}}({{node.real_name}})</dd>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.directives.js","angular.module(\"vdi\", [])\r\n\r\n.factory(\"Task\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/home/tasklog\", null, {\r\n        query: { method: \"GET\", isArray: false },\r\n        post: { method: \"POST\" },\r\n        put: { method: \"PUT\" }\r\n    });\r\n}])\r\n\r\n\r\n.factory(\"VNC\", [\"$resource\", \"$Domain\", function($resource, $Domain) {\r\n    return $resource($Domain + \"/thor/instance/vnc/:id\", { id: \"@id\" }, {\r\n        loadISO:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/loadISO\" },\r\n        save:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/update_template\" }\r\n    });\r\n}])\r\n\r\n.factory(\"loginResource\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/version\", null, {\r\n        query: { method: \"GET\"}\r\n    })\r\n}])\r\n\r\n\r\n.filter('lun_name', function () {\r\n    return function (lun) {\r\n        if (!angular.isUndefined(lun)) {\r\n            lun.map(function (item) {\r\n                item.value = item.vendor + \" lun-\" + item.lun + \" \" + item.size;\r\n            });\r\n        }\r\n        return lun;\r\n    };\r\n})\r\n.filter('storage_type', function () {\r\n    var type2str = {\r\n        local: \"\",\r\n        iscsi: 'iscsi ',\r\n        netfs: '',\r\n        fc: 'FC '\r\n    };\r\n    return function (type) {\r\n        return type2str[type]\r\n    }\r\n})\r\n.filter('storage_status', function () {\r\n    var stauts2str = {\r\n        running: \"\",\r\n        building:\"\",\r\n        error:''\r\n    };\r\n    return function (stauts) {\r\n        return stauts2str[stauts]\r\n    }\r\n})\r\n.filter('unsafe', function($sce) {\r\n    return function(val) {\r\n        return $sce.trustAsHtml(val+\"\");\r\n    };\r\n})\r\n.filter('join', function() {\r\n    return function(val,slash) {\r\n      return val.filter(function(d){\r\n        return d;\r\n      }).join(slash)\r\n    };\r\n})\r\n.filter('network_type', function () {\r\n    var type2str = {\r\n      nat:'NAT',\r\n      bridge:'',\r\n      vlan:'VLAN'\r\n    };\r\n    return function (val) {\r\n      return type2str[val];\r\n    };\r\n})\r\n.filter('yesorno', function () {\r\n    return function (val) {\r\n      return val ? '' : '';\r\n    };\r\n})\r\n.filter('to_mb', function () {\r\n    return function (val) {\r\n      return (val/1024/1024).toFixed(2);\r\n    };\r\n})\r\n.filter('reverse', function() {\r\n  return function(input,searchText,searchName) {\r\n    if(input && searchText){\r\n        var outPut = [];\r\n        outPut = input.filter(function(item){\r\n            if(item[searchName].indexOf(searchText)>-1)\r\n                return item;\r\n        })\r\n        return outPut;\r\n    }\r\n    return input;\r\n  };\r\n})\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\t$filterProvider.register(\"paging\", function(){\r\n\t\treturn function(items, index, pageSize){\r\n\t\t\tif(!angular.isArray(items)){\r\n                return items;\r\n            }\r\n            if(pageSize > 0 && index > 0){\r\n    \t\t\tvar total = items.length;\r\n    \t\t\tvar totalPage = Math.ceil(total / pageSize);\r\n    \t\t\tindex = Math.min(totalPage, Math.max(1, index));\r\n    \t\t\treturn items.slice((index - 1) * pageSize, index * pageSize);\r\n            }\r\n            return items;\r\n\t\t};\r\n\t});\r\n}])\r\n\r\n.directive(\"dialog\", [\"$modal\", \"$rootScope\", \"$$$I18N\", function ($modal, $rootScope, $$$I18N) {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            element.click(function () {\r\n                if(attrs.disabled){\r\n                    $.bigBox({\r\n                        title:$$$I18N.get(\"INFOR_TIP\"),\r\n                        content:attrs.error\r\n                    });\r\n                }else{\r\n                    var dialog = $modal.open({\r\n                        templateUrl: \"views/vdi/dialog/\" + attrs.dialogUrl,\r\n                        controller: attrs.dialog,\r\n                        scope: $scope,\r\n                        size: attrs.dialogSize\r\n                    });\r\n                    $scope.close = dialog.dismiss.bind(dialog);\r\n                    window.___dialog = dialog;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"widgetGrid\", [\"$filter\", \"$modal\", function($filter, $modal){\r\n    function getPosition(e, ele) {\r\n        var st = Math.max(\r\n            document.documentElement.scrollTop,\r\n            document.body.scrollTop\r\n        );\r\n        var sl = Math.max(\r\n            document.documentElement.scrollLeft,\r\n            document.body.scrollLeft\r\n        );\r\n        var cw = document.documentElement.clientWidth;\r\n        var ch = document.documentElement.clientHeight;\r\n        var sw = Math.max(\r\n            document.documentElement.scrollWidth,\r\n            document.body.scrollWidth\r\n        );\r\n        var sh = Math.max(\r\n            document.documentElement.scrollHeight,\r\n            document.body.scrollHeight\r\n        );\r\n        var ow = ele.offsetWidth;\r\n        var oh = ele.offsetHeight;\r\n        return {\r\n            x: Math.max(0, e.pageX + ow > sl + cw ? sl + cw - ow : e.pageX),\r\n            y: Math.max(0, e.pageY + oh > st + ch ? st + ch - oh : e.pageY)\r\n        }\r\n    }\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function($scope){\r\n            this.getCurrentPage = function(){\r\n                return Number($scope.currentPage) > 0 ? $scope.currentPage : 0;\r\n            };\r\n            this.getCurrentRows = function(){\r\n                return $scope.getCurrentRows();\r\n            }\r\n            this.getPageSize = function(){\r\n                return Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n            };\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n            var context_wrapper = element.find(\".context_wrapper\");\r\n            context_wrapper.on(\"mousedown\", function (e) {\r\n                if (e.target === this) {\r\n                    context_wrapper.hide();\r\n                    element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n                }\r\n            }).on(\"click\", function () {\r\n                context_wrapper.hide();\r\n                element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n            });\r\n            context_wrapper.hide();\r\n\r\n            // $scope.searchText = \"\";\r\n            //$scope.pagesize = 5;\r\n            $scope.currentPage = 1;\r\n\r\n            $scope.getCurrentRows = function(){\r\n                return $filter(\"paging\")(\r\n                    $scope.getFilterRows(),\r\n                    $scope.currentPage, $scope.pagesize\r\n                );\r\n            };\r\n            $scope.getFilterRows = function(){\r\n                return $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n            };\r\n\r\n            $scope.checkAll = function(){\r\n                var rows = $scope.getCurrentRows();\r\n                var _all = rows.length && rows\r\n                    .filter(item => !item._ignore ).length && rows\r\n                    .filter(item => !item._ignore )\r\n                    .every(row => row._selected );\r\n                $scope.checkedAll = _all;\r\n                return _all;\r\n            };\r\n            $scope.selectAllChange = function (checkAll) {\r\n                var rows = $scope.getCurrentRows();\r\n                rows.filter(item => !item._ignore ).forEach(function (row) {\r\n                    row._selected = checkAll;\r\n                });\r\n                $scope.checkedAll = checkAll;\r\n            };\r\n            $scope.checkOne = function () {\r\n                var rows = $scope.getCurrentRows();\r\n                return rows.filter(item => !item._ignore ).some(function (row) {\r\n                    return row._selected;\r\n                });\r\n            };\r\n            $scope.sort = function(name, asc){\r\n                $scope.rows.sort(function(a, b){\r\n                    return (a[name] > b[name] ? 1 : -1) * (asc ? 1 : -1);\r\n                });\r\n            };\r\n            $scope.pageSizeChange =\r\n            $scope.pageChange = function(){\r\n                $scope.rows.forEach(function(item, i){\r\n                    item._selected = false;\r\n                });\r\n            };\r\n            $scope.currentItem = null;\r\n            $scope.$on(\"contextmenu\", function (e, item, de, handler) {\r\n                $scope.currentItem = item;\r\n                handler.addClass(\"contextmenu_selected\");\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                context_wrapper.fadeIn(200);\r\n                var menu = element.find(\".grid_context_menu\");\r\n                var offset = context_wrapper.offset();\r\n                var pos = getPosition(de, menu[0]);\r\n                menu.css({\r\n                    top: pos.y - offset.top + \"px\",\r\n                    left: pos.x - offset.left + \"px\"\r\n                });\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                e.stopPropagation();\r\n                de.preventDefault();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"gridPagination\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require: [\"^widgetGrid\"],\r\n        conroller: function($scope){\r\n\r\n        },\r\n        link: function($scope, element, attrs, ctrls){\r\n            var grid = ctrls[0];\r\n            $scope.getStart = function(){\r\n                var current = grid.getCurrentPage();\r\n                var pagesize = grid.getPageSize();\r\n                return pagesize > 0 ? (current - 1) * pagesize + 1 : 0;\r\n            };\r\n            $scope.getEnd = function(){\r\n                var current = $scope.currentPage;\r\n                var pagesize = grid.getPageSize();\r\n                var end = current * pagesize;\r\n                var currentCount = $scope.getFilterRows().length;\r\n                return end < currentCount ? end : currentCount;\r\n            };\r\n            $scope.getCurrentCount = function(){\r\n                return $scope.getCurrentRows().length;\r\n            };\r\n        }\r\n    }\r\n}])\r\n.directive(\"ribbonTips\", [\"localize\", \"$route\", \"$location\", \"$interval\", function(localize, $route, $location, $interval){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function($scope, element, attrs){\r\n            var timer, dereg;\r\n            var fn_update_help_info = function(){\r\n                var path = $location.$$path;\r\n                if(/^\\/resource\\/network\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/resource/network/:id\";\r\n                }\r\n                if(/^\\/desktop\\/teach\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/desktop/teach/:id\";\r\n                }\r\n                var help_text = attrs.myTips?localize.localizeText(attrs.myTips):localize.localizeText(path);\r\n                element.attr(\"data-content\", help_text);\r\n                if(help_text) {\r\n                    element.parent().show();\r\n                } else {\r\n                    element.parent().hide();\r\n                }\r\n            };\r\n            $scope.$on(\"$routeChangeSuccess\", function(){\r\n                fn_update_help_info();\r\n            });\r\n            if(localize.isReady()) {\r\n                fn_update_help_info();\r\n            }\r\n            $scope.$on(\"localizeLanguageChanged\", fn_update_help_info);\r\n        }\r\n    };\r\n}])\r\n.directive(\"contextmenu\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            if (attrs.contextmenuDisabled !== \"true\") {\r\n                element.bind(\"contextmenu\", function (e) {\r\n                    $scope.$emit(attrs.contextmenuEventName || \"contextmenu\", $scope.item, e, element);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}])\r\n\r\n.directive(\"wizard\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        scope: {\r\n            lastText: \"@\",\r\n            btnUnable:\"=\"\r\n        },\r\n        controller: function ($scope, localize, $$$I18N) {\r\n            var steps = $scope.steps = [];\r\n            $scope.currentStep = null;\r\n            $scope.moveWth = 0;\r\n            var defaults = {\r\n                prevBtnText: \"\",\r\n                nextBtnText: \"\",\r\n                doneBtnText: \"\",\r\n            };\r\n            $scope.$on(\"currentStepChange\", function(e, stepIndex){\r\n                $scope.go(stepIndex);\r\n            });\r\n            $scope.select = function (step) {\r\n                var index;\r\n                steps.forEach(function (s, i) {\r\n                    s.selected = s === step;\r\n                    if(s.selected) {\r\n                        index = i;\r\n                    }\r\n                });\r\n                $scope.currentStep = step;\r\n                [\"prev\", \"next\", \"done\"].forEach(function(s){\r\n                    var key = s + \"BtnText\";\r\n                    $scope[key] = $$$I18N.get(step[key] || defaults[key]);\r\n                });\r\n                $scope.$emit(\"selectStepChange\", {index: index, stepScope: step});\r\n            };\r\n            $scope.getCurrentIndex = function () {\r\n                return steps.indexOf($scope.currentStep);\r\n            };\r\n\r\n            $scope.prev = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                //var e = $scope.$emit(($scope.stepEventName || \"WizardStep\"), $scope.currentStep);\r\n                var prev = steps[index - 1];\r\n                prev && $scope.select(prev);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n\r\n            };\r\n            $scope.next = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling);\r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.moveWth = $scope.getMarginValue();\r\n                };\r\n\r\n            };\r\n            $scope.go = function(index){\r\n                $scope.select(steps[index]);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n            }\r\n            $scope.showPrev = function () {\r\n                return steps.indexOf($scope.currentStep) > 0 && $scope.currentStep.prevBtnText !== \"\";\r\n            };\r\n            $scope.isLast = function () {\r\n                return steps.indexOf($scope.currentStep) >= steps.length - 1;\r\n            };\r\n            $scope.done = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling); \r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.$emit($scope.doneEventName || \"WizardDone\", steps, steps.map(function (step) {\r\n                        return step.$$nextSibling\r\n                    }));\r\n                }\r\n            };\r\n            this.addStep = function (step) {\r\n                steps.push(step);\r\n                if (steps.length === 1) {\r\n                    $scope.select(step);\r\n                }\r\n            };\r\n            this.jumpStep = function (index) {\r\n\r\n            };\r\n            this.removeStep = function (index) {\r\n\r\n            };\r\n            this.insertStep = function (step) {\r\n\r\n            };\r\n        },\r\n        link : function($scope, element, attrs){\r\n            $scope.getMarginValue = function(){\r\n                var _idx = $scope.getCurrentIndex();\r\n                var wizardWth = element.find('.wizard').outerWidth();\r\n                var _wth = 60;\r\n                for(var i = 0; i<=_idx+1 ; i++){\r\n                    _wth+=element.find(\".steps>li\").eq(i).outerWidth();\r\n                }\r\n                if(wizardWth - _wth < 0){\r\n                    return (wizardWth - _wth) ;\r\n                }else{\r\n                    return 0;\r\n                }\r\n            };\r\n            // if(attrs.disableNav !== \"true\") {\r\n            //     element.find(\".steps\").delegate(\"li.complete\",\"click\",function(e){\r\n            //         var _idx = $(this).index();\r\n            //         $scope.go(_idx);\r\n            //     });\r\n            // }\r\n        },\r\n        template: `<div class=\"wizard\" style=\"margin-bottom:20px;\">\r\n            <ul class=\"steps\" style=\"margin-left:{{moveWth}}px\">\r\n                <li data-ng-repeat=\"step in steps\" data-target=\"#step{{ $index }}\" data-ng-class=\"{ active: getCurrentIndex() >= $index ,complete:getCurrentIndex() > $index }\">\r\n                    <span class=\"badge badge-info\">{{ $index + 1 }}</span><span localize=\"{{step.name}}\"></span><span class=\"chevron\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"actions\">\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"showPrev()\" data-ng-click=\"prev()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-primary btn-prev\">\r\n                    <i class=\"fa fa-arrow-left\"></i><span ng-bind=\"prevBtnText\"></span>\r\n                </button>\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"!isLast()\" data-ng-click=\"next()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"nextBtnText\"></span> <i class=\"fa fa-arrow-right\"></i>\r\n                </button>\r\n                <button id='finish' ng-show=\"!btnUnable && isLast()\" type=\"button\" data-ng-click=\"done()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"doneBtnText\"></span><i class=\"fa fa-check\" ></i>\r\n                </button>\r\n                <img ng-show=\"btnUnable\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n                <img ng-show=\"currentStep.showLoading === true\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"step-content\">\r\n            <form data-ng-transclude class=\"form-horizontal\" id=\"fuelux-wizard\" method=\"post\" novalidate>\r\n            </form>\r\n        </div>\r\n        <div ng-show=\"currentStep.showLoading === true\" style=\"position: absolute;top:0;right:0;bottom:0;left:0;z-index:999;\"></div>`\r\n    };\r\n}])\r\n.directive(\"wizardStep\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^wizard\",\r\n        transclude: true,\r\n        replace: true,\r\n        scope: {\r\n            name: \"@\",\r\n            prevBtnText: \"@\",\r\n            nextBtnText: \"@\",\r\n            doneBtnText: \"@\",\r\n            testValid: \"=\"\r\n        },\r\n        controller: function ($scope) {},\r\n        link: function (scope, element, attrs, wizard) {\r\n            wizard.addStep(scope);\r\n        },\r\n        template: `<div class=\"step-pane\" data-ng-class=\"{ active: selected }\" data-ng-show=\"selected\" data-ng-transclude></div>`\r\n    };\r\n}])\r\n\r\n.directive('areaTraffic', function ($interval,$http) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope:{\r\n            options : \"=\"\r\n        },\r\n        link: function (scope, e, attrs) {\r\n            Highcharts.setOptions({    //disable utc time\r\n                global: {    \r\n                    useUTC: false    \r\n                }    \r\n            }); \r\n            function init_data(){\r\n                // generate init data\r\n                var data = [],\r\n                    time = (new Date()).getTime(),\r\n                    i;\r\n\r\n                for (i = -40; i <= 0; i += 1) {\r\n                    data.push({\r\n                        x: time + i * scope.$parent.refresh_time,\r\n                        y: 0\r\n                    });\r\n                }\r\n                return data;\r\n            }\r\n            var hc_options = scope.options.options;\r\n            hc_options.chart.renderTo = e[0];\r\n            hc_options.yAxis.min = 0;\r\n            angular.forEach(hc_options.series,function(s){\r\n                s.data = init_data();\r\n            });\r\n\r\n            var highcharts = new Highcharts.Chart(hc_options);\r\n\r\n            function drawPoint(data) {\r\n                var datetime = (new Date()).getTime();\r\n                var hc_series = highcharts.series;\r\n\r\n                scope.options.drawpoint(hc_series,data,datetime);\r\n\r\n            }\r\n\r\n            function reset_highcharts(){\r\n                //reset highcharts\r\n                highcharts.destroy();\r\n                angular.forEach(hc_options.series,function(s){\r\n                    s.data = init_data();\r\n                });\r\n                highcharts = new Highcharts.Chart(hc_options);\r\n            }\r\n\r\n            scope.$watch('$parent.metric_data',function(newvalue){\r\n                if(newvalue){\r\n                    drawPoint(newvalue);\r\n                }\r\n            });\r\n\r\n            scope.$watch('$parent.refresh_time',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n            scope.$watch('$parent.item',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n        }\r\n    }\r\n})\r\n.directive(\"monitorTree\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        template: `<div class=\"portlet-title clearfix padding-5\">\r\n                <div class=\"pull-left\">\r\n                    <a href=\"javascript:\" id=\"collape\" class=\"btn btn-default btn-xs\"><i class=\"fa  icon-jj-Shrinkfrom\"></i> </a>\r\n                    <a href=\"javascript:\" id=\"open\" class=\"btn btn-default  btn-xs\"><i class=\"fa icon-jj-Open\"></i></a>\r\n                </div>\r\n                <div class=\"pull-right\"><a href=\"javascript:\"class=\"btn btn-default  btn-xs\" ng-init=\"ishow=false\" ng-click=\"ishow==true?ishow=false:ishow=true;open()\"><i class=\"fa fa-search\"></i></a></div> \r\n            </div>\r\n            <div class=\"search\" ng-show=\"ishow\"><input type=\"search\" localize=\"\" ng-model=\"searchText\"></div>\r\n            <div class=\"portlet-body fuelux monitor-tree\" data-ng-transclude></div>\r\n        `,\r\n        link: function(scope, element, attrs){\r\n            element.delegate('#open', 'click', function(event) {\r\n                element.find(\".parent\").addClass('in');\r\n            });\r\n            element.delegate('#collape', 'click', function(event) {\r\n                element.find(\".parent\").removeClass('in');\r\n            });\r\n            element.delegate (\".tree-toggle\",\"click\",function(event){\r\n                var parent =$(this).parent().parent(\".parent\");\r\n                if(parent.hasClass('in')){\r\n                    parent.removeClass('in');\r\n                }else{\r\n                    parent.addClass(\"in\");\r\n                }\r\n            });\r\n            element.delegate(\".tree-it\",\"click\",function(event){\r\n                element.find(\"li\").removeClass('active');\r\n                $(this).parent(\"li\").addClass('active');\r\n            });\r\n            scope.open = function(){\r\n                element.find(\".parent\").addClass('in');\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive('ipPattern',function (ip_pattern) {\r\n\r\n    return {\r\n      require: ['ngModel','?ngRequired'],\r\n      link: function (scope, elm, attrs, ctrls) {\r\n        var ngmodelctl = ctrls[0];\r\n        var ngrequiredctl = ctrls[1];\r\n\r\n        ngmodelctl.$parsers.push(function (viewValue) {\r\n\r\n          if (ip_pattern.test(viewValue)||(!ngrequiredctl&&!viewValue)) {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', true);\r\n            return viewValue;\r\n          } else {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', false);\r\n            return undefined;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n})\r\n.directive(\"preventSpace\", [function(){\r\n    return {\r\n      restrict: \"A\",\r\n      link: function(scope, element, attrs){\r\n        element.on(\"keypress\",function(e){\r\n          if(e.keyCode === 32){\r\n            e.preventDefault();\r\n          }\r\n        })\r\n      }\r\n    };\r\n  }])\r\n.directive(\"inputNumber\", [function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        link: function(scope, element, attrs){\r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrlKey = [\r\n                8, // backspace\r\n                46,// delete\r\n                37,// left arrow\r\n                39 // right arrow\r\n            ];\r\n            element.on(\"keydown\", function(e){\r\n                var code = e.which || e.keyCode;\r\n                if(numKey.indexOf(code) > -1) {\r\n                    var num = code < 60 ? code - 48 : code - 96;\r\n                    var nextValue = this.value + num;\r\n                    if(!attrs.max) { return; }\r\n                    var max = attrs.max * 1;\r\n                    if(!isNaN(max) && nextValue <= max) {\r\n                        return;\r\n                    }\r\n                } else if(ctrlKey.indexOf(code) > -1) {\r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n        }\r\n    };\r\n}])\r\n// .directive(\"inputDot\", [function(){\r\n//     return {\r\n//         restrict: \"AE\",\r\n//         link: function(scope, element, attrs){\r\n//             element.on(\"keydown\",function(e){\r\n//                 if(attrs.inputDot == 'true'){\r\n//                    if(e.keyCode === 190 || e.keyCode === 110 || e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                    }\r\n//                 }\r\n//                 else{\r\n//                     if(e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                     }\r\n//                 }\r\n\r\n//             });\r\n//         }\r\n//     };\r\n// }])\r\n.directive(\"formatIp\", [\"$compile\",function($compile){\r\n    return {\r\n        restrict:\"EA\",\r\n        require:\"ngModel\",\r\n        scope:{\r\n            start:\"=\",\r\n            end:\"=\"\r\n        },\r\n        link:function(scope,element,attrs,ctrl){\r\n            var ngModelCtrl = ctrl;\r\n            var required = attrs.ipRequired ? scope.$eval(attrs.ipRequired) : true;\r\n\r\n            if(!ngModelCtrl){\r\n                return;\r\n            };\r\n            var CHECKTOOLS = {};\r\n\r\n            CHECKTOOLS.checkIP = function(ip){\r\n                if(!ip) { return false; }\r\n                var parts = ip.split(\".\");\r\n                //9029bug 0.0.0.0IP\r\n                var numre = /^(0|[1-9][0-9]*)$/;\r\n                var i, valid = true;\r\n                if(parts.length !== 4) { return false; }\r\n                for(i = 0; i < 4; i++) {\r\n                    if(numre.test(parts[i]) && parseInt(parts[i]) <= 255) {\r\n                        continue;\r\n                    } else {\r\n                        valid = false;\r\n                    }\r\n                }\r\n                valid = valid && (ipformatNum(ip) > ipformatNum('1.0.0.0'));\r\n                return valid;\r\n            };\r\n\r\n            function ipformatNum(ip){\r\n                var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];   \r\n            }\r\n\r\n            CHECKTOOLS.ip2long = function(ip){\r\n                if(CHECKTOOLS.checkIP(ip)){\r\n                    var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                    return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];\r\n                }\r\n            };\r\n            CHECKTOOLS.checkRange = function(ip,s_ip,e_ip){\r\n                if(CHECKTOOLS.checkIP(ip),CHECKTOOLS.checkIP(s_ip) && CHECKTOOLS.checkIP(e_ip)){\r\n                     var s = CHECKTOOLS.ip2long(s_ip);\r\n                     var e = CHECKTOOLS.ip2long(e_ip);\r\n                     var c = CHECKTOOLS.ip2long(ip);\r\n                     return c >= s && c <= e;\r\n                 }else{\r\n                    return false;\r\n                 }\r\n            };\r\n            var popEl = angular.element(\"<div format-ip-wrap></div>\");\r\n            var $input = $compile(popEl)(scope);\r\n            element.addClass(\"ng-hide\");\r\n            element.after($input);\r\n\r\n            // model -- ui\r\n            \r\n            ngModelCtrl.$render = function(){\r\n                var modelVal = ngModelCtrl.$modelValue;\r\n                var modelValArr;\r\n                try{\r\n                    if(modelVal === null) {\r\n                        modelValArr = [];\r\n                        ngModelCtrl.$setPristine();\r\n                    } else {\r\n                        modelValArr = modelVal.split(\".\");\r\n                    }\r\n                    [1,2,3,4].forEach(function(i,idx){\r\n                        scope[\"seg\" + i] = modelValArr[idx] || \"\";\r\n                    });\r\n                }catch(err){\r\n                }\r\n                // setValidate();\r\n            };\r\n            /*\r\n            function setValidate(){\r\n                var isValid;\r\n                if(ngModelCtrl.$modelValue){\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ngModelCtrl.$modelValue,scope.start,scope.end)\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ngModelCtrl.$modelValue);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\",isValid);\r\n                }else{\r\n                    ngModelCtrl.$setValidity(\"ip\",true);\r\n                }\r\n            };\r\n\r\n            // ui -- model\r\n            $input.on(\"input\",function(e){\r\n                scope.$apply(function(){\r\n                    var val = [1,2,3,4].map(function(i){ return scope[\"seg\" + i] || \"\"; }).join(\".\");\r\n                    var isNull = val.split(\".\").every(function(item){ return item.length===0 });\r\n                    if(isNull){\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }else{\r\n                        ngModelCtrl.$setViewValue(val);\r\n                    }\r\n                    ngModelCtrl.$render();\r\n                })\r\n            });\r\n\r\n            */\r\n\r\n            scope.$watch(\"seg1 + '.' + seg2 + '.' + seg3 + '.' + seg4\", function(ip){\r\n                var value = ngModelCtrl.$modelValue;\r\n                if(ip === \"...\") {\r\n                    if(value) {\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }\r\n                    if(!value || !required) {\r\n                        return ngModelCtrl.$setValidity(\"ip\", true);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", false);\r\n                } else {\r\n                    var isValid = false;\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ip, scope.start, scope.end);\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ip);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", isValid);\r\n                    ngModelCtrl.$setViewValue(ip);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n.directive(\"formatIpWrap\",function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        replace: true,\r\n        template: `<span role=\"ipgroup\"><input type=\"text\" ng-model=\"seg1\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg2\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg3\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg4\"></span>`,\r\n        link: function(scope,element,attrs){\r\n            element.on(\"keydown\", \"input\", function(event){\r\n                switch(event.keyCode){\r\n                    case 110:\r\n                    case 190:\r\n                        var nextEles = $(this).nextAll(\"input\");\r\n                        nextEles.length && nextEles.eq(0).focus();\r\n                        event.preventDefault();\r\n                        break;\r\n                    case 8:\r\n                        if(!$(this).val()){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        if(this.selectionStart === 0){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        };\r\n                        break;\r\n                    case 39:\r\n                        if(this.selectionStart === $(this).val().length){\r\n                            $(this).nextAll(\"input\").length && $(this).nextAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 32:\r\n                    case 229:\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        break;\r\n                }\r\n            });\r\n            element.on(\"keypress\", \"input\",function(e){\r\n                if(e.keyCode < 48 || e.keyCode > 57){\r\n                    e.preventDefault();\r\n                }\r\n                if($(this).val().length > 2 && this.selectionStart === this.selectionEnd){\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            element.on(\"paste\",function(e){\r\n                e.preventDefault();\r\n            });\r\n            element.on(\"focus\", \"input\", function(e){\r\n                element.addClass(\"focus\");\r\n            });\r\n            element.on(\"blur\", \"input\", function(e){\r\n                element.removeClass(\"focus\");\r\n            });\r\n        }\r\n    }\r\n})\r\n.directive(\"treeNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', filtertext: '='},\r\n        template: '<ul role=\"tree\" class=\"menu menu-tree\" ng-repeat=\"item in getUsers()\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{item.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(item);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"node in item.children\" data-nodes=\"item.children\" data-node=\"node\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>',\r\n        controller: function($scope){\r\n            var lastFilter;\r\n            var lastFiltedResult;\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n\r\n            $scope.getUsers = function(){\r\n                var text = $scope.filtertext || \"\";\r\n                var users = $scope.users;\r\n                text = text.trim();\r\n                if(!text) { return users; }\r\n                if(text !== lastFilter) {\r\n                    lastFilter = text;\r\n                    lastFiltedResult = filterUser(angular.copy(users), text);\r\n                }\r\n                return lastFiltedResult;\r\n            };\r\n\r\n            function filterUser(users, text) {\r\n                return users.filter(function(user){\r\n                    if(user.children) {\r\n                        user.children = filterUser(user.children, text);\r\n                        return user.children.length > 0;\r\n                    } else {\r\n                        return user.user_name.indexOf(text) > -1 || user.real_name.indexOf(text) > -1;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', nodes: '='},\r\n        template: '<div></div>',\r\n        controller: function($scope){\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n            $scope.add_select_rows = function($event,node,nodes){\r\n                $scope.$emit('add_select_rows', $event,node,nodes);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n                element.append('<ul role=\"group\" class=\"menu menu-tree\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{node.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(node);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"sub in node.children\" data-nodes=\"node.children\" data-node=\"sub\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>')\r\n            }else{\r\n                element.append('<li class=\"menuitem\" ng-click=\"add_select_rows($event,node,nodes)\" ng-dblclick=\"add_selected(node)\">'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.name}}</span>'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.real_name}}</span>'+\r\n                  '</li>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiMenuList\", [\"Admin\",\"User\",\"Domain\",\"$q\",\"$$$I18N\",function(APIadmin,APIuser,APIdomain,$q,$$$I18N){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            selected: \"=menuListData\",\r\n            // domain:\"=menuListDomain\"\r\n        },\r\n        templateUrl: \"includes/userMenu.html\",\r\n        controller: function($scope){\r\n            $scope.expandedNodes = [];\r\n            $scope._users = [];\r\n            $scope.selected = $scope.selected || [];\r\n            $scope.seRows = [];\r\n            $scope.rmRows = [];\r\n            $scope.common_users = [];\r\n            function formatData(d,name){\r\n                iteration(d,name);\r\n                return d;\r\n            }\r\n            function iteration(data,childName,list){\r\n                for(var i = 0 ; i < data.length ; i++){\r\n                    $scope.expandedNodes.push(data[i]);\r\n                    if(data[i][childName] && data[i][childName].length){\r\n                        var len = iteration(data[i][childName],childName);\r\n                        if(len === 0){\r\n                            data[i] = undefined;\r\n                        }\r\n                    }\r\n                    if(!data[i]) { continue; }\r\n                    if(data[i].users && data[i].users.length > 0){\r\n                        data[i].users.map(user => {\r\n                            user.name = user.name || user.user_name;\r\n                            user._is_last = true;\r\n                            return user;\r\n                        });\r\n                        data[i][childName] = data[i].users;\r\n                    }\r\n                    if(data[i][childName] && data[i][childName].length === 0){\r\n                        data[i]= undefined;\r\n                    }\r\n                }\r\n                while(data.length > 0) {\r\n                    // \r\n                    var oldlen = data.length;\r\n                    for(var i = 0 ; i < oldlen ; i++){\r\n                        if(data[i] === undefined){\r\n                            data.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(oldlen === data.length) {\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                return data.length;\r\n            }\r\n            function removeNoChildrenDeparts(data) {\r\n                data = data.filter(noUserFilter);\r\n                data.forEach(walk);\r\n                return data;\r\n                function walk(node) {\r\n                    if(!node.dept_id) { return; }\r\n                    //  children \r\n                    if(node.children) {\r\n                        node.children = node.children.filter(noUserFilter);\r\n                        node.children.forEach(walk);\r\n                    }\r\n                }\r\n                function noUserFilter(node) {\r\n                    if(node.dept_id && !node.children && node.users.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            function get_admin(){\r\n                var deferred = $q.defer();\r\n                APIadmin.query(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_user(){\r\n                var deferred = $q.defer();\r\n                APIuser.query_tree(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_domain(){\r\n                var deferred = $q.defer();\r\n                APIdomain.list(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            $q.all([get_admin(),get_user(),get_domain()]).then(function(arr){\r\n                $scope._users = [{\r\n                    typeName: $$$I18N.get(\"\"),\r\n                    userData: arr[0].users\r\n                }];\r\n                $scope.domain_users = arr[2].result.map(function(res){\r\n                    res._name = $$$I18N.get(\"\") + \"(\" + res.name + \")\";\r\n                    return res;\r\n                });\r\n                $scope.common_users = formatData(removeNoChildrenDeparts(arr[1].result),\"children\");\r\n                console.log($scope.common_users)\r\n            });\r\n            function getLastLevelNodes(obj_levels, arrays){\r\n                if(obj_levels.children){\r\n                    obj_levels.children.forEach(function(item){\r\n                        getLastLevelNodes(item, arrays);\r\n                    })\r\n                }else{\r\n                    arrays.push(obj_levels);\r\n                }\r\n            }\r\n\r\n            $scope.$on('add_selected', function(e, levels){\r\n                var arrays = [];\r\n                getLastLevelNodes(levels, arrays);\r\n                $scope.add_selected(arrays);\r\n            })\r\n            $scope.$on('add_select_rows', function(e,$event,node,nodes){\r\n                console.log(555555, $event,node, nodes);\r\n                $scope.add_select_rows($event,node, nodes);\r\n            })\r\n            $scope.add_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    if($scope.selected.indexOf(i) === -1){\r\n                        $scope.selected.push(i);\r\n                    }\r\n                });\r\n            };\r\n            $scope.remove_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    $scope.selected.splice($scope.selected.indexOf(i),1);\r\n                });\r\n                $scope.rmRows = [];\r\n            };\r\n            var lastRow2 = null;\r\n            $scope.add_select_rows = function(e,item,items){\r\n                var idx = $scope.seRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.seRows.push(item) : $scope.seRows.splice(idx,1);\r\n                    lastRow2 = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = items.indexOf(lastRow2);\r\n                    var end_idx = items.indexOf(item);\r\n                    if(begin_idx === -1){\r\n                        lastRow2 = item;\r\n                        $scope.seRows = [item];\r\n                    }else{\r\n                        $scope.seRows = items.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1);\r\n                        console.log(1111111,$scope.seRows)\r\n                    }\r\n                }else{\r\n                    $scope.seRows.splice(0,$scope.seRows.length,item);\r\n                    lastRow2 = item;\r\n                }\r\n            };\r\n            var lastRow = null;\r\n            $scope.add_remove_rows = function(e,item){\r\n                var idx = $scope.rmRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.rmRows.push(item) : $scope.rmRows.splice(idx,1);\r\n                    lastRow = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = $scope.selected.indexOf(lastRow);\r\n                    var end_idx = $scope.selected.indexOf(item);\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        $scope.rmRows = $scope.selected.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1); \r\n                    }else{\r\n                        $scope.rmRows = [item];\r\n                        lastRow = item;\r\n                    }\r\n                }\r\n                else{\r\n                    $scope.rmRows.splice(0,$scope.rmRows.length,item);\r\n                    lastRow = item;\r\n                }\r\n            };\r\n            $scope.ltor = function(){\r\n                $scope.add_selected($scope.seRows);\r\n            };\r\n            $scope.rtol = function(){\r\n                $scope.remove_selected($scope.rmRows);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            var last = null;\r\n            element.on(\"keyup\",'input[ng-model=\"searchText\"]',function(e){\r\n                $(\".menu_header\").addClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menu_header\",function(e){\r\n                $(this).toggleClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menuitem\", function(e){\r\n                var ele = $(this);\r\n                var menuItems = ele.parent().parent(\".menu_body\").find(\".menuitem\");\r\n                var allMenuItems = ele.parents(\".menus\").find(\".menuitem\");\r\n                if(e.ctrlKey){\r\n                    ele.hasClass(\"itemActive\") ? ele.removeClass(\"itemActive\") : ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = [].indexOf.apply(menuItems,last);\r\n                    var end_idx = [].indexOf.apply(menuItems,ele);\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        for(var i = 0; i < menuItems.length; i++){\r\n                            if(i > Math.max(begin_idx,end_idx) || i < Math.min(begin_idx,end_idx)){\r\n                                menuItems.eq(i).removeClass(\"itemActive\");\r\n                            }else{\r\n                                menuItems.eq(i).addClass(\"itemActive\");\r\n                            }\r\n                        }\r\n                    }else{\r\n                        ele.addClass(\"itemActive\");\r\n                        last = ele;\r\n                    }\r\n                }else{\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumber\", [\"$http\",\"$compile\",\"$templateCache\",function($http,$compile,$templateCache){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            step:\"@\",\r\n            max:\"@\",\r\n            userNumber: \"=ngModel\",\r\n            min:\"@\"\r\n        },\r\n        priority: 2,\r\n        require: \"ngModel\",\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs,ctrl){\r\n\r\n            scope.addStep = Number(scope.step) || 1;\r\n            scope.addMax  = Number(scope.max) || null;\r\n            scope.addMin  = Number(scope.min) || null;\r\n\r\n            var is_dot = String(Number(scope.step)).indexOf(\".\") === -1 ? false : true; \r\n\r\n            var modelCtrl = ctrl;\r\n            var temp = $compile($(\"<div ui-input-number-wrapper></div>\")[0])(scope);\r\n            element.hide();\r\n            element.after(temp);\r\n           \r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrKey = [8,9,13,35,36,37,38,39,40,45,46,144,112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,110,190];\r\n            scope.keydown = function(e){\r\n                var _code = e.keyCode;\r\n                var _valsplit = e.target.value.split(\".\"); \r\n\r\n                if(numKey.indexOf(_code) === -1 && ctrKey.indexOf(_code) === -1){\r\n                    e.preventDefault();\r\n                }\r\n                // \r\n                if(numKey.indexOf(_code) > -1 && _valsplit.length > 1 && _valsplit[1].length > 0 && e.target.selectionStart > e.target.value.indexOf(\".\")){\r\n                    e.preventDefault();\r\n                }\r\n                // \r\n                if(_code === 110 || _code === 190){\r\n                    if(!is_dot){\r\n                        e.preventDefault();\r\n                    }else{\r\n                        if(e.target.value.indexOf(\".\") !== -1){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                // \r\n                if(_code === 38){\r\n                    e.preventDefault();\r\n                    scope.add(scope.addStep);\r\n                    scope.round();\r\n                }\r\n                // \r\n                if(_code === 40){\r\n                    e.preventDefault();\r\n                    scope.add(-scope.addStep);\r\n                    scope.round();\r\n                }\r\n                \r\n            };\r\n            scope.round = function(){\r\n                scope.userNumber = is_dot ? Math.round(Number(scope.userNumber)*2)/2 : Math.round(scope.userNumber);\r\n            }\r\n\r\n            modelCtrl.$render = function(){\r\n                scope.setValidation();\r\n            };\r\n            scope.setValidation = function(){\r\n                var newval = modelCtrl.$modelValue;\r\n                var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n                if(exp.test(newval)){\r\n                    if((Math.abs(scope.addMax) >= 0 && newval > scope.addMax) || (Math.abs(scope.addMin) >= 0 && newval < scope.addMin) ){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }else{\r\n                    if(newval){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }\r\n            };\r\n            scope.add = function(num){\r\n                scope.userNumber = Number(scope.userNumber) ? Number(scope.userNumber) + Number(num) : Number(num);\r\n                scope.setValidation();\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberWrapper\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        replace:true,\r\n        templateUrl: \"./views/vdi/common/input-number-temp.html\",\r\n        link: function(scope,element){\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberFormatter\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require:\"ngModel\",\r\n        link: function(scope, element, attrs,ctrl){\r\n            var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n\r\n            ctrl.$parsers.push(function(value){\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n            ctrl.$formatters.push(function(value){\r\n\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiWebUpload\", [\"$http\", \"$rootScope\", \"$$$I18N\", \"$Domain\", function($http, $rootScope, $$$I18N, $Domain){\r\n    var org = XMLHttpRequest;\r\n    var org_open = org.prototype.open;\r\n    var allowUpload = window.FormData && typeof window.FormData === \"function\";\r\n    $rootScope.uploadPool = $rootScope.uploadPool || {};\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: function(ele, attrs){\r\n            if(attrs.templateUrl){\r\n                return attrs.templateUrl;\r\n            }\r\n            return \"views/vdi/common/ui-web-upload.html\";\r\n        },\r\n        scope: {\r\n            config:\"=uiUploadConfig\",\r\n            finishHandel:\"&\"\r\n        },\r\n        controller: [\"$scope\", function(scope){\r\n            scope.$on(\"progress\", function(e, size){\r\n                if(size.id === scope.upload_id){\r\n                    scope.progressName = size.name\r\n                    scope.isUploading = true;\r\n                    var percent = size.loaded / size.total * 100;\r\n                    if(isNaN(percent)) {\r\n                        percent = 0;\r\n                    }\r\n                    scope.progressPercent = percent.toFixed(2) + \"%\";\r\n                    if(scope.progressPercent === \"100.00%\"){ scope.isUploading = false; }\r\n                    // \r\n                    scope.$apply();\r\n                }\r\n            });\r\n            scope.allowUpload = allowUpload;\r\n            scope.uploadISOSize = null;\r\n\r\n        }],\r\n        link: function(scope, element, attrs){\r\n            scope.upload_id = attrs.uiWebUpload;\r\n            scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n            scope.$on(\"localizeLanguageChanged\", function(){\r\n                // applyapply\r\n                setTimeout(function(){\r\n                     scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n                     scope.$apply();\r\n                });\r\n            });\r\n\r\n            //  true \r\n            //  scope \r\n            if(attrs.uiWebUploadTest) {\r\n                var degfn = scope.$parent.$watch(attrs.uiWebUploadTest, function (v) {\r\n                    scope.disableTest = v;\r\n                });\r\n                scope.$on(\"$destroy\", degfn);\r\n                scope.disableTest = false;\r\n            } else {\r\n                scope.disableTest = true;\r\n            }\r\n\r\n            var filetype,url;\r\n            var form = element.find(\"form\");\r\n            form.attr(\"action\", url);\r\n            function checkConfig(file,config){\r\n                var filetype = attrs.uiUploadType;\r\n                var maxSize = attrs.uiUploadLimit;\r\n                var url = attrs.uiUploadUrl;\r\n\r\n                if(!url){\r\n                    throw new Error(\"no url config\");\r\n                    return false;\r\n                }\r\n                var typematch = true;\r\n                if(filetype && file) {\r\n                    typematch = (new RegExp(\"\\\\.(\" + filetype + \")$\")).test(file.name);\r\n                    if(!typematch) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"\"),\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if(maxSize){\r\n                    maxSize = parseInt(maxSize);\r\n                    if(isNaN(maxSize)) {\r\n                        return console.error(\"invalid upload limit:\", attrs.uiUploadLimit);\r\n                    }\r\n                    if(file.size > maxSize * Math.pow(2,30)) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"\") + \"(\"+ maxSize +\"G)\",\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n                if(file.size === 0){\r\n                    $.bigBox({\r\n                        title : $$$I18N.get(\"INFOR_TIP\"),\r\n                        content : $$$I18N.get(\"\"),\r\n                        icon : \"fa fa-warning shake animated\",\r\n                        timeout : 6000\r\n                    });\r\n                    return false;\r\n                }\r\n                else{\r\n                    return true;\r\n                }\r\n            }\r\n            function clearDOM(){\r\n                var input = element.find(\"input[type=file]\");\r\n                input.after(input.clone(true).val(''));\r\n                input.remove();\r\n                scope.isUploading = false;\r\n                scope.progressSize = 0;\r\n            }\r\n            function finish(){\r\n                $rootScope.uploadPool[attrs.uiWebUpload] = undefined;\r\n                delete $rootScope.uploadPool[attrs.uiWebUpload];\r\n            }\r\n            function success(res){\r\n                if(typeof scope.finishHandel === \"function\"){\r\n                    scope.finishHandel({response: res});\r\n                }\r\n            }\r\n            element.find(\"input[type=file]\").on(\"change\", function(e){\r\n                var file = e.target.files[0];\r\n                if(!file){\r\n                    return ;\r\n                }\r\n                // var conf = scope.config;\r\n                var isValid = checkConfig(file);\r\n                \r\n                if(isValid){\r\n                    // $.bigBox({\r\n                    //  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                    //  content : $$$I18N.get(\"INFOR_UPISO\"),\r\n                    //  iconSmall : \"fa fa-warning shake animated\",\r\n                    //  timeout : 5000\r\n                    // });\r\n\r\n                    var data = new FormData();\r\n                    // \r\n                    if(attrs.uiWebUploadParams) {\r\n                        $.each(scope.$eval(attrs.uiWebUploadParams), function(k, v){\r\n                            data.append(k, v);\r\n                        });\r\n                    }\r\n                    data.append(attrs.uiWebUploadName || e.target.name, file);\r\n                    scope.progressName = file.name;\r\n                    scope.progressSize = \"(\" + (file.size / Math.pow(2,20)).toFixed(2) + \"M)\";\r\n\r\n                    $http.post($Domain + attrs.uiUploadUrl, data, {\r\n                        transformRequest: function(config){\r\n                            window.XMLHttpRequest = function(a, b, c, e){\r\n                                window.XMLHttpRequest = org;\r\n                                var xhr = new org(a, b, c, e);\r\n                                $rootScope.uploadPool[attrs.uiWebUpload] = xhr;\r\n                                xhr.open = function(q,w,e,r,t,y){\r\n                                    xhr.open = undefined;\r\n                                    delete xhr.open;\r\n                                    if(xhr.upload){\r\n                                        xhr.upload.addEventListener(\"progress\", function(e){\r\n                                            $rootScope.$broadcast(\"progress\", {\r\n                                                id: attrs.uiWebUpload,\r\n                                                name: file.name,\r\n                                                loaded: e.loaded,\r\n                                                position: e.position,\r\n                                                total: e.total,\r\n                                                totalSize: e.totalSize\r\n                                            });\r\n                                            \r\n                                        });\r\n                                        xhr.addEventListener(\"abort\", finish);\r\n                                    }\r\n                                    return org_open.call(xhr, q, w, e, r, t, y);\r\n                                }\r\n                                return xhr;\r\n                            };\r\n                            return config;\r\n                        },\r\n                        headers: {\"Content-Type\": undefined}\r\n                    }).then(function(res){\r\n                        clearDOM();\r\n                        finish(res);\r\n                        success(res);\r\n                        $rootScope.$broadcast(\"finishUpload\", true, file.name);\r\n                    },function(){\r\n                        clearDOM();\r\n                        finish();\r\n                    });\r\n                }\r\n            });\r\n                \r\n            element.find(\"button[type='button']\").on(\"click\", function(e){\r\n                $(this).prev(\"input[type=file]\").click();\r\n            });\r\n            if(attrs.btnClass) {\r\n                element.find(\"button[type='button']\").removeClass(\"btn-primary\").addClass(attrs.btnClass);\r\n            }\r\n            if(attrs.iconClass) {\r\n                element.find(\".icon\").removeClass(\"icon-jj-Upload\").addClass(attrs.iconClass);\r\n            }\r\n\r\n            element.find(\"#abortBtn\").on(\"click\", function(e){\r\n                var xhr = $rootScope.uploadPool[attrs.uiWebUpload];\r\n                xhr && xhr.abort();\r\n                clearDOM();\r\n                scope.$apply();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.service(\"warnBox\",[function(){\r\n    this.warn = function(content, id, callback){\r\n        if(!$(\"#warnBox\").length){\r\n            $(\"body\").append(\"<div id='warnBox'></div>\");\r\n        }else{\r\n            $(\"#warnBox\").show();\r\n        }\r\n        $(\"body #warnBox\").append(\"<div class='box warnBox\"+id+\"'><i class='fa fa-bell'></i><div class='content'><div class='btn-close'><span></span></div><p class='detail' title=\"+content+\">\"+content+\"</p></div></div>\")\r\n        if($(\"body .warnBox\"+id+\" .detail\").height()>38){\r\n            $(\"body .warnBox\"+id+\" .detail\").addClass('highHeight');\r\n        }\r\n        $(\"#warnBox .warnBox\"+id+\" .btn-close\").click(function(e){\r\n            callback(id);\r\n        })\r\n        setTimeout(function(){\r\n            if($(\"#warnBox .warnBox\"+id+\"\")){\r\n                callback(id);\r\n            }\r\n        }, 30000)\r\n    },\r\n    this.close = function(id){\r\n        $(\"body .box.warnBox\"+id+\"\").remove();\r\n        if(!$(\"#warnBox\").children().length){\r\n            $(\"#warnBox\").hide();\r\n        }else{ $(\"#warnBox\").show(); }\r\n    }\r\n}])\r\n.controller(\"TaskListController\", [\"$scope\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\",\"$rootScope\", \"warnBox\", function($scope, task, $location, $$$I18N, UserRole,$rootScope,warnBox){\r\n    $scope.toggleTaskList = function(){\r\n        $(\"body\").toggleClass(\"show_prog\");\r\n    };\r\n    let user;\r\n    let taskTimer = null;\r\n    $scope.$on(\"NOAUTH\", () => {\r\n        user = null;\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"STOPLOG\", function(){\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"AUTHED\", () => {\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    });\r\n    if(UserRole.currentUser){\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    }\r\n    $scope.rows = [];\r\n    var data = {};\r\n    $scope.$on(\"instanceIDS\", function($event, ids){\r\n        data.instances = ids;\r\n    });\r\n    $scope.$on(\"imageIDS\", function($event, ids){\r\n        data.images = ids;\r\n    });\r\n    $scope.$on(\"clientIDS\", function($event, ids){\r\n        data.clients = ids;\r\n    });\r\n    $scope.$on('modeIDS', function($event, ids){\r\n        data.modes = ids;\r\n    });\r\n    $scope.$on('nodes', function($event, ids){\r\n        data.nodes = ids;\r\n    });\r\n    $scope.$on('manageNetworkIDS', function($event, ids){\r\n        data.manage_networks = ids;\r\n    })\r\n    $scope.$on('personpools',function($event,ids){\r\n        data.personpools=ids;\r\n    })\r\n    var lists = [], flag = false;\r\n    function schedule(){\r\n        var postData = data && Object.keys(data).map(function(key){\r\n            // if(key !== \"clients\"){\r\n                return {\r\n                    key: key,\r\n                    ids: data[key]\r\n                };                \r\n            // }\r\n            // else{\r\n            //     return {\r\n            //         key: key,\r\n            //         ids: []\r\n            //     };    \r\n            // }\r\n        });\r\n        task.post(postData,\r\n            function(res){\r\n                $scope.rows = res.results.tasks.filter(item => user.real_name ===  item.user);\r\n                \r\n                Object.keys(res.results).forEach(function(key){\r\n                    if(key !== \"tasks\"){\r\n                        $scope.$root && $scope.$root.$broadcast(key + \"RowsUpdate\", res.results[key]);\r\n                    }\r\n                });\r\n                for(var i in res.results.notifies){\r\n                    var item = res.results.notifies[i], color = '#004d60', content;\r\n                    if( lists[item.id] == undefined ){\r\n                        lists[item.id] = item;\r\n                        if(item.waringtype === 0){\r\n                            warnBox.warn(item.content, item.id, function(ID){\r\n                                warnBox.close(ID);\r\n                                task.put({notify_id: ID}, function(res){  })\r\n                            })\r\n                        }\r\n                        else{\r\n                            if(item.waringtype === 1){\r\n                                color = \"#004d60\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n\r\n                            }\r\n                            else{\r\n                                color = \"#C46A69\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n                            }\r\n                            $.bigBox({\r\n                                title:$$$I18N.get('waringtype'+item.waringtype),\r\n                                content:content,\r\n                                color : color,\r\n                                timeout : 3000\r\n                            }, function(){\r\n                                task.put({notify_id: item.id}, function(res){\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                taskTimer = setTimeout(schedule, 3000);\r\n            },\r\n            function(){\r\n                taskTimer = setTimeout(schedule, 10000);\r\n            }\r\n        );\r\n        for(var k in data){\r\n            data[k] = undefined;\r\n            delete data[k];\r\n        }\r\n    }\r\n\r\n}])\r\n.controller(\"pageHeaderController\", [\"$scope\", \"UserAuth\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\", \"desktopHelpBox\",function($scope, Auth, task, $location, $$$I18N, UserRole, desktopHelpBox){\r\n    $scope.logout = function(){\r\n        Auth.logout();\r\n        desktopHelpBox.close();\r\n    };\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        desktopHelpBox.close();\r\n    });\r\n    $scope.$on(\"DMS\", function(e,dms){\r\n        $scope.dmsURL = dms;\r\n        $$$storage.setSessionStorage('DMS', dms);\r\n    })\r\n    $scope.dmsURL = $$$storage.getSessionStorage('DMS') || 'nodms';\r\n    \r\n}])\r\n.controller(\"LogoController\", [\"$scope\",\"settings\", \"$Domain\", \"$$$version\", function($scope, settings, $Domain, $$$version){\r\n    $scope.domain = $Domain;\r\n    $scope.version = $$$version;\r\n    $scope.languages = settings.languages;\r\n    $scope.currentLang = settings.currentLang;\r\n}])\r\n.controller(\"SkinController\", [\"$scope\", function($scope){\r\n    $scope.changeSkin = function(theme){\r\n        $scope.$root.$broadcast(\"changeSkin\", theme)\r\n    }\r\n}])\r\n.controller(\"userLoginInfoController\", [\"$scope\", \"UserRole\", function($scope, Role){\r\n    $scope.loginUser = Role.currentUser;\r\n    $scope.$on(\"AUTHED\", function(name, userInfo){\r\n        $scope.loginUser = userInfo;\r\n    });\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        $scope.loginUser = null;\r\n    });\r\n}])\r\n.controller(\"AlarmController\", [\"$scope\", \"$modal\", \"SystemAlarm\", \"AlarmHistory\", function($scope, $modal, alarm, AlarmHistory){\r\n    $scope.isOpen = false;\r\n    $scope.open = function(){\r\n        $scope.isOpen = true;\r\n    }\r\n    $scope.close = function(e){\r\n        if(e)\r\n            e.stopPropagation();\r\n        $scope.isOpen = false;\r\n    }\r\n    // function findDif(oldArray, newArray, difAttr){\r\n    //     if(newArray.length){\r\n    //         var length = oldArray.length>=newArray.length?oldArray.length:newArray.length;\r\n    //         var difs = [];\r\n    //         for(var i=0; i<length; i++){\r\n    //             if(newArray[i]){\r\n    //                 var different = oldArray.filter(function(item){ return item[difAttr] == newArray[i][difAttr] })[0];\r\n    //                 if(!different){ difs.push(newArray[i]) };\r\n    //             }\r\n    //         }\r\n    //         return difs;\r\n    //     }else{ return []; }\r\n    // };\r\n\r\n    // var oldAlarms = [];\r\n    $scope.$on(\"alarmsRowsUpdate\", function($event, data){\r\n        $scope.alarms = data;\r\n        // if(!$scope.isOpen){\r\n        //     var unreads = [];\r\n        //     data.forEach(function(item){\r\n        //         if(!item.is_read){ unreads.push(item) }\r\n        //     })\r\n        //     if(unreads.length){\r\n        //         $scope.open();\r\n        //         setTimeout(function(){\r\n        //             $scope.close();\r\n        //         }, 30000)\r\n        //     }\r\n        // }\r\n\r\n        // var difs = findDif(oldAlarms, data, 'id');\r\n        // if(!$scope.isOpen && difs.length){\r\n        //     oldAlarms = data;\r\n        //     $scope.open();\r\n        //     setTimeout(function(){\r\n        //         $scope.close();\r\n        //     }, 30000)\r\n        // }\r\n    })\r\n    $scope.delete = function(){\r\n        AlarmHistory.setRead({ids: $scope.alarms.map(function(item){ return item.id; })},function(res){\r\n            $scope.alarms = [];\r\n            $scope.isOpen = false;\r\n        })\r\n    }\r\n}])\r\n.filter(\"interfaceFilter\",[function(){\r\n    return function(data,idx,nets){\r\n        var invalidArr = [];\r\n        nets.forEach((n,i) => {\r\n            if(i !== idx && n._data_dev && n._data_dev._dev){\r\n                invalidArr.push(n._data_dev._dev);\r\n            }\r\n        });\r\n        return data.filter(function(d){\r\n           if(invalidArr.indexOf(d._dev) === -1){\r\n                return true;\r\n           }\r\n           return false;\r\n        });\r\n    }\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/vdi.js"],"sourceRoot":""}