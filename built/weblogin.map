{"version":3,"sources":["webpack:///webpack/bootstrap 73c0292a4c28d0d1ccce","webpack:///./js/vdi/config.js","webpack:///./js/vdi/os-types.json","webpack:///./personal_login/js/webLogin.js","webpack:///./resources/info.json","webpack:///./js/ng/ng.controllers.js","webpack:///./js/ng/ng.directives.js","webpack:///./js/vdi/vdi.js"],"names":["window","$$$storage","getSessionStorage","key","sessionStorage","getItem","setSessionStorage","value","setItem","clearSessionStorage","clear","codeData","i18nData","imagesData","firstKey","ng","angular","module","supportedOems","getSupportedOEMs","currentOEM","host","location","hostname","hasBootstrap","domain","protocol","controllerDomain","interfaceDomain","vdiEnvironment","origin","main","constant","splitDomain","service","get","load","langCode","cb","loadOEMResources","factory","languages","Object","keys","map","currentLang","require","config","$httpProvider","interceptors","push","$q","$root","$$$MSG","test","url","withCredentials","reject","console","log","info","arguments","code","message","res","data","$broadcast","href","replace","ignoreAnyRequestError","$","bigBox","title","content","color","icon","timeout","bootstrap","oem","oemData","alert","lang","images","$body","document","body","theme","pathname","addClass","attr","fadeIn","$$$MAIN_MODULE","concat","error","when","getJSON","done","codeResponse","langResponse","imagesResponse","registerLazyService","fail","statusXhr","langXhr","status_ha","statusResponse","haResponse","JSON","parse","current_lang_type","isSplitBrain","result","is_split_brain","isInitPage","isPersonalLoginPage","isControlNode","is_control_node","isSplitBrainPage","start","roles","ip","initCurrentUser","length","navigator","language","split","toLowerCase","list","resources","ret","forEach","item","flagCode","name","translation","userId","ajax","method","stringify","user_id","dataType","oldInfo","user","app","controller","$scope","$http","$rootScope","$timeout","$$$os_types","localize","$$$I18N","webCtrl","deskData","cname","userInfo","switch","netError","version","showPanel","panel","allPanels","p","then","cmpVer","build","webLogin","loading","status","catch","err","password","modifyPsd","$on","event","callback","e","d","ctrlSend","keycode","keyCode","which","username","selectCtrl","i","perPageCount","mockData","arr","o","vms","$emit","toback","v","k","os_type","indexOf","src","next","prev","dataset","connectVnc","loadingbuffer","open","id","display_name","prevPage","filter","nextPage","registerCtrl","tipsShow","webRegister","new_password","confirmPsd","registerTips","isSubmit","goback","flag","len","every","it","run","setLang","directive","restrict","template","link","iElm","iAttrs","imgSrc","$route","$animate","settings","scope","element","attrs","on","preventDefault","ribbon","currentBreadcrumb","updateBreadcrumb","crumbs","breadCrumb","reverse","smartActions","userLogout","$this","SmartMessageBox","text","buttons","ButtonPressed","root_","setTimeout","logout","resetWidgets","widresetMSG","localStorage","reload","launchFullscreen","hasClass","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","removeClass","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","minifyMenu","toggleClass","effect","toggleMenu","toggleShortcut","shortcut_dropdown","is","shortcut_buttons_hide","shortcut_buttons_show","find","click","mouseup","target","has","animate","height","actionEvents","documentElement","isDefined","action","actionEvent","append","smartbgimage","fadeOut","prop","bind","$html","bgurl","css","$logo","removeClassPrefix","remove","prepend","breadcrumbs","setBreadcrumb","$compile","$watch","newVal","oldVal","updateDOM","empty","crumb","li","localizeText","$window","$RESOURCE","encodeHTML","txt","tmplReg","interestAttrReg","ready","currentLocaleData","getLangUrl","sourceText","translate","transkey","onAttrChange","tmpl","myhtml","match","index","myattr","html","$observe","isReady","transclude","timer","timer_handle","topmenu","first","jarvismenu","accordion","speed","menu_speed","closedSign","openedSign","number","fn","slimScroll","getElement","navs","cancel","$location","isChild","active","isActive","viewLocation","path","hasIcon","hasIconCaption","iconCaption","getItemUrl","view","getItemTarget","parentCtrls","navCtrl","navgroupCtrl","setActive","openParents","parents","each","el","parent","trim","trigger","ctrl","items","loadItem","loadedItem","onLoad","addItem","refresh","btn","currentTarget","button","onRefresh","total","activityCtrl","mytest","$badge","currentContent","loadContent","footer","newContent","oldContent","contentCtrl","setup_widget_desktop","jarvisWidgets","enableJarvisWidgets","grid","widgets","deleteSettingsKey","settingsKeyLabel","deletePositionKey","positionKeyLabel","sortable","buttonsHidden","toggleButton","toggleSpeed","onToggle","deleteButton","deleteClass","deleteSpeed","onDelete","editButton","editPlaceholder","editClass","editSpeed","onEdit","colorButton","fullscreenButton","fullscreenClass","fullscreenDiff","onFullscreen","customButton","customClass","customStart","customEnd","buttonOrder","opacity","dragHandle","placeholderClass","indicator","indicatorTime","timestampPlaceholder","timestampFormat","refreshButton","refreshButtonClass","labelError","labelUpdated","labelRefresh","labelDelete","afterLoad","rtl","onChange","onSave","ajaxnav","navAsAjax","setup_widget_mobile","enableMobileWidgets","setup_widgets_desktop","device","class","$$$IMAGES","modelCtrl","validate","val","vals","Array","isArray","reg","isvalide","parser","reduce","b","formatter","join","undefined","viewChangeListener","$setValidity","$modelValue","$isEmpty","$parsers","$formatters","$viewChangeListeners","ngModel","isValid","format","date","fmt","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","RegExp","$1","getFullYear","substr","$modal","openModal","obj","init","delTips","delete_rows","delParm","nodelete_rows","nodelTips","$modalInstance","deleteName","row","nodeleteName","ok","close","size","users","selecteduser","node","selectUser","children","contents","$resource","$Domain","query","post","put","loadISO","save","lun","isUndefined","vendor","type2str","local","iscsi","netfs","fc","type","stauts2str","running","building","stauts","$sce","trustAsHtml","slash","nat","bridge","vlan","toFixed","input","searchText","searchName","outPut","$filterProvider","register","pageSize","totalPage","ceil","min","max","slice","disabled","dialog","templateUrl","dialogUrl","dialogSize","dismiss","___dialog","$filter","getPosition","ele","st","scrollTop","sl","scrollLeft","cw","clientWidth","ch","clientHeight","sw","scrollWidth","sh","scrollHeight","ow","offsetWidth","oh","offsetHeight","x","pageX","y","pageY","getCurrentPage","Number","currentPage","getCurrentRows","getPageSize","pagesize","context_wrapper","hide","getFilterRows","rows","checkAll","_all","_ignore","_selected","checkedAll","selectAllChange","checkOne","some","sort","asc","a","pageSizeChange","pageChange","currentItem","de","handler","$apply","menu","offset","pos","top","left","stopPropagation","conroller","ctrls","getStart","current","getEnd","end","currentCount","getCurrentCount","$interval","dereg","fn_update_help_info","$$path","help_text","myTips","show","contextmenuDisabled","contextmenuEventName","lastText","btnUnable","steps","currentStep","moveWth","defaults","prevBtnText","nextBtnText","doneBtnText","stepIndex","go","select","step","s","selected","stepScope","getCurrentIndex","getMarginValue","is_dirty","stepEventName","$$nextSibling","showPrev","isLast","doneEventName","addStep","jumpStep","removeStep","insertStep","_idx","wizardWth","outerWidth","_wth","eq","testValid","wizard","options","Highcharts","setOptions","global","useUTC","init_data","time","Date","getTime","$parent","refresh_time","hc_options","chart","renderTo","yAxis","series","highcharts","Chart","drawPoint","datetime","hc_series","drawpoint","reset_highcharts","destroy","newvalue","delegate","ip_pattern","elm","ngmodelctl","ngrequiredctl","viewValue","numKey","ctrlKey","num","nextValue","isNaN","ngModelCtrl","required","ipRequired","$eval","CHECKTOOLS","checkIP","parts","numre","valid","parseInt","ipformatNum","pow","ip2long","checkRange","s_ip","e_ip","c","popEl","$input","after","$render","modelVal","modelValArr","$setPristine","idx","$setViewValue","nextEles","nextAll","focus","prevAll","selectionStart","selectionEnd","filtertext","lastFilter","lastFiltedResult","add_selected","getUsers","filterUser","copy","user_name","real_name","nodes","add_select_rows","$event","APIadmin","APIuser","APIdomain","expandedNodes","_users","seRows","rmRows","common_users","formatData","iteration","childName","_is_last","oldlen","splice","removeNoChildrenDeparts","noUserFilter","walk","dept_id","get_admin","deferred","defer","resolve","promise","get_user","query_tree","get_domain","all","typeName","userData","domain_users","_name","getLastLevelNodes","obj_levels","arrays","levels","remove_selected","lastRow2","shiftKey","begin_idx","end_idx","lastRow","add_remove_rows","ltor","rtol","last","menuItems","allMenuItems","apply","$templateCache","userNumber","priority","addMax","addMin","is_dot","String","temp","ctrKey","keydown","_code","_valsplit","add","round","setValidation","newval","exp","abs","org","XMLHttpRequest","org_open","prototype","allowUpload","FormData","uploadPool","finishHandel","upload_id","progressName","isUploading","percent","loaded","progressPercent","uploadISOSize","uiWebUpload","btnName","uiUploadBtnName","uiWebUploadTest","degfn","disableTest","filetype","form","checkConfig","file","uiUploadType","maxSize","uiUploadLimit","uiUploadUrl","Error","typematch","clearDOM","clone","progressSize","finish","success","response","files","uiWebUploadParams","uiWebUploadName","transformRequest","xhr","q","w","r","t","upload","addEventListener","position","totalSize","call","headers","btnClass","iconClass","abort","warn","task","UserRole","warnBox","toggleTaskList","taskTimer","clearTimeout","currentUser","schedule","ids","instances","clients","modes","manage_networks","personpools","lists","postData","results","tasks","notifies","waringtype","ID","notify_id","Auth","desktopHelpBox","dms","dmsURL","$$$version","changeSkin","Role","loginUser","alarm","AlarmHistory","isOpen","alarms","delete","setRead","nets","invalidArr","n","_data_dev","_dev"],"mappings":"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","file":"weblogin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/devbuild/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 170);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73c0292a4c28d0d1ccce","/**\r\n * 这个文件会在每个独立页面用到，如：init, index, templateXXX\r\n */\r\n\r\n// TODO: 移动到基础代码\r\nwindow.$$$storage = {\r\n\tgetSessionStorage(key){\r\n\t\treturn sessionStorage.getItem('vdi_'+ key);\r\n\t},\r\n\tsetSessionStorage(key, value){\r\n\t\tsessionStorage.setItem('vdi_'+ key, value);\r\n\t},\r\n\tclearSessionStorage(){\r\n\t\tsessionStorage.clear()\r\n\t}\r\n}\r\n\r\n// 提供翻译的闭包变量\r\nlet codeData = {};\r\nlet i18nData = {};\r\nlet imagesData = {};\r\n\r\nlet firstKey; // 记录第一个支持的 OEM，没有其它选择的时候使用这个\r\nlet ng = angular.module(\"ng\");\r\nlet supportedOems = getSupportedOEMs();\r\nlet currentOEM = null;\r\n\r\nlet host = location.hostname;\r\nlet hasBootstrap = false;\r\n\r\n\r\n// 定义后端接口地址\r\nlet domain = location.protocol + \"//\" + host + \":8081\"; // 多数用这个\r\nlet controllerDomain = location.protocol + \"//\" + host + \":19891\"; // 很少用\r\nlet interfaceDomain = location.protocol + \"//\" + host + \":19893\"; // 很少用\r\nif(window.vdiEnvironment === \"development\") {\r\n\thost = $$$storage.getSessionStorage('dev_host');\r\n\t// use dev_host\r\n\tif(host) {\r\n\t\tdomain = \"http://\" + host + \":8081\";\r\n\t\tcontrollerDomain = \"http://\" + host + \":19891\";\r\n\t\tinterfaceDomain = \"http://\" + host + \":19893\";\r\n\t} else {\r\n\t\t// use mock server\r\n\t\tdomain = controllerDomain = interfaceDomain = location.origin;\r\n\t}\r\n}\r\n\r\nmain();\r\n\r\n/* 定义一些 angular 服务 */\r\nng.constant(\"$Domain\", domain);\r\nng.constant(\"$controllerDomain\", controllerDomain);\r\nng.constant(\"$interfaceDomain\", interfaceDomain);\r\nng.constant(\"$splitDomain\", location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\");\r\nlet splitDomain = location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\";\r\nng.service(\"$RESOURCE\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn supportedOems[key];\r\n\t};\r\n\tthis.load = function(langCode, cb){\r\n\t\tloadOEMResources(langCode, cb);\r\n\t};\r\n}]);\r\n\r\nng.factory(\"settings\", [function(){\r\n\treturn {\r\n\t\tlanguages: Object.keys(supportedOems).map(function(key){\r\n\t\t\treturn supportedOems[key];\r\n\t\t}),\r\n\t\tcurrentLang: supportedOems[currentOEM]\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$MSG\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn codeData[key] || \"\";\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$I18N\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn i18nData[key] || \"\";\r\n\t};\r\n}]);\r\nng.service(\"$$$IMAGES\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn imagesData[key] || \"\";\r\n\t};\r\n}]);\r\nng.constant(\"$$$os_types\", require(\"./os-types\"));\r\nng.config([\"$httpProvider\", function($httpProvider){\r\n\t$httpProvider.interceptors.push([\"$q\", \"$rootScope\", \"$$$MSG\", function($q, $root, $$$MSG){\r\n\t\treturn {\r\n\t\t\t\"request\": function(config){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(config.url)){\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(/\\.html$/i.test(config.url)) {\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(!/^https?:\\/\\//.test(config.url)) {\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\tconfig.url = domain + config.url;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t\"requestError\": function(reject){\r\n\t\t\t\tconsole.log(\"REQ_ERROR\");\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"responseError\": function(reject){\r\n\t\t\t\tconsole.log(\"RES_ERROR\", arguments);\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tcode: 100,\r\n\t\t\t\t\tmessage: $$$MSG.get(\"返回信息格式错误\"),\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"response\": function(res){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(res.config.url)){\r\n\t\t\t\t\tif(/\\/thor\\/toolkit\\//.test(res.config.url) || /\\/v1\\/(?:node|network)\\//.test(res.config.url)){\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tswitch(res.data.code){\r\n\t\t\t\t\t\t\tcase 17001:\r\n\t\t\t\t\t\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 11011:\r\n\t\t\t\t\t\t\t\t$$$storage.setSessionStorage('returnUrl', location.href)\r\n\t\t\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif(/\\/thor\\/home\\/tasklog/.test(res.config.url)){\r\n\t\t\t\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(window.ignoreAnyRequestError) { return res; }\r\n\t\t\t\t\t\t\t\t$.bigBox && $.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n\t\t\t\t\t\t\t\t\tcontent : $$$MSG.get(res.data.code)==''?res.data.message:$$$MSG.get(res.data.code),\r\n\t\t\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n}]);\r\n\r\n/**\r\n * 启动 angular app\r\n * @param {String} oem oem 名字\r\n */\r\nfunction bootstrap(oem){\r\n\tvar oemData = supportedOems ? supportedOems[oem] : null;\r\n\tif(!oemData) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"加载资源出错！\");\r\n\t\t}\r\n\t}\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tvar $body = $(document.body);\r\n\t\tvar theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t\tif(!/personal_login/.test(location.pathname)) {\r\n\t\t\t$body.addClass(theme);\r\n\t\t\t$(\"#vdi_skins_url\").attr(\"href\", `/resources/pkg/${oem}/skins.css`);\r\n\t\t\t$body.fadeIn(1000);\r\n\t\t}\r\n\t\t\r\n\t\t// 仅开发模式提示\r\n\t\tif(window.vdiEnvironment === \"development\" && !window.$$$MAIN_MODULE) {\r\n\t\t\treturn alert(\"main module is not defined!\");\r\n\t\t}\r\n\t\tangular.bootstrap(document, [].concat(window.$$$MAIN_MODULE));\r\n\t\thasBootstrap = true;\r\n\t}\r\n}\r\n\r\n/**\r\n * 加载指定的 OEM 资源\r\n * @param {String} oem 要加载的 OEM 资源\r\n * @param {Function} cb 加载成功后的回调\r\n */\r\nfunction loadOEMResources(oem, cb){\r\n\tif(!oem) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"获取资源 key 失败！\");\r\n\t\t}\r\n\t}\r\n\tif(!(oem in supportedOems)) {\r\n\t\tconsole.error(\"unsupported resource key:\", oem);\r\n\t\toem = Object.keys(supportedOems)[0];\r\n\t}\r\n\tlet oemData = supportedOems[oem];\r\n\t// 先检查后加载\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tcodeData = oemData.code;\r\n\t\ti18nData = oemData.lang;\r\n\t\timagesData = oemData.images;\r\n\t\treturn cb(oemData);\r\n\t}\r\n\t$.when(\r\n\t\t$.getJSON(`/resources/pkg/${oem}/code.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/lang.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/images.js`)\r\n\t).done(function(codeResponse, langResponse, imagesResponse){\r\n\t\tcodeData = oemData.code = codeResponse[0];\r\n\t\ti18nData = oemData.lang = langResponse[0];\r\n\t\timagesData = oemData.images = imagesResponse[0];\r\n\t\tif(!hasBootstrap) {\r\n\t\t\tregisterLazyService();\r\n\t\t\tbootstrap(oem);\r\n\t\t} else {\r\n\t\t\tcb && cb(oemData);\r\n\t\t}\r\n\t}).fail(function(){\r\n\t\tconsole.log(`load ${oem} resource error:`, arguments[2]);\r\n\t});\r\n\tcurrentOEM = oem;\r\n}\r\nfunction main(){\r\n\tvar statusXhr = $.get(controllerDomain + \"/v1/node/status\");\r\n\tvar langXhr = $.get(domain + \"/thor/init/lang\");\r\n\tvar status_ha = $.get(domain + \"/thor/get_controller_ha_status\");\r\n\t$.when(statusXhr, langXhr, status_ha).done(function(statusResponse, langResponse, haResponse){\r\n\t\tif(typeof statusResponse[0] === \"string\") {\r\n\t\t\tstatusResponse[0] = JSON.parse(statusResponse[0])\r\n\t\t}\r\n\t\tvar oem = langResponse[0].current_lang_type;\r\n\t\tvar isSplitBrain = haResponse[0].result.is_split_brain;\r\n\t\tvar isInitPage = /init\\.html$/.test(location.pathname);\r\n\t\tvar isPersonalLoginPage = location.pathname==='/personal_login/';\r\n\t\tvar isControlNode = statusResponse[0].is_control_node;\r\n\t\tvar isSplitBrainPage = /split\\.html$/.test(location.pathname);\r\n\t\tif(isSplitBrainPage) {\r\n\t\t\tif(!isSplitBrain) {\r\n\t\t\t\tlocation.replace(\"/\");\r\n\t\t\t}else{\r\n\t\t\t\tstart();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(isSplitBrain){\r\n\t\t\t\t// $$$storage.clearSessionStorage();\r\n\t\t\t\t$$$storage.setSessionStorage('splitIP', haResponse[0].result.roles[0].ip);\r\n\t\t\t\tlocation.replace(\"split.html\");\r\n\t\t\t} else {\r\n\t\t\t\tif(isControlNode) {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage) {\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart(oem);\r\n\t\t\t\t\t\tinitCurrentUser();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage){\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction start(oem){\r\n\t// 初始化页面默认没有语言\r\n\tif(!oem) {\r\n\t\t// NOTE: 版本是和语言相关的\r\n\t\t// 如果支持多个版本，优先使用系统默认语言\r\n\t\tif(Object.keys(supportedOems).length > 1) {\r\n\t\t\t// 仅仅我们自己的版本支持多语言\r\n\t\t\t// 参考：https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language\r\n\t\t\t// 调试时，使用这段代码将浏览器设置为其它语言\r\n\t\t\t//   navigator.__defineGetter__(\"language\", function(){ return \"en-us\" })\r\n\t\t\tlet lang = navigator.language;\r\n\t\t\tif(lang) {\r\n\t\t\t\tlang = lang.split(\"-\")[0].toLowerCase();\r\n\t\t\t}\r\n\t\t\tif(lang === \"zh\") {\r\n\t\t\t\toem = \"e-vdi\";\r\n\t\t\t} else if(lang === \"en\") {\r\n\t\t\t\toem = \"classEn\";\r\n\t\t\t}\r\n\t\t\tif(!supportedOems[oem]) {\r\n\t\t\t\toem = firstKey;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toem = firstKey; // 否则的话使用仅支持的版本\r\n\t\t}\r\n\t}\r\n\tloadOEMResources(oem, supportedOems);\r\n}\r\n\r\nfunction getSupportedOEMs(){\r\n\tvar list = require(\"../../resources/info\").resources;\r\n\tvar ret = {};\r\n\tlist.forEach(function(item){\r\n\t\tret[item.key] = item;\r\n\t\t// 不知道旧代码为什么要这么做\r\n\t\titem.langCode = item.key;\r\n\t\titem.flagCode = item.key;\r\n\t\titem.language = item.name;\r\n\t\titem.translation = item.title;\r\n\t});\r\n\tfirstKey = list[0].key;\r\n\treturn ret;\r\n}\r\n\r\nfunction initCurrentUser(){\r\n\tvar userId = $$$storage.getSessionStorage('userId');\r\n\tif(!userId) { return; }\r\n\t$.ajax({\r\n\t\tmethod: \"POST\",\r\n\t\turl: domain + \"/thor/user/session\",\r\n\t\tdata: JSON.stringify({\r\n\t\t\tuser_id: userId\r\n\t\t}),\r\n\t\tdataType: 'json'\r\n\t}).done(function(res){\r\n\t\tif(res.code === 0){\r\n\t\t\t// res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t});\r\n\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction registerLazyService(){\r\n\tng.constant(\"$$$version\", i18nData[\"GOD_VERSION\"] || \"dev\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/config.js","module.exports = [{\"key\":\"other\",\"icon\":\"other.png\",\"value\":\"Other\"},{\"key\":\"ArchLinux\",\"icon\":\"linux.png\",\"value\":\"Arch Linux\"},{\"key\":\"ArchLinux_64\",\"icon\":\"linux.png\",\"value\":\"Arch Linux (64 bit)\"},{\"key\":\"Debian\",\"icon\":\"debian.png\",\"value\":\"Debian\"},{\"key\":\"Debian_64\",\"icon\":\"debian.png\",\"value\":\"Debian (64 bit)\"},{\"key\":\"Fedora\",\"icon\":\"fedora.png\",\"value\":\"Fedora\"},{\"key\":\"Fedora_64\",\"icon\":\"fedora.png\",\"value\":\"Fedora (64 bit)\"},{\"key\":\"FreeBSD\",\"icon\":\"linux.png\",\"value\":\"FreeBSD\"},{\"key\":\"FreeBSD_64\",\"icon\":\"linux.png\",\"value\":\"FreeBSD (64 bit)\"},{\"key\":\"Gentoo\",\"icon\":\"linux.png\",\"value\":\"Gentoo\"},{\"key\":\"Gentoo_64\",\"icon\":\"linux.png\",\"value\":\"Gentoo (64 bit)\"},{\"key\":\"Linux\",\"icon\":\"linux.png\",\"value\":\"Other Linux\"},{\"key\":\"MacOS\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server\"},{\"key\":\"MacOS_64\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server (64 bit)\"},{\"key\":\"OpenBSD\",\"icon\":\"linux.png\",\"value\":\"OpenBSD\"},{\"key\":\"OpenBSD_64\",\"icon\":\"linux.png\",\"value\":\"OpenBSD (64 bit)\"},{\"key\":\"OpenSUSE\",\"icon\":\"linux.png\",\"value\":\"openSUSE\"},{\"key\":\"OpenSUSE_64\",\"icon\":\"linux.png\",\"value\":\"openSUSE (64 bit)\"},{\"key\":\"OpenSolaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later\"},{\"key\":\"OpenSolaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later (64 bit)\"},{\"key\":\"Oracle\",\"icon\":\"linux.png\",\"value\":\"Oracle\"},{\"key\":\"Oracle_64\",\"icon\":\"linux.png\",\"value\":\"Oracle (64 bit)\"},{\"key\":\"Other\",\"icon\":\"unknown.png\",\"value\":\"Other/Unknown\"},{\"key\":\"RedHat\",\"icon\":\"redhat.png\",\"value\":\"Red Hat\"},{\"key\":\"RedHat_64\",\"icon\":\"redhat.png\",\"value\":\"Red Hat (64 bit)\"},{\"key\":\"Solaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier\"},{\"key\":\"Solaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier (64 bit)\"},{\"key\":\"Ubuntu\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu\"},{\"key\":\"Ubuntu_64\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu (64 bit)\"},{\"key\":\"Windows2000\",\"icon\":\"win7.png\",\"value\":\"Windows 2000\"},{\"key\":\"Windows2003\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003\"},{\"key\":\"Windows2003_64\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003 (64 bit)\"},{\"key\":\"Windows2008\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008\"},{\"key\":\"Windows2008_64\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008 (64 bit)\"},{\"key\":\"Windows7\",\"icon\":\"win7.png\",\"value\":\"Windows 7\"},{\"key\":\"Windows7_64\",\"icon\":\"win7.png\",\"value\":\"Windows 7 (64 bit)\"},{\"key\":\"Windows8\",\"icon\":\"win8.png\",\"value\":\"Windows 8\"},{\"key\":\"Windows8_64\",\"icon\":\"win8.png\",\"value\":\"Windows 8 (64 bit)\"},{\"key\":\"WindowsNT\",\"icon\":\"win7.png\",\"value\":\"Other Windows\"},{\"key\":\"WindowsNT4\",\"icon\":\"win7.png\",\"value\":\"Windows NT 4\"},{\"key\":\"WindowsVista\",\"icon\":\"win7.png\",\"value\":\"Windows Vista\"},{\"key\":\"WindowsVista_64\",\"icon\":\"win7.png\",\"value\":\"Windows Vista (64 bit)\"},{\"key\":\"Windowsxp\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"Windowsxp_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"WindowsXP\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"WindowsXP_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"Windows 7\",\"icon\":\"win7.png\",\"value\":\"Windows 7 series\"},{\"key\":\"Windows10\",\"icon\":\"win8.png\",\"value\":\"Windows 10\"},{\"key\":\"Windows10_64\",\"icon\":\"win8.png\",\"value\":\"Windows 10 (64 bit)\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/vdi/os-types.json\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","window.$$$MAIN_MODULE = \"webLogin\";\r\nvar app = angular.module('webLogin', [\"app.localize\",\"app.controllers\",\"vdi\"]);\r\n//login 登录控制器\r\napp.controller('webLoginControl', ['$scope', '$http', '$rootScope', '$timeout','$$$os_types','localize','$$$I18N', function($scope, $http, $rootScope, $timeout,$$$os_types,localize,$$$I18N) {\r\n    var webCtrl = this;\r\n    var deskData = null,\r\n        cname = ['toback', 'goback', 'login'];\r\n    webCtrl.userInfo = {}, webCtrl.switch = false,webCtrl.netError=true,webCtrl.version=false;\r\n    //视图控制状态\r\n    webCtrl.showPanel = function(panel) {\r\n        var allPanels = [\"loginPage\", \"registerPage\", \"deskPage\"];\r\n        allPanels.forEach(function(p) {\r\n            webCtrl[p] = false;\r\n        })\r\n        webCtrl[panel] = true;\r\n    }\r\n\r\n\r\n    webCtrl.showPanel(\"loginPage\");\r\n    //获取管理台版本号\r\n    $http({\r\n        method:\"GET\",\r\n        url:\"/thor/permission\"\r\n    }).then(function(res){\r\n        if(!res.data){ return };\r\n        webCtrl.version=true;\r\n        webCtrl.cmpVer=res.data.build;\r\n    })\r\n\r\n    //登录提交数据\r\n    webCtrl.webLogin = function() {\r\n        webCtrl.loading = true;\r\n        $http({\r\n            method: \"post\",\r\n            url:\"/thor/desktop/login\",\r\n            data: webCtrl.userInfo\r\n        }).then(function(res) {\r\n            webCtrl.loading = false;\r\n            var status = res.data.code;\r\n            if (status === 0) {\r\n                webCtrl.showPanel(\"deskPage\");\r\n                deskData = res.data;\r\n            }\r\n            // webCtrl.userInfo.password='';\r\n        }).catch(function(err) {\r\n            webCtrl.loading = false;\r\n            var status=err.data.code;\r\n            if (status === 17003) {\r\n                webCtrl.switch = true;\r\n                webCtrl.info =$$$I18N.get(\"用户名或密码错误\") ;\r\n                webCtrl.userInfo.password='';\r\n            } else if (status === 17096) {\r\n                webCtrl.switch = true;\r\n                webCtrl.info =$$$I18N.get(\"域用户名或密码错误\") ;\r\n                webCtrl.userInfo.password='';\r\n            } else if (status === 17097) {\r\n                webCtrl.switch = true;\r\n                webCtrl.info =$$$I18N.get(\"您没有绑定桌面\") ;\r\n            } else {\r\n                webCtrl.switch = true;\r\n                webCtrl.info =$$$I18N.get(\"服务器或网络出错\") ;\r\n                webCtrl.loading = false;   \r\n            }\r\n        })\r\n    }\r\n\r\n    webCtrl.modifyPsd = function() {\r\n        webCtrl.showPanel(\"registerPage\");\r\n    }\r\n\r\n    $scope.$on(\"getDeskData\", function(event, callback) {\r\n        callback(deskData);\r\n    });\r\n\r\n    //返回操作\r\n    angular.forEach(cname, function(value, key) {\r\n        $scope.$on(value, function(e, d) {\r\n            if (d) {\r\n                webCtrl.showPanel(\"loginPage\");\r\n                webCtrl.userInfo={};\r\n                webCtrl.switch=false;\r\n            }\r\n        })\r\n    });\r\n\r\n    webCtrl.ctrlSend= function(e) {\r\n        var keycode = window.event?e.keyCode:e.which;\r\n        if (webCtrl.userInfo.username && webCtrl.userInfo.password) {\r\n            if(keycode===13){\r\n                webCtrl.webLogin();\r\n            }\r\n        }\r\n    }\r\n}]);\r\n//选择桌面控制器\r\napp.controller('selectDeskControl', ['$scope', '$http','$$$os_types', function($scope, $http,$$$os_types) {\r\n    var selectCtrl = this,\r\n        i = 0,\r\n        perPageCount = 6,\r\n        mockData,\r\n        arr = [],\r\n        o={\r\n            vms:[]  \r\n        };\r\n    $scope.$emit('getDeskData', function(data) {\r\n        mockData = data || o;\r\n    });\r\n\r\n    //返回上一页\r\n    selectCtrl.toback = function() {\r\n        $scope.$emit('toback', true);\r\n    }\r\n\r\n    //所有ostype类型，图片类型\r\n    $scope.$$$os_types =  $$$os_types;\r\n    angular.forEach(mockData.vms, function(value, key) {\r\n        angular.forEach($scope.$$$os_types , function(v, k) {\r\n            if (value['image'].os_type.indexOf(v.key) >= 0) {\r\n                value['image'].src =\"../img/\"+ v.icon;\r\n            }\r\n        });\r\n    });\r\n\r\n    selectCtrl.next = false, selectCtrl.prev = false;\r\n    selectCtrl.dataset = mockData.vms;\r\n    if (!mockData.vms.length) {\r\n        return;\r\n    } else {\r\n        if (mockData.vms.length > perPageCount) {\r\n            selectCtrl.next = true;\r\n        } else {\r\n            selectCtrl.next = false;\r\n        }\r\n    }\r\n    selectCtrl.connectVnc = function(v) {\r\n        selectCtrl.loadingbuffer = true;\r\n        window.open('../browserOpenVNC.html#' + v.id + '&amp;' + 'Windows7' + '&amp;personal' + '&amp;' + v.display_name);\r\n        selectCtrl.loadingbuffer = false;\r\n        return false;\r\n    }\r\n    selectCtrl.prevPage = function() {\r\n        i--;\r\n        if (i <= 0) {\r\n            i = 0;\r\n            selectCtrl.dataset = mockData.vms.filter(function(item, key) {\r\n                return key < perPageCount;\r\n            });\r\n            if (mockData.vms.length > perPageCount) {\r\n                selectCtrl.prev = false;\r\n                selectCtrl.next = true;\r\n            }\r\n            return;\r\n        }\r\n        selectCtrl.dataset = mockData.vms.filter(function(item, key) {\r\n            return key > (perPageCount * i - 1)\r\n        });\r\n        selectCtrl.prev = true;\r\n        selectCtrl.next = true;\r\n    // selectCtrl.flag=false;\r\n    }\r\n\r\n    selectCtrl.nextPage = function() {\r\n        i++;\r\n        if (mockData.vms.length > perPageCount) {\r\n            selectCtrl.dataset = mockData.vms.filter(function(item, key) {\r\n                return key > (perPageCount * i - 1)\r\n            });\r\n            if (selectCtrl.dataset.length > perPageCount) {\r\n                selectCtrl.next = true;\r\n            } else {\r\n                selectCtrl.next = false;\r\n            }\r\n        } else {\r\n            selectCtrl.next = false;\r\n        }\r\n        selectCtrl.prev = true;\r\n    // selectCtrl.flag=true;\r\n    }\r\n}]);\r\n//注册控制器\r\napp.controller('webRegisterController', ['$scope', '$http','$timeout', \"$rootScope\", \"$$$I18N\" ,function($scope, $http,$timeout,$rootScope, $$$I18N) {\r\n    var registerCtrl = this;\r\n    registerCtrl.tipsShow = false;\r\n    registerCtrl.userInfo = {};\r\n    registerCtrl.webRegister=function(){\r\n       if(registerCtrl.userInfo.new_password!=registerCtrl.userInfo.confirmPsd){\r\n           registerCtrl.tipsShow = true;\r\n           registerCtrl.registerTips = $$$I18N.get(\"两次密码输入不一致\");\r\n           registerCtrl.isSubmit=true;\r\n       } else {\r\n           registerCtrl.isSubmit=false;\r\n           registerCtrl.loading = true;\r\n            $http({\r\n                url:\"/thor/desktop/change_password\",\r\n                method: \"post\",\r\n                data: registerCtrl.userInfo\r\n            }).then(function(res) {\r\n                registerCtrl.loading = false;\r\n                if (res.data.code === 0) {\r\n                   registerCtrl.tipsShow = true;\r\n                   registerCtrl.registerTips = $$$I18N.get(\"密码修改成功\");\r\n                   // $rootScope.$broadcast('localizeLanguageChanged');\r\n                    $timeout(function(){\r\n                       $scope.$emit('login', true);\r\n                    },1000)\r\n                }\r\n            }).catch(function(err) {\r\n                registerCtrl.loading = false;\r\n                if(err.data.code===17003){\r\n                    registerCtrl.tipsShow = true;\r\n                    registerCtrl.registerTips = $$$I18N.get(\"用户名或密码错误\");\r\n                    // $rootScope.$broadcast('localizeLanguageChanged');\r\n                } else {\r\n                    registerCtrl.registerTips = $$$I18N.get(\"网络故障\");\r\n                    // $rootScope.$broadcast('localizeLanguageChanged');\r\n                    registerCtrl.loading = false;  \r\n                }\r\n            })\r\n       } \r\n    }\r\n    //回退\r\n    registerCtrl.goback = function() {\r\n        $scope.$emit('goback', true);\r\n    }\r\n\r\n    registerCtrl.ctrlSend=function(e){\r\n        var keycode = window.event?e.keyCode:e.which,flag=false,len,arr=[];\r\n        if(keycode===13){\r\n            len=Object.keys(registerCtrl.userInfo).length;\r\n           for (var key in registerCtrl.userInfo) {\r\n               if (registerCtrl.userInfo[key]) {\r\n                   flag = true;\r\n                   arr.push(flag);\r\n               } else {\r\n                   flag = false;\r\n                   arr.push(flag)\r\n               }\r\n           }\r\n           if (arr.every(function(it){return it===true})) {\r\n               registerCtrl.webRegister();\r\n           }\r\n        }\r\n    }\r\n}]);\r\n//桌面图标，类型常量\r\napp.constant(\"$$$os_types\", [\r\n    {\r\n        \"key\": \"other\",\r\n        \"icon\": \"other.png\",\r\n        \"value\": \"Other\"\r\n    },\r\n    {\r\n        \"key\": \"ArchLinux\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Arch Linux\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"ArchLinux_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Arch Linux (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Debian\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Debian\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Debian_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Debian (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Fedora\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Fedora\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Fedora_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Fedora (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"FreeBSD\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"FreeBSD\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"FreeBSD_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"FreeBSD (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Gentoo\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Gentoo\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Gentoo_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Gentoo (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Linux\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Other Linux\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"MacOS\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Mac OS X Server\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"MacOS_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Mac OS X Server (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenBSD\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"OpenBSD\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenBSD_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"OpenBSD (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenSUSE\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"openSUSE\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenSUSE_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"openSUSE (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenSolaris\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle Solaris 10 10/09 and later\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"OpenSolaris_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle Solaris 10 10/09 and later (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Oracle\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Oracle_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Other\",\r\n        \"icon\": \"unknown.png\",\r\n        \"value\": \"Other/Unknown\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"RedHat\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Red Hat\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"RedHat_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Red Hat (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Solaris\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle Solaris 10 5/09 and earlier\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Solaris_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Oracle Solaris 10 5/09 and earlier (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Ubuntu\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Ubuntu\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Ubuntu_64\",\r\n        \"icon\": \"linux.png\",\r\n        \"value\": \"Ubuntu (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows2000\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows 2000\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows2003\",\r\n        \"icon\": \"win2003.png\",\r\n        \"value\": \"Windows 2003\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows2003_64\",\r\n        \"icon\": \"win2003.png\",\r\n        \"value\": \"Windows 2003 (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows2008\",\r\n        \"icon\": \"win2008.png\",\r\n        \"value\": \"Windows 2008\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows2008_64\",\r\n        \"icon\": \"win2008.png\",\r\n        \"value\": \"Windows 2008 (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows7\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows 7\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows7_64\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows 7 (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows8\",\r\n        \"icon\": \"win8.png\",\r\n        \"value\": \"Windows 8\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows8_64\",\r\n        \"icon\": \"win8.png\",\r\n        \"value\": \"Windows 8 (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsNT\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Other Windows\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsNT4\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows NT 4\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsVista\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows Vista\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsVista_64\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows Vista (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsXP\",\r\n        \"icon\": \"winxp.png\",\r\n        \"value\": \"Windows XP\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"WindowsXP_64\",\r\n        \"icon\": \"winxp.png\",\r\n        \"value\": \"Windows XP (64 bit)\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows 7\",\r\n        \"icon\": \"win7.png\",\r\n        \"value\": \"Windows 7 series\"\r\n    },\r\n    {\r\n        \"key\": \"Windows10\",\r\n        \"icon\": \"win8.png\",\r\n        \"value\": \"Windows 10\"\r\n    \r\n    },\r\n    {\r\n        \"key\": \"Windows10_64\",\r\n        \"icon\": \"win8.png\",\r\n        \"value\": \"Windows 10 (64 bit)\"\r\n    \r\n    },\r\n]);\r\napp.run(['localize',function(localize) {\r\n    localize.setLang();\r\n}]);\r\napp.directive('oemImage', ['localize', function(localize){\r\n        // Runs during compile\r\n        return {\r\n            restrict: 'E', // E = Element, A = Attribute, C = Class, M = Comment\r\n            template:\"<div class='logoWrap'><img ng-src='{{imgSrc}}'></div>\",\r\n            link: function($scope, iElm, iAttrs, controller) {\r\n                var lang=localize.currentLang.langCode;\r\n                if(lang==='fan'){\r\n                    $scope.imgSrc=\"/img/personal_login_logo.png\";\r\n                } else {\r\n                    $scope.imgSrc=\"./img/logo.png\"\r\n                }\r\n            }\r\n        };\r\n    }]);\n\n\n// WEBPACK FOOTER //\n// ./personal_login/js/webLogin.js","module.exports = {\"resource_template\":{\"key\":\"0\",\"title\":\"dev\"},\"resources\":[{\"key\":\"e-vdi\",\"name\":\"E-VDI\",\"title\":\"E-VDI\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"pc\",\"name\":\"云PC\",\"title\":\"云PC\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classCh\",\"name\":\"云教室\",\"title\":\"云教室中文\",\"langType\":\"cn\",\"langDes\":\"中文\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classEn\",\"name\":\"Cloud Class\",\"title\":\"云教室英文\",\"langType\":\"en\",\"langDes\":\"English\",\"clientKey\":\"public\",\"public\":true}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/info.json\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"app.controllers\", [])\r\n\r\n.controller(\"PageViewController\", [\"$scope\", \"$route\", \"$animate\", function($scope, $route, $animate) {\r\n\t// controler of the dynamically loaded views, for DEMO purposes only.\r\n\t// $scope.$on(\"$viewContentLoaded\", function() {\r\n\t// \tconsole.log(\"ffffffff\")\r\n\t// })\r\n}])\r\n.controller(\"LangController\", [\"$scope\", \"settings\", \"localize\", function($scope, settings, localize) {\r\n\t$scope.languages = settings.languages;\r\n\t$scope.currentLang = settings.currentLang || $scope.languages[0];\r\n\t$scope.setLang = function(lang) {\r\n\t\tsettings.currentLang = lang;\r\n\t\t$scope.currentLang = lang;\r\n\t\tlocalize.setLang(lang);\r\n\t\t$$$storage.setSessionStorage('lang_code', lang.langCode)\r\n\t};\r\n\t// set the default language\r\n\t$scope.setLang($scope.currentLang);\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.controllers.js","angular.module('app.main', [])\r\n// initiate body\r\n.directive('body', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\telement.on('click', 'a[href=\"#\"], [data-toggle]', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.factory('ribbon', ['$rootScope', function($rootScope) {\r\n\tvar ribbon = {\r\n\t\tcurrentBreadcrumb: [],\r\n\t\tupdateBreadcrumb: function(crumbs) {\r\n\t\t\tvar breadCrumb = crumbs.reverse();\r\n\t\t\tribbon.currentBreadcrumb = breadCrumb;\r\n\t\t\t$rootScope.$broadcast('navItemSelected', breadCrumb);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ribbon;\r\n}])\r\n\r\n.directive('action', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t/*\r\n\t\t\t * SMART ACTIONS\r\n\t\t\t */\r\n\t\t\tvar smartActions = {\r\n    \r\n\t\t\t    // LOGOUT MSG \r\n\t\t\t    userLogout: function($this){\r\n\t\t\t\r\n\t\t\t\t\t// ask verification\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>\" + $('#show-shortcut').text() + \"</strong></span> ?\",\r\n\t\t\t\t\t\tcontent : $this.data('logout-msg') || \"You can improve your security further after logging out by closing this opened browser\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\") {\r\n\t\t\t\t\t\t\t$.root_.addClass('animated fadeOutUp');\r\n\t\t\t\t\t\t\tsetTimeout(logout, 1000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfunction logout() {\r\n\t\t\t\t\t\twindow.location = $this.attr('href');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// RESET WIDGETS\r\n\t\t\t    resetWidgets: function($this){\r\n\t\t\t\t\t$.widresetMSG = $this.data('reset-msg');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage\",\r\n\t\t\t\t\t\tcontent : $.widresetMSG || \"Would you like to RESET all your saved widgets and clear LocalStorage?\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\" && localStorage) {\r\n\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // LAUNCH FULLSCREEN \r\n\t\t\t    launchFullscreen: function(element){\r\n\t\t\t\r\n\t\t\t\t\tif (!$.root_.hasClass(\"full-screen\")) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t$.root_.addClass(\"full-screen\");\r\n\t\t\t\t\r\n\t\t\t\t\t\tif (element.requestFullscreen) {\r\n\t\t\t\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t\t\t} else if (element.mozRequestFullScreen) {\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t\t\t} else if (element.webkitRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t\t\t} else if (element.msRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.root_.removeClass(\"full-screen\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\t\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t\t\t} else if (document.webkitExitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t   },\r\n\t\t\t\r\n\t\t\t   // MINIFY MENU\r\n\t\t\t    minifyMenu: function($this){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$.root_.toggleClass(\"minified\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$this.effect(\"highlight\", {}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // TOGGLE MENU \r\n\t\t\t    toggleMenu: function(){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t} else if ( $.root_.hasClass(\"menu-on-top\") && $.root_.hasClass(\"mobile-view-activated\") ) {\r\n\t\t\t    \t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t}\r\n\t\t\t    },     \r\n\t\t\t\r\n\t\t\t    // TOGGLE SHORTCUT \r\n\t\t\t    toggleShortcut: function(){\r\n\t\t\t    \t\r\n\t\t\t\t\tif (shortcut_dropdown.is(\":visible\")) {\r\n\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshortcut_buttons_show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// SHORT CUT (buttons that appear when clicked on user name)\r\n\t\t\t\t\tshortcut_dropdown.find('a').click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.location = $(this).attr('href');\r\n\t\t\t\t\t\tsetTimeout(shortcut_buttons_hide, 300);\r\n\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT buttons goes away if mouse is clicked outside of the area\r\n\t\t\t\t\t$(document).mouseup(function(e) {\r\n\t\t\t\t\t\tif (!shortcut_dropdown.is(e.target) && shortcut_dropdown.has(e.target).length === 0) {\r\n\t\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE HIDE\r\n\t\t\t\t\tfunction shortcut_buttons_hide() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"hide\"\r\n\t\t\t\t\t\t}, 300, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.removeClass('shortcut-on');\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE SHOW\r\n\t\t\t\t\tfunction shortcut_buttons_show() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"show\"\r\n\t\t\t\t\t\t}, 200, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.addClass('shortcut-on');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t    }  \r\n\t\t\t   \r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar actionEvents = {\r\n\t\t\t\tuserLogout: function(e) {\r\n\t\t\t\t\tsmartActions.userLogout(element);\r\n\t\t\t\t},\r\n\t\t\t\tresetWidgets: function(e) {\r\n\t\t\t\t\tsmartActions.resetWidgets(element);\r\n\t\t\t\t},\r\n\t\t\t\tlaunchFullscreen: function(e) {\r\n\t\t\t\t\tsmartActions.launchFullscreen(document.documentElement);\r\n\t\t\t\t},\r\n\t\t\t\tminifyMenu: function(e) {\r\n\t\t\t\t\tsmartActions.minifyMenu(element);\r\n\t\t\t\t},\r\n\t\t\t\ttoggleMenu: function(e) {\r\n\t\t\t\t\tsmartActions.toggleMenu();\r\n\t\t\t\t},\r\n\t\t\t\ttoggleShortcut: function(e) {\r\n\t\t\t\t\tsmartActions.toggleShortcut();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (angular.isDefined(attrs.action) && attrs.action != '') {\r\n\t\t\t\tvar actionEvent = actionEvents[attrs.action];\r\n\t\t\t\tif (typeof actionEvent === 'function') {\r\n\t\t\t\t\telement.on('click', function(e) {\r\n\t\t\t\t\t\tactionEvent(e);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('header', function() {\r\n\treturn {\r\n\t\trestrict: 'EA',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t// SHOW & HIDE MOBILE SEARCH FIELD\r\n\t\t\tangular.element('#search-mobile').click(function() {\r\n\t\t\t\t$.root_.addClass('search-mobile');\r\n\t\t\t});\r\n\r\n\t\t\tangular.element('#cancel-search-js').click(function() {\r\n\t\t\t\t$.root_.removeClass('search-mobile');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('ribbon', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\treturn;\r\n\t\t\telement.append('<div class=\"demo\"><span id=\"demo-setting\"><i class=\"fa fa-cog txt-color-blueDark\"></i></span> <form><legend class=\"no-padding margin-bottom-10\">Layout Options</legend><section><label><input name=\"subscription\" id=\"smart-fixed-header\" type=\"checkbox\" class=\"checkbox style-0\"><span>Fixed Header</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-navigation\" class=\"checkbox style-0\"><span>Fixed Navigation</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-ribbon\" class=\"checkbox style-0\"><span>Fixed Ribbon</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-footer\" class=\"checkbox style-0\"><span>Fixed Footer</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-container\" class=\"checkbox style-0\"><span>Inside <b>.container</b> <div class=\"font-xs text-right\">(non-responsive)</div></span></label><label style=\"display:block;\"><input type=\"checkbox\" id=\"smart-topmenu\" class=\"checkbox style-0\"><span>Menu on <b>top</b></span></label> <span id=\"smart-bgimages\"></span></section><section><h6 class=\"margin-top-10 semi-bold margin-bottom-5\">Clear Localstorage</h6><a href=\"javascript:void(0);\" class=\"btn btn-xs btn-block btn-primary\" id=\"reset-smart-widget\"><i class=\"fa fa-refresh\"></i> Factory Reset</a></section> <h6 class=\"margin-top-10 semi-bold margin-bottom-5\">SmartAdmin Skins</h6><section id=\"smart-styles\"><a href=\"javascript:void(0);\" id=\"smart-style-0\" data-skinlogo=\"img/logo.png\" class=\"btn btn-block btn-xs txt-color-white margin-right-5\" style=\"background-color:#4E463F;\"><i class=\"fa fa-check fa-fw\" id=\"skin-checked\"></i>Smart Default</a><a href=\"javascript:void(0);\" id=\"smart-style-1\" data-skinlogo=\"img/logo-white.png\" class=\"btn btn-block btn-xs txt-color-white\" style=\"background:#3A4558;\">Dark Elegance</a><a href=\"javascript:void(0);\" id=\"smart-style-2\" data-skinlogo=\"img/logo-blue.png\" class=\"btn btn-xs btn-block txt-color-darken margin-top-5\" style=\"background:#fff;\">Ultra Light</a><a href=\"javascript:void(0);\" id=\"smart-style-3\" data-skinlogo=\"img/logo-pale.png\" class=\"btn btn-xs btn-block txt-color-white margin-top-5\" style=\"background:#f78c40\">Google Skin</a></section></form> </div>')\r\n\r\n\t\t\t// hide bg options\r\n\t\t\tvar smartbgimage = \"<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>\";\r\n\t\t\t$(\"#smart-bgimages\")\r\n\t\t\t    .fadeOut();\r\n\r\n\t\t\t$('#demo-setting')\r\n\t\t\t    .click(function () {\r\n\t\t\t        $('#ribbon .demo')\r\n\t\t\t            .toggleClass('activate');\r\n\t\t\t    })\r\n\t\t\t/*\r\n\t\t\t * FIXED HEADER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\r\n\t\t\t            $.root_.removeClass(\"fixed-header\");\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED NAV\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED RIBBON\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            //apply\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.addClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-footer')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-page-footer\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-page-footer\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-rtl')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"smart-rtl\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"smart-rtl\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * MENU ON TOP\r\n\t\t\t */\r\n\r\n\t\t\t$('#smart-topmenu')\r\n\t\t\t    .on('change', function (e) {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .prop('checked')) {\r\n\t\t\t            //window.location.href = '?menu=top';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'top');\r\n\t\t\t            location.reload();\r\n\t\t\t        } else {\r\n\t\t\t            //window.location.href = '?';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'left');\r\n\t\t\t            location.reload();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\tif (localStorage.getItem('sm-setmenu') == 'top') {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', true);\r\n\t\t\t} else {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', false);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * INSIDE CONTAINER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"container\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\r\n\t\t\t            if (smartbgimage) {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .append(smartbgimage)\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t                $(\"#smart-bgimages img\")\r\n\t\t\t                    .bind(\"click\", function () {\r\n\t\t\t                        var $this = $(this);\r\n\t\t\t                        var $html = $('html')\r\n\t\t\t                        bgurl = ($this.data(\"htmlbg-url\"));\r\n\t\t\t                        $html.css(\"background-image\", \"url(\" + bgurl + \")\");\r\n\t\t\t                    })\r\n\t\t\t                smartbgimage = null;\r\n\t\t\t            } else {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t            }\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\t\t\t            $(\"#smart-bgimages\")\r\n\t\t\t                .fadeOut();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * REFRESH WIDGET\r\n\t\t\t */\r\n\t\t\t$(\"#reset-smart-widget\")\r\n\t\t\t    .bind(\"click\", function () {\r\n\t\t\t        $('#refresh')\r\n\t\t\t            .click();\r\n\t\t\t        return false;\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * STYLES\r\n\t\t\t */\r\n\t\t\t$(\"#smart-styles > a\")\r\n\t\t\t   .on('click', function() {\r\n\t\t\t        var $this = $(this);\r\n\t\t\t        var $logo = $(\"#logo img\");\r\n\t\t\t        $.root_.removeClassPrefix('smart-style')\r\n\t\t\t            .addClass($this.attr(\"id\"));\r\n\t\t\t        $logo.attr('src', $this.data(\"skinlogo\"));\r\n\t\t\t        $(\"#smart-styles > a #skin-checked\")\r\n\t\t\t            .remove();\r\n\t\t\t        $this.prepend(\"<i class='fa fa-check fa-fw' id='skin-checked'></i>\");\r\n\t\t\t    });\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('breadcrumbController', ['$scope', function($scope) {\r\n\t$scope.breadcrumbs = [];\r\n\t$scope.$on('navItemSelected', function(name, crumbs) {\r\n\t\t$scope.setBreadcrumb(crumbs);\r\n\t});\r\n\r\n\t$scope.setBreadcrumb = function(crumbs) {\r\n\t\t$scope.breadcrumbs = crumbs;\r\n\t}\r\n}])\r\n\r\n.directive('breadcrumb', ['ribbon', 'localize', '$compile', function(ribbon, localize, $compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'breadcrumbController',\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.$watch('breadcrumbs', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal !== oldVal || !element.text()) {\r\n\t\t\t\t\t// update DOM\r\n\t\t\t\t\tscope.updateDOM();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tscope.updateDOM = function() {\r\n\t\t\t\telement.empty();\r\n\t\t\t\tangular.forEach(scope.breadcrumbs, function(crumb) {\r\n\t\t\t\t\tvar li = angular.element('<li data-localize=\"' + crumb + '\">' + crumb + '</li>');\r\n\t\t\t\t\tli.text(localize.localizeText(crumb));\r\n\t\t\t\t\t\r\n\t\t\t\t\t$compile(li)(scope);\r\n\t\t\t\t\telement.append(li);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// set the current breadcrumb on load\r\n\t\t\tscope.setBreadcrumb(ribbon.currentBreadcrumb);\r\n\t\t\tscope.updateDOM();\r\n\t\t},\r\n\t\ttemplate: '<ol class=\"breadcrumb\"></ol>'\r\n\t}\r\n}])\r\n;\r\n\r\n// directives for localization\r\nangular.module('app.localize', [])\r\n.factory('localize', ['$http', '$rootScope', '$window', \"settings\", \"$RESOURCE\", function($http, $rootScope, $window, settings, $RESOURCE){\r\n\t// shared variables for `translate`\r\n\tvar encodeHTML = function(txt){\r\n\t\treturn txt.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t}\r\n\tvar tmplReg = /\\{\\{([^\\}]+)\\}\\}/g;\r\n\tvar interestAttrReg = /^param\\d+$/;\r\n\t// internal flag\r\n\tvar ready = false;\r\n\t// factory\r\n\tvar localize = {\r\n\t\tcurrentLocaleData: {},\r\n\t\tcurrentLang: {},\r\n\t\tsetLang: function(lang) {\r\n\t\t\tif(!lang){\r\n\t\t\t\tlang = settings.languages[0];\r\n\t\t\t}\r\n\t\t\t$RESOURCE.load(lang.key, function(data){\r\n\t\t\t\tlocalize.currentLocaleData = data.lang;\r\n\t\t\t\tlocalize.currentLang = lang;\r\n\t\t\t\tready = true;\r\n\t\t\t\t$rootScope.$broadcast('localizeLanguageChanged');\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetLangUrl: function(lang) {\r\n\t\t\treturn \"resources/pkg/\" + lang.langCode + \"/lang.js\";\r\n\t\t},\r\n\r\n\t\tlocalizeText: function(sourceText) {\r\n\t\t\treturn localize.currentLocaleData[sourceText];\r\n\t\t},\r\n\t\ttranslate: function(scope, element, attrs, transkey){\r\n\t\t\tvar onAttrChange = function(e){\r\n\t\t\t\tif(!ready) { return; }\r\n\t\t\t\tvar tmpl = localize.localizeText(attrs[transkey]);\r\n\t\t\t\t// 无效的翻译\r\n\t\t\t\tif(!tmpl) {\r\n\t\t\t\t\t// debug\r\n\t\t\t\t\t// return console.error(\"invalid \" + transkey + \"=\\\"\" + attrs[transkey] + \"\\\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar myhtml = tmplReg.test(tmpl) ? tmpl.replace(tmplReg, function(match, index){\r\n\t\t\t\t\tvar myattr = \"param\" + index;\r\n\t\t\t\t\tvar value = attrs[myattr];\r\n\t\t\t\t\treturn encodeHTML(value);\r\n\t\t\t\t}) : tmpl;\r\n\t\t\t\tswitch(transkey) {\r\n\t\t\t\t\tcase \"localize\":\r\n\t\t\t\t\t\tif(element.is(\"input, textarea\")){\r\n\t\t\t\t\t\t\telement.attr(\"placeholder\", myhtml);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.html(myhtml);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"localizeHref\":\r\n\t\t\t\t\t\telement.attr(\"href\", myhtml); break;\r\n\t\t\t\t\tcase \"localizeTitle\":\r\n\t\t\t\t\t\telement.attr(\"title\", myhtml); break;\r\n\t\t\t\t\tcase \"localizePlaceholder\":\r\n\t\t\t\t\t\telement.attr(\"placeholder\", myhtml); break;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tangular.forEach(attrs, function(v, k){\r\n\t\t\t\tif(interestAttrReg.test(k)) {\r\n\t\t\t\t\tattrs.$observe(k, onAttrChange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(ready) {\r\n\t\t\t\tonAttrChange();\r\n\t\t\t}\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", onAttrChange);\r\n\t\t},\r\n\t\tisReady: function(){\r\n\t\t\treturn ready;\r\n\t\t}\r\n\t};\r\n\r\n\treturn localize;\r\n}])\r\n.directive('localize', ['localize', function(localize) {\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localize\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeTitle\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeTitle\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizePlaceholder\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizePlaceholder\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeHref\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeHref\");\r\n\t\t}\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for navigation\r\nangular.module('app.navigation', [])\r\n.directive('navigation', [\"$timeout\",  function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: ['$scope', function($scope) {\r\n\t\t\t//$scope.version = $$$version;\r\n\t\t}],\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar timer = null;\r\n\t\t\tlet timer_handle = function(){\r\n\t\t\t\tif (!topmenu) {\r\n\t\t\t\t\tif (!null) {\r\n\t\t\t\t\t\telement.first().jarvismenu({\r\n\t\t\t\t\t\t\taccordion : true,\r\n\t\t\t\t\t\t\tspeed : $.menu_speed,\r\n\t\t\t\t\t\t\tclosedSign : '<em class=\"fa icon-jj-xiala\"></em>',\r\n\t\t\t\t\t\t\topenedSign : '<em class=\"fa icon-jj-sou\"></em>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//alert(\"Error - menu anchor does not exist\");\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle : \"Error\",\r\n\t\t\t\t\t\t\tcontent : \"menu anchor does not exist\",\r\n\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\tnumber : \"1\",\r\n\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SLIMSCROLL FOR NAV\r\n\t\t\t\tif ($.fn.slimScroll) {\r\n\t\t\t\t\telement.slimScroll({\r\n\t\t\t\t        height: '100%'\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getElement = function() {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tscope.$on(\"updateNavData\", function(name, navs){\r\n\t\t\t\tscope.navs = navs;\r\n\t\t\t});\r\n\t\t\tscope.$on(\"renderNavItem\", function(name){\r\n\t\t\t\t$timeout.cancel(timer);\r\n\t\t\t\ttimer = $timeout(timer_handle, 100);\r\n\t\t\t});\r\n\t\t},\r\n\t\ttemplate: \"<nav><ul data-ng-transclude></ul></nav>\"\r\n\t};\r\n}])\r\n\r\n\r\n.controller('NavItemController', ['$rootScope', '$scope', '$location', function($rootScope, $scope, $location) {\r\n\t$scope.isChild = false;\r\n\t$scope.active = false;\r\n\t$scope.isActive = function (viewLocation) {\r\n        $scope.active = viewLocation === $location.path();\r\n        return $scope.active;\r\n    };\r\n    $scope.hasIcon = angular.isDefined($scope.icon);\r\n    $scope.hasIconCaption = angular.isDefined($scope.iconCaption);\r\n\r\n    $scope.getItemUrl = function(view) {\r\n    \tif (angular.isDefined($scope.href)) return $scope.href;\r\n    \tif (!angular.isDefined(view)) return '';\r\n    \treturn '#' + view;\r\n    };\r\n\r\n    $scope.getItemTarget = function() {\r\n    \treturn angular.isDefined($scope.target) ? $scope.target : '_self';\r\n    };\r\n\t$scope.$emit(\"renderNavItem\");\r\n\r\n}])\r\n.directive('navItem', ['ribbon', \"$rootScope\", function(ribbon, $root) {\r\n\treturn {\r\n\t\trequire: ['^navigation'],\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'NavItemController',\r\n\t\tscope: {\r\n\t\t\ttitle: '@navTitle',\r\n\t\t\tview: '@',\r\n\t\t\ticon: '@',\r\n\t\t\ticonCaption: '@',\r\n\t\t\thref: '@',\r\n\t\t\ttarget: '@'\r\n\t\t},\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar navCtrl = parentCtrls[0],\r\n\t\t\t\tnavgroupCtrl = parentCtrls[1];\r\n\t\t\tif(attrs.view){\r\n\t\t\t\telement.find(\"ul\").remove();\r\n\t\t\t}\r\n\t\t\tscope.$watch('active', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(true);\r\n\t\t\t\t\t$root.$broadcast(\"updateDocumentTitle\", scope.title);\r\n\t\t\t\t\tscope.setBreadcrumb();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tscope.openParents = scope.isActive(scope.view);\r\n\t\t\tscope.isChild = angular.isDefined(navgroupCtrl);\r\n\t\t\t\r\n\t\t\tscope.setBreadcrumb = function() {\r\n    \t\t\tvar crumbs = [];\r\n    \t\t\tcrumbs.push(scope.title);\r\n    \t\t\t// get parent menus\r\n\t\t\t\tvar test = element.parents('nav li').each(function() {\r\n\t\t\t\t\tvar el = angular.element(this);\r\n\t\t\t\t\tvar parent = el.find('.menu-item-parent:eq(0)');\r\n\t\t\t\t\tcrumbs.push(parent.data('localize').trim());\r\n\t\t\t\t\tif (scope.openParents) {\r\n\t\t\t\t\t\t// open menu on first load\r\n\t\t\t\t\t\tparent.trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// this should be only fired upon first load so let's set this to false now\r\n\t\t\t\tscope.openParents = false;\r\n\t\t\t\tribbon.updateBreadcrumb(crumbs);\r\n    \t\t};\r\n\r\n    \t\telement.on('click', 'a[href!=\"#\"]', function() {\r\n    \t\t\tif ($.root_.hasClass('mobile-view-activated')) {\r\n    \t\t\t\t$.root_.removeClass('hidden-menu');\r\n    \t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: `\r\n\t\t\t<li data-ng-class=\"{active: isActive(view)}\">\r\n\t\t\t\t<a href=\"{{ getItemUrl(view) }}\" target=\"{{ getItemTarget() }}\">\r\n\t\t\t\t\t<i data-ng-if=\"hasIcon\" class=\"{{ icon }}\"><em data-ng-if=\"hasIconCaption\"> {{ iconCaption }} </em></i>\r\n\t\t\t\t\t<span ng-class=\"{'menu-item-parent': !isChild}\" data-localize=\"{{ title }}\"></span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<ul data-ng-transclude=\"\"></ul>\r\n\t\t\t</li>`\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for activity\r\nangular.module('app.activity', [])\r\n.controller('ActivityController', ['$scope', '$http' , function($scope, $http) {\r\n\tvar ctrl = this,\r\n\t\titems = ctrl.items = $scope.items = [];\r\n\r\n\tctrl.loadItem = function(loadedItem, callback) {\r\n\t\tangular.forEach(items, function(item) {\r\n\t      \tif (item.active && item !== loadedItem) {\r\n\t        \titem.active = false;\r\n\t        \t//item.onDeselect();\r\n\t      \t}\r\n\t    });\r\n\r\n\t\tloadedItem.active = true;\r\n\t\tif (angular.isDefined(loadedItem.onLoad)) {\r\n\t\t\tloadedItem.onLoad(loadedItem);\r\n\t\t}\r\n\r\n\t\t$http.get(loadedItem.src).then(function(result) {\r\n\t\t\tvar content = result.data;\r\n\t\t\tif (angular.isDefined(callback)) {\r\n\t\t\t\tcallback(content);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tctrl.addItem = function(item) {\r\n\t\titems.push(item);\r\n\t\tif (!angular.isDefined(item.active)) {\r\n\t\t\t// set the default\r\n\t\t\titem.active = false;\r\n\t\t} else if (item.active) {\r\n\t\t\tctrl.loadItem(item);\r\n\t\t}\r\n\t};\r\n\r\n\tctrl.refresh = function(e) {\r\n\t\tvar btn = angular.element(e.currentTarget);\r\n\t\tbtn.button('loading');\r\n\r\n\t\tif (angular.isDefined($scope.onRefresh)) {\r\n\t\t\t$scope.onRefresh($scope, function() {\r\n\t\t\t\tbtn.button('reset');\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbtn.button('reset');\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activity', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: 'ActivityController',\r\n\t\tscope: {\r\n\t\t\tonRefresh: '=onrefresh',\r\n\t\t},\r\n\t\ttemplate: '<span data-ng-transclude=\"\"></span>'\r\n\t};\r\n})\r\n\r\n.directive('activityButton', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: function($scope) {\r\n\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\ticon: '@',\r\n\t\t\ttotal: '='\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t\t<span id=\"activity\" class=\"activity-dropdown\">\\\r\n\t\t\t\t\t<i ng-class=\"icon\"></i>\\\r\n\t\t\t\t\t<b class=\"badge\"> {{ total }} </b>\\\r\n\t\t\t\t</span>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\r\n\t\t\tattrs.$observe('icon', function(value) {\r\n\t\t\t\tif (!angular.isDefined(value))\r\n\t\t\t\t\tscope.icon = 'fa fa-user';\r\n\t\t\t});\r\n\r\n\t\t\telement.on('click', function(e) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\tif ($this.find('.badge').hasClass('bg-color-red')) {\r\n\t\t\t\t\t$this.find('.badge').removeClassPrefix('bg-color-');\r\n\t\t\t\t\t$this.find('.badge').text(\"0\");\r\n\t\t\t\t\t// console.log(\"Ajax call for activity\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$this.next('.ajax-dropdown').is(':visible')) {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeIn(150);\r\n\t\t\t\t\t$this.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeOut(150);\r\n\t\t\t\t\t$this.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mytest = $this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tif (scope.total > 0) {\r\n\t\t\t\tvar $badge = element.find('.badge');\r\n\t\t\t\t$badge.addClass(\"bg-color-red bounceIn animated\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('ActivityContentController', ['$scope' , function($scope) {\r\n\tvar ctrl = this;\r\n\t$scope.currentContent = '';\r\n\tctrl.loadContent = function(content) {\r\n\t\t$scope.currentContent = content;\r\n\t}\r\n}])\r\n\r\n.directive('activityContent', ['$compile', function($compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tfooter: '=?'\r\n\t\t},\r\n\t\tcontroller: 'ActivityContentController',\r\n\t\ttemplate: '\\\r\n\t\t\t<div class=\"ajax-dropdown\">\\\r\n\t\t\t\t<div class=\"btn-group btn-group-justified\" data-toggle=\"buttons\" data-ng-transclude=\"\"></div>\\\r\n\t\t\t\t<div class=\"ajax-notifications custom-scroll\">\\\r\n\t\t\t\t\t<div class=\"alert alert-transparent\">\\\r\n\t\t\t\t\t\t<h4>Click a button to show messages here</h4>\\\r\n\t\t\t\t\t\tThis blank page message helps protect your privacy, or you can show the first message here automatically.\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t<i class=\"fa fa-lock fa-4x fa-border\"></i>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<span> {{ footer }}\\\r\n\t\t\t\t\t<button type=\"button\" data-loading-text=\"Loading...\" data-ng-click=\"refresh($event)\" class=\"btn btn-xs btn-default pull-right\" data-activty-refresh-button=\"\">\\\r\n\t\t\t\t\t<i class=\"fa fa-refresh\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</div>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\t\t\tscope.refresh = function(e) {\r\n\t\t\t\tactivityCtrl.refresh(e);\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('currentContent', function(newContent, oldContent) {\r\n\t\t\t\tif (newContent !== oldContent) {\r\n\t\t\t\t\tvar el = element.find('.ajax-notifications').html(newContent);\r\n\t\t\t\t\t$compile(el)(scope);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activityItem', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: ['^activity', '^activityContent'],\r\n\t\tscope: {\r\n\t\t\tsrc: '=',\r\n\t\t\tonLoad: '=onload',\r\n\t\t\tactive: '=?'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '\\\r\n\t\t\t<label class=\"btn btn-default\" data-ng-click=\"loadItem()\" ng-class=\"{active: active}\">\\\r\n\t\t\t\t<input type=\"radio\" name=\"activity\">\\\r\n\t\t\t\t<span data-ng-transclude=\"\"></span>\\\r\n\t\t\t</label>',\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar activityCtrl = parentCtrls[0],\r\n\t\t\t\tcontentCtrl = parentCtrls[1];\r\n\r\n\t\t\tscope.$watch('active', function(active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tactivityCtrl.loadItem(scope, function(content) {\r\n\t\t\t\t\t\tcontentCtrl.loadContent(content);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactivityCtrl.addItem(scope);\r\n\r\n\t\t\tscope.loadItem = function() {\r\n\t\t\t\tscope.active = true;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n})\r\n;\r\n\r\nangular.module('app.smartui', [])\r\n.directive('widgetGrid', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.setup_widget_desktop = function() {\r\n\t\t\t\tif ($.fn.jarvisWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\telement.jarvisWidgets({\r\n\t\t\t\t\t\tgrid : 'article',\r\n\t\t\t\t\t\twidgets : '.jarviswidget',\r\n\t\t\t\t\t\tlocalStorage : true,\r\n\t\t\t\t\t\tdeleteSettingsKey : '#deletesettingskey-options',\r\n\t\t\t\t\t\tsettingsKeyLabel : 'Reset settings?',\r\n\t\t\t\t\t\tdeletePositionKey : '#deletepositionkey-options',\r\n\t\t\t\t\t\tpositionKeyLabel : 'Reset position?',\r\n\t\t\t\t\t\tsortable : true,\r\n\t\t\t\t\t\tbuttonsHidden : false,\r\n\t\t\t\t\t\t// toggle button\r\n\t\t\t\t\t\ttoggleButton : true,\r\n\t\t\t\t\t\ttoggleClass : 'fa fa-minus | fa fa-plus',\r\n\t\t\t\t\t\ttoggleSpeed : 200,\r\n\t\t\t\t\t\tonToggle : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// delete btn\r\n\t\t\t\t\t\tdeleteButton : true,\r\n\t\t\t\t\t\tdeleteClass : 'fa fa-times',\r\n\t\t\t\t\t\tdeleteSpeed : 200,\r\n\t\t\t\t\t\tonDelete : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// edit btn\r\n\t\t\t\t\t\teditButton : true,\r\n\t\t\t\t\t\teditPlaceholder : '.jarviswidget-editbox',\r\n\t\t\t\t\t\teditClass : 'fa fa-cog | fa fa-save',\r\n\t\t\t\t\t\teditSpeed : 200,\r\n\t\t\t\t\t\tonEdit : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// color button\r\n\t\t\t\t\t\tcolorButton : true,\r\n\t\t\t\t\t\t// full screen\r\n\t\t\t\t\t\tfullscreenButton : true,\r\n\t\t\t\t\t\tfullscreenClass : 'fa fa-expand | fa fa-compress',\r\n\t\t\t\t\t\tfullscreenDiff : 3,\r\n\t\t\t\t\t\tonFullscreen : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// custom btn\r\n\t\t\t\t\t\tcustomButton : false,\r\n\t\t\t\t\t\tcustomClass : 'folder-10 | next-10',\r\n\t\t\t\t\t\tcustomStart : function() {\r\n\t\t\t\t\t\t\talert('Hello you, this is a custom button...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcustomEnd : function() {\r\n\t\t\t\t\t\t\talert('bye, till next time...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// order\r\n\t\t\t\t\t\tbuttonOrder : '%refresh% %custom% %edit% %toggle% %fullscreen% %delete%',\r\n\t\t\t\t\t\topacity : 1.0,\r\n\t\t\t\t\t\tdragHandle : '> header',\r\n\t\t\t\t\t\tplaceholderClass : 'jarviswidget-placeholder',\r\n\t\t\t\t\t\tindicator : true,\r\n\t\t\t\t\t\tindicatorTime : 600,\r\n\t\t\t\t\t\tajax : true,\r\n\t\t\t\t\t\ttimestampPlaceholder : '.jarviswidget-timestamp',\r\n\t\t\t\t\t\ttimestampFormat : 'Last update: %m%/%d%/%y% %h%:%i%:%s%',\r\n\t\t\t\t\t\trefreshButton : true,\r\n\t\t\t\t\t\trefreshButtonClass : 'fa fa-refresh',\r\n\t\t\t\t\t\tlabelError : 'Sorry but there was a error:',\r\n\t\t\t\t\t\tlabelUpdated : 'Last Update:',\r\n\t\t\t\t\t\tlabelRefresh : 'Refresh',\r\n\t\t\t\t\t\tlabelDelete : 'Delete widget:',\r\n\t\t\t\t\t\tafterLoad : function() { },\r\n\t\t\t\t\t\trtl : false, // best not to toggle this!\r\n\t\t\t\t\t\tonChange : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonSave : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajaxnav : $.navAsAjax // declears how the localstorage should be saved (HTML or AJAX page)\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscope.setup_widget_mobile = function() {\r\n\t\t\t\tif ($.enableMobileWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\tscope.setup_widgets_desktop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($.device === \"desktop\") {\r\n\t\t\t\tscope.setup_widget_desktop();\r\n\t\t\t} else {\r\n\t\t\t\tscope.setup_widget_mobile();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.directive('widget', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetHeader', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\ttitle: '@',\r\n\t\t\ticon: '@'\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t<header>\\\r\n\t\t\t\t<span class=\"widget-icon\"> <i data-ng-class=\"icon\"></i> </span>\\\r\n\t\t\t\t<h2>{{ title }}</h2>\\\r\n\t\t\t\t<span data-ng-transclude></span>\\\r\n\t\t\t</header>'\r\n\t}\r\n})\r\n\r\n.directive('widgetToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetEditbox', function() {\r\n\treturn {\r\n\t\trestrict: 'AE', \r\n\t\ttransclude: true, \r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget-editbox\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBody', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBodyToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tclass: '@'\r\n\t\t},\r\n\t\ttemplate: '<div class=\"widget-body-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetContent', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-body\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\n\treturn {\r\n\t\trestrict: \"AE\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", function(){\r\n\t\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('textareaEmail', [function(){\r\n\treturn {\r\n\t\trequire: 'ngModel',\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, iElm, iAttrs, controller) {\r\n\t\t\tvar modelCtrl = controller;\r\n\t\t\tfunction validate(val){\r\n\t\t\t\tvar vals = Array.isArray(val) ? val : [val];\r\n\t\t\t\tvar reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n\t\t\t\tvar isvalide = vals.every(function(v){ return reg.test(v)});\r\n\t\t\t\treturn isvalide;\r\n\t\t\t}\r\n\t\t\tfunction parser(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value.split('\\n').reduce(function(arr,b){\r\n\t\t\t\t\t\tif(b.trim().length){\r\n\t\t\t\t\t\t\tarr.push(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t},[]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction formatter(value){\r\n\t\t\t\treturn validate(value) ? value.join(\"\\n\") : undefined;\r\n\t\t\t}\r\n\t\t\tfunction viewChangeListener(){\r\n\t\t\t\tmodelCtrl.$setValidity('email',validate(modelCtrl.$modelValue));\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$isEmpty = function(val){\r\n\t\t\t\tif(Array.isArray(val) && val.length === 0){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif(!val){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$parsers.push(parser);\r\n\t\t\tmodelCtrl.$formatters.push(formatter);\r\n\t\t\tmodelCtrl.$viewChangeListeners.push(viewChangeListener);\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('schedulerInput',['$rootScope',function($rootScope){\r\n\treturn {\r\n\t    require: \"ngModel\",\r\n\t    link: function(scope,element,attrs,ngModel){\r\n\t    \t$rootScope.$broadcast('matchInput', true);\r\n\t        element.bind('keyup',function(value){\r\n\t            // var isValid = this.value.match(/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/);\r\n\t            var isValid = this.value.match(/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/);\r\n\t            $rootScope.$broadcast('matchInput', isValid);\r\n\t        });\r\n\t    }\r\n\t}\r\n}])\r\n.service(\"formDate\",[function(){\r\n\tthis.format = function(date, fmt){\r\n\t\tvar o = {\r\n\t\t  \"M+\" : date.getMonth()+1,                 //月份   \r\n\t\t  \"d+\" : date.getDate(),                    //日   \r\n\t\t  \"h+\" : date.getHours(),                   //小时   \r\n\t\t  \"m+\" : date.getMinutes(),                 //分   \r\n\t\t  \"s+\" : date.getSeconds(),                 //秒   \r\n\t\t  \"q+\" : Math.floor((date.getMonth()+3)/3), //季度   \r\n\t\t  \"S\"  : date.getMilliseconds()             //毫秒   \r\n\t\t};   \r\n\t\tif(/(y+)/.test(fmt))   \r\n\t\t  fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \r\n\t\tfor(var k in o)   \r\n\t\t  if(new RegExp(\"(\"+ k +\")\").test(fmt))   \r\n\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \r\n\t\treturn fmt;\r\n\t}\r\n}])\r\n.service(\"customModal\",[\"$modal\",\"$rootScope\",function($modal,$root){\r\n\tthis.openModal=function(obj){\r\n\t\t/**\r\n\t\t * [init 模态框配置]\r\n\t\t */\r\n\t\tvar init={\r\n\t\t\ttitle: obj.title, \t\t\t\t\t\t\t\t\t\t// 标题，必传\r\n\t\t\tdelTips: obj.delTips,\t\t\t\t\t\t\t\t\t// 删除提示，必传\r\n\t\t\tkey: obj.key?obj.key:'',\t\t\t\t\t\t\t\t// 删除标志，一个页面可能有多个删除，可不传\r\n\t\t\tdelete_rows: obj.delete_rows?obj.delete_rows:[],\t\t// 可删除的数据，可不传，如清空操作\r\n\t\t\tdelParm: obj.delParm?obj.delParm:'',\t\t\t\t\t// 删除数据的名字key，可不传\r\n\t\t\tnodelete_rows: obj.nodelete_rows?obj.nodelete_rows:[],   // 不可删除的数据，可不传\r\n\t\t\tnodelTips: obj.nodelTips?obj.nodelTips:\"\"\t\t\t\t// 不可删除提示，可不传\r\n\t\t}\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: [\r\n\t\t\t\t\t\t\"<section id='widget-grid' ><div class='modal-content'>\",\r\n\t\t\t\t\t\t\"<div class='modal-header'><a type='button' class='close' data-ng-click='close()'>\",\r\n\t\t\t\t\t\t\"<span aria-hidden='true'>×</span><span class='sr-only'>\",\r\n\t\t\t\t\t\t\"Close</span></a><h4 class='modal-title' id='mySmallModalLabel' data-localize=\"+init.title+\"></h4></div><div class='modal-body'>\",\r\n\t\t\t\t\t\t\"<form class='form-horizontal'>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-localize='\"+init.delTips+\"' param1='{{deleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-ng-if='\"+init.nodelete_rows.length+\"' data-localize='\"+init.nodelTips+\"' param1='{{nodeleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<footer class='text-right'><a class='btn btn-primary' data-ng-click='ok()'  data-localize='确定'>确定\",\r\n\t\t\t\t\t\t\"</a><a class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize='取消'>取消\",\r\n\t\t\t\t\t\t\"</a></footer></form></div></div></section>\"].join(''),\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.deleteName = init.delete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.nodeleteName = init.nodelete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$root.$broadcast(\"DELETE\", init.key===''?init.delete_rows:{key: init.key, data: init.delete_rows});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n.directive(\"treeSelectNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', selecteduser: '='},\r\n        template: `<dd class=\"group\" ng-repeat=\"item in users\">\r\n\t\t\t\t\t<dl class=\"group\">\r\n\t\t\t\t\t\t<dt class=\"group-title\">{{item.dept_name}}</dt>\r\n\t\t\t\t\t\t<tree-select-node ng-repeat=\"node in item.children\" data-selecteduser=\"selecteduser\" data-node=\"node\"></tree-select-node>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t  </dd>`,\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeSelectNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', selecteduser: '='},\r\n        template: '<dd></dd>',\r\n        controller: function($scope){\r\n        \t$scope.selectUser = function(user){\r\n        \t\t$scope.$emit('selectCommonUser', user);\r\n        \t}\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n            \telement.append('<dl class=\"group\">'+\r\n\t\t\t\t\t\t\t\t\t'<dt class=\"group-title\">{{node.dept_name}}</dt>'+\r\n\t\t\t\t\t\t\t\t\t'<tree-select-node ng-repeat=\"sub in node.children\" data-selecteduser=\"selecteduser\" data-nodes=\"node.children\" data-node=\"sub\"></tree-select-node>'+\r\n\t\t\t\t\t\t\t\t'</dl>')\r\n            }else{\r\n            \telement.append('<dd class=\"group-item\" titile=\"{{selecteduser}}\" url=\"{{ node }}\" ng-class=\"{active:selecteduser.user_id === node.user_id}\" ng-click=\"selectUser(node)\">{{node.name}}({{node.real_name}})</dd>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.directives.js","angular.module(\"vdi\", [])\r\n\r\n.factory(\"Task\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/home/tasklog\", null, {\r\n        query: { method: \"GET\", isArray: false },\r\n        post: { method: \"POST\" },\r\n        put: { method: \"PUT\" }\r\n    });\r\n}])\r\n\r\n\r\n.factory(\"VNC\", [\"$resource\", \"$Domain\", function($resource, $Domain) {\r\n    return $resource($Domain + \"/thor/instance/vnc/:id\", { id: \"@id\" }, {\r\n        loadISO:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/loadISO\" },\r\n        save:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/update_template\" }\r\n    });\r\n}])\r\n\r\n.factory(\"loginResource\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/version\", null, {\r\n        query: { method: \"GET\"}\r\n    })\r\n}])\r\n\r\n\r\n.filter('lun_name', function () {\r\n    return function (lun) {\r\n        if (!angular.isUndefined(lun)) {\r\n            lun.map(function (item) {\r\n                item.value = item.vendor + \" lun-\" + item.lun + \" \" + item.size;\r\n            });\r\n        }\r\n        return lun;\r\n    };\r\n})\r\n.filter('storage_type', function () {\r\n    var type2str = {\r\n        local: \"本地磁盘\",\r\n        iscsi: 'iscsi 磁盘',\r\n        netfs: '网络文件系统',\r\n        fc: 'FC 光纤存储'\r\n    };\r\n    return function (type) {\r\n        return type2str[type]\r\n    }\r\n})\r\n.filter('storage_status', function () {\r\n    var stauts2str = {\r\n        running: \"正常\",\r\n        building:\"准备中\",\r\n        error:'异常'\r\n    };\r\n    return function (stauts) {\r\n        return stauts2str[stauts]\r\n    }\r\n})\r\n.filter('unsafe', function($sce) {\r\n    return function(val) {\r\n        return $sce.trustAsHtml(val+\"\");\r\n    };\r\n})\r\n.filter('join', function() {\r\n    return function(val,slash) {\r\n      return val.filter(function(d){\r\n        return d;\r\n      }).join(slash)\r\n    };\r\n})\r\n.filter('network_type', function () {\r\n    var type2str = {\r\n      nat:'NAT',\r\n      bridge:'桥接',\r\n      vlan:'VLAN'\r\n    };\r\n    return function (val) {\r\n      return type2str[val];\r\n    };\r\n})\r\n.filter('yesorno', function () {\r\n    return function (val) {\r\n      return val ? '是' : '否';\r\n    };\r\n})\r\n.filter('to_mb', function () {\r\n    return function (val) {\r\n      return (val/1024/1024).toFixed(2);\r\n    };\r\n})\r\n.filter('reverse', function() {\r\n  return function(input,searchText,searchName) {\r\n    if(input && searchText){\r\n        var outPut = [];\r\n        outPut = input.filter(function(item){\r\n            if(item[searchName].indexOf(searchText)>-1)\r\n                return item;\r\n        })\r\n        return outPut;\r\n    }\r\n    return input;\r\n  };\r\n})\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\t$filterProvider.register(\"paging\", function(){\r\n\t\treturn function(items, index, pageSize){\r\n\t\t\tif(!angular.isArray(items)){\r\n                return items;\r\n            }\r\n            if(pageSize > 0 && index > 0){\r\n    \t\t\tvar total = items.length;\r\n    \t\t\tvar totalPage = Math.ceil(total / pageSize);\r\n    \t\t\tindex = Math.min(totalPage, Math.max(1, index));\r\n    \t\t\treturn items.slice((index - 1) * pageSize, index * pageSize);\r\n            }\r\n            return items;\r\n\t\t};\r\n\t});\r\n}])\r\n\r\n.directive(\"dialog\", [\"$modal\", \"$rootScope\", \"$$$I18N\", function ($modal, $rootScope, $$$I18N) {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            element.click(function () {\r\n                if(attrs.disabled){\r\n                    $.bigBox({\r\n                        title:$$$I18N.get(\"INFOR_TIP\"),\r\n                        content:attrs.error\r\n                    });\r\n                }else{\r\n                    var dialog = $modal.open({\r\n                        templateUrl: \"views/vdi/dialog/\" + attrs.dialogUrl,\r\n                        controller: attrs.dialog,\r\n                        scope: $scope,\r\n                        size: attrs.dialogSize\r\n                    });\r\n                    $scope.close = dialog.dismiss.bind(dialog);\r\n                    window.___dialog = dialog;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"widgetGrid\", [\"$filter\", \"$modal\", function($filter, $modal){\r\n    function getPosition(e, ele) {\r\n        var st = Math.max(\r\n            document.documentElement.scrollTop,\r\n            document.body.scrollTop\r\n        );\r\n        var sl = Math.max(\r\n            document.documentElement.scrollLeft,\r\n            document.body.scrollLeft\r\n        );\r\n        var cw = document.documentElement.clientWidth;\r\n        var ch = document.documentElement.clientHeight;\r\n        var sw = Math.max(\r\n            document.documentElement.scrollWidth,\r\n            document.body.scrollWidth\r\n        );\r\n        var sh = Math.max(\r\n            document.documentElement.scrollHeight,\r\n            document.body.scrollHeight\r\n        );\r\n        var ow = ele.offsetWidth;\r\n        var oh = ele.offsetHeight;\r\n        return {\r\n            x: Math.max(0, e.pageX + ow > sl + cw ? sl + cw - ow : e.pageX),\r\n            y: Math.max(0, e.pageY + oh > st + ch ? st + ch - oh : e.pageY)\r\n        }\r\n    }\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function($scope){\r\n            this.getCurrentPage = function(){\r\n                return Number($scope.currentPage) > 0 ? $scope.currentPage : 0;\r\n            };\r\n            this.getCurrentRows = function(){\r\n                return $scope.getCurrentRows();\r\n            }\r\n            this.getPageSize = function(){\r\n                return Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n            };\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n            var context_wrapper = element.find(\".context_wrapper\");\r\n            context_wrapper.on(\"mousedown\", function (e) {\r\n                if (e.target === this) {\r\n                    context_wrapper.hide();\r\n                    element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n                }\r\n            }).on(\"click\", function () {\r\n                context_wrapper.hide();\r\n                element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n            });\r\n            context_wrapper.hide();\r\n\r\n            // $scope.searchText = \"\";\r\n            //$scope.pagesize = 5;\r\n            $scope.currentPage = 1;\r\n\r\n            $scope.getCurrentRows = function(){\r\n                return $filter(\"paging\")(\r\n                    $scope.getFilterRows(),\r\n                    $scope.currentPage, $scope.pagesize\r\n                );\r\n            };\r\n            $scope.getFilterRows = function(){\r\n                return $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n            };\r\n\r\n            $scope.checkAll = function(){\r\n                var rows = $scope.getCurrentRows();\r\n                var _all = rows.length && rows\r\n                    .filter(item => !item._ignore ).length && rows\r\n                    .filter(item => !item._ignore )\r\n                    .every(row => row._selected );\r\n                $scope.checkedAll = _all;\r\n                return _all;\r\n            };\r\n            $scope.selectAllChange = function (checkAll) {\r\n                var rows = $scope.getCurrentRows();\r\n                rows.filter(item => !item._ignore ).forEach(function (row) {\r\n                    row._selected = checkAll;\r\n                });\r\n                $scope.checkedAll = checkAll;\r\n            };\r\n            $scope.checkOne = function () {\r\n                var rows = $scope.getCurrentRows();\r\n                return rows.filter(item => !item._ignore ).some(function (row) {\r\n                    return row._selected;\r\n                });\r\n            };\r\n            $scope.sort = function(name, asc){\r\n                $scope.rows.sort(function(a, b){\r\n                    return (a[name] > b[name] ? 1 : -1) * (asc ? 1 : -1);\r\n                });\r\n            };\r\n            $scope.pageSizeChange =\r\n            $scope.pageChange = function(){\r\n                $scope.rows.forEach(function(item, i){\r\n                    item._selected = false;\r\n                });\r\n            };\r\n            $scope.currentItem = null;\r\n            $scope.$on(\"contextmenu\", function (e, item, de, handler) {\r\n                $scope.currentItem = item;\r\n                handler.addClass(\"contextmenu_selected\");\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                context_wrapper.fadeIn(200);\r\n                var menu = element.find(\".grid_context_menu\");\r\n                var offset = context_wrapper.offset();\r\n                var pos = getPosition(de, menu[0]);\r\n                menu.css({\r\n                    top: pos.y - offset.top + \"px\",\r\n                    left: pos.x - offset.left + \"px\"\r\n                });\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                e.stopPropagation();\r\n                de.preventDefault();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"gridPagination\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require: [\"^widgetGrid\"],\r\n        conroller: function($scope){\r\n\r\n        },\r\n        link: function($scope, element, attrs, ctrls){\r\n            var grid = ctrls[0];\r\n            $scope.getStart = function(){\r\n                var current = grid.getCurrentPage();\r\n                var pagesize = grid.getPageSize();\r\n                return pagesize > 0 ? (current - 1) * pagesize + 1 : 0;\r\n            };\r\n            $scope.getEnd = function(){\r\n                var current = $scope.currentPage;\r\n                var pagesize = grid.getPageSize();\r\n                var end = current * pagesize;\r\n                var currentCount = $scope.getFilterRows().length;\r\n                return end < currentCount ? end : currentCount;\r\n            };\r\n            $scope.getCurrentCount = function(){\r\n                return $scope.getCurrentRows().length;\r\n            };\r\n        }\r\n    }\r\n}])\r\n.directive(\"ribbonTips\", [\"localize\", \"$route\", \"$location\", \"$interval\", function(localize, $route, $location, $interval){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function($scope, element, attrs){\r\n            var timer, dereg;\r\n            var fn_update_help_info = function(){\r\n                var path = $location.$$path;\r\n                if(/^\\/resource\\/network\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/resource/network/:id\";\r\n                }\r\n                if(/^\\/desktop\\/teach\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/desktop/teach/:id\";\r\n                }\r\n                var help_text = attrs.myTips?localize.localizeText(attrs.myTips):localize.localizeText(path);\r\n                element.attr(\"data-content\", help_text);\r\n                if(help_text) {\r\n                    element.parent().show();\r\n                } else {\r\n                    element.parent().hide();\r\n                }\r\n            };\r\n            $scope.$on(\"$routeChangeSuccess\", function(){\r\n                fn_update_help_info();\r\n            });\r\n            if(localize.isReady()) {\r\n                fn_update_help_info();\r\n            }\r\n            $scope.$on(\"localizeLanguageChanged\", fn_update_help_info);\r\n        }\r\n    };\r\n}])\r\n.directive(\"contextmenu\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            if (attrs.contextmenuDisabled !== \"true\") {\r\n                element.bind(\"contextmenu\", function (e) {\r\n                    $scope.$emit(attrs.contextmenuEventName || \"contextmenu\", $scope.item, e, element);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}])\r\n\r\n.directive(\"wizard\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        scope: {\r\n            lastText: \"@\",\r\n            btnUnable:\"=\"\r\n        },\r\n        controller: function ($scope, localize, $$$I18N) {\r\n            var steps = $scope.steps = [];\r\n            $scope.currentStep = null;\r\n            $scope.moveWth = 0;\r\n            var defaults = {\r\n                prevBtnText: \"上一步\",\r\n                nextBtnText: \"下一步\",\r\n                doneBtnText: \"完成\",\r\n            };\r\n            $scope.$on(\"currentStepChange\", function(e, stepIndex){\r\n                $scope.go(stepIndex);\r\n            });\r\n            $scope.select = function (step) {\r\n                var index;\r\n                steps.forEach(function (s, i) {\r\n                    s.selected = s === step;\r\n                    if(s.selected) {\r\n                        index = i;\r\n                    }\r\n                });\r\n                $scope.currentStep = step;\r\n                [\"prev\", \"next\", \"done\"].forEach(function(s){\r\n                    var key = s + \"BtnText\";\r\n                    $scope[key] = $$$I18N.get(step[key] || defaults[key]);\r\n                });\r\n                $scope.$emit(\"selectStepChange\", {index: index, stepScope: step});\r\n            };\r\n            $scope.getCurrentIndex = function () {\r\n                return steps.indexOf($scope.currentStep);\r\n            };\r\n\r\n            $scope.prev = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                //var e = $scope.$emit(($scope.stepEventName || \"WizardStep\"), $scope.currentStep);\r\n                var prev = steps[index - 1];\r\n                prev && $scope.select(prev);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n\r\n            };\r\n            $scope.next = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling);\r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.moveWth = $scope.getMarginValue();\r\n                };\r\n\r\n            };\r\n            $scope.go = function(index){\r\n                $scope.select(steps[index]);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n            }\r\n            $scope.showPrev = function () {\r\n                return steps.indexOf($scope.currentStep) > 0 && $scope.currentStep.prevBtnText !== \"\";\r\n            };\r\n            $scope.isLast = function () {\r\n                return steps.indexOf($scope.currentStep) >= steps.length - 1;\r\n            };\r\n            $scope.done = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling); \r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.$emit($scope.doneEventName || \"WizardDone\", steps, steps.map(function (step) {\r\n                        return step.$$nextSibling\r\n                    }));\r\n                }\r\n            };\r\n            this.addStep = function (step) {\r\n                steps.push(step);\r\n                if (steps.length === 1) {\r\n                    $scope.select(step);\r\n                }\r\n            };\r\n            this.jumpStep = function (index) {\r\n\r\n            };\r\n            this.removeStep = function (index) {\r\n\r\n            };\r\n            this.insertStep = function (step) {\r\n\r\n            };\r\n        },\r\n        link : function($scope, element, attrs){\r\n            $scope.getMarginValue = function(){\r\n                var _idx = $scope.getCurrentIndex();\r\n                var wizardWth = element.find('.wizard').outerWidth();\r\n                var _wth = 60;\r\n                for(var i = 0; i<=_idx+1 ; i++){\r\n                    _wth+=element.find(\".steps>li\").eq(i).outerWidth();\r\n                }\r\n                if(wizardWth - _wth < 0){\r\n                    return (wizardWth - _wth) ;\r\n                }else{\r\n                    return 0;\r\n                }\r\n            };\r\n            // if(attrs.disableNav !== \"true\") {\r\n            //     element.find(\".steps\").delegate(\"li.complete\",\"click\",function(e){\r\n            //         var _idx = $(this).index();\r\n            //         $scope.go(_idx);\r\n            //     });\r\n            // }\r\n        },\r\n        template: `<div class=\"wizard\" style=\"margin-bottom:20px;\">\r\n            <ul class=\"steps\" style=\"margin-left:{{moveWth}}px\">\r\n                <li data-ng-repeat=\"step in steps\" data-target=\"#step{{ $index }}\" data-ng-class=\"{ active: getCurrentIndex() >= $index ,complete:getCurrentIndex() > $index }\">\r\n                    <span class=\"badge badge-info\">{{ $index + 1 }}</span><span localize=\"{{step.name}}\"></span><span class=\"chevron\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"actions\">\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"showPrev()\" data-ng-click=\"prev()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-primary btn-prev\">\r\n                    <i class=\"fa fa-arrow-left\"></i><span ng-bind=\"prevBtnText\"></span>\r\n                </button>\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"!isLast()\" data-ng-click=\"next()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"nextBtnText\"></span> <i class=\"fa fa-arrow-right\"></i>\r\n                </button>\r\n                <button id='finish' ng-show=\"!btnUnable && isLast()\" type=\"button\" data-ng-click=\"done()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"doneBtnText\"></span><i class=\"fa fa-check\" ></i>\r\n                </button>\r\n                <img ng-show=\"btnUnable\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n                <img ng-show=\"currentStep.showLoading === true\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"step-content\">\r\n            <form data-ng-transclude class=\"form-horizontal\" id=\"fuelux-wizard\" method=\"post\" novalidate>\r\n            </form>\r\n        </div>\r\n        <div ng-show=\"currentStep.showLoading === true\" style=\"position: absolute;top:0;right:0;bottom:0;left:0;z-index:999;\"></div>`\r\n    };\r\n}])\r\n.directive(\"wizardStep\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^wizard\",\r\n        transclude: true,\r\n        replace: true,\r\n        scope: {\r\n            name: \"@\",\r\n            prevBtnText: \"@\",\r\n            nextBtnText: \"@\",\r\n            doneBtnText: \"@\",\r\n            testValid: \"=\"\r\n        },\r\n        controller: function ($scope) {},\r\n        link: function (scope, element, attrs, wizard) {\r\n            wizard.addStep(scope);\r\n        },\r\n        template: `<div class=\"step-pane\" data-ng-class=\"{ active: selected }\" data-ng-show=\"selected\" data-ng-transclude></div>`\r\n    };\r\n}])\r\n\r\n.directive('areaTraffic', function ($interval,$http) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope:{\r\n            options : \"=\"\r\n        },\r\n        link: function (scope, e, attrs) {\r\n            Highcharts.setOptions({    //disable utc time\r\n                global: {    \r\n                    useUTC: false    \r\n                }    \r\n            }); \r\n            function init_data(){\r\n                // generate init data\r\n                var data = [],\r\n                    time = (new Date()).getTime(),\r\n                    i;\r\n\r\n                for (i = -40; i <= 0; i += 1) {\r\n                    data.push({\r\n                        x: time + i * scope.$parent.refresh_time,\r\n                        y: 0\r\n                    });\r\n                }\r\n                return data;\r\n            }\r\n            var hc_options = scope.options.options;\r\n            hc_options.chart.renderTo = e[0];\r\n            hc_options.yAxis.min = 0;\r\n            angular.forEach(hc_options.series,function(s){\r\n                s.data = init_data();\r\n            });\r\n\r\n            var highcharts = new Highcharts.Chart(hc_options);\r\n\r\n            function drawPoint(data) {\r\n                var datetime = (new Date()).getTime();\r\n                var hc_series = highcharts.series;\r\n\r\n                scope.options.drawpoint(hc_series,data,datetime);\r\n\r\n            }\r\n\r\n            function reset_highcharts(){\r\n                //reset highcharts\r\n                highcharts.destroy();\r\n                angular.forEach(hc_options.series,function(s){\r\n                    s.data = init_data();\r\n                });\r\n                highcharts = new Highcharts.Chart(hc_options);\r\n            }\r\n\r\n            scope.$watch('$parent.metric_data',function(newvalue){\r\n                if(newvalue){\r\n                    drawPoint(newvalue);\r\n                }\r\n            });\r\n\r\n            scope.$watch('$parent.refresh_time',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n            scope.$watch('$parent.item',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n        }\r\n    }\r\n})\r\n.directive(\"monitorTree\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        template: `<div class=\"portlet-title clearfix padding-5\">\r\n                <div class=\"pull-left\">\r\n                    <a href=\"javascript:\" id=\"collape\" class=\"btn btn-default btn-xs\"><i class=\"fa  icon-jj-Shrinkfrom\"></i> </a>\r\n                    <a href=\"javascript:\" id=\"open\" class=\"btn btn-default  btn-xs\"><i class=\"fa icon-jj-Open\"></i></a>\r\n                </div>\r\n                <div class=\"pull-right\"><a href=\"javascript:\"class=\"btn btn-default  btn-xs\" ng-init=\"ishow=false\" ng-click=\"ishow==true?ishow=false:ishow=true;open()\"><i class=\"fa fa-search\"></i></a></div> \r\n            </div>\r\n            <div class=\"search\" ng-show=\"ishow\"><input type=\"search\" localize=\"桌面名\" ng-model=\"searchText\"></div>\r\n            <div class=\"portlet-body fuelux monitor-tree\" data-ng-transclude></div>\r\n        `,\r\n        link: function(scope, element, attrs){\r\n            element.delegate('#open', 'click', function(event) {\r\n                element.find(\".parent\").addClass('in');\r\n            });\r\n            element.delegate('#collape', 'click', function(event) {\r\n                element.find(\".parent\").removeClass('in');\r\n            });\r\n            element.delegate (\".tree-toggle\",\"click\",function(event){\r\n                var parent =$(this).parent().parent(\".parent\");\r\n                if(parent.hasClass('in')){\r\n                    parent.removeClass('in');\r\n                }else{\r\n                    parent.addClass(\"in\");\r\n                }\r\n            });\r\n            element.delegate(\".tree-it\",\"click\",function(event){\r\n                element.find(\"li\").removeClass('active');\r\n                $(this).parent(\"li\").addClass('active');\r\n            });\r\n            scope.open = function(){\r\n                element.find(\".parent\").addClass('in');\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive('ipPattern',function (ip_pattern) {\r\n\r\n    return {\r\n      require: ['ngModel','?ngRequired'],\r\n      link: function (scope, elm, attrs, ctrls) {\r\n        var ngmodelctl = ctrls[0];\r\n        var ngrequiredctl = ctrls[1];\r\n\r\n        ngmodelctl.$parsers.push(function (viewValue) {\r\n\r\n          if (ip_pattern.test(viewValue)||(!ngrequiredctl&&!viewValue)) {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', true);\r\n            return viewValue;\r\n          } else {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', false);\r\n            return undefined;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n})\r\n.directive(\"preventSpace\", [function(){\r\n    return {\r\n      restrict: \"A\",\r\n      link: function(scope, element, attrs){\r\n        element.on(\"keypress\",function(e){\r\n          if(e.keyCode === 32){\r\n            e.preventDefault();\r\n          }\r\n        })\r\n      }\r\n    };\r\n  }])\r\n.directive(\"inputNumber\", [function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        link: function(scope, element, attrs){\r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrlKey = [\r\n                8, // backspace\r\n                46,// delete\r\n                37,// left arrow\r\n                39 // right arrow\r\n            ];\r\n            element.on(\"keydown\", function(e){\r\n                var code = e.which || e.keyCode;\r\n                if(numKey.indexOf(code) > -1) {\r\n                    var num = code < 60 ? code - 48 : code - 96;\r\n                    var nextValue = this.value + num;\r\n                    if(!attrs.max) { return; }\r\n                    var max = attrs.max * 1;\r\n                    if(!isNaN(max) && nextValue <= max) {\r\n                        return;\r\n                    }\r\n                } else if(ctrlKey.indexOf(code) > -1) {\r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n        }\r\n    };\r\n}])\r\n// .directive(\"inputDot\", [function(){\r\n//     return {\r\n//         restrict: \"AE\",\r\n//         link: function(scope, element, attrs){\r\n//             element.on(\"keydown\",function(e){\r\n//                 if(attrs.inputDot == 'true'){\r\n//                    if(e.keyCode === 190 || e.keyCode === 110 || e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                    }\r\n//                 }\r\n//                 else{\r\n//                     if(e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                     }\r\n//                 }\r\n\r\n//             });\r\n//         }\r\n//     };\r\n// }])\r\n.directive(\"formatIp\", [\"$compile\",function($compile){\r\n    return {\r\n        restrict:\"EA\",\r\n        require:\"ngModel\",\r\n        scope:{\r\n            start:\"=\",\r\n            end:\"=\"\r\n        },\r\n        link:function(scope,element,attrs,ctrl){\r\n            var ngModelCtrl = ctrl;\r\n            var required = attrs.ipRequired ? scope.$eval(attrs.ipRequired) : true;\r\n\r\n            if(!ngModelCtrl){\r\n                return;\r\n            };\r\n            var CHECKTOOLS = {};\r\n\r\n            CHECKTOOLS.checkIP = function(ip){\r\n                if(!ip) { return false; }\r\n                var parts = ip.split(\".\");\r\n                //9029bug 0.0.0.0不合法IP\r\n                var numre = /^(0|[1-9][0-9]*)$/;\r\n                var i, valid = true;\r\n                if(parts.length !== 4) { return false; }\r\n                for(i = 0; i < 4; i++) {\r\n                    if(numre.test(parts[i]) && parseInt(parts[i]) <= 255) {\r\n                        continue;\r\n                    } else {\r\n                        valid = false;\r\n                    }\r\n                }\r\n                valid = valid && (ipformatNum(ip) > ipformatNum('1.0.0.0'));\r\n                return valid;\r\n            };\r\n\r\n            function ipformatNum(ip){\r\n                var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];   \r\n            }\r\n\r\n            CHECKTOOLS.ip2long = function(ip){\r\n                if(CHECKTOOLS.checkIP(ip)){\r\n                    var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                    return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];\r\n                }\r\n            };\r\n            CHECKTOOLS.checkRange = function(ip,s_ip,e_ip){\r\n                if(CHECKTOOLS.checkIP(ip),CHECKTOOLS.checkIP(s_ip) && CHECKTOOLS.checkIP(e_ip)){\r\n                     var s = CHECKTOOLS.ip2long(s_ip);\r\n                     var e = CHECKTOOLS.ip2long(e_ip);\r\n                     var c = CHECKTOOLS.ip2long(ip);\r\n                     return c >= s && c <= e;\r\n                 }else{\r\n                    return false;\r\n                 }\r\n            };\r\n            var popEl = angular.element(\"<div format-ip-wrap></div>\");\r\n            var $input = $compile(popEl)(scope);\r\n            element.addClass(\"ng-hide\");\r\n            element.after($input);\r\n\r\n            // model -- ui\r\n            \r\n            ngModelCtrl.$render = function(){\r\n                var modelVal = ngModelCtrl.$modelValue;\r\n                var modelValArr;\r\n                try{\r\n                    if(modelVal === null) {\r\n                        modelValArr = [];\r\n                        ngModelCtrl.$setPristine();\r\n                    } else {\r\n                        modelValArr = modelVal.split(\".\");\r\n                    }\r\n                    [1,2,3,4].forEach(function(i,idx){\r\n                        scope[\"seg\" + i] = modelValArr[idx] || \"\";\r\n                    });\r\n                }catch(err){\r\n                }\r\n                // setValidate();\r\n            };\r\n            /*\r\n            function setValidate(){\r\n                var isValid;\r\n                if(ngModelCtrl.$modelValue){\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ngModelCtrl.$modelValue,scope.start,scope.end)\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ngModelCtrl.$modelValue);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\",isValid);\r\n                }else{\r\n                    ngModelCtrl.$setValidity(\"ip\",true);\r\n                }\r\n            };\r\n\r\n            // ui -- model\r\n            $input.on(\"input\",function(e){\r\n                scope.$apply(function(){\r\n                    var val = [1,2,3,4].map(function(i){ return scope[\"seg\" + i] || \"\"; }).join(\".\");\r\n                    var isNull = val.split(\".\").every(function(item){ return item.length===0 });\r\n                    if(isNull){\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }else{\r\n                        ngModelCtrl.$setViewValue(val);\r\n                    }\r\n                    ngModelCtrl.$render();\r\n                })\r\n            });\r\n\r\n            */\r\n\r\n            scope.$watch(\"seg1 + '.' + seg2 + '.' + seg3 + '.' + seg4\", function(ip){\r\n                var value = ngModelCtrl.$modelValue;\r\n                if(ip === \"...\") {\r\n                    if(value) {\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }\r\n                    if(!value || !required) {\r\n                        return ngModelCtrl.$setValidity(\"ip\", true);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", false);\r\n                } else {\r\n                    var isValid = false;\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ip, scope.start, scope.end);\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ip);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", isValid);\r\n                    ngModelCtrl.$setViewValue(ip);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n.directive(\"formatIpWrap\",function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        replace: true,\r\n        template: `<span role=\"ipgroup\"><input type=\"text\" ng-model=\"seg1\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg2\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg3\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg4\"></span>`,\r\n        link: function(scope,element,attrs){\r\n            element.on(\"keydown\", \"input\", function(event){\r\n                switch(event.keyCode){\r\n                    case 110:\r\n                    case 190:\r\n                        var nextEles = $(this).nextAll(\"input\");\r\n                        nextEles.length && nextEles.eq(0).focus();\r\n                        event.preventDefault();\r\n                        break;\r\n                    case 8:\r\n                        if(!$(this).val()){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        if(this.selectionStart === 0){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        };\r\n                        break;\r\n                    case 39:\r\n                        if(this.selectionStart === $(this).val().length){\r\n                            $(this).nextAll(\"input\").length && $(this).nextAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 32:\r\n                    case 229:\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        break;\r\n                }\r\n            });\r\n            element.on(\"keypress\", \"input\",function(e){\r\n                if(e.keyCode < 48 || e.keyCode > 57){\r\n                    e.preventDefault();\r\n                }\r\n                if($(this).val().length > 2 && this.selectionStart === this.selectionEnd){\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            element.on(\"paste\",function(e){\r\n                e.preventDefault();\r\n            });\r\n            element.on(\"focus\", \"input\", function(e){\r\n                element.addClass(\"focus\");\r\n            });\r\n            element.on(\"blur\", \"input\", function(e){\r\n                element.removeClass(\"focus\");\r\n            });\r\n        }\r\n    }\r\n})\r\n.directive(\"treeNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', filtertext: '='},\r\n        template: '<ul role=\"tree\" class=\"menu menu-tree\" ng-repeat=\"item in getUsers()\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{item.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(item);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"node in item.children\" data-nodes=\"item.children\" data-node=\"node\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>',\r\n        controller: function($scope){\r\n            var lastFilter;\r\n            var lastFiltedResult;\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n\r\n            $scope.getUsers = function(){\r\n                var text = $scope.filtertext || \"\";\r\n                var users = $scope.users;\r\n                text = text.trim();\r\n                if(!text) { return users; }\r\n                if(text !== lastFilter) {\r\n                    lastFilter = text;\r\n                    lastFiltedResult = filterUser(angular.copy(users), text);\r\n                }\r\n                return lastFiltedResult;\r\n            };\r\n\r\n            function filterUser(users, text) {\r\n                return users.filter(function(user){\r\n                    if(user.children) {\r\n                        user.children = filterUser(user.children, text);\r\n                        return user.children.length > 0;\r\n                    } else {\r\n                        return user.user_name.indexOf(text) > -1 || user.real_name.indexOf(text) > -1;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', nodes: '='},\r\n        template: '<div></div>',\r\n        controller: function($scope){\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n            $scope.add_select_rows = function($event,node,nodes){\r\n                $scope.$emit('add_select_rows', $event,node,nodes);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n                element.append('<ul role=\"group\" class=\"menu menu-tree\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{node.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(node);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"sub in node.children\" data-nodes=\"node.children\" data-node=\"sub\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>')\r\n            }else{\r\n                element.append('<li class=\"menuitem\" ng-click=\"add_select_rows($event,node,nodes)\" ng-dblclick=\"add_selected(node)\">'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.name}}</span>'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.real_name}}</span>'+\r\n                  '</li>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiMenuList\", [\"Admin\",\"User\",\"Domain\",\"$q\",\"$$$I18N\",function(APIadmin,APIuser,APIdomain,$q,$$$I18N){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            selected: \"=menuListData\",\r\n            // domain:\"=menuListDomain\"\r\n        },\r\n        templateUrl: \"includes/userMenu.html\",\r\n        controller: function($scope){\r\n            $scope.expandedNodes = [];\r\n            $scope._users = [];\r\n            $scope.selected = $scope.selected || [];\r\n            $scope.seRows = [];\r\n            $scope.rmRows = [];\r\n            $scope.common_users = [];\r\n            function formatData(d,name){\r\n                iteration(d,name);\r\n                return d;\r\n            }\r\n            function iteration(data,childName,list){\r\n                for(var i = 0 ; i < data.length ; i++){\r\n                    $scope.expandedNodes.push(data[i]);\r\n                    if(data[i][childName] && data[i][childName].length){\r\n                        var len = iteration(data[i][childName],childName);\r\n                        if(len === 0){\r\n                            data[i] = undefined;\r\n                        }\r\n                    }\r\n                    if(!data[i]) { continue; }\r\n                    if(data[i].users && data[i].users.length > 0){\r\n                        data[i].users.map(user => {\r\n                            user.name = user.name || user.user_name;\r\n                            user._is_last = true;\r\n                            return user;\r\n                        });\r\n                        data[i][childName] = data[i].users;\r\n                    }\r\n                    if(data[i][childName] && data[i][childName].length === 0){\r\n                        data[i]= undefined;\r\n                    }\r\n                }\r\n                while(data.length > 0) {\r\n                    // 如果有数组元素为空，每次删除一个\r\n                    var oldlen = data.length;\r\n                    for(var i = 0 ; i < oldlen ; i++){\r\n                        if(data[i] === undefined){\r\n                            data.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(oldlen === data.length) {\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                return data.length;\r\n            }\r\n            function removeNoChildrenDeparts(data) {\r\n                data = data.filter(noUserFilter);\r\n                data.forEach(walk);\r\n                return data;\r\n                function walk(node) {\r\n                    if(!node.dept_id) { return; }\r\n                    // 用户上级是没有 children 的\r\n                    if(node.children) {\r\n                        node.children = node.children.filter(noUserFilter);\r\n                        node.children.forEach(walk);\r\n                    }\r\n                }\r\n                function noUserFilter(node) {\r\n                    if(node.dept_id && !node.children && node.users.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            function get_admin(){\r\n                var deferred = $q.defer();\r\n                APIadmin.query(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_user(){\r\n                var deferred = $q.defer();\r\n                APIuser.query_tree(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_domain(){\r\n                var deferred = $q.defer();\r\n                APIdomain.list(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            $q.all([get_admin(),get_user(),get_domain()]).then(function(arr){\r\n                $scope._users = [{\r\n                    typeName: $$$I18N.get(\"管理用户\"),\r\n                    userData: arr[0].users\r\n                }];\r\n                $scope.domain_users = arr[2].result.map(function(res){\r\n                    res._name = $$$I18N.get(\"域\") + \"(\" + res.name + \")\";\r\n                    return res;\r\n                });\r\n                $scope.common_users = formatData(removeNoChildrenDeparts(arr[1].result),\"children\");\r\n                console.log($scope.common_users)\r\n            });\r\n            function getLastLevelNodes(obj_levels, arrays){\r\n                if(obj_levels.children){\r\n                    obj_levels.children.forEach(function(item){\r\n                        getLastLevelNodes(item, arrays);\r\n                    })\r\n                }else{\r\n                    arrays.push(obj_levels);\r\n                }\r\n            }\r\n\r\n            $scope.$on('add_selected', function(e, levels){\r\n                var arrays = [];\r\n                getLastLevelNodes(levels, arrays);\r\n                $scope.add_selected(arrays);\r\n            })\r\n            $scope.$on('add_select_rows', function(e,$event,node,nodes){\r\n                console.log(555555, $event,node, nodes);\r\n                $scope.add_select_rows($event,node, nodes);\r\n            })\r\n            $scope.add_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    if($scope.selected.indexOf(i) === -1){\r\n                        $scope.selected.push(i);\r\n                    }\r\n                });\r\n            };\r\n            $scope.remove_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    $scope.selected.splice($scope.selected.indexOf(i),1);\r\n                });\r\n                $scope.rmRows = [];\r\n            };\r\n            var lastRow2 = null;\r\n            $scope.add_select_rows = function(e,item,items){\r\n                var idx = $scope.seRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.seRows.push(item) : $scope.seRows.splice(idx,1);\r\n                    lastRow2 = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = items.indexOf(lastRow2);\r\n                    var end_idx = items.indexOf(item);\r\n                    if(begin_idx === -1){\r\n                        lastRow2 = item;\r\n                        $scope.seRows = [item];\r\n                    }else{\r\n                        $scope.seRows = items.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1);\r\n                        console.log(1111111,$scope.seRows)\r\n                    }\r\n                }else{\r\n                    $scope.seRows.splice(0,$scope.seRows.length,item);\r\n                    lastRow2 = item;\r\n                }\r\n            };\r\n            var lastRow = null;\r\n            $scope.add_remove_rows = function(e,item){\r\n                var idx = $scope.rmRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.rmRows.push(item) : $scope.rmRows.splice(idx,1);\r\n                    lastRow = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = $scope.selected.indexOf(lastRow);\r\n                    var end_idx = $scope.selected.indexOf(item);\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        $scope.rmRows = $scope.selected.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1); \r\n                    }else{\r\n                        $scope.rmRows = [item];\r\n                        lastRow = item;\r\n                    }\r\n                }\r\n                else{\r\n                    $scope.rmRows.splice(0,$scope.rmRows.length,item);\r\n                    lastRow = item;\r\n                }\r\n            };\r\n            $scope.ltor = function(){\r\n                $scope.add_selected($scope.seRows);\r\n            };\r\n            $scope.rtol = function(){\r\n                $scope.remove_selected($scope.rmRows);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            var last = null;\r\n            element.on(\"keyup\",'input[ng-model=\"searchText\"]',function(e){\r\n                $(\".menu_header\").addClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menu_header\",function(e){\r\n                $(this).toggleClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menuitem\", function(e){\r\n                var ele = $(this);\r\n                var menuItems = ele.parent().parent(\".menu_body\").find(\".menuitem\");\r\n                var allMenuItems = ele.parents(\".menus\").find(\".menuitem\");\r\n                if(e.ctrlKey){\r\n                    ele.hasClass(\"itemActive\") ? ele.removeClass(\"itemActive\") : ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = [].indexOf.apply(menuItems,last);\r\n                    var end_idx = [].indexOf.apply(menuItems,ele);\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        for(var i = 0; i < menuItems.length; i++){\r\n                            if(i > Math.max(begin_idx,end_idx) || i < Math.min(begin_idx,end_idx)){\r\n                                menuItems.eq(i).removeClass(\"itemActive\");\r\n                            }else{\r\n                                menuItems.eq(i).addClass(\"itemActive\");\r\n                            }\r\n                        }\r\n                    }else{\r\n                        ele.addClass(\"itemActive\");\r\n                        last = ele;\r\n                    }\r\n                }else{\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumber\", [\"$http\",\"$compile\",\"$templateCache\",function($http,$compile,$templateCache){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            step:\"@\",\r\n            max:\"@\",\r\n            userNumber: \"=ngModel\",\r\n            min:\"@\"\r\n        },\r\n        priority: 2,\r\n        require: \"ngModel\",\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs,ctrl){\r\n\r\n            scope.addStep = Number(scope.step) || 1;\r\n            scope.addMax  = Number(scope.max) || null;\r\n            scope.addMin  = Number(scope.min) || null;\r\n\r\n            var is_dot = String(Number(scope.step)).indexOf(\".\") === -1 ? false : true; \r\n\r\n            var modelCtrl = ctrl;\r\n            var temp = $compile($(\"<div ui-input-number-wrapper></div>\")[0])(scope);\r\n            element.hide();\r\n            element.after(temp);\r\n           \r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrKey = [8,9,13,35,36,37,38,39,40,45,46,144,112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,110,190];\r\n            scope.keydown = function(e){\r\n                var _code = e.keyCode;\r\n                var _valsplit = e.target.value.split(\".\"); \r\n\r\n                if(numKey.indexOf(_code) === -1 && ctrKey.indexOf(_code) === -1){\r\n                    e.preventDefault();\r\n                }\r\n                // 小数点后只能输入一位\r\n                if(numKey.indexOf(_code) > -1 && _valsplit.length > 1 && _valsplit[1].length > 0 && e.target.selectionStart > e.target.value.indexOf(\".\")){\r\n                    e.preventDefault();\r\n                }\r\n                // 屏蔽小数点\r\n                if(_code === 110 || _code === 190){\r\n                    if(!is_dot){\r\n                        e.preventDefault();\r\n                    }else{\r\n                        if(e.target.value.indexOf(\".\") !== -1){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                // 键盘上键加法\r\n                if(_code === 38){\r\n                    e.preventDefault();\r\n                    scope.add(scope.addStep);\r\n                    scope.round();\r\n                }\r\n                // 键盘下键减法\r\n                if(_code === 40){\r\n                    e.preventDefault();\r\n                    scope.add(-scope.addStep);\r\n                    scope.round();\r\n                }\r\n                \r\n            };\r\n            scope.round = function(){\r\n                scope.userNumber = is_dot ? Math.round(Number(scope.userNumber)*2)/2 : Math.round(scope.userNumber);\r\n            }\r\n\r\n            modelCtrl.$render = function(){\r\n                scope.setValidation();\r\n            };\r\n            scope.setValidation = function(){\r\n                var newval = modelCtrl.$modelValue;\r\n                var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n                if(exp.test(newval)){\r\n                    if((Math.abs(scope.addMax) >= 0 && newval > scope.addMax) || (Math.abs(scope.addMin) >= 0 && newval < scope.addMin) ){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }else{\r\n                    if(newval){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }\r\n            };\r\n            scope.add = function(num){\r\n                scope.userNumber = Number(scope.userNumber) ? Number(scope.userNumber) + Number(num) : Number(num);\r\n                scope.setValidation();\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberWrapper\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        replace:true,\r\n        templateUrl: \"./views/vdi/common/input-number-temp.html\",\r\n        link: function(scope,element){\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberFormatter\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require:\"ngModel\",\r\n        link: function(scope, element, attrs,ctrl){\r\n            var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n\r\n            ctrl.$parsers.push(function(value){\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n            ctrl.$formatters.push(function(value){\r\n\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiWebUpload\", [\"$http\", \"$rootScope\", \"$$$I18N\", \"$Domain\", function($http, $rootScope, $$$I18N, $Domain){\r\n    var org = XMLHttpRequest;\r\n    var org_open = org.prototype.open;\r\n    var allowUpload = window.FormData && typeof window.FormData === \"function\";\r\n    $rootScope.uploadPool = $rootScope.uploadPool || {};\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: function(ele, attrs){\r\n            if(attrs.templateUrl){\r\n                return attrs.templateUrl;\r\n            }\r\n            return \"views/vdi/common/ui-web-upload.html\";\r\n        },\r\n        scope: {\r\n            config:\"=uiUploadConfig\",\r\n            finishHandel:\"&\"\r\n        },\r\n        controller: [\"$scope\", function(scope){\r\n            scope.$on(\"progress\", function(e, size){\r\n                if(size.id === scope.upload_id){\r\n                    scope.progressName = size.name\r\n                    scope.isUploading = true;\r\n                    var percent = size.loaded / size.total * 100;\r\n                    if(isNaN(percent)) {\r\n                        percent = 0;\r\n                    }\r\n                    scope.progressPercent = percent.toFixed(2) + \"%\";\r\n                    if(scope.progressPercent === \"100.00%\"){ scope.isUploading = false; }\r\n                    // 初始化页面上传不更新问题\r\n                    scope.$apply();\r\n                }\r\n            });\r\n            scope.allowUpload = allowUpload;\r\n            scope.uploadISOSize = null;\r\n\r\n        }],\r\n        link: function(scope, element, attrs){\r\n            scope.upload_id = attrs.uiWebUpload;\r\n            scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n            scope.$on(\"localizeLanguageChanged\", function(){\r\n                // 重新apply数据才会更新视图，加定时器，调用apply才不会报错\r\n                setTimeout(function(){\r\n                     scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n                     scope.$apply();\r\n                });\r\n            });\r\n\r\n            // 绑定一个测试提交，如果条件为 true 则按钮可点击，否则不可点击\r\n            // 这种方式需要父 scope 配合\r\n            if(attrs.uiWebUploadTest) {\r\n                var degfn = scope.$parent.$watch(attrs.uiWebUploadTest, function (v) {\r\n                    scope.disableTest = v;\r\n                });\r\n                scope.$on(\"$destroy\", degfn);\r\n                scope.disableTest = false;\r\n            } else {\r\n                scope.disableTest = true;\r\n            }\r\n\r\n            var filetype,url;\r\n            var form = element.find(\"form\");\r\n            form.attr(\"action\", url);\r\n            function checkConfig(file,config){\r\n                var filetype = attrs.uiUploadType;\r\n                var maxSize = attrs.uiUploadLimit;\r\n                var url = attrs.uiUploadUrl;\r\n\r\n                if(!url){\r\n                    throw new Error(\"no url config\");\r\n                    return false;\r\n                }\r\n                var typematch = true;\r\n                if(filetype && file) {\r\n                    typematch = (new RegExp(\"\\\\.(\" + filetype + \")$\")).test(file.name);\r\n                    if(!typematch) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"不是一个可接受的文件类型\"),\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if(maxSize){\r\n                    maxSize = parseInt(maxSize);\r\n                    if(isNaN(maxSize)) {\r\n                        return console.error(\"invalid upload limit:\", attrs.uiUploadLimit);\r\n                    }\r\n                    if(file.size > maxSize * Math.pow(2,30)) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"超出文件大小限制\") + \"(\"+ maxSize +\"G)\",\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n                if(file.size === 0){\r\n                    $.bigBox({\r\n                        title : $$$I18N.get(\"INFOR_TIP\"),\r\n                        content : $$$I18N.get(\"文件为空\"),\r\n                        icon : \"fa fa-warning shake animated\",\r\n                        timeout : 6000\r\n                    });\r\n                    return false;\r\n                }\r\n                else{\r\n                    return true;\r\n                }\r\n            }\r\n            function clearDOM(){\r\n                var input = element.find(\"input[type=file]\");\r\n                input.after(input.clone(true).val(''));\r\n                input.remove();\r\n                scope.isUploading = false;\r\n                scope.progressSize = 0;\r\n            }\r\n            function finish(){\r\n                $rootScope.uploadPool[attrs.uiWebUpload] = undefined;\r\n                delete $rootScope.uploadPool[attrs.uiWebUpload];\r\n            }\r\n            function success(res){\r\n                if(typeof scope.finishHandel === \"function\"){\r\n                    scope.finishHandel({response: res});\r\n                }\r\n            }\r\n            element.find(\"input[type=file]\").on(\"change\", function(e){\r\n                var file = e.target.files[0];\r\n                if(!file){\r\n                    return ;\r\n                }\r\n                // var conf = scope.config;\r\n                var isValid = checkConfig(file);\r\n                \r\n                if(isValid){\r\n                    // $.bigBox({\r\n                    //  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                    //  content : $$$I18N.get(\"INFOR_UPISO\"),\r\n                    //  iconSmall : \"fa fa-warning shake animated\",\r\n                    //  timeout : 5000\r\n                    // });\r\n\r\n                    var data = new FormData();\r\n                    // 允许绑定额外的参数\r\n                    if(attrs.uiWebUploadParams) {\r\n                        $.each(scope.$eval(attrs.uiWebUploadParams), function(k, v){\r\n                            data.append(k, v);\r\n                        });\r\n                    }\r\n                    data.append(attrs.uiWebUploadName || e.target.name, file);\r\n                    scope.progressName = file.name;\r\n                    scope.progressSize = \"(\" + (file.size / Math.pow(2,20)).toFixed(2) + \"M)\";\r\n\r\n                    $http.post($Domain + attrs.uiUploadUrl, data, {\r\n                        transformRequest: function(config){\r\n                            window.XMLHttpRequest = function(a, b, c, e){\r\n                                window.XMLHttpRequest = org;\r\n                                var xhr = new org(a, b, c, e);\r\n                                $rootScope.uploadPool[attrs.uiWebUpload] = xhr;\r\n                                xhr.open = function(q,w,e,r,t,y){\r\n                                    xhr.open = undefined;\r\n                                    delete xhr.open;\r\n                                    if(xhr.upload){\r\n                                        xhr.upload.addEventListener(\"progress\", function(e){\r\n                                            $rootScope.$broadcast(\"progress\", {\r\n                                                id: attrs.uiWebUpload,\r\n                                                name: file.name,\r\n                                                loaded: e.loaded,\r\n                                                position: e.position,\r\n                                                total: e.total,\r\n                                                totalSize: e.totalSize\r\n                                            });\r\n                                            \r\n                                        });\r\n                                        xhr.addEventListener(\"abort\", finish);\r\n                                    }\r\n                                    return org_open.call(xhr, q, w, e, r, t, y);\r\n                                }\r\n                                return xhr;\r\n                            };\r\n                            return config;\r\n                        },\r\n                        headers: {\"Content-Type\": undefined}\r\n                    }).then(function(res){\r\n                        clearDOM();\r\n                        finish(res);\r\n                        success(res);\r\n                        $rootScope.$broadcast(\"finishUpload\", true, file.name);\r\n                    },function(){\r\n                        clearDOM();\r\n                        finish();\r\n                    });\r\n                }\r\n            });\r\n                \r\n            element.find(\"button[type='button']\").on(\"click\", function(e){\r\n                $(this).prev(\"input[type=file]\").click();\r\n            });\r\n            if(attrs.btnClass) {\r\n                element.find(\"button[type='button']\").removeClass(\"btn-primary\").addClass(attrs.btnClass);\r\n            }\r\n            if(attrs.iconClass) {\r\n                element.find(\".icon\").removeClass(\"icon-jj-Upload\").addClass(attrs.iconClass);\r\n            }\r\n\r\n            element.find(\"#abortBtn\").on(\"click\", function(e){\r\n                var xhr = $rootScope.uploadPool[attrs.uiWebUpload];\r\n                xhr && xhr.abort();\r\n                clearDOM();\r\n                scope.$apply();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.service(\"warnBox\",[function(){\r\n    this.warn = function(content, id, callback){\r\n        if(!$(\"#warnBox\").length){\r\n            $(\"body\").append(\"<div id='warnBox'></div>\");\r\n        }else{\r\n            $(\"#warnBox\").show();\r\n        }\r\n        $(\"body #warnBox\").append(\"<div class='box warnBox\"+id+\"'><i class='fa fa-bell'></i><div class='content'><div class='btn-close'><span>×</span></div><p class='detail' title=\"+content+\">\"+content+\"</p></div></div>\")\r\n        if($(\"body .warnBox\"+id+\" .detail\").height()>38){\r\n            $(\"body .warnBox\"+id+\" .detail\").addClass('highHeight');\r\n        }\r\n        $(\"#warnBox .warnBox\"+id+\" .btn-close\").click(function(e){\r\n            callback(id);\r\n        })\r\n        setTimeout(function(){\r\n            if($(\"#warnBox .warnBox\"+id+\"\")){\r\n                callback(id);\r\n            }\r\n        }, 30000)\r\n    },\r\n    this.close = function(id){\r\n        $(\"body .box.warnBox\"+id+\"\").remove();\r\n        if(!$(\"#warnBox\").children().length){\r\n            $(\"#warnBox\").hide();\r\n        }else{ $(\"#warnBox\").show(); }\r\n    }\r\n}])\r\n.controller(\"TaskListController\", [\"$scope\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\",\"$rootScope\", \"warnBox\", function($scope, task, $location, $$$I18N, UserRole,$rootScope,warnBox){\r\n    $scope.toggleTaskList = function(){\r\n        $(\"body\").toggleClass(\"show_prog\");\r\n    };\r\n    let user;\r\n    let taskTimer = null;\r\n    $scope.$on(\"NOAUTH\", () => {\r\n        user = null;\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"STOPLOG\", function(){\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"AUTHED\", () => {\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    });\r\n    if(UserRole.currentUser){\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    }\r\n    $scope.rows = [];\r\n    var data = {};\r\n    $scope.$on(\"instanceIDS\", function($event, ids){\r\n        data.instances = ids;\r\n    });\r\n    $scope.$on(\"imageIDS\", function($event, ids){\r\n        data.images = ids;\r\n    });\r\n    $scope.$on(\"clientIDS\", function($event, ids){\r\n        data.clients = ids;\r\n    });\r\n    $scope.$on('modeIDS', function($event, ids){\r\n        data.modes = ids;\r\n    });\r\n    $scope.$on('nodes', function($event, ids){\r\n        data.nodes = ids;\r\n    });\r\n    $scope.$on('manageNetworkIDS', function($event, ids){\r\n        data.manage_networks = ids;\r\n    })\r\n    $scope.$on('personpools',function($event,ids){\r\n        data.personpools=ids;\r\n    })\r\n    var lists = [], flag = false;\r\n    function schedule(){\r\n        var postData = data && Object.keys(data).map(function(key){\r\n            // if(key !== \"clients\"){\r\n                return {\r\n                    key: key,\r\n                    ids: data[key]\r\n                };                \r\n            // }\r\n            // else{\r\n            //     return {\r\n            //         key: key,\r\n            //         ids: []\r\n            //     };    \r\n            // }\r\n        });\r\n        task.post(postData,\r\n            function(res){\r\n                $scope.rows = res.results.tasks.filter(item => user.real_name ===  item.user);\r\n                \r\n                Object.keys(res.results).forEach(function(key){\r\n                    if(key !== \"tasks\"){\r\n                        $scope.$root && $scope.$root.$broadcast(key + \"RowsUpdate\", res.results[key]);\r\n                    }\r\n                });\r\n                for(var i in res.results.notifies){\r\n                    var item = res.results.notifies[i], color = '#004d60', content;\r\n                    if( lists[item.id] == undefined ){\r\n                        lists[item.id] = item;\r\n                        if(item.waringtype === 0){\r\n                            warnBox.warn(item.content, item.id, function(ID){\r\n                                warnBox.close(ID);\r\n                                task.put({notify_id: ID}, function(res){  })\r\n                            })\r\n                        }\r\n                        else{\r\n                            if(item.waringtype === 1){\r\n                                color = \"#004d60\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n\r\n                            }\r\n                            else{\r\n                                color = \"#C46A69\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n                            }\r\n                            $.bigBox({\r\n                                title:$$$I18N.get('waringtype'+item.waringtype),\r\n                                content:content,\r\n                                color : color,\r\n                                timeout : 3000\r\n                            }, function(){\r\n                                task.put({notify_id: item.id}, function(res){\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                taskTimer = setTimeout(schedule, 3000);\r\n            },\r\n            function(){\r\n                taskTimer = setTimeout(schedule, 10000);\r\n            }\r\n        );\r\n        for(var k in data){\r\n            data[k] = undefined;\r\n            delete data[k];\r\n        }\r\n    }\r\n\r\n}])\r\n.controller(\"pageHeaderController\", [\"$scope\", \"UserAuth\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\", \"desktopHelpBox\",function($scope, Auth, task, $location, $$$I18N, UserRole, desktopHelpBox){\r\n    $scope.logout = function(){\r\n        Auth.logout();\r\n        desktopHelpBox.close();\r\n    };\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        desktopHelpBox.close();\r\n    });\r\n    $scope.$on(\"DMS\", function(e,dms){\r\n        $scope.dmsURL = dms;\r\n        $$$storage.setSessionStorage('DMS', dms);\r\n    })\r\n    $scope.dmsURL = $$$storage.getSessionStorage('DMS') || 'nodms';\r\n    \r\n}])\r\n.controller(\"LogoController\", [\"$scope\",\"settings\", \"$Domain\", \"$$$version\", function($scope, settings, $Domain, $$$version){\r\n    $scope.domain = $Domain;\r\n    $scope.version = $$$version;\r\n    $scope.languages = settings.languages;\r\n    $scope.currentLang = settings.currentLang;\r\n}])\r\n.controller(\"SkinController\", [\"$scope\", function($scope){\r\n    $scope.changeSkin = function(theme){\r\n        $scope.$root.$broadcast(\"changeSkin\", theme)\r\n    }\r\n}])\r\n.controller(\"userLoginInfoController\", [\"$scope\", \"UserRole\", function($scope, Role){\r\n    $scope.loginUser = Role.currentUser;\r\n    $scope.$on(\"AUTHED\", function(name, userInfo){\r\n        $scope.loginUser = userInfo;\r\n    });\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        $scope.loginUser = null;\r\n    });\r\n}])\r\n.controller(\"AlarmController\", [\"$scope\", \"$modal\", \"SystemAlarm\", \"AlarmHistory\", function($scope, $modal, alarm, AlarmHistory){\r\n    $scope.isOpen = false;\r\n    $scope.open = function(){\r\n        $scope.isOpen = true;\r\n    }\r\n    $scope.close = function(e){\r\n        if(e)\r\n            e.stopPropagation();\r\n        $scope.isOpen = false;\r\n    }\r\n    // function findDif(oldArray, newArray, difAttr){\r\n    //     if(newArray.length){\r\n    //         var length = oldArray.length>=newArray.length?oldArray.length:newArray.length;\r\n    //         var difs = [];\r\n    //         for(var i=0; i<length; i++){\r\n    //             if(newArray[i]){\r\n    //                 var different = oldArray.filter(function(item){ return item[difAttr] == newArray[i][difAttr] })[0];\r\n    //                 if(!different){ difs.push(newArray[i]) };\r\n    //             }\r\n    //         }\r\n    //         return difs;\r\n    //     }else{ return []; }\r\n    // };\r\n\r\n    // var oldAlarms = [];\r\n    $scope.$on(\"alarmsRowsUpdate\", function($event, data){\r\n        $scope.alarms = data;\r\n        // if(!$scope.isOpen){\r\n        //     var unreads = [];\r\n        //     data.forEach(function(item){\r\n        //         if(!item.is_read){ unreads.push(item) }\r\n        //     })\r\n        //     if(unreads.length){\r\n        //         $scope.open();\r\n        //         setTimeout(function(){\r\n        //             $scope.close();\r\n        //         }, 30000)\r\n        //     }\r\n        // }\r\n\r\n        // var difs = findDif(oldAlarms, data, 'id');\r\n        // if(!$scope.isOpen && difs.length){\r\n        //     oldAlarms = data;\r\n        //     $scope.open();\r\n        //     setTimeout(function(){\r\n        //         $scope.close();\r\n        //     }, 30000)\r\n        // }\r\n    })\r\n    $scope.delete = function(){\r\n        AlarmHistory.setRead({ids: $scope.alarms.map(function(item){ return item.id; })},function(res){\r\n            $scope.alarms = [];\r\n            $scope.isOpen = false;\r\n        })\r\n    }\r\n}])\r\n.filter(\"interfaceFilter\",[function(){\r\n    return function(data,idx,nets){\r\n        var invalidArr = [];\r\n        nets.forEach((n,i) => {\r\n            if(i !== idx && n._data_dev && n._data_dev._dev){\r\n                invalidArr.push(n._data_dev._dev);\r\n            }\r\n        });\r\n        return data.filter(function(d){\r\n           if(invalidArr.indexOf(d._dev) === -1){\r\n                return true;\r\n           }\r\n           return false;\r\n        });\r\n    }\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/vdi.js"],"sourceRoot":""}