{"version":3,"sources":["webpack:///webpack/bootstrap 73c0292a4c28d0d1ccce","webpack:///./js/vdi/config.js","webpack:///./js/vdi/os-types.json","webpack:///./personal_login/js/webLoginSpice.js","webpack:///./resources/info.json","webpack:///./js/ng/ng.controllers.js","webpack:///./js/ng/ng.directives.js","webpack:///./js/vdi/vdi.js"],"names":["window","$$$storage","getSessionStorage","key","sessionStorage","getItem","setSessionStorage","value","setItem","clearSessionStorage","clear","codeData","i18nData","imagesData","firstKey","ng","angular","module","supportedOems","getSupportedOEMs","currentOEM","host","location","hostname","hasBootstrap","domain","protocol","controllerDomain","interfaceDomain","vdiEnvironment","origin","main","constant","splitDomain","service","get","load","langCode","cb","loadOEMResources","factory","languages","Object","keys","map","currentLang","require","config","$httpProvider","interceptors","push","$q","$root","$$$MSG","test","url","withCredentials","reject","console","log","info","arguments","code","message","res","data","$broadcast","href","replace","ignoreAnyRequestError","$","bigBox","title","content","color","icon","timeout","bootstrap","oem","oemData","alert","lang","images","$body","document","body","theme","pathname","addClass","attr","fadeIn","$$$MAIN_MODULE","concat","error","when","getJSON","done","codeResponse","langResponse","imagesResponse","registerLazyService","fail","statusXhr","langXhr","status_ha","statusResponse","haResponse","JSON","parse","current_lang_type","isSplitBrain","result","is_split_brain","isInitPage","isPersonalLoginPage","isControlNode","is_control_node","isSplitBrainPage","start","roles","ip","initCurrentUser","length","navigator","language","split","toLowerCase","list","resources","ret","forEach","item","flagCode","name","translation","userId","ajax","method","stringify","user_id","dataType","oldInfo","user","$hashstr","hash","substr","$hash","$id","parseInt","$is_windows","indexOf","$instance_id","$name","decodeURIComponent","$pname","$deskName","$is_personalTemp","$resource","$Domain","connect","base64EncodeChars","base64encodePwd","str","out","i","len","c1","c2","c3","charCodeAt","charAt","controller","$scope","$http","localize","$$base64encode","it","iframe","getElementById","onload","CAD","contentWindow","clientAgent","sendCtrlAltDel","jQuery","on","reload","html","setIframeParams","port","token","password","p","src","vm_id","then","access_url","a","createElement","request","base","localStorage","dev_host","run","setLang","$route","$animate","settings","directive","restrict","link","scope","element","attrs","e","preventDefault","$rootScope","ribbon","currentBreadcrumb","updateBreadcrumb","crumbs","breadCrumb","reverse","smartActions","userLogout","$this","SmartMessageBox","text","buttons","ButtonPressed","root_","setTimeout","logout","resetWidgets","widresetMSG","launchFullscreen","hasClass","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","removeClass","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","minifyMenu","toggleClass","effect","toggleMenu","toggleShortcut","shortcut_dropdown","is","shortcut_buttons_hide","shortcut_buttons_show","find","click","mouseup","target","has","animate","height","actionEvents","documentElement","isDefined","action","actionEvent","append","smartbgimage","fadeOut","prop","bind","$html","bgurl","css","$logo","removeClassPrefix","remove","prepend","breadcrumbs","$on","setBreadcrumb","$compile","$watch","newVal","oldVal","updateDOM","empty","crumb","li","localizeText","template","$window","$RESOURCE","encodeHTML","txt","tmplReg","interestAttrReg","ready","currentLocaleData","getLangUrl","sourceText","translate","transkey","onAttrChange","tmpl","myhtml","match","index","myattr","v","k","$observe","isReady","$timeout","transclude","timer","timer_handle","topmenu","first","jarvismenu","accordion","speed","menu_speed","closedSign","openedSign","number","fn","slimScroll","getElement","navs","cancel","$location","isChild","active","isActive","viewLocation","path","hasIcon","hasIconCaption","iconCaption","getItemUrl","view","getItemTarget","$emit","parentCtrls","navCtrl","navgroupCtrl","setActive","openParents","parents","each","el","parent","trim","trigger","ctrl","items","loadItem","loadedItem","callback","onLoad","addItem","refresh","btn","currentTarget","button","onRefresh","total","activityCtrl","next","mytest","$badge","currentContent","loadContent","footer","newContent","oldContent","contentCtrl","setup_widget_desktop","jarvisWidgets","enableJarvisWidgets","grid","widgets","deleteSettingsKey","settingsKeyLabel","deletePositionKey","positionKeyLabel","sortable","buttonsHidden","toggleButton","toggleSpeed","onToggle","deleteButton","deleteClass","deleteSpeed","onDelete","editButton","editPlaceholder","editClass","editSpeed","onEdit","colorButton","fullscreenButton","fullscreenClass","fullscreenDiff","onFullscreen","customButton","customClass","customStart","customEnd","buttonOrder","opacity","dragHandle","placeholderClass","indicator","indicatorTime","timestampPlaceholder","timestampFormat","refreshButton","refreshButtonClass","labelError","labelUpdated","labelRefresh","labelDelete","afterLoad","rtl","onChange","onSave","ajaxnav","navAsAjax","setup_widget_mobile","enableMobileWidgets","setup_widgets_desktop","device","class","$$$IMAGES","iElm","iAttrs","modelCtrl","validate","val","vals","Array","isArray","reg","isvalide","every","parser","reduce","arr","b","formatter","join","undefined","viewChangeListener","$setValidity","$modelValue","$isEmpty","$parsers","$formatters","$viewChangeListeners","ngModel","isValid","format","date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","RegExp","$1","getFullYear","$modal","openModal","obj","init","delTips","delete_rows","delParm","nodelete_rows","nodelTips","open","$modalInstance","deleteName","row","nodeleteName","ok","close","size","users","selecteduser","node","selectUser","children","contents","query","post","put","id","loadISO","save","filter","lun","isUndefined","vendor","type2str","local","iscsi","netfs","fc","type","stauts2str","running","building","stauts","$sce","trustAsHtml","slash","d","nat","bridge","vlan","toFixed","input","searchText","searchName","outPut","$filterProvider","register","pageSize","totalPage","ceil","min","max","slice","$$$I18N","disabled","dialog","templateUrl","dialogUrl","dialogSize","dismiss","___dialog","$filter","getPosition","ele","st","scrollTop","sl","scrollLeft","cw","clientWidth","ch","clientHeight","sw","scrollWidth","sh","scrollHeight","ow","offsetWidth","oh","offsetHeight","x","pageX","y","pageY","getCurrentPage","Number","currentPage","getCurrentRows","getPageSize","pagesize","context_wrapper","hide","getFilterRows","rows","checkAll","_all","_ignore","_selected","checkedAll","selectAllChange","checkOne","some","sort","asc","pageSizeChange","pageChange","currentItem","de","handler","$apply","menu","offset","pos","top","left","stopPropagation","conroller","ctrls","getStart","current","getEnd","end","currentCount","getCurrentCount","$interval","dereg","fn_update_help_info","$$path","help_text","myTips","show","contextmenuDisabled","contextmenuEventName","lastText","btnUnable","steps","currentStep","moveWth","defaults","prevBtnText","nextBtnText","doneBtnText","stepIndex","go","select","step","s","selected","stepScope","getCurrentIndex","prev","getMarginValue","is_dirty","stepEventName","$$nextSibling","showPrev","isLast","doneEventName","addStep","jumpStep","removeStep","insertStep","_idx","wizardWth","outerWidth","_wth","eq","testValid","wizard","options","Highcharts","setOptions","global","useUTC","init_data","time","Date","getTime","$parent","refresh_time","hc_options","chart","renderTo","yAxis","series","highcharts","Chart","drawPoint","datetime","hc_series","drawpoint","reset_highcharts","destroy","newvalue","delegate","event","ip_pattern","elm","ngmodelctl","ngrequiredctl","viewValue","keyCode","numKey","ctrlKey","which","num","nextValue","isNaN","ngModelCtrl","required","ipRequired","$eval","CHECKTOOLS","checkIP","parts","numre","valid","ipformatNum","pow","ip2long","checkRange","s_ip","e_ip","c","popEl","$input","after","$render","modelVal","modelValArr","$setPristine","idx","err","$setViewValue","nextEles","nextAll","focus","prevAll","selectionStart","selectionEnd","filtertext","lastFilter","lastFiltedResult","add_selected","getUsers","filterUser","copy","user_name","real_name","nodes","add_select_rows","$event","APIadmin","APIuser","APIdomain","expandedNodes","_users","seRows","rmRows","common_users","formatData","iteration","childName","_is_last","oldlen","splice","removeNoChildrenDeparts","noUserFilter","walk","dept_id","get_admin","deferred","defer","resolve","promise","get_user","query_tree","get_domain","all","typeName","userData","domain_users","_name","getLastLevelNodes","obj_levels","arrays","levels","remove_selected","lastRow2","shiftKey","begin_idx","end_idx","lastRow","add_remove_rows","ltor","rtol","last","menuItems","allMenuItems","apply","$templateCache","userNumber","priority","addMax","addMin","is_dot","String","temp","ctrKey","keydown","_code","_valsplit","add","round","setValidation","newval","exp","abs","org","XMLHttpRequest","org_open","prototype","allowUpload","FormData","uploadPool","finishHandel","upload_id","progressName","isUploading","percent","loaded","progressPercent","uploadISOSize","uiWebUpload","btnName","uiUploadBtnName","uiWebUploadTest","degfn","disableTest","filetype","form","checkConfig","file","uiUploadType","maxSize","uiUploadLimit","uiUploadUrl","Error","typematch","clearDOM","clone","progressSize","finish","success","response","files","uiWebUploadParams","uiWebUploadName","transformRequest","xhr","q","w","r","t","upload","addEventListener","position","totalSize","call","headers","btnClass","iconClass","abort","warn","task","UserRole","warnBox","toggleTaskList","taskTimer","clearTimeout","currentUser","schedule","ids","instances","clients","modes","manage_networks","personpools","lists","flag","postData","results","tasks","notifies","waringtype","ID","notify_id","Auth","desktopHelpBox","dms","dmsURL","$$$version","version","changeSkin","Role","loginUser","userInfo","alarm","AlarmHistory","isOpen","alarms","delete","setRead","nets","invalidArr","n","_data_dev","_dev"],"mappings":"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","file":"webLoginSpice.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/devbuild/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 172);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 73c0292a4c28d0d1ccce","/**\r\n * init, index, templateXXX\r\n */\r\n\r\n// TODO: \r\nwindow.$$$storage = {\r\n\tgetSessionStorage(key){\r\n\t\treturn sessionStorage.getItem('vdi_'+ key);\r\n\t},\r\n\tsetSessionStorage(key, value){\r\n\t\tsessionStorage.setItem('vdi_'+ key, value);\r\n\t},\r\n\tclearSessionStorage(){\r\n\t\tsessionStorage.clear()\r\n\t}\r\n}\r\n\r\n// \r\nlet codeData = {};\r\nlet i18nData = {};\r\nlet imagesData = {};\r\n\r\nlet firstKey; //  OEM\r\nlet ng = angular.module(\"ng\");\r\nlet supportedOems = getSupportedOEMs();\r\nlet currentOEM = null;\r\n\r\nlet host = location.hostname;\r\nlet hasBootstrap = false;\r\n\r\n\r\n// \r\nlet domain = location.protocol + \"//\" + host + \":8081\"; // \r\nlet controllerDomain = location.protocol + \"//\" + host + \":19891\"; // \r\nlet interfaceDomain = location.protocol + \"//\" + host + \":19893\"; // \r\nif(window.vdiEnvironment === \"development\") {\r\n\thost = $$$storage.getSessionStorage('dev_host');\r\n\t// use dev_host\r\n\tif(host) {\r\n\t\tdomain = \"http://\" + host + \":8081\";\r\n\t\tcontrollerDomain = \"http://\" + host + \":19891\";\r\n\t\tinterfaceDomain = \"http://\" + host + \":19893\";\r\n\t} else {\r\n\t\t// use mock server\r\n\t\tdomain = controllerDomain = interfaceDomain = location.origin;\r\n\t}\r\n}\r\n\r\nmain();\r\n\r\n/*  angular  */\r\nng.constant(\"$Domain\", domain);\r\nng.constant(\"$controllerDomain\", controllerDomain);\r\nng.constant(\"$interfaceDomain\", interfaceDomain);\r\nng.constant(\"$splitDomain\", location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\");\r\nlet splitDomain = location.protocol + \"//\" + ($$$storage.getSessionStorage('splitIP') || domain) + \":8081\";\r\nng.service(\"$RESOURCE\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn supportedOems[key];\r\n\t};\r\n\tthis.load = function(langCode, cb){\r\n\t\tloadOEMResources(langCode, cb);\r\n\t};\r\n}]);\r\n\r\nng.factory(\"settings\", [function(){\r\n\treturn {\r\n\t\tlanguages: Object.keys(supportedOems).map(function(key){\r\n\t\t\treturn supportedOems[key];\r\n\t\t}),\r\n\t\tcurrentLang: supportedOems[currentOEM]\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$MSG\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn codeData[key] || \"\";\r\n\t};\r\n}]);\r\n\r\nng.service(\"$$$I18N\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn i18nData[key] || \"\";\r\n\t};\r\n}]);\r\nng.service(\"$$$IMAGES\", [function(){\r\n\tthis.get = function(key){\r\n\t\treturn imagesData[key] || \"\";\r\n\t};\r\n}]);\r\nng.constant(\"$$$os_types\", require(\"./os-types\"));\r\nng.config([\"$httpProvider\", function($httpProvider){\r\n\t$httpProvider.interceptors.push([\"$q\", \"$rootScope\", \"$$$MSG\", function($q, $root, $$$MSG){\r\n\t\treturn {\r\n\t\t\t\"request\": function(config){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(config.url)){\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(/\\.html$/i.test(config.url)) {\r\n\t\t\t\t\treturn config;\r\n\t\t\t\t}\r\n\t\t\t\tif(!/^https?:\\/\\//.test(config.url)) {\r\n\t\t\t\t\tconfig.withCredentials = true;\r\n\t\t\t\t\tconfig.url = domain + config.url;\r\n\t\t\t\t}\r\n\t\t\t\treturn config;\r\n\t\t\t},\r\n\t\t\t\"requestError\": function(reject){\r\n\t\t\t\tconsole.log(\"REQ_ERROR\");\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"responseError\": function(reject){\r\n\t\t\t\tconsole.log(\"RES_ERROR\", arguments);\r\n\t\t\t\treturn $q.reject({\r\n\t\t\t\t\tcode: 100,\r\n\t\t\t\t\tmessage: $$$MSG.get(\"\"),\r\n\t\t\t\t\tinfo: reject\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\"response\": function(res){\r\n\t\t\t\tif(/^https?\\:\\/\\//.test(res.config.url)){\r\n\t\t\t\t\tif(/\\/thor\\/toolkit\\//.test(res.config.url) || /\\/v1\\/(?:node|network)\\//.test(res.config.url)){\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tswitch(res.data.code){\r\n\t\t\t\t\t\t\tcase 17001:\r\n\t\t\t\t\t\t\t\t$root.$broadcast(\"NOAUTH\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 11011:\r\n\t\t\t\t\t\t\t\t$$$storage.setSessionStorage('returnUrl', location.href)\r\n\t\t\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tif(/\\/thor\\/home\\/tasklog/.test(res.config.url)){\r\n\t\t\t\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(window.ignoreAnyRequestError) { return res; }\r\n\t\t\t\t\t\t\t\t$.bigBox && $.bigBox({\r\n\t\t\t\t\t\t\t\t\ttitle : $$$MSG.get(\"PAI_CODE\") + res.data.code,\r\n\t\t\t\t\t\t\t\t\tcontent : $$$MSG.get(res.data.code)==''?res.data.message:$$$MSG.get(res.data.code),\r\n\t\t\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $q.reject(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t};\r\n\t}]);\r\n}]);\r\n\r\n/**\r\n *  angular app\r\n * @param {String} oem oem \r\n */\r\nfunction bootstrap(oem){\r\n\tvar oemData = supportedOems ? supportedOems[oem] : null;\r\n\tif(!oemData) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\"\");\r\n\t\t}\r\n\t}\r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tvar $body = $(document.body);\r\n\t\tvar theme = $$$storage.getSessionStorage('current_theme') || \"smart-style-0\";\r\n\t\tif(!/personal_login/.test(location.pathname)) {\r\n\t\t\t$body.addClass(theme);\r\n\t\t\t$(\"#vdi_skins_url\").attr(\"href\", `/resources/pkg/${oem}/skins.css`);\r\n\t\t\t$body.fadeIn(1000);\r\n\t\t}\r\n\t\t\r\n\t\t// \r\n\t\tif(window.vdiEnvironment === \"development\" && !window.$$$MAIN_MODULE) {\r\n\t\t\treturn alert(\"main module is not defined!\");\r\n\t\t}\r\n\t\tangular.bootstrap(document, [].concat(window.$$$MAIN_MODULE));\r\n\t\thasBootstrap = true;\r\n\t}\r\n}\r\n\r\n/**\r\n *  OEM \r\n * @param {String} oem  OEM \r\n * @param {Function} cb \r\n */\r\nfunction loadOEMResources(oem, cb){\r\n\tif(!oem) {\r\n\t\tif(window.vdiEnvironment === \"development\") {\r\n\t\t\treturn alert(\" key \");\r\n\t\t}\r\n\t}\r\n\tif(!(oem in supportedOems)) {\r\n\t\tconsole.error(\"unsupported resource key:\", oem);\r\n\t\toem = Object.keys(supportedOems)[0];\r\n\t}\r\n\tlet oemData = supportedOems[oem];\r\n\t// \r\n\tif(oemData.code && oemData.lang && oemData.images){\r\n\t\tcodeData = oemData.code;\r\n\t\ti18nData = oemData.lang;\r\n\t\timagesData = oemData.images;\r\n\t\treturn cb(oemData);\r\n\t}\r\n\t$.when(\r\n\t\t$.getJSON(`/resources/pkg/${oem}/code.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/lang.js`),\r\n\t\t$.getJSON(`/resources/pkg/${oem}/images.js`)\r\n\t).done(function(codeResponse, langResponse, imagesResponse){\r\n\t\tcodeData = oemData.code = codeResponse[0];\r\n\t\ti18nData = oemData.lang = langResponse[0];\r\n\t\timagesData = oemData.images = imagesResponse[0];\r\n\t\tif(!hasBootstrap) {\r\n\t\t\tregisterLazyService();\r\n\t\t\tbootstrap(oem);\r\n\t\t} else {\r\n\t\t\tcb && cb(oemData);\r\n\t\t}\r\n\t}).fail(function(){\r\n\t\tconsole.log(`load ${oem} resource error:`, arguments[2]);\r\n\t});\r\n\tcurrentOEM = oem;\r\n}\r\nfunction main(){\r\n\tvar statusXhr = $.get(controllerDomain + \"/v1/node/status\");\r\n\tvar langXhr = $.get(domain + \"/thor/init/lang\");\r\n\tvar status_ha = $.get(domain + \"/thor/get_controller_ha_status\");\r\n\t$.when(statusXhr, langXhr, status_ha).done(function(statusResponse, langResponse, haResponse){\r\n\t\tif(typeof statusResponse[0] === \"string\") {\r\n\t\t\tstatusResponse[0] = JSON.parse(statusResponse[0])\r\n\t\t}\r\n\t\tvar oem = langResponse[0].current_lang_type;\r\n\t\tvar isSplitBrain = haResponse[0].result.is_split_brain;\r\n\t\tvar isInitPage = /init\\.html$/.test(location.pathname);\r\n\t\tvar isPersonalLoginPage = location.pathname==='/personal_login/';\r\n\t\tvar isControlNode = statusResponse[0].is_control_node;\r\n\t\tvar isSplitBrainPage = /split\\.html$/.test(location.pathname);\r\n\t\tif(isSplitBrainPage) {\r\n\t\t\tif(!isSplitBrain) {\r\n\t\t\t\tlocation.replace(\"/\");\r\n\t\t\t}else{\r\n\t\t\t\tstart();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(isSplitBrain){\r\n\t\t\t\t// $$$storage.clearSessionStorage();\r\n\t\t\t\t$$$storage.setSessionStorage('splitIP', haResponse[0].result.roles[0].ip);\r\n\t\t\t\tlocation.replace(\"split.html\");\r\n\t\t\t} else {\r\n\t\t\t\tif(isControlNode) {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage) {\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstart(oem);\r\n\t\t\t\t\t\tinitCurrentUser();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(isInitPage || isPersonalLoginPage){\r\n\t\t\t\t\t\tstart();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tlocation.replace(\"init.html\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction start(oem){\r\n\t// \r\n\tif(!oem) {\r\n\t\t// NOTE: \r\n\t\t// \r\n\t\tif(Object.keys(supportedOems).length > 1) {\r\n\t\t\t// \r\n\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/NavigatorLanguage/language\r\n\t\t\t// \r\n\t\t\t//   navigator.__defineGetter__(\"language\", function(){ return \"en-us\" })\r\n\t\t\tlet lang = navigator.language;\r\n\t\t\tif(lang) {\r\n\t\t\t\tlang = lang.split(\"-\")[0].toLowerCase();\r\n\t\t\t}\r\n\t\t\tif(lang === \"zh\") {\r\n\t\t\t\toem = \"e-vdi\";\r\n\t\t\t} else if(lang === \"en\") {\r\n\t\t\t\toem = \"classEn\";\r\n\t\t\t}\r\n\t\t\tif(!supportedOems[oem]) {\r\n\t\t\t\toem = firstKey;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\toem = firstKey; // \r\n\t\t}\r\n\t}\r\n\tloadOEMResources(oem, supportedOems);\r\n}\r\n\r\nfunction getSupportedOEMs(){\r\n\tvar list = require(\"../../resources/info\").resources;\r\n\tvar ret = {};\r\n\tlist.forEach(function(item){\r\n\t\tret[item.key] = item;\r\n\t\t// \r\n\t\titem.langCode = item.key;\r\n\t\titem.flagCode = item.key;\r\n\t\titem.language = item.name;\r\n\t\titem.translation = item.title;\r\n\t});\r\n\tfirstKey = list[0].key;\r\n\treturn ret;\r\n}\r\n\r\nfunction initCurrentUser(){\r\n\tvar userId = $$$storage.getSessionStorage('userId');\r\n\tif(!userId) { return; }\r\n\t$.ajax({\r\n\t\tmethod: \"POST\",\r\n\t\turl: domain + \"/thor/user/session\",\r\n\t\tdata: JSON.stringify({\r\n\t\t\tuser_id: userId\r\n\t\t}),\r\n\t\tdataType: 'json'\r\n\t}).done(function(res){\r\n\t\tif(res.code === 0){\r\n\t\t\t// res.user.keys = \"Summary,Resource,Console,Pool,Storage,Network,ManageNetwork,VirtualSwitch,DataNetwork,DHCP,Desktop,Teaching_desktop,Personal_desktop,Personal_desktop_pool,Template,Teaching_template,Personal_template,Hardware_template,Terminal,Classroom,Terminal_Manage,User,Role_Manage,Administrator,Common_user,Domain_user,Monitor,Host_monitoring,Desktop_monitoring,Alarm_information,Alarm_policy,Timetable,Course_list,Plan,Timer_switch,Host_switch,HA,desktop_ha,System,System_deploy,System_desktop,System_backup,System_ISO,USB_redirection,USB_through,AutoSnapshot,System_set,System_upgrade,Operation_log,About\";\r\n\t\t\tvar oldInfo = JSON.parse($$$storage.getSessionStorage(\"loginInfo\")) || {};\r\n\t\t\tObject.keys(res.user).forEach(function(key){\r\n\t\t\t\toldInfo[key] = res.user[key];\r\n\t\t\t});\r\n\t\t\t$$$storage.setSessionStorage('loginInfo', JSON.stringify(oldInfo));\r\n\t\t\t$$$storage.setSessionStorage('power', res.user.keys);\r\n\t\t}\r\n\t})\r\n}\r\n\r\nfunction registerLazyService(){\r\n\tng.constant(\"$$$version\", i18nData[\"GOD_VERSION\"] || \"dev\");\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/config.js","module.exports = [{\"key\":\"other\",\"icon\":\"other.png\",\"value\":\"Other\"},{\"key\":\"ArchLinux\",\"icon\":\"linux.png\",\"value\":\"Arch Linux\"},{\"key\":\"ArchLinux_64\",\"icon\":\"linux.png\",\"value\":\"Arch Linux (64 bit)\"},{\"key\":\"Debian\",\"icon\":\"debian.png\",\"value\":\"Debian\"},{\"key\":\"Debian_64\",\"icon\":\"debian.png\",\"value\":\"Debian (64 bit)\"},{\"key\":\"Fedora\",\"icon\":\"fedora.png\",\"value\":\"Fedora\"},{\"key\":\"Fedora_64\",\"icon\":\"fedora.png\",\"value\":\"Fedora (64 bit)\"},{\"key\":\"FreeBSD\",\"icon\":\"linux.png\",\"value\":\"FreeBSD\"},{\"key\":\"FreeBSD_64\",\"icon\":\"linux.png\",\"value\":\"FreeBSD (64 bit)\"},{\"key\":\"Gentoo\",\"icon\":\"linux.png\",\"value\":\"Gentoo\"},{\"key\":\"Gentoo_64\",\"icon\":\"linux.png\",\"value\":\"Gentoo (64 bit)\"},{\"key\":\"Linux\",\"icon\":\"linux.png\",\"value\":\"Other Linux\"},{\"key\":\"MacOS\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server\"},{\"key\":\"MacOS_64\",\"icon\":\"linux.png\",\"value\":\"Mac OS X Server (64 bit)\"},{\"key\":\"OpenBSD\",\"icon\":\"linux.png\",\"value\":\"OpenBSD\"},{\"key\":\"OpenBSD_64\",\"icon\":\"linux.png\",\"value\":\"OpenBSD (64 bit)\"},{\"key\":\"OpenSUSE\",\"icon\":\"linux.png\",\"value\":\"openSUSE\"},{\"key\":\"OpenSUSE_64\",\"icon\":\"linux.png\",\"value\":\"openSUSE (64 bit)\"},{\"key\":\"OpenSolaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later\"},{\"key\":\"OpenSolaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 10/09 and later (64 bit)\"},{\"key\":\"Oracle\",\"icon\":\"linux.png\",\"value\":\"Oracle\"},{\"key\":\"Oracle_64\",\"icon\":\"linux.png\",\"value\":\"Oracle (64 bit)\"},{\"key\":\"Other\",\"icon\":\"unknown.png\",\"value\":\"Other/Unknown\"},{\"key\":\"RedHat\",\"icon\":\"redhat.png\",\"value\":\"Red Hat\"},{\"key\":\"RedHat_64\",\"icon\":\"redhat.png\",\"value\":\"Red Hat (64 bit)\"},{\"key\":\"Solaris\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier\"},{\"key\":\"Solaris_64\",\"icon\":\"linux.png\",\"value\":\"Oracle Solaris 10 5/09 and earlier (64 bit)\"},{\"key\":\"Ubuntu\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu\"},{\"key\":\"Ubuntu_64\",\"icon\":\"ubuntu.png\",\"value\":\"Ubuntu (64 bit)\"},{\"key\":\"Windows2000\",\"icon\":\"win7.png\",\"value\":\"Windows 2000\"},{\"key\":\"Windows2003\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003\"},{\"key\":\"Windows2003_64\",\"icon\":\"win2003.png\",\"value\":\"Windows 2003 (64 bit)\"},{\"key\":\"Windows2008\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008\"},{\"key\":\"Windows2008_64\",\"icon\":\"win2008.png\",\"value\":\"Windows 2008 (64 bit)\"},{\"key\":\"Windows7\",\"icon\":\"win7.png\",\"value\":\"Windows 7\"},{\"key\":\"Windows7_64\",\"icon\":\"win7.png\",\"value\":\"Windows 7 (64 bit)\"},{\"key\":\"Windows8\",\"icon\":\"win8.png\",\"value\":\"Windows 8\"},{\"key\":\"Windows8_64\",\"icon\":\"win8.png\",\"value\":\"Windows 8 (64 bit)\"},{\"key\":\"WindowsNT\",\"icon\":\"win7.png\",\"value\":\"Other Windows\"},{\"key\":\"WindowsNT4\",\"icon\":\"win7.png\",\"value\":\"Windows NT 4\"},{\"key\":\"WindowsVista\",\"icon\":\"win7.png\",\"value\":\"Windows Vista\"},{\"key\":\"WindowsVista_64\",\"icon\":\"win7.png\",\"value\":\"Windows Vista (64 bit)\"},{\"key\":\"Windowsxp\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"Windowsxp_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"WindowsXP\",\"icon\":\"winxp.png\",\"value\":\"Windows XP\"},{\"key\":\"WindowsXP_64\",\"icon\":\"winxp.png\",\"value\":\"Windows XP (64 bit)\"},{\"key\":\"Windows 7\",\"icon\":\"win7.png\",\"value\":\"Windows 7 series\"},{\"key\":\"Windows10\",\"icon\":\"win8.png\",\"value\":\"Windows 10\"},{\"key\":\"Windows10_64\",\"icon\":\"win8.png\",\"value\":\"Windows 10 (64 bit)\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./js/vdi/os-types.json\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","var $hashstr = location.hash.substr(1) || \"\";\r\nvar $hash = $hashstr.replace(/^\\/+/, \"\").split(\"&\");\r\nvar $id = parseInt($hash[0]);\r\nvar $is_windows = $hash[1] && $hash[1].indexOf('Windows') > -1;\r\nvar $instance_id;\r\nvar $name = $hash[2]?decodeURIComponent($hash[2]):'';\r\nvar $pname=$hash[3]?decodeURIComponent($hash[3]).split(';')[1]:'';\r\nvar $deskName=$pname || decodeURIComponent(location.hash).split('&')[3];\r\nvar $is_personalTemp = $hash[3]==\"personal\"?true:false;\r\nangular.module(\"vdi.webSpice\", [\"app.localize\",\"app.controllers\",\"vdi\"])\r\n.factory('BrowserConnect', [\"$resource\", \"$Domain\", function($resource,$Domain){\r\n    return $resource($Domain + \"/thor/desktop/connect\", null, {\r\n        connect:\r\n            { method: \"POST\"},\r\n    });\r\n}])\r\n.factory('$$base64encode', function(){\r\n    var base64EncodeChars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    return function base64encodePwd(str) {  \r\n        var out, i, len;  \r\n        var c1, c2, c3;  \r\n        len = str.length;  \r\n        i = 0;  \r\n        out = \"\";  \r\n        while(i < len) {  \r\n            c1 = str.charCodeAt(i++) & 0xff;  \r\n            if(i == len)  \r\n            {  \r\n                out += base64EncodeChars.charAt(c1 >> 2);  \r\n                out += base64EncodeChars.charAt((c1 & 0x3) << 4);  \r\n                out += \"==\";  \r\n                break;  \r\n            }  \r\n            c2 = str.charCodeAt(i++);  \r\n            if(i == len)  \r\n            {  \r\n                out += base64EncodeChars.charAt(c1 >> 2);  \r\n                out += base64EncodeChars.charAt(((c1 & 0x3)<< 4) | ((c2 & 0xF0) >> 4));  \r\n                out += base64EncodeChars.charAt((c2 & 0xF) << 2);  \r\n                out += \"=\";  \r\n                break;  \r\n            }  \r\n            c3 = str.charCodeAt(i++);  \r\n            out += base64EncodeChars.charAt(c1 >> 2);  \r\n            out += base64EncodeChars.charAt(((c1 & 0x3)<< 4) | ((c2 & 0xF0) >> 4));  \r\n            out += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >>6));  \r\n            out += base64EncodeChars.charAt(c3 & 0x3F);  \r\n        }  \r\n        return out;  \r\n    }  \r\n})\r\n.controller(\"browserSpiceController\", [\"$scope\",\"$http\", \"localize\", \"$$base64encode\", function($scope,$http,localize,$$base64encode){\r\n    var it = $scope;\r\n    var iframe=document.getElementById(\"webSpice\");\r\n    iframe.onload=function(){\r\n        //CTRL+ALT+DELETE\r\n        $scope.CAD = function(){\r\n            iframe.contentWindow.clientAgent.sendCtrlAltDel();\r\n        }\r\n    }\r\n    //\r\n    jQuery(window).on(\"passwordError\",function(){\r\n        console.log('password invalid tips');\r\n        iframe.contentWindow.location.reload();\r\n    }); \r\n    //token\r\n    // jQuery(window).on(\"tokenError\",function(){\r\n    //     //token\r\n    //     console.log('token outtime');\r\n    //     iframe.contentWindow.location.reload();\r\n    // });\r\n    //socketClose \r\n    jQuery(window).on(\"socketClose\",function(){\r\n        //socket\r\n        console.log('socketClose');\r\n        iframe.contentWindow.location.reload();\r\n        jQuery('#noVNC_status').html('socket closed');\r\n    });\r\n\r\n    function setIframeParams(host,port,token,password){\r\n        var p = port || 6082;\r\n        iframe.src=\"js/vdi-spice/vdi-client/index.html?host=\"+\r\n                    host+\"&port=\"+p+\"&token=\"+\r\n                    token+\"&password=\"+$$base64encode(password);\r\n    }\r\n\r\n    $scope.name = $deskName;\r\n    $http({\r\n        method: \"post\",\r\n        url:\"/thor/desktop/connect\",\r\n        data: {\r\n            vm_id: $id\r\n        }\r\n    }).then(function(res){\r\n        var url=res.data.result.access_url;\r\n        var a = document.createElement(\"a\");\r\n        a.href = url;\r\n        var password=res.data.result.password;\r\n        var host=a.host.split(':')[0];\r\n        var port = a.port;\r\n        var token=url.split('=')[1];\r\n        setIframeParams(host, port, token, password);\r\n        jQuery('#noVNC_status').html('connecting');\r\n    });\r\n}])\r\n.config([\"$httpProvider\", function($httpProvider){\r\n    $httpProvider.interceptors.push(function(){\r\n        return {\r\n            request: function(config){\r\n                var base;\r\n                // \r\n                if(/^https?:/i.test(config.url)) {\r\n                    return config;\r\n                }\r\n                // \r\n                if(/\\.html?$/i.test(config.url)) {\r\n                    return config;\r\n                }\r\n                if(localStorage.dev_host) {\r\n                    base = \"//\" + localStorage.dev_host;\r\n                } else {\r\n                    base = \"//\" + location.hostname + \":8081\";\r\n                }\r\n                // TODO: handle relative url\r\n                config.url = base + config.url;\r\n                return config;\r\n            }\r\n        };\r\n    });\r\n}])\r\n.run(['localize',function(localize) {\r\n    localize.setLang();\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./personal_login/js/webLoginSpice.js","module.exports = {\"resource_template\":{\"key\":\"0\",\"title\":\"dev\"},\"resources\":[{\"key\":\"e-vdi\",\"name\":\"E-VDI\",\"title\":\"E-VDI\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"pc\",\"name\":\"PC\",\"title\":\"PC\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classCh\",\"name\":\"\",\"title\":\"\",\"langType\":\"cn\",\"langDes\":\"\",\"clientKey\":\"public\",\"public\":true},{\"key\":\"classEn\",\"name\":\"Cloud Class\",\"title\":\"\",\"langType\":\"en\",\"langDes\":\"English\",\"clientKey\":\"public\",\"public\":true}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/info.json\n// module id = 2\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","angular.module(\"app.controllers\", [])\r\n\r\n.controller(\"PageViewController\", [\"$scope\", \"$route\", \"$animate\", function($scope, $route, $animate) {\r\n\t// controler of the dynamically loaded views, for DEMO purposes only.\r\n\t// $scope.$on(\"$viewContentLoaded\", function() {\r\n\t// \tconsole.log(\"ffffffff\")\r\n\t// })\r\n}])\r\n.controller(\"LangController\", [\"$scope\", \"settings\", \"localize\", function($scope, settings, localize) {\r\n\t$scope.languages = settings.languages;\r\n\t$scope.currentLang = settings.currentLang || $scope.languages[0];\r\n\t$scope.setLang = function(lang) {\r\n\t\tsettings.currentLang = lang;\r\n\t\t$scope.currentLang = lang;\r\n\t\tlocalize.setLang(lang);\r\n\t\t$$$storage.setSessionStorage('lang_code', lang.langCode)\r\n\t};\r\n\t// set the default language\r\n\t$scope.setLang($scope.currentLang);\r\n}]);\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.controllers.js","angular.module('app.main', [])\r\n// initiate body\r\n.directive('body', function() {\r\n\treturn {\r\n\t\trestrict: 'E',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\telement.on('click', 'a[href=\"#\"], [data-toggle]', function(e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.factory('ribbon', ['$rootScope', function($rootScope) {\r\n\tvar ribbon = {\r\n\t\tcurrentBreadcrumb: [],\r\n\t\tupdateBreadcrumb: function(crumbs) {\r\n\t\t\tvar breadCrumb = crumbs.reverse();\r\n\t\t\tribbon.currentBreadcrumb = breadCrumb;\r\n\t\t\t$rootScope.$broadcast('navItemSelected', breadCrumb);\r\n\t\t}\r\n\t};\r\n\r\n\treturn ribbon;\r\n}])\r\n\r\n.directive('action', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t/*\r\n\t\t\t * SMART ACTIONS\r\n\t\t\t */\r\n\t\t\tvar smartActions = {\r\n    \r\n\t\t\t    // LOGOUT MSG \r\n\t\t\t    userLogout: function($this){\r\n\t\t\t\r\n\t\t\t\t\t// ask verification\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>\" + $('#show-shortcut').text() + \"</strong></span> ?\",\r\n\t\t\t\t\t\tcontent : $this.data('logout-msg') || \"You can improve your security further after logging out by closing this opened browser\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\") {\r\n\t\t\t\t\t\t\t$.root_.addClass('animated fadeOutUp');\r\n\t\t\t\t\t\t\tsetTimeout(logout, 1000);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tfunction logout() {\r\n\t\t\t\t\t\twindow.location = $this.attr('href');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// RESET WIDGETS\r\n\t\t\t    resetWidgets: function($this){\r\n\t\t\t\t\t$.widresetMSG = $this.data('reset-msg');\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.SmartMessageBox({\r\n\t\t\t\t\t\ttitle : \"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage\",\r\n\t\t\t\t\t\tcontent : $.widresetMSG || \"Would you like to RESET all your saved widgets and clear LocalStorage?\",\r\n\t\t\t\t\t\tbuttons : '[No][Yes]'\r\n\t\t\t\t\t}, function(ButtonPressed) {\r\n\t\t\t\t\t\tif (ButtonPressed == \"Yes\" && localStorage) {\r\n\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // LAUNCH FULLSCREEN \r\n\t\t\t    launchFullscreen: function(element){\r\n\t\t\t\r\n\t\t\t\t\tif (!$.root_.hasClass(\"full-screen\")) {\r\n\t\t\t\t\r\n\t\t\t\t\t\t$.root_.addClass(\"full-screen\");\r\n\t\t\t\t\r\n\t\t\t\t\t\tif (element.requestFullscreen) {\r\n\t\t\t\t\t\t\telement.requestFullscreen();\r\n\t\t\t\t\t\t} else if (element.mozRequestFullScreen) {\r\n\t\t\t\t\t\t\telement.mozRequestFullScreen();\r\n\t\t\t\t\t\t} else if (element.webkitRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.webkitRequestFullscreen();\r\n\t\t\t\t\t\t} else if (element.msRequestFullscreen) {\r\n\t\t\t\t\t\t\telement.msRequestFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.root_.removeClass(\"full-screen\");\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (document.exitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.exitFullscreen();\r\n\t\t\t\t\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\t\t\t\t\tdocument.mozCancelFullScreen();\r\n\t\t\t\t\t\t} else if (document.webkitExitFullscreen) {\r\n\t\t\t\t\t\t\tdocument.webkitExitFullscreen();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t   },\r\n\t\t\t\r\n\t\t\t   // MINIFY MENU\r\n\t\t\t    minifyMenu: function($this){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$.root_.toggleClass(\"minified\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$this.effect(\"highlight\", {}, 500);\r\n\t\t\t\t\t}\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    // TOGGLE MENU \r\n\t\t\t    toggleMenu: function(){\r\n\t\t\t    \tif (!$.root_.hasClass(\"menu-on-top\")){\r\n\t\t\t\t\t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t} else if ( $.root_.hasClass(\"menu-on-top\") && $.root_.hasClass(\"mobile-view-activated\") ) {\r\n\t\t\t    \t\t$('html').toggleClass(\"hidden-menu-mobile-lock\");\r\n\t\t\t\t\t\t$.root_.toggleClass(\"hidden-menu\");\r\n\t\t\t\t\t\t$.root_.removeClass(\"minified\");\r\n\t\t\t    \t}\r\n\t\t\t    },     \r\n\t\t\t\r\n\t\t\t    // TOGGLE SHORTCUT \r\n\t\t\t    toggleShortcut: function(){\r\n\t\t\t    \t\r\n\t\t\t\t\tif (shortcut_dropdown.is(\":visible\")) {\r\n\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tshortcut_buttons_show();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// SHORT CUT (buttons that appear when clicked on user name)\r\n\t\t\t\t\tshortcut_dropdown.find('a').click(function(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\twindow.location = $(this).attr('href');\r\n\t\t\t\t\t\tsetTimeout(shortcut_buttons_hide, 300);\r\n\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT buttons goes away if mouse is clicked outside of the area\r\n\t\t\t\t\t$(document).mouseup(function(e) {\r\n\t\t\t\t\t\tif (!shortcut_dropdown.is(e.target) && shortcut_dropdown.has(e.target).length === 0) {\r\n\t\t\t\t\t\t\tshortcut_buttons_hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE HIDE\r\n\t\t\t\t\tfunction shortcut_buttons_hide() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"hide\"\r\n\t\t\t\t\t\t}, 300, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.removeClass('shortcut-on');\r\n\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\t// SHORTCUT ANIMATE SHOW\r\n\t\t\t\t\tfunction shortcut_buttons_show() {\r\n\t\t\t\t\t\tshortcut_dropdown.animate({\r\n\t\t\t\t\t\t\theight : \"show\"\r\n\t\t\t\t\t\t}, 200, \"easeOutCirc\");\r\n\t\t\t\t\t\t$.root_.addClass('shortcut-on');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t    }  \r\n\t\t\t   \r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tvar actionEvents = {\r\n\t\t\t\tuserLogout: function(e) {\r\n\t\t\t\t\tsmartActions.userLogout(element);\r\n\t\t\t\t},\r\n\t\t\t\tresetWidgets: function(e) {\r\n\t\t\t\t\tsmartActions.resetWidgets(element);\r\n\t\t\t\t},\r\n\t\t\t\tlaunchFullscreen: function(e) {\r\n\t\t\t\t\tsmartActions.launchFullscreen(document.documentElement);\r\n\t\t\t\t},\r\n\t\t\t\tminifyMenu: function(e) {\r\n\t\t\t\t\tsmartActions.minifyMenu(element);\r\n\t\t\t\t},\r\n\t\t\t\ttoggleMenu: function(e) {\r\n\t\t\t\t\tsmartActions.toggleMenu();\r\n\t\t\t\t},\r\n\t\t\t\ttoggleShortcut: function(e) {\r\n\t\t\t\t\tsmartActions.toggleShortcut();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (angular.isDefined(attrs.action) && attrs.action != '') {\r\n\t\t\t\tvar actionEvent = actionEvents[attrs.action];\r\n\t\t\t\tif (typeof actionEvent === 'function') {\r\n\t\t\t\t\telement.on('click', function(e) {\r\n\t\t\t\t\t\tactionEvent(e);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('header', function() {\r\n\treturn {\r\n\t\trestrict: 'EA',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\t// SHOW & HIDE MOBILE SEARCH FIELD\r\n\t\t\tangular.element('#search-mobile').click(function() {\r\n\t\t\t\t$.root_.addClass('search-mobile');\r\n\t\t\t});\r\n\r\n\t\t\tangular.element('#cancel-search-js').click(function() {\r\n\t\t\t\t$.root_.removeClass('search-mobile');\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.directive('ribbon', function() {\r\n\treturn {\r\n\t\trestrict: 'A',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\treturn;\r\n\t\t\telement.append('<div class=\"demo\"><span id=\"demo-setting\"><i class=\"fa fa-cog txt-color-blueDark\"></i></span> <form><legend class=\"no-padding margin-bottom-10\">Layout Options</legend><section><label><input name=\"subscription\" id=\"smart-fixed-header\" type=\"checkbox\" class=\"checkbox style-0\"><span>Fixed Header</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-navigation\" class=\"checkbox style-0\"><span>Fixed Navigation</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-ribbon\" class=\"checkbox style-0\"><span>Fixed Ribbon</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-footer\" class=\"checkbox style-0\"><span>Fixed Footer</span></label><label><input type=\"checkbox\" name=\"terms\" id=\"smart-fixed-container\" class=\"checkbox style-0\"><span>Inside <b>.container</b> <div class=\"font-xs text-right\">(non-responsive)</div></span></label><label style=\"display:block;\"><input type=\"checkbox\" id=\"smart-topmenu\" class=\"checkbox style-0\"><span>Menu on <b>top</b></span></label> <span id=\"smart-bgimages\"></span></section><section><h6 class=\"margin-top-10 semi-bold margin-bottom-5\">Clear Localstorage</h6><a href=\"javascript:void(0);\" class=\"btn btn-xs btn-block btn-primary\" id=\"reset-smart-widget\"><i class=\"fa fa-refresh\"></i> Factory Reset</a></section> <h6 class=\"margin-top-10 semi-bold margin-bottom-5\">SmartAdmin Skins</h6><section id=\"smart-styles\"><a href=\"javascript:void(0);\" id=\"smart-style-0\" data-skinlogo=\"img/logo.png\" class=\"btn btn-block btn-xs txt-color-white margin-right-5\" style=\"background-color:#4E463F;\"><i class=\"fa fa-check fa-fw\" id=\"skin-checked\"></i>Smart Default</a><a href=\"javascript:void(0);\" id=\"smart-style-1\" data-skinlogo=\"img/logo-white.png\" class=\"btn btn-block btn-xs txt-color-white\" style=\"background:#3A4558;\">Dark Elegance</a><a href=\"javascript:void(0);\" id=\"smart-style-2\" data-skinlogo=\"img/logo-blue.png\" class=\"btn btn-xs btn-block txt-color-darken margin-top-5\" style=\"background:#fff;\">Ultra Light</a><a href=\"javascript:void(0);\" id=\"smart-style-3\" data-skinlogo=\"img/logo-pale.png\" class=\"btn btn-xs btn-block txt-color-white margin-top-5\" style=\"background:#f78c40\">Google Skin</a></section></form> </div>')\r\n\r\n\t\t\t// hide bg options\r\n\t\t\tvar smartbgimage = \"<h6 class='margin-top-10 semi-bold'>Background</h6><img src='img/pattern/graphy-xs.png' data-htmlbg-url='img/pattern/graphy.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/tileable_wood_texture-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/tileable_wood_texture.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/sneaker_mesh_fabric-xs.png' width='22' height='22' data-htmlbg-url='img/pattern/sneaker_mesh_fabric.png' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/nistri-xs.png' data-htmlbg-url='img/pattern/nistri.png' width='22' height='22' class='margin-right-5 bordered cursor-pointer'><img src='img/pattern/paper-xs.png' data-htmlbg-url='img/pattern/paper.png' width='22' height='22' class='bordered cursor-pointer'>\";\r\n\t\t\t$(\"#smart-bgimages\")\r\n\t\t\t    .fadeOut();\r\n\r\n\t\t\t$('#demo-setting')\r\n\t\t\t    .click(function () {\r\n\t\t\t        $('#ribbon .demo')\r\n\t\t\t            .toggleClass('activate');\r\n\t\t\t    })\r\n\t\t\t/*\r\n\t\t\t * FIXED HEADER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\r\n\t\t\t            $.root_.removeClass(\"fixed-header\");\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED NAV\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * FIXED RIBBON\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-header')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', true);\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', true);\r\n\r\n\t\t\t            //apply\r\n\t\t\t            $.root_.addClass(\"fixed-header\");\r\n\t\t\t            $.root_.addClass(\"fixed-navigation\");\r\n\t\t\t            $.root_.addClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-footer')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"fixed-page-footer\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"fixed-page-footer\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\r\n\t\t\t/*\r\n\t\t\t * RTL SUPPORT\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-rtl')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"smart-rtl\");\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"smart-rtl\");\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * MENU ON TOP\r\n\t\t\t */\r\n\r\n\t\t\t$('#smart-topmenu')\r\n\t\t\t    .on('change', function (e) {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .prop('checked')) {\r\n\t\t\t            //window.location.href = '?menu=top';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'top');\r\n\t\t\t            location.reload();\r\n\t\t\t        } else {\r\n\t\t\t            //window.location.href = '?';\r\n\t\t\t            localStorage.setItem('sm-setmenu', 'left');\r\n\t\t\t            location.reload();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\tif (localStorage.getItem('sm-setmenu') == 'top') {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', true);\r\n\t\t\t} else {\r\n\t\t\t    $('#smart-topmenu')\r\n\t\t\t        .prop('checked', false);\r\n\t\t\t}\r\n\r\n\t\t\t/*\r\n\t\t\t * INSIDE CONTAINER\r\n\t\t\t */\r\n\t\t\t$('input[type=\"checkbox\"]#smart-fixed-container')\r\n\t\t\t    .click(function () {\r\n\t\t\t        if ($(this)\r\n\t\t\t            .is(':checked')) {\r\n\t\t\t            //checked\r\n\t\t\t            $.root_.addClass(\"container\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-ribbon')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-ribbon\");\r\n\r\n\t\t\t            $('input[type=\"checkbox\"]#smart-fixed-navigation')\r\n\t\t\t                .prop('checked', false);\r\n\t\t\t            $.root_.removeClass(\"fixed-navigation\");\r\n\r\n\t\t\t            if (smartbgimage) {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .append(smartbgimage)\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t                $(\"#smart-bgimages img\")\r\n\t\t\t                    .bind(\"click\", function () {\r\n\t\t\t                        var $this = $(this);\r\n\t\t\t                        var $html = $('html')\r\n\t\t\t                        bgurl = ($this.data(\"htmlbg-url\"));\r\n\t\t\t                        $html.css(\"background-image\", \"url(\" + bgurl + \")\");\r\n\t\t\t                    })\r\n\t\t\t                smartbgimage = null;\r\n\t\t\t            } else {\r\n\t\t\t                $(\"#smart-bgimages\")\r\n\t\t\t                    .fadeIn(1000);\r\n\t\t\t            }\r\n\r\n\t\t\t        } else {\r\n\t\t\t            //unchecked\r\n\t\t\t            $.root_.removeClass(\"container\");\r\n\t\t\t            $(\"#smart-bgimages\")\r\n\t\t\t                .fadeOut();\r\n\t\t\t        }\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * REFRESH WIDGET\r\n\t\t\t */\r\n\t\t\t$(\"#reset-smart-widget\")\r\n\t\t\t    .bind(\"click\", function () {\r\n\t\t\t        $('#refresh')\r\n\t\t\t            .click();\r\n\t\t\t        return false;\r\n\t\t\t    });\r\n\r\n\t\t\t/*\r\n\t\t\t * STYLES\r\n\t\t\t */\r\n\t\t\t$(\"#smart-styles > a\")\r\n\t\t\t   .on('click', function() {\r\n\t\t\t        var $this = $(this);\r\n\t\t\t        var $logo = $(\"#logo img\");\r\n\t\t\t        $.root_.removeClassPrefix('smart-style')\r\n\t\t\t            .addClass($this.attr(\"id\"));\r\n\t\t\t        $logo.attr('src', $this.data(\"skinlogo\"));\r\n\t\t\t        $(\"#smart-styles > a #skin-checked\")\r\n\t\t\t            .remove();\r\n\t\t\t        $this.prepend(\"<i class='fa fa-check fa-fw' id='skin-checked'></i>\");\r\n\t\t\t    });\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('breadcrumbController', ['$scope', function($scope) {\r\n\t$scope.breadcrumbs = [];\r\n\t$scope.$on('navItemSelected', function(name, crumbs) {\r\n\t\t$scope.setBreadcrumb(crumbs);\r\n\t});\r\n\r\n\t$scope.setBreadcrumb = function(crumbs) {\r\n\t\t$scope.breadcrumbs = crumbs;\r\n\t}\r\n}])\r\n\r\n.directive('breadcrumb', ['ribbon', 'localize', '$compile', function(ribbon, localize, $compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'breadcrumbController',\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.$watch('breadcrumbs', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal !== oldVal || !element.text()) {\r\n\t\t\t\t\t// update DOM\r\n\t\t\t\t\tscope.updateDOM();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tscope.updateDOM = function() {\r\n\t\t\t\telement.empty();\r\n\t\t\t\tangular.forEach(scope.breadcrumbs, function(crumb) {\r\n\t\t\t\t\tvar li = angular.element('<li data-localize=\"' + crumb + '\">' + crumb + '</li>');\r\n\t\t\t\t\tli.text(localize.localizeText(crumb));\r\n\t\t\t\t\t\r\n\t\t\t\t\t$compile(li)(scope);\r\n\t\t\t\t\telement.append(li);\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// set the current breadcrumb on load\r\n\t\t\tscope.setBreadcrumb(ribbon.currentBreadcrumb);\r\n\t\t\tscope.updateDOM();\r\n\t\t},\r\n\t\ttemplate: '<ol class=\"breadcrumb\"></ol>'\r\n\t}\r\n}])\r\n;\r\n\r\n// directives for localization\r\nangular.module('app.localize', [])\r\n.factory('localize', ['$http', '$rootScope', '$window', \"settings\", \"$RESOURCE\", function($http, $rootScope, $window, settings, $RESOURCE){\r\n\t// shared variables for `translate`\r\n\tvar encodeHTML = function(txt){\r\n\t\treturn txt.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t}\r\n\tvar tmplReg = /\\{\\{([^\\}]+)\\}\\}/g;\r\n\tvar interestAttrReg = /^param\\d+$/;\r\n\t// internal flag\r\n\tvar ready = false;\r\n\t// factory\r\n\tvar localize = {\r\n\t\tcurrentLocaleData: {},\r\n\t\tcurrentLang: {},\r\n\t\tsetLang: function(lang) {\r\n\t\t\tif(!lang){\r\n\t\t\t\tlang = settings.languages[0];\r\n\t\t\t}\r\n\t\t\t$RESOURCE.load(lang.key, function(data){\r\n\t\t\t\tlocalize.currentLocaleData = data.lang;\r\n\t\t\t\tlocalize.currentLang = lang;\r\n\t\t\t\tready = true;\r\n\t\t\t\t$rootScope.$broadcast('localizeLanguageChanged');\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetLangUrl: function(lang) {\r\n\t\t\treturn \"resources/pkg/\" + lang.langCode + \"/lang.js\";\r\n\t\t},\r\n\r\n\t\tlocalizeText: function(sourceText) {\r\n\t\t\treturn localize.currentLocaleData[sourceText];\r\n\t\t},\r\n\t\ttranslate: function(scope, element, attrs, transkey){\r\n\t\t\tvar onAttrChange = function(e){\r\n\t\t\t\tif(!ready) { return; }\r\n\t\t\t\tvar tmpl = localize.localizeText(attrs[transkey]);\r\n\t\t\t\t// \r\n\t\t\t\tif(!tmpl) {\r\n\t\t\t\t\t// debug\r\n\t\t\t\t\t// return console.error(\"invalid \" + transkey + \"=\\\"\" + attrs[transkey] + \"\\\"\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar myhtml = tmplReg.test(tmpl) ? tmpl.replace(tmplReg, function(match, index){\r\n\t\t\t\t\tvar myattr = \"param\" + index;\r\n\t\t\t\t\tvar value = attrs[myattr];\r\n\t\t\t\t\treturn encodeHTML(value);\r\n\t\t\t\t}) : tmpl;\r\n\t\t\t\tswitch(transkey) {\r\n\t\t\t\t\tcase \"localize\":\r\n\t\t\t\t\t\tif(element.is(\"input, textarea\")){\r\n\t\t\t\t\t\t\telement.attr(\"placeholder\", myhtml);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telement.html(myhtml);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"localizeHref\":\r\n\t\t\t\t\t\telement.attr(\"href\", myhtml); break;\r\n\t\t\t\t\tcase \"localizeTitle\":\r\n\t\t\t\t\t\telement.attr(\"title\", myhtml); break;\r\n\t\t\t\t\tcase \"localizePlaceholder\":\r\n\t\t\t\t\t\telement.attr(\"placeholder\", myhtml); break;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tangular.forEach(attrs, function(v, k){\r\n\t\t\t\tif(interestAttrReg.test(k)) {\r\n\t\t\t\t\tattrs.$observe(k, onAttrChange);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(ready) {\r\n\t\t\t\tonAttrChange();\r\n\t\t\t}\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", onAttrChange);\r\n\t\t},\r\n\t\tisReady: function(){\r\n\t\t\treturn ready;\r\n\t\t}\r\n\t};\r\n\r\n\treturn localize;\r\n}])\r\n.directive('localize', ['localize', function(localize) {\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localize\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeTitle\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeTitle\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizePlaceholder\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizePlaceholder\");\r\n\t\t}\r\n\t};\r\n}])\r\n.directive(\"localizeHref\", [\"localize\", function(localize){\r\n\treturn {\r\n\t\trestrict: \"A\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tlocalize.translate(scope, element, attrs, \"localizeHref\");\r\n\t\t}\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for navigation\r\nangular.module('app.navigation', [])\r\n.directive('navigation', [\"$timeout\",  function($timeout) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: ['$scope', function($scope) {\r\n\t\t\t//$scope.version = $$$version;\r\n\t\t}],\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\tvar timer = null;\r\n\t\t\tlet timer_handle = function(){\r\n\t\t\t\tif (!topmenu) {\r\n\t\t\t\t\tif (!null) {\r\n\t\t\t\t\t\telement.first().jarvismenu({\r\n\t\t\t\t\t\t\taccordion : true,\r\n\t\t\t\t\t\t\tspeed : $.menu_speed,\r\n\t\t\t\t\t\t\tclosedSign : '<em class=\"fa icon-jj-xiala\"></em>',\r\n\t\t\t\t\t\t\topenedSign : '<em class=\"fa icon-jj-sou\"></em>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t//alert(\"Error - menu anchor does not exist\");\r\n\t\t\t\t\t\t$.bigBox({\r\n\t\t\t\t\t\t\ttitle : \"Error\",\r\n\t\t\t\t\t\t\tcontent : \"menu anchor does not exist\",\r\n\t\t\t\t\t\t\tcolor : \"#C46A69\",\r\n\t\t\t\t\t\t\ticon : \"fa fa-warning shake animated\",\r\n\t\t\t\t\t\t\tnumber : \"1\",\r\n\t\t\t\t\t\t\ttimeout : 6000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// SLIMSCROLL FOR NAV\r\n\t\t\t\tif ($.fn.slimScroll) {\r\n\t\t\t\t\telement.slimScroll({\r\n\t\t\t\t        height: '100%'\r\n\t\t\t\t    });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.getElement = function() {\r\n\t\t\t\t\treturn element;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tscope.$on(\"updateNavData\", function(name, navs){\r\n\t\t\t\tscope.navs = navs;\r\n\t\t\t});\r\n\t\t\tscope.$on(\"renderNavItem\", function(name){\r\n\t\t\t\t$timeout.cancel(timer);\r\n\t\t\t\ttimer = $timeout(timer_handle, 100);\r\n\t\t\t});\r\n\t\t},\r\n\t\ttemplate: \"<nav><ul data-ng-transclude></ul></nav>\"\r\n\t};\r\n}])\r\n\r\n\r\n.controller('NavItemController', ['$rootScope', '$scope', '$location', function($rootScope, $scope, $location) {\r\n\t$scope.isChild = false;\r\n\t$scope.active = false;\r\n\t$scope.isActive = function (viewLocation) {\r\n        $scope.active = viewLocation === $location.path();\r\n        return $scope.active;\r\n    };\r\n    $scope.hasIcon = angular.isDefined($scope.icon);\r\n    $scope.hasIconCaption = angular.isDefined($scope.iconCaption);\r\n\r\n    $scope.getItemUrl = function(view) {\r\n    \tif (angular.isDefined($scope.href)) return $scope.href;\r\n    \tif (!angular.isDefined(view)) return '';\r\n    \treturn '#' + view;\r\n    };\r\n\r\n    $scope.getItemTarget = function() {\r\n    \treturn angular.isDefined($scope.target) ? $scope.target : '_self';\r\n    };\r\n\t$scope.$emit(\"renderNavItem\");\r\n\r\n}])\r\n.directive('navItem', ['ribbon', \"$rootScope\", function(ribbon, $root) {\r\n\treturn {\r\n\t\trequire: ['^navigation'],\r\n\t\trestrict: 'AE',\r\n\t\tcontroller: 'NavItemController',\r\n\t\tscope: {\r\n\t\t\ttitle: '@navTitle',\r\n\t\t\tview: '@',\r\n\t\t\ticon: '@',\r\n\t\t\ticonCaption: '@',\r\n\t\t\thref: '@',\r\n\t\t\ttarget: '@'\r\n\t\t},\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar navCtrl = parentCtrls[0],\r\n\t\t\t\tnavgroupCtrl = parentCtrls[1];\r\n\t\t\tif(attrs.view){\r\n\t\t\t\telement.find(\"ul\").remove();\r\n\t\t\t}\r\n\t\t\tscope.$watch('active', function(newVal, oldVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(true);\r\n\t\t\t\t\t$root.$broadcast(\"updateDocumentTitle\", scope.title);\r\n\t\t\t\t\tscope.setBreadcrumb();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnavgroupCtrl && navgroupCtrl.setActive(false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tscope.openParents = scope.isActive(scope.view);\r\n\t\t\tscope.isChild = angular.isDefined(navgroupCtrl);\r\n\t\t\t\r\n\t\t\tscope.setBreadcrumb = function() {\r\n    \t\t\tvar crumbs = [];\r\n    \t\t\tcrumbs.push(scope.title);\r\n    \t\t\t// get parent menus\r\n\t\t\t\tvar test = element.parents('nav li').each(function() {\r\n\t\t\t\t\tvar el = angular.element(this);\r\n\t\t\t\t\tvar parent = el.find('.menu-item-parent:eq(0)');\r\n\t\t\t\t\tcrumbs.push(parent.data('localize').trim());\r\n\t\t\t\t\tif (scope.openParents) {\r\n\t\t\t\t\t\t// open menu on first load\r\n\t\t\t\t\t\tparent.trigger('click');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// this should be only fired upon first load so let's set this to false now\r\n\t\t\t\tscope.openParents = false;\r\n\t\t\t\tribbon.updateBreadcrumb(crumbs);\r\n    \t\t};\r\n\r\n    \t\telement.on('click', 'a[href!=\"#\"]', function() {\r\n    \t\t\tif ($.root_.hasClass('mobile-view-activated')) {\r\n    \t\t\t\t$.root_.removeClass('hidden-menu');\r\n    \t\t\t\t$('html').removeClass(\"hidden-menu-mobile-lock\");\r\n    \t\t\t}\r\n    \t\t});\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: `\r\n\t\t\t<li data-ng-class=\"{active: isActive(view)}\">\r\n\t\t\t\t<a href=\"{{ getItemUrl(view) }}\" target=\"{{ getItemTarget() }}\">\r\n\t\t\t\t\t<i data-ng-if=\"hasIcon\" class=\"{{ icon }}\"><em data-ng-if=\"hasIconCaption\"> {{ iconCaption }} </em></i>\r\n\t\t\t\t\t<span ng-class=\"{'menu-item-parent': !isChild}\" data-localize=\"{{ title }}\"></span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<ul data-ng-transclude=\"\"></ul>\r\n\t\t\t</li>`\r\n\t};\r\n}])\r\n;\r\n\r\n// directives for activity\r\nangular.module('app.activity', [])\r\n.controller('ActivityController', ['$scope', '$http' , function($scope, $http) {\r\n\tvar ctrl = this,\r\n\t\titems = ctrl.items = $scope.items = [];\r\n\r\n\tctrl.loadItem = function(loadedItem, callback) {\r\n\t\tangular.forEach(items, function(item) {\r\n\t      \tif (item.active && item !== loadedItem) {\r\n\t        \titem.active = false;\r\n\t        \t//item.onDeselect();\r\n\t      \t}\r\n\t    });\r\n\r\n\t\tloadedItem.active = true;\r\n\t\tif (angular.isDefined(loadedItem.onLoad)) {\r\n\t\t\tloadedItem.onLoad(loadedItem);\r\n\t\t}\r\n\r\n\t\t$http.get(loadedItem.src).then(function(result) {\r\n\t\t\tvar content = result.data;\r\n\t\t\tif (angular.isDefined(callback)) {\r\n\t\t\t\tcallback(content);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tctrl.addItem = function(item) {\r\n\t\titems.push(item);\r\n\t\tif (!angular.isDefined(item.active)) {\r\n\t\t\t// set the default\r\n\t\t\titem.active = false;\r\n\t\t} else if (item.active) {\r\n\t\t\tctrl.loadItem(item);\r\n\t\t}\r\n\t};\r\n\r\n\tctrl.refresh = function(e) {\r\n\t\tvar btn = angular.element(e.currentTarget);\r\n\t\tbtn.button('loading');\r\n\r\n\t\tif (angular.isDefined($scope.onRefresh)) {\r\n\t\t\t$scope.onRefresh($scope, function() {\r\n\t\t\t\tbtn.button('reset');\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tbtn.button('reset');\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activity', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: 'ActivityController',\r\n\t\tscope: {\r\n\t\t\tonRefresh: '=onrefresh',\r\n\t\t},\r\n\t\ttemplate: '<span data-ng-transclude=\"\"></span>'\r\n\t};\r\n})\r\n\r\n.directive('activityButton', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\ttransclude: true,\r\n\t\tcontroller: function($scope) {\r\n\r\n\t\t},\r\n\t\tscope: {\r\n\t\t\ticon: '@',\r\n\t\t\ttotal: '='\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t\t<span id=\"activity\" class=\"activity-dropdown\">\\\r\n\t\t\t\t\t<i ng-class=\"icon\"></i>\\\r\n\t\t\t\t\t<b class=\"badge\"> {{ total }} </b>\\\r\n\t\t\t\t</span>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\r\n\t\t\tattrs.$observe('icon', function(value) {\r\n\t\t\t\tif (!angular.isDefined(value))\r\n\t\t\t\t\tscope.icon = 'fa fa-user';\r\n\t\t\t});\r\n\r\n\t\t\telement.on('click', function(e) {\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\tif ($this.find('.badge').hasClass('bg-color-red')) {\r\n\t\t\t\t\t$this.find('.badge').removeClassPrefix('bg-color-');\r\n\t\t\t\t\t$this.find('.badge').text(\"0\");\r\n\t\t\t\t\t// console.log(\"Ajax call for activity\")\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!$this.next('.ajax-dropdown').is(':visible')) {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeIn(150);\r\n\t\t\t\t\t$this.addClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.next('.ajax-dropdown').fadeOut(150);\r\n\t\t\t\t\t$this.removeClass('active');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar mytest = $this.next('.ajax-dropdown').find('.btn-group > .active > input').attr('id');\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\r\n\t\t\tif (scope.total > 0) {\r\n\t\t\t\tvar $badge = element.find('.badge');\r\n\t\t\t\t$badge.addClass(\"bg-color-red bounceIn animated\");\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})\r\n\r\n.controller('ActivityContentController', ['$scope' , function($scope) {\r\n\tvar ctrl = this;\r\n\t$scope.currentContent = '';\r\n\tctrl.loadContent = function(content) {\r\n\t\t$scope.currentContent = content;\r\n\t}\r\n}])\r\n\r\n.directive('activityContent', ['$compile', function($compile) {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\trequire: '^activity',\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tfooter: '=?'\r\n\t\t},\r\n\t\tcontroller: 'ActivityContentController',\r\n\t\ttemplate: '\\\r\n\t\t\t<div class=\"ajax-dropdown\">\\\r\n\t\t\t\t<div class=\"btn-group btn-group-justified\" data-toggle=\"buttons\" data-ng-transclude=\"\"></div>\\\r\n\t\t\t\t<div class=\"ajax-notifications custom-scroll\">\\\r\n\t\t\t\t\t<div class=\"alert alert-transparent\">\\\r\n\t\t\t\t\t\t<h4>Click a button to show messages here</h4>\\\r\n\t\t\t\t\t\tThis blank page message helps protect your privacy, or you can show the first message here automatically.\\\r\n\t\t\t\t\t</div>\\\r\n\t\t\t\t\t<i class=\"fa fa-lock fa-4x fa-border\"></i>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<span> {{ footer }}\\\r\n\t\t\t\t\t<button type=\"button\" data-loading-text=\"Loading...\" data-ng-click=\"refresh($event)\" class=\"btn btn-xs btn-default pull-right\" data-activty-refresh-button=\"\">\\\r\n\t\t\t\t\t<i class=\"fa fa-refresh\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</div>',\r\n\t\tlink: function(scope, element, attrs, activityCtrl) {\r\n\t\t\tscope.refresh = function(e) {\r\n\t\t\t\tactivityCtrl.refresh(e);\r\n\t\t\t};\r\n\r\n\t\t\tscope.$watch('currentContent', function(newContent, oldContent) {\r\n\t\t\t\tif (newContent !== oldContent) {\r\n\t\t\t\t\tvar el = element.find('.ajax-notifications').html(newContent);\r\n\t\t\t\t\t$compile(el)(scope);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n\r\n.directive('activityItem', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\trequire: ['^activity', '^activityContent'],\r\n\t\tscope: {\r\n\t\t\tsrc: '=',\r\n\t\t\tonLoad: '=onload',\r\n\t\t\tactive: '=?'\r\n\t\t},\r\n\t\tcontroller: function() {\r\n\r\n\t\t},\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '\\\r\n\t\t\t<label class=\"btn btn-default\" data-ng-click=\"loadItem()\" ng-class=\"{active: active}\">\\\r\n\t\t\t\t<input type=\"radio\" name=\"activity\">\\\r\n\t\t\t\t<span data-ng-transclude=\"\"></span>\\\r\n\t\t\t</label>',\r\n\t\tlink: function(scope, element, attrs, parentCtrls) {\r\n\t\t\tvar activityCtrl = parentCtrls[0],\r\n\t\t\t\tcontentCtrl = parentCtrls[1];\r\n\r\n\t\t\tscope.$watch('active', function(active) {\r\n\t\t\t\tif (active) {\r\n\t\t\t\t\tactivityCtrl.loadItem(scope, function(content) {\r\n\t\t\t\t\t\tcontentCtrl.loadContent(content);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tactivityCtrl.addItem(scope);\r\n\r\n\t\t\tscope.loadItem = function() {\r\n\t\t\t\tscope.active = true;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n})\r\n;\r\n\r\nangular.module('app.smartui', [])\r\n.directive('widgetGrid', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\tlink: function(scope, element, attrs) {\r\n\t\t\tscope.setup_widget_desktop = function() {\r\n\t\t\t\tif ($.fn.jarvisWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\telement.jarvisWidgets({\r\n\t\t\t\t\t\tgrid : 'article',\r\n\t\t\t\t\t\twidgets : '.jarviswidget',\r\n\t\t\t\t\t\tlocalStorage : true,\r\n\t\t\t\t\t\tdeleteSettingsKey : '#deletesettingskey-options',\r\n\t\t\t\t\t\tsettingsKeyLabel : 'Reset settings?',\r\n\t\t\t\t\t\tdeletePositionKey : '#deletepositionkey-options',\r\n\t\t\t\t\t\tpositionKeyLabel : 'Reset position?',\r\n\t\t\t\t\t\tsortable : true,\r\n\t\t\t\t\t\tbuttonsHidden : false,\r\n\t\t\t\t\t\t// toggle button\r\n\t\t\t\t\t\ttoggleButton : true,\r\n\t\t\t\t\t\ttoggleClass : 'fa fa-minus | fa fa-plus',\r\n\t\t\t\t\t\ttoggleSpeed : 200,\r\n\t\t\t\t\t\tonToggle : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// delete btn\r\n\t\t\t\t\t\tdeleteButton : true,\r\n\t\t\t\t\t\tdeleteClass : 'fa fa-times',\r\n\t\t\t\t\t\tdeleteSpeed : 200,\r\n\t\t\t\t\t\tonDelete : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// edit btn\r\n\t\t\t\t\t\teditButton : true,\r\n\t\t\t\t\t\teditPlaceholder : '.jarviswidget-editbox',\r\n\t\t\t\t\t\teditClass : 'fa fa-cog | fa fa-save',\r\n\t\t\t\t\t\teditSpeed : 200,\r\n\t\t\t\t\t\tonEdit : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// color button\r\n\t\t\t\t\t\tcolorButton : true,\r\n\t\t\t\t\t\t// full screen\r\n\t\t\t\t\t\tfullscreenButton : true,\r\n\t\t\t\t\t\tfullscreenClass : 'fa fa-expand | fa fa-compress',\r\n\t\t\t\t\t\tfullscreenDiff : 3,\r\n\t\t\t\t\t\tonFullscreen : function() {\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// custom btn\r\n\t\t\t\t\t\tcustomButton : false,\r\n\t\t\t\t\t\tcustomClass : 'folder-10 | next-10',\r\n\t\t\t\t\t\tcustomStart : function() {\r\n\t\t\t\t\t\t\talert('Hello you, this is a custom button...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcustomEnd : function() {\r\n\t\t\t\t\t\t\talert('bye, till next time...');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// order\r\n\t\t\t\t\t\tbuttonOrder : '%refresh% %custom% %edit% %toggle% %fullscreen% %delete%',\r\n\t\t\t\t\t\topacity : 1.0,\r\n\t\t\t\t\t\tdragHandle : '> header',\r\n\t\t\t\t\t\tplaceholderClass : 'jarviswidget-placeholder',\r\n\t\t\t\t\t\tindicator : true,\r\n\t\t\t\t\t\tindicatorTime : 600,\r\n\t\t\t\t\t\tajax : true,\r\n\t\t\t\t\t\ttimestampPlaceholder : '.jarviswidget-timestamp',\r\n\t\t\t\t\t\ttimestampFormat : 'Last update: %m%/%d%/%y% %h%:%i%:%s%',\r\n\t\t\t\t\t\trefreshButton : true,\r\n\t\t\t\t\t\trefreshButtonClass : 'fa fa-refresh',\r\n\t\t\t\t\t\tlabelError : 'Sorry but there was a error:',\r\n\t\t\t\t\t\tlabelUpdated : 'Last Update:',\r\n\t\t\t\t\t\tlabelRefresh : 'Refresh',\r\n\t\t\t\t\t\tlabelDelete : 'Delete widget:',\r\n\t\t\t\t\t\tafterLoad : function() { },\r\n\t\t\t\t\t\trtl : false, // best not to toggle this!\r\n\t\t\t\t\t\tonChange : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonSave : function() {\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajaxnav : $.navAsAjax // declears how the localstorage should be saved (HTML or AJAX page)\r\n\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tscope.setup_widget_mobile = function() {\r\n\t\t\t\tif ($.enableMobileWidgets && $.enableJarvisWidgets) {\r\n\t\t\t\t\tscope.setup_widgets_desktop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($.device === \"desktop\") {\r\n\t\t\t\tscope.setup_widget_desktop();\r\n\t\t\t} else {\r\n\t\t\t\tscope.setup_widget_mobile();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n})\r\n\r\n.directive('widget', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetHeader', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\ttitle: '@',\r\n\t\t\ticon: '@'\r\n\t\t},\r\n\t\ttemplate: '\\\r\n\t\t\t<header>\\\r\n\t\t\t\t<span class=\"widget-icon\"> <i data-ng-class=\"icon\"></i> </span>\\\r\n\t\t\t\t<h2>{{ title }}</h2>\\\r\n\t\t\t\t<span data-ng-transclude></span>\\\r\n\t\t\t</header>'\r\n\t}\r\n})\r\n\r\n.directive('widgetToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetEditbox', function() {\r\n\treturn {\r\n\t\trestrict: 'AE', \r\n\t\ttransclude: true, \r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"jarviswidget-editbox\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBody', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetBodyToolbar', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\tscope: {\r\n\t\t\tclass: '@'\r\n\t\t},\r\n\t\ttemplate: '<div class=\"widget-body-toolbar\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive('widgetContent', function() {\r\n\treturn {\r\n\t\trestrict: 'AE',\r\n\t\ttransclude: true,\r\n\t\treplace: true,\r\n\t\ttemplate: '<div class=\"widget-body\" data-ng-transclude=\"\"></div>'\r\n\t}\r\n})\r\n\r\n.directive(\"base64\", [\"$$$IMAGES\", function($$$IMAGES){\r\n\treturn {\r\n\t\trestrict: \"AE\",\r\n\t\tlink: function(scope, element, attrs){\r\n\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\tscope.$on(\"localizeLanguageChanged\", function(){\r\n\t\t\t\telement.attr(\"src\", $$$IMAGES.get(attrs.key));\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('textareaEmail', [function(){\r\n\treturn {\r\n\t\trequire: 'ngModel',\r\n\t\trestrict: 'A',\r\n\t\tlink: function($scope, iElm, iAttrs, controller) {\r\n\t\t\tvar modelCtrl = controller;\r\n\t\t\tfunction validate(val){\r\n\t\t\t\tvar vals = Array.isArray(val) ? val : [val];\r\n\t\t\t\tvar reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\\.[a-zA-Z0-9_-]{2,3}){1,2})$/;\r\n\t\t\t\tvar isvalide = vals.every(function(v){ return reg.test(v)});\r\n\t\t\t\treturn isvalide;\r\n\t\t\t}\r\n\t\t\tfunction parser(value){\r\n\t\t\t\tif(value){\r\n\t\t\t\t\treturn value.split('\\n').reduce(function(arr,b){\r\n\t\t\t\t\t\tif(b.trim().length){\r\n\t\t\t\t\t\t\tarr.push(b);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t},[]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction formatter(value){\r\n\t\t\t\treturn validate(value) ? value.join(\"\\n\") : undefined;\r\n\t\t\t}\r\n\t\t\tfunction viewChangeListener(){\r\n\t\t\t\tmodelCtrl.$setValidity('email',validate(modelCtrl.$modelValue));\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$isEmpty = function(val){\r\n\t\t\t\tif(Array.isArray(val) && val.length === 0){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tif(!val){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tmodelCtrl.$parsers.push(parser);\r\n\t\t\tmodelCtrl.$formatters.push(formatter);\r\n\t\t\tmodelCtrl.$viewChangeListeners.push(viewChangeListener);\r\n\t\t}\r\n\t};\r\n}])\r\n.directive('schedulerInput',['$rootScope',function($rootScope){\r\n\treturn {\r\n\t    require: \"ngModel\",\r\n\t    link: function(scope,element,attrs,ngModel){\r\n\t    \t$rootScope.$broadcast('matchInput', true);\r\n\t        element.bind('keyup',function(value){\r\n\t            // var isValid = this.value.match(/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/);\r\n\t            var isValid = this.value.match(/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/);\r\n\t            $rootScope.$broadcast('matchInput', isValid);\r\n\t        });\r\n\t    }\r\n\t}\r\n}])\r\n.service(\"formDate\",[function(){\r\n\tthis.format = function(date, fmt){\r\n\t\tvar o = {\r\n\t\t  \"M+\" : date.getMonth()+1,                 //   \r\n\t\t  \"d+\" : date.getDate(),                    //   \r\n\t\t  \"h+\" : date.getHours(),                   //   \r\n\t\t  \"m+\" : date.getMinutes(),                 //   \r\n\t\t  \"s+\" : date.getSeconds(),                 //   \r\n\t\t  \"q+\" : Math.floor((date.getMonth()+3)/3), //   \r\n\t\t  \"S\"  : date.getMilliseconds()             //   \r\n\t\t};   \r\n\t\tif(/(y+)/.test(fmt))   \r\n\t\t  fmt=fmt.replace(RegExp.$1, (date.getFullYear()+\"\").substr(4 - RegExp.$1.length));   \r\n\t\tfor(var k in o)   \r\n\t\t  if(new RegExp(\"(\"+ k +\")\").test(fmt))   \r\n\t\tfmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((\"00\"+ o[k]).substr((\"\"+ o[k]).length)));   \r\n\t\treturn fmt;\r\n\t}\r\n}])\r\n.service(\"customModal\",[\"$modal\",\"$rootScope\",function($modal,$root){\r\n\tthis.openModal=function(obj){\r\n\t\t/**\r\n\t\t * [init ]\r\n\t\t */\r\n\t\tvar init={\r\n\t\t\ttitle: obj.title, \t\t\t\t\t\t\t\t\t\t// \r\n\t\t\tdelTips: obj.delTips,\t\t\t\t\t\t\t\t\t// \r\n\t\t\tkey: obj.key?obj.key:'',\t\t\t\t\t\t\t\t// \r\n\t\t\tdelete_rows: obj.delete_rows?obj.delete_rows:[],\t\t// \r\n\t\t\tdelParm: obj.delParm?obj.delParm:'',\t\t\t\t\t// key\r\n\t\t\tnodelete_rows: obj.nodelete_rows?obj.nodelete_rows:[],   // \r\n\t\t\tnodelTips: obj.nodelTips?obj.nodelTips:\"\"\t\t\t\t// \r\n\t\t}\r\n\r\n\t\t$modal.open({\r\n\t\t\ttemplate: [\r\n\t\t\t\t\t\t\"<section id='widget-grid' ><div class='modal-content'>\",\r\n\t\t\t\t\t\t\"<div class='modal-header'><a type='button' class='close' data-ng-click='close()'>\",\r\n\t\t\t\t\t\t\"<span aria-hidden='true'></span><span class='sr-only'>\",\r\n\t\t\t\t\t\t\"Close</span></a><h4 class='modal-title' id='mySmallModalLabel' data-localize=\"+init.title+\"></h4></div><div class='modal-body'>\",\r\n\t\t\t\t\t\t\"<form class='form-horizontal'>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-localize='\"+init.delTips+\"' param1='{{deleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<p style='margin-bottom:20px;' data-ng-if='\"+init.nodelete_rows.length+\"' data-localize='\"+init.nodelTips+\"' param1='{{nodeleteName}}'></p>\",\r\n\t\t\t\t\t\t\"<footer class='text-right'><a class='btn btn-primary' data-ng-click='ok()'  data-localize=''>\",\r\n\t\t\t\t\t\t\"</a><a class='btn btn-default' data-ng-click='close()' style='margin-left:5px;' data-localize=''>\",\r\n\t\t\t\t\t\t\"</a></footer></form></div></div></section>\"].join(''),\r\n\t\t\tcontroller : function($scope, $modalInstance){\r\n\t\t\t\t$scope.deleteName = init.delete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.nodeleteName = init.nodelete_rows.map(function(row){ return row[init.delParm] }).join(', ');\r\n\t\t\t\t$scope.ok = function(){\r\n\t\t\t\t\t$root.$broadcast(\"DELETE\", init.key===''?init.delete_rows:{key: init.key, data: init.delete_rows});\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t};\r\n\t\t\t\t$scope.close = function(){\r\n\t\t\t\t\t$modalInstance.close();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsize : \"sm\"\r\n\t\t});\r\n\t}\r\n}])\r\n.directive(\"treeSelectNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', selecteduser: '='},\r\n        template: `<dd class=\"group\" ng-repeat=\"item in users\">\r\n\t\t\t\t\t<dl class=\"group\">\r\n\t\t\t\t\t\t<dt class=\"group-title\">{{item.dept_name}}</dt>\r\n\t\t\t\t\t\t<tree-select-node ng-repeat=\"node in item.children\" data-selecteduser=\"selecteduser\" data-node=\"node\"></tree-select-node>\r\n\t\t\t\t\t</dl>\r\n\t\t\t\t  </dd>`,\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeSelectNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', selecteduser: '='},\r\n        template: '<dd></dd>',\r\n        controller: function($scope){\r\n        \t$scope.selectUser = function(user){\r\n        \t\t$scope.$emit('selectCommonUser', user);\r\n        \t}\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n            \telement.append('<dl class=\"group\">'+\r\n\t\t\t\t\t\t\t\t\t'<dt class=\"group-title\">{{node.dept_name}}</dt>'+\r\n\t\t\t\t\t\t\t\t\t'<tree-select-node ng-repeat=\"sub in node.children\" data-selecteduser=\"selecteduser\" data-nodes=\"node.children\" data-node=\"sub\"></tree-select-node>'+\r\n\t\t\t\t\t\t\t\t'</dl>')\r\n            }else{\r\n            \telement.append('<dd class=\"group-item\" titile=\"{{selecteduser}}\" url=\"{{ node }}\" ng-class=\"{active:selecteduser.user_id === node.user_id}\" ng-click=\"selectUser(node)\">{{node.name}}({{node.real_name}})</dd>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\n\n\n// WEBPACK FOOTER //\n// ./js/ng/ng.directives.js","angular.module(\"vdi\", [])\r\n\r\n.factory(\"Task\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/home/tasklog\", null, {\r\n        query: { method: \"GET\", isArray: false },\r\n        post: { method: \"POST\" },\r\n        put: { method: \"PUT\" }\r\n    });\r\n}])\r\n\r\n\r\n.factory(\"VNC\", [\"$resource\", \"$Domain\", function($resource, $Domain) {\r\n    return $resource($Domain + \"/thor/instance/vnc/:id\", { id: \"@id\" }, {\r\n        loadISO:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/loadISO\" },\r\n        save:\r\n            { method: \"POST\", url: $Domain + \"/thor/image/update_template\" }\r\n    });\r\n}])\r\n\r\n.factory(\"loginResource\", [\"$resource\", \"$Domain\", function($resource, $Domain){\r\n    return $resource($Domain + \"/thor/version\", null, {\r\n        query: { method: \"GET\"}\r\n    })\r\n}])\r\n\r\n\r\n.filter('lun_name', function () {\r\n    return function (lun) {\r\n        if (!angular.isUndefined(lun)) {\r\n            lun.map(function (item) {\r\n                item.value = item.vendor + \" lun-\" + item.lun + \" \" + item.size;\r\n            });\r\n        }\r\n        return lun;\r\n    };\r\n})\r\n.filter('storage_type', function () {\r\n    var type2str = {\r\n        local: \"\",\r\n        iscsi: 'iscsi ',\r\n        netfs: '',\r\n        fc: 'FC '\r\n    };\r\n    return function (type) {\r\n        return type2str[type]\r\n    }\r\n})\r\n.filter('storage_status', function () {\r\n    var stauts2str = {\r\n        running: \"\",\r\n        building:\"\",\r\n        error:''\r\n    };\r\n    return function (stauts) {\r\n        return stauts2str[stauts]\r\n    }\r\n})\r\n.filter('unsafe', function($sce) {\r\n    return function(val) {\r\n        return $sce.trustAsHtml(val+\"\");\r\n    };\r\n})\r\n.filter('join', function() {\r\n    return function(val,slash) {\r\n      return val.filter(function(d){\r\n        return d;\r\n      }).join(slash)\r\n    };\r\n})\r\n.filter('network_type', function () {\r\n    var type2str = {\r\n      nat:'NAT',\r\n      bridge:'',\r\n      vlan:'VLAN'\r\n    };\r\n    return function (val) {\r\n      return type2str[val];\r\n    };\r\n})\r\n.filter('yesorno', function () {\r\n    return function (val) {\r\n      return val ? '' : '';\r\n    };\r\n})\r\n.filter('to_mb', function () {\r\n    return function (val) {\r\n      return (val/1024/1024).toFixed(2);\r\n    };\r\n})\r\n.filter('reverse', function() {\r\n  return function(input,searchText,searchName) {\r\n    if(input && searchText){\r\n        var outPut = [];\r\n        outPut = input.filter(function(item){\r\n            if(item[searchName].indexOf(searchText)>-1)\r\n                return item;\r\n        })\r\n        return outPut;\r\n    }\r\n    return input;\r\n  };\r\n})\r\n.config([\"$filterProvider\", function($filterProvider){\r\n\t$filterProvider.register(\"paging\", function(){\r\n\t\treturn function(items, index, pageSize){\r\n\t\t\tif(!angular.isArray(items)){\r\n                return items;\r\n            }\r\n            if(pageSize > 0 && index > 0){\r\n    \t\t\tvar total = items.length;\r\n    \t\t\tvar totalPage = Math.ceil(total / pageSize);\r\n    \t\t\tindex = Math.min(totalPage, Math.max(1, index));\r\n    \t\t\treturn items.slice((index - 1) * pageSize, index * pageSize);\r\n            }\r\n            return items;\r\n\t\t};\r\n\t});\r\n}])\r\n\r\n.directive(\"dialog\", [\"$modal\", \"$rootScope\", \"$$$I18N\", function ($modal, $rootScope, $$$I18N) {\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            element.click(function () {\r\n                if(attrs.disabled){\r\n                    $.bigBox({\r\n                        title:$$$I18N.get(\"INFOR_TIP\"),\r\n                        content:attrs.error\r\n                    });\r\n                }else{\r\n                    var dialog = $modal.open({\r\n                        templateUrl: \"views/vdi/dialog/\" + attrs.dialogUrl,\r\n                        controller: attrs.dialog,\r\n                        scope: $scope,\r\n                        size: attrs.dialogSize\r\n                    });\r\n                    $scope.close = dialog.dismiss.bind(dialog);\r\n                    window.___dialog = dialog;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"widgetGrid\", [\"$filter\", \"$modal\", function($filter, $modal){\r\n    function getPosition(e, ele) {\r\n        var st = Math.max(\r\n            document.documentElement.scrollTop,\r\n            document.body.scrollTop\r\n        );\r\n        var sl = Math.max(\r\n            document.documentElement.scrollLeft,\r\n            document.body.scrollLeft\r\n        );\r\n        var cw = document.documentElement.clientWidth;\r\n        var ch = document.documentElement.clientHeight;\r\n        var sw = Math.max(\r\n            document.documentElement.scrollWidth,\r\n            document.body.scrollWidth\r\n        );\r\n        var sh = Math.max(\r\n            document.documentElement.scrollHeight,\r\n            document.body.scrollHeight\r\n        );\r\n        var ow = ele.offsetWidth;\r\n        var oh = ele.offsetHeight;\r\n        return {\r\n            x: Math.max(0, e.pageX + ow > sl + cw ? sl + cw - ow : e.pageX),\r\n            y: Math.max(0, e.pageY + oh > st + ch ? st + ch - oh : e.pageY)\r\n        }\r\n    }\r\n    return {\r\n        restrict: \"A\",\r\n        controller: function($scope){\r\n            this.getCurrentPage = function(){\r\n                return Number($scope.currentPage) > 0 ? $scope.currentPage : 0;\r\n            };\r\n            this.getCurrentRows = function(){\r\n                return $scope.getCurrentRows();\r\n            }\r\n            this.getPageSize = function(){\r\n                return Number($scope.pagesize) > 0 ? Number($scope.pagesize) : 0;\r\n            };\r\n        },\r\n        link: function ($scope, element, attrs) {\r\n            var context_wrapper = element.find(\".context_wrapper\");\r\n            context_wrapper.on(\"mousedown\", function (e) {\r\n                if (e.target === this) {\r\n                    context_wrapper.hide();\r\n                    element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n                }\r\n            }).on(\"click\", function () {\r\n                context_wrapper.hide();\r\n                element.find(\".contextmenu_selected\").removeClass(\"contextmenu_selected\");\r\n            });\r\n            context_wrapper.hide();\r\n\r\n            // $scope.searchText = \"\";\r\n            //$scope.pagesize = 5;\r\n            $scope.currentPage = 1;\r\n\r\n            $scope.getCurrentRows = function(){\r\n                return $filter(\"paging\")(\r\n                    $scope.getFilterRows(),\r\n                    $scope.currentPage, $scope.pagesize\r\n                );\r\n            };\r\n            $scope.getFilterRows = function(){\r\n                return $filter(\"filter\")($scope.rows || [], $scope.searchText);\r\n            };\r\n\r\n            $scope.checkAll = function(){\r\n                var rows = $scope.getCurrentRows();\r\n                var _all = rows.length && rows\r\n                    .filter(item => !item._ignore ).length && rows\r\n                    .filter(item => !item._ignore )\r\n                    .every(row => row._selected );\r\n                $scope.checkedAll = _all;\r\n                return _all;\r\n            };\r\n            $scope.selectAllChange = function (checkAll) {\r\n                var rows = $scope.getCurrentRows();\r\n                rows.filter(item => !item._ignore ).forEach(function (row) {\r\n                    row._selected = checkAll;\r\n                });\r\n                $scope.checkedAll = checkAll;\r\n            };\r\n            $scope.checkOne = function () {\r\n                var rows = $scope.getCurrentRows();\r\n                return rows.filter(item => !item._ignore ).some(function (row) {\r\n                    return row._selected;\r\n                });\r\n            };\r\n            $scope.sort = function(name, asc){\r\n                $scope.rows.sort(function(a, b){\r\n                    return (a[name] > b[name] ? 1 : -1) * (asc ? 1 : -1);\r\n                });\r\n            };\r\n            $scope.pageSizeChange =\r\n            $scope.pageChange = function(){\r\n                $scope.rows.forEach(function(item, i){\r\n                    item._selected = false;\r\n                });\r\n            };\r\n            $scope.currentItem = null;\r\n            $scope.$on(\"contextmenu\", function (e, item, de, handler) {\r\n                $scope.currentItem = item;\r\n                handler.addClass(\"contextmenu_selected\");\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                context_wrapper.fadeIn(200);\r\n                var menu = element.find(\".grid_context_menu\");\r\n                var offset = context_wrapper.offset();\r\n                var pos = getPosition(de, menu[0]);\r\n                menu.css({\r\n                    top: pos.y - offset.top + \"px\",\r\n                    left: pos.x - offset.left + \"px\"\r\n                });\r\n                $scope.rows.forEach(function (item) {\r\n                    item._selected = false;\r\n                });\r\n                item._selected = true;\r\n                $scope.$apply();\r\n                e.stopPropagation();\r\n                de.preventDefault();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"gridPagination\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require: [\"^widgetGrid\"],\r\n        conroller: function($scope){\r\n\r\n        },\r\n        link: function($scope, element, attrs, ctrls){\r\n            var grid = ctrls[0];\r\n            $scope.getStart = function(){\r\n                var current = grid.getCurrentPage();\r\n                var pagesize = grid.getPageSize();\r\n                return pagesize > 0 ? (current - 1) * pagesize + 1 : 0;\r\n            };\r\n            $scope.getEnd = function(){\r\n                var current = $scope.currentPage;\r\n                var pagesize = grid.getPageSize();\r\n                var end = current * pagesize;\r\n                var currentCount = $scope.getFilterRows().length;\r\n                return end < currentCount ? end : currentCount;\r\n            };\r\n            $scope.getCurrentCount = function(){\r\n                return $scope.getCurrentRows().length;\r\n            };\r\n        }\r\n    }\r\n}])\r\n.directive(\"ribbonTips\", [\"localize\", \"$route\", \"$location\", \"$interval\", function(localize, $route, $location, $interval){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function($scope, element, attrs){\r\n            var timer, dereg;\r\n            var fn_update_help_info = function(){\r\n                var path = $location.$$path;\r\n                if(/^\\/resource\\/network\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/resource/network/:id\";\r\n                }\r\n                if(/^\\/desktop\\/teach\\/\\d+\\/?$/.test(path)){\r\n                    path = \"/desktop/teach/:id\";\r\n                }\r\n                var help_text = attrs.myTips?localize.localizeText(attrs.myTips):localize.localizeText(path);\r\n                element.attr(\"data-content\", help_text);\r\n                if(help_text) {\r\n                    element.parent().show();\r\n                } else {\r\n                    element.parent().hide();\r\n                }\r\n            };\r\n            $scope.$on(\"$routeChangeSuccess\", function(){\r\n                fn_update_help_info();\r\n            });\r\n            if(localize.isReady()) {\r\n                fn_update_help_info();\r\n            }\r\n            $scope.$on(\"localizeLanguageChanged\", fn_update_help_info);\r\n        }\r\n    };\r\n}])\r\n.directive(\"contextmenu\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        link: function ($scope, element, attrs) {\r\n            if (attrs.contextmenuDisabled !== \"true\") {\r\n                element.bind(\"contextmenu\", function (e) {\r\n                    $scope.$emit(attrs.contextmenuEventName || \"contextmenu\", $scope.item, e, element);\r\n                });\r\n            }\r\n        }\r\n    };\r\n}])\r\n\r\n.directive(\"wizard\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        scope: {\r\n            lastText: \"@\",\r\n            btnUnable:\"=\"\r\n        },\r\n        controller: function ($scope, localize, $$$I18N) {\r\n            var steps = $scope.steps = [];\r\n            $scope.currentStep = null;\r\n            $scope.moveWth = 0;\r\n            var defaults = {\r\n                prevBtnText: \"\",\r\n                nextBtnText: \"\",\r\n                doneBtnText: \"\",\r\n            };\r\n            $scope.$on(\"currentStepChange\", function(e, stepIndex){\r\n                $scope.go(stepIndex);\r\n            });\r\n            $scope.select = function (step) {\r\n                var index;\r\n                steps.forEach(function (s, i) {\r\n                    s.selected = s === step;\r\n                    if(s.selected) {\r\n                        index = i;\r\n                    }\r\n                });\r\n                $scope.currentStep = step;\r\n                [\"prev\", \"next\", \"done\"].forEach(function(s){\r\n                    var key = s + \"BtnText\";\r\n                    $scope[key] = $$$I18N.get(step[key] || defaults[key]);\r\n                });\r\n                $scope.$emit(\"selectStepChange\", {index: index, stepScope: step});\r\n            };\r\n            $scope.getCurrentIndex = function () {\r\n                return steps.indexOf($scope.currentStep);\r\n            };\r\n\r\n            $scope.prev = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                //var e = $scope.$emit(($scope.stepEventName || \"WizardStep\"), $scope.currentStep);\r\n                var prev = steps[index - 1];\r\n                prev && $scope.select(prev);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n\r\n            };\r\n            $scope.next = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling);\r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.moveWth = $scope.getMarginValue();\r\n                };\r\n\r\n            };\r\n            $scope.go = function(index){\r\n                $scope.select(steps[index]);\r\n                $scope.moveWth = $scope.getMarginValue();\r\n            }\r\n            $scope.showPrev = function () {\r\n                return steps.indexOf($scope.currentStep) > 0 && $scope.currentStep.prevBtnText !== \"\";\r\n            };\r\n            $scope.isLast = function () {\r\n                return steps.indexOf($scope.currentStep) >= steps.length - 1;\r\n            };\r\n            $scope.done = function () {\r\n                var index = $scope.getCurrentIndex();\r\n                $scope.currentStep.is_dirty = true;\r\n                var e = $scope.$emit(($scope.stepEventName || \"WizardStep\") + \"_\" + index, $scope.currentStep, $scope.currentStep.$$nextSibling); \r\n                if ($scope.currentStep.done !== false) {\r\n                    var next = steps[index + 1];\r\n                    next && $scope.select(next);\r\n                    $scope.$emit($scope.doneEventName || \"WizardDone\", steps, steps.map(function (step) {\r\n                        return step.$$nextSibling\r\n                    }));\r\n                }\r\n            };\r\n            this.addStep = function (step) {\r\n                steps.push(step);\r\n                if (steps.length === 1) {\r\n                    $scope.select(step);\r\n                }\r\n            };\r\n            this.jumpStep = function (index) {\r\n\r\n            };\r\n            this.removeStep = function (index) {\r\n\r\n            };\r\n            this.insertStep = function (step) {\r\n\r\n            };\r\n        },\r\n        link : function($scope, element, attrs){\r\n            $scope.getMarginValue = function(){\r\n                var _idx = $scope.getCurrentIndex();\r\n                var wizardWth = element.find('.wizard').outerWidth();\r\n                var _wth = 60;\r\n                for(var i = 0; i<=_idx+1 ; i++){\r\n                    _wth+=element.find(\".steps>li\").eq(i).outerWidth();\r\n                }\r\n                if(wizardWth - _wth < 0){\r\n                    return (wizardWth - _wth) ;\r\n                }else{\r\n                    return 0;\r\n                }\r\n            };\r\n            // if(attrs.disableNav !== \"true\") {\r\n            //     element.find(\".steps\").delegate(\"li.complete\",\"click\",function(e){\r\n            //         var _idx = $(this).index();\r\n            //         $scope.go(_idx);\r\n            //     });\r\n            // }\r\n        },\r\n        template: `<div class=\"wizard\" style=\"margin-bottom:20px;\">\r\n            <ul class=\"steps\" style=\"margin-left:{{moveWth}}px\">\r\n                <li data-ng-repeat=\"step in steps\" data-target=\"#step{{ $index }}\" data-ng-class=\"{ active: getCurrentIndex() >= $index ,complete:getCurrentIndex() > $index }\">\r\n                    <span class=\"badge badge-info\">{{ $index + 1 }}</span><span localize=\"{{step.name}}\"></span><span class=\"chevron\"></span>\r\n                </li>\r\n            </ul>\r\n            <div class=\"actions\">\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"showPrev()\" data-ng-click=\"prev()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-primary btn-prev\">\r\n                    <i class=\"fa fa-arrow-left\"></i><span ng-bind=\"prevBtnText\"></span>\r\n                </button>\r\n                <button ng-show=\"!btnUnable\" type=\"button\" data-ng-if=\"!isLast()\" data-ng-click=\"next()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"nextBtnText\"></span> <i class=\"fa fa-arrow-right\"></i>\r\n                </button>\r\n                <button id='finish' ng-show=\"!btnUnable && isLast()\" type=\"button\" data-ng-click=\"done()\" ng-disabled=\"currentStep.showLoading === true\" class=\"btn btn-sm btn-success btn-next\">\r\n                    <span ng-bind=\"doneBtnText\"></span><i class=\"fa fa-check\" ></i>\r\n                </button>\r\n                <img ng-show=\"btnUnable\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n                <img ng-show=\"currentStep.showLoading === true\" src=\"img/loadingtext.gif\" width=\"24px\" height=\"24px\"/>\r\n            </div>\r\n        </div>\r\n        <div class=\"step-content\">\r\n            <form data-ng-transclude class=\"form-horizontal\" id=\"fuelux-wizard\" method=\"post\" novalidate>\r\n            </form>\r\n        </div>\r\n        <div ng-show=\"currentStep.showLoading === true\" style=\"position: absolute;top:0;right:0;bottom:0;left:0;z-index:999;\"></div>`\r\n    };\r\n}])\r\n.directive(\"wizardStep\", [function () {\r\n    return {\r\n        restrict: \"A\",\r\n        require: \"^wizard\",\r\n        transclude: true,\r\n        replace: true,\r\n        scope: {\r\n            name: \"@\",\r\n            prevBtnText: \"@\",\r\n            nextBtnText: \"@\",\r\n            doneBtnText: \"@\",\r\n            testValid: \"=\"\r\n        },\r\n        controller: function ($scope) {},\r\n        link: function (scope, element, attrs, wizard) {\r\n            wizard.addStep(scope);\r\n        },\r\n        template: `<div class=\"step-pane\" data-ng-class=\"{ active: selected }\" data-ng-show=\"selected\" data-ng-transclude></div>`\r\n    };\r\n}])\r\n\r\n.directive('areaTraffic', function ($interval,$http) {\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope:{\r\n            options : \"=\"\r\n        },\r\n        link: function (scope, e, attrs) {\r\n            Highcharts.setOptions({    //disable utc time\r\n                global: {    \r\n                    useUTC: false    \r\n                }    \r\n            }); \r\n            function init_data(){\r\n                // generate init data\r\n                var data = [],\r\n                    time = (new Date()).getTime(),\r\n                    i;\r\n\r\n                for (i = -40; i <= 0; i += 1) {\r\n                    data.push({\r\n                        x: time + i * scope.$parent.refresh_time,\r\n                        y: 0\r\n                    });\r\n                }\r\n                return data;\r\n            }\r\n            var hc_options = scope.options.options;\r\n            hc_options.chart.renderTo = e[0];\r\n            hc_options.yAxis.min = 0;\r\n            angular.forEach(hc_options.series,function(s){\r\n                s.data = init_data();\r\n            });\r\n\r\n            var highcharts = new Highcharts.Chart(hc_options);\r\n\r\n            function drawPoint(data) {\r\n                var datetime = (new Date()).getTime();\r\n                var hc_series = highcharts.series;\r\n\r\n                scope.options.drawpoint(hc_series,data,datetime);\r\n\r\n            }\r\n\r\n            function reset_highcharts(){\r\n                //reset highcharts\r\n                highcharts.destroy();\r\n                angular.forEach(hc_options.series,function(s){\r\n                    s.data = init_data();\r\n                });\r\n                highcharts = new Highcharts.Chart(hc_options);\r\n            }\r\n\r\n            scope.$watch('$parent.metric_data',function(newvalue){\r\n                if(newvalue){\r\n                    drawPoint(newvalue);\r\n                }\r\n            });\r\n\r\n            scope.$watch('$parent.refresh_time',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n            scope.$watch('$parent.item',function(newvalue){\r\n                reset_highcharts();\r\n            });\r\n\r\n        }\r\n    }\r\n})\r\n.directive(\"monitorTree\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        transclude: true,\r\n        template: `<div class=\"portlet-title clearfix padding-5\">\r\n                <div class=\"pull-left\">\r\n                    <a href=\"javascript:\" id=\"collape\" class=\"btn btn-default btn-xs\"><i class=\"fa  icon-jj-Shrinkfrom\"></i> </a>\r\n                    <a href=\"javascript:\" id=\"open\" class=\"btn btn-default  btn-xs\"><i class=\"fa icon-jj-Open\"></i></a>\r\n                </div>\r\n                <div class=\"pull-right\"><a href=\"javascript:\"class=\"btn btn-default  btn-xs\" ng-init=\"ishow=false\" ng-click=\"ishow==true?ishow=false:ishow=true;open()\"><i class=\"fa fa-search\"></i></a></div> \r\n            </div>\r\n            <div class=\"search\" ng-show=\"ishow\"><input type=\"search\" localize=\"\" ng-model=\"searchText\"></div>\r\n            <div class=\"portlet-body fuelux monitor-tree\" data-ng-transclude></div>\r\n        `,\r\n        link: function(scope, element, attrs){\r\n            element.delegate('#open', 'click', function(event) {\r\n                element.find(\".parent\").addClass('in');\r\n            });\r\n            element.delegate('#collape', 'click', function(event) {\r\n                element.find(\".parent\").removeClass('in');\r\n            });\r\n            element.delegate (\".tree-toggle\",\"click\",function(event){\r\n                var parent =$(this).parent().parent(\".parent\");\r\n                if(parent.hasClass('in')){\r\n                    parent.removeClass('in');\r\n                }else{\r\n                    parent.addClass(\"in\");\r\n                }\r\n            });\r\n            element.delegate(\".tree-it\",\"click\",function(event){\r\n                element.find(\"li\").removeClass('active');\r\n                $(this).parent(\"li\").addClass('active');\r\n            });\r\n            scope.open = function(){\r\n                element.find(\".parent\").addClass('in');\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive('ipPattern',function (ip_pattern) {\r\n\r\n    return {\r\n      require: ['ngModel','?ngRequired'],\r\n      link: function (scope, elm, attrs, ctrls) {\r\n        var ngmodelctl = ctrls[0];\r\n        var ngrequiredctl = ctrls[1];\r\n\r\n        ngmodelctl.$parsers.push(function (viewValue) {\r\n\r\n          if (ip_pattern.test(viewValue)||(!ngrequiredctl&&!viewValue)) {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', true);\r\n            return viewValue;\r\n          } else {\r\n\r\n            ngmodelctl.$setValidity('ipcheck', false);\r\n            return undefined;\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n})\r\n.directive(\"preventSpace\", [function(){\r\n    return {\r\n      restrict: \"A\",\r\n      link: function(scope, element, attrs){\r\n        element.on(\"keypress\",function(e){\r\n          if(e.keyCode === 32){\r\n            e.preventDefault();\r\n          }\r\n        })\r\n      }\r\n    };\r\n  }])\r\n.directive(\"inputNumber\", [function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        link: function(scope, element, attrs){\r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrlKey = [\r\n                8, // backspace\r\n                46,// delete\r\n                37,// left arrow\r\n                39 // right arrow\r\n            ];\r\n            element.on(\"keydown\", function(e){\r\n                var code = e.which || e.keyCode;\r\n                if(numKey.indexOf(code) > -1) {\r\n                    var num = code < 60 ? code - 48 : code - 96;\r\n                    var nextValue = this.value + num;\r\n                    if(!attrs.max) { return; }\r\n                    var max = attrs.max * 1;\r\n                    if(!isNaN(max) && nextValue <= max) {\r\n                        return;\r\n                    }\r\n                } else if(ctrlKey.indexOf(code) > -1) {\r\n                    return;\r\n                }\r\n                e.preventDefault();\r\n                return false;\r\n            });\r\n        }\r\n    };\r\n}])\r\n// .directive(\"inputDot\", [function(){\r\n//     return {\r\n//         restrict: \"AE\",\r\n//         link: function(scope, element, attrs){\r\n//             element.on(\"keydown\",function(e){\r\n//                 if(attrs.inputDot == 'true'){\r\n//                    if(e.keyCode === 190 || e.keyCode === 110 || e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                    }\r\n//                 }\r\n//                 else{\r\n//                     if(e.keyCode === 69){\r\n//                         e.preventDefault();\r\n//                     }\r\n//                 }\r\n\r\n//             });\r\n//         }\r\n//     };\r\n// }])\r\n.directive(\"formatIp\", [\"$compile\",function($compile){\r\n    return {\r\n        restrict:\"EA\",\r\n        require:\"ngModel\",\r\n        scope:{\r\n            start:\"=\",\r\n            end:\"=\"\r\n        },\r\n        link:function(scope,element,attrs,ctrl){\r\n            var ngModelCtrl = ctrl;\r\n            var required = attrs.ipRequired ? scope.$eval(attrs.ipRequired) : true;\r\n\r\n            if(!ngModelCtrl){\r\n                return;\r\n            };\r\n            var CHECKTOOLS = {};\r\n\r\n            CHECKTOOLS.checkIP = function(ip){\r\n                if(!ip) { return false; }\r\n                var parts = ip.split(\".\");\r\n                //9029bug 0.0.0.0IP\r\n                var numre = /^(0|[1-9][0-9]*)$/;\r\n                var i, valid = true;\r\n                if(parts.length !== 4) { return false; }\r\n                for(i = 0; i < 4; i++) {\r\n                    if(numre.test(parts[i]) && parseInt(parts[i]) <= 255) {\r\n                        continue;\r\n                    } else {\r\n                        valid = false;\r\n                    }\r\n                }\r\n                valid = valid && (ipformatNum(ip) > ipformatNum('1.0.0.0'));\r\n                return valid;\r\n            };\r\n\r\n            function ipformatNum(ip){\r\n                var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];   \r\n            }\r\n\r\n            CHECKTOOLS.ip2long = function(ip){\r\n                if(CHECKTOOLS.checkIP(ip)){\r\n                    var arr = ip.split('.').map(function(item){ return Number(item)});\r\n                    return arr[0]*Math.pow(256,3) + arr[1]*Math.pow(256,2) + arr[2]*Math.pow(256,1) + arr[3];\r\n                }\r\n            };\r\n            CHECKTOOLS.checkRange = function(ip,s_ip,e_ip){\r\n                if(CHECKTOOLS.checkIP(ip),CHECKTOOLS.checkIP(s_ip) && CHECKTOOLS.checkIP(e_ip)){\r\n                     var s = CHECKTOOLS.ip2long(s_ip);\r\n                     var e = CHECKTOOLS.ip2long(e_ip);\r\n                     var c = CHECKTOOLS.ip2long(ip);\r\n                     return c >= s && c <= e;\r\n                 }else{\r\n                    return false;\r\n                 }\r\n            };\r\n            var popEl = angular.element(\"<div format-ip-wrap></div>\");\r\n            var $input = $compile(popEl)(scope);\r\n            element.addClass(\"ng-hide\");\r\n            element.after($input);\r\n\r\n            // model -- ui\r\n            \r\n            ngModelCtrl.$render = function(){\r\n                var modelVal = ngModelCtrl.$modelValue;\r\n                var modelValArr;\r\n                try{\r\n                    if(modelVal === null) {\r\n                        modelValArr = [];\r\n                        ngModelCtrl.$setPristine();\r\n                    } else {\r\n                        modelValArr = modelVal.split(\".\");\r\n                    }\r\n                    [1,2,3,4].forEach(function(i,idx){\r\n                        scope[\"seg\" + i] = modelValArr[idx] || \"\";\r\n                    });\r\n                }catch(err){\r\n                }\r\n                // setValidate();\r\n            };\r\n            /*\r\n            function setValidate(){\r\n                var isValid;\r\n                if(ngModelCtrl.$modelValue){\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ngModelCtrl.$modelValue,scope.start,scope.end)\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ngModelCtrl.$modelValue);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\",isValid);\r\n                }else{\r\n                    ngModelCtrl.$setValidity(\"ip\",true);\r\n                }\r\n            };\r\n\r\n            // ui -- model\r\n            $input.on(\"input\",function(e){\r\n                scope.$apply(function(){\r\n                    var val = [1,2,3,4].map(function(i){ return scope[\"seg\" + i] || \"\"; }).join(\".\");\r\n                    var isNull = val.split(\".\").every(function(item){ return item.length===0 });\r\n                    if(isNull){\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }else{\r\n                        ngModelCtrl.$setViewValue(val);\r\n                    }\r\n                    ngModelCtrl.$render();\r\n                })\r\n            });\r\n\r\n            */\r\n\r\n            scope.$watch(\"seg1 + '.' + seg2 + '.' + seg3 + '.' + seg4\", function(ip){\r\n                var value = ngModelCtrl.$modelValue;\r\n                if(ip === \"...\") {\r\n                    if(value) {\r\n                        ngModelCtrl.$setViewValue(\"\");\r\n                    }\r\n                    if(!value || !required) {\r\n                        return ngModelCtrl.$setValidity(\"ip\", true);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", false);\r\n                } else {\r\n                    var isValid = false;\r\n                    if(scope.start && scope.end){\r\n                        isValid = CHECKTOOLS.checkRange(ip, scope.start, scope.end);\r\n                    }else{\r\n                        isValid = CHECKTOOLS.checkIP(ip);\r\n                    }\r\n                    ngModelCtrl.$setValidity(\"ip\", isValid);\r\n                    ngModelCtrl.$setViewValue(ip);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}])\r\n.directive(\"formatIpWrap\",function(){\r\n    return {\r\n        restrict: \"AE\",\r\n        replace: true,\r\n        template: `<span role=\"ipgroup\"><input type=\"text\" ng-model=\"seg1\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg2\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg3\"><span class=\"dot\">.</span><input type=\"text\" ng-model=\"seg4\"></span>`,\r\n        link: function(scope,element,attrs){\r\n            element.on(\"keydown\", \"input\", function(event){\r\n                switch(event.keyCode){\r\n                    case 110:\r\n                    case 190:\r\n                        var nextEles = $(this).nextAll(\"input\");\r\n                        nextEles.length && nextEles.eq(0).focus();\r\n                        event.preventDefault();\r\n                        break;\r\n                    case 8:\r\n                        if(!$(this).val()){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 37:\r\n                        if(this.selectionStart === 0){\r\n                            $(this).prevAll(\"input\").length && $(this).prevAll(\"input\").eq(0).focus();\r\n                        };\r\n                        break;\r\n                    case 39:\r\n                        if(this.selectionStart === $(this).val().length){\r\n                            $(this).nextAll(\"input\").length && $(this).nextAll(\"input\").eq(0).focus();\r\n                        }\r\n                        break;\r\n                    case 32:\r\n                    case 229:\r\n                        event.preventDefault();\r\n                        event.stopPropagation();\r\n                        break;\r\n                }\r\n            });\r\n            element.on(\"keypress\", \"input\",function(e){\r\n                if(e.keyCode < 48 || e.keyCode > 57){\r\n                    e.preventDefault();\r\n                }\r\n                if($(this).val().length > 2 && this.selectionStart === this.selectionEnd){\r\n                    e.preventDefault();\r\n                }\r\n            });\r\n            element.on(\"paste\",function(e){\r\n                e.preventDefault();\r\n            });\r\n            element.on(\"focus\", \"input\", function(e){\r\n                element.addClass(\"focus\");\r\n            });\r\n            element.on(\"blur\", \"input\", function(e){\r\n                element.removeClass(\"focus\");\r\n            });\r\n        }\r\n    }\r\n})\r\n.directive(\"treeNodeParent\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {users: '=', filtertext: '='},\r\n        template: '<ul role=\"tree\" class=\"menu menu-tree\" ng-repeat=\"item in getUsers()\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{item.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(item);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"node in item.children\" data-nodes=\"item.children\" data-node=\"node\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>',\r\n        controller: function($scope){\r\n            var lastFilter;\r\n            var lastFiltedResult;\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n\r\n            $scope.getUsers = function(){\r\n                var text = $scope.filtertext || \"\";\r\n                var users = $scope.users;\r\n                text = text.trim();\r\n                if(!text) { return users; }\r\n                if(text !== lastFilter) {\r\n                    lastFilter = text;\r\n                    lastFiltedResult = filterUser(angular.copy(users), text);\r\n                }\r\n                return lastFiltedResult;\r\n            };\r\n\r\n            function filterUser(users, text) {\r\n                return users.filter(function(user){\r\n                    if(user.children) {\r\n                        user.children = filterUser(user.children, text);\r\n                        return user.children.length > 0;\r\n                    } else {\r\n                        return user.user_name.indexOf(text) > -1 || user.real_name.indexOf(text) > -1;\r\n                    }\r\n                });\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n        }\r\n    };\r\n}])\r\n.directive(\"treeNode\", [\"$compile\", function($compile){\r\n    return {\r\n        restrict: 'EA',\r\n        replace: true,\r\n        scope: {node: '=', nodes: '='},\r\n        template: '<div></div>',\r\n        controller: function($scope){\r\n            $scope.add_selected = function(children){\r\n                $scope.$emit('add_selected', children);\r\n            }\r\n            $scope.add_select_rows = function($event,node,nodes){\r\n                $scope.$emit('add_select_rows', $event,node,nodes);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            if(scope.node.children) {\r\n                element.append('<ul role=\"group\" class=\"menu menu-tree\">'+\r\n                    '<div class=\"menu_header\">'+\r\n                        '<span class=\"fa icon-jj\"></span>'+\r\n                        '<span class=\"menu-name\">{{node.dept_name}}</span>'+\r\n                        '<span class=\"pull-right fa icon-jj-add\" data-ng-click=\"add_selected(node);$event.stopPropagation()\"></span>'+\r\n                    '</div>'+\r\n                    '<div class=\"menu_body\">'+\r\n                        '<tree-node ng-repeat=\"sub in node.children\" data-nodes=\"node.children\" data-node=\"sub\"></tree-node>'+\r\n                    '</div>'+\r\n                '</ul>')\r\n            }else{\r\n                element.append('<li class=\"menuitem\" ng-click=\"add_select_rows($event,node,nodes)\" ng-dblclick=\"add_selected(node)\">'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.name}}</span>'+\r\n                    '<span class=\"text-overflow text-overflow-half\">{{node.real_name}}</span>'+\r\n                  '</li>')\r\n            }\r\n            $compile(element.contents())(scope)\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiMenuList\", [\"Admin\",\"User\",\"Domain\",\"$q\",\"$$$I18N\",function(APIadmin,APIuser,APIdomain,$q,$$$I18N){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            selected: \"=menuListData\",\r\n            // domain:\"=menuListDomain\"\r\n        },\r\n        templateUrl: \"includes/userMenu.html\",\r\n        controller: function($scope){\r\n            $scope.expandedNodes = [];\r\n            $scope._users = [];\r\n            $scope.selected = $scope.selected || [];\r\n            $scope.seRows = [];\r\n            $scope.rmRows = [];\r\n            $scope.common_users = [];\r\n            function formatData(d,name){\r\n                iteration(d,name);\r\n                return d;\r\n            }\r\n            function iteration(data,childName,list){\r\n                for(var i = 0 ; i < data.length ; i++){\r\n                    $scope.expandedNodes.push(data[i]);\r\n                    if(data[i][childName] && data[i][childName].length){\r\n                        var len = iteration(data[i][childName],childName);\r\n                        if(len === 0){\r\n                            data[i] = undefined;\r\n                        }\r\n                    }\r\n                    if(!data[i]) { continue; }\r\n                    if(data[i].users && data[i].users.length > 0){\r\n                        data[i].users.map(user => {\r\n                            user.name = user.name || user.user_name;\r\n                            user._is_last = true;\r\n                            return user;\r\n                        });\r\n                        data[i][childName] = data[i].users;\r\n                    }\r\n                    if(data[i][childName] && data[i][childName].length === 0){\r\n                        data[i]= undefined;\r\n                    }\r\n                }\r\n                while(data.length > 0) {\r\n                    // \r\n                    var oldlen = data.length;\r\n                    for(var i = 0 ; i < oldlen ; i++){\r\n                        if(data[i] === undefined){\r\n                            data.splice(i,1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    if(oldlen === data.length) {\r\n                        break;\r\n                    }\r\n                }\r\n                \r\n                return data.length;\r\n            }\r\n            function removeNoChildrenDeparts(data) {\r\n                data = data.filter(noUserFilter);\r\n                data.forEach(walk);\r\n                return data;\r\n                function walk(node) {\r\n                    if(!node.dept_id) { return; }\r\n                    //  children \r\n                    if(node.children) {\r\n                        node.children = node.children.filter(noUserFilter);\r\n                        node.children.forEach(walk);\r\n                    }\r\n                }\r\n                function noUserFilter(node) {\r\n                    if(node.dept_id && !node.children && node.users.length === 0) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                }\r\n            }\r\n            function get_admin(){\r\n                var deferred = $q.defer();\r\n                APIadmin.query(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_user(){\r\n                var deferred = $q.defer();\r\n                APIuser.query_tree(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            function get_domain(){\r\n                var deferred = $q.defer();\r\n                APIdomain.list(function(res){\r\n                    deferred.resolve(res);\r\n                });\r\n                return deferred.promise;\r\n            }\r\n            $q.all([get_admin(),get_user(),get_domain()]).then(function(arr){\r\n                $scope._users = [{\r\n                    typeName: $$$I18N.get(\"\"),\r\n                    userData: arr[0].users\r\n                }];\r\n                $scope.domain_users = arr[2].result.map(function(res){\r\n                    res._name = $$$I18N.get(\"\") + \"(\" + res.name + \")\";\r\n                    return res;\r\n                });\r\n                $scope.common_users = formatData(removeNoChildrenDeparts(arr[1].result),\"children\");\r\n                console.log($scope.common_users)\r\n            });\r\n            function getLastLevelNodes(obj_levels, arrays){\r\n                if(obj_levels.children){\r\n                    obj_levels.children.forEach(function(item){\r\n                        getLastLevelNodes(item, arrays);\r\n                    })\r\n                }else{\r\n                    arrays.push(obj_levels);\r\n                }\r\n            }\r\n\r\n            $scope.$on('add_selected', function(e, levels){\r\n                var arrays = [];\r\n                getLastLevelNodes(levels, arrays);\r\n                $scope.add_selected(arrays);\r\n            })\r\n            $scope.$on('add_select_rows', function(e,$event,node,nodes){\r\n                console.log(555555, $event,node, nodes);\r\n                $scope.add_select_rows($event,node, nodes);\r\n            })\r\n            $scope.add_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    if($scope.selected.indexOf(i) === -1){\r\n                        $scope.selected.push(i);\r\n                    }\r\n                });\r\n            };\r\n            $scope.remove_selected = function(items){\r\n                var rows = items instanceof Array ? items : [items];\r\n                rows.forEach(function(i){\r\n                    $scope.selected.splice($scope.selected.indexOf(i),1);\r\n                });\r\n                $scope.rmRows = [];\r\n            };\r\n            var lastRow2 = null;\r\n            $scope.add_select_rows = function(e,item,items){\r\n                var idx = $scope.seRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.seRows.push(item) : $scope.seRows.splice(idx,1);\r\n                    lastRow2 = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = items.indexOf(lastRow2);\r\n                    var end_idx = items.indexOf(item);\r\n                    if(begin_idx === -1){\r\n                        lastRow2 = item;\r\n                        $scope.seRows = [item];\r\n                    }else{\r\n                        $scope.seRows = items.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1);\r\n                        console.log(1111111,$scope.seRows)\r\n                    }\r\n                }else{\r\n                    $scope.seRows.splice(0,$scope.seRows.length,item);\r\n                    lastRow2 = item;\r\n                }\r\n            };\r\n            var lastRow = null;\r\n            $scope.add_remove_rows = function(e,item){\r\n                var idx = $scope.rmRows.indexOf(item);\r\n                if(e.ctrlKey){\r\n                    idx === -1 ? $scope.rmRows.push(item) : $scope.rmRows.splice(idx,1);\r\n                    lastRow = item;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = $scope.selected.indexOf(lastRow);\r\n                    var end_idx = $scope.selected.indexOf(item);\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        $scope.rmRows = $scope.selected.slice(Math.min(begin_idx,end_idx),Math.max(begin_idx,end_idx)+1); \r\n                    }else{\r\n                        $scope.rmRows = [item];\r\n                        lastRow = item;\r\n                    }\r\n                }\r\n                else{\r\n                    $scope.rmRows.splice(0,$scope.rmRows.length,item);\r\n                    lastRow = item;\r\n                }\r\n            };\r\n            $scope.ltor = function(){\r\n                $scope.add_selected($scope.seRows);\r\n            };\r\n            $scope.rtol = function(){\r\n                $scope.remove_selected($scope.rmRows);\r\n            }\r\n        },\r\n        link: function(scope, element, attrs){\r\n            var last = null;\r\n            element.on(\"keyup\",'input[ng-model=\"searchText\"]',function(e){\r\n                $(\".menu_header\").addClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menu_header\",function(e){\r\n                $(this).toggleClass(\"open\");\r\n            });\r\n            element.on(\"click\",\".menuitem\", function(e){\r\n                var ele = $(this);\r\n                var menuItems = ele.parent().parent(\".menu_body\").find(\".menuitem\");\r\n                var allMenuItems = ele.parents(\".menus\").find(\".menuitem\");\r\n                if(e.ctrlKey){\r\n                    ele.hasClass(\"itemActive\") ? ele.removeClass(\"itemActive\") : ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }else if(e.shiftKey){\r\n                    var begin_idx = [].indexOf.apply(menuItems,last);\r\n                    var end_idx = [].indexOf.apply(menuItems,ele);\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    if(begin_idx !== -1 && end_idx !== -1){\r\n                        for(var i = 0; i < menuItems.length; i++){\r\n                            if(i > Math.max(begin_idx,end_idx) || i < Math.min(begin_idx,end_idx)){\r\n                                menuItems.eq(i).removeClass(\"itemActive\");\r\n                            }else{\r\n                                menuItems.eq(i).addClass(\"itemActive\");\r\n                            }\r\n                        }\r\n                    }else{\r\n                        ele.addClass(\"itemActive\");\r\n                        last = ele;\r\n                    }\r\n                }else{\r\n                    allMenuItems.removeClass(\"itemActive\");\r\n                    ele.addClass(\"itemActive\");\r\n                    last = ele;\r\n                }\r\n                \r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumber\", [\"$http\",\"$compile\",\"$templateCache\",function($http,$compile,$templateCache){\r\n    return {\r\n        restrict: \"AE\",\r\n        scope:{\r\n            step:\"@\",\r\n            max:\"@\",\r\n            userNumber: \"=ngModel\",\r\n            min:\"@\"\r\n        },\r\n        priority: 2,\r\n        require: \"ngModel\",\r\n        controller: function($scope){\r\n\r\n        },\r\n        link: function(scope, element, attrs,ctrl){\r\n\r\n            scope.addStep = Number(scope.step) || 1;\r\n            scope.addMax  = Number(scope.max) || null;\r\n            scope.addMin  = Number(scope.min) || null;\r\n\r\n            var is_dot = String(Number(scope.step)).indexOf(\".\") === -1 ? false : true; \r\n\r\n            var modelCtrl = ctrl;\r\n            var temp = $compile($(\"<div ui-input-number-wrapper></div>\")[0])(scope);\r\n            element.hide();\r\n            element.after(temp);\r\n           \r\n            var numKey = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105];\r\n            var ctrKey = [8,9,13,35,36,37,38,39,40,45,46,144,112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123,110,190];\r\n            scope.keydown = function(e){\r\n                var _code = e.keyCode;\r\n                var _valsplit = e.target.value.split(\".\"); \r\n\r\n                if(numKey.indexOf(_code) === -1 && ctrKey.indexOf(_code) === -1){\r\n                    e.preventDefault();\r\n                }\r\n                // \r\n                if(numKey.indexOf(_code) > -1 && _valsplit.length > 1 && _valsplit[1].length > 0 && e.target.selectionStart > e.target.value.indexOf(\".\")){\r\n                    e.preventDefault();\r\n                }\r\n                // \r\n                if(_code === 110 || _code === 190){\r\n                    if(!is_dot){\r\n                        e.preventDefault();\r\n                    }else{\r\n                        if(e.target.value.indexOf(\".\") !== -1){\r\n                            e.preventDefault();\r\n                        }\r\n                    }\r\n                    \r\n                }\r\n                // \r\n                if(_code === 38){\r\n                    e.preventDefault();\r\n                    scope.add(scope.addStep);\r\n                    scope.round();\r\n                }\r\n                // \r\n                if(_code === 40){\r\n                    e.preventDefault();\r\n                    scope.add(-scope.addStep);\r\n                    scope.round();\r\n                }\r\n                \r\n            };\r\n            scope.round = function(){\r\n                scope.userNumber = is_dot ? Math.round(Number(scope.userNumber)*2)/2 : Math.round(scope.userNumber);\r\n            }\r\n\r\n            modelCtrl.$render = function(){\r\n                scope.setValidation();\r\n            };\r\n            scope.setValidation = function(){\r\n                var newval = modelCtrl.$modelValue;\r\n                var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n                if(exp.test(newval)){\r\n                    if((Math.abs(scope.addMax) >= 0 && newval > scope.addMax) || (Math.abs(scope.addMin) >= 0 && newval < scope.addMin) ){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }else{\r\n                    if(newval){\r\n                        modelCtrl.$setValidity(\"number\",false);\r\n                    }else{\r\n                        modelCtrl.$setValidity(\"number\",true);\r\n                    }\r\n                }\r\n            };\r\n            scope.add = function(num){\r\n                scope.userNumber = Number(scope.userNumber) ? Number(scope.userNumber) + Number(num) : Number(num);\r\n                scope.setValidation();\r\n            };\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberWrapper\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        replace:true,\r\n        templateUrl: \"./views/vdi/common/input-number-temp.html\",\r\n        link: function(scope,element){\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiInputNumberFormatter\", [function(){\r\n    return {\r\n        restrict: \"A\",\r\n        require:\"ngModel\",\r\n        link: function(scope, element, attrs,ctrl){\r\n            var exp = /^-?([1-9]\\d*\\.?\\d*|0\\.?\\d*[1-9]\\d*|0?\\.?0+|0)$/;\r\n\r\n            ctrl.$parsers.push(function(value){\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n            ctrl.$formatters.push(function(value){\r\n\r\n                if(exp.test(value)){\r\n                    return Number(value);\r\n                }\r\n            });\r\n        }\r\n    };\r\n}])\r\n.directive(\"uiWebUpload\", [\"$http\", \"$rootScope\", \"$$$I18N\", \"$Domain\", function($http, $rootScope, $$$I18N, $Domain){\r\n    var org = XMLHttpRequest;\r\n    var org_open = org.prototype.open;\r\n    var allowUpload = window.FormData && typeof window.FormData === \"function\";\r\n    $rootScope.uploadPool = $rootScope.uploadPool || {};\r\n    return {\r\n        restrict: \"A\",\r\n        templateUrl: function(ele, attrs){\r\n            if(attrs.templateUrl){\r\n                return attrs.templateUrl;\r\n            }\r\n            return \"views/vdi/common/ui-web-upload.html\";\r\n        },\r\n        scope: {\r\n            config:\"=uiUploadConfig\",\r\n            finishHandel:\"&\"\r\n        },\r\n        controller: [\"$scope\", function(scope){\r\n            scope.$on(\"progress\", function(e, size){\r\n                if(size.id === scope.upload_id){\r\n                    scope.progressName = size.name\r\n                    scope.isUploading = true;\r\n                    var percent = size.loaded / size.total * 100;\r\n                    if(isNaN(percent)) {\r\n                        percent = 0;\r\n                    }\r\n                    scope.progressPercent = percent.toFixed(2) + \"%\";\r\n                    if(scope.progressPercent === \"100.00%\"){ scope.isUploading = false; }\r\n                    // \r\n                    scope.$apply();\r\n                }\r\n            });\r\n            scope.allowUpload = allowUpload;\r\n            scope.uploadISOSize = null;\r\n\r\n        }],\r\n        link: function(scope, element, attrs){\r\n            scope.upload_id = attrs.uiWebUpload;\r\n            scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n            scope.$on(\"localizeLanguageChanged\", function(){\r\n                // applyapply\r\n                setTimeout(function(){\r\n                     scope.btnName = $$$I18N.get(attrs.uiUploadBtnName);\r\n                     scope.$apply();\r\n                });\r\n            });\r\n\r\n            //  true \r\n            //  scope \r\n            if(attrs.uiWebUploadTest) {\r\n                var degfn = scope.$parent.$watch(attrs.uiWebUploadTest, function (v) {\r\n                    scope.disableTest = v;\r\n                });\r\n                scope.$on(\"$destroy\", degfn);\r\n                scope.disableTest = false;\r\n            } else {\r\n                scope.disableTest = true;\r\n            }\r\n\r\n            var filetype,url;\r\n            var form = element.find(\"form\");\r\n            form.attr(\"action\", url);\r\n            function checkConfig(file,config){\r\n                var filetype = attrs.uiUploadType;\r\n                var maxSize = attrs.uiUploadLimit;\r\n                var url = attrs.uiUploadUrl;\r\n\r\n                if(!url){\r\n                    throw new Error(\"no url config\");\r\n                    return false;\r\n                }\r\n                var typematch = true;\r\n                if(filetype && file) {\r\n                    typematch = (new RegExp(\"\\\\.(\" + filetype + \")$\")).test(file.name);\r\n                    if(!typematch) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"\"),\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n\r\n                if(maxSize){\r\n                    maxSize = parseInt(maxSize);\r\n                    if(isNaN(maxSize)) {\r\n                        return console.error(\"invalid upload limit:\", attrs.uiUploadLimit);\r\n                    }\r\n                    if(file.size > maxSize * Math.pow(2,30)) {\r\n                        $.bigBox({\r\n                            title : $$$I18N.get(\"INFOR_TIP\"),\r\n                            content : $$$I18N.get(\"\") + \"(\"+ maxSize +\"G)\",\r\n                            icon : \"fa fa-warning shake animated\",\r\n                            timeout : 6000\r\n                        });\r\n                        return false;\r\n                    }\r\n                }\r\n                if(file.size === 0){\r\n                    $.bigBox({\r\n                        title : $$$I18N.get(\"INFOR_TIP\"),\r\n                        content : $$$I18N.get(\"\"),\r\n                        icon : \"fa fa-warning shake animated\",\r\n                        timeout : 6000\r\n                    });\r\n                    return false;\r\n                }\r\n                else{\r\n                    return true;\r\n                }\r\n            }\r\n            function clearDOM(){\r\n                var input = element.find(\"input[type=file]\");\r\n                input.after(input.clone(true).val(''));\r\n                input.remove();\r\n                scope.isUploading = false;\r\n                scope.progressSize = 0;\r\n            }\r\n            function finish(){\r\n                $rootScope.uploadPool[attrs.uiWebUpload] = undefined;\r\n                delete $rootScope.uploadPool[attrs.uiWebUpload];\r\n            }\r\n            function success(res){\r\n                if(typeof scope.finishHandel === \"function\"){\r\n                    scope.finishHandel({response: res});\r\n                }\r\n            }\r\n            element.find(\"input[type=file]\").on(\"change\", function(e){\r\n                var file = e.target.files[0];\r\n                if(!file){\r\n                    return ;\r\n                }\r\n                // var conf = scope.config;\r\n                var isValid = checkConfig(file);\r\n                \r\n                if(isValid){\r\n                    // $.bigBox({\r\n                    //  title : $$$I18N.get(\"INFOR_TIP\"),\r\n                    //  content : $$$I18N.get(\"INFOR_UPISO\"),\r\n                    //  iconSmall : \"fa fa-warning shake animated\",\r\n                    //  timeout : 5000\r\n                    // });\r\n\r\n                    var data = new FormData();\r\n                    // \r\n                    if(attrs.uiWebUploadParams) {\r\n                        $.each(scope.$eval(attrs.uiWebUploadParams), function(k, v){\r\n                            data.append(k, v);\r\n                        });\r\n                    }\r\n                    data.append(attrs.uiWebUploadName || e.target.name, file);\r\n                    scope.progressName = file.name;\r\n                    scope.progressSize = \"(\" + (file.size / Math.pow(2,20)).toFixed(2) + \"M)\";\r\n\r\n                    $http.post($Domain + attrs.uiUploadUrl, data, {\r\n                        transformRequest: function(config){\r\n                            window.XMLHttpRequest = function(a, b, c, e){\r\n                                window.XMLHttpRequest = org;\r\n                                var xhr = new org(a, b, c, e);\r\n                                $rootScope.uploadPool[attrs.uiWebUpload] = xhr;\r\n                                xhr.open = function(q,w,e,r,t,y){\r\n                                    xhr.open = undefined;\r\n                                    delete xhr.open;\r\n                                    if(xhr.upload){\r\n                                        xhr.upload.addEventListener(\"progress\", function(e){\r\n                                            $rootScope.$broadcast(\"progress\", {\r\n                                                id: attrs.uiWebUpload,\r\n                                                name: file.name,\r\n                                                loaded: e.loaded,\r\n                                                position: e.position,\r\n                                                total: e.total,\r\n                                                totalSize: e.totalSize\r\n                                            });\r\n                                            \r\n                                        });\r\n                                        xhr.addEventListener(\"abort\", finish);\r\n                                    }\r\n                                    return org_open.call(xhr, q, w, e, r, t, y);\r\n                                }\r\n                                return xhr;\r\n                            };\r\n                            return config;\r\n                        },\r\n                        headers: {\"Content-Type\": undefined}\r\n                    }).then(function(res){\r\n                        clearDOM();\r\n                        finish(res);\r\n                        success(res);\r\n                        $rootScope.$broadcast(\"finishUpload\", true, file.name);\r\n                    },function(){\r\n                        clearDOM();\r\n                        finish();\r\n                    });\r\n                }\r\n            });\r\n                \r\n            element.find(\"button[type='button']\").on(\"click\", function(e){\r\n                $(this).prev(\"input[type=file]\").click();\r\n            });\r\n            if(attrs.btnClass) {\r\n                element.find(\"button[type='button']\").removeClass(\"btn-primary\").addClass(attrs.btnClass);\r\n            }\r\n            if(attrs.iconClass) {\r\n                element.find(\".icon\").removeClass(\"icon-jj-Upload\").addClass(attrs.iconClass);\r\n            }\r\n\r\n            element.find(\"#abortBtn\").on(\"click\", function(e){\r\n                var xhr = $rootScope.uploadPool[attrs.uiWebUpload];\r\n                xhr && xhr.abort();\r\n                clearDOM();\r\n                scope.$apply();\r\n            });\r\n        }\r\n    };\r\n}])\r\n.service(\"warnBox\",[function(){\r\n    this.warn = function(content, id, callback){\r\n        if(!$(\"#warnBox\").length){\r\n            $(\"body\").append(\"<div id='warnBox'></div>\");\r\n        }else{\r\n            $(\"#warnBox\").show();\r\n        }\r\n        $(\"body #warnBox\").append(\"<div class='box warnBox\"+id+\"'><i class='fa fa-bell'></i><div class='content'><div class='btn-close'><span></span></div><p class='detail' title=\"+content+\">\"+content+\"</p></div></div>\")\r\n        if($(\"body .warnBox\"+id+\" .detail\").height()>38){\r\n            $(\"body .warnBox\"+id+\" .detail\").addClass('highHeight');\r\n        }\r\n        $(\"#warnBox .warnBox\"+id+\" .btn-close\").click(function(e){\r\n            callback(id);\r\n        })\r\n        setTimeout(function(){\r\n            if($(\"#warnBox .warnBox\"+id+\"\")){\r\n                callback(id);\r\n            }\r\n        }, 30000)\r\n    },\r\n    this.close = function(id){\r\n        $(\"body .box.warnBox\"+id+\"\").remove();\r\n        if(!$(\"#warnBox\").children().length){\r\n            $(\"#warnBox\").hide();\r\n        }else{ $(\"#warnBox\").show(); }\r\n    }\r\n}])\r\n.controller(\"TaskListController\", [\"$scope\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\",\"$rootScope\", \"warnBox\", function($scope, task, $location, $$$I18N, UserRole,$rootScope,warnBox){\r\n    $scope.toggleTaskList = function(){\r\n        $(\"body\").toggleClass(\"show_prog\");\r\n    };\r\n    let user;\r\n    let taskTimer = null;\r\n    $scope.$on(\"NOAUTH\", () => {\r\n        user = null;\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"STOPLOG\", function(){\r\n        clearTimeout(taskTimer);\r\n    });\r\n    $scope.$on(\"AUTHED\", () => {\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    });\r\n    if(UserRole.currentUser){\r\n        user = UserRole.currentUser;\r\n        schedule();\r\n    }\r\n    $scope.rows = [];\r\n    var data = {};\r\n    $scope.$on(\"instanceIDS\", function($event, ids){\r\n        data.instances = ids;\r\n    });\r\n    $scope.$on(\"imageIDS\", function($event, ids){\r\n        data.images = ids;\r\n    });\r\n    $scope.$on(\"clientIDS\", function($event, ids){\r\n        data.clients = ids;\r\n    });\r\n    $scope.$on('modeIDS', function($event, ids){\r\n        data.modes = ids;\r\n    });\r\n    $scope.$on('nodes', function($event, ids){\r\n        data.nodes = ids;\r\n    });\r\n    $scope.$on('manageNetworkIDS', function($event, ids){\r\n        data.manage_networks = ids;\r\n    })\r\n    $scope.$on('personpools',function($event,ids){\r\n        data.personpools=ids;\r\n    })\r\n    var lists = [], flag = false;\r\n    function schedule(){\r\n        var postData = data && Object.keys(data).map(function(key){\r\n            // if(key !== \"clients\"){\r\n                return {\r\n                    key: key,\r\n                    ids: data[key]\r\n                };                \r\n            // }\r\n            // else{\r\n            //     return {\r\n            //         key: key,\r\n            //         ids: []\r\n            //     };    \r\n            // }\r\n        });\r\n        task.post(postData,\r\n            function(res){\r\n                $scope.rows = res.results.tasks.filter(item => user.real_name ===  item.user);\r\n                \r\n                Object.keys(res.results).forEach(function(key){\r\n                    if(key !== \"tasks\"){\r\n                        $scope.$root && $scope.$root.$broadcast(key + \"RowsUpdate\", res.results[key]);\r\n                    }\r\n                });\r\n                for(var i in res.results.notifies){\r\n                    var item = res.results.notifies[i], color = '#004d60', content;\r\n                    if( lists[item.id] == undefined ){\r\n                        lists[item.id] = item;\r\n                        if(item.waringtype === 0){\r\n                            warnBox.warn(item.content, item.id, function(ID){\r\n                                warnBox.close(ID);\r\n                                task.put({notify_id: ID}, function(res){  })\r\n                            })\r\n                        }\r\n                        else{\r\n                            if(item.waringtype === 1){\r\n                                color = \"#004d60\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n\r\n                            }\r\n                            else{\r\n                                color = \"#C46A69\";\r\n                                content = $$$I18N.get(item.name) + ' (' + item.target + ')';\r\n                            }\r\n                            $.bigBox({\r\n                                title:$$$I18N.get('waringtype'+item.waringtype),\r\n                                content:content,\r\n                                color : color,\r\n                                timeout : 3000\r\n                            }, function(){\r\n                                task.put({notify_id: item.id}, function(res){\r\n                                })\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                taskTimer = setTimeout(schedule, 3000);\r\n            },\r\n            function(){\r\n                taskTimer = setTimeout(schedule, 10000);\r\n            }\r\n        );\r\n        for(var k in data){\r\n            data[k] = undefined;\r\n            delete data[k];\r\n        }\r\n    }\r\n\r\n}])\r\n.controller(\"pageHeaderController\", [\"$scope\", \"UserAuth\", \"Task\", \"$location\",\"$$$I18N\", \"UserRole\", \"desktopHelpBox\",function($scope, Auth, task, $location, $$$I18N, UserRole, desktopHelpBox){\r\n    $scope.logout = function(){\r\n        Auth.logout();\r\n        desktopHelpBox.close();\r\n    };\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        desktopHelpBox.close();\r\n    });\r\n    $scope.$on(\"DMS\", function(e,dms){\r\n        $scope.dmsURL = dms;\r\n        $$$storage.setSessionStorage('DMS', dms);\r\n    })\r\n    $scope.dmsURL = $$$storage.getSessionStorage('DMS') || 'nodms';\r\n    \r\n}])\r\n.controller(\"LogoController\", [\"$scope\",\"settings\", \"$Domain\", \"$$$version\", function($scope, settings, $Domain, $$$version){\r\n    $scope.domain = $Domain;\r\n    $scope.version = $$$version;\r\n    $scope.languages = settings.languages;\r\n    $scope.currentLang = settings.currentLang;\r\n}])\r\n.controller(\"SkinController\", [\"$scope\", function($scope){\r\n    $scope.changeSkin = function(theme){\r\n        $scope.$root.$broadcast(\"changeSkin\", theme)\r\n    }\r\n}])\r\n.controller(\"userLoginInfoController\", [\"$scope\", \"UserRole\", function($scope, Role){\r\n    $scope.loginUser = Role.currentUser;\r\n    $scope.$on(\"AUTHED\", function(name, userInfo){\r\n        $scope.loginUser = userInfo;\r\n    });\r\n    $scope.$on(\"NOAUTH\", function(){\r\n        $scope.loginUser = null;\r\n    });\r\n}])\r\n.controller(\"AlarmController\", [\"$scope\", \"$modal\", \"SystemAlarm\", \"AlarmHistory\", function($scope, $modal, alarm, AlarmHistory){\r\n    $scope.isOpen = false;\r\n    $scope.open = function(){\r\n        $scope.isOpen = true;\r\n    }\r\n    $scope.close = function(e){\r\n        if(e)\r\n            e.stopPropagation();\r\n        $scope.isOpen = false;\r\n    }\r\n    // function findDif(oldArray, newArray, difAttr){\r\n    //     if(newArray.length){\r\n    //         var length = oldArray.length>=newArray.length?oldArray.length:newArray.length;\r\n    //         var difs = [];\r\n    //         for(var i=0; i<length; i++){\r\n    //             if(newArray[i]){\r\n    //                 var different = oldArray.filter(function(item){ return item[difAttr] == newArray[i][difAttr] })[0];\r\n    //                 if(!different){ difs.push(newArray[i]) };\r\n    //             }\r\n    //         }\r\n    //         return difs;\r\n    //     }else{ return []; }\r\n    // };\r\n\r\n    // var oldAlarms = [];\r\n    $scope.$on(\"alarmsRowsUpdate\", function($event, data){\r\n        $scope.alarms = data;\r\n        // if(!$scope.isOpen){\r\n        //     var unreads = [];\r\n        //     data.forEach(function(item){\r\n        //         if(!item.is_read){ unreads.push(item) }\r\n        //     })\r\n        //     if(unreads.length){\r\n        //         $scope.open();\r\n        //         setTimeout(function(){\r\n        //             $scope.close();\r\n        //         }, 30000)\r\n        //     }\r\n        // }\r\n\r\n        // var difs = findDif(oldAlarms, data, 'id');\r\n        // if(!$scope.isOpen && difs.length){\r\n        //     oldAlarms = data;\r\n        //     $scope.open();\r\n        //     setTimeout(function(){\r\n        //         $scope.close();\r\n        //     }, 30000)\r\n        // }\r\n    })\r\n    $scope.delete = function(){\r\n        AlarmHistory.setRead({ids: $scope.alarms.map(function(item){ return item.id; })},function(res){\r\n            $scope.alarms = [];\r\n            $scope.isOpen = false;\r\n        })\r\n    }\r\n}])\r\n.filter(\"interfaceFilter\",[function(){\r\n    return function(data,idx,nets){\r\n        var invalidArr = [];\r\n        nets.forEach((n,i) => {\r\n            if(i !== idx && n._data_dev && n._data_dev._dev){\r\n                invalidArr.push(n._data_dev._dev);\r\n            }\r\n        });\r\n        return data.filter(function(d){\r\n           if(invalidArr.indexOf(d._dev) === -1){\r\n                return true;\r\n           }\r\n           return false;\r\n        });\r\n    }\r\n}])\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/vdi/vdi.js"],"sourceRoot":""}