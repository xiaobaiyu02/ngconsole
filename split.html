<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="renderer" content="webkit">
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	<link rel="icon" sizes="any" mask href="/favicon.ico"/>
	<title></title>
	<link rel="stylesheet" type="text/css" media="screen" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" media="screen" href="css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" media="screen" href="css/font-jj.css">
	<link rel="stylesheet" type="text/css" media="screen" href="css/smartadmin-production.min.css">
	<link rel="stylesheet" href="css/your_style.css">
    <style type="text/css">
        .split-brain-wrapper, .restore{
            padding: 20px 0 0 40px;
        }
        .split-brain-wrapper h5{
            font-size: 15px;
            font-weight: bold;
        }
        .split-brain-wrapper>section{
            margin-bottom: 10px;
        }
        .split-brain-wrapper>section img{
            float: left;
            margin: 8px -28px;
        }
        .reason{
            color: #8e8e8e;
        }
        .server{
            border: 1px solid #cdcdcd;
            padding: 0 20px 20px;
        }
        .server .title{
            margin: 0 -20px 15px -20px;
            padding: 10px 0;
            background-color: #eee;
        }
        .server .title strong, .restore strong{
            font-size: 15px;
        }
        .server .title.priority{
            background-image: url('data:image/png;base64,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');
            background-repeat: no-repeat;
            background-position: right top;
            background-size: contain;
        }
        .server .desc{
            padding-bottom: 25px;
        }
        .server .desc>div:nth-child(1){
            float: left;
        }
        .server .desc>div:nth-child(2){
            float: right;
        }
        div.table{
            height: 150px;
            overflow-y: auto;
        }
        .restore strong{
            display: block;
            margin-bottom: 30px;
        }
	</style>
</head>
<body ng-controller="splitBrainController" style="visibility:hidden;" ng-style="{visibility: 'visible'}">
    <div class="split-brain-wrapper" ng-show="!restore_host_ip">
        <section class="col-xs-12">
            <img src="img/warn.png" alt="">
            <h5 localize='手动修复'></h5>
            <p class='reason' localize='裂脑原因'></p>
        </section>
        <section class="col-xs-12 hosts">
            <img src="img/hand.png" alt="">
            <h5 localize='选择修复主体'></h5>
            <img ng-show="loading" src="img/loadingtext.gif" width="24px" height="24px" alt="">
            <div class="col-xs-4" ng-repeat="server in servers" ng-show='!loading'>
                <div class="server">
                    <div class="title text-center" ng-class="{priority:server.high}"><strong>{{ server.hostname }}</strong><br>{{ server.host_ip }}</div>
                    <div class="desc">
                        <div>
                            <strong localize='数据库大小'></strong>：<strong>{{ server.db_size/1024 }}KB</strong>
                        </div>
                        <div>
                            <strong localize='最后同步时间'></strong>：<strong>{{ server.db_update_time }}</strong>
                        </div>
                    </div>
                    <div class='table'>
                        <table cellspacing="0" cellpadding="0" border="0" role="grid" class="table table-bordered table-condensed">
                            <thead>
                                <tr><th localize='网卡名称'></th><th localize='IP地址'></th></tr>
                            </thead>
                            <tbody>
                                <tr data-ng-repeat="net in server.networks">
                                    <td>{{ net.iface }}</td>
                                    <td><div ng-repeat="ip in net.ips">{{ip}}</div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <footer class="text-center"><a class="btn btn btn-success" localize='选择本机进行控制修复' ng-click="selectServer(server)"></a></footer>
                </div>
            </div>
        </section>
        <section class="col-xs-12">
            <img src="img/question.png" alt="">
            <h5 localize='联系客服'></h5>
        </section>
    </div>
    <div class="restore" ng-show="restore_host_ip">
        <strong localize='裂脑修复主机' param1='{{ restore_host_ip }}'></strong>
        <p>
            <span localize='点击'></span>
            <a ng-disabled="restoring=='restoring' || (restoring=='restoring_finish' && restore_status=='restoring_suc')" class="btn btn btn-success" localize='开始修复' ng-click="restoreSplit()"></a>
            <span localize='按钮'></span>,
            <span localize='系统将自动进行修复'></span>,&nbsp;&nbsp;
            <span localize='点击'></span>
            <a ng-disabled="restoring=='restoring' || (restoring=='restoring_finish' && restore_status=='restoring_suc')" class="btn btn btn-success" localize='返回' ng-click="back()"></a>
            <span localize='返回裂脑'></span>
        </p>
        <br>
        <p ng-show="click_restore=='click'">
            <img ng-show="restoring=='restoring'" src="img/loadingtext.gif" width="24px" height="24px"  alt="">
            <i ng-show="restoring=='restoring_finish' && restore_status=='restoring_suc'" class="fa txt-color-greenjj icon-jj-Complete succuss-tag-icon" style="opacity: 1"></i>
            <img ng-show="restoring=='restoring_finish' && restore_status=='restoring_fail'" src="img/fail.png" width="24px" height="24px"  alt="">
            <span localize="系统正在修复控制服务"></span>----
            <span ng-show="restoring=='restoring'" localize="执行中"></span>
            <span ng-show="restoring=='restoring_finish' && restore_status=='restoring_suc'" localize="完成"></span>
            <span ng-show="restoring=='restoring_finish' && restore_status=='restoring_fail'" localize="失败"></span>
            <br>
            <read-count ng-if="restoring=='restoring_finish' && restore_status=='restoring_suc'" localize='裂脑修复完成' param1='{{ count }}' param2='{{ FloatingIP }}'></read-count>
            <p ng-show="restoring=='restoring_finish' && restore_status=='restoring_fail'" localize='裂脑修复失败'></p>
        </p>
    </div>
</body>
<script src="js/libs/jquery-2.1.1.js"></script>
<script src="js/libs/angular/angular.js"></script>
<script src="js/libs/angular/angular-route.js"></script>
<script src="js/libs/angular/angular-resource.js"></script>

<script src="js/libs/angular/ui-bootstrap-custom-tpls-0.11.0.js"></script>
<script src="js/notification/SmartNotification.min.js"></script>

<script src="js/env.js"></script>

<script>$BootScript("split")</script>
<script>var $$$MAIN_MODULE = "vdi.split";</script>
</html>
